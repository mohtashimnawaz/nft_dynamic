var B5=Object.defineProperty;var U5=(r,e,t)=>e in r?B5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Ei=(r,e,t)=>U5(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Ya(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function L1(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var vS={exports:{}},Nm={},wS={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function F5(){if(E2)return tr;E2=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),w=Symbol.iterator;function _(y){return y===null||typeof y!="object"?null:(y=w&&y[w]||y["@@iterator"],typeof y=="function"?y:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,L={};function N(y,u,S){this.props=y,this.context=u,this.refs=L,this.updater=S||x}N.prototype.isReactComponent={},N.prototype.setState=function(y,u){if(typeof y!="object"&&typeof y!="function"&&y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,y,u,"setState")},N.prototype.forceUpdate=function(y){this.updater.enqueueForceUpdate(this,y,"forceUpdate")};function C(){}C.prototype=N.prototype;function D(y,u,S){this.props=y,this.context=u,this.refs=L,this.updater=S||x}var k=D.prototype=new C;k.constructor=D,A(k,N.prototype),k.isPureReactComponent=!0;var F=Array.isArray,Q=Object.prototype.hasOwnProperty,G={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function ee(y,u,S){var W,$={},se=null,me=null;if(u!=null)for(W in u.ref!==void 0&&(me=u.ref),u.key!==void 0&&(se=""+u.key),u)Q.call(u,W)&&!Y.hasOwnProperty(W)&&($[W]=u[W]);var _e=arguments.length-2;if(_e===1)$.children=S;else if(1<_e){for(var be=Array(_e),wt=0;wt<_e;wt++)be[wt]=arguments[wt+2];$.children=be}if(y&&y.defaultProps)for(W in _e=y.defaultProps,_e)$[W]===void 0&&($[W]=_e[W]);return{$$typeof:r,type:y,key:se,ref:me,props:$,_owner:G.current}}function te(y,u){return{$$typeof:r,type:y.type,key:u,ref:y.ref,props:y.props,_owner:y._owner}}function U(y){return typeof y=="object"&&y!==null&&y.$$typeof===r}function V(y){var u={"=":"=0",":":"=2"};return"$"+y.replace(/[=:]/g,function(S){return u[S]})}var K=/\/+/g;function E(y,u){return typeof y=="object"&&y!==null&&y.key!=null?V(""+y.key):u.toString(36)}function a(y,u,S,W,$){var se=typeof y;(se==="undefined"||se==="boolean")&&(y=null);var me=!1;if(y===null)me=!0;else switch(se){case"string":case"number":me=!0;break;case"object":switch(y.$$typeof){case r:case e:me=!0}}if(me)return me=y,$=$(me),y=W===""?"."+E(me,0):W,F($)?(S="",y!=null&&(S=y.replace(K,"$&/")+"/"),a($,u,S,"",function(wt){return wt})):$!=null&&(U($)&&($=te($,S+(!$.key||me&&me.key===$.key?"":(""+$.key).replace(K,"$&/")+"/")+y)),u.push($)),1;if(me=0,W=W===""?".":W+":",F(y))for(var _e=0;_e<y.length;_e++){se=y[_e];var be=W+E(se,_e);me+=a(se,u,S,be,$)}else if(be=_(y),typeof be=="function")for(y=be.call(y),_e=0;!(se=y.next()).done;)se=se.value,be=W+E(se,_e++),me+=a(se,u,S,be,$);else if(se==="object")throw u=String(y),Error("Objects are not valid as a React child (found: "+(u==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":u)+"). If you meant to render a collection of children, use an array instead.");return me}function p(y,u,S){if(y==null)return y;var W=[],$=0;return a(y,W,"","",function(se){return u.call(S,se,$++)}),W}function M(y){if(y._status===-1){var u=y._result;u=u(),u.then(function(S){(y._status===0||y._status===-1)&&(y._status=1,y._result=S)},function(S){(y._status===0||y._status===-1)&&(y._status=2,y._result=S)}),y._status===-1&&(y._status=0,y._result=u)}if(y._status===1)return y._result.default;throw y._result}var R={current:null},T={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:T,ReactCurrentOwner:G};function I(){throw Error("act(...) is not supported in production builds of React.")}return tr.Children={map:p,forEach:function(y,u,S){p(y,function(){u.apply(this,arguments)},S)},count:function(y){var u=0;return p(y,function(){u++}),u},toArray:function(y){return p(y,function(u){return u})||[]},only:function(y){if(!U(y))throw Error("React.Children.only expected to receive a single React element child.");return y}},tr.Component=N,tr.Fragment=t,tr.Profiler=i,tr.PureComponent=D,tr.StrictMode=n,tr.Suspense=c,tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,tr.act=I,tr.cloneElement=function(y,u,S){if(y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+y+".");var W=A({},y.props),$=y.key,se=y.ref,me=y._owner;if(u!=null){if(u.ref!==void 0&&(se=u.ref,me=G.current),u.key!==void 0&&($=""+u.key),y.type&&y.type.defaultProps)var _e=y.type.defaultProps;for(be in u)Q.call(u,be)&&!Y.hasOwnProperty(be)&&(W[be]=u[be]===void 0&&_e!==void 0?_e[be]:u[be])}var be=arguments.length-2;if(be===1)W.children=S;else if(1<be){_e=Array(be);for(var wt=0;wt<be;wt++)_e[wt]=arguments[wt+2];W.children=_e}return{$$typeof:r,type:y.type,key:$,ref:se,props:W,_owner:me}},tr.createContext=function(y){return y={$$typeof:o,_currentValue:y,_currentValue2:y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},y.Provider={$$typeof:s,_context:y},y.Consumer=y},tr.createElement=ee,tr.createFactory=function(y){var u=ee.bind(null,y);return u.type=y,u},tr.createRef=function(){return{current:null}},tr.forwardRef=function(y){return{$$typeof:l,render:y}},tr.isValidElement=U,tr.lazy=function(y){return{$$typeof:h,_payload:{_status:-1,_result:y},_init:M}},tr.memo=function(y,u){return{$$typeof:d,type:y,compare:u===void 0?null:u}},tr.startTransition=function(y){var u=T.transition;T.transition={};try{y()}finally{T.transition=u}},tr.unstable_act=I,tr.useCallback=function(y,u){return R.current.useCallback(y,u)},tr.useContext=function(y){return R.current.useContext(y)},tr.useDebugValue=function(){},tr.useDeferredValue=function(y){return R.current.useDeferredValue(y)},tr.useEffect=function(y,u){return R.current.useEffect(y,u)},tr.useId=function(){return R.current.useId()},tr.useImperativeHandle=function(y,u,S){return R.current.useImperativeHandle(y,u,S)},tr.useInsertionEffect=function(y,u){return R.current.useInsertionEffect(y,u)},tr.useLayoutEffect=function(y,u){return R.current.useLayoutEffect(y,u)},tr.useMemo=function(y,u){return R.current.useMemo(y,u)},tr.useReducer=function(y,u,S){return R.current.useReducer(y,u,S)},tr.useRef=function(y){return R.current.useRef(y)},tr.useState=function(y){return R.current.useState(y)},tr.useSyncExternalStore=function(y,u,S){return R.current.useSyncExternalStore(y,u,S)},tr.useTransition=function(){return R.current.useTransition()},tr.version="18.3.1",tr}var b2;function k1(){return b2||(b2=1,wS.exports=F5()),wS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function z5(){if(A2)return Nm;A2=1;var r=k1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var h,w={},_=null,x=null;d!==void 0&&(_=""+d),c.key!==void 0&&(_=""+c.key),c.ref!==void 0&&(x=c.ref);for(h in c)n.call(c,h)&&!s.hasOwnProperty(h)&&(w[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)w[h]===void 0&&(w[h]=c[h]);return{$$typeof:e,type:l,key:_,ref:x,props:w,_owner:i.current}}return Nm.Fragment=t,Nm.jsx=o,Nm.jsxs=o,Nm}var T2;function W5(){return T2||(T2=1,vS.exports=z5()),vS.exports}var Xt=W5(),Ce=k1();const Ut=Ya(Ce);var Ov={},_S={exports:{}},fo={},xS={exports:{}},SS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function V5(){return R2||(R2=1,(function(r){function e(T,P){var I=T.length;T.push(P);e:for(;0<I;){var y=I-1>>>1,u=T[y];if(0<i(u,P))T[y]=P,T[I]=u,I=y;else break e}}function t(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var P=T[0],I=T.pop();if(I!==P){T[0]=I;e:for(var y=0,u=T.length,S=u>>>1;y<S;){var W=2*(y+1)-1,$=T[W],se=W+1,me=T[se];if(0>i($,I))se<u&&0>i(me,$)?(T[y]=me,T[se]=I,y=se):(T[y]=$,T[W]=I,y=W);else if(se<u&&0>i(me,I))T[y]=me,T[se]=I,y=se;else break e}}return P}function i(T,P){var I=T.sortIndex-P.sortIndex;return I!==0?I:T.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,w=null,_=3,x=!1,A=!1,L=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(T){for(var P=t(d);P!==null;){if(P.callback===null)n(d);else if(P.startTime<=T)n(d),P.sortIndex=P.expirationTime,e(c,P);else break;P=t(d)}}function F(T){if(L=!1,k(T),!A)if(t(c)!==null)A=!0,M(Q);else{var P=t(d);P!==null&&R(F,P.startTime-T)}}function Q(T,P){A=!1,L&&(L=!1,C(ee),ee=-1),x=!0;var I=_;try{for(k(P),w=t(c);w!==null&&(!(w.expirationTime>P)||T&&!V());){var y=w.callback;if(typeof y=="function"){w.callback=null,_=w.priorityLevel;var u=y(w.expirationTime<=P);P=r.unstable_now(),typeof u=="function"?w.callback=u:w===t(c)&&n(c),k(P)}else n(c);w=t(c)}if(w!==null)var S=!0;else{var W=t(d);W!==null&&R(F,W.startTime-P),S=!1}return S}finally{w=null,_=I,x=!1}}var G=!1,Y=null,ee=-1,te=5,U=-1;function V(){return!(r.unstable_now()-U<te)}function K(){if(Y!==null){var T=r.unstable_now();U=T;var P=!0;try{P=Y(!0,T)}finally{P?E():(G=!1,Y=null)}}else G=!1}var E;if(typeof D=="function")E=function(){D(K)};else if(typeof MessageChannel<"u"){var a=new MessageChannel,p=a.port2;a.port1.onmessage=K,E=function(){p.postMessage(null)}}else E=function(){N(K,0)};function M(T){Y=T,G||(G=!0,E())}function R(T,P){ee=N(function(){T(r.unstable_now())},P)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_continueExecution=function(){A||x||(A=!0,M(Q))},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(T){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var I=_;_=P;try{return T()}finally{_=I}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(T,P){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var I=_;_=T;try{return P()}finally{_=I}},r.unstable_scheduleCallback=function(T,P,I){var y=r.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?y+I:y):I=y,T){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return u=I+u,T={id:h++,callback:P,priorityLevel:T,startTime:I,expirationTime:u,sortIndex:-1},I>y?(T.sortIndex=I,e(d,T),t(c)===null&&T===t(d)&&(L?(C(ee),ee=-1):L=!0,R(F,I-y))):(T.sortIndex=u,e(c,T),A||x||(A=!0,M(Q))),T},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(T){var P=_;return function(){var I=_;_=P;try{return T.apply(this,arguments)}finally{_=I}}}})(SS)),SS}var C2;function H5(){return C2||(C2=1,xS.exports=V5()),xS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function G5(){if(I2)return fo;I2=1;var r=k1(),e=H5();function t(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(f,m){o(f,m),o(f+"Capture",m)}function o(f,m){for(i[f]=m,f=0;f<m.length;f++)n.add(m[f])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},w={};function _(f){return c.call(w,f)?!0:c.call(h,f)?!1:d.test(f)?w[f]=!0:(h[f]=!0,!1)}function x(f,m,b,B){if(b!==null&&b.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return B?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function A(f,m,b,B){if(m===null||typeof m>"u"||x(f,m,b,B))return!0;if(B)return!1;if(b!==null)switch(b.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function L(f,m,b,B,H,ne,ce){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=B,this.attributeNamespace=H,this.mustUseProperty=b,this.propertyName=f,this.type=m,this.sanitizeURL=ne,this.removeEmptyString=ce}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){N[f]=new L(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];N[m]=new L(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){N[f]=new L(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){N[f]=new L(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){N[f]=new L(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){N[f]=new L(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){N[f]=new L(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){N[f]=new L(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){N[f]=new L(f,5,!1,f.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function D(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(C,D);N[m]=new L(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(C,D);N[m]=new L(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(C,D);N[m]=new L(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){N[f]=new L(f,1,!1,f.toLowerCase(),null,!1,!1)}),N.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){N[f]=new L(f,1,!1,f.toLowerCase(),null,!0,!0)});function k(f,m,b,B){var H=N.hasOwnProperty(m)?N[m]:null;(H!==null?H.type!==0:B||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(A(m,b,H,B)&&(b=null),B||H===null?_(m)&&(b===null?f.removeAttribute(m):f.setAttribute(m,""+b)):H.mustUseProperty?f[H.propertyName]=b===null?H.type===3?!1:"":b:(m=H.attributeName,B=H.attributeNamespace,b===null?f.removeAttribute(m):(H=H.type,b=H===3||H===4&&b===!0?"":""+b,B?f.setAttributeNS(B,m,b):f.setAttribute(m,b))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),G=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),V=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),a=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),T=Symbol.iterator;function P(f){return f===null||typeof f!="object"?null:(f=T&&f[T]||f["@@iterator"],typeof f=="function"?f:null)}var I=Object.assign,y;function u(f){if(y===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);y=m&&m[1]||""}return`
`+y+f}var S=!1;function W(f,m){if(!f||S)return"";S=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(lt){var B=lt}Reflect.construct(f,[],m)}else{try{m.call()}catch(lt){B=lt}f.call(m.prototype)}else{try{throw Error()}catch(lt){B=lt}f()}}catch(lt){if(lt&&B&&typeof lt.stack=="string"){for(var H=lt.stack.split(`
`),ne=B.stack.split(`
`),ce=H.length-1,Se=ne.length-1;1<=ce&&0<=Se&&H[ce]!==ne[Se];)Se--;for(;1<=ce&&0<=Se;ce--,Se--)if(H[ce]!==ne[Se]){if(ce!==1||Se!==1)do if(ce--,Se--,0>Se||H[ce]!==ne[Se]){var ke=`
`+H[ce].replace(" at new "," at ");return f.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",f.displayName)),ke}while(1<=ce&&0<=Se);break}}}finally{S=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?u(f):""}function $(f){switch(f.tag){case 5:return u(f.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 2:case 15:return f=W(f.type,!1),f;case 11:return f=W(f.type.render,!1),f;case 1:return f=W(f.type,!0),f;default:return""}}function se(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Y:return"Fragment";case G:return"Portal";case te:return"Profiler";case ee:return"StrictMode";case E:return"Suspense";case a:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case V:return(f.displayName||"Context")+".Consumer";case U:return(f._context.displayName||"Context")+".Provider";case K:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case p:return m=f.displayName||null,m!==null?m:se(f.type)||"Memo";case M:m=f._payload,f=f._init;try{return se(f(m))}catch{}}return null}function me(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(m);case 8:return m===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function _e(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function be(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function wt(f){var m=be(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),B=""+f[m];if(!f.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var H=b.get,ne=b.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return H.call(this)},set:function(ce){B=""+ce,ne.call(this,ce)}}),Object.defineProperty(f,m,{enumerable:b.enumerable}),{getValue:function(){return B},setValue:function(ce){B=""+ce},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Ze(f){f._valueTracker||(f._valueTracker=wt(f))}function Pe(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var b=m.getValue(),B="";return f&&(B=be(f)?f.checked?"true":"false":f.value),f=B,f!==b?(m.setValue(f),!0):!1}function ge(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Ge(f,m){var b=m.checked;return I({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function je(f,m){var b=m.defaultValue==null?"":m.defaultValue,B=m.checked!=null?m.checked:m.defaultChecked;b=_e(m.value!=null?m.value:b),f._wrapperState={initialChecked:B,initialValue:b,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function yt(f,m){m=m.checked,m!=null&&k(f,"checked",m,!1)}function He(f,m){yt(f,m);var b=_e(m.value),B=m.type;if(b!=null)B==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(B==="submit"||B==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?Nt(f,m.type,b):m.hasOwnProperty("defaultValue")&&Nt(f,m.type,_e(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function nt(f,m,b){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var B=m.type;if(!(B!=="submit"&&B!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,b||m===f.value||(f.value=m),f.defaultValue=m}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function Nt(f,m,b){(m!=="number"||ge(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var fe=Array.isArray;function oe(f,m,b,B){if(f=f.options,m){m={};for(var H=0;H<b.length;H++)m["$"+b[H]]=!0;for(b=0;b<f.length;b++)H=m.hasOwnProperty("$"+f[b].value),f[b].selected!==H&&(f[b].selected=H),H&&B&&(f[b].defaultSelected=!0)}else{for(b=""+_e(b),m=null,H=0;H<f.length;H++){if(f[H].value===b){f[H].selected=!0,B&&(f[H].defaultSelected=!0);return}m!==null||f[H].disabled||(m=f[H])}m!==null&&(m.selected=!0)}}function Oe(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return I({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Te(f,m){var b=m.value;if(b==null){if(b=m.children,m=m.defaultValue,b!=null){if(m!=null)throw Error(t(92));if(fe(b)){if(1<b.length)throw Error(t(93));b=b[0]}m=b}m==null&&(m=""),b=m}f._wrapperState={initialValue:_e(b)}}function Le(f,m){var b=_e(m.value),B=_e(m.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),m.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),B!=null&&(f.defaultValue=""+B)}function ot(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function et(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ye(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?et(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Et,ut=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,b,B,H){MSApp.execUnsafeLocalFunction(function(){return f(m,b,B,H)})}:f})(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(Et=Et||document.createElement("div"),Et.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Et.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function re(f,m){if(m){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=m;return}}f.textContent=m}var j={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q=["Webkit","ms","Moz","O"];Object.keys(j).forEach(function(f){q.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),j[m]=j[f]})});function ue(f,m,b){return m==null||typeof m=="boolean"||m===""?"":b||typeof m!="number"||m===0||j.hasOwnProperty(f)&&j[f]?(""+m).trim():m+"px"}function ve(f,m){f=f.style;for(var b in m)if(m.hasOwnProperty(b)){var B=b.indexOf("--")===0,H=ue(b,m[b],B);b==="float"&&(b="cssFloat"),B?f.setProperty(b,H):f[b]=H}}var ye=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function le(f,m){if(m){if(ye[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Xe(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var de=null;function Re(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Ue=null,Me=null,qe=null;function Rt(f){if(f=va(f)){if(typeof Ue!="function")throw Error(t(280));var m=f.stateNode;m&&(m=Yd(m),Ue(f.stateNode,f.type,m))}}function ct(f){Me?qe?qe.push(f):qe=[f]:Me=f}function gt(){if(Me){var f=Me,m=qe;if(qe=Me=null,Rt(f),m)for(f=0;f<m.length;f++)Rt(m[f])}}function Sn(f,m){return f(m)}function ht(){}var ae=!1;function J(f,m,b){if(ae)return f(m,b);ae=!0;try{return Sn(f,m,b)}finally{ae=!1,(Me!==null||qe!==null)&&(ht(),gt())}}function X(f,m){var b=f.stateNode;if(b===null)return null;var B=Yd(b);if(B===null)return null;b=B[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(f=f.type,B=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!B;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(t(231,m,typeof b));return b}var he=!1;if(l)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){he=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch{he=!1}function Ae(f,m,b,B,H,ne,ce,Se,ke){var lt=Array.prototype.slice.call(arguments,3);try{m.apply(b,lt)}catch(Ct){this.onError(Ct)}}var Ne=!1,dn=null,mt=!1,_t=null,Dn={onError:function(f){Ne=!0,dn=f}};function vt(f,m,b,B,H,ne,ce,Se,ke){Ne=!1,dn=null,Ae.apply(Dn,arguments)}function Lt(f,m,b,B,H,ne,ce,Se,ke){if(vt.apply(this,arguments),Ne){if(Ne){var lt=dn;Ne=!1,dn=null}else throw Error(t(198));mt||(mt=!0,_t=lt)}}function Nr(f){var m=f,b=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(b=m.return),f=m.return;while(f)}return m.tag===3?b:null}function Ot(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function kt(f){if(Nr(f)!==f)throw Error(t(188))}function pe(f){var m=f.alternate;if(!m){if(m=Nr(f),m===null)throw Error(t(188));return m!==f?null:f}for(var b=f,B=m;;){var H=b.return;if(H===null)break;var ne=H.alternate;if(ne===null){if(B=H.return,B!==null){b=B;continue}break}if(H.child===ne.child){for(ne=H.child;ne;){if(ne===b)return kt(H),f;if(ne===B)return kt(H),m;ne=ne.sibling}throw Error(t(188))}if(b.return!==B.return)b=H,B=ne;else{for(var ce=!1,Se=H.child;Se;){if(Se===b){ce=!0,b=H,B=ne;break}if(Se===B){ce=!0,B=H,b=ne;break}Se=Se.sibling}if(!ce){for(Se=ne.child;Se;){if(Se===b){ce=!0,b=ne,B=H;break}if(Se===B){ce=!0,B=ne,b=H;break}Se=Se.sibling}if(!ce)throw Error(t(189))}}if(b.alternate!==B)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?f:m}function De(f){return f=pe(f),f!==null?$e(f):null}function $e(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=$e(f);if(m!==null)return m;f=f.sibling}return null}var Qe=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,At=e.unstable_shouldYield,Ft=e.unstable_requestPaint,bt=e.unstable_now,Vt=e.unstable_getCurrentPriorityLevel,nn=e.unstable_ImmediatePriority,sn=e.unstable_UserBlockingPriority,qt=e.unstable_NormalPriority,Tn=e.unstable_LowPriority,Rn=e.unstable_IdlePriority,En=null,un=null;function $t(f){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(En,f,void 0,(f.current.flags&128)===128)}catch{}}var Dt=Math.clz32?Math.clz32:Fr,Mn=Math.log,On=Math.LN2;function Fr(f){return f>>>=0,f===0?32:31-(Mn(f)/On|0)|0}var yi=64,ir=4194304;function Kt(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function pt(f,m){var b=f.pendingLanes;if(b===0)return 0;var B=0,H=f.suspendedLanes,ne=f.pingedLanes,ce=b&268435455;if(ce!==0){var Se=ce&~H;Se!==0?B=Kt(Se):(ne&=ce,ne!==0&&(B=Kt(ne)))}else ce=b&~H,ce!==0?B=Kt(ce):ne!==0&&(B=Kt(ne));if(B===0)return 0;if(m!==0&&m!==B&&(m&H)===0&&(H=B&-B,ne=m&-m,H>=ne||H===16&&(ne&4194240)!==0))return m;if((B&4)!==0&&(B|=b&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=B;0<m;)b=31-Dt(m),H=1<<b,B|=f[b],m&=~H;return B}function Ve(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fe(f,m){for(var b=f.suspendedLanes,B=f.pingedLanes,H=f.expirationTimes,ne=f.pendingLanes;0<ne;){var ce=31-Dt(ne),Se=1<<ce,ke=H[ce];ke===-1?((Se&b)===0||(Se&B)!==0)&&(H[ce]=Ve(Se,m)):ke<=m&&(f.expiredLanes|=Se),ne&=~Se}}function xt(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Bt(){var f=yi;return yi<<=1,(yi&4194240)===0&&(yi=64),f}function Gt(f){for(var m=[],b=0;31>b;b++)m.push(f);return m}function cn(f,m,b){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Dt(m),f[m]=b}function zn(f,m){var b=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var B=f.eventTimes;for(f=f.expirationTimes;0<b;){var H=31-Dt(b),ne=1<<H;m[H]=0,B[H]=-1,f[H]=-1,b&=~ne}}function Wn(f,m){var b=f.entangledLanes|=m;for(f=f.entanglements;b;){var B=31-Dt(b),H=1<<B;H&m|f[B]&m&&(f[B]|=m),b&=~H}}var Cn=0;function Js(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Dl,df,Hy,gd,yd,Bl=!1,vd=[],jo=null,Yn=null,ca=null,Ul=new Map,Zu=new Map,Za=[],Hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ui(f,m){switch(f){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Ul.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zu.delete(m.pointerId)}}function Fl(f,m,b,B,H,ne){return f===null||f.nativeEvent!==ne?(f={blockedOn:m,domEventName:b,eventSystemFlags:B,nativeEvent:ne,targetContainers:[H]},m!==null&&(m=va(m),m!==null&&df(m)),f):(f.eventSystemFlags|=B,m=f.targetContainers,H!==null&&m.indexOf(H)===-1&&m.push(H),f)}function Gx(f,m,b,B,H){switch(m){case"focusin":return jo=Fl(jo,f,m,b,B,H),!0;case"dragenter":return Yn=Fl(Yn,f,m,b,B,H),!0;case"mouseover":return ca=Fl(ca,f,m,b,B,H),!0;case"pointerover":var ne=H.pointerId;return Ul.set(ne,Fl(Ul.get(ne)||null,f,m,b,B,H)),!0;case"gotpointercapture":return ne=H.pointerId,Zu.set(ne,Fl(Zu.get(ne)||null,f,m,b,B,H)),!0}return!1}function wd(f){var m=il(f.target);if(m!==null){var b=Nr(m);if(b!==null){if(m=b.tag,m===13){if(m=Ot(b),m!==null){f.blockedOn=m,yd(f.priority,function(){Hy(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function _d(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var b=to(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var B=new b.constructor(b.type,b);de=B,b.target.dispatchEvent(B),de=null}else return m=va(b),m!==null&&df(m),f.blockedOn=b,!1;m.shift()}return!0}function pf(f,m,b){_d(f)&&b.delete(m)}function qo(){Bl=!1,jo!==null&&_d(jo)&&(jo=null),Yn!==null&&_d(Yn)&&(Yn=null),ca!==null&&_d(ca)&&(ca=null),Ul.forEach(pf),Zu.forEach(pf)}function mf(f,m){f.blockedOn===m&&(f.blockedOn=null,Bl||(Bl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qo)))}function gf(f){function m(H){return mf(H,f)}if(0<vd.length){mf(vd[0],f);for(var b=1;b<vd.length;b++){var B=vd[b];B.blockedOn===f&&(B.blockedOn=null)}}for(jo!==null&&mf(jo,f),Yn!==null&&mf(Yn,f),ca!==null&&mf(ca,f),Ul.forEach(m),Zu.forEach(m),b=0;b<Za.length;b++)B=Za[b],B.blockedOn===f&&(B.blockedOn=null);for(;0<Za.length&&(b=Za[0],b.blockedOn===null);)wd(b),b.blockedOn===null&&Za.shift()}var Ji=F.ReactCurrentBatchConfig,eo=!0;function xd(f,m,b,B){var H=Cn,ne=Ji.transition;Ji.transition=null;try{Cn=1,Sd(f,m,b,B)}finally{Cn=H,Ji.transition=ne}}function U0(f,m,b,B){var H=Cn,ne=Ji.transition;Ji.transition=null;try{Cn=4,Sd(f,m,b,B)}finally{Cn=H,Ji.transition=ne}}function Sd(f,m,b,B){if(eo){var H=to(f,m,b,B);if(H===null)Vd(f,m,B,Md,b),ui(f,B);else if(Gx(H,f,m,b,B))B.stopPropagation();else if(ui(f,B),m&4&&-1<Hx.indexOf(f)){for(;H!==null;){var ne=va(H);if(ne!==null&&Dl(ne),ne=to(f,m,b,B),ne===null&&Vd(f,m,B,Md,b),ne===H)break;H=ne}H!==null&&B.stopPropagation()}else Vd(f,m,B,null,b)}}var Md=null;function to(f,m,b,B){if(Md=null,f=Re(B),f=il(f),f!==null)if(m=Nr(f),m===null)f=null;else if(b=m.tag,b===13){if(f=Ot(m),f!==null)return f;f=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return Md=f,null}function Gy(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vt()){case nn:return 1;case sn:return 4;case qt:case Tn:return 16;case Rn:return 536870912;default:return 16}default:return 16}}var So=null,F0=null,ds=null;function yf(){if(ds)return ds;var f,m=F0,b=m.length,B,H="value"in So?So.value:So.textContent,ne=H.length;for(f=0;f<b&&m[f]===H[f];f++);var ce=b-f;for(B=1;B<=ce&&m[b-B]===H[ne-B];B++);return ds=H.slice(f,1<B?1-B:void 0)}function zl(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function fa(){return!0}function Ed(){return!1}function es(f){function m(b,B,H,ne,ce){this._reactName=b,this._targetInst=H,this.type=B,this.nativeEvent=ne,this.target=ce,this.currentTarget=null;for(var Se in f)f.hasOwnProperty(Se)&&(b=f[Se],this[Se]=b?b(ne):ne[Se]);return this.isDefaultPrevented=(ne.defaultPrevented!=null?ne.defaultPrevented:ne.returnValue===!1)?fa:Ed,this.isPropagationStopped=Ed,this}return I(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),m}var Wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vf=es(Wl),Vl=I({},Wl,{view:0,detail:0}),Qu=es(Vl),ps,no,ro,Ju=I({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ja,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ro&&(ro&&f.type==="mousemove"?(ps=f.screenX-ro.screenX,no=f.screenY-ro.screenY):no=ps=0,ro=f),ps)},movementY:function(f){return"movementY"in f?f.movementY:no}}),z0=es(Ju),ha=I({},Ju,{dataTransfer:0}),Qa=es(ha),bd=I({},Vl,{relatedTarget:0}),Ad=es(bd),Td=I({},Wl,{animationName:0,elapsedTime:0,pseudoElement:0}),jy=es(Td),qy=I({},Wl,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),W0=es(qy),Rd=I({},Wl,{data:0}),V0=es(Rd),Ky={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ec(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=H0[f])?!!m[f]:!1}function Ja(){return ec}var Cd=I({},Vl,{key:function(f){if(f.key){var m=Ky[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=zl(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Yy[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ja,charCode:function(f){return f.type==="keypress"?zl(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?zl(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Id=es(Cd),io=I({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Os=es(io),Hl=I({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ja}),da=es(Hl),pa=I({},Wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gl=es(pa),Xy=I({},Ju,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),G0=es(Xy),j0=[9,13,27,32],ts=l&&"CompositionEvent"in window,Pi=null;l&&"documentMode"in document&&(Pi=document.documentMode);var kr=l&&"TextEvent"in window&&!Pi,tc=l&&(!ts||Pi&&8<Pi&&11>=Pi),so=" ",q0=!1;function K0(f,m){switch(f){case"keyup":return j0.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nd(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var el=!1;function $y(f,m){switch(f){case"compositionend":return Nd(m);case"keypress":return m.which!==32?null:(q0=!0,so);case"textInput":return f=m.data,f===so&&q0?null:f;default:return null}}function wf(f,m){if(el)return f==="compositionend"||!ts&&K0(f,m)?(f=yf(),ds=F0=So=null,el=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return tc&&m.locale!=="ko"?null:m.data;default:return null}}var nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!nc[f.type]:m==="textarea"}function rc(f,m,b,B){ct(B),m=Hd(m,"onChange"),0<m.length&&(b=new vf("onChange","change",null,b,B),f.push({event:b,listeners:m}))}var tl=null,ic=null;function Zy(f){lc(f,0)}function ma(f){var m=Yr(f);if(Pe(m))return f}function Qy(f,m){if(f==="change")return m}var sc=!1;if(l){var ms;if(l){var jl="oninput"in document;if(!jl){var ql=document.createElement("div");ql.setAttribute("oninput","return;"),jl=typeof ql.oninput=="function"}ms=jl}else ms=!1;sc=ms&&(!document.documentMode||9<document.documentMode)}function Mo(){tl&&(tl.detachEvent("onpropertychange",Ld),ic=tl=null)}function Ld(f){if(f.propertyName==="value"&&ma(ic)){var m=[];rc(m,ic,f,Re(f)),J(Zy,m)}}function oc(f,m,b){f==="focusin"?(Mo(),tl=m,ic=b,tl.attachEvent("onpropertychange",Ld)):f==="focusout"&&Mo()}function Jy(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return ma(ic)}function Y0(f,m){if(f==="click")return ma(m)}function zr(f,m){if(f==="input"||f==="change")return ma(m)}function kd(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Ds=typeof Object.is=="function"?Object.is:kd;function Kl(f,m){if(Ds(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var b=Object.keys(f),B=Object.keys(m);if(b.length!==B.length)return!1;for(B=0;B<b.length;B++){var H=b[B];if(!c.call(m,H)||!Ds(f[H],m[H]))return!1}return!0}function _f(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Bs(f,m){var b=_f(f);f=0;for(var B;b;){if(b.nodeType===3){if(B=f+b.textContent.length,f<=m&&B>=m)return{node:b,offset:m-f};f=B}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=_f(b)}}function Yl(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?Yl(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function Wr(){for(var f=window,m=ge();m instanceof f.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)f=m.contentWindow;else break;m=ge(f.document)}return m}function vi(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function wi(f){var m=Wr(),b=f.focusedElem,B=f.selectionRange;if(m!==b&&b&&b.ownerDocument&&Yl(b.ownerDocument.documentElement,b)){if(B!==null&&vi(b)){if(m=B.start,f=B.end,f===void 0&&(f=m),"selectionStart"in b)b.selectionStart=m,b.selectionEnd=Math.min(f,b.value.length);else if(f=(m=b.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var H=b.textContent.length,ne=Math.min(B.start,H);B=B.end===void 0?ne:Math.min(B.end,H),!f.extend&&ne>B&&(H=B,B=ne,ne=H),H=Bs(b,ne);var ce=Bs(b,B);H&&ce&&(f.rangeCount!==1||f.anchorNode!==H.node||f.anchorOffset!==H.offset||f.focusNode!==ce.node||f.focusOffset!==ce.offset)&&(m=m.createRange(),m.setStart(H.node,H.offset),f.removeAllRanges(),ne>B?(f.addRange(m),f.extend(ce.node,ce.offset)):(m.setEnd(ce.node,ce.offset),f.addRange(m)))}}for(m=[],f=b;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<m.length;b++)f=m[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Od=l&&"documentMode"in document&&11>=document.documentMode,Ko=null,Xl=null,xf=null,_i=!1;function Dd(f,m,b){var B=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;_i||Ko==null||Ko!==ge(B)||(B=Ko,"selectionStart"in B&&vi(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),xf&&Kl(xf,B)||(xf=B,B=Hd(Xl,"onSelect"),0<B.length&&(m=new vf("onSelect","select",null,m,b),f.push({event:m,listeners:B}),m.target=Ko)))}function ac(f,m){var b={};return b[f.toLowerCase()]=m.toLowerCase(),b["Webkit"+f]="webkit"+m,b["Moz"+f]="moz"+m,b}var nl={animationend:ac("Animation","AnimationEnd"),animationiteration:ac("Animation","AnimationIteration"),animationstart:ac("Animation","AnimationStart"),transitionend:ac("Transition","TransitionEnd")},Eo={},bo={};l&&(bo=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function Yo(f){if(Eo[f])return Eo[f];if(!nl[f])return f;var m=nl[f],b;for(b in m)if(m.hasOwnProperty(b)&&b in bo)return Eo[f]=m[b];return f}var Sf=Yo("animationend"),Mf=Yo("animationiteration"),X0=Yo("animationstart"),$0=Yo("transitionend"),Z0=new Map,Q0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(f,m){Z0.set(f,m),s(m,[f])}for(var Bd=0;Bd<Q0.length;Bd++){var Ef=Q0[Bd],bf=Ef.toLowerCase(),ev=Ef[0].toUpperCase()+Ef.slice(1);ga(bf,"on"+ev)}ga(Sf,"onAnimationEnd"),ga(Mf,"onAnimationIteration"),ga(X0,"onAnimationStart"),ga("dblclick","onDoubleClick"),ga("focusin","onFocus"),ga("focusout","onBlur"),ga($0,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ud=new Set("cancel close invalid load scroll toggle".split(" ").concat(rl));function Fd(f,m,b){var B=f.type||"unknown-event";f.currentTarget=b,Lt(B,m,void 0,f),f.currentTarget=null}function lc(f,m){m=(m&4)!==0;for(var b=0;b<f.length;b++){var B=f[b],H=B.event;B=B.listeners;e:{var ne=void 0;if(m)for(var ce=B.length-1;0<=ce;ce--){var Se=B[ce],ke=Se.instance,lt=Se.currentTarget;if(Se=Se.listener,ke!==ne&&H.isPropagationStopped())break e;Fd(H,Se,lt),ne=ke}else for(ce=0;ce<B.length;ce++){if(Se=B[ce],ke=Se.instance,lt=Se.currentTarget,Se=Se.listener,ke!==ne&&H.isPropagationStopped())break e;Fd(H,Se,lt),ne=ke}}}if(mt)throw f=_t,mt=!1,_t=null,f}function Ar(f,m){var b=m[Ql];b===void 0&&(b=m[Ql]=new Set);var B=f+"__bubble";b.has(B)||(Wd(m,f,2,!1),b.add(B))}function zd(f,m,b){var B=0;m&&(B|=4),Wd(b,f,B,m)}var Af="_reactListening"+Math.random().toString(36).slice(2);function uc(f){if(!f[Af]){f[Af]=!0,n.forEach(function(b){b!=="selectionchange"&&(Ud.has(b)||zd(b,!1,f),zd(b,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[Af]||(m[Af]=!0,zd("selectionchange",!1,m))}}function Wd(f,m,b,B){switch(Gy(m)){case 1:var H=xd;break;case 4:H=U0;break;default:H=Sd}b=H.bind(null,m,b,f),H=void 0,!he||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(H=!0),B?H!==void 0?f.addEventListener(m,b,{capture:!0,passive:H}):f.addEventListener(m,b,!0):H!==void 0?f.addEventListener(m,b,{passive:H}):f.addEventListener(m,b,!1)}function Vd(f,m,b,B,H){var ne=B;if((m&1)===0&&(m&2)===0&&B!==null)e:for(;;){if(B===null)return;var ce=B.tag;if(ce===3||ce===4){var Se=B.stateNode.containerInfo;if(Se===H||Se.nodeType===8&&Se.parentNode===H)break;if(ce===4)for(ce=B.return;ce!==null;){var ke=ce.tag;if((ke===3||ke===4)&&(ke=ce.stateNode.containerInfo,ke===H||ke.nodeType===8&&ke.parentNode===H))return;ce=ce.return}for(;Se!==null;){if(ce=il(Se),ce===null)return;if(ke=ce.tag,ke===5||ke===6){B=ne=ce;continue e}Se=Se.parentNode}}B=B.return}J(function(){var lt=ne,Ct=Re(b),Pt=[];e:{var Tt=Z0.get(f);if(Tt!==void 0){var on=vf,pn=f;switch(f){case"keypress":if(zl(b)===0)break e;case"keydown":case"keyup":on=Id;break;case"focusin":pn="focus",on=Ad;break;case"focusout":pn="blur",on=Ad;break;case"beforeblur":case"afterblur":on=Ad;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":on=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":on=Qa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":on=da;break;case Sf:case Mf:case X0:on=jy;break;case $0:on=Gl;break;case"scroll":on=Qu;break;case"wheel":on=G0;break;case"copy":case"cut":case"paste":on=W0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":on=Os}var gn=(m&4)!==0,fi=!gn&&f==="scroll",Je=gn?Tt!==null?Tt+"Capture":null:Tt;gn=[];for(var ze=lt,rt;ze!==null;){rt=ze;var Wt=rt.stateNode;if(rt.tag===5&&Wt!==null&&(rt=Wt,Je!==null&&(Wt=X(ze,Je),Wt!=null&&gn.push(cc(ze,Wt,rt)))),fi)break;ze=ze.return}0<gn.length&&(Tt=new on(Tt,pn,null,b,Ct),Pt.push({event:Tt,listeners:gn}))}}if((m&7)===0){e:{if(Tt=f==="mouseover"||f==="pointerover",on=f==="mouseout"||f==="pointerout",Tt&&b!==de&&(pn=b.relatedTarget||b.fromElement)&&(il(pn)||pn[Us]))break e;if((on||Tt)&&(Tt=Ct.window===Ct?Ct:(Tt=Ct.ownerDocument)?Tt.defaultView||Tt.parentWindow:window,on?(pn=b.relatedTarget||b.toElement,on=lt,pn=pn?il(pn):null,pn!==null&&(fi=Nr(pn),pn!==fi||pn.tag!==5&&pn.tag!==6)&&(pn=null)):(on=null,pn=lt),on!==pn)){if(gn=z0,Wt="onMouseLeave",Je="onMouseEnter",ze="mouse",(f==="pointerout"||f==="pointerover")&&(gn=Os,Wt="onPointerLeave",Je="onPointerEnter",ze="pointer"),fi=on==null?Tt:Yr(on),rt=pn==null?Tt:Yr(pn),Tt=new gn(Wt,ze+"leave",on,b,Ct),Tt.target=fi,Tt.relatedTarget=rt,Wt=null,il(Ct)===lt&&(gn=new gn(Je,ze+"enter",pn,b,Ct),gn.target=rt,gn.relatedTarget=fi,Wt=gn),fi=Wt,on&&pn)t:{for(gn=on,Je=pn,ze=0,rt=gn;rt;rt=$l(rt))ze++;for(rt=0,Wt=Je;Wt;Wt=$l(Wt))rt++;for(;0<ze-rt;)gn=$l(gn),ze--;for(;0<rt-ze;)Je=$l(Je),rt--;for(;ze--;){if(gn===Je||Je!==null&&gn===Je.alternate)break t;gn=$l(gn),Je=$l(Je)}gn=null}else gn=null;on!==null&&tv(Pt,Tt,on,gn,!1),pn!==null&&fi!==null&&tv(Pt,fi,pn,gn,!0)}}e:{if(Tt=lt?Yr(lt):window,on=Tt.nodeName&&Tt.nodeName.toLowerCase(),on==="select"||on==="input"&&Tt.type==="file")var wn=Qy;else if(Pd(Tt))if(sc)wn=zr;else{wn=Jy;var In=oc}else(on=Tt.nodeName)&&on.toLowerCase()==="input"&&(Tt.type==="checkbox"||Tt.type==="radio")&&(wn=Y0);if(wn&&(wn=wn(f,lt))){rc(Pt,wn,b,Ct);break e}In&&In(f,Tt,lt),f==="focusout"&&(In=Tt._wrapperState)&&In.controlled&&Tt.type==="number"&&Nt(Tt,"number",Tt.value)}switch(In=lt?Yr(lt):window,f){case"focusin":(Pd(In)||In.contentEditable==="true")&&(Ko=In,Xl=lt,xf=null);break;case"focusout":xf=Xl=Ko=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,Dd(Pt,b,Ct);break;case"selectionchange":if(Od)break;case"keydown":case"keyup":Dd(Pt,b,Ct)}var Nn;if(ts)e:{switch(f){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else el?K0(f,b)&&(Bn="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Bn="onCompositionStart");Bn&&(tc&&b.locale!=="ko"&&(el||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&el&&(Nn=yf()):(So=Ct,F0="value"in So?So.value:So.textContent,el=!0)),In=Hd(lt,Bn),0<In.length&&(Bn=new V0(Bn,f,null,b,Ct),Pt.push({event:Bn,listeners:In}),Nn?Bn.data=Nn:(Nn=Nd(b),Nn!==null&&(Bn.data=Nn)))),(Nn=kr?$y(f,b):wf(f,b))&&(lt=Hd(lt,"onBeforeInput"),0<lt.length&&(Ct=new V0("onBeforeInput","beforeinput",null,b,Ct),Pt.push({event:Ct,listeners:lt}),Ct.data=Nn))}lc(Pt,m)})}function cc(f,m,b){return{instance:f,listener:m,currentTarget:b}}function Hd(f,m){for(var b=m+"Capture",B=[];f!==null;){var H=f,ne=H.stateNode;H.tag===5&&ne!==null&&(H=ne,ne=X(f,b),ne!=null&&B.unshift(cc(f,ne,H)),ne=X(f,m),ne!=null&&B.push(cc(f,ne,H))),f=f.return}return B}function $l(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function tv(f,m,b,B,H){for(var ne=m._reactName,ce=[];b!==null&&b!==B;){var Se=b,ke=Se.alternate,lt=Se.stateNode;if(ke!==null&&ke===B)break;Se.tag===5&&lt!==null&&(Se=lt,H?(ke=X(b,ne),ke!=null&&ce.unshift(cc(b,ke,Se))):H||(ke=X(b,ne),ke!=null&&ce.push(cc(b,ke,Se)))),b=b.return}ce.length!==0&&f.push({event:m,listeners:ce})}var jx=/\r\n?/g,nv=/\u0000|\uFFFD/g;function J0(f){return(typeof f=="string"?f:""+f).replace(jx,`
`).replace(nv,"")}function Tf(f,m,b){if(m=J0(m),J0(f)!==m&&b)throw Error(t(425))}function Rf(){}var fc=null,em=null;function tm(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,rm=typeof clearTimeout=="function"?clearTimeout:void 0,Gd=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Gd<"u"?function(f){return Gd.resolve(null).then(f).catch(rv)}:nm;function rv(f){setTimeout(function(){throw f})}function jd(f,m){var b=m,B=0;do{var H=b.nextSibling;if(f.removeChild(b),H&&H.nodeType===8)if(b=H.data,b==="/$"){if(B===0){f.removeChild(H),gf(m);return}B--}else b!=="$"&&b!=="$?"&&b!=="$!"||B++;b=H}while(b);gf(m)}function ya(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function im(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return f;m--}else b==="/$"&&m++}f=f.previousSibling}return null}var Zl=Math.random().toString(36).slice(2),ci="__reactFiber$"+Zl,hc="__reactProps$"+Zl,Us="__reactContainer$"+Zl,Ql="__reactEvents$"+Zl,qd="__reactListeners$"+Zl,Kd="__reactHandles$"+Zl;function il(f){var m=f[ci];if(m)return m;for(var b=f.parentNode;b;){if(m=b[Us]||b[ci]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(f=im(f);f!==null;){if(b=f[ci])return b;f=im(f)}return m}f=b,b=f.parentNode}return null}function va(f){return f=f[ci]||f[Us],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Yr(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function Yd(f){return f[hc]||null}var sm=[],xi=-1;function Gr(f){return{current:f}}function Tr(f){0>xi||(f.current=sm[xi],sm[xi]=null,xi--)}function Sr(f,m){xi++,sm[xi]=f.current,f.current=m}var wa={},Li=Gr(wa),ns=Gr(!1),_a=wa;function Jl(f,m){var b=f.type.contextTypes;if(!b)return wa;var B=f.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===m)return B.__reactInternalMemoizedMaskedChildContext;var H={},ne;for(ne in b)H[ne]=m[ne];return B&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=H),H}function Vi(f){return f=f.childContextTypes,f!=null}function Cf(){Tr(ns),Tr(Li)}function om(f,m,b){if(Li.current!==wa)throw Error(t(168));Sr(Li,m),Sr(ns,b)}function If(f,m,b){var B=f.stateNode;if(m=m.childContextTypes,typeof B.getChildContext!="function")return b;B=B.getChildContext();for(var H in B)if(!(H in m))throw Error(t(108,me(f)||"Unknown",H));return I({},b,B)}function eu(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||wa,_a=Li.current,Sr(Li,f),Sr(ns,ns.current),!0}function am(f,m,b){var B=f.stateNode;if(!B)throw Error(t(169));b?(f=If(f,m,_a),B.__reactInternalMemoizedMergedChildContext=f,Tr(ns),Tr(Li),Sr(Li,f)):Tr(ns),Sr(ns,b)}var Ao=null,Nf=!1,Xd=!1;function Pf(f){Ao===null?Ao=[f]:Ao.push(f)}function iv(f){Nf=!0,Pf(f)}function Xo(){if(!Xd&&Ao!==null){Xd=!0;var f=0,m=Cn;try{var b=Ao;for(Cn=1;f<b.length;f++){var B=b[f];do B=B(!0);while(B!==null)}Ao=null,Nf=!1}catch(H){throw Ao!==null&&(Ao=Ao.slice(f+1)),Qe(nn,Xo),H}finally{Cn=m,Xd=!1}}return null}var tu=[],gs=0,$d=null,Zd=0,rs=[],Si=0,nu=null,jt=1,oo="";function xa(f,m){tu[gs++]=Zd,tu[gs++]=$d,$d=f,Zd=m}function lm(f,m,b){rs[Si++]=jt,rs[Si++]=oo,rs[Si++]=nu,nu=f;var B=jt;f=oo;var H=32-Dt(B)-1;B&=~(1<<H),b+=1;var ne=32-Dt(m)+H;if(30<ne){var ce=H-H%5;ne=(B&(1<<ce)-1).toString(32),B>>=ce,H-=ce,jt=1<<32-Dt(m)+H|b<<H|B,oo=ne+f}else jt=1<<ne|b<<H|B,oo=f}function um(f){f.return!==null&&(xa(f,1),lm(f,1,0))}function Sa(f){for(;f===$d;)$d=tu[--gs],tu[gs]=null,Zd=tu[--gs],tu[gs]=null;for(;f===nu;)nu=rs[--Si],rs[Si]=null,oo=rs[--Si],rs[Si]=null,jt=rs[--Si],rs[Si]=null}var ki=null,is=null,Pr=!1,ao=null;function cm(f,m){var b=ea(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=f,m=f.deletions,m===null?(f.deletions=[b],f.flags|=16):m.push(b)}function fm(f,m){switch(f.tag){case 5:var b=f.type;return m=m.nodeType!==1||b.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,ki=f,is=ya(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,ki=f,is=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(b=nu!==null?{id:jt,overflow:oo}:null,f.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=ea(18,null,null,0),b.stateNode=m,b.return=f,f.child=b,ki=f,is=null,!0):!1;default:return!1}}function Qd(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Jd(f){if(Pr){var m=is;if(m){var b=m;if(!fm(f,m)){if(Qd(f))throw Error(t(418));m=ya(b.nextSibling);var B=ki;m&&fm(f,m)?cm(B,b):(f.flags=f.flags&-4097|2,Pr=!1,ki=f)}}else{if(Qd(f))throw Error(t(418));f.flags=f.flags&-4097|2,Pr=!1,ki=f}}}function ep(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;ki=f}function dc(f){if(f!==ki)return!1;if(!Pr)return ep(f),Pr=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!tm(f.type,f.memoizedProps)),m&&(m=is)){if(Qd(f))throw hm(),Error(t(418));for(;m;)cm(f,m),m=ya(m.nextSibling)}if(ep(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(m===0){is=ya(f.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++}f=f.nextSibling}is=null}}else is=ki?ya(f.stateNode.nextSibling):null;return!0}function hm(){for(var f=is;f;)f=ya(f.nextSibling)}function sl(){is=ki=null,Pr=!1}function pc(f){ao===null?ao=[f]:ao.push(f)}var Kx=F.ReactCurrentBatchConfig;function Lf(f,m,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var B=b.stateNode}if(!B)throw Error(t(147,f));var H=B,ne=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===ne?m.ref:(m=function(ce){var Se=H.refs;ce===null?delete Se[ne]:Se[ne]=ce},m._stringRef=ne,m)}if(typeof f!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,f))}return f}function kf(f,m){throw f=Object.prototype.toString.call(m),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function dm(f){var m=f._init;return m(f._payload)}function pm(f){function m(Je,ze){if(f){var rt=Je.deletions;rt===null?(Je.deletions=[ze],Je.flags|=16):rt.push(ze)}}function b(Je,ze){if(!f)return null;for(;ze!==null;)m(Je,ze),ze=ze.sibling;return null}function B(Je,ze){for(Je=new Map;ze!==null;)ze.key!==null?Je.set(ze.key,ze):Je.set(ze.index,ze),ze=ze.sibling;return Je}function H(Je,ze){return Je=bc(Je,ze),Je.index=0,Je.sibling=null,Je}function ne(Je,ze,rt){return Je.index=rt,f?(rt=Je.alternate,rt!==null?(rt=rt.index,rt<ze?(Je.flags|=2,ze):rt):(Je.flags|=2,ze)):(Je.flags|=1048576,ze)}function ce(Je){return f&&Je.alternate===null&&(Je.flags|=2),Je}function Se(Je,ze,rt,Wt){return ze===null||ze.tag!==6?(ze=hS(rt,Je.mode,Wt),ze.return=Je,ze):(ze=H(ze,rt),ze.return=Je,ze)}function ke(Je,ze,rt,Wt){var wn=rt.type;return wn===Y?Ct(Je,ze,rt.props.children,Wt,rt.key):ze!==null&&(ze.elementType===wn||typeof wn=="object"&&wn!==null&&wn.$$typeof===M&&dm(wn)===ze.type)?(Wt=H(ze,rt.props),Wt.ref=Lf(Je,ze,rt),Wt.return=Je,Wt):(Wt=Tv(rt.type,rt.key,rt.props,null,Je.mode,Wt),Wt.ref=Lf(Je,ze,rt),Wt.return=Je,Wt)}function lt(Je,ze,rt,Wt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==rt.containerInfo||ze.stateNode.implementation!==rt.implementation?(ze=dS(rt,Je.mode,Wt),ze.return=Je,ze):(ze=H(ze,rt.children||[]),ze.return=Je,ze)}function Ct(Je,ze,rt,Wt,wn){return ze===null||ze.tag!==7?(ze=Zf(rt,Je.mode,Wt,wn),ze.return=Je,ze):(ze=H(ze,rt),ze.return=Je,ze)}function Pt(Je,ze,rt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=hS(""+ze,Je.mode,rt),ze.return=Je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Q:return rt=Tv(ze.type,ze.key,ze.props,null,Je.mode,rt),rt.ref=Lf(Je,null,ze),rt.return=Je,rt;case G:return ze=dS(ze,Je.mode,rt),ze.return=Je,ze;case M:var Wt=ze._init;return Pt(Je,Wt(ze._payload),rt)}if(fe(ze)||P(ze))return ze=Zf(ze,Je.mode,rt,null),ze.return=Je,ze;kf(Je,ze)}return null}function Tt(Je,ze,rt,Wt){var wn=ze!==null?ze.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return wn!==null?null:Se(Je,ze,""+rt,Wt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case Q:return rt.key===wn?ke(Je,ze,rt,Wt):null;case G:return rt.key===wn?lt(Je,ze,rt,Wt):null;case M:return wn=rt._init,Tt(Je,ze,wn(rt._payload),Wt)}if(fe(rt)||P(rt))return wn!==null?null:Ct(Je,ze,rt,Wt,null);kf(Je,rt)}return null}function on(Je,ze,rt,Wt,wn){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number")return Je=Je.get(rt)||null,Se(ze,Je,""+Wt,wn);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case Q:return Je=Je.get(Wt.key===null?rt:Wt.key)||null,ke(ze,Je,Wt,wn);case G:return Je=Je.get(Wt.key===null?rt:Wt.key)||null,lt(ze,Je,Wt,wn);case M:var In=Wt._init;return on(Je,ze,rt,In(Wt._payload),wn)}if(fe(Wt)||P(Wt))return Je=Je.get(rt)||null,Ct(ze,Je,Wt,wn,null);kf(ze,Wt)}return null}function pn(Je,ze,rt,Wt){for(var wn=null,In=null,Nn=ze,Bn=ze=0,qi=null;Nn!==null&&Bn<rt.length;Bn++){Nn.index>Bn?(qi=Nn,Nn=null):qi=Nn.sibling;var pr=Tt(Je,Nn,rt[Bn],Wt);if(pr===null){Nn===null&&(Nn=qi);break}f&&Nn&&pr.alternate===null&&m(Je,Nn),ze=ne(pr,ze,Bn),In===null?wn=pr:In.sibling=pr,In=pr,Nn=qi}if(Bn===rt.length)return b(Je,Nn),Pr&&xa(Je,Bn),wn;if(Nn===null){for(;Bn<rt.length;Bn++)Nn=Pt(Je,rt[Bn],Wt),Nn!==null&&(ze=ne(Nn,ze,Bn),In===null?wn=Nn:In.sibling=Nn,In=Nn);return Pr&&xa(Je,Bn),wn}for(Nn=B(Je,Nn);Bn<rt.length;Bn++)qi=on(Nn,Je,Bn,rt[Bn],Wt),qi!==null&&(f&&qi.alternate!==null&&Nn.delete(qi.key===null?Bn:qi.key),ze=ne(qi,ze,Bn),In===null?wn=qi:In.sibling=qi,In=qi);return f&&Nn.forEach(function(Ac){return m(Je,Ac)}),Pr&&xa(Je,Bn),wn}function gn(Je,ze,rt,Wt){var wn=P(rt);if(typeof wn!="function")throw Error(t(150));if(rt=wn.call(rt),rt==null)throw Error(t(151));for(var In=wn=null,Nn=ze,Bn=ze=0,qi=null,pr=rt.next();Nn!==null&&!pr.done;Bn++,pr=rt.next()){Nn.index>Bn?(qi=Nn,Nn=null):qi=Nn.sibling;var Ac=Tt(Je,Nn,pr.value,Wt);if(Ac===null){Nn===null&&(Nn=qi);break}f&&Nn&&Ac.alternate===null&&m(Je,Nn),ze=ne(Ac,ze,Bn),In===null?wn=Ac:In.sibling=Ac,In=Ac,Nn=qi}if(pr.done)return b(Je,Nn),Pr&&xa(Je,Bn),wn;if(Nn===null){for(;!pr.done;Bn++,pr=rt.next())pr=Pt(Je,pr.value,Wt),pr!==null&&(ze=ne(pr,ze,Bn),In===null?wn=pr:In.sibling=pr,In=pr);return Pr&&xa(Je,Bn),wn}for(Nn=B(Je,Nn);!pr.done;Bn++,pr=rt.next())pr=on(Nn,Je,Bn,pr.value,Wt),pr!==null&&(f&&pr.alternate!==null&&Nn.delete(pr.key===null?Bn:pr.key),ze=ne(pr,ze,Bn),In===null?wn=pr:In.sibling=pr,In=pr);return f&&Nn.forEach(function(D5){return m(Je,D5)}),Pr&&xa(Je,Bn),wn}function fi(Je,ze,rt,Wt){if(typeof rt=="object"&&rt!==null&&rt.type===Y&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case Q:e:{for(var wn=rt.key,In=ze;In!==null;){if(In.key===wn){if(wn=rt.type,wn===Y){if(In.tag===7){b(Je,In.sibling),ze=H(In,rt.props.children),ze.return=Je,Je=ze;break e}}else if(In.elementType===wn||typeof wn=="object"&&wn!==null&&wn.$$typeof===M&&dm(wn)===In.type){b(Je,In.sibling),ze=H(In,rt.props),ze.ref=Lf(Je,In,rt),ze.return=Je,Je=ze;break e}b(Je,In);break}else m(Je,In);In=In.sibling}rt.type===Y?(ze=Zf(rt.props.children,Je.mode,Wt,rt.key),ze.return=Je,Je=ze):(Wt=Tv(rt.type,rt.key,rt.props,null,Je.mode,Wt),Wt.ref=Lf(Je,ze,rt),Wt.return=Je,Je=Wt)}return ce(Je);case G:e:{for(In=rt.key;ze!==null;){if(ze.key===In)if(ze.tag===4&&ze.stateNode.containerInfo===rt.containerInfo&&ze.stateNode.implementation===rt.implementation){b(Je,ze.sibling),ze=H(ze,rt.children||[]),ze.return=Je,Je=ze;break e}else{b(Je,ze);break}else m(Je,ze);ze=ze.sibling}ze=dS(rt,Je.mode,Wt),ze.return=Je,Je=ze}return ce(Je);case M:return In=rt._init,fi(Je,ze,In(rt._payload),Wt)}if(fe(rt))return pn(Je,ze,rt,Wt);if(P(rt))return gn(Je,ze,rt,Wt);kf(Je,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,ze!==null&&ze.tag===6?(b(Je,ze.sibling),ze=H(ze,rt),ze.return=Je,Je=ze):(b(Je,ze),ze=hS(rt,Je.mode,Wt),ze.return=Je,Je=ze),ce(Je)):b(Je,ze)}return fi}var ru=pm(!0),Of=pm(!1),iu=Gr(null),su=null,Ma=null,mc=null;function ou(){mc=Ma=su=null}function Df(f){var m=iu.current;Tr(iu),f._currentValue=m}function Bf(f,m,b){for(;f!==null;){var B=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,B!==null&&(B.childLanes|=m)):B!==null&&(B.childLanes&m)!==m&&(B.childLanes|=m),f===b)break;f=f.return}}function ol(f,m){su=f,mc=Ma=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(Gn=!0),f.firstContext=null)}function Fs(f){var m=f._currentValue;if(mc!==f)if(f={context:f,memoizedValue:m,next:null},Ma===null){if(su===null)throw Error(t(308));Ma=f,su.dependencies={lanes:0,firstContext:f}}else Ma=Ma.next=f;return m}var Ea=null;function mm(f){Ea===null?Ea=[f]:Ea.push(f)}function Uf(f,m,b,B){var H=m.interleaved;return H===null?(b.next=b,mm(m)):(b.next=H.next,H.next=b),m.interleaved=b,To(f,B)}function To(f,m){f.lanes|=m;var b=f.alternate;for(b!==null&&(b.lanes|=m),b=f,f=f.return;f!==null;)f.childLanes|=m,b=f.alternate,b!==null&&(b.childLanes|=m),b=f,f=f.return;return b.tag===3?b.stateNode:null}var wr=!1;function Hn(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xr(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function _r(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Or(f,m,b){var B=f.updateQueue;if(B===null)return null;if(B=B.shared,(cr&2)!==0){var H=B.pending;return H===null?m.next=m:(m.next=H.next,H.next=m),B.pending=m,To(f,b)}return H=B.interleaved,H===null?(m.next=m,mm(B)):(m.next=H.next,H.next=m),B.interleaved=m,To(f,b)}function Hi(f,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var B=m.lanes;B&=f.pendingLanes,b|=B,m.lanes=b,Wn(f,b)}}function au(f,m){var b=f.updateQueue,B=f.alternate;if(B!==null&&(B=B.updateQueue,b===B)){var H=null,ne=null;if(b=b.firstBaseUpdate,b!==null){do{var ce={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};ne===null?H=ne=ce:ne=ne.next=ce,b=b.next}while(b!==null);ne===null?H=ne=m:ne=ne.next=m}else H=ne=m;b={baseState:B.baseState,firstBaseUpdate:H,lastBaseUpdate:ne,shared:B.shared,effects:B.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=m:f.next=m,b.lastBaseUpdate=m}function jr(f,m,b,B){var H=f.updateQueue;wr=!1;var ne=H.firstBaseUpdate,ce=H.lastBaseUpdate,Se=H.shared.pending;if(Se!==null){H.shared.pending=null;var ke=Se,lt=ke.next;ke.next=null,ce===null?ne=lt:ce.next=lt,ce=ke;var Ct=f.alternate;Ct!==null&&(Ct=Ct.updateQueue,Se=Ct.lastBaseUpdate,Se!==ce&&(Se===null?Ct.firstBaseUpdate=lt:Se.next=lt,Ct.lastBaseUpdate=ke))}if(ne!==null){var Pt=H.baseState;ce=0,Ct=lt=ke=null,Se=ne;do{var Tt=Se.lane,on=Se.eventTime;if((B&Tt)===Tt){Ct!==null&&(Ct=Ct.next={eventTime:on,lane:0,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null});e:{var pn=f,gn=Se;switch(Tt=m,on=b,gn.tag){case 1:if(pn=gn.payload,typeof pn=="function"){Pt=pn.call(on,Pt,Tt);break e}Pt=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=gn.payload,Tt=typeof pn=="function"?pn.call(on,Pt,Tt):pn,Tt==null)break e;Pt=I({},Pt,Tt);break e;case 2:wr=!0}}Se.callback!==null&&Se.lane!==0&&(f.flags|=64,Tt=H.effects,Tt===null?H.effects=[Se]:Tt.push(Se))}else on={eventTime:on,lane:Tt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Ct===null?(lt=Ct=on,ke=Pt):Ct=Ct.next=on,ce|=Tt;if(Se=Se.next,Se===null){if(Se=H.shared.pending,Se===null)break;Tt=Se,Se=Tt.next,Tt.next=null,H.lastBaseUpdate=Tt,H.shared.pending=null}}while(!0);if(Ct===null&&(ke=Pt),H.baseState=ke,H.firstBaseUpdate=lt,H.lastBaseUpdate=Ct,m=H.shared.interleaved,m!==null){H=m;do ce|=H.lane,H=H.next;while(H!==m)}else ne===null&&(H.shared.lanes=0);Kf|=ce,f.lanes=ce,f.memoizedState=Pt}}function gc(f,m,b){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var B=f[m],H=B.callback;if(H!==null){if(B.callback=null,B=b,typeof H!="function")throw Error(t(191,H));H.call(B)}}}var $o={},zs=Gr($o),lu=Gr($o),ba=Gr($o);function ei(f){if(f===$o)throw Error(t(174));return f}function Ff(f,m){switch(Sr(ba,m),Sr(lu,f),Sr(zs,$o),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Ye(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=Ye(m,f)}Tr(zs),Sr(zs,m)}function al(){Tr(zs),Tr(lu),Tr(ba)}function uu(f){ei(ba.current);var m=ei(zs.current),b=Ye(m,f.type);m!==b&&(Sr(lu,f),Sr(zs,b))}function yc(f){lu.current===f&&(Tr(zs),Tr(lu))}var Lr=Gr(0);function Ro(f){for(var m=f;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var vc=[];function Zo(){for(var f=0;f<vc.length;f++)vc[f]._workInProgressVersionPrimary=null;vc.length=0}var cu=F.ReactCurrentDispatcher,fu=F.ReactCurrentBatchConfig,Aa=0,Rr=null,qr=null,or=null,Co=!1,Gi=!1,ll=0,ys=0;function Oi(){throw Error(t(321))}function zf(f,m){if(m===null)return!1;for(var b=0;b<m.length&&b<f.length;b++)if(!Ds(f[b],m[b]))return!1;return!0}function Wf(f,m,b,B,H,ne){if(Aa=ne,Rr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,cu.current=f===null||f.memoizedState===null?fv:hv,f=b(B,H),Gi){ne=0;do{if(Gi=!1,ll=0,25<=ne)throw Error(t(301));ne+=1,or=qr=null,m.updateQueue=null,cu.current=dv,f=b(B,H)}while(Gi)}if(cu.current=ap,m=qr!==null&&qr.next!==null,Aa=0,or=qr=Rr=null,Co=!1,m)throw Error(t(300));return f}function gm(){var f=ll!==0;return ll=0,f}function Di(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?Rr.memoizedState=or=f:or=or.next=f,or}function Ws(){if(qr===null){var f=Rr.alternate;f=f!==null?f.memoizedState:null}else f=qr.next;var m=or===null?Rr.memoizedState:or.next;if(m!==null)or=m,qr=f;else{if(f===null)throw Error(t(310));qr=f,f={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},or===null?Rr.memoizedState=or=f:or=or.next=f}return or}function wc(f,m){return typeof m=="function"?m(f):m}function Vf(f){var m=Ws(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var B=qr,H=B.baseQueue,ne=b.pending;if(ne!==null){if(H!==null){var ce=H.next;H.next=ne.next,ne.next=ce}B.baseQueue=H=ne,b.pending=null}if(H!==null){ne=H.next,B=B.baseState;var Se=ce=null,ke=null,lt=ne;do{var Ct=lt.lane;if((Aa&Ct)===Ct)ke!==null&&(ke=ke.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),B=lt.hasEagerState?lt.eagerState:f(B,lt.action);else{var Pt={lane:Ct,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};ke===null?(Se=ke=Pt,ce=B):ke=ke.next=Pt,Rr.lanes|=Ct,Kf|=Ct}lt=lt.next}while(lt!==null&&lt!==ne);ke===null?ce=B:ke.next=Se,Ds(B,m.memoizedState)||(Gn=!0),m.memoizedState=B,m.baseState=ce,m.baseQueue=ke,b.lastRenderedState=B}if(f=b.interleaved,f!==null){H=f;do ne=H.lane,Rr.lanes|=ne,Kf|=ne,H=H.next;while(H!==f)}else H===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function Ta(f){var m=Ws(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var B=b.dispatch,H=b.pending,ne=m.memoizedState;if(H!==null){b.pending=null;var ce=H=H.next;do ne=f(ne,ce.action),ce=ce.next;while(ce!==H);Ds(ne,m.memoizedState)||(Gn=!0),m.memoizedState=ne,m.baseQueue===null&&(m.baseState=ne),b.lastRenderedState=ne}return[ne,B]}function ym(){}function vm(f,m){var b=Rr,B=Ws(),H=m(),ne=!Ds(B.memoizedState,H);if(ne&&(B.memoizedState=H,Gn=!0),B=B.queue,xm(sv.bind(null,b,B,f),[f]),B.getSnapshot!==m||ne||or!==null&&or.memoizedState.tag&1){if(b.flags|=2048,Io(9,Hf.bind(null,b,B,H,m),void 0,null),ji===null)throw Error(t(349));(Aa&30)!==0||tp(b,m,H)}return H}function tp(f,m,b){f.flags|=16384,f={getSnapshot:m,value:b},m=Rr.updateQueue,m===null?(m={lastEffect:null,stores:null},Rr.updateQueue=m,m.stores=[f]):(b=m.stores,b===null?m.stores=[f]:b.push(f))}function Hf(f,m,b,B){m.value=b,m.getSnapshot=B,ov(m)&&wm(f)}function sv(f,m,b){return b(function(){ov(m)&&wm(f)})}function ov(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!Ds(f,b)}catch{return!0}}function wm(f){var m=To(f,1);m!==null&&Pa(m,f,1,-1)}function _m(f){var m=Di();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wc,lastRenderedState:f},m.queue=f,f=f.dispatch=hu.bind(null,Rr,f),[m.memoizedState,f]}function Io(f,m,b,B){return f={tag:f,create:m,destroy:b,deps:B,next:null},m=Rr.updateQueue,m===null?(m={lastEffect:null,stores:null},Rr.updateQueue=m,m.lastEffect=f.next=f):(b=m.lastEffect,b===null?m.lastEffect=f.next=f:(B=b.next,b.next=f,f.next=B,m.lastEffect=f)),f}function av(){return Ws().memoizedState}function Qo(f,m,b,B){var H=Di();Rr.flags|=f,H.memoizedState=Io(1|m,b,void 0,B===void 0?null:B)}function Gf(f,m,b,B){var H=Ws();B=B===void 0?null:B;var ne=void 0;if(qr!==null){var ce=qr.memoizedState;if(ne=ce.destroy,B!==null&&zf(B,ce.deps)){H.memoizedState=Io(m,b,ne,B);return}}Rr.flags|=f,H.memoizedState=Io(1|m,b,ne,B)}function ss(f,m){return Qo(8390656,8,f,m)}function xm(f,m){return Gf(2048,8,f,m)}function Sm(f,m){return Gf(4,2,f,m)}function lv(f,m){return Gf(4,4,f,m)}function uv(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function Mm(f,m,b){return b=b!=null?b.concat([f]):null,Gf(4,4,uv.bind(null,m,f),b)}function np(){}function cv(f,m){var b=Ws();m=m===void 0?null:m;var B=b.memoizedState;return B!==null&&m!==null&&zf(m,B[1])?B[0]:(b.memoizedState=[f,m],f)}function Vs(f,m){var b=Ws();m=m===void 0?null:m;var B=b.memoizedState;return B!==null&&m!==null&&zf(m,B[1])?B[0]:(f=f(),b.memoizedState=[f,m],f)}function rp(f,m,b){return(Aa&21)===0?(f.baseState&&(f.baseState=!1,Gn=!0),f.memoizedState=b):(Ds(b,m)||(b=Bt(),Rr.lanes|=b,Kf|=b,f.baseState=!0),m)}function Yx(f,m){var b=Cn;Cn=b!==0&&4>b?b:4,f(!0);var B=fu.transition;fu.transition={};try{f(!1),m()}finally{Cn=b,fu.transition=B}}function Ra(){return Ws().memoizedState}function ip(f,m,b){var B=Mc(f);if(b={lane:B,action:b,hasEagerState:!1,eagerState:null,next:null},jf(f))sp(m,b);else if(b=Uf(f,m,b,B),b!==null){var H=Gs();Pa(b,f,B,H),op(b,m,B)}}function hu(f,m,b){var B=Mc(f),H={lane:B,action:b,hasEagerState:!1,eagerState:null,next:null};if(jf(f))sp(m,H);else{var ne=f.alternate;if(f.lanes===0&&(ne===null||ne.lanes===0)&&(ne=m.lastRenderedReducer,ne!==null))try{var ce=m.lastRenderedState,Se=ne(ce,b);if(H.hasEagerState=!0,H.eagerState=Se,Ds(Se,ce)){var ke=m.interleaved;ke===null?(H.next=H,mm(m)):(H.next=ke.next,ke.next=H),m.interleaved=H;return}}catch{}finally{}b=Uf(f,m,H,B),b!==null&&(H=Gs(),Pa(b,f,B,H),op(b,m,B))}}function jf(f){var m=f.alternate;return f===Rr||m!==null&&m===Rr}function sp(f,m){Gi=Co=!0;var b=f.pending;b===null?m.next=m:(m.next=b.next,b.next=m),f.pending=m}function op(f,m,b){if((b&4194240)!==0){var B=m.lanes;B&=f.pendingLanes,b|=B,m.lanes=b,Wn(f,b)}}var ap={readContext:Fs,useCallback:Oi,useContext:Oi,useEffect:Oi,useImperativeHandle:Oi,useInsertionEffect:Oi,useLayoutEffect:Oi,useMemo:Oi,useReducer:Oi,useRef:Oi,useState:Oi,useDebugValue:Oi,useDeferredValue:Oi,useTransition:Oi,useMutableSource:Oi,useSyncExternalStore:Oi,useId:Oi,unstable_isNewReconciler:!1},fv={readContext:Fs,useCallback:function(f,m){return Di().memoizedState=[f,m===void 0?null:m],f},useContext:Fs,useEffect:ss,useImperativeHandle:function(f,m,b){return b=b!=null?b.concat([f]):null,Qo(4194308,4,uv.bind(null,m,f),b)},useLayoutEffect:function(f,m){return Qo(4194308,4,f,m)},useInsertionEffect:function(f,m){return Qo(4,2,f,m)},useMemo:function(f,m){var b=Di();return m=m===void 0?null:m,f=f(),b.memoizedState=[f,m],f},useReducer:function(f,m,b){var B=Di();return m=b!==void 0?b(m):m,B.memoizedState=B.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},B.queue=f,f=f.dispatch=ip.bind(null,Rr,f),[B.memoizedState,f]},useRef:function(f){var m=Di();return f={current:f},m.memoizedState=f},useState:_m,useDebugValue:np,useDeferredValue:function(f){return Di().memoizedState=f},useTransition:function(){var f=_m(!1),m=f[0];return f=Yx.bind(null,f[1]),Di().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,b){var B=Rr,H=Di();if(Pr){if(b===void 0)throw Error(t(407));b=b()}else{if(b=m(),ji===null)throw Error(t(349));(Aa&30)!==0||tp(B,m,b)}H.memoizedState=b;var ne={value:b,getSnapshot:m};return H.queue=ne,ss(sv.bind(null,B,ne,f),[f]),B.flags|=2048,Io(9,Hf.bind(null,B,ne,b,m),void 0,null),b},useId:function(){var f=Di(),m=ji.identifierPrefix;if(Pr){var b=oo,B=jt;b=(B&~(1<<32-Dt(B)-1)).toString(32)+b,m=":"+m+"R"+b,b=ll++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=ys++,m=":"+m+"r"+b.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},hv={readContext:Fs,useCallback:cv,useContext:Fs,useEffect:xm,useImperativeHandle:Mm,useInsertionEffect:Sm,useLayoutEffect:lv,useMemo:Vs,useReducer:Vf,useRef:av,useState:function(){return Vf(wc)},useDebugValue:np,useDeferredValue:function(f){var m=Ws();return rp(m,qr.memoizedState,f)},useTransition:function(){var f=Vf(wc)[0],m=Ws().memoizedState;return[f,m]},useMutableSource:ym,useSyncExternalStore:vm,useId:Ra,unstable_isNewReconciler:!1},dv={readContext:Fs,useCallback:cv,useContext:Fs,useEffect:xm,useImperativeHandle:Mm,useInsertionEffect:Sm,useLayoutEffect:lv,useMemo:Vs,useReducer:Ta,useRef:av,useState:function(){return Ta(wc)},useDebugValue:np,useDeferredValue:function(f){var m=Ws();return qr===null?m.memoizedState=f:rp(m,qr.memoizedState,f)},useTransition:function(){var f=Ta(wc)[0],m=Ws().memoizedState;return[f,m]},useMutableSource:ym,useSyncExternalStore:vm,useId:Ra,unstable_isNewReconciler:!1};function lo(f,m){if(f&&f.defaultProps){m=I({},m),f=f.defaultProps;for(var b in f)m[b]===void 0&&(m[b]=f[b]);return m}return m}function qf(f,m,b,B){m=f.memoizedState,b=b(B,m),b=b==null?m:I({},m,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var lp={isMounted:function(f){return(f=f._reactInternals)?Nr(f)===f:!1},enqueueSetState:function(f,m,b){f=f._reactInternals;var B=Gs(),H=Mc(f),ne=_r(B,H);ne.payload=m,b!=null&&(ne.callback=b),m=Or(f,ne,H),m!==null&&(Pa(m,f,H,B),Hi(m,f,H))},enqueueReplaceState:function(f,m,b){f=f._reactInternals;var B=Gs(),H=Mc(f),ne=_r(B,H);ne.tag=1,ne.payload=m,b!=null&&(ne.callback=b),m=Or(f,ne,H),m!==null&&(Pa(m,f,H,B),Hi(m,f,H))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var b=Gs(),B=Mc(f),H=_r(b,B);H.tag=2,m!=null&&(H.callback=m),m=Or(f,H,B),m!==null&&(Pa(m,f,B,b),Hi(m,f,B))}};function pv(f,m,b,B,H,ne,ce){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(B,ne,ce):m.prototype&&m.prototype.isPureReactComponent?!Kl(b,B)||!Kl(H,ne):!0}function g(f,m,b){var B=!1,H=wa,ne=m.contextType;return typeof ne=="object"&&ne!==null?ne=Fs(ne):(H=Vi(m)?_a:Li.current,B=m.contextTypes,ne=(B=B!=null)?Jl(f,H):wa),m=new m(b,ne),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=lp,f.stateNode=m,m._reactInternals=f,B&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=H,f.__reactInternalMemoizedMaskedChildContext=ne),m}function v(f,m,b,B){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,B),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,B),m.state!==f&&lp.enqueueReplaceState(m,m.state,null)}function O(f,m,b,B){var H=f.stateNode;H.props=b,H.state=f.memoizedState,H.refs={},Hn(f);var ne=m.contextType;typeof ne=="object"&&ne!==null?H.context=Fs(ne):(ne=Vi(m)?_a:Li.current,H.context=Jl(f,ne)),H.state=f.memoizedState,ne=m.getDerivedStateFromProps,typeof ne=="function"&&(qf(f,m,ne,b),H.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(m=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),m!==H.state&&lp.enqueueReplaceState(H,H.state,null),jr(f,b,H,B),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308)}function z(f,m){try{var b="",B=m;do b+=$(B),B=B.return;while(B);var H=b}catch(ne){H=`
Error generating stack: `+ne.message+`
`+ne.stack}return{value:f,source:m,stack:H,digest:null}}function Z(f,m,b){return{value:f,source:null,stack:b??null,digest:m??null}}function ie(f,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var xe=typeof WeakMap=="function"?WeakMap:Map;function We(f,m,b){b=_r(-1,b),b.tag=3,b.payload={element:null};var B=m.value;return b.callback=function(){xv||(xv=!0,iS=B),ie(f,m)},b}function dt(f,m,b){b=_r(-1,b),b.tag=3;var B=f.type.getDerivedStateFromError;if(typeof B=="function"){var H=m.value;b.payload=function(){return B(H)},b.callback=function(){ie(f,m)}}var ne=f.stateNode;return ne!==null&&typeof ne.componentDidCatch=="function"&&(b.callback=function(){ie(f,m),typeof B!="function"&&(xc===null?xc=new Set([this]):xc.add(this));var ce=m.stack;this.componentDidCatch(m.value,{componentStack:ce!==null?ce:""})}),b}function zt(f,m,b){var B=f.pingCache;if(B===null){B=f.pingCache=new xe;var H=new Set;B.set(m,H)}else H=B.get(m),H===void 0&&(H=new Set,B.set(m,H));H.has(b)||(H.add(b),f=b5.bind(null,f,m,b),m.then(f,f))}function fn(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function Un(f,m,b,B,H){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=_r(-1,1),m.tag=2,Or(b,m,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=H,f)}var bn=F.ReactCurrentOwner,Gn=!1;function rn(f,m,b,B){m.child=f===null?Of(m,null,b,B):ru(m,f.child,b,B)}function Bi(f,m,b,B,H){b=b.render;var ne=m.ref;return ol(m,H),B=Wf(f,m,b,B,ne,H),b=gm(),f!==null&&!Gn?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~H,du(f,m,H)):(Pr&&b&&um(m),m.flags|=1,rn(f,m,B,H),m.child)}function Hs(f,m,b,B,H){if(f===null){var ne=b.type;return typeof ne=="function"&&!fS(ne)&&ne.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=ne,st(f,m,ne,B,H)):(f=Tv(b.type,null,B,m,m.mode,H),f.ref=m.ref,f.return=m,m.child=f)}if(ne=f.child,(f.lanes&H)===0){var ce=ne.memoizedProps;if(b=b.compare,b=b!==null?b:Kl,b(ce,B)&&f.ref===m.ref)return du(f,m,H)}return m.flags|=1,f=bc(ne,B),f.ref=m.ref,f.return=m,m.child=f}function st(f,m,b,B,H){if(f!==null){var ne=f.memoizedProps;if(Kl(ne,B)&&f.ref===m.ref)if(Gn=!1,m.pendingProps=B=ne,(f.lanes&H)!==0)(f.flags&131072)!==0&&(Gn=!0);else return m.lanes=f.lanes,du(f,m,H)}return Qt(f,m,b,B,H)}function Ke(f,m,b){var B=m.pendingProps,H=B.children,ne=f!==null?f.memoizedState:null;if(B.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(cp,No),No|=b;else{if((b&1073741824)===0)return f=ne!==null?ne.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,Sr(cp,No),No|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=ne!==null?ne.baseLanes:b,Sr(cp,No),No|=B}else ne!==null?(B=ne.baseLanes|b,m.memoizedState=null):B=b,Sr(cp,No),No|=B;return rn(f,m,H,b),m.child}function ft(f,m){var b=m.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function Qt(f,m,b,B,H){var ne=Vi(b)?_a:Li.current;return ne=Jl(m,ne),ol(m,H),b=Wf(f,m,b,B,ne,H),B=gm(),f!==null&&!Gn?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~H,du(f,m,H)):(Pr&&B&&um(m),m.flags|=1,rn(f,m,b,H),m.child)}function yn(f,m,b,B,H){if(Vi(b)){var ne=!0;eu(m)}else ne=!1;if(ol(m,H),m.stateNode===null)gv(f,m),g(m,b,B),O(m,b,B,H),B=!0;else if(f===null){var ce=m.stateNode,Se=m.memoizedProps;ce.props=Se;var ke=ce.context,lt=b.contextType;typeof lt=="object"&&lt!==null?lt=Fs(lt):(lt=Vi(b)?_a:Li.current,lt=Jl(m,lt));var Ct=b.getDerivedStateFromProps,Pt=typeof Ct=="function"||typeof ce.getSnapshotBeforeUpdate=="function";Pt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Se!==B||ke!==lt)&&v(m,ce,B,lt),wr=!1;var Tt=m.memoizedState;ce.state=Tt,jr(m,B,ce,H),ke=m.memoizedState,Se!==B||Tt!==ke||ns.current||wr?(typeof Ct=="function"&&(qf(m,b,Ct,B),ke=m.memoizedState),(Se=wr||pv(m,b,Se,B,Tt,ke,lt))?(Pt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=B,m.memoizedState=ke),ce.props=B,ce.state=ke,ce.context=lt,B=Se):(typeof ce.componentDidMount=="function"&&(m.flags|=4194308),B=!1)}else{ce=m.stateNode,Xr(f,m),Se=m.memoizedProps,lt=m.type===m.elementType?Se:lo(m.type,Se),ce.props=lt,Pt=m.pendingProps,Tt=ce.context,ke=b.contextType,typeof ke=="object"&&ke!==null?ke=Fs(ke):(ke=Vi(b)?_a:Li.current,ke=Jl(m,ke));var on=b.getDerivedStateFromProps;(Ct=typeof on=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Se!==Pt||Tt!==ke)&&v(m,ce,B,ke),wr=!1,Tt=m.memoizedState,ce.state=Tt,jr(m,B,ce,H);var pn=m.memoizedState;Se!==Pt||Tt!==pn||ns.current||wr?(typeof on=="function"&&(qf(m,b,on,B),pn=m.memoizedState),(lt=wr||pv(m,b,lt,B,Tt,pn,ke)||!1)?(Ct||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(B,pn,ke),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(B,pn,ke)),typeof ce.componentDidUpdate=="function"&&(m.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Se===f.memoizedProps&&Tt===f.memoizedState||(m.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Se===f.memoizedProps&&Tt===f.memoizedState||(m.flags|=1024),m.memoizedProps=B,m.memoizedState=pn),ce.props=B,ce.state=pn,ce.context=ke,B=lt):(typeof ce.componentDidUpdate!="function"||Se===f.memoizedProps&&Tt===f.memoizedState||(m.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Se===f.memoizedProps&&Tt===f.memoizedState||(m.flags|=1024),B=!1)}return Vn(f,m,b,B,ne,H)}function Vn(f,m,b,B,H,ne){ft(f,m);var ce=(m.flags&128)!==0;if(!B&&!ce)return H&&am(m,b,!1),du(f,m,ne);B=m.stateNode,bn.current=m;var Se=ce&&typeof b.getDerivedStateFromError!="function"?null:B.render();return m.flags|=1,f!==null&&ce?(m.child=ru(m,f.child,null,ne),m.child=ru(m,null,Se,ne)):rn(f,m,Se,ne),m.memoizedState=B.state,H&&am(m,b,!0),m.child}function Fn(f){var m=f.stateNode;m.pendingContext?om(f,m.pendingContext,m.pendingContext!==m.context):m.context&&om(f,m.context,!1),Ff(f,m.containerInfo)}function sr(f,m,b,B,H){return sl(),pc(H),m.flags|=256,rn(f,m,b,B),m.child}var ti={dehydrated:null,treeContext:null,retryLane:0};function rr(f){return{baseLanes:f,cachePool:null,transitions:null}}function Ca(f,m,b){var B=m.pendingProps,H=Lr.current,ne=!1,ce=(m.flags&128)!==0,Se;if((Se=ce)||(Se=f!==null&&f.memoizedState===null?!1:(H&2)!==0),Se?(ne=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(H|=1),Sr(Lr,H&1),f===null)return Jd(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(ce=B.children,f=B.fallback,ne?(B=m.mode,ne=m.child,ce={mode:"hidden",children:ce},(B&1)===0&&ne!==null?(ne.childLanes=0,ne.pendingProps=ce):ne=Rv(ce,B,0,null),f=Zf(f,B,b,null),ne.return=m,f.return=m,ne.sibling=f,m.child=ne,m.child.memoizedState=rr(b),m.memoizedState=ti,f):Em(m,ce));if(H=f.memoizedState,H!==null&&(Se=H.dehydrated,Se!==null))return d5(f,m,ce,B,Se,H,b);if(ne){ne=B.fallback,ce=m.mode,H=f.child,Se=H.sibling;var ke={mode:"hidden",children:B.children};return(ce&1)===0&&m.child!==H?(B=m.child,B.childLanes=0,B.pendingProps=ke,m.deletions=null):(B=bc(H,ke),B.subtreeFlags=H.subtreeFlags&14680064),Se!==null?ne=bc(Se,ne):(ne=Zf(ne,ce,b,null),ne.flags|=2),ne.return=m,B.return=m,B.sibling=ne,m.child=B,B=ne,ne=m.child,ce=f.child.memoizedState,ce=ce===null?rr(b):{baseLanes:ce.baseLanes|b,cachePool:null,transitions:ce.transitions},ne.memoizedState=ce,ne.childLanes=f.childLanes&~b,m.memoizedState=ti,B}return ne=f.child,f=ne.sibling,B=bc(ne,{mode:"visible",children:B.children}),(m.mode&1)===0&&(B.lanes=b),B.return=m,B.sibling=null,f!==null&&(b=m.deletions,b===null?(m.deletions=[f],m.flags|=16):b.push(f)),m.child=B,m.memoizedState=null,B}function Em(f,m){return m=Rv({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function mv(f,m,b,B){return B!==null&&pc(B),ru(m,f.child,null,b),f=Em(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function d5(f,m,b,B,H,ne,ce){if(b)return m.flags&256?(m.flags&=-257,B=Z(Error(t(422))),mv(f,m,ce,B)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(ne=B.fallback,H=m.mode,B=Rv({mode:"visible",children:B.children},H,0,null),ne=Zf(ne,H,ce,null),ne.flags|=2,B.return=m,ne.return=m,B.sibling=ne,m.child=B,(m.mode&1)!==0&&ru(m,f.child,null,ce),m.child.memoizedState=rr(ce),m.memoizedState=ti,ne);if((m.mode&1)===0)return mv(f,m,ce,null);if(H.data==="$!"){if(B=H.nextSibling&&H.nextSibling.dataset,B)var Se=B.dgst;return B=Se,ne=Error(t(419)),B=Z(ne,B,void 0),mv(f,m,ce,B)}if(Se=(ce&f.childLanes)!==0,Gn||Se){if(B=ji,B!==null){switch(ce&-ce){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=(H&(B.suspendedLanes|ce))!==0?0:H,H!==0&&H!==ne.retryLane&&(ne.retryLane=H,To(f,H),Pa(B,f,H,-1))}return cS(),B=Z(Error(t(421))),mv(f,m,ce,B)}return H.data==="$?"?(m.flags|=128,m.child=f.child,m=A5.bind(null,f),H._reactRetry=m,null):(f=ne.treeContext,is=ya(H.nextSibling),ki=m,Pr=!0,ao=null,f!==null&&(rs[Si++]=jt,rs[Si++]=oo,rs[Si++]=nu,jt=f.id,oo=f.overflow,nu=m),m=Em(m,B.children),m.flags|=4096,m)}function KR(f,m,b){f.lanes|=m;var B=f.alternate;B!==null&&(B.lanes|=m),Bf(f.return,m,b)}function Xx(f,m,b,B,H){var ne=f.memoizedState;ne===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:B,tail:b,tailMode:H}:(ne.isBackwards=m,ne.rendering=null,ne.renderingStartTime=0,ne.last=B,ne.tail=b,ne.tailMode=H)}function YR(f,m,b){var B=m.pendingProps,H=B.revealOrder,ne=B.tail;if(rn(f,m,B.children,b),B=Lr.current,(B&2)!==0)B=B&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&KR(f,b,m);else if(f.tag===19)KR(f,b,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}B&=1}if(Sr(Lr,B),(m.mode&1)===0)m.memoizedState=null;else switch(H){case"forwards":for(b=m.child,H=null;b!==null;)f=b.alternate,f!==null&&Ro(f)===null&&(H=b),b=b.sibling;b=H,b===null?(H=m.child,m.child=null):(H=b.sibling,b.sibling=null),Xx(m,!1,H,b,ne);break;case"backwards":for(b=null,H=m.child,m.child=null;H!==null;){if(f=H.alternate,f!==null&&Ro(f)===null){m.child=H;break}f=H.sibling,H.sibling=b,b=H,H=f}Xx(m,!0,b,null,ne);break;case"together":Xx(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function gv(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function du(f,m,b){if(f!==null&&(m.dependencies=f.dependencies),Kf|=m.lanes,(b&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(t(153));if(m.child!==null){for(f=m.child,b=bc(f,f.pendingProps),m.child=b,b.return=m;f.sibling!==null;)f=f.sibling,b=b.sibling=bc(f,f.pendingProps),b.return=m;b.sibling=null}return m.child}function p5(f,m,b){switch(m.tag){case 3:Fn(m),sl();break;case 5:uu(m);break;case 1:Vi(m.type)&&eu(m);break;case 4:Ff(m,m.stateNode.containerInfo);break;case 10:var B=m.type._context,H=m.memoizedProps.value;Sr(iu,B._currentValue),B._currentValue=H;break;case 13:if(B=m.memoizedState,B!==null)return B.dehydrated!==null?(Sr(Lr,Lr.current&1),m.flags|=128,null):(b&m.child.childLanes)!==0?Ca(f,m,b):(Sr(Lr,Lr.current&1),f=du(f,m,b),f!==null?f.sibling:null);Sr(Lr,Lr.current&1);break;case 19:if(B=(b&m.childLanes)!==0,(f.flags&128)!==0){if(B)return YR(f,m,b);m.flags|=128}if(H=m.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Sr(Lr,Lr.current),B)break;return null;case 22:case 23:return m.lanes=0,Ke(f,m,b)}return du(f,m,b)}var XR,$x,$R,ZR;XR=function(f,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},$x=function(){},$R=function(f,m,b,B){var H=f.memoizedProps;if(H!==B){f=m.stateNode,ei(zs.current);var ne=null;switch(b){case"input":H=Ge(f,H),B=Ge(f,B),ne=[];break;case"select":H=I({},H,{value:void 0}),B=I({},B,{value:void 0}),ne=[];break;case"textarea":H=Oe(f,H),B=Oe(f,B),ne=[];break;default:typeof H.onClick!="function"&&typeof B.onClick=="function"&&(f.onclick=Rf)}le(b,B);var ce;b=null;for(lt in H)if(!B.hasOwnProperty(lt)&&H.hasOwnProperty(lt)&&H[lt]!=null)if(lt==="style"){var Se=H[lt];for(ce in Se)Se.hasOwnProperty(ce)&&(b||(b={}),b[ce]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(i.hasOwnProperty(lt)?ne||(ne=[]):(ne=ne||[]).push(lt,null));for(lt in B){var ke=B[lt];if(Se=H!=null?H[lt]:void 0,B.hasOwnProperty(lt)&&ke!==Se&&(ke!=null||Se!=null))if(lt==="style")if(Se){for(ce in Se)!Se.hasOwnProperty(ce)||ke&&ke.hasOwnProperty(ce)||(b||(b={}),b[ce]="");for(ce in ke)ke.hasOwnProperty(ce)&&Se[ce]!==ke[ce]&&(b||(b={}),b[ce]=ke[ce])}else b||(ne||(ne=[]),ne.push(lt,b)),b=ke;else lt==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,Se=Se?Se.__html:void 0,ke!=null&&Se!==ke&&(ne=ne||[]).push(lt,ke)):lt==="children"?typeof ke!="string"&&typeof ke!="number"||(ne=ne||[]).push(lt,""+ke):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(i.hasOwnProperty(lt)?(ke!=null&&lt==="onScroll"&&Ar("scroll",f),ne||Se===ke||(ne=[])):(ne=ne||[]).push(lt,ke))}b&&(ne=ne||[]).push("style",b);var lt=ne;(m.updateQueue=lt)&&(m.flags|=4)}},ZR=function(f,m,b,B){b!==B&&(m.flags|=4)};function bm(f,m){if(!Pr)switch(f.tailMode){case"hidden":m=f.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var B=null;b!==null;)b.alternate!==null&&(B=b),b=b.sibling;B===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:B.sibling=null}}function vs(f){var m=f.alternate!==null&&f.alternate.child===f.child,b=0,B=0;if(m)for(var H=f.child;H!==null;)b|=H.lanes|H.childLanes,B|=H.subtreeFlags&14680064,B|=H.flags&14680064,H.return=f,H=H.sibling;else for(H=f.child;H!==null;)b|=H.lanes|H.childLanes,B|=H.subtreeFlags,B|=H.flags,H.return=f,H=H.sibling;return f.subtreeFlags|=B,f.childLanes=b,m}function m5(f,m,b){var B=m.pendingProps;switch(Sa(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(m),null;case 1:return Vi(m.type)&&Cf(),vs(m),null;case 3:return B=m.stateNode,al(),Tr(ns),Tr(Li),Zo(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(f===null||f.child===null)&&(dc(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ao!==null&&(aS(ao),ao=null))),$x(f,m),vs(m),null;case 5:yc(m);var H=ei(ba.current);if(b=m.type,f!==null&&m.stateNode!=null)$R(f,m,b,B,H),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!B){if(m.stateNode===null)throw Error(t(166));return vs(m),null}if(f=ei(zs.current),dc(m)){B=m.stateNode,b=m.type;var ne=m.memoizedProps;switch(B[ci]=m,B[hc]=ne,f=(m.mode&1)!==0,b){case"dialog":Ar("cancel",B),Ar("close",B);break;case"iframe":case"object":case"embed":Ar("load",B);break;case"video":case"audio":for(H=0;H<rl.length;H++)Ar(rl[H],B);break;case"source":Ar("error",B);break;case"img":case"image":case"link":Ar("error",B),Ar("load",B);break;case"details":Ar("toggle",B);break;case"input":je(B,ne),Ar("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!ne.multiple},Ar("invalid",B);break;case"textarea":Te(B,ne),Ar("invalid",B)}le(b,ne),H=null;for(var ce in ne)if(ne.hasOwnProperty(ce)){var Se=ne[ce];ce==="children"?typeof Se=="string"?B.textContent!==Se&&(ne.suppressHydrationWarning!==!0&&Tf(B.textContent,Se,f),H=["children",Se]):typeof Se=="number"&&B.textContent!==""+Se&&(ne.suppressHydrationWarning!==!0&&Tf(B.textContent,Se,f),H=["children",""+Se]):i.hasOwnProperty(ce)&&Se!=null&&ce==="onScroll"&&Ar("scroll",B)}switch(b){case"input":Ze(B),nt(B,ne,!0);break;case"textarea":Ze(B),ot(B);break;case"select":case"option":break;default:typeof ne.onClick=="function"&&(B.onclick=Rf)}B=H,m.updateQueue=B,B!==null&&(m.flags|=4)}else{ce=H.nodeType===9?H:H.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=et(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=ce.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof B.is=="string"?f=ce.createElement(b,{is:B.is}):(f=ce.createElement(b),b==="select"&&(ce=f,B.multiple?ce.multiple=!0:B.size&&(ce.size=B.size))):f=ce.createElementNS(f,b),f[ci]=m,f[hc]=B,XR(f,m,!1,!1),m.stateNode=f;e:{switch(ce=Xe(b,B),b){case"dialog":Ar("cancel",f),Ar("close",f),H=B;break;case"iframe":case"object":case"embed":Ar("load",f),H=B;break;case"video":case"audio":for(H=0;H<rl.length;H++)Ar(rl[H],f);H=B;break;case"source":Ar("error",f),H=B;break;case"img":case"image":case"link":Ar("error",f),Ar("load",f),H=B;break;case"details":Ar("toggle",f),H=B;break;case"input":je(f,B),H=Ge(f,B),Ar("invalid",f);break;case"option":H=B;break;case"select":f._wrapperState={wasMultiple:!!B.multiple},H=I({},B,{value:void 0}),Ar("invalid",f);break;case"textarea":Te(f,B),H=Oe(f,B),Ar("invalid",f);break;default:H=B}le(b,H),Se=H;for(ne in Se)if(Se.hasOwnProperty(ne)){var ke=Se[ne];ne==="style"?ve(f,ke):ne==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ke!=null&&ut(f,ke)):ne==="children"?typeof ke=="string"?(b!=="textarea"||ke!=="")&&re(f,ke):typeof ke=="number"&&re(f,""+ke):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(i.hasOwnProperty(ne)?ke!=null&&ne==="onScroll"&&Ar("scroll",f):ke!=null&&k(f,ne,ke,ce))}switch(b){case"input":Ze(f),nt(f,B,!1);break;case"textarea":Ze(f),ot(f);break;case"option":B.value!=null&&f.setAttribute("value",""+_e(B.value));break;case"select":f.multiple=!!B.multiple,ne=B.value,ne!=null?oe(f,!!B.multiple,ne,!1):B.defaultValue!=null&&oe(f,!!B.multiple,B.defaultValue,!0);break;default:typeof H.onClick=="function"&&(f.onclick=Rf)}switch(b){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return vs(m),null;case 6:if(f&&m.stateNode!=null)ZR(f,m,f.memoizedProps,B);else{if(typeof B!="string"&&m.stateNode===null)throw Error(t(166));if(b=ei(ba.current),ei(zs.current),dc(m)){if(B=m.stateNode,b=m.memoizedProps,B[ci]=m,(ne=B.nodeValue!==b)&&(f=ki,f!==null))switch(f.tag){case 3:Tf(B.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Tf(B.nodeValue,b,(f.mode&1)!==0)}ne&&(m.flags|=4)}else B=(b.nodeType===9?b:b.ownerDocument).createTextNode(B),B[ci]=m,m.stateNode=B}return vs(m),null;case 13:if(Tr(Lr),B=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Pr&&is!==null&&(m.mode&1)!==0&&(m.flags&128)===0)hm(),sl(),m.flags|=98560,ne=!1;else if(ne=dc(m),B!==null&&B.dehydrated!==null){if(f===null){if(!ne)throw Error(t(318));if(ne=m.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(t(317));ne[ci]=m}else sl(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;vs(m),ne=!1}else ao!==null&&(aS(ao),ao=null),ne=!0;if(!ne)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=b,m):(B=B!==null,B!==(f!==null&&f.memoizedState!==null)&&B&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(Lr.current&1)!==0?Ui===0&&(Ui=3):cS())),m.updateQueue!==null&&(m.flags|=4),vs(m),null);case 4:return al(),$x(f,m),f===null&&uc(m.stateNode.containerInfo),vs(m),null;case 10:return Df(m.type._context),vs(m),null;case 17:return Vi(m.type)&&Cf(),vs(m),null;case 19:if(Tr(Lr),ne=m.memoizedState,ne===null)return vs(m),null;if(B=(m.flags&128)!==0,ce=ne.rendering,ce===null)if(B)bm(ne,!1);else{if(Ui!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(ce=Ro(f),ce!==null){for(m.flags|=128,bm(ne,!1),B=ce.updateQueue,B!==null&&(m.updateQueue=B,m.flags|=4),m.subtreeFlags=0,B=b,b=m.child;b!==null;)ne=b,f=B,ne.flags&=14680066,ce=ne.alternate,ce===null?(ne.childLanes=0,ne.lanes=f,ne.child=null,ne.subtreeFlags=0,ne.memoizedProps=null,ne.memoizedState=null,ne.updateQueue=null,ne.dependencies=null,ne.stateNode=null):(ne.childLanes=ce.childLanes,ne.lanes=ce.lanes,ne.child=ce.child,ne.subtreeFlags=0,ne.deletions=null,ne.memoizedProps=ce.memoizedProps,ne.memoizedState=ce.memoizedState,ne.updateQueue=ce.updateQueue,ne.type=ce.type,f=ce.dependencies,ne.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return Sr(Lr,Lr.current&1|2),m.child}f=f.sibling}ne.tail!==null&&bt()>fp&&(m.flags|=128,B=!0,bm(ne,!1),m.lanes=4194304)}else{if(!B)if(f=Ro(ce),f!==null){if(m.flags|=128,B=!0,b=f.updateQueue,b!==null&&(m.updateQueue=b,m.flags|=4),bm(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!ce.alternate&&!Pr)return vs(m),null}else 2*bt()-ne.renderingStartTime>fp&&b!==1073741824&&(m.flags|=128,B=!0,bm(ne,!1),m.lanes=4194304);ne.isBackwards?(ce.sibling=m.child,m.child=ce):(b=ne.last,b!==null?b.sibling=ce:m.child=ce,ne.last=ce)}return ne.tail!==null?(m=ne.tail,ne.rendering=m,ne.tail=m.sibling,ne.renderingStartTime=bt(),m.sibling=null,b=Lr.current,Sr(Lr,B?b&1|2:b&1),m):(vs(m),null);case 22:case 23:return uS(),B=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==B&&(m.flags|=8192),B&&(m.mode&1)!==0?(No&1073741824)!==0&&(vs(m),m.subtreeFlags&6&&(m.flags|=8192)):vs(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function g5(f,m){switch(Sa(m),m.tag){case 1:return Vi(m.type)&&Cf(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return al(),Tr(ns),Tr(Li),Zo(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return yc(m),null;case 13:if(Tr(Lr),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(t(340));sl()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return Tr(Lr),null;case 4:return al(),null;case 10:return Df(m.type._context),null;case 22:case 23:return uS(),null;case 24:return null;default:return null}}var yv=!1,ws=!1,y5=typeof WeakSet=="function"?WeakSet:Set,hn=null;function up(f,m){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(B){ni(f,m,B)}else b.current=null}function Zx(f,m,b){try{b()}catch(B){ni(f,m,B)}}var QR=!1;function v5(f,m){if(fc=eo,f=Wr(),vi(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var B=b.getSelection&&b.getSelection();if(B&&B.rangeCount!==0){b=B.anchorNode;var H=B.anchorOffset,ne=B.focusNode;B=B.focusOffset;try{b.nodeType,ne.nodeType}catch{b=null;break e}var ce=0,Se=-1,ke=-1,lt=0,Ct=0,Pt=f,Tt=null;t:for(;;){for(var on;Pt!==b||H!==0&&Pt.nodeType!==3||(Se=ce+H),Pt!==ne||B!==0&&Pt.nodeType!==3||(ke=ce+B),Pt.nodeType===3&&(ce+=Pt.nodeValue.length),(on=Pt.firstChild)!==null;)Tt=Pt,Pt=on;for(;;){if(Pt===f)break t;if(Tt===b&&++lt===H&&(Se=ce),Tt===ne&&++Ct===B&&(ke=ce),(on=Pt.nextSibling)!==null)break;Pt=Tt,Tt=Pt.parentNode}Pt=on}b=Se===-1||ke===-1?null:{start:Se,end:ke}}else b=null}b=b||{start:0,end:0}}else b=null;for(em={focusedElem:f,selectionRange:b},eo=!1,hn=m;hn!==null;)if(m=hn,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,hn=f;else for(;hn!==null;){m=hn;try{var pn=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(pn!==null){var gn=pn.memoizedProps,fi=pn.memoizedState,Je=m.stateNode,ze=Je.getSnapshotBeforeUpdate(m.elementType===m.type?gn:lo(m.type,gn),fi);Je.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var rt=m.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Wt){ni(m,m.return,Wt)}if(f=m.sibling,f!==null){f.return=m.return,hn=f;break}hn=m.return}return pn=QR,QR=!1,pn}function Am(f,m,b){var B=m.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var H=B=B.next;do{if((H.tag&f)===f){var ne=H.destroy;H.destroy=void 0,ne!==void 0&&Zx(m,b,ne)}H=H.next}while(H!==B)}}function vv(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&f)===f){var B=b.create;b.destroy=B()}b=b.next}while(b!==m)}}function Qx(f){var m=f.ref;if(m!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof m=="function"?m(f):m.current=f}}function JR(f){var m=f.alternate;m!==null&&(f.alternate=null,JR(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[ci],delete m[hc],delete m[Ql],delete m[qd],delete m[Kd])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function e2(f){return f.tag===5||f.tag===3||f.tag===4}function t2(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||e2(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Jx(f,m,b){var B=f.tag;if(B===5||B===6)f=f.stateNode,m?b.nodeType===8?b.parentNode.insertBefore(f,m):b.insertBefore(f,m):(b.nodeType===8?(m=b.parentNode,m.insertBefore(f,b)):(m=b,m.appendChild(f)),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=Rf));else if(B!==4&&(f=f.child,f!==null))for(Jx(f,m,b),f=f.sibling;f!==null;)Jx(f,m,b),f=f.sibling}function eS(f,m,b){var B=f.tag;if(B===5||B===6)f=f.stateNode,m?b.insertBefore(f,m):b.appendChild(f);else if(B!==4&&(f=f.child,f!==null))for(eS(f,m,b),f=f.sibling;f!==null;)eS(f,m,b),f=f.sibling}var os=null,Ia=!1;function _c(f,m,b){for(b=b.child;b!==null;)n2(f,m,b),b=b.sibling}function n2(f,m,b){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(En,b)}catch{}switch(b.tag){case 5:ws||up(b,m);case 6:var B=os,H=Ia;os=null,_c(f,m,b),os=B,Ia=H,os!==null&&(Ia?(f=os,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):os.removeChild(b.stateNode));break;case 18:os!==null&&(Ia?(f=os,b=b.stateNode,f.nodeType===8?jd(f.parentNode,b):f.nodeType===1&&jd(f,b),gf(f)):jd(os,b.stateNode));break;case 4:B=os,H=Ia,os=b.stateNode.containerInfo,Ia=!0,_c(f,m,b),os=B,Ia=H;break;case 0:case 11:case 14:case 15:if(!ws&&(B=b.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){H=B=B.next;do{var ne=H,ce=ne.destroy;ne=ne.tag,ce!==void 0&&((ne&2)!==0||(ne&4)!==0)&&Zx(b,m,ce),H=H.next}while(H!==B)}_c(f,m,b);break;case 1:if(!ws&&(up(b,m),B=b.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=b.memoizedProps,B.state=b.memoizedState,B.componentWillUnmount()}catch(Se){ni(b,m,Se)}_c(f,m,b);break;case 21:_c(f,m,b);break;case 22:b.mode&1?(ws=(B=ws)||b.memoizedState!==null,_c(f,m,b),ws=B):_c(f,m,b);break;default:_c(f,m,b)}}function r2(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new y5),m.forEach(function(B){var H=T5.bind(null,f,B);b.has(B)||(b.add(B),B.then(H,H))})}}function Na(f,m){var b=m.deletions;if(b!==null)for(var B=0;B<b.length;B++){var H=b[B];try{var ne=f,ce=m,Se=ce;e:for(;Se!==null;){switch(Se.tag){case 5:os=Se.stateNode,Ia=!1;break e;case 3:os=Se.stateNode.containerInfo,Ia=!0;break e;case 4:os=Se.stateNode.containerInfo,Ia=!0;break e}Se=Se.return}if(os===null)throw Error(t(160));n2(ne,ce,H),os=null,Ia=!1;var ke=H.alternate;ke!==null&&(ke.return=null),H.return=null}catch(lt){ni(H,m,lt)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)i2(m,f),m=m.sibling}function i2(f,m){var b=f.alternate,B=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Na(m,f),ul(f),B&4){try{Am(3,f,f.return),vv(3,f)}catch(gn){ni(f,f.return,gn)}try{Am(5,f,f.return)}catch(gn){ni(f,f.return,gn)}}break;case 1:Na(m,f),ul(f),B&512&&b!==null&&up(b,b.return);break;case 5:if(Na(m,f),ul(f),B&512&&b!==null&&up(b,b.return),f.flags&32){var H=f.stateNode;try{re(H,"")}catch(gn){ni(f,f.return,gn)}}if(B&4&&(H=f.stateNode,H!=null)){var ne=f.memoizedProps,ce=b!==null?b.memoizedProps:ne,Se=f.type,ke=f.updateQueue;if(f.updateQueue=null,ke!==null)try{Se==="input"&&ne.type==="radio"&&ne.name!=null&&yt(H,ne),Xe(Se,ce);var lt=Xe(Se,ne);for(ce=0;ce<ke.length;ce+=2){var Ct=ke[ce],Pt=ke[ce+1];Ct==="style"?ve(H,Pt):Ct==="dangerouslySetInnerHTML"?ut(H,Pt):Ct==="children"?re(H,Pt):k(H,Ct,Pt,lt)}switch(Se){case"input":He(H,ne);break;case"textarea":Le(H,ne);break;case"select":var Tt=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!ne.multiple;var on=ne.value;on!=null?oe(H,!!ne.multiple,on,!1):Tt!==!!ne.multiple&&(ne.defaultValue!=null?oe(H,!!ne.multiple,ne.defaultValue,!0):oe(H,!!ne.multiple,ne.multiple?[]:"",!1))}H[hc]=ne}catch(gn){ni(f,f.return,gn)}}break;case 6:if(Na(m,f),ul(f),B&4){if(f.stateNode===null)throw Error(t(162));H=f.stateNode,ne=f.memoizedProps;try{H.nodeValue=ne}catch(gn){ni(f,f.return,gn)}}break;case 3:if(Na(m,f),ul(f),B&4&&b!==null&&b.memoizedState.isDehydrated)try{gf(m.containerInfo)}catch(gn){ni(f,f.return,gn)}break;case 4:Na(m,f),ul(f);break;case 13:Na(m,f),ul(f),H=f.child,H.flags&8192&&(ne=H.memoizedState!==null,H.stateNode.isHidden=ne,!ne||H.alternate!==null&&H.alternate.memoizedState!==null||(rS=bt())),B&4&&r2(f);break;case 22:if(Ct=b!==null&&b.memoizedState!==null,f.mode&1?(ws=(lt=ws)||Ct,Na(m,f),ws=lt):Na(m,f),ul(f),B&8192){if(lt=f.memoizedState!==null,(f.stateNode.isHidden=lt)&&!Ct&&(f.mode&1)!==0)for(hn=f,Ct=f.child;Ct!==null;){for(Pt=hn=Ct;hn!==null;){switch(Tt=hn,on=Tt.child,Tt.tag){case 0:case 11:case 14:case 15:Am(4,Tt,Tt.return);break;case 1:up(Tt,Tt.return);var pn=Tt.stateNode;if(typeof pn.componentWillUnmount=="function"){B=Tt,b=Tt.return;try{m=B,pn.props=m.memoizedProps,pn.state=m.memoizedState,pn.componentWillUnmount()}catch(gn){ni(B,b,gn)}}break;case 5:up(Tt,Tt.return);break;case 22:if(Tt.memoizedState!==null){a2(Pt);continue}}on!==null?(on.return=Tt,hn=on):a2(Pt)}Ct=Ct.sibling}e:for(Ct=null,Pt=f;;){if(Pt.tag===5){if(Ct===null){Ct=Pt;try{H=Pt.stateNode,lt?(ne=H.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none"):(Se=Pt.stateNode,ke=Pt.memoizedProps.style,ce=ke!=null&&ke.hasOwnProperty("display")?ke.display:null,Se.style.display=ue("display",ce))}catch(gn){ni(f,f.return,gn)}}}else if(Pt.tag===6){if(Ct===null)try{Pt.stateNode.nodeValue=lt?"":Pt.memoizedProps}catch(gn){ni(f,f.return,gn)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===f)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===f)break e;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===f)break e;Ct===Pt&&(Ct=null),Pt=Pt.return}Ct===Pt&&(Ct=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}break;case 19:Na(m,f),ul(f),B&4&&r2(f);break;case 21:break;default:Na(m,f),ul(f)}}function ul(f){var m=f.flags;if(m&2){try{e:{for(var b=f.return;b!==null;){if(e2(b)){var B=b;break e}b=b.return}throw Error(t(160))}switch(B.tag){case 5:var H=B.stateNode;B.flags&32&&(re(H,""),B.flags&=-33);var ne=t2(f);eS(f,ne,H);break;case 3:case 4:var ce=B.stateNode.containerInfo,Se=t2(f);Jx(f,Se,ce);break;default:throw Error(t(161))}}catch(ke){ni(f,f.return,ke)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function w5(f,m,b){hn=f,s2(f)}function s2(f,m,b){for(var B=(f.mode&1)!==0;hn!==null;){var H=hn,ne=H.child;if(H.tag===22&&B){var ce=H.memoizedState!==null||yv;if(!ce){var Se=H.alternate,ke=Se!==null&&Se.memoizedState!==null||ws;Se=yv;var lt=ws;if(yv=ce,(ws=ke)&&!lt)for(hn=H;hn!==null;)ce=hn,ke=ce.child,ce.tag===22&&ce.memoizedState!==null?l2(H):ke!==null?(ke.return=ce,hn=ke):l2(H);for(;ne!==null;)hn=ne,s2(ne),ne=ne.sibling;hn=H,yv=Se,ws=lt}o2(f)}else(H.subtreeFlags&8772)!==0&&ne!==null?(ne.return=H,hn=ne):o2(f)}}function o2(f){for(;hn!==null;){var m=hn;if((m.flags&8772)!==0){var b=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:ws||vv(5,m);break;case 1:var B=m.stateNode;if(m.flags&4&&!ws)if(b===null)B.componentDidMount();else{var H=m.elementType===m.type?b.memoizedProps:lo(m.type,b.memoizedProps);B.componentDidUpdate(H,b.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var ne=m.updateQueue;ne!==null&&gc(m,ne,B);break;case 3:var ce=m.updateQueue;if(ce!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=m.child.stateNode;break;case 1:b=m.child.stateNode}gc(m,ce,b)}break;case 5:var Se=m.stateNode;if(b===null&&m.flags&4){b=Se;var ke=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":ke.autoFocus&&b.focus();break;case"img":ke.src&&(b.src=ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var lt=m.alternate;if(lt!==null){var Ct=lt.memoizedState;if(Ct!==null){var Pt=Ct.dehydrated;Pt!==null&&gf(Pt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ws||m.flags&512&&Qx(m)}catch(Tt){ni(m,m.return,Tt)}}if(m===f){hn=null;break}if(b=m.sibling,b!==null){b.return=m.return,hn=b;break}hn=m.return}}function a2(f){for(;hn!==null;){var m=hn;if(m===f){hn=null;break}var b=m.sibling;if(b!==null){b.return=m.return,hn=b;break}hn=m.return}}function l2(f){for(;hn!==null;){var m=hn;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{vv(4,m)}catch(ke){ni(m,b,ke)}break;case 1:var B=m.stateNode;if(typeof B.componentDidMount=="function"){var H=m.return;try{B.componentDidMount()}catch(ke){ni(m,H,ke)}}var ne=m.return;try{Qx(m)}catch(ke){ni(m,ne,ke)}break;case 5:var ce=m.return;try{Qx(m)}catch(ke){ni(m,ce,ke)}}}catch(ke){ni(m,m.return,ke)}if(m===f){hn=null;break}var Se=m.sibling;if(Se!==null){Se.return=m.return,hn=Se;break}hn=m.return}}var _5=Math.ceil,wv=F.ReactCurrentDispatcher,tS=F.ReactCurrentOwner,Jo=F.ReactCurrentBatchConfig,cr=0,ji=null,Mi=null,as=0,No=0,cp=Gr(0),Ui=0,Tm=null,Kf=0,_v=0,nS=0,Rm=null,uo=null,rS=0,fp=1/0,pu=null,xv=!1,iS=null,xc=null,Sv=!1,Sc=null,Mv=0,Cm=0,sS=null,Ev=-1,bv=0;function Gs(){return(cr&6)!==0?bt():Ev!==-1?Ev:Ev=bt()}function Mc(f){return(f.mode&1)===0?1:(cr&2)!==0&&as!==0?as&-as:Kx.transition!==null?(bv===0&&(bv=Bt()),bv):(f=Cn,f!==0||(f=window.event,f=f===void 0?16:Gy(f.type)),f)}function Pa(f,m,b,B){if(50<Cm)throw Cm=0,sS=null,Error(t(185));cn(f,b,B),((cr&2)===0||f!==ji)&&(f===ji&&((cr&2)===0&&(_v|=b),Ui===4&&Ec(f,as)),co(f,B),b===1&&cr===0&&(m.mode&1)===0&&(fp=bt()+500,Nf&&Xo()))}function co(f,m){var b=f.callbackNode;Fe(f,m);var B=pt(f,f===ji?as:0);if(B===0)b!==null&&Be(b),f.callbackNode=null,f.callbackPriority=0;else if(m=B&-B,f.callbackPriority!==m){if(b!=null&&Be(b),m===1)f.tag===0?iv(c2.bind(null,f)):Pf(c2.bind(null,f)),qx(function(){(cr&6)===0&&Xo()}),b=null;else{switch(Js(B)){case 1:b=nn;break;case 4:b=sn;break;case 16:b=qt;break;case 536870912:b=Rn;break;default:b=qt}b=v2(b,u2.bind(null,f))}f.callbackPriority=m,f.callbackNode=b}}function u2(f,m){if(Ev=-1,bv=0,(cr&6)!==0)throw Error(t(327));var b=f.callbackNode;if(hp()&&f.callbackNode!==b)return null;var B=pt(f,f===ji?as:0);if(B===0)return null;if((B&30)!==0||(B&f.expiredLanes)!==0||m)m=Av(f,B);else{m=B;var H=cr;cr|=2;var ne=h2();(ji!==f||as!==m)&&(pu=null,fp=bt()+500,Xf(f,m));do try{M5();break}catch(Se){f2(f,Se)}while(!0);ou(),wv.current=ne,cr=H,Mi!==null?m=0:(ji=null,as=0,m=Ui)}if(m!==0){if(m===2&&(H=xt(f),H!==0&&(B=H,m=oS(f,H))),m===1)throw b=Tm,Xf(f,0),Ec(f,B),co(f,bt()),b;if(m===6)Ec(f,B);else{if(H=f.current.alternate,(B&30)===0&&!x5(H)&&(m=Av(f,B),m===2&&(ne=xt(f),ne!==0&&(B=ne,m=oS(f,ne))),m===1))throw b=Tm,Xf(f,0),Ec(f,B),co(f,bt()),b;switch(f.finishedWork=H,f.finishedLanes=B,m){case 0:case 1:throw Error(t(345));case 2:$f(f,uo,pu);break;case 3:if(Ec(f,B),(B&130023424)===B&&(m=rS+500-bt(),10<m)){if(pt(f,0)!==0)break;if(H=f.suspendedLanes,(H&B)!==B){Gs(),f.pingedLanes|=f.suspendedLanes&H;break}f.timeoutHandle=nm($f.bind(null,f,uo,pu),m);break}$f(f,uo,pu);break;case 4:if(Ec(f,B),(B&4194240)===B)break;for(m=f.eventTimes,H=-1;0<B;){var ce=31-Dt(B);ne=1<<ce,ce=m[ce],ce>H&&(H=ce),B&=~ne}if(B=H,B=bt()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*_5(B/1960))-B,10<B){f.timeoutHandle=nm($f.bind(null,f,uo,pu),B);break}$f(f,uo,pu);break;case 5:$f(f,uo,pu);break;default:throw Error(t(329))}}}return co(f,bt()),f.callbackNode===b?u2.bind(null,f):null}function oS(f,m){var b=Rm;return f.current.memoizedState.isDehydrated&&(Xf(f,m).flags|=256),f=Av(f,m),f!==2&&(m=uo,uo=b,m!==null&&aS(m)),f}function aS(f){uo===null?uo=f:uo.push.apply(uo,f)}function x5(f){for(var m=f;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var B=0;B<b.length;B++){var H=b[B],ne=H.getSnapshot;H=H.value;try{if(!Ds(ne(),H))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ec(f,m){for(m&=~nS,m&=~_v,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var b=31-Dt(m),B=1<<b;f[b]=-1,m&=~B}}function c2(f){if((cr&6)!==0)throw Error(t(327));hp();var m=pt(f,0);if((m&1)===0)return co(f,bt()),null;var b=Av(f,m);if(f.tag!==0&&b===2){var B=xt(f);B!==0&&(m=B,b=oS(f,B))}if(b===1)throw b=Tm,Xf(f,0),Ec(f,m),co(f,bt()),b;if(b===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,$f(f,uo,pu),co(f,bt()),null}function lS(f,m){var b=cr;cr|=1;try{return f(m)}finally{cr=b,cr===0&&(fp=bt()+500,Nf&&Xo())}}function Yf(f){Sc!==null&&Sc.tag===0&&(cr&6)===0&&hp();var m=cr;cr|=1;var b=Jo.transition,B=Cn;try{if(Jo.transition=null,Cn=1,f)return f()}finally{Cn=B,Jo.transition=b,cr=m,(cr&6)===0&&Xo()}}function uS(){No=cp.current,Tr(cp)}function Xf(f,m){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,rm(b)),Mi!==null)for(b=Mi.return;b!==null;){var B=b;switch(Sa(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Cf();break;case 3:al(),Tr(ns),Tr(Li),Zo();break;case 5:yc(B);break;case 4:al();break;case 13:Tr(Lr);break;case 19:Tr(Lr);break;case 10:Df(B.type._context);break;case 22:case 23:uS()}b=b.return}if(ji=f,Mi=f=bc(f.current,null),as=No=m,Ui=0,Tm=null,nS=_v=Kf=0,uo=Rm=null,Ea!==null){for(m=0;m<Ea.length;m++)if(b=Ea[m],B=b.interleaved,B!==null){b.interleaved=null;var H=B.next,ne=b.pending;if(ne!==null){var ce=ne.next;ne.next=H,B.next=ce}b.pending=B}Ea=null}return f}function f2(f,m){do{var b=Mi;try{if(ou(),cu.current=ap,Co){for(var B=Rr.memoizedState;B!==null;){var H=B.queue;H!==null&&(H.pending=null),B=B.next}Co=!1}if(Aa=0,or=qr=Rr=null,Gi=!1,ll=0,tS.current=null,b===null||b.return===null){Ui=1,Tm=m,Mi=null;break}e:{var ne=f,ce=b.return,Se=b,ke=m;if(m=as,Se.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var lt=ke,Ct=Se,Pt=Ct.tag;if((Ct.mode&1)===0&&(Pt===0||Pt===11||Pt===15)){var Tt=Ct.alternate;Tt?(Ct.updateQueue=Tt.updateQueue,Ct.memoizedState=Tt.memoizedState,Ct.lanes=Tt.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var on=fn(ce);if(on!==null){on.flags&=-257,Un(on,ce,Se,ne,m),on.mode&1&&zt(ne,lt,m),m=on,ke=lt;var pn=m.updateQueue;if(pn===null){var gn=new Set;gn.add(ke),m.updateQueue=gn}else pn.add(ke);break e}else{if((m&1)===0){zt(ne,lt,m),cS();break e}ke=Error(t(426))}}else if(Pr&&Se.mode&1){var fi=fn(ce);if(fi!==null){(fi.flags&65536)===0&&(fi.flags|=256),Un(fi,ce,Se,ne,m),pc(z(ke,Se));break e}}ne=ke=z(ke,Se),Ui!==4&&(Ui=2),Rm===null?Rm=[ne]:Rm.push(ne),ne=ce;do{switch(ne.tag){case 3:ne.flags|=65536,m&=-m,ne.lanes|=m;var Je=We(ne,ke,m);au(ne,Je);break e;case 1:Se=ke;var ze=ne.type,rt=ne.stateNode;if((ne.flags&128)===0&&(typeof ze.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(xc===null||!xc.has(rt)))){ne.flags|=65536,m&=-m,ne.lanes|=m;var Wt=dt(ne,Se,m);au(ne,Wt);break e}}ne=ne.return}while(ne!==null)}p2(b)}catch(wn){m=wn,Mi===b&&b!==null&&(Mi=b=b.return);continue}break}while(!0)}function h2(){var f=wv.current;return wv.current=ap,f===null?ap:f}function cS(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),ji===null||(Kf&268435455)===0&&(_v&268435455)===0||Ec(ji,as)}function Av(f,m){var b=cr;cr|=2;var B=h2();(ji!==f||as!==m)&&(pu=null,Xf(f,m));do try{S5();break}catch(H){f2(f,H)}while(!0);if(ou(),cr=b,wv.current=B,Mi!==null)throw Error(t(261));return ji=null,as=0,Ui}function S5(){for(;Mi!==null;)d2(Mi)}function M5(){for(;Mi!==null&&!At();)d2(Mi)}function d2(f){var m=y2(f.alternate,f,No);f.memoizedProps=f.pendingProps,m===null?p2(f):Mi=m,tS.current=null}function p2(f){var m=f;do{var b=m.alternate;if(f=m.return,(m.flags&32768)===0){if(b=m5(b,m,No),b!==null){Mi=b;return}}else{if(b=g5(b,m),b!==null){b.flags&=32767,Mi=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Ui=6,Mi=null;return}}if(m=m.sibling,m!==null){Mi=m;return}Mi=m=f}while(m!==null);Ui===0&&(Ui=5)}function $f(f,m,b){var B=Cn,H=Jo.transition;try{Jo.transition=null,Cn=1,E5(f,m,b,B)}finally{Jo.transition=H,Cn=B}return null}function E5(f,m,b,B){do hp();while(Sc!==null);if((cr&6)!==0)throw Error(t(327));b=f.finishedWork;var H=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var ne=b.lanes|b.childLanes;if(zn(f,ne),f===ji&&(Mi=ji=null,as=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Sv||(Sv=!0,v2(qt,function(){return hp(),null})),ne=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||ne){ne=Jo.transition,Jo.transition=null;var ce=Cn;Cn=1;var Se=cr;cr|=4,tS.current=null,v5(f,b),i2(b,f),wi(em),eo=!!fc,em=fc=null,f.current=b,w5(b),Ft(),cr=Se,Cn=ce,Jo.transition=ne}else f.current=b;if(Sv&&(Sv=!1,Sc=f,Mv=H),ne=f.pendingLanes,ne===0&&(xc=null),$t(b.stateNode),co(f,bt()),m!==null)for(B=f.onRecoverableError,b=0;b<m.length;b++)H=m[b],B(H.value,{componentStack:H.stack,digest:H.digest});if(xv)throw xv=!1,f=iS,iS=null,f;return(Mv&1)!==0&&f.tag!==0&&hp(),ne=f.pendingLanes,(ne&1)!==0?f===sS?Cm++:(Cm=0,sS=f):Cm=0,Xo(),null}function hp(){if(Sc!==null){var f=Js(Mv),m=Jo.transition,b=Cn;try{if(Jo.transition=null,Cn=16>f?16:f,Sc===null)var B=!1;else{if(f=Sc,Sc=null,Mv=0,(cr&6)!==0)throw Error(t(331));var H=cr;for(cr|=4,hn=f.current;hn!==null;){var ne=hn,ce=ne.child;if((hn.flags&16)!==0){var Se=ne.deletions;if(Se!==null){for(var ke=0;ke<Se.length;ke++){var lt=Se[ke];for(hn=lt;hn!==null;){var Ct=hn;switch(Ct.tag){case 0:case 11:case 15:Am(8,Ct,ne)}var Pt=Ct.child;if(Pt!==null)Pt.return=Ct,hn=Pt;else for(;hn!==null;){Ct=hn;var Tt=Ct.sibling,on=Ct.return;if(JR(Ct),Ct===lt){hn=null;break}if(Tt!==null){Tt.return=on,hn=Tt;break}hn=on}}}var pn=ne.alternate;if(pn!==null){var gn=pn.child;if(gn!==null){pn.child=null;do{var fi=gn.sibling;gn.sibling=null,gn=fi}while(gn!==null)}}hn=ne}}if((ne.subtreeFlags&2064)!==0&&ce!==null)ce.return=ne,hn=ce;else e:for(;hn!==null;){if(ne=hn,(ne.flags&2048)!==0)switch(ne.tag){case 0:case 11:case 15:Am(9,ne,ne.return)}var Je=ne.sibling;if(Je!==null){Je.return=ne.return,hn=Je;break e}hn=ne.return}}var ze=f.current;for(hn=ze;hn!==null;){ce=hn;var rt=ce.child;if((ce.subtreeFlags&2064)!==0&&rt!==null)rt.return=ce,hn=rt;else e:for(ce=ze;hn!==null;){if(Se=hn,(Se.flags&2048)!==0)try{switch(Se.tag){case 0:case 11:case 15:vv(9,Se)}}catch(wn){ni(Se,Se.return,wn)}if(Se===ce){hn=null;break e}var Wt=Se.sibling;if(Wt!==null){Wt.return=Se.return,hn=Wt;break e}hn=Se.return}}if(cr=H,Xo(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(En,f)}catch{}B=!0}return B}finally{Cn=b,Jo.transition=m}}return!1}function m2(f,m,b){m=z(b,m),m=We(f,m,1),f=Or(f,m,1),m=Gs(),f!==null&&(cn(f,1,m),co(f,m))}function ni(f,m,b){if(f.tag===3)m2(f,f,b);else for(;m!==null;){if(m.tag===3){m2(m,f,b);break}else if(m.tag===1){var B=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(xc===null||!xc.has(B))){f=z(b,f),f=dt(m,f,1),m=Or(m,f,1),f=Gs(),m!==null&&(cn(m,1,f),co(m,f));break}}m=m.return}}function b5(f,m,b){var B=f.pingCache;B!==null&&B.delete(m),m=Gs(),f.pingedLanes|=f.suspendedLanes&b,ji===f&&(as&b)===b&&(Ui===4||Ui===3&&(as&130023424)===as&&500>bt()-rS?Xf(f,0):nS|=b),co(f,m)}function g2(f,m){m===0&&((f.mode&1)===0?m=1:(m=ir,ir<<=1,(ir&130023424)===0&&(ir=4194304)));var b=Gs();f=To(f,m),f!==null&&(cn(f,m,b),co(f,b))}function A5(f){var m=f.memoizedState,b=0;m!==null&&(b=m.retryLane),g2(f,b)}function T5(f,m){var b=0;switch(f.tag){case 13:var B=f.stateNode,H=f.memoizedState;H!==null&&(b=H.retryLane);break;case 19:B=f.stateNode;break;default:throw Error(t(314))}B!==null&&B.delete(m),g2(f,b)}var y2;y2=function(f,m,b){if(f!==null)if(f.memoizedProps!==m.pendingProps||ns.current)Gn=!0;else{if((f.lanes&b)===0&&(m.flags&128)===0)return Gn=!1,p5(f,m,b);Gn=(f.flags&131072)!==0}else Gn=!1,Pr&&(m.flags&1048576)!==0&&lm(m,Zd,m.index);switch(m.lanes=0,m.tag){case 2:var B=m.type;gv(f,m),f=m.pendingProps;var H=Jl(m,Li.current);ol(m,b),H=Wf(null,m,B,f,H,b);var ne=gm();return m.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Vi(B)?(ne=!0,eu(m)):ne=!1,m.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Hn(m),H.updater=lp,m.stateNode=H,H._reactInternals=m,O(m,B,f,b),m=Vn(null,m,B,!0,ne,b)):(m.tag=0,Pr&&ne&&um(m),rn(null,m,H,b),m=m.child),m;case 16:B=m.elementType;e:{switch(gv(f,m),f=m.pendingProps,H=B._init,B=H(B._payload),m.type=B,H=m.tag=C5(B),f=lo(B,f),H){case 0:m=Qt(null,m,B,f,b);break e;case 1:m=yn(null,m,B,f,b);break e;case 11:m=Bi(null,m,B,f,b);break e;case 14:m=Hs(null,m,B,lo(B.type,f),b);break e}throw Error(t(306,B,""))}return m;case 0:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:lo(B,H),Qt(f,m,B,H,b);case 1:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:lo(B,H),yn(f,m,B,H,b);case 3:e:{if(Fn(m),f===null)throw Error(t(387));B=m.pendingProps,ne=m.memoizedState,H=ne.element,Xr(f,m),jr(m,B,null,b);var ce=m.memoizedState;if(B=ce.element,ne.isDehydrated)if(ne={element:B,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},m.updateQueue.baseState=ne,m.memoizedState=ne,m.flags&256){H=z(Error(t(423)),m),m=sr(f,m,B,b,H);break e}else if(B!==H){H=z(Error(t(424)),m),m=sr(f,m,B,b,H);break e}else for(is=ya(m.stateNode.containerInfo.firstChild),ki=m,Pr=!0,ao=null,b=Of(m,null,B,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(sl(),B===H){m=du(f,m,b);break e}rn(f,m,B,b)}m=m.child}return m;case 5:return uu(m),f===null&&Jd(m),B=m.type,H=m.pendingProps,ne=f!==null?f.memoizedProps:null,ce=H.children,tm(B,H)?ce=null:ne!==null&&tm(B,ne)&&(m.flags|=32),ft(f,m),rn(f,m,ce,b),m.child;case 6:return f===null&&Jd(m),null;case 13:return Ca(f,m,b);case 4:return Ff(m,m.stateNode.containerInfo),B=m.pendingProps,f===null?m.child=ru(m,null,B,b):rn(f,m,B,b),m.child;case 11:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:lo(B,H),Bi(f,m,B,H,b);case 7:return rn(f,m,m.pendingProps,b),m.child;case 8:return rn(f,m,m.pendingProps.children,b),m.child;case 12:return rn(f,m,m.pendingProps.children,b),m.child;case 10:e:{if(B=m.type._context,H=m.pendingProps,ne=m.memoizedProps,ce=H.value,Sr(iu,B._currentValue),B._currentValue=ce,ne!==null)if(Ds(ne.value,ce)){if(ne.children===H.children&&!ns.current){m=du(f,m,b);break e}}else for(ne=m.child,ne!==null&&(ne.return=m);ne!==null;){var Se=ne.dependencies;if(Se!==null){ce=ne.child;for(var ke=Se.firstContext;ke!==null;){if(ke.context===B){if(ne.tag===1){ke=_r(-1,b&-b),ke.tag=2;var lt=ne.updateQueue;if(lt!==null){lt=lt.shared;var Ct=lt.pending;Ct===null?ke.next=ke:(ke.next=Ct.next,Ct.next=ke),lt.pending=ke}}ne.lanes|=b,ke=ne.alternate,ke!==null&&(ke.lanes|=b),Bf(ne.return,b,m),Se.lanes|=b;break}ke=ke.next}}else if(ne.tag===10)ce=ne.type===m.type?null:ne.child;else if(ne.tag===18){if(ce=ne.return,ce===null)throw Error(t(341));ce.lanes|=b,Se=ce.alternate,Se!==null&&(Se.lanes|=b),Bf(ce,b,m),ce=ne.sibling}else ce=ne.child;if(ce!==null)ce.return=ne;else for(ce=ne;ce!==null;){if(ce===m){ce=null;break}if(ne=ce.sibling,ne!==null){ne.return=ce.return,ce=ne;break}ce=ce.return}ne=ce}rn(f,m,H.children,b),m=m.child}return m;case 9:return H=m.type,B=m.pendingProps.children,ol(m,b),H=Fs(H),B=B(H),m.flags|=1,rn(f,m,B,b),m.child;case 14:return B=m.type,H=lo(B,m.pendingProps),H=lo(B.type,H),Hs(f,m,B,H,b);case 15:return st(f,m,m.type,m.pendingProps,b);case 17:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:lo(B,H),gv(f,m),m.tag=1,Vi(B)?(f=!0,eu(m)):f=!1,ol(m,b),g(m,B,H),O(m,B,H,b),Vn(null,m,B,!0,f,b);case 19:return YR(f,m,b);case 22:return Ke(f,m,b)}throw Error(t(156,m.tag))};function v2(f,m){return Qe(f,m)}function R5(f,m,b,B){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(f,m,b,B){return new R5(f,m,b,B)}function fS(f){return f=f.prototype,!(!f||!f.isReactComponent)}function C5(f){if(typeof f=="function")return fS(f)?1:0;if(f!=null){if(f=f.$$typeof,f===K)return 11;if(f===p)return 14}return 2}function bc(f,m){var b=f.alternate;return b===null?(b=ea(f.tag,m,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=m,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,m=f.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function Tv(f,m,b,B,H,ne){var ce=2;if(B=f,typeof f=="function")fS(f)&&(ce=1);else if(typeof f=="string")ce=5;else e:switch(f){case Y:return Zf(b.children,H,ne,m);case ee:ce=8,H|=8;break;case te:return f=ea(12,b,m,H|2),f.elementType=te,f.lanes=ne,f;case E:return f=ea(13,b,m,H),f.elementType=E,f.lanes=ne,f;case a:return f=ea(19,b,m,H),f.elementType=a,f.lanes=ne,f;case R:return Rv(b,H,ne,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case U:ce=10;break e;case V:ce=9;break e;case K:ce=11;break e;case p:ce=14;break e;case M:ce=16,B=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return m=ea(ce,b,m,H),m.elementType=f,m.type=B,m.lanes=ne,m}function Zf(f,m,b,B){return f=ea(7,f,B,m),f.lanes=b,f}function Rv(f,m,b,B){return f=ea(22,f,B,m),f.elementType=R,f.lanes=b,f.stateNode={isHidden:!1},f}function hS(f,m,b){return f=ea(6,f,null,m),f.lanes=b,f}function dS(f,m,b){return m=ea(4,f.children!==null?f.children:[],f.key,m),m.lanes=b,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function I5(f,m,b,B,H){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.identifierPrefix=B,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function pS(f,m,b,B,H,ne,ce,Se,ke){return f=new I5(f,m,b,Se,ke),m===1?(m=1,ne===!0&&(m|=8)):m=0,ne=ea(3,null,null,m),f.current=ne,ne.stateNode=f,ne.memoizedState={element:B,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hn(ne),f}function N5(f,m,b){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:B==null?null:""+B,children:f,containerInfo:m,implementation:b}}function w2(f){if(!f)return wa;f=f._reactInternals;e:{if(Nr(f)!==f||f.tag!==1)throw Error(t(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Vi(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(f.tag===1){var b=f.type;if(Vi(b))return If(f,b,m)}return m}function _2(f,m,b,B,H,ne,ce,Se,ke){return f=pS(b,B,!0,f,H,ne,ce,Se,ke),f.context=w2(null),b=f.current,B=Gs(),H=Mc(b),ne=_r(B,H),ne.callback=m??null,Or(b,ne,H),f.current.lanes=H,cn(f,H,B),co(f,B),f}function Cv(f,m,b,B){var H=m.current,ne=Gs(),ce=Mc(H);return b=w2(b),m.context===null?m.context=b:m.pendingContext=b,m=_r(ne,ce),m.payload={element:f},B=B===void 0?null:B,B!==null&&(m.callback=B),f=Or(H,m,ce),f!==null&&(Pa(f,H,ce,ne),Hi(f,H,ce)),ce}function Iv(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function x2(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<m?b:m}}function mS(f,m){x2(f,m),(f=f.alternate)&&x2(f,m)}function P5(){return null}var S2=typeof reportError=="function"?reportError:function(f){console.error(f)};function gS(f){this._internalRoot=f}Nv.prototype.render=gS.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(t(409));Cv(f,m,null,null)},Nv.prototype.unmount=gS.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;Yf(function(){Cv(null,f,null,null)}),m[Us]=null}};function Nv(f){this._internalRoot=f}Nv.prototype.unstable_scheduleHydration=function(f){if(f){var m=gd();f={blockedOn:null,target:f,priority:m};for(var b=0;b<Za.length&&m!==0&&m<Za[b].priority;b++);Za.splice(b,0,f),b===0&&wd(f)}};function yS(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function Pv(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function M2(){}function L5(f,m,b,B,H){if(H){if(typeof B=="function"){var ne=B;B=function(){var lt=Iv(ce);ne.call(lt)}}var ce=_2(m,B,f,0,null,!1,!1,"",M2);return f._reactRootContainer=ce,f[Us]=ce.current,uc(f.nodeType===8?f.parentNode:f),Yf(),ce}for(;H=f.lastChild;)f.removeChild(H);if(typeof B=="function"){var Se=B;B=function(){var lt=Iv(ke);Se.call(lt)}}var ke=pS(f,0,!1,null,null,!1,!1,"",M2);return f._reactRootContainer=ke,f[Us]=ke.current,uc(f.nodeType===8?f.parentNode:f),Yf(function(){Cv(m,ke,b,B)}),ke}function Lv(f,m,b,B,H){var ne=b._reactRootContainer;if(ne){var ce=ne;if(typeof H=="function"){var Se=H;H=function(){var ke=Iv(ce);Se.call(ke)}}Cv(m,ce,f,H)}else ce=L5(b,m,f,H,B);return Iv(ce)}Dl=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var b=Kt(m.pendingLanes);b!==0&&(Wn(m,b|1),co(m,bt()),(cr&6)===0&&(fp=bt()+500,Xo()))}break;case 13:Yf(function(){var B=To(f,1);if(B!==null){var H=Gs();Pa(B,f,1,H)}}),mS(f,1)}},df=function(f){if(f.tag===13){var m=To(f,134217728);if(m!==null){var b=Gs();Pa(m,f,134217728,b)}mS(f,134217728)}},Hy=function(f){if(f.tag===13){var m=Mc(f),b=To(f,m);if(b!==null){var B=Gs();Pa(b,f,m,B)}mS(f,m)}},gd=function(){return Cn},yd=function(f,m){var b=Cn;try{return Cn=f,m()}finally{Cn=b}},Ue=function(f,m,b){switch(m){case"input":if(He(f,b),m=b.name,b.type==="radio"&&m!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<b.length;m++){var B=b[m];if(B!==f&&B.form===f.form){var H=Yd(B);if(!H)throw Error(t(90));Pe(B),He(B,H)}}}break;case"textarea":Le(f,b);break;case"select":m=b.value,m!=null&&oe(f,!!b.multiple,m,!1)}},Sn=lS,ht=Yf;var k5={usingClientEntryPoint:!1,Events:[va,Yr,Yd,ct,gt,lS]},Im={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O5={bundleType:Im.bundleType,version:Im.version,rendererPackageName:Im.rendererPackageName,rendererConfig:Im.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=De(f),f===null?null:f.stateNode},findFiberByHostInstance:Im.findFiberByHostInstance||P5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kv.isDisabled&&kv.supportsFiber)try{En=kv.inject(O5),un=kv}catch{}}return fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k5,fo.createPortal=function(f,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yS(m))throw Error(t(200));return N5(f,m,null,b)},fo.createRoot=function(f,m){if(!yS(f))throw Error(t(299));var b=!1,B="",H=S2;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(B=m.identifierPrefix),m.onRecoverableError!==void 0&&(H=m.onRecoverableError)),m=pS(f,1,!1,null,null,b,!1,B,H),f[Us]=m.current,uc(f.nodeType===8?f.parentNode:f),new gS(m)},fo.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=De(m),f=f===null?null:f.stateNode,f},fo.flushSync=function(f){return Yf(f)},fo.hydrate=function(f,m,b){if(!Pv(m))throw Error(t(200));return Lv(null,f,m,!0,b)},fo.hydrateRoot=function(f,m,b){if(!yS(f))throw Error(t(405));var B=b!=null&&b.hydratedSources||null,H=!1,ne="",ce=S2;if(b!=null&&(b.unstable_strictMode===!0&&(H=!0),b.identifierPrefix!==void 0&&(ne=b.identifierPrefix),b.onRecoverableError!==void 0&&(ce=b.onRecoverableError)),m=_2(m,null,f,1,b??null,H,!1,ne,ce),f[Us]=m.current,uc(f),B)for(f=0;f<B.length;f++)b=B[f],H=b._getVersion,H=H(b._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[b,H]:m.mutableSourceEagerHydrationData.push(b,H);return new Nv(m)},fo.render=function(f,m,b){if(!Pv(m))throw Error(t(200));return Lv(null,f,m,!1,b)},fo.unmountComponentAtNode=function(f){if(!Pv(f))throw Error(t(40));return f._reactRootContainer?(Yf(function(){Lv(null,null,f,!1,function(){f._reactRootContainer=null,f[Us]=null})}),!0):!1},fo.unstable_batchedUpdates=lS,fo.unstable_renderSubtreeIntoContainer=function(f,m,b,B){if(!Pv(b))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return Lv(f,m,b,!1,B)},fo.version="18.3.1-next-f1338f8080-20240426",fo}var N2;function rk(){if(N2)return _S.exports;N2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_S.exports=G5(),_S.exports}var P2;function j5(){if(P2)return Ov;P2=1;var r=rk();return Ov.createRoot=r.createRoot,Ov.hydrateRoot=r.hydrateRoot,Ov}var q5=j5();const K5=Ya(q5);var CA={},O1={};O1.byteLength=$5;O1.toByteArray=Q5;O1.fromByteArray=tz;var yl=[],sa=[],Y5=typeof Uint8Array<"u"?Uint8Array:Array,MS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var dp=0,X5=MS.length;dp<X5;++dp)yl[dp]=MS[dp],sa[MS.charCodeAt(dp)]=dp;sa[45]=62;sa[95]=63;function ik(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function $5(r){var e=ik(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Z5(r,e,t){return(e+t)*3/4-t}function Q5(r){var e,t=ik(r),n=t[0],i=t[1],s=new Y5(Z5(r,n,i)),o=0,l=i>0?n-4:n,c;for(c=0;c<l;c+=4)e=sa[r.charCodeAt(c)]<<18|sa[r.charCodeAt(c+1)]<<12|sa[r.charCodeAt(c+2)]<<6|sa[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=sa[r.charCodeAt(c)]<<2|sa[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=sa[r.charCodeAt(c)]<<10|sa[r.charCodeAt(c+1)]<<4|sa[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function J5(r){return yl[r>>18&63]+yl[r>>12&63]+yl[r>>6&63]+yl[r&63]}function ez(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(J5(n));return i.join("")}function tz(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,l=t-n;o<l;o+=s)i.push(ez(r,o,o+s>l?l:o+s));return n===1?(e=r[t-1],i.push(yl[e>>2]+yl[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(yl[e>>10]+yl[e>>4&63]+yl[e<<2&63]+"=")),i.join("")}var IA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */IA.read=function(r,e,t,n,i){var s,o,l=i*8-n-1,c=(1<<l)-1,d=c>>1,h=-7,w=t?i-1:0,_=t?-1:1,x=r[e+w];for(w+=_,s=x&(1<<-h)-1,x>>=-h,h+=l;h>0;s=s*256+r[e+w],w+=_,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=o*256+r[e+w],w+=_,h-=8);if(s===0)s=1-d;else{if(s===c)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-d}return(x?-1:1)*o*Math.pow(2,s-n)};IA.write=function(r,e,t,n,i,s){var o,l,c,d=s*8-i-1,h=(1<<d)-1,w=h>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:s-1,A=n?1:-1,L=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+w>=1?e+=_/c:e+=_*Math.pow(2,1-w),e*c>=2&&(o++,c/=2),o+w>=h?(l=0,o=h):o+w>=1?(l=(e*c-1)*Math.pow(2,i),o=o+w):(l=e*Math.pow(2,w-1)*Math.pow(2,i),o=0));i>=8;r[t+x]=l&255,x+=A,l/=256,i-=8);for(o=o<<i|l,d+=i;d>0;r[t+x]=o&255,x+=A,o/=256,d-=8);r[t+x-A]|=L*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=O1,t=IA,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=Q,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:l}=globalThis;h.TYPED_ARRAY_SUPPORT=c(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const re=new s(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,s.prototype),Object.setPrototypeOf(re,j),re.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function d(re){if(re>i)throw new RangeError('The value "'+re+'" is invalid for option "size"');const j=new s(re);return Object.setPrototypeOf(j,h.prototype),j}function h(re,j,q){if(typeof re=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(re)}return w(re,j,q)}h.poolSize=8192;function w(re,j,q){if(typeof re=="string")return L(re,j);if(o.isView(re))return C(re);if(re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(ot(re,o)||re&&ot(re.buffer,o)||typeof l<"u"&&(ot(re,l)||re&&ot(re.buffer,l)))return D(re,j,q);if(typeof re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=re.valueOf&&re.valueOf();if(ue!=null&&ue!==re)return h.from(ue,j,q);const ve=k(re);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof re[Symbol.toPrimitive]=="function")return h.from(re[Symbol.toPrimitive]("string"),j,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}h.from=function(re,j,q){return w(re,j,q)},Object.setPrototypeOf(h.prototype,s.prototype),Object.setPrototypeOf(h,s);function _(re){if(typeof re!="number")throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function x(re,j,q){return _(re),re<=0?d(re):j!==void 0?typeof q=="string"?d(re).fill(j,q):d(re).fill(j):d(re)}h.alloc=function(re,j,q){return x(re,j,q)};function A(re){return _(re),d(re<0?0:F(re)|0)}h.allocUnsafe=function(re){return A(re)},h.allocUnsafeSlow=function(re){return A(re)};function L(re,j){if((typeof j!="string"||j==="")&&(j="utf8"),!h.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const q=G(re,j)|0;let ue=d(q);const ve=ue.write(re,j);return ve!==q&&(ue=ue.slice(0,ve)),ue}function N(re){const j=re.length<0?0:F(re.length)|0,q=d(j);for(let ue=0;ue<j;ue+=1)q[ue]=re[ue]&255;return q}function C(re){if(ot(re,s)){const j=new s(re);return D(j.buffer,j.byteOffset,j.byteLength)}return N(re)}function D(re,j,q){if(j<0||re.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<j+(q||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return j===void 0&&q===void 0?ue=new s(re):q===void 0?ue=new s(re,j):ue=new s(re,j,q),Object.setPrototypeOf(ue,h.prototype),ue}function k(re){if(h.isBuffer(re)){const j=F(re.length)|0,q=d(j);return q.length===0||re.copy(q,0,0,j),q}if(re.length!==void 0)return typeof re.length!="number"||et(re.length)?d(0):N(re);if(re.type==="Buffer"&&Array.isArray(re.data))return N(re.data)}function F(re){if(re>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return re|0}function Q(re){return+re!=re&&(re=0),h.alloc(+re)}h.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==h.prototype},h.compare=function(j,q){if(ot(j,s)&&(j=h.from(j,j.offset,j.byteLength)),ot(q,s)&&(q=h.from(q,q.offset,q.byteLength)),!h.isBuffer(j)||!h.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===q)return 0;let ue=j.length,ve=q.length;for(let ye=0,le=Math.min(ue,ve);ye<le;++ye)if(j[ye]!==q[ye]){ue=j[ye],ve=q[ye];break}return ue<ve?-1:ve<ue?1:0},h.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(j,q){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return h.alloc(0);let ue;if(q===void 0)for(q=0,ue=0;ue<j.length;++ue)q+=j[ue].length;const ve=h.allocUnsafe(q);let ye=0;for(ue=0;ue<j.length;++ue){let le=j[ue];if(ot(le,s))ye+le.length>ve.length?(h.isBuffer(le)||(le=h.from(le)),le.copy(ve,ye)):s.prototype.set.call(ve,le,ye);else if(h.isBuffer(le))le.copy(ve,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=le.length}return ve};function G(re,j){if(h.isBuffer(re))return re.length;if(o.isView(re)||ot(re,o))return re.byteLength;if(typeof re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);const q=re.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&q===0)return 0;let ve=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return fe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return Te(re).length;default:if(ve)return ue?-1:fe(re).length;j=(""+j).toLowerCase(),ve=!0}}h.byteLength=G;function Y(re,j,q){let ue=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,j>>>=0,q<=j))return"";for(re||(re="utf8");;)switch(re){case"hex":return u(this,j,q);case"utf8":case"utf-8":return R(this,j,q);case"ascii":return I(this,j,q);case"latin1":case"binary":return y(this,j,q);case"base64":return M(this,j,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,j,q);default:if(ue)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ue=!0}}h.prototype._isBuffer=!0;function ee(re,j,q){const ue=re[j];re[j]=re[q],re[q]=ue}h.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<j;q+=2)ee(this,q,q+1);return this},h.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<j;q+=4)ee(this,q,q+3),ee(this,q+1,q+2);return this},h.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<j;q+=8)ee(this,q,q+7),ee(this,q+1,q+6),ee(this,q+2,q+5),ee(this,q+3,q+4);return this},h.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?R(this,0,j):Y.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(j){if(!h.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:h.compare(this,j)===0},h.prototype.inspect=function(){let j="";const q=r.INSPECT_MAX_BYTES;return j=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(j+=" ... "),"<Buffer "+j+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(j,q,ue,ve,ye){if(ot(j,s)&&(j=h.from(j,j.offset,j.byteLength)),!h.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(q===void 0&&(q=0),ue===void 0&&(ue=j?j.length:0),ve===void 0&&(ve=0),ye===void 0&&(ye=this.length),q<0||ue>j.length||ve<0||ye>this.length)throw new RangeError("out of range index");if(ve>=ye&&q>=ue)return 0;if(ve>=ye)return-1;if(q>=ue)return 1;if(q>>>=0,ue>>>=0,ve>>>=0,ye>>>=0,this===j)return 0;let le=ye-ve,Xe=ue-q;const de=Math.min(le,Xe),Re=this.slice(ve,ye),Ue=j.slice(q,ue);for(let Me=0;Me<de;++Me)if(Re[Me]!==Ue[Me]){le=Re[Me],Xe=Ue[Me];break}return le<Xe?-1:Xe<le?1:0};function te(re,j,q,ue,ve){if(re.length===0)return-1;if(typeof q=="string"?(ue=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,et(q)&&(q=ve?0:re.length-1),q<0&&(q=re.length+q),q>=re.length){if(ve)return-1;q=re.length-1}else if(q<0)if(ve)q=0;else return-1;if(typeof j=="string"&&(j=h.from(j,ue)),h.isBuffer(j))return j.length===0?-1:U(re,j,q,ue,ve);if(typeof j=="number")return j=j&255,typeof s.prototype.indexOf=="function"?ve?s.prototype.indexOf.call(re,j,q):s.prototype.lastIndexOf.call(re,j,q):U(re,[j],q,ue,ve);throw new TypeError("val must be string, number or Buffer")}function U(re,j,q,ue,ve){let ye=1,le=re.length,Xe=j.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(re.length<2||j.length<2)return-1;ye=2,le/=2,Xe/=2,q/=2}function de(Ue,Me){return ye===1?Ue[Me]:Ue.readUInt16BE(Me*ye)}let Re;if(ve){let Ue=-1;for(Re=q;Re<le;Re++)if(de(re,Re)===de(j,Ue===-1?0:Re-Ue)){if(Ue===-1&&(Ue=Re),Re-Ue+1===Xe)return Ue*ye}else Ue!==-1&&(Re-=Re-Ue),Ue=-1}else for(q+Xe>le&&(q=le-Xe),Re=q;Re>=0;Re--){let Ue=!0;for(let Me=0;Me<Xe;Me++)if(de(re,Re+Me)!==de(j,Me)){Ue=!1;break}if(Ue)return Re}return-1}h.prototype.includes=function(j,q,ue){return this.indexOf(j,q,ue)!==-1},h.prototype.indexOf=function(j,q,ue){return te(this,j,q,ue,!0)},h.prototype.lastIndexOf=function(j,q,ue){return te(this,j,q,ue,!1)};function V(re,j,q,ue){q=Number(q)||0;const ve=re.length-q;ue?(ue=Number(ue),ue>ve&&(ue=ve)):ue=ve;const ye=j.length;ue>ye/2&&(ue=ye/2);let le;for(le=0;le<ue;++le){const Xe=parseInt(j.substr(le*2,2),16);if(et(Xe))return le;re[q+le]=Xe}return le}function K(re,j,q,ue){return Le(fe(j,re.length-q),re,q,ue)}function E(re,j,q,ue){return Le(oe(j),re,q,ue)}function a(re,j,q,ue){return Le(Te(j),re,q,ue)}function p(re,j,q,ue){return Le(Oe(j,re.length-q),re,q,ue)}h.prototype.write=function(j,q,ue,ve){if(q===void 0)ve="utf8",ue=this.length,q=0;else if(ue===void 0&&typeof q=="string")ve=q,ue=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(ue)?(ue=ue>>>0,ve===void 0&&(ve="utf8")):(ve=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-q;if((ue===void 0||ue>ye)&&(ue=ye),j.length>0&&(ue<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");ve||(ve="utf8");let le=!1;for(;;)switch(ve){case"hex":return V(this,j,q,ue);case"utf8":case"utf-8":return K(this,j,q,ue);case"ascii":case"latin1":case"binary":return E(this,j,q,ue);case"base64":return a(this,j,q,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,j,q,ue);default:if(le)throw new TypeError("Unknown encoding: "+ve);ve=(""+ve).toLowerCase(),le=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(re,j,q){return j===0&&q===re.length?e.fromByteArray(re):e.fromByteArray(re.slice(j,q))}function R(re,j,q){q=Math.min(re.length,q);const ue=[];let ve=j;for(;ve<q;){const ye=re[ve];let le=null,Xe=ye>239?4:ye>223?3:ye>191?2:1;if(ve+Xe<=q){let de,Re,Ue,Me;switch(Xe){case 1:ye<128&&(le=ye);break;case 2:de=re[ve+1],(de&192)===128&&(Me=(ye&31)<<6|de&63,Me>127&&(le=Me));break;case 3:de=re[ve+1],Re=re[ve+2],(de&192)===128&&(Re&192)===128&&(Me=(ye&15)<<12|(de&63)<<6|Re&63,Me>2047&&(Me<55296||Me>57343)&&(le=Me));break;case 4:de=re[ve+1],Re=re[ve+2],Ue=re[ve+3],(de&192)===128&&(Re&192)===128&&(Ue&192)===128&&(Me=(ye&15)<<18|(de&63)<<12|(Re&63)<<6|Ue&63,Me>65535&&Me<1114112&&(le=Me))}}le===null?(le=65533,Xe=1):le>65535&&(le-=65536,ue.push(le>>>10&1023|55296),le=56320|le&1023),ue.push(le),ve+=Xe}return P(ue)}const T=4096;function P(re){const j=re.length;if(j<=T)return String.fromCharCode.apply(String,re);let q="",ue=0;for(;ue<j;)q+=String.fromCharCode.apply(String,re.slice(ue,ue+=T));return q}function I(re,j,q){let ue="";q=Math.min(re.length,q);for(let ve=j;ve<q;++ve)ue+=String.fromCharCode(re[ve]&127);return ue}function y(re,j,q){let ue="";q=Math.min(re.length,q);for(let ve=j;ve<q;++ve)ue+=String.fromCharCode(re[ve]);return ue}function u(re,j,q){const ue=re.length;(!j||j<0)&&(j=0),(!q||q<0||q>ue)&&(q=ue);let ve="";for(let ye=j;ye<q;++ye)ve+=Ye[re[ye]];return ve}function S(re,j,q){const ue=re.slice(j,q);let ve="";for(let ye=0;ye<ue.length-1;ye+=2)ve+=String.fromCharCode(ue[ye]+ue[ye+1]*256);return ve}h.prototype.slice=function(j,q){const ue=this.length;j=~~j,q=q===void 0?ue:~~q,j<0?(j+=ue,j<0&&(j=0)):j>ue&&(j=ue),q<0?(q+=ue,q<0&&(q=0)):q>ue&&(q=ue),q<j&&(q=j);const ve=this.subarray(j,q);return Object.setPrototypeOf(ve,h.prototype),ve};function W(re,j,q){if(re%1!==0||re<0)throw new RangeError("offset is not uint");if(re+j>q)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let ve=this[j],ye=1,le=0;for(;++le<q&&(ye*=256);)ve+=this[j+le]*ye;return ve},h.prototype.readUintBE=h.prototype.readUIntBE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let ve=this[j+--q],ye=1;for(;q>0&&(ye*=256);)ve+=this[j+--q]*ye;return ve},h.prototype.readUint8=h.prototype.readUInt8=function(j,q){return j=j>>>0,q||W(j,1,this.length),this[j]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(j,q){return j=j>>>0,q||W(j,2,this.length),this[j]|this[j+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(j,q){return j=j>>>0,q||W(j,2,this.length),this[j]<<8|this[j+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(j,q){return j=j>>>0,q||W(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(j,q){return j=j>>>0,q||W(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},h.prototype.readBigUInt64LE=Et(function(j){j=j>>>0,yt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const ve=q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,ye=this[++j]+this[++j]*2**8+this[++j]*2**16+ue*2**24;return BigInt(ve)+(BigInt(ye)<<BigInt(32))}),h.prototype.readBigUInt64BE=Et(function(j){j=j>>>0,yt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const ve=q*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],ye=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+ue;return(BigInt(ve)<<BigInt(32))+BigInt(ye)}),h.prototype.readIntLE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let ve=this[j],ye=1,le=0;for(;++le<q&&(ye*=256);)ve+=this[j+le]*ye;return ye*=128,ve>=ye&&(ve-=Math.pow(2,8*q)),ve},h.prototype.readIntBE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let ve=q,ye=1,le=this[j+--ve];for(;ve>0&&(ye*=256);)le+=this[j+--ve]*ye;return ye*=128,le>=ye&&(le-=Math.pow(2,8*q)),le},h.prototype.readInt8=function(j,q){return j=j>>>0,q||W(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},h.prototype.readInt16LE=function(j,q){j=j>>>0,q||W(j,2,this.length);const ue=this[j]|this[j+1]<<8;return ue&32768?ue|4294901760:ue},h.prototype.readInt16BE=function(j,q){j=j>>>0,q||W(j,2,this.length);const ue=this[j+1]|this[j]<<8;return ue&32768?ue|4294901760:ue},h.prototype.readInt32LE=function(j,q){return j=j>>>0,q||W(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},h.prototype.readInt32BE=function(j,q){return j=j>>>0,q||W(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},h.prototype.readBigInt64LE=Et(function(j){j=j>>>0,yt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const ve=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(ue<<24);return(BigInt(ve)<<BigInt(32))+BigInt(q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),h.prototype.readBigInt64BE=Et(function(j){j=j>>>0,yt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const ve=(q<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(ve)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+ue)}),h.prototype.readFloatLE=function(j,q){return j=j>>>0,q||W(j,4,this.length),t.read(this,j,!0,23,4)},h.prototype.readFloatBE=function(j,q){return j=j>>>0,q||W(j,4,this.length),t.read(this,j,!1,23,4)},h.prototype.readDoubleLE=function(j,q){return j=j>>>0,q||W(j,8,this.length),t.read(this,j,!0,52,8)},h.prototype.readDoubleBE=function(j,q){return j=j>>>0,q||W(j,8,this.length),t.read(this,j,!1,52,8)};function $(re,j,q,ue,ve,ye){if(!h.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>ve||j<ye)throw new RangeError('"value" argument is out of bounds');if(q+ue>re.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(j,q,ue,ve){if(j=+j,q=q>>>0,ue=ue>>>0,!ve){const Xe=Math.pow(2,8*ue)-1;$(this,j,q,ue,Xe,0)}let ye=1,le=0;for(this[q]=j&255;++le<ue&&(ye*=256);)this[q+le]=j/ye&255;return q+ue},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(j,q,ue,ve){if(j=+j,q=q>>>0,ue=ue>>>0,!ve){const Xe=Math.pow(2,8*ue)-1;$(this,j,q,ue,Xe,0)}let ye=ue-1,le=1;for(this[q+ye]=j&255;--ye>=0&&(le*=256);)this[q+ye]=j/le&255;return q+ue},h.prototype.writeUint8=h.prototype.writeUInt8=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,1,255,0),this[q]=j&255,q+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,65535,0),this[q]=j&255,this[q+1]=j>>>8,q+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,65535,0),this[q]=j>>>8,this[q+1]=j&255,q+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,4294967295,0),this[q+3]=j>>>24,this[q+2]=j>>>16,this[q+1]=j>>>8,this[q]=j&255,q+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,4294967295,0),this[q]=j>>>24,this[q+1]=j>>>16,this[q+2]=j>>>8,this[q+3]=j&255,q+4};function se(re,j,q,ue,ve){je(j,ue,ve,re,q,7);let ye=Number(j&BigInt(4294967295));re[q++]=ye,ye=ye>>8,re[q++]=ye,ye=ye>>8,re[q++]=ye,ye=ye>>8,re[q++]=ye;let le=Number(j>>BigInt(32)&BigInt(4294967295));return re[q++]=le,le=le>>8,re[q++]=le,le=le>>8,re[q++]=le,le=le>>8,re[q++]=le,q}function me(re,j,q,ue,ve){je(j,ue,ve,re,q,7);let ye=Number(j&BigInt(4294967295));re[q+7]=ye,ye=ye>>8,re[q+6]=ye,ye=ye>>8,re[q+5]=ye,ye=ye>>8,re[q+4]=ye;let le=Number(j>>BigInt(32)&BigInt(4294967295));return re[q+3]=le,le=le>>8,re[q+2]=le,le=le>>8,re[q+1]=le,le=le>>8,re[q]=le,q+8}h.prototype.writeBigUInt64LE=Et(function(j,q=0){return se(this,j,q,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Et(function(j,q=0){return me(this,j,q,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(j,q,ue,ve){if(j=+j,q=q>>>0,!ve){const de=Math.pow(2,8*ue-1);$(this,j,q,ue,de-1,-de)}let ye=0,le=1,Xe=0;for(this[q]=j&255;++ye<ue&&(le*=256);)j<0&&Xe===0&&this[q+ye-1]!==0&&(Xe=1),this[q+ye]=(j/le>>0)-Xe&255;return q+ue},h.prototype.writeIntBE=function(j,q,ue,ve){if(j=+j,q=q>>>0,!ve){const de=Math.pow(2,8*ue-1);$(this,j,q,ue,de-1,-de)}let ye=ue-1,le=1,Xe=0;for(this[q+ye]=j&255;--ye>=0&&(le*=256);)j<0&&Xe===0&&this[q+ye+1]!==0&&(Xe=1),this[q+ye]=(j/le>>0)-Xe&255;return q+ue},h.prototype.writeInt8=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,1,127,-128),j<0&&(j=255+j+1),this[q]=j&255,q+1},h.prototype.writeInt16LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,32767,-32768),this[q]=j&255,this[q+1]=j>>>8,q+2},h.prototype.writeInt16BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,32767,-32768),this[q]=j>>>8,this[q+1]=j&255,q+2},h.prototype.writeInt32LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,2147483647,-2147483648),this[q]=j&255,this[q+1]=j>>>8,this[q+2]=j>>>16,this[q+3]=j>>>24,q+4},h.prototype.writeInt32BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[q]=j>>>24,this[q+1]=j>>>16,this[q+2]=j>>>8,this[q+3]=j&255,q+4},h.prototype.writeBigInt64LE=Et(function(j,q=0){return se(this,j,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Et(function(j,q=0){return me(this,j,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _e(re,j,q,ue,ve,ye){if(q+ue>re.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function be(re,j,q,ue,ve){return j=+j,q=q>>>0,ve||_e(re,j,q,4),t.write(re,j,q,ue,23,4),q+4}h.prototype.writeFloatLE=function(j,q,ue){return be(this,j,q,!0,ue)},h.prototype.writeFloatBE=function(j,q,ue){return be(this,j,q,!1,ue)};function wt(re,j,q,ue,ve){return j=+j,q=q>>>0,ve||_e(re,j,q,8),t.write(re,j,q,ue,52,8),q+8}h.prototype.writeDoubleLE=function(j,q,ue){return wt(this,j,q,!0,ue)},h.prototype.writeDoubleBE=function(j,q,ue){return wt(this,j,q,!1,ue)},h.prototype.copy=function(j,q,ue,ve){if(!h.isBuffer(j))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!ve&&ve!==0&&(ve=this.length),q>=j.length&&(q=j.length),q||(q=0),ve>0&&ve<ue&&(ve=ue),ve===ue||j.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(ve<0)throw new RangeError("sourceEnd out of bounds");ve>this.length&&(ve=this.length),j.length-q<ve-ue&&(ve=j.length-q+ue);const ye=ve-ue;return this===j&&typeof s.prototype.copyWithin=="function"?this.copyWithin(q,ue,ve):s.prototype.set.call(j,this.subarray(ue,ve),q),ye},h.prototype.fill=function(j,q,ue,ve){if(typeof j=="string"){if(typeof q=="string"?(ve=q,q=0,ue=this.length):typeof ue=="string"&&(ve=ue,ue=this.length),ve!==void 0&&typeof ve!="string")throw new TypeError("encoding must be a string");if(typeof ve=="string"&&!h.isEncoding(ve))throw new TypeError("Unknown encoding: "+ve);if(j.length===1){const le=j.charCodeAt(0);(ve==="utf8"&&le<128||ve==="latin1")&&(j=le)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(q<0||this.length<q||this.length<ue)throw new RangeError("Out of range index");if(ue<=q)return this;q=q>>>0,ue=ue===void 0?this.length:ue>>>0,j||(j=0);let ye;if(typeof j=="number")for(ye=q;ye<ue;++ye)this[ye]=j;else{const le=h.isBuffer(j)?j:h.from(j,ve),Xe=le.length;if(Xe===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(ye=0;ye<ue-q;++ye)this[ye+q]=le[ye%Xe]}return this};const Ze={};function Pe(re,j,q){Ze[re]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${re}]`,this.stack,delete this.name}get code(){return re}set code(ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ve,writable:!0})}toString(){return`${this.name} [${re}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(re){return re?`${re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(re,j){return`The "${re}" argument must be of type number. Received type ${typeof j}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(re,j,q){let ue=`The value of "${re}" is out of range.`,ve=q;return Number.isInteger(q)&&Math.abs(q)>2**32?ve=ge(String(q)):typeof q=="bigint"&&(ve=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(ve=ge(ve)),ve+="n"),ue+=` It must be ${j}. Received ${ve}`,ue},RangeError);function ge(re){let j="",q=re.length;const ue=re[0]==="-"?1:0;for(;q>=ue+4;q-=3)j=`_${re.slice(q-3,q)}${j}`;return`${re.slice(0,q)}${j}`}function Ge(re,j,q){yt(j,"offset"),(re[j]===void 0||re[j+q]===void 0)&&He(j,re.length-(q+1))}function je(re,j,q,ue,ve,ye){if(re>q||re<j){const le=typeof j=="bigint"?"n":"";let Xe;throw j===0||j===BigInt(0)?Xe=`>= 0${le} and < 2${le} ** ${(ye+1)*8}${le}`:Xe=`>= -(2${le} ** ${(ye+1)*8-1}${le}) and < 2 ** ${(ye+1)*8-1}${le}`,new Ze.ERR_OUT_OF_RANGE("value",Xe,re)}Ge(ue,ve,ye)}function yt(re,j){if(typeof re!="number")throw new Ze.ERR_INVALID_ARG_TYPE(j,"number",re)}function He(re,j,q){throw Math.floor(re)!==re?(yt(re,q),new Ze.ERR_OUT_OF_RANGE("offset","an integer",re)):j<0?new Ze.ERR_BUFFER_OUT_OF_BOUNDS:new Ze.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,re)}const nt=/[^+/0-9A-Za-z-_]/g;function Nt(re){if(re=re.split("=")[0],re=re.trim().replace(nt,""),re.length<2)return"";for(;re.length%4!==0;)re=re+"=";return re}function fe(re,j){j=j||1/0;let q;const ue=re.length;let ve=null;const ye=[];for(let le=0;le<ue;++le){if(q=re.charCodeAt(le),q>55295&&q<57344){if(!ve){if(q>56319){(j-=3)>-1&&ye.push(239,191,189);continue}else if(le+1===ue){(j-=3)>-1&&ye.push(239,191,189);continue}ve=q;continue}if(q<56320){(j-=3)>-1&&ye.push(239,191,189),ve=q;continue}q=(ve-55296<<10|q-56320)+65536}else ve&&(j-=3)>-1&&ye.push(239,191,189);if(ve=null,q<128){if((j-=1)<0)break;ye.push(q)}else if(q<2048){if((j-=2)<0)break;ye.push(q>>6|192,q&63|128)}else if(q<65536){if((j-=3)<0)break;ye.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((j-=4)<0)break;ye.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return ye}function oe(re){const j=[];for(let q=0;q<re.length;++q)j.push(re.charCodeAt(q)&255);return j}function Oe(re,j){let q,ue,ve;const ye=[];for(let le=0;le<re.length&&!((j-=2)<0);++le)q=re.charCodeAt(le),ue=q>>8,ve=q%256,ye.push(ve),ye.push(ue);return ye}function Te(re){return e.toByteArray(Nt(re))}function Le(re,j,q,ue){let ve;for(ve=0;ve<ue&&!(ve+q>=j.length||ve>=re.length);++ve)j[ve+q]=re[ve];return ve}function ot(re,j){return re instanceof j||re!=null&&re.constructor!=null&&re.constructor.name!=null&&re.constructor.name===j.name}function et(re){return re!==re}const Ye=(function(){const re="0123456789abcdef",j=new Array(256);for(let q=0;q<16;++q){const ue=q*16;for(let ve=0;ve<16;++ve)j[ue+ve]=re[q]+re[ve]}return j})();function Et(re){return typeof BigInt>"u"?ut:re}function ut(){throw new Error("BigInt not supported")}})(CA);const qn=CA.Buffer,mn=CA.Buffer,pp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function my(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Pg(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Vu(r,...e){if(!my(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function sk(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Pg(r.outputLen),Pg(r.blockLen)}function h0(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ok(r,e){Vu(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function nz(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Jc(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function ES(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function cl(r,e){return r<<32-e|r>>>e}const rz=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function iz(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function sz(r){for(let e=0;e<r.length;e++)r[e]=iz(r[e]);return r}const L2=rz?r=>r:sz,ak=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",oz=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Wh(r){if(Vu(r),ak)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=oz[r[t]];return e}const mu={_0:48,_9:57,A:65,F:70,a:97,f:102};function k2(r){if(r>=mu._0&&r<=mu._9)return r-mu._0;if(r>=mu.A&&r<=mu.F)return r-(mu.A-10);if(r>=mu.a&&r<=mu.f)return r-(mu.a-10)}function __(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(ak)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=k2(r.charCodeAt(s)),l=k2(r.charCodeAt(s+1));if(o===void 0||l===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+l}return n}function az(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function D1(r){return typeof r=="string"&&(r=az(r)),Vu(r),r}function vl(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Vu(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}class NA{}function PA(r){const e=n=>r().update(D1(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function LA(r=32){if(pp&&typeof pp.getRandomValues=="function")return pp.getRandomValues(new Uint8Array(r));if(pp&&typeof pp.randomBytes=="function")return Uint8Array.from(pp.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function lz(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),l=Number(t&s),c=n?4:0,d=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+d,l,n)}function uz(r,e,t){return r&e^~r&t}function cz(r,e,t){return r&e^r&t^e&t}class lk extends NA{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=ES(this.buffer)}update(e){h0(this),e=D1(e),Vu(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const c=ES(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){h0(this),ok(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,Jc(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let w=o;w<i;w++)t[w]=0;lz(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=ES(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<d;w++)l.setUint32(4*w,h[w],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=l,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Tc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_s=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Dv=BigInt(2**32-1),O2=BigInt(32);function fz(r,e=!1){return e?{h:Number(r&Dv),l:Number(r>>O2&Dv)}:{h:Number(r>>O2&Dv)|0,l:Number(r&Dv)|0}}function uk(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l}=fz(r[s],e);[n[s],i[s]]=[o,l]}return[n,i]}const D2=(r,e,t)=>r>>>t,B2=(r,e,t)=>r<<32-t|e>>>t,mp=(r,e,t)=>r>>>t|e<<32-t,gp=(r,e,t)=>r<<32-t|e>>>t,Bv=(r,e,t)=>r<<64-t|e>>>t-32,Uv=(r,e,t)=>r>>>t-32|e<<64-t,hz=(r,e,t)=>r<<t|e>>>32-t,dz=(r,e,t)=>e<<t|r>>>32-t,pz=(r,e,t)=>e<<t-32|r>>>64-t,mz=(r,e,t)=>r<<t-32|e>>>64-t;function gu(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const gz=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),yz=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,vz=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),wz=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,_z=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),xz=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,Sz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rc=new Uint32Array(64);class Mz extends lk{constructor(e=32){super(64,e,8,!1),this.A=Tc[0]|0,this.B=Tc[1]|0,this.C=Tc[2]|0,this.D=Tc[3]|0,this.E=Tc[4]|0,this.F=Tc[5]|0,this.G=Tc[6]|0,this.H=Tc[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:l,H:c}=this;return[e,t,n,i,s,o,l,c]}set(e,t,n,i,s,o,l,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,t){for(let w=0;w<16;w++,t+=4)Rc[w]=e.getUint32(t,!1);for(let w=16;w<64;w++){const _=Rc[w-15],x=Rc[w-2],A=cl(_,7)^cl(_,18)^_>>>3,L=cl(x,17)^cl(x,19)^x>>>10;Rc[w]=L+Rc[w-7]+A+Rc[w-16]|0}let{A:n,B:i,C:s,D:o,E:l,F:c,G:d,H:h}=this;for(let w=0;w<64;w++){const _=cl(l,6)^cl(l,11)^cl(l,25),x=h+_+uz(l,c,d)+Sz[w]+Rc[w]|0,L=(cl(n,2)^cl(n,13)^cl(n,22))+cz(n,i,s)|0;h=d,d=c,c=l,l=o+x|0,o=s,s=i,i=n,n=x+L|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(n,i,s,o,l,c,d,h)}roundClean(){Jc(Rc)}destroy(){this.set(0,0,0,0,0,0,0,0),Jc(this.buffer)}}const ck=uk(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Ez=ck[0],bz=ck[1],Cc=new Uint32Array(80),Ic=new Uint32Array(80);class Az extends lk{constructor(e=64){super(128,e,16,!1),this.Ah=_s[0]|0,this.Al=_s[1]|0,this.Bh=_s[2]|0,this.Bl=_s[3]|0,this.Ch=_s[4]|0,this.Cl=_s[5]|0,this.Dh=_s[6]|0,this.Dl=_s[7]|0,this.Eh=_s[8]|0,this.El=_s[9]|0,this.Fh=_s[10]|0,this.Fl=_s[11]|0,this.Gh=_s[12]|0,this.Gl=_s[13]|0,this.Hh=_s[14]|0,this.Hl=_s[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:l,Dl:c,Eh:d,El:h,Fh:w,Fl:_,Gh:x,Gl:A,Hh:L,Hl:N}=this;return[e,t,n,i,s,o,l,c,d,h,w,_,x,A,L,N]}set(e,t,n,i,s,o,l,c,d,h,w,_,x,A,L,N){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=d|0,this.El=h|0,this.Fh=w|0,this.Fl=_|0,this.Gh=x|0,this.Gl=A|0,this.Hh=L|0,this.Hl=N|0}process(e,t){for(let k=0;k<16;k++,t+=4)Cc[k]=e.getUint32(t),Ic[k]=e.getUint32(t+=4);for(let k=16;k<80;k++){const F=Cc[k-15]|0,Q=Ic[k-15]|0,G=mp(F,Q,1)^mp(F,Q,8)^D2(F,Q,7),Y=gp(F,Q,1)^gp(F,Q,8)^B2(F,Q,7),ee=Cc[k-2]|0,te=Ic[k-2]|0,U=mp(ee,te,19)^Bv(ee,te,61)^D2(ee,te,6),V=gp(ee,te,19)^Uv(ee,te,61)^B2(ee,te,6),K=vz(Y,V,Ic[k-7],Ic[k-16]),E=wz(K,G,U,Cc[k-7],Cc[k-16]);Cc[k]=E|0,Ic[k]=K|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:l,Cl:c,Dh:d,Dl:h,Eh:w,El:_,Fh:x,Fl:A,Gh:L,Gl:N,Hh:C,Hl:D}=this;for(let k=0;k<80;k++){const F=mp(w,_,14)^mp(w,_,18)^Bv(w,_,41),Q=gp(w,_,14)^gp(w,_,18)^Uv(w,_,41),G=w&x^~w&L,Y=_&A^~_&N,ee=_z(D,Q,Y,bz[k],Ic[k]),te=xz(ee,C,F,G,Ez[k],Cc[k]),U=ee|0,V=mp(n,i,28)^Bv(n,i,34)^Bv(n,i,39),K=gp(n,i,28)^Uv(n,i,34)^Uv(n,i,39),E=n&s^n&l^s&l,a=i&o^i&c^o&c;C=L|0,D=N|0,L=x|0,N=A|0,x=w|0,A=_|0,{h:w,l:_}=gu(d|0,h|0,te|0,U|0),d=l|0,h=c|0,l=s|0,c=o|0,s=n|0,o=i|0;const p=gz(U,K,a);n=yz(p,te,V,E),i=p|0}({h:n,l:i}=gu(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=gu(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:c}=gu(this.Ch|0,this.Cl|0,l|0,c|0),{h:d,l:h}=gu(this.Dh|0,this.Dl|0,d|0,h|0),{h:w,l:_}=gu(this.Eh|0,this.El|0,w|0,_|0),{h:x,l:A}=gu(this.Fh|0,this.Fl|0,x|0,A|0),{h:L,l:N}=gu(this.Gh|0,this.Gl|0,L|0,N|0),{h:C,l:D}=gu(this.Hh|0,this.Hl|0,C|0,D|0),this.set(n,i,s,o,l,c,d,h,w,_,x,A,L,N,C,D)}roundClean(){Jc(Cc,Ic)}destroy(){Jc(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fk=PA(()=>new Mz),Tz=PA(()=>new Az);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kA=BigInt(0),lb=BigInt(1);function Xh(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function Wa(r,e,t=""){const n=my(r),i=r==null?void 0:r.length,s=e!==void 0;if(!n||s&&i!==e){const o=t&&`"${t}" `,l=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+l+", got "+c)}return r}function Fv(r){const e=r.toString(16);return e.length&1?"0"+e:e}function hk(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?kA:BigInt("0x"+r)}function B1(r){return hk(Wh(r))}function Lg(r){return Vu(r),hk(Wh(Uint8Array.from(r).reverse()))}function OA(r,e){return __(r.toString(16).padStart(e*2,"0"))}function dk(r,e){return OA(r,e).reverse()}function si(r,e,t){let n;if(typeof e=="string")try{n=__(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(my(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function U2(r){return Uint8Array.from(r)}const bS=r=>typeof r=="bigint"&&kA<=r;function Rz(r,e,t){return bS(r)&&bS(e)&&bS(t)&&e<=r&&r<t}function ub(r,e,t,n){if(!Rz(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function pk(r){let e;for(e=0;r>kA;r>>=lb,e+=1);return e}const gy=r=>(lb<<BigInt(r))-lb;function Cz(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=x=>new Uint8Array(x),i=x=>Uint8Array.of(x);let s=n(r),o=n(r),l=0;const c=()=>{s.fill(1),o.fill(0),l=0},d=(...x)=>t(o,s,...x),h=(x=n(0))=>{o=d(i(0),x),s=d(),x.length!==0&&(o=d(i(1),x),s=d())},w=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const A=[];for(;x<e;){s=d();const L=s.slice();A.push(L),x+=s.length}return vl(...A)};return(x,A)=>{c(),h(x);let L;for(;!(L=A(w()));)h();return c(),L}}function yy(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,o){const l=r[i];if(o&&l===void 0)return;const c=typeof l;if(c!==s||l===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(t).forEach(([i,s])=>n(i,s,!0))}function x_(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vo=BigInt(0),hs=BigInt(1),bh=BigInt(2),mk=BigInt(3),gk=BigInt(4),yk=BigInt(5),Iz=BigInt(7),vk=BigInt(8),Nz=BigInt(9),wk=BigInt(16);function Ti(r,e){const t=r%e;return t>=vo?t:e+t}function ii(r,e,t){let n=r;for(;e-- >vo;)n*=n,n%=t;return n}function F2(r,e){if(r===vo)throw new Error("invert: expected non-zero number");if(e<=vo)throw new Error("invert: expected positive modulus, got "+e);let t=Ti(r,e),n=e,i=vo,s=hs;for(;t!==vo;){const l=n/t,c=n%t,d=i-s*l;n=t,t=c,i=s,s=d}if(n!==hs)throw new Error("invert: does not exist");return Ti(i,e)}function DA(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function _k(r,e){const t=(r.ORDER+hs)/gk,n=r.pow(e,t);return DA(r,n,e),n}function Pz(r,e){const t=(r.ORDER-yk)/vk,n=r.mul(e,bh),i=r.pow(n,t),s=r.mul(e,i),o=r.mul(r.mul(s,bh),i),l=r.mul(s,r.sub(o,r.ONE));return DA(r,l,e),l}function Lz(r){const e=id(r),t=xk(r),n=t(e,e.neg(e.ONE)),i=t(e,n),s=t(e,e.neg(n)),o=(r+Iz)/wk;return(l,c)=>{let d=l.pow(c,o),h=l.mul(d,n);const w=l.mul(d,i),_=l.mul(d,s),x=l.eql(l.sqr(h),c),A=l.eql(l.sqr(w),c);d=l.cmov(d,h,x),h=l.cmov(_,w,A);const L=l.eql(l.sqr(h),c),N=l.cmov(d,h,L);return DA(l,N,c),N}}function xk(r){if(r<mk)throw new Error("sqrt is not defined for small field");let e=r-hs,t=0;for(;e%bh===vo;)e/=bh,t++;let n=bh;const i=id(r);for(;z2(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return _k;let s=i.pow(n,e);const o=(e+hs)/bh;return function(c,d){if(c.is0(d))return d;if(z2(c,d)!==1)throw new Error("Cannot find square root");let h=t,w=c.mul(c.ONE,s),_=c.pow(d,e),x=c.pow(d,o);for(;!c.eql(_,c.ONE);){if(c.is0(_))return c.ZERO;let A=1,L=c.sqr(_);for(;!c.eql(L,c.ONE);)if(A++,L=c.sqr(L),A===h)throw new Error("Cannot find square root");const N=hs<<BigInt(h-A-1),C=c.pow(w,N);h=A,w=c.sqr(C),_=c.mul(_,w),x=c.mul(x,C)}return x}}function kz(r){return r%gk===mk?_k:r%vk===yk?Pz:r%wk===Nz?Lz(r):xk(r)}const Oz=(r,e)=>(Ti(r,e)&hs)===hs,Dz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Bz(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Dz.reduce((n,i)=>(n[i]="function",n),e);return yy(r,t),r}function Uz(r,e,t){if(t<vo)throw new Error("invalid exponent, negatives unsupported");if(t===vo)return r.ONE;if(t===hs)return e;let n=r.ONE,i=e;for(;t>vo;)t&hs&&(n=r.mul(n,i)),i=r.sqr(i),t>>=hs;return n}function Sk(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,l,c)=>r.is0(l)?o:(n[c]=o,r.mul(o,l)),r.ONE),s=r.inv(i);return e.reduceRight((o,l,c)=>r.is0(l)?o:(n[c]=r.mul(o,n[c]),r.mul(o,l)),s),n}function z2(r,e){const t=(r.ORDER-hs)/bh,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Mk(r,e){e!==void 0&&Pg(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function id(r,e,t=!1,n={}){if(r<=vo)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s,o=!1,l;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const _=e;_.BITS&&(i=_.BITS),_.sqrt&&(s=_.sqrt),typeof _.isLE=="boolean"&&(t=_.isLE),typeof _.modFromBytes=="boolean"&&(o=_.modFromBytes),l=_.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:d}=Mk(r,i);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const w=Object.freeze({ORDER:r,isLE:t,BITS:c,BYTES:d,MASK:gy(c),ZERO:vo,ONE:hs,allowedLengths:l,create:_=>Ti(_,r),isValid:_=>{if(typeof _!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof _);return vo<=_&&_<r},is0:_=>_===vo,isValidNot0:_=>!w.is0(_)&&w.isValid(_),isOdd:_=>(_&hs)===hs,neg:_=>Ti(-_,r),eql:(_,x)=>_===x,sqr:_=>Ti(_*_,r),add:(_,x)=>Ti(_+x,r),sub:(_,x)=>Ti(_-x,r),mul:(_,x)=>Ti(_*x,r),pow:(_,x)=>Uz(w,_,x),div:(_,x)=>Ti(_*F2(x,r),r),sqrN:_=>_*_,addN:(_,x)=>_+x,subN:(_,x)=>_-x,mulN:(_,x)=>_*x,inv:_=>F2(_,r),sqrt:s||(_=>(h||(h=kz(r)),h(w,_))),toBytes:_=>t?dk(_,d):OA(_,d),fromBytes:(_,x=!0)=>{if(l){if(!l.includes(_.length)||_.length>d)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+_.length);const L=new Uint8Array(d);L.set(_,t?0:L.length-_.length),_=L}if(_.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+_.length);let A=t?Lg(_):B1(_);if(o&&(A=Ti(A,r)),!x&&!w.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:_=>Sk(w,_),cmov:(_,x,A)=>A?x:_});return Object.freeze(w)}function Ek(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function bk(r){const e=Ek(r);return e+Math.ceil(e/2)}function Fz(r,e,t=!1){const n=r.length,i=Ek(e),s=bk(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=t?Lg(r):B1(r),l=Ti(o,e-hs)+hs;return t?dk(l,i):OA(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const d0=BigInt(0),Ah=BigInt(1);function S_(r,e){const t=e.negate();return r?t:e}function Th(r,e){const t=Sk(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function Ak(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function AS(r,e){Ak(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=gy(r),o=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function W2(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=t;let l=Number(r&i),c=r>>o;l>n&&(l-=s,c+=Ah);const d=e*n,h=d+Math.abs(l)-1,w=l===0,_=l<0,x=e%2!==0;return{nextN:c,offset:h,isZero:w,isNeg:_,isNegF:x,offsetF:d}}function zz(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Wz(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const TS=new WeakMap,Tk=new WeakMap;function RS(r){return Tk.get(r)||1}function V2(r){if(r!==d0)throw new Error("invalid wNAF")}class Rk{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>d0;)t&Ah&&(n=n.add(i)),i=i.double(),t>>=Ah;return n}precomputeWindow(e,t){const{windows:n,windowSize:i}=AS(t,this.bits),s=[];let o=e,l=o;for(let c=0;c<n;c++){l=o,s.push(l);for(let d=1;d<i;d++)l=l.add(o),s.push(l);o=l.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=AS(e,this.bits);for(let l=0;l<o.windows;l++){const{nextN:c,offset:d,isZero:h,isNeg:w,isNegF:_,offsetF:x}=W2(n,l,o);n=c,h?s=s.add(S_(_,t[x])):i=i.add(S_(w,t[d]))}return V2(n),{p:i,f:s}}wNAFUnsafe(e,t,n,i=this.ZERO){const s=AS(e,this.bits);for(let o=0;o<s.windows&&n!==d0;o++){const{nextN:l,offset:c,isZero:d,isNeg:h}=W2(n,o,s);if(n=l,!d){const w=t[c];i=i.add(h?w.negate():w)}}return V2(n),i}getPrecomputes(e,t,n){let i=TS.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),TS.set(t,i))),i}cached(e,t,n){const i=RS(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){const s=RS(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,i)}createCache(e,t){Ak(t,this.bits),Tk.set(e,t),TS.delete(e)}hasCache(e){return RS(e)!==1}}function Vz(r,e,t,n){let i=e,s=r.ZERO,o=r.ZERO;for(;t>d0||n>d0;)t&Ah&&(s=s.add(i)),n&Ah&&(o=o.add(i)),i=i.double(),t>>=Ah,n>>=Ah;return{p1:s,p2:o}}function Ck(r,e,t,n){zz(t,r),Wz(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,l=pk(BigInt(i));let c=1;l>12?c=l-3:l>4?c=l-2:l>0&&(c=2);const d=gy(c),h=new Array(Number(d)+1).fill(o),w=Math.floor((e.BITS-1)/c)*c;let _=o;for(let x=w;x>=0;x-=c){h.fill(o);for(let L=0;L<s;L++){const N=n[L],C=Number(N>>BigInt(x)&d);h[C]=h[C].add(t[L])}let A=o;for(let L=h.length-1,N=o;L>0;L--)N=N.add(h[L]),A=A.add(N);if(_=_.add(A),x!==0)for(let L=0;L<c;L++)_=_.double()}return _}function H2(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Bz(e),e}else return id(r,{isLE:t})}function Ik(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const d=e[c];if(!(typeof d=="bigint"&&d>d0))throw new Error(`CURVE.${c} must be positive bigint`)}const i=H2(e.p,t.Fp,n),s=H2(e.n,t.Fn,n),l=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const c of l)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nc=BigInt(0),Yi=BigInt(1),CS=BigInt(2),Hz=BigInt(8);function Gz(r,e,t,n){const i=r.sqr(t),s=r.sqr(n),o=r.add(r.mul(e.a,i),s),l=r.add(r.ONE,r.mul(e.d,r.mul(i,s)));return r.eql(o,l)}function jz(r,e={}){const t=Ik("edwards",r,e,e.FpFnLE),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:o}=s;yy(e,{},{uvRatio:"function"});const l=CS<<BigInt(i.BYTES*8)-Yi,c=N=>n.create(N),d=e.uvRatio||((N,C)=>{try{return{isValid:!0,value:n.sqrt(n.div(N,C))}}catch{return{isValid:!1,value:Nc}}});if(!Gz(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function h(N,C,D=!1){const k=D?Yi:Nc;return ub("coordinate "+N,C,k,l),C}function w(N){if(!(N instanceof A))throw new Error("ExtendedPoint expected")}const _=x_((N,C)=>{const{X:D,Y:k,Z:F}=N,Q=N.is0();C==null&&(C=Q?Hz:n.inv(F));const G=c(D*C),Y=c(k*C),ee=n.mul(F,C);if(Q)return{x:Nc,y:Yi};if(ee!==Yi)throw new Error("invZ was invalid");return{x:G,y:Y}}),x=x_(N=>{const{a:C,d:D}=s;if(N.is0())throw new Error("bad point: ZERO");const{X:k,Y:F,Z:Q,T:G}=N,Y=c(k*k),ee=c(F*F),te=c(Q*Q),U=c(te*te),V=c(Y*C),K=c(te*c(V+ee)),E=c(U+c(D*c(Y*ee)));if(K!==E)throw new Error("bad point: equation left != right (1)");const a=c(k*F),p=c(Q*G);if(a!==p)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(C,D,k,F){this.X=h("x",C),this.Y=h("y",D),this.Z=h("z",k,!0),this.T=h("t",F),Object.freeze(this)}static CURVE(){return s}static fromAffine(C){if(C instanceof A)throw new Error("extended point not allowed");const{x:D,y:k}=C||{};return h("x",D),h("y",k),new A(D,k,Yi,c(D*k))}static fromBytes(C,D=!1){const k=n.BYTES,{a:F,d:Q}=s;C=U2(Wa(C,k,"point")),Xh(D,"zip215");const G=U2(C),Y=C[k-1];G[k-1]=Y&-129;const ee=Lg(G),te=D?l:n.ORDER;ub("point.y",ee,Nc,te);const U=c(ee*ee),V=c(U-Yi),K=c(Q*U-F);let{isValid:E,value:a}=d(V,K);if(!E)throw new Error("bad point: invalid y coordinate");const p=(a&Yi)===Yi,M=(Y&128)!==0;if(!D&&a===Nc&&M)throw new Error("bad point: x=0 and x_0=1");return M!==p&&(a=c(-a)),A.fromAffine({x:a,y:ee})}static fromHex(C,D=!1){return A.fromBytes(si("point",C),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,D=!0){return L.createCache(this,C),D||this.multiply(CS),this}assertValidity(){x(this)}equals(C){w(C);const{X:D,Y:k,Z:F}=this,{X:Q,Y:G,Z:Y}=C,ee=c(D*Y),te=c(Q*F),U=c(k*Y),V=c(G*F);return ee===te&&U===V}is0(){return this.equals(A.ZERO)}negate(){return new A(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:C}=s,{X:D,Y:k,Z:F}=this,Q=c(D*D),G=c(k*k),Y=c(CS*c(F*F)),ee=c(C*Q),te=D+k,U=c(c(te*te)-Q-G),V=ee+G,K=V-Y,E=ee-G,a=c(U*K),p=c(V*E),M=c(U*E),R=c(K*V);return new A(a,p,R,M)}add(C){w(C);const{a:D,d:k}=s,{X:F,Y:Q,Z:G,T:Y}=this,{X:ee,Y:te,Z:U,T:V}=C,K=c(F*ee),E=c(Q*te),a=c(Y*k*V),p=c(G*U),M=c((F+Q)*(ee+te)-K-E),R=p-a,T=p+a,P=c(E-D*K),I=c(M*R),y=c(T*P),u=c(M*P),S=c(R*T);return new A(I,y,S,u)}subtract(C){return this.add(C.negate())}multiply(C){if(!i.isValidNot0(C))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:k}=L.cached(this,C,F=>Th(A,F));return Th(A,[D,k])[0]}multiplyUnsafe(C,D=A.ZERO){if(!i.isValid(C))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return C===Nc?A.ZERO:this.is0()||C===Yi?this:L.unsafe(this,C,k=>Th(A,k),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return L.unsafe(this,s.n).is0()}toAffine(C){return _(this,C)}clearCofactor(){return o===Yi?this:this.multiplyUnsafe(o)}toBytes(){const{x:C,y:D}=this.toAffine(),k=n.toBytes(D);return k[k.length-1]|=C&Yi?128:0,k}toHex(){return Wh(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(C){return Th(A,C)}static msm(C,D){return Ck(A,i,C,D)}_setWindowSize(C){this.precompute(C)}toRawBytes(){return this.toBytes()}}A.BASE=new A(s.Gx,s.Gy,Yi,c(s.Gx*s.Gy)),A.ZERO=new A(Nc,Yi,Yi,Nc),A.Fp=n,A.Fn=i;const L=new Rk(A,i.BITS);return A.BASE.precompute(8),A}function qz(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');yy(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=t,{BASE:i,Fp:s,Fn:o}=r,l=t.randomBytes||LA,c=t.adjustScalarBytes||(te=>te),d=t.domain||((te,U,V)=>{if(Xh(V,"phflag"),U.length||V)throw new Error("Contexts/pre-hash are not supported");return te});function h(te){return o.create(Lg(te))}function w(te){const U=k.secretKey;te=si("private key",te,U);const V=si("hashed private key",e(te),2*U),K=c(V.slice(0,U)),E=V.slice(U,2*U),a=h(K);return{head:K,prefix:E,scalar:a}}function _(te){const{head:U,prefix:V,scalar:K}=w(te),E=i.multiply(K),a=E.toBytes();return{head:U,prefix:V,scalar:K,point:E,pointBytes:a}}function x(te){return _(te).pointBytes}function A(te=Uint8Array.of(),...U){const V=vl(...U);return h(e(d(V,si("context",te),!!n)))}function L(te,U,V={}){te=si("message",te),n&&(te=n(te));const{prefix:K,scalar:E,pointBytes:a}=_(U),p=A(V.context,K,te),M=i.multiply(p).toBytes(),R=A(V.context,M,a,te),T=o.create(p+R*E);if(!o.isValid(T))throw new Error("sign failed: invalid s");const P=vl(M,o.toBytes(T));return Wa(P,k.signature,"result")}const N={zip215:!0};function C(te,U,V,K=N){const{context:E,zip215:a}=K,p=k.signature;te=si("signature",te,p),U=si("message",U),V=si("publicKey",V,k.publicKey),a!==void 0&&Xh(a,"zip215"),n&&(U=n(U));const M=p/2,R=te.subarray(0,M),T=Lg(te.subarray(M,p));let P,I,y;try{P=r.fromBytes(V,a),I=r.fromBytes(R,a),y=i.multiplyUnsafe(T)}catch{return!1}if(!a&&P.isSmallOrder())return!1;const u=A(E,I.toBytes(),P.toBytes(),U);return I.add(P.multiplyUnsafe(u)).subtract(y).clearCofactor().is0()}const D=s.BYTES,k={secretKey:D,publicKey:D,signature:2*D,seed:D};function F(te=l(k.seed)){return Wa(te,k.seed,"seed")}function Q(te){const U=ee.randomSecretKey(te);return{secretKey:U,publicKey:x(U)}}function G(te){return my(te)&&te.length===o.BYTES}function Y(te,U){try{return!!r.fromBytes(te,U)}catch{return!1}}const ee={getExtendedPublicKey:_,randomSecretKey:F,isValidSecretKey:G,isValidPublicKey:Y,toMontgomery(te){const{y:U}=r.fromBytes(te),V=k.publicKey,K=V===32;if(!K&&V!==57)throw new Error("only defined for 25519 and 448");const E=K?s.div(Yi+U,Yi-U):s.div(U-Yi,U+Yi);return s.toBytes(E)},toMontgomerySecret(te){const U=k.secretKey;Wa(te,U);const V=e(te.subarray(0,U));return c(V).subarray(0,U)},randomPrivateKey:F,precompute(te=8,U=r.BASE){return U.precompute(te,!1)}};return Object.freeze({keygen:Q,getPublicKey:x,sign:L,verify:C,utils:ee,Point:r,lengths:k})}function Kz(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=id(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},s={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,hash:r.hash,eddsaOpts:s}}function Yz(r,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function Xz(r){const{CURVE:e,curveOpts:t,hash:n,eddsaOpts:i}=Kz(r),s=jz(e,t),o=qz(s,n,i);return Yz(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $z=BigInt(1),G2=BigInt(2);BigInt(3);const Zz=BigInt(5),Qz=BigInt(8),BA=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Nk={p:BA,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Qz,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Jz(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=BA,l=r*r%s*r%s,c=ii(l,G2,s)*l%s,d=ii(c,$z,s)*r%s,h=ii(d,Zz,s)*d%s,w=ii(h,e,s)*h%s,_=ii(w,t,s)*w%s,x=ii(_,n,s)*_%s,A=ii(x,i,s)*x%s,L=ii(A,i,s)*x%s,N=ii(L,e,s)*h%s;return{pow_p_5_8:ii(N,G2,s)*r%s,b2:l}}function e8(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const j2=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function t8(r,e){const t=BA,n=Ti(e*e*e,t),i=Ti(n*n*e,t),s=Jz(r*i).pow_p_5_8;let o=Ti(r*n*s,t);const l=Ti(e*o*o,t),c=o,d=Ti(o*j2,t),h=l===r,w=l===Ti(-r,t),_=l===Ti(-r*j2,t);return h&&(o=c),(w||_)&&(o=d),Oz(o,t)&&(o=Ti(-o,t)),{isValid:h||w,value:o}}const n8=id(Nk.p,{isLE:!0}),r8={...Nk,Fp:n8,hash:Tz,adjustScalarBytes:e8,uvRatio:t8},b0=Xz(r8);var Qw={exports:{}},IS={},q2;function A0(){return q2||(q2=1,(function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},t={};t.byteLength=h,t.toByteArray=_,t.fromByteArray=L;for(var n=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=o.length;l<c;++l)n[l]=o[l],i[o.charCodeAt(l)]=l;i[45]=62,i[95]=63;function d(D){var k=D.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var F=D.indexOf("=");F===-1&&(F=k);var Q=F===k?0:4-F%4;return[F,Q]}function h(D){var k=d(D),F=k[0],Q=k[1];return(F+Q)*3/4-Q}function w(D,k,F){return(k+F)*3/4-F}function _(D){var k,F=d(D),Q=F[0],G=F[1],Y=new s(w(D,Q,G)),ee=0,te=G>0?Q-4:Q,U;for(U=0;U<te;U+=4)k=i[D.charCodeAt(U)]<<18|i[D.charCodeAt(U+1)]<<12|i[D.charCodeAt(U+2)]<<6|i[D.charCodeAt(U+3)],Y[ee++]=k>>16&255,Y[ee++]=k>>8&255,Y[ee++]=k&255;return G===2&&(k=i[D.charCodeAt(U)]<<2|i[D.charCodeAt(U+1)]>>4,Y[ee++]=k&255),G===1&&(k=i[D.charCodeAt(U)]<<10|i[D.charCodeAt(U+1)]<<4|i[D.charCodeAt(U+2)]>>2,Y[ee++]=k>>8&255,Y[ee++]=k&255),Y}function x(D){return n[D>>18&63]+n[D>>12&63]+n[D>>6&63]+n[D&63]}function A(D,k,F){for(var Q,G=[],Y=k;Y<F;Y+=3)Q=(D[Y]<<16&16711680)+(D[Y+1]<<8&65280)+(D[Y+2]&255),G.push(x(Q));return G.join("")}function L(D){for(var k,F=D.length,Q=F%3,G=[],Y=16383,ee=0,te=F-Q;ee<te;ee+=Y)G.push(A(D,ee,ee+Y>te?te:ee+Y));return Q===1?(k=D[F-1],G.push(n[k>>2]+n[k<<4&63]+"==")):Q===2&&(k=(D[F-2]<<8)+D[F-1],G.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),G.join("")}var N={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */N.read=function(D,k,F,Q,G){var Y,ee,te=G*8-Q-1,U=(1<<te)-1,V=U>>1,K=-7,E=F?G-1:0,a=F?-1:1,p=D[k+E];for(E+=a,Y=p&(1<<-K)-1,p>>=-K,K+=te;K>0;Y=Y*256+D[k+E],E+=a,K-=8);for(ee=Y&(1<<-K)-1,Y>>=-K,K+=Q;K>0;ee=ee*256+D[k+E],E+=a,K-=8);if(Y===0)Y=1-V;else{if(Y===U)return ee?NaN:(p?-1:1)*(1/0);ee=ee+Math.pow(2,Q),Y=Y-V}return(p?-1:1)*ee*Math.pow(2,Y-Q)},N.write=function(D,k,F,Q,G,Y){var ee,te,U,V=Y*8-G-1,K=(1<<V)-1,E=K>>1,a=G===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=Q?0:Y-1,M=Q?1:-1,R=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(te=isNaN(k)?1:0,ee=K):(ee=Math.floor(Math.log(k)/Math.LN2),k*(U=Math.pow(2,-ee))<1&&(ee--,U*=2),ee+E>=1?k+=a/U:k+=a*Math.pow(2,1-E),k*U>=2&&(ee++,U/=2),ee+E>=K?(te=0,ee=K):ee+E>=1?(te=(k*U-1)*Math.pow(2,G),ee=ee+E):(te=k*Math.pow(2,E-1)*Math.pow(2,G),ee=0));G>=8;D[F+p]=te&255,p+=M,te/=256,G-=8);for(ee=ee<<G|te,V+=G;V>0;D[F+p]=ee&255,p+=M,ee/=256,V-=8);D[F+p-M]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(D){const k=t,F=N,Q=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;D.Buffer=K,D.SlowBuffer=S,D.INSPECT_MAX_BYTES=50;const G=2147483647;D.kMaxLength=G;const{Uint8Array:Y,ArrayBuffer:ee,SharedArrayBuffer:te}=globalThis;K.TYPED_ARRAY_SUPPORT=U(),!K.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function U(){try{const ae=new Y(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Y.prototype),Object.setPrototypeOf(ae,J),ae.foo()===42}catch{return!1}}Object.defineProperty(K.prototype,"parent",{enumerable:!0,get:function(){if(K.isBuffer(this))return this.buffer}}),Object.defineProperty(K.prototype,"offset",{enumerable:!0,get:function(){if(K.isBuffer(this))return this.byteOffset}});function V(ae){if(ae>G)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const J=new Y(ae);return Object.setPrototypeOf(J,K.prototype),J}function K(ae,J,X){if(typeof ae=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(ae)}return E(ae,J,X)}K.poolSize=8192;function E(ae,J,X){if(typeof ae=="string")return R(ae,J);if(ee.isView(ae))return P(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(Rt(ae,ee)||ae&&Rt(ae.buffer,ee)||typeof te<"u"&&(Rt(ae,te)||ae&&Rt(ae.buffer,te)))return I(ae,J,X);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=ae.valueOf&&ae.valueOf();if(he!=null&&he!==ae)return K.from(he,J,X);const Ie=y(ae);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return K.from(ae[Symbol.toPrimitive]("string"),J,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}K.from=function(ae,J,X){return E(ae,J,X)},Object.setPrototypeOf(K.prototype,Y.prototype),Object.setPrototypeOf(K,Y);function a(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function p(ae,J,X){return a(ae),ae<=0?V(ae):J!==void 0?typeof X=="string"?V(ae).fill(J,X):V(ae).fill(J):V(ae)}K.alloc=function(ae,J,X){return p(ae,J,X)};function M(ae){return a(ae),V(ae<0?0:u(ae)|0)}K.allocUnsafe=function(ae){return M(ae)},K.allocUnsafeSlow=function(ae){return M(ae)};function R(ae,J){if((typeof J!="string"||J==="")&&(J="utf8"),!K.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const X=W(ae,J)|0;let he=V(X);const Ie=he.write(ae,J);return Ie!==X&&(he=he.slice(0,Ie)),he}function T(ae){const J=ae.length<0?0:u(ae.length)|0,X=V(J);for(let he=0;he<J;he+=1)X[he]=ae[he]&255;return X}function P(ae){if(Rt(ae,Y)){const J=new Y(ae);return I(J.buffer,J.byteOffset,J.byteLength)}return T(ae)}function I(ae,J,X){if(J<0||ae.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<J+(X||0))throw new RangeError('"length" is outside of buffer bounds');let he;return J===void 0&&X===void 0?he=new Y(ae):X===void 0?he=new Y(ae,J):he=new Y(ae,J,X),Object.setPrototypeOf(he,K.prototype),he}function y(ae){if(K.isBuffer(ae)){const J=u(ae.length)|0,X=V(J);return X.length===0||ae.copy(X,0,0,J),X}if(ae.length!==void 0)return typeof ae.length!="number"||ct(ae.length)?V(0):T(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return T(ae.data)}function u(ae){if(ae>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return ae|0}function S(ae){return+ae!=ae&&(ae=0),K.alloc(+ae)}K.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==K.prototype},K.compare=function(J,X){if(Rt(J,Y)&&(J=K.from(J,J.offset,J.byteLength)),Rt(X,Y)&&(X=K.from(X,X.offset,X.byteLength)),!K.isBuffer(J)||!K.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===X)return 0;let he=J.length,Ie=X.length;for(let Ae=0,Ne=Math.min(he,Ie);Ae<Ne;++Ae)if(J[Ae]!==X[Ae]){he=J[Ae],Ie=X[Ae];break}return he<Ie?-1:Ie<he?1:0},K.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},K.concat=function(J,X){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return K.alloc(0);let he;if(X===void 0)for(X=0,he=0;he<J.length;++he)X+=J[he].length;const Ie=K.allocUnsafe(X);let Ae=0;for(he=0;he<J.length;++he){let Ne=J[he];if(Rt(Ne,Y))Ae+Ne.length>Ie.length?(K.isBuffer(Ne)||(Ne=K.from(Ne)),Ne.copy(Ie,Ae)):Y.prototype.set.call(Ie,Ne,Ae);else if(K.isBuffer(Ne))Ne.copy(Ie,Ae);else throw new TypeError('"list" argument must be an Array of Buffers');Ae+=Ne.length}return Ie};function W(ae,J){if(K.isBuffer(ae))return ae.length;if(ee.isView(ae)||Rt(ae,ee))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const X=ae.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&X===0)return 0;let Ie=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return de(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return Me(ae).length;default:if(Ie)return he?-1:de(ae).length;J=(""+J).toLowerCase(),Ie=!0}}K.byteLength=W;function $(ae,J,X){let he=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,J>>>=0,X<=J))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return fe(this,J,X);case"utf8":case"utf-8":return je(this,J,X);case"ascii":return nt(this,J,X);case"latin1":case"binary":return Nt(this,J,X);case"base64":return Ge(this,J,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,J,X);default:if(he)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),he=!0}}K.prototype._isBuffer=!0;function se(ae,J,X){const he=ae[J];ae[J]=ae[X],ae[X]=he}K.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<J;X+=2)se(this,X,X+1);return this},K.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<J;X+=4)se(this,X,X+3),se(this,X+1,X+2);return this},K.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<J;X+=8)se(this,X,X+7),se(this,X+1,X+6),se(this,X+2,X+5),se(this,X+3,X+4);return this},K.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?je(this,0,J):$.apply(this,arguments)},K.prototype.toLocaleString=K.prototype.toString,K.prototype.equals=function(J){if(!K.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:K.compare(this,J)===0},K.prototype.inspect=function(){let J="";const X=D.INSPECT_MAX_BYTES;return J=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(J+=" ... "),"<Buffer "+J+">"},Q&&(K.prototype[Q]=K.prototype.inspect),K.prototype.compare=function(J,X,he,Ie,Ae){if(Rt(J,Y)&&(J=K.from(J,J.offset,J.byteLength)),!K.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(X===void 0&&(X=0),he===void 0&&(he=J?J.length:0),Ie===void 0&&(Ie=0),Ae===void 0&&(Ae=this.length),X<0||he>J.length||Ie<0||Ae>this.length)throw new RangeError("out of range index");if(Ie>=Ae&&X>=he)return 0;if(Ie>=Ae)return-1;if(X>=he)return 1;if(X>>>=0,he>>>=0,Ie>>>=0,Ae>>>=0,this===J)return 0;let Ne=Ae-Ie,dn=he-X;const mt=Math.min(Ne,dn),_t=this.slice(Ie,Ae),Dn=J.slice(X,he);for(let vt=0;vt<mt;++vt)if(_t[vt]!==Dn[vt]){Ne=_t[vt],dn=Dn[vt];break}return Ne<dn?-1:dn<Ne?1:0};function me(ae,J,X,he,Ie){if(ae.length===0)return-1;if(typeof X=="string"?(he=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,ct(X)&&(X=Ie?0:ae.length-1),X<0&&(X=ae.length+X),X>=ae.length){if(Ie)return-1;X=ae.length-1}else if(X<0)if(Ie)X=0;else return-1;if(typeof J=="string"&&(J=K.from(J,he)),K.isBuffer(J))return J.length===0?-1:_e(ae,J,X,he,Ie);if(typeof J=="number")return J=J&255,typeof Y.prototype.indexOf=="function"?Ie?Y.prototype.indexOf.call(ae,J,X):Y.prototype.lastIndexOf.call(ae,J,X):_e(ae,[J],X,he,Ie);throw new TypeError("val must be string, number or Buffer")}function _e(ae,J,X,he,Ie){let Ae=1,Ne=ae.length,dn=J.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(ae.length<2||J.length<2)return-1;Ae=2,Ne/=2,dn/=2,X/=2}function mt(Dn,vt){return Ae===1?Dn[vt]:Dn.readUInt16BE(vt*Ae)}let _t;if(Ie){let Dn=-1;for(_t=X;_t<Ne;_t++)if(mt(ae,_t)===mt(J,Dn===-1?0:_t-Dn)){if(Dn===-1&&(Dn=_t),_t-Dn+1===dn)return Dn*Ae}else Dn!==-1&&(_t-=_t-Dn),Dn=-1}else for(X+dn>Ne&&(X=Ne-dn),_t=X;_t>=0;_t--){let Dn=!0;for(let vt=0;vt<dn;vt++)if(mt(ae,_t+vt)!==mt(J,vt)){Dn=!1;break}if(Dn)return _t}return-1}K.prototype.includes=function(J,X,he){return this.indexOf(J,X,he)!==-1},K.prototype.indexOf=function(J,X,he){return me(this,J,X,he,!0)},K.prototype.lastIndexOf=function(J,X,he){return me(this,J,X,he,!1)};function be(ae,J,X,he){X=Number(X)||0;const Ie=ae.length-X;he?(he=Number(he),he>Ie&&(he=Ie)):he=Ie;const Ae=J.length;he>Ae/2&&(he=Ae/2);let Ne;for(Ne=0;Ne<he;++Ne){const dn=parseInt(J.substr(Ne*2,2),16);if(ct(dn))return Ne;ae[X+Ne]=dn}return Ne}function wt(ae,J,X,he){return qe(de(J,ae.length-X),ae,X,he)}function Ze(ae,J,X,he){return qe(Re(J),ae,X,he)}function Pe(ae,J,X,he){return qe(Me(J),ae,X,he)}function ge(ae,J,X,he){return qe(Ue(J,ae.length-X),ae,X,he)}K.prototype.write=function(J,X,he,Ie){if(X===void 0)Ie="utf8",he=this.length,X=0;else if(he===void 0&&typeof X=="string")Ie=X,he=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(he)?(he=he>>>0,Ie===void 0&&(Ie="utf8")):(Ie=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ae=this.length-X;if((he===void 0||he>Ae)&&(he=Ae),J.length>0&&(he<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let Ne=!1;for(;;)switch(Ie){case"hex":return be(this,J,X,he);case"utf8":case"utf-8":return wt(this,J,X,he);case"ascii":case"latin1":case"binary":return Ze(this,J,X,he);case"base64":return Pe(this,J,X,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,J,X,he);default:if(Ne)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Ne=!0}},K.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ge(ae,J,X){return J===0&&X===ae.length?k.fromByteArray(ae):k.fromByteArray(ae.slice(J,X))}function je(ae,J,X){X=Math.min(ae.length,X);const he=[];let Ie=J;for(;Ie<X;){const Ae=ae[Ie];let Ne=null,dn=Ae>239?4:Ae>223?3:Ae>191?2:1;if(Ie+dn<=X){let mt,_t,Dn,vt;switch(dn){case 1:Ae<128&&(Ne=Ae);break;case 2:mt=ae[Ie+1],(mt&192)===128&&(vt=(Ae&31)<<6|mt&63,vt>127&&(Ne=vt));break;case 3:mt=ae[Ie+1],_t=ae[Ie+2],(mt&192)===128&&(_t&192)===128&&(vt=(Ae&15)<<12|(mt&63)<<6|_t&63,vt>2047&&(vt<55296||vt>57343)&&(Ne=vt));break;case 4:mt=ae[Ie+1],_t=ae[Ie+2],Dn=ae[Ie+3],(mt&192)===128&&(_t&192)===128&&(Dn&192)===128&&(vt=(Ae&15)<<18|(mt&63)<<12|(_t&63)<<6|Dn&63,vt>65535&&vt<1114112&&(Ne=vt))}}Ne===null?(Ne=65533,dn=1):Ne>65535&&(Ne-=65536,he.push(Ne>>>10&1023|55296),Ne=56320|Ne&1023),he.push(Ne),Ie+=dn}return He(he)}const yt=4096;function He(ae){const J=ae.length;if(J<=yt)return String.fromCharCode.apply(String,ae);let X="",he=0;for(;he<J;)X+=String.fromCharCode.apply(String,ae.slice(he,he+=yt));return X}function nt(ae,J,X){let he="";X=Math.min(ae.length,X);for(let Ie=J;Ie<X;++Ie)he+=String.fromCharCode(ae[Ie]&127);return he}function Nt(ae,J,X){let he="";X=Math.min(ae.length,X);for(let Ie=J;Ie<X;++Ie)he+=String.fromCharCode(ae[Ie]);return he}function fe(ae,J,X){const he=ae.length;(!J||J<0)&&(J=0),(!X||X<0||X>he)&&(X=he);let Ie="";for(let Ae=J;Ae<X;++Ae)Ie+=gt[ae[Ae]];return Ie}function oe(ae,J,X){const he=ae.slice(J,X);let Ie="";for(let Ae=0;Ae<he.length-1;Ae+=2)Ie+=String.fromCharCode(he[Ae]+he[Ae+1]*256);return Ie}K.prototype.slice=function(J,X){const he=this.length;J=~~J,X=X===void 0?he:~~X,J<0?(J+=he,J<0&&(J=0)):J>he&&(J=he),X<0?(X+=he,X<0&&(X=0)):X>he&&(X=he),X<J&&(X=J);const Ie=this.subarray(J,X);return Object.setPrototypeOf(Ie,K.prototype),Ie};function Oe(ae,J,X){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+J>X)throw new RangeError("Trying to access beyond buffer length")}K.prototype.readUintLE=K.prototype.readUIntLE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=this[J],Ae=1,Ne=0;for(;++Ne<X&&(Ae*=256);)Ie+=this[J+Ne]*Ae;return Ie},K.prototype.readUintBE=K.prototype.readUIntBE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=this[J+--X],Ae=1;for(;X>0&&(Ae*=256);)Ie+=this[J+--X]*Ae;return Ie},K.prototype.readUint8=K.prototype.readUInt8=function(J,X){return J=J>>>0,X||Oe(J,1,this.length),this[J]},K.prototype.readUint16LE=K.prototype.readUInt16LE=function(J,X){return J=J>>>0,X||Oe(J,2,this.length),this[J]|this[J+1]<<8},K.prototype.readUint16BE=K.prototype.readUInt16BE=function(J,X){return J=J>>>0,X||Oe(J,2,this.length),this[J]<<8|this[J+1]},K.prototype.readUint32LE=K.prototype.readUInt32LE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},K.prototype.readUint32BE=K.prototype.readUInt32BE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},K.prototype.readBigUInt64LE=Sn(function(J){J=J>>>0,ve(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=X+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,Ae=this[++J]+this[++J]*2**8+this[++J]*2**16+he*2**24;return BigInt(Ie)+(BigInt(Ae)<<BigInt(32))}),K.prototype.readBigUInt64BE=Sn(function(J){J=J>>>0,ve(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=X*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],Ae=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+he;return(BigInt(Ie)<<BigInt(32))+BigInt(Ae)}),K.prototype.readIntLE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=this[J],Ae=1,Ne=0;for(;++Ne<X&&(Ae*=256);)Ie+=this[J+Ne]*Ae;return Ae*=128,Ie>=Ae&&(Ie-=Math.pow(2,8*X)),Ie},K.prototype.readIntBE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=X,Ae=1,Ne=this[J+--Ie];for(;Ie>0&&(Ae*=256);)Ne+=this[J+--Ie]*Ae;return Ae*=128,Ne>=Ae&&(Ne-=Math.pow(2,8*X)),Ne},K.prototype.readInt8=function(J,X){return J=J>>>0,X||Oe(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},K.prototype.readInt16LE=function(J,X){J=J>>>0,X||Oe(J,2,this.length);const he=this[J]|this[J+1]<<8;return he&32768?he|4294901760:he},K.prototype.readInt16BE=function(J,X){J=J>>>0,X||Oe(J,2,this.length);const he=this[J+1]|this[J]<<8;return he&32768?he|4294901760:he},K.prototype.readInt32LE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},K.prototype.readInt32BE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},K.prototype.readBigInt64LE=Sn(function(J){J=J>>>0,ve(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(he<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(X+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),K.prototype.readBigInt64BE=Sn(function(J){J=J>>>0,ve(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=(X<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+he)}),K.prototype.readFloatLE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),F.read(this,J,!0,23,4)},K.prototype.readFloatBE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),F.read(this,J,!1,23,4)},K.prototype.readDoubleLE=function(J,X){return J=J>>>0,X||Oe(J,8,this.length),F.read(this,J,!0,52,8)},K.prototype.readDoubleBE=function(J,X){return J=J>>>0,X||Oe(J,8,this.length),F.read(this,J,!1,52,8)};function Te(ae,J,X,he,Ie,Ae){if(!K.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Ie||J<Ae)throw new RangeError('"value" argument is out of bounds');if(X+he>ae.length)throw new RangeError("Index out of range")}K.prototype.writeUintLE=K.prototype.writeUIntLE=function(J,X,he,Ie){if(J=+J,X=X>>>0,he=he>>>0,!Ie){const dn=Math.pow(2,8*he)-1;Te(this,J,X,he,dn,0)}let Ae=1,Ne=0;for(this[X]=J&255;++Ne<he&&(Ae*=256);)this[X+Ne]=J/Ae&255;return X+he},K.prototype.writeUintBE=K.prototype.writeUIntBE=function(J,X,he,Ie){if(J=+J,X=X>>>0,he=he>>>0,!Ie){const dn=Math.pow(2,8*he)-1;Te(this,J,X,he,dn,0)}let Ae=he-1,Ne=1;for(this[X+Ae]=J&255;--Ae>=0&&(Ne*=256);)this[X+Ae]=J/Ne&255;return X+he},K.prototype.writeUint8=K.prototype.writeUInt8=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,1,255,0),this[X]=J&255,X+1},K.prototype.writeUint16LE=K.prototype.writeUInt16LE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,2,65535,0),this[X]=J&255,this[X+1]=J>>>8,X+2},K.prototype.writeUint16BE=K.prototype.writeUInt16BE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,2,65535,0),this[X]=J>>>8,this[X+1]=J&255,X+2},K.prototype.writeUint32LE=K.prototype.writeUInt32LE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,4,4294967295,0),this[X+3]=J>>>24,this[X+2]=J>>>16,this[X+1]=J>>>8,this[X]=J&255,X+4},K.prototype.writeUint32BE=K.prototype.writeUInt32BE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,4,4294967295,0),this[X]=J>>>24,this[X+1]=J>>>16,this[X+2]=J>>>8,this[X+3]=J&255,X+4};function Le(ae,J,X,he,Ie){ue(J,he,Ie,ae,X,7);let Ae=Number(J&BigInt(4294967295));ae[X++]=Ae,Ae=Ae>>8,ae[X++]=Ae,Ae=Ae>>8,ae[X++]=Ae,Ae=Ae>>8,ae[X++]=Ae;let Ne=Number(J>>BigInt(32)&BigInt(4294967295));return ae[X++]=Ne,Ne=Ne>>8,ae[X++]=Ne,Ne=Ne>>8,ae[X++]=Ne,Ne=Ne>>8,ae[X++]=Ne,X}function ot(ae,J,X,he,Ie){ue(J,he,Ie,ae,X,7);let Ae=Number(J&BigInt(4294967295));ae[X+7]=Ae,Ae=Ae>>8,ae[X+6]=Ae,Ae=Ae>>8,ae[X+5]=Ae,Ae=Ae>>8,ae[X+4]=Ae;let Ne=Number(J>>BigInt(32)&BigInt(4294967295));return ae[X+3]=Ne,Ne=Ne>>8,ae[X+2]=Ne,Ne=Ne>>8,ae[X+1]=Ne,Ne=Ne>>8,ae[X]=Ne,X+8}K.prototype.writeBigUInt64LE=Sn(function(J,X=0){return Le(this,J,X,BigInt(0),BigInt("0xffffffffffffffff"))}),K.prototype.writeBigUInt64BE=Sn(function(J,X=0){return ot(this,J,X,BigInt(0),BigInt("0xffffffffffffffff"))}),K.prototype.writeIntLE=function(J,X,he,Ie){if(J=+J,X=X>>>0,!Ie){const mt=Math.pow(2,8*he-1);Te(this,J,X,he,mt-1,-mt)}let Ae=0,Ne=1,dn=0;for(this[X]=J&255;++Ae<he&&(Ne*=256);)J<0&&dn===0&&this[X+Ae-1]!==0&&(dn=1),this[X+Ae]=(J/Ne>>0)-dn&255;return X+he},K.prototype.writeIntBE=function(J,X,he,Ie){if(J=+J,X=X>>>0,!Ie){const mt=Math.pow(2,8*he-1);Te(this,J,X,he,mt-1,-mt)}let Ae=he-1,Ne=1,dn=0;for(this[X+Ae]=J&255;--Ae>=0&&(Ne*=256);)J<0&&dn===0&&this[X+Ae+1]!==0&&(dn=1),this[X+Ae]=(J/Ne>>0)-dn&255;return X+he},K.prototype.writeInt8=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,1,127,-128),J<0&&(J=255+J+1),this[X]=J&255,X+1},K.prototype.writeInt16LE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,2,32767,-32768),this[X]=J&255,this[X+1]=J>>>8,X+2},K.prototype.writeInt16BE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,2,32767,-32768),this[X]=J>>>8,this[X+1]=J&255,X+2},K.prototype.writeInt32LE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,4,2147483647,-2147483648),this[X]=J&255,this[X+1]=J>>>8,this[X+2]=J>>>16,this[X+3]=J>>>24,X+4},K.prototype.writeInt32BE=function(J,X,he){return J=+J,X=X>>>0,he||Te(this,J,X,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[X]=J>>>24,this[X+1]=J>>>16,this[X+2]=J>>>8,this[X+3]=J&255,X+4},K.prototype.writeBigInt64LE=Sn(function(J,X=0){return Le(this,J,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),K.prototype.writeBigInt64BE=Sn(function(J,X=0){return ot(this,J,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function et(ae,J,X,he,Ie,Ae){if(X+he>ae.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Ye(ae,J,X,he,Ie){return J=+J,X=X>>>0,Ie||et(ae,J,X,4),F.write(ae,J,X,he,23,4),X+4}K.prototype.writeFloatLE=function(J,X,he){return Ye(this,J,X,!0,he)},K.prototype.writeFloatBE=function(J,X,he){return Ye(this,J,X,!1,he)};function Et(ae,J,X,he,Ie){return J=+J,X=X>>>0,Ie||et(ae,J,X,8),F.write(ae,J,X,he,52,8),X+8}K.prototype.writeDoubleLE=function(J,X,he){return Et(this,J,X,!0,he)},K.prototype.writeDoubleBE=function(J,X,he){return Et(this,J,X,!1,he)},K.prototype.copy=function(J,X,he,Ie){if(!K.isBuffer(J))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Ie&&Ie!==0&&(Ie=this.length),X>=J.length&&(X=J.length),X||(X=0),Ie>0&&Ie<he&&(Ie=he),Ie===he||J.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),J.length-X<Ie-he&&(Ie=J.length-X+he);const Ae=Ie-he;return this===J&&typeof Y.prototype.copyWithin=="function"?this.copyWithin(X,he,Ie):Y.prototype.set.call(J,this.subarray(he,Ie),X),Ae},K.prototype.fill=function(J,X,he,Ie){if(typeof J=="string"){if(typeof X=="string"?(Ie=X,X=0,he=this.length):typeof he=="string"&&(Ie=he,he=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!K.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(J.length===1){const Ne=J.charCodeAt(0);(Ie==="utf8"&&Ne<128||Ie==="latin1")&&(J=Ne)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(X<0||this.length<X||this.length<he)throw new RangeError("Out of range index");if(he<=X)return this;X=X>>>0,he=he===void 0?this.length:he>>>0,J||(J=0);let Ae;if(typeof J=="number")for(Ae=X;Ae<he;++Ae)this[Ae]=J;else{const Ne=K.isBuffer(J)?J:K.from(J,Ie),dn=Ne.length;if(dn===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Ae=0;Ae<he-X;++Ae)this[Ae+X]=Ne[Ae%dn]}return this};const ut={};function re(ae,J,X){ut[ae]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(ae,J){return`The "${ae}" argument must be of type number. Received type ${typeof J}`},TypeError),re("ERR_OUT_OF_RANGE",function(ae,J,X){let he=`The value of "${ae}" is out of range.`,Ie=X;return Number.isInteger(X)&&Math.abs(X)>2**32?Ie=j(String(X)):typeof X=="bigint"&&(Ie=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(Ie=j(Ie)),Ie+="n"),he+=` It must be ${J}. Received ${Ie}`,he},RangeError);function j(ae){let J="",X=ae.length;const he=ae[0]==="-"?1:0;for(;X>=he+4;X-=3)J=`_${ae.slice(X-3,X)}${J}`;return`${ae.slice(0,X)}${J}`}function q(ae,J,X){ve(J,"offset"),(ae[J]===void 0||ae[J+X]===void 0)&&ye(J,ae.length-(X+1))}function ue(ae,J,X,he,Ie,Ae){if(ae>X||ae<J){const Ne=typeof J=="bigint"?"n":"";let dn;throw J===0||J===BigInt(0)?dn=`>= 0${Ne} and < 2${Ne} ** ${(Ae+1)*8}${Ne}`:dn=`>= -(2${Ne} ** ${(Ae+1)*8-1}${Ne}) and < 2 ** ${(Ae+1)*8-1}${Ne}`,new ut.ERR_OUT_OF_RANGE("value",dn,ae)}q(he,Ie,Ae)}function ve(ae,J){if(typeof ae!="number")throw new ut.ERR_INVALID_ARG_TYPE(J,"number",ae)}function ye(ae,J,X){throw Math.floor(ae)!==ae?(ve(ae,X),new ut.ERR_OUT_OF_RANGE("offset","an integer",ae)):J<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,ae)}const le=/[^+/0-9A-Za-z-_]/g;function Xe(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(le,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function de(ae,J){J=J||1/0;let X;const he=ae.length;let Ie=null;const Ae=[];for(let Ne=0;Ne<he;++Ne){if(X=ae.charCodeAt(Ne),X>55295&&X<57344){if(!Ie){if(X>56319){(J-=3)>-1&&Ae.push(239,191,189);continue}else if(Ne+1===he){(J-=3)>-1&&Ae.push(239,191,189);continue}Ie=X;continue}if(X<56320){(J-=3)>-1&&Ae.push(239,191,189),Ie=X;continue}X=(Ie-55296<<10|X-56320)+65536}else Ie&&(J-=3)>-1&&Ae.push(239,191,189);if(Ie=null,X<128){if((J-=1)<0)break;Ae.push(X)}else if(X<2048){if((J-=2)<0)break;Ae.push(X>>6|192,X&63|128)}else if(X<65536){if((J-=3)<0)break;Ae.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((J-=4)<0)break;Ae.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return Ae}function Re(ae){const J=[];for(let X=0;X<ae.length;++X)J.push(ae.charCodeAt(X)&255);return J}function Ue(ae,J){let X,he,Ie;const Ae=[];for(let Ne=0;Ne<ae.length&&!((J-=2)<0);++Ne)X=ae.charCodeAt(Ne),he=X>>8,Ie=X%256,Ae.push(Ie),Ae.push(he);return Ae}function Me(ae){return k.toByteArray(Xe(ae))}function qe(ae,J,X,he){let Ie;for(Ie=0;Ie<he&&!(Ie+X>=J.length||Ie>=ae.length);++Ie)J[Ie+X]=ae[Ie];return Ie}function Rt(ae,J){return ae instanceof J||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===J.name}function ct(ae){return ae!==ae}const gt=(function(){const ae="0123456789abcdef",J=new Array(256);for(let X=0;X<16;++X){const he=X*16;for(let Ie=0;Ie<16;++Ie)J[he+Ie]=ae[X]+ae[Ie]}return J})();function Sn(ae){return typeof BigInt>"u"?ht:ae}function ht(){throw new Error("BigInt not supported")}})(e);const C=e.Buffer;r.Blob=e.Blob,r.BlobOptions=e.BlobOptions,r.Buffer=e.Buffer,r.File=e.File,r.FileOptions=e.FileOptions,r.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,r.SlowBuffer=e.SlowBuffer,r.TranscodeEncoding=e.TranscodeEncoding,r.atob=e.atob,r.btoa=e.btoa,r.constants=e.constants,r.default=C,r.isAscii=e.isAscii,r.isUtf8=e.isUtf8,r.kMaxLength=e.kMaxLength,r.kStringMaxLength=e.kStringMaxLength,r.resolveObjectURL=e.resolveObjectURL,r.transcode=e.transcode})(IS)),IS}var i8=Qw.exports,K2;function s8(){return K2||(K2=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=A0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,P,I=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)P=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)P=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,P=0,I;if(M==="be")for(R=a.length-1;R>=p;R-=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8;else{var y=a.length-p;for(R=y%2===0?p+1:p;R<a.length;R+=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,P=Math.min(E.length,p),I=a;I<P;I++){var y=E.charCodeAt(I)-48;R*=M,y>=49?T=y-49+10:y>=17?T=y-17+10:T=y,n(y>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var P=a.length-M,I=P%R,y=Math.min(P,P-I)+M,u=0,S=M;S<y;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(I!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<I;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,P=0;P<this.length;P++){var I=this.words[P],y=((I<<R|T)&16777215).toString(16);T=I>>>24-R&16777215,R+=2,R>=26&&(R-=26,P--),T!==0||P!==this.length-1?M=_[6-y.length]+y+M:M=y+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var L=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var P=L(a,T),I=p==="le"?"LE":"BE";return this["_toArrayLike"+I](P,R),P},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M++]=I&255,M<a.length&&(a[M++]=I>>8&255),M<a.length&&(a[M++]=I>>16&255),P===6?(M<a.length&&(a[M++]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M--]=I&255,M>=0&&(a[M--]=I>>8&255),M>=0&&(a[M--]=I>>16&255),P===6?(M>=0&&(a[M--]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function N(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,P=0;P<R.length;P++)p=(M.words[P]|0)+(R.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;for(;T!==0&&P<M.length;P++)p=(M.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;P<M.length;P++)this.words[P]=M.words[P];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var P=0,I=0;I<T.length;I++)p=(R.words[I]|0)-(T.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;for(;P!==0&&I<R.length;I++)p=(R.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;if(P===0&&I<R.length&&R!==this)for(;I<R.length;I++)this.words[I]=R.words[I];return this.length=Math.max(this.length,I),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,P=R*T,I=P&67108863,y=P/67108864|0;p.words[0]=I;for(var u=1;u<M;u++){for(var S=y>>>26,W=y&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,P=R*T+W,S+=P/67108864|0,W=P&67108863}p.words[u]=W|0,y=S|0}return y!==0?p.words[u]=y|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,P=M.words,I=0,y,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,be=me>>>13,wt=R[2]|0,Ze=wt&8191,Pe=wt>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,yt=R[4]|0,He=yt&8191,nt=yt>>>13,Nt=R[5]|0,fe=Nt&8191,oe=Nt>>>13,Oe=R[6]|0,Te=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,Et=R[8]|0,ut=Et&8191,re=Et>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,ve=T[0]|0,ye=ve&8191,le=ve>>>13,Xe=T[1]|0,de=Xe&8191,Re=Xe>>>13,Ue=T[2]|0,Me=Ue&8191,qe=Ue>>>13,Rt=T[3]|0,ct=Rt&8191,gt=Rt>>>13,Sn=T[4]|0,ht=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Ae=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,mt=dn&8191,_t=dn>>>13,Dn=T[8]|0,vt=Dn&8191,Lt=Dn>>>13,Nr=T[9]|0,Ot=Nr&8191,kt=Nr>>>13;M.negative=a.negative^p.negative,M.length=19,y=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,y=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(be,ye)|0,S=Math.imul(be,le),y=y+Math.imul($,de)|0,u=u+Math.imul($,Re)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Re)|0;var De=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,y=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),y=y+Math.imul(_e,de)|0,u=u+Math.imul(_e,Re)|0,u=u+Math.imul(be,de)|0,S=S+Math.imul(be,Re)|0,y=y+Math.imul($,Me)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Me)|0,S=S+Math.imul(se,qe)|0;var $e=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,y=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),y=y+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Re)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Re)|0,y=y+Math.imul(_e,Me)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(be,Me)|0,S=S+Math.imul(be,qe)|0,y=y+Math.imul($,ct)|0,u=u+Math.imul($,gt)|0,u=u+Math.imul(se,ct)|0,S=S+Math.imul(se,gt)|0;var Qe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),y=y+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Re)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Re)|0,y=y+Math.imul(Ze,Me)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Me)|0,S=S+Math.imul(Pe,qe)|0,y=y+Math.imul(_e,ct)|0,u=u+Math.imul(_e,gt)|0,u=u+Math.imul(be,ct)|0,S=S+Math.imul(be,gt)|0,y=y+Math.imul($,ht)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,ht)|0,S=S+Math.imul(se,ae)|0;var Be=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,y=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),y=y+Math.imul(He,de)|0,u=u+Math.imul(He,Re)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Re)|0,y=y+Math.imul(Ge,Me)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Me)|0,S=S+Math.imul(je,qe)|0,y=y+Math.imul(Ze,ct)|0,u=u+Math.imul(Ze,gt)|0,u=u+Math.imul(Pe,ct)|0,S=S+Math.imul(Pe,gt)|0,y=y+Math.imul(_e,ht)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(be,ht)|0,S=S+Math.imul(be,ae)|0,y=y+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var At=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,y=Math.imul(Te,ye),u=Math.imul(Te,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),y=y+Math.imul(fe,de)|0,u=u+Math.imul(fe,Re)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Re)|0,y=y+Math.imul(He,Me)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Me)|0,S=S+Math.imul(nt,qe)|0,y=y+Math.imul(Ge,ct)|0,u=u+Math.imul(Ge,gt)|0,u=u+Math.imul(je,ct)|0,S=S+Math.imul(je,gt)|0,y=y+Math.imul(Ze,ht)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,ht)|0,S=S+Math.imul(Pe,ae)|0,y=y+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(be,X)|0,S=S+Math.imul(be,he)|0,y=y+Math.imul($,Ae)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Ae)|0,S=S+Math.imul(se,Ne)|0;var Ft=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,y=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),y=y+Math.imul(Te,de)|0,u=u+Math.imul(Te,Re)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Re)|0,y=y+Math.imul(fe,Me)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Me)|0,S=S+Math.imul(oe,qe)|0,y=y+Math.imul(He,ct)|0,u=u+Math.imul(He,gt)|0,u=u+Math.imul(nt,ct)|0,S=S+Math.imul(nt,gt)|0,y=y+Math.imul(Ge,ht)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,ht)|0,S=S+Math.imul(je,ae)|0,y=y+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,y=y+Math.imul(_e,Ae)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ne)|0,y=y+Math.imul($,mt)|0,u=u+Math.imul($,_t)|0,u=u+Math.imul(se,mt)|0,S=S+Math.imul(se,_t)|0;var bt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(bt>>>26)|0,bt&=67108863,y=Math.imul(ut,ye),u=Math.imul(ut,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),y=y+Math.imul(et,de)|0,u=u+Math.imul(et,Re)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Re)|0,y=y+Math.imul(Te,Me)|0,u=u+Math.imul(Te,qe)|0,u=u+Math.imul(Le,Me)|0,S=S+Math.imul(Le,qe)|0,y=y+Math.imul(fe,ct)|0,u=u+Math.imul(fe,gt)|0,u=u+Math.imul(oe,ct)|0,S=S+Math.imul(oe,gt)|0,y=y+Math.imul(He,ht)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,ht)|0,S=S+Math.imul(nt,ae)|0,y=y+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,y=y+Math.imul(Ze,Ae)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Ae)|0,S=S+Math.imul(Pe,Ne)|0,y=y+Math.imul(_e,mt)|0,u=u+Math.imul(_e,_t)|0,u=u+Math.imul(be,mt)|0,S=S+Math.imul(be,_t)|0,y=y+Math.imul($,vt)|0,u=u+Math.imul($,Lt)|0,u=u+Math.imul(se,vt)|0,S=S+Math.imul(se,Lt)|0;var Vt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),y=y+Math.imul(ut,de)|0,u=u+Math.imul(ut,Re)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Re)|0,y=y+Math.imul(et,Me)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Me)|0,S=S+Math.imul(Ye,qe)|0,y=y+Math.imul(Te,ct)|0,u=u+Math.imul(Te,gt)|0,u=u+Math.imul(Le,ct)|0,S=S+Math.imul(Le,gt)|0,y=y+Math.imul(fe,ht)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,ht)|0,S=S+Math.imul(oe,ae)|0,y=y+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,y=y+Math.imul(Ge,Ae)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Ae)|0,S=S+Math.imul(je,Ne)|0,y=y+Math.imul(Ze,mt)|0,u=u+Math.imul(Ze,_t)|0,u=u+Math.imul(Pe,mt)|0,S=S+Math.imul(Pe,_t)|0,y=y+Math.imul(_e,vt)|0,u=u+Math.imul(_e,Lt)|0,u=u+Math.imul(be,vt)|0,S=S+Math.imul(be,Lt)|0,y=y+Math.imul($,Ot)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,Ot)|0,S=S+Math.imul(se,kt)|0;var nn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(nn>>>26)|0,nn&=67108863,y=Math.imul(q,de),u=Math.imul(q,Re),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Re),y=y+Math.imul(ut,Me)|0,u=u+Math.imul(ut,qe)|0,u=u+Math.imul(re,Me)|0,S=S+Math.imul(re,qe)|0,y=y+Math.imul(et,ct)|0,u=u+Math.imul(et,gt)|0,u=u+Math.imul(Ye,ct)|0,S=S+Math.imul(Ye,gt)|0,y=y+Math.imul(Te,ht)|0,u=u+Math.imul(Te,ae)|0,u=u+Math.imul(Le,ht)|0,S=S+Math.imul(Le,ae)|0,y=y+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,y=y+Math.imul(He,Ae)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Ae)|0,S=S+Math.imul(nt,Ne)|0,y=y+Math.imul(Ge,mt)|0,u=u+Math.imul(Ge,_t)|0,u=u+Math.imul(je,mt)|0,S=S+Math.imul(je,_t)|0,y=y+Math.imul(Ze,vt)|0,u=u+Math.imul(Ze,Lt)|0,u=u+Math.imul(Pe,vt)|0,S=S+Math.imul(Pe,Lt)|0,y=y+Math.imul(_e,Ot)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(be,Ot)|0,S=S+Math.imul(be,kt)|0;var sn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(sn>>>26)|0,sn&=67108863,y=Math.imul(q,Me),u=Math.imul(q,qe),u=u+Math.imul(ue,Me)|0,S=Math.imul(ue,qe),y=y+Math.imul(ut,ct)|0,u=u+Math.imul(ut,gt)|0,u=u+Math.imul(re,ct)|0,S=S+Math.imul(re,gt)|0,y=y+Math.imul(et,ht)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,ht)|0,S=S+Math.imul(Ye,ae)|0,y=y+Math.imul(Te,X)|0,u=u+Math.imul(Te,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,y=y+Math.imul(fe,Ae)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Ae)|0,S=S+Math.imul(oe,Ne)|0,y=y+Math.imul(He,mt)|0,u=u+Math.imul(He,_t)|0,u=u+Math.imul(nt,mt)|0,S=S+Math.imul(nt,_t)|0,y=y+Math.imul(Ge,vt)|0,u=u+Math.imul(Ge,Lt)|0,u=u+Math.imul(je,vt)|0,S=S+Math.imul(je,Lt)|0,y=y+Math.imul(Ze,Ot)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,Ot)|0,S=S+Math.imul(Pe,kt)|0;var qt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(qt>>>26)|0,qt&=67108863,y=Math.imul(q,ct),u=Math.imul(q,gt),u=u+Math.imul(ue,ct)|0,S=Math.imul(ue,gt),y=y+Math.imul(ut,ht)|0,u=u+Math.imul(ut,ae)|0,u=u+Math.imul(re,ht)|0,S=S+Math.imul(re,ae)|0,y=y+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,y=y+Math.imul(Te,Ae)|0,u=u+Math.imul(Te,Ne)|0,u=u+Math.imul(Le,Ae)|0,S=S+Math.imul(Le,Ne)|0,y=y+Math.imul(fe,mt)|0,u=u+Math.imul(fe,_t)|0,u=u+Math.imul(oe,mt)|0,S=S+Math.imul(oe,_t)|0,y=y+Math.imul(He,vt)|0,u=u+Math.imul(He,Lt)|0,u=u+Math.imul(nt,vt)|0,S=S+Math.imul(nt,Lt)|0,y=y+Math.imul(Ge,Ot)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,Ot)|0,S=S+Math.imul(je,kt)|0;var Tn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(q,ht),u=Math.imul(q,ae),u=u+Math.imul(ue,ht)|0,S=Math.imul(ue,ae),y=y+Math.imul(ut,X)|0,u=u+Math.imul(ut,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,y=y+Math.imul(et,Ae)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Ae)|0,S=S+Math.imul(Ye,Ne)|0,y=y+Math.imul(Te,mt)|0,u=u+Math.imul(Te,_t)|0,u=u+Math.imul(Le,mt)|0,S=S+Math.imul(Le,_t)|0,y=y+Math.imul(fe,vt)|0,u=u+Math.imul(fe,Lt)|0,u=u+Math.imul(oe,vt)|0,S=S+Math.imul(oe,Lt)|0,y=y+Math.imul(He,Ot)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,Ot)|0,S=S+Math.imul(nt,kt)|0;var Rn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,y=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),y=y+Math.imul(ut,Ae)|0,u=u+Math.imul(ut,Ne)|0,u=u+Math.imul(re,Ae)|0,S=S+Math.imul(re,Ne)|0,y=y+Math.imul(et,mt)|0,u=u+Math.imul(et,_t)|0,u=u+Math.imul(Ye,mt)|0,S=S+Math.imul(Ye,_t)|0,y=y+Math.imul(Te,vt)|0,u=u+Math.imul(Te,Lt)|0,u=u+Math.imul(Le,vt)|0,S=S+Math.imul(Le,Lt)|0,y=y+Math.imul(fe,Ot)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,Ot)|0,S=S+Math.imul(oe,kt)|0;var En=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,y=Math.imul(q,Ae),u=Math.imul(q,Ne),u=u+Math.imul(ue,Ae)|0,S=Math.imul(ue,Ne),y=y+Math.imul(ut,mt)|0,u=u+Math.imul(ut,_t)|0,u=u+Math.imul(re,mt)|0,S=S+Math.imul(re,_t)|0,y=y+Math.imul(et,vt)|0,u=u+Math.imul(et,Lt)|0,u=u+Math.imul(Ye,vt)|0,S=S+Math.imul(Ye,Lt)|0,y=y+Math.imul(Te,Ot)|0,u=u+Math.imul(Te,kt)|0,u=u+Math.imul(Le,Ot)|0,S=S+Math.imul(Le,kt)|0;var un=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,y=Math.imul(q,mt),u=Math.imul(q,_t),u=u+Math.imul(ue,mt)|0,S=Math.imul(ue,_t),y=y+Math.imul(ut,vt)|0,u=u+Math.imul(ut,Lt)|0,u=u+Math.imul(re,vt)|0,S=S+Math.imul(re,Lt)|0,y=y+Math.imul(et,Ot)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,Ot)|0,S=S+Math.imul(Ye,kt)|0;var $t=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,y=Math.imul(q,vt),u=Math.imul(q,Lt),u=u+Math.imul(ue,vt)|0,S=Math.imul(ue,Lt),y=y+Math.imul(ut,Ot)|0,u=u+Math.imul(ut,kt)|0,u=u+Math.imul(re,Ot)|0,S=S+Math.imul(re,kt)|0;var Dt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,y=Math.imul(q,Ot),u=Math.imul(q,kt),u=u+Math.imul(ue,Ot)|0,S=Math.imul(ue,kt);var Mn=(I+y|0)+((u&8191)<<13)|0;return I=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,P[0]=pe,P[1]=De,P[2]=$e,P[3]=Qe,P[4]=Be,P[5]=At,P[6]=Ft,P[7]=bt,P[8]=Vt,P[9]=nn,P[10]=sn,P[11]=qt,P[12]=Tn,P[13]=Rn,P[14]=En,P[15]=un,P[16]=$t,P[17]=Dt,P[18]=Mn,I!==0&&(P[19]=I,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var P=R;R=0;for(var I=M&67108863,y=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=y;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;P=P+(se/67108864|0)|0,me=me+I|0,I=me&67108863,P=P+(me>>>26)|0,R+=P>>>26,P&=67108863}p.words[T]=I,M=P,P=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,P=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=P>>>26,this.words[R]=P&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=N(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var P=0;for(T=0;T<this.length;T++){var I=this.words[T]&R,y=(this.words[T]|0)-I<<p;this.words[T]=y|P,P=I>>>26-p}P&&(this.words[T]=P,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,P=Math.min((a-T)/26,this.length),I=67108863^67108863>>>T<<T,y=M;if(R-=P,R=Math.max(0,R),y){for(var u=0;u<P;u++)y.words[u]=this.words[u];y.length=P}if(P!==0)if(this.length>P)for(this.length-=P,u=0;u<this.length;u++)this.words[u]=this.words[u+P];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&I}return y&&S!==0&&(y.words[y.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var P,I=0;for(T=0;T<a.length;T++){P=(this.words[T+M]|0)+I;var y=(a.words[T]|0)*p;P-=y&67108863,I=(P>>26)-(y/67108864|0),this.words[T+M]=P&67108863}for(;T<this.length-M;T++)P=(this.words[T+M]|0)+I,I=P>>26,this.words[T+M]=P&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,T=0;T<this.length;T++)P=-(this.words[T]|0)+I,I=P>>26,this.words[T]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,P=T.words[T.length-1]|0,I=this._countBits(P);M=26-I,M!==0&&(T=T.ushln(M),R.iushln(M),P=T.words[T.length-1]|0);var y=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=y+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,y);W.negative===0&&(R=W,u&&(u.words[y]=1));for(var $=y-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/P|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,P;return this.negative!==0&&a.negative===0?(P=this.neg().divmod(a,p),p!=="mod"&&(R=P.div.neg()),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(P=this.divmod(a.neg(),p),p!=="mod"&&(R=P.div.neg()),{div:R,mod:P.mod}):(this.negative&a.negative)!==0?(P=this.neg().divmod(a.neg(),p),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:P.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),P=M.cmp(R);return P<0||T===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=new s(0),I=new s(1),y=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++y;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(P.isOdd()||I.isOdd())&&(P.iadd(u),I.isub(S)),P.iushrn(1),I.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(P),T.isub(I)):(M.isub(p),P.isub(R),I.isub(T))}return{a:P,b:I,gcd:M.iushln(y)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var I=0,y=1;(p.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(p.iushrn(I);I-- >0;)R.isOdd()&&R.iadd(P),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(P),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var P=p;p=M,M=P}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,P=M;T!==0&&P<this.length;P++){var I=this.words[P]|0;I+=T,T=I>>>26,I&=67108863,this.words[P]=I}return T!==0&&(this.words[P]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var P=a.words[9];for(p.words[p.length++]=P&M,T=10;T<a.length;T++){var I=a.words[T]|0;a.words[T-10]=(I&M)<<4|P>>>22,P=I}P>>>=22,a.words[T-10]=P,P===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var P=new s(1).toRed(this),I=P.redNeg(),y=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,y).cmp(I)!==0;)u.redIAdd(I);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(P)!==0;){for(var me=$,_e=0;me.cmp(P)!==0;_e++)me=me.redSqr();n(_e<se);var be=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(be),S=be.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var P=R[0],I=0,y=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(P!==R[0]&&(P=this.sqr(P)),$===0&&I===0){y=0;continue}I<<=1,I|=$,y++,!(y!==M&&(T!==0||W!==0))&&(P=this.mul(P,R[I]),y=0,I=0)}u=26}return P},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,i8)})(Qw)),Qw.exports}var o8=s8();const Y2=Ya(o8);var zv={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var X2;function UA(){return X2||(X2=1,(function(r,e){var t=A0(),n=t.Buffer;function i(o,l){for(var c in o)l[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,l,c){return n(o,l,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,l,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,l,c)},s.alloc=function(o,l,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var d=n(o);return l!==void 0?typeof c=="string"?d.fill(l,c):d.fill(l):d.fill(0),d},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(zv,zv.exports)),zv.exports}var NS,$2;function a8(){if($2)return NS;$2=1;var r=UA().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),w=Math.log(256)/Math.log(c);function _(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=r.from(L)),!r.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var N=0,C=0,D=0,k=L.length;D!==k&&L[D]===0;)D++,N++;for(var F=(k-D)*w+1>>>0,Q=new Uint8Array(F);D!==k;){for(var G=L[D],Y=0,ee=F-1;(G!==0||Y<C)&&ee!==-1;ee--,Y++)G+=256*Q[ee]>>>0,Q[ee]=G%c>>>0,G=G/c>>>0;if(G!==0)throw new Error("Non-zero carry");C=Y,D++}for(var te=F-C;te!==F&&Q[te]===0;)te++;for(var U=d.repeat(N);te<F;++te)U+=t.charAt(Q[te]);return U}function x(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return r.alloc(0);for(var N=0,C=0,D=0;L[N]===d;)C++,N++;for(var k=(L.length-N)*h+1>>>0,F=new Uint8Array(k);N<L.length;){var Q=L.charCodeAt(N);if(Q>255)return;var G=n[Q];if(G===255)return;for(var Y=0,ee=k-1;(G!==0||Y<D)&&ee!==-1;ee--,Y++)G+=c*F[ee]>>>0,F[ee]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");D=Y,N++}for(var te=k-D;te!==k&&F[te]===0;)te++;var U=r.allocUnsafe(C+(k-te));U.fill(0,0,C);for(var V=C;te!==k;)U[V++]=F[te++];return U}function A(L){var N=x(L);if(N)return N;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:x,decode:A}}return NS=e,NS}var PS,Z2;function l8(){if(Z2)return PS;Z2=1;var r=a8(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return PS=r(e),PS}var u8=l8();const fs=Ya(u8),Q2=fk;var Mr={},Jw={exports:{}},c8=Jw.exports,J2;function f8(){return J2||(J2=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=A0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,P,I=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)P=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)P=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,P=0,I;if(M==="be")for(R=a.length-1;R>=p;R-=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8;else{var y=a.length-p;for(R=y%2===0?p+1:p;R<a.length;R+=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,P=Math.min(E.length,p),I=a;I<P;I++){var y=E.charCodeAt(I)-48;R*=M,y>=49?T=y-49+10:y>=17?T=y-17+10:T=y,n(y>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var P=a.length-M,I=P%R,y=Math.min(P,P-I)+M,u=0,S=M;S<y;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(I!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<I;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,P=0;P<this.length;P++){var I=this.words[P],y=((I<<R|T)&16777215).toString(16);T=I>>>24-R&16777215,R+=2,R>=26&&(R-=26,P--),T!==0||P!==this.length-1?M=_[6-y.length]+y+M:M=y+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var L=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var P=L(a,T),I=p==="le"?"LE":"BE";return this["_toArrayLike"+I](P,R),P},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M++]=I&255,M<a.length&&(a[M++]=I>>8&255),M<a.length&&(a[M++]=I>>16&255),P===6?(M<a.length&&(a[M++]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M--]=I&255,M>=0&&(a[M--]=I>>8&255),M>=0&&(a[M--]=I>>16&255),P===6?(M>=0&&(a[M--]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function N(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,P=0;P<R.length;P++)p=(M.words[P]|0)+(R.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;for(;T!==0&&P<M.length;P++)p=(M.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;P<M.length;P++)this.words[P]=M.words[P];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var P=0,I=0;I<T.length;I++)p=(R.words[I]|0)-(T.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;for(;P!==0&&I<R.length;I++)p=(R.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;if(P===0&&I<R.length&&R!==this)for(;I<R.length;I++)this.words[I]=R.words[I];return this.length=Math.max(this.length,I),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,P=R*T,I=P&67108863,y=P/67108864|0;p.words[0]=I;for(var u=1;u<M;u++){for(var S=y>>>26,W=y&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,P=R*T+W,S+=P/67108864|0,W=P&67108863}p.words[u]=W|0,y=S|0}return y!==0?p.words[u]=y|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,P=M.words,I=0,y,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,be=me>>>13,wt=R[2]|0,Ze=wt&8191,Pe=wt>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,yt=R[4]|0,He=yt&8191,nt=yt>>>13,Nt=R[5]|0,fe=Nt&8191,oe=Nt>>>13,Oe=R[6]|0,Te=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,Et=R[8]|0,ut=Et&8191,re=Et>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,ve=T[0]|0,ye=ve&8191,le=ve>>>13,Xe=T[1]|0,de=Xe&8191,Re=Xe>>>13,Ue=T[2]|0,Me=Ue&8191,qe=Ue>>>13,Rt=T[3]|0,ct=Rt&8191,gt=Rt>>>13,Sn=T[4]|0,ht=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Ae=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,mt=dn&8191,_t=dn>>>13,Dn=T[8]|0,vt=Dn&8191,Lt=Dn>>>13,Nr=T[9]|0,Ot=Nr&8191,kt=Nr>>>13;M.negative=a.negative^p.negative,M.length=19,y=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,y=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(be,ye)|0,S=Math.imul(be,le),y=y+Math.imul($,de)|0,u=u+Math.imul($,Re)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Re)|0;var De=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,y=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),y=y+Math.imul(_e,de)|0,u=u+Math.imul(_e,Re)|0,u=u+Math.imul(be,de)|0,S=S+Math.imul(be,Re)|0,y=y+Math.imul($,Me)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Me)|0,S=S+Math.imul(se,qe)|0;var $e=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,y=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),y=y+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Re)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Re)|0,y=y+Math.imul(_e,Me)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(be,Me)|0,S=S+Math.imul(be,qe)|0,y=y+Math.imul($,ct)|0,u=u+Math.imul($,gt)|0,u=u+Math.imul(se,ct)|0,S=S+Math.imul(se,gt)|0;var Qe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),y=y+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Re)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Re)|0,y=y+Math.imul(Ze,Me)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Me)|0,S=S+Math.imul(Pe,qe)|0,y=y+Math.imul(_e,ct)|0,u=u+Math.imul(_e,gt)|0,u=u+Math.imul(be,ct)|0,S=S+Math.imul(be,gt)|0,y=y+Math.imul($,ht)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,ht)|0,S=S+Math.imul(se,ae)|0;var Be=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,y=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),y=y+Math.imul(He,de)|0,u=u+Math.imul(He,Re)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Re)|0,y=y+Math.imul(Ge,Me)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Me)|0,S=S+Math.imul(je,qe)|0,y=y+Math.imul(Ze,ct)|0,u=u+Math.imul(Ze,gt)|0,u=u+Math.imul(Pe,ct)|0,S=S+Math.imul(Pe,gt)|0,y=y+Math.imul(_e,ht)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(be,ht)|0,S=S+Math.imul(be,ae)|0,y=y+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var At=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,y=Math.imul(Te,ye),u=Math.imul(Te,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),y=y+Math.imul(fe,de)|0,u=u+Math.imul(fe,Re)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Re)|0,y=y+Math.imul(He,Me)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Me)|0,S=S+Math.imul(nt,qe)|0,y=y+Math.imul(Ge,ct)|0,u=u+Math.imul(Ge,gt)|0,u=u+Math.imul(je,ct)|0,S=S+Math.imul(je,gt)|0,y=y+Math.imul(Ze,ht)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,ht)|0,S=S+Math.imul(Pe,ae)|0,y=y+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(be,X)|0,S=S+Math.imul(be,he)|0,y=y+Math.imul($,Ae)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Ae)|0,S=S+Math.imul(se,Ne)|0;var Ft=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,y=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),y=y+Math.imul(Te,de)|0,u=u+Math.imul(Te,Re)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Re)|0,y=y+Math.imul(fe,Me)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Me)|0,S=S+Math.imul(oe,qe)|0,y=y+Math.imul(He,ct)|0,u=u+Math.imul(He,gt)|0,u=u+Math.imul(nt,ct)|0,S=S+Math.imul(nt,gt)|0,y=y+Math.imul(Ge,ht)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,ht)|0,S=S+Math.imul(je,ae)|0,y=y+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,y=y+Math.imul(_e,Ae)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ne)|0,y=y+Math.imul($,mt)|0,u=u+Math.imul($,_t)|0,u=u+Math.imul(se,mt)|0,S=S+Math.imul(se,_t)|0;var bt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(bt>>>26)|0,bt&=67108863,y=Math.imul(ut,ye),u=Math.imul(ut,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),y=y+Math.imul(et,de)|0,u=u+Math.imul(et,Re)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Re)|0,y=y+Math.imul(Te,Me)|0,u=u+Math.imul(Te,qe)|0,u=u+Math.imul(Le,Me)|0,S=S+Math.imul(Le,qe)|0,y=y+Math.imul(fe,ct)|0,u=u+Math.imul(fe,gt)|0,u=u+Math.imul(oe,ct)|0,S=S+Math.imul(oe,gt)|0,y=y+Math.imul(He,ht)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,ht)|0,S=S+Math.imul(nt,ae)|0,y=y+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,y=y+Math.imul(Ze,Ae)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Ae)|0,S=S+Math.imul(Pe,Ne)|0,y=y+Math.imul(_e,mt)|0,u=u+Math.imul(_e,_t)|0,u=u+Math.imul(be,mt)|0,S=S+Math.imul(be,_t)|0,y=y+Math.imul($,vt)|0,u=u+Math.imul($,Lt)|0,u=u+Math.imul(se,vt)|0,S=S+Math.imul(se,Lt)|0;var Vt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),y=y+Math.imul(ut,de)|0,u=u+Math.imul(ut,Re)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Re)|0,y=y+Math.imul(et,Me)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Me)|0,S=S+Math.imul(Ye,qe)|0,y=y+Math.imul(Te,ct)|0,u=u+Math.imul(Te,gt)|0,u=u+Math.imul(Le,ct)|0,S=S+Math.imul(Le,gt)|0,y=y+Math.imul(fe,ht)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,ht)|0,S=S+Math.imul(oe,ae)|0,y=y+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,y=y+Math.imul(Ge,Ae)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Ae)|0,S=S+Math.imul(je,Ne)|0,y=y+Math.imul(Ze,mt)|0,u=u+Math.imul(Ze,_t)|0,u=u+Math.imul(Pe,mt)|0,S=S+Math.imul(Pe,_t)|0,y=y+Math.imul(_e,vt)|0,u=u+Math.imul(_e,Lt)|0,u=u+Math.imul(be,vt)|0,S=S+Math.imul(be,Lt)|0,y=y+Math.imul($,Ot)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,Ot)|0,S=S+Math.imul(se,kt)|0;var nn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(nn>>>26)|0,nn&=67108863,y=Math.imul(q,de),u=Math.imul(q,Re),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Re),y=y+Math.imul(ut,Me)|0,u=u+Math.imul(ut,qe)|0,u=u+Math.imul(re,Me)|0,S=S+Math.imul(re,qe)|0,y=y+Math.imul(et,ct)|0,u=u+Math.imul(et,gt)|0,u=u+Math.imul(Ye,ct)|0,S=S+Math.imul(Ye,gt)|0,y=y+Math.imul(Te,ht)|0,u=u+Math.imul(Te,ae)|0,u=u+Math.imul(Le,ht)|0,S=S+Math.imul(Le,ae)|0,y=y+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,y=y+Math.imul(He,Ae)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Ae)|0,S=S+Math.imul(nt,Ne)|0,y=y+Math.imul(Ge,mt)|0,u=u+Math.imul(Ge,_t)|0,u=u+Math.imul(je,mt)|0,S=S+Math.imul(je,_t)|0,y=y+Math.imul(Ze,vt)|0,u=u+Math.imul(Ze,Lt)|0,u=u+Math.imul(Pe,vt)|0,S=S+Math.imul(Pe,Lt)|0,y=y+Math.imul(_e,Ot)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(be,Ot)|0,S=S+Math.imul(be,kt)|0;var sn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(sn>>>26)|0,sn&=67108863,y=Math.imul(q,Me),u=Math.imul(q,qe),u=u+Math.imul(ue,Me)|0,S=Math.imul(ue,qe),y=y+Math.imul(ut,ct)|0,u=u+Math.imul(ut,gt)|0,u=u+Math.imul(re,ct)|0,S=S+Math.imul(re,gt)|0,y=y+Math.imul(et,ht)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,ht)|0,S=S+Math.imul(Ye,ae)|0,y=y+Math.imul(Te,X)|0,u=u+Math.imul(Te,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,y=y+Math.imul(fe,Ae)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Ae)|0,S=S+Math.imul(oe,Ne)|0,y=y+Math.imul(He,mt)|0,u=u+Math.imul(He,_t)|0,u=u+Math.imul(nt,mt)|0,S=S+Math.imul(nt,_t)|0,y=y+Math.imul(Ge,vt)|0,u=u+Math.imul(Ge,Lt)|0,u=u+Math.imul(je,vt)|0,S=S+Math.imul(je,Lt)|0,y=y+Math.imul(Ze,Ot)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,Ot)|0,S=S+Math.imul(Pe,kt)|0;var qt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(qt>>>26)|0,qt&=67108863,y=Math.imul(q,ct),u=Math.imul(q,gt),u=u+Math.imul(ue,ct)|0,S=Math.imul(ue,gt),y=y+Math.imul(ut,ht)|0,u=u+Math.imul(ut,ae)|0,u=u+Math.imul(re,ht)|0,S=S+Math.imul(re,ae)|0,y=y+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,y=y+Math.imul(Te,Ae)|0,u=u+Math.imul(Te,Ne)|0,u=u+Math.imul(Le,Ae)|0,S=S+Math.imul(Le,Ne)|0,y=y+Math.imul(fe,mt)|0,u=u+Math.imul(fe,_t)|0,u=u+Math.imul(oe,mt)|0,S=S+Math.imul(oe,_t)|0,y=y+Math.imul(He,vt)|0,u=u+Math.imul(He,Lt)|0,u=u+Math.imul(nt,vt)|0,S=S+Math.imul(nt,Lt)|0,y=y+Math.imul(Ge,Ot)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,Ot)|0,S=S+Math.imul(je,kt)|0;var Tn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(q,ht),u=Math.imul(q,ae),u=u+Math.imul(ue,ht)|0,S=Math.imul(ue,ae),y=y+Math.imul(ut,X)|0,u=u+Math.imul(ut,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,y=y+Math.imul(et,Ae)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Ae)|0,S=S+Math.imul(Ye,Ne)|0,y=y+Math.imul(Te,mt)|0,u=u+Math.imul(Te,_t)|0,u=u+Math.imul(Le,mt)|0,S=S+Math.imul(Le,_t)|0,y=y+Math.imul(fe,vt)|0,u=u+Math.imul(fe,Lt)|0,u=u+Math.imul(oe,vt)|0,S=S+Math.imul(oe,Lt)|0,y=y+Math.imul(He,Ot)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,Ot)|0,S=S+Math.imul(nt,kt)|0;var Rn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,y=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),y=y+Math.imul(ut,Ae)|0,u=u+Math.imul(ut,Ne)|0,u=u+Math.imul(re,Ae)|0,S=S+Math.imul(re,Ne)|0,y=y+Math.imul(et,mt)|0,u=u+Math.imul(et,_t)|0,u=u+Math.imul(Ye,mt)|0,S=S+Math.imul(Ye,_t)|0,y=y+Math.imul(Te,vt)|0,u=u+Math.imul(Te,Lt)|0,u=u+Math.imul(Le,vt)|0,S=S+Math.imul(Le,Lt)|0,y=y+Math.imul(fe,Ot)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,Ot)|0,S=S+Math.imul(oe,kt)|0;var En=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,y=Math.imul(q,Ae),u=Math.imul(q,Ne),u=u+Math.imul(ue,Ae)|0,S=Math.imul(ue,Ne),y=y+Math.imul(ut,mt)|0,u=u+Math.imul(ut,_t)|0,u=u+Math.imul(re,mt)|0,S=S+Math.imul(re,_t)|0,y=y+Math.imul(et,vt)|0,u=u+Math.imul(et,Lt)|0,u=u+Math.imul(Ye,vt)|0,S=S+Math.imul(Ye,Lt)|0,y=y+Math.imul(Te,Ot)|0,u=u+Math.imul(Te,kt)|0,u=u+Math.imul(Le,Ot)|0,S=S+Math.imul(Le,kt)|0;var un=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,y=Math.imul(q,mt),u=Math.imul(q,_t),u=u+Math.imul(ue,mt)|0,S=Math.imul(ue,_t),y=y+Math.imul(ut,vt)|0,u=u+Math.imul(ut,Lt)|0,u=u+Math.imul(re,vt)|0,S=S+Math.imul(re,Lt)|0,y=y+Math.imul(et,Ot)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,Ot)|0,S=S+Math.imul(Ye,kt)|0;var $t=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,y=Math.imul(q,vt),u=Math.imul(q,Lt),u=u+Math.imul(ue,vt)|0,S=Math.imul(ue,Lt),y=y+Math.imul(ut,Ot)|0,u=u+Math.imul(ut,kt)|0,u=u+Math.imul(re,Ot)|0,S=S+Math.imul(re,kt)|0;var Dt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,y=Math.imul(q,Ot),u=Math.imul(q,kt),u=u+Math.imul(ue,Ot)|0,S=Math.imul(ue,kt);var Mn=(I+y|0)+((u&8191)<<13)|0;return I=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,P[0]=pe,P[1]=De,P[2]=$e,P[3]=Qe,P[4]=Be,P[5]=At,P[6]=Ft,P[7]=bt,P[8]=Vt,P[9]=nn,P[10]=sn,P[11]=qt,P[12]=Tn,P[13]=Rn,P[14]=En,P[15]=un,P[16]=$t,P[17]=Dt,P[18]=Mn,I!==0&&(P[19]=I,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var P=R;R=0;for(var I=M&67108863,y=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=y;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;P=P+(se/67108864|0)|0,me=me+I|0,I=me&67108863,P=P+(me>>>26)|0,R+=P>>>26,P&=67108863}p.words[T]=I,M=P,P=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,P=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=P>>>26,this.words[R]=P&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=N(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var P=0;for(T=0;T<this.length;T++){var I=this.words[T]&R,y=(this.words[T]|0)-I<<p;this.words[T]=y|P,P=I>>>26-p}P&&(this.words[T]=P,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,P=Math.min((a-T)/26,this.length),I=67108863^67108863>>>T<<T,y=M;if(R-=P,R=Math.max(0,R),y){for(var u=0;u<P;u++)y.words[u]=this.words[u];y.length=P}if(P!==0)if(this.length>P)for(this.length-=P,u=0;u<this.length;u++)this.words[u]=this.words[u+P];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&I}return y&&S!==0&&(y.words[y.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var P,I=0;for(T=0;T<a.length;T++){P=(this.words[T+M]|0)+I;var y=(a.words[T]|0)*p;P-=y&67108863,I=(P>>26)-(y/67108864|0),this.words[T+M]=P&67108863}for(;T<this.length-M;T++)P=(this.words[T+M]|0)+I,I=P>>26,this.words[T+M]=P&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,T=0;T<this.length;T++)P=-(this.words[T]|0)+I,I=P>>26,this.words[T]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,P=T.words[T.length-1]|0,I=this._countBits(P);M=26-I,M!==0&&(T=T.ushln(M),R.iushln(M),P=T.words[T.length-1]|0);var y=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=y+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,y);W.negative===0&&(R=W,u&&(u.words[y]=1));for(var $=y-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/P|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,P;return this.negative!==0&&a.negative===0?(P=this.neg().divmod(a,p),p!=="mod"&&(R=P.div.neg()),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(P=this.divmod(a.neg(),p),p!=="mod"&&(R=P.div.neg()),{div:R,mod:P.mod}):(this.negative&a.negative)!==0?(P=this.neg().divmod(a.neg(),p),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:P.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),P=M.cmp(R);return P<0||T===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=new s(0),I=new s(1),y=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++y;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(P.isOdd()||I.isOdd())&&(P.iadd(u),I.isub(S)),P.iushrn(1),I.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(P),T.isub(I)):(M.isub(p),P.isub(R),I.isub(T))}return{a:P,b:I,gcd:M.iushln(y)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var I=0,y=1;(p.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(p.iushrn(I);I-- >0;)R.isOdd()&&R.iadd(P),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(P),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var P=p;p=M,M=P}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,P=M;T!==0&&P<this.length;P++){var I=this.words[P]|0;I+=T,T=I>>>26,I&=67108863,this.words[P]=I}return T!==0&&(this.words[P]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var P=a.words[9];for(p.words[p.length++]=P&M,T=10;T<a.length;T++){var I=a.words[T]|0;a.words[T-10]=(I&M)<<4|P>>>22,P=I}P>>>=22,a.words[T-10]=P,P===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var P=new s(1).toRed(this),I=P.redNeg(),y=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,y).cmp(I)!==0;)u.redIAdd(I);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(P)!==0;){for(var me=$,_e=0;me.cmp(P)!==0;_e++)me=me.redSqr();n(_e<se);var be=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(be),S=be.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var P=R[0],I=0,y=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(P!==R[0]&&(P=this.sqr(P)),$===0&&I===0){y=0;continue}I<<=1,I|=$,y++,!(y!==M&&(T!==0||W!==0))&&(P=this.mul(P,R[I]),y=0,I=0)}u=26}return P},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,c8)})(Jw)),Jw.exports}var LS,eC;function h8(){if(eC)return LS;eC=1;var r=UA().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),w=Math.log(256)/Math.log(c);function _(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=r.from(L)),!r.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var N=0,C=0,D=0,k=L.length;D!==k&&L[D]===0;)D++,N++;for(var F=(k-D)*w+1>>>0,Q=new Uint8Array(F);D!==k;){for(var G=L[D],Y=0,ee=F-1;(G!==0||Y<C)&&ee!==-1;ee--,Y++)G+=256*Q[ee]>>>0,Q[ee]=G%c>>>0,G=G/c>>>0;if(G!==0)throw new Error("Non-zero carry");C=Y,D++}for(var te=F-C;te!==F&&Q[te]===0;)te++;for(var U=d.repeat(N);te<F;++te)U+=t.charAt(Q[te]);return U}function x(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return r.alloc(0);for(var N=0,C=0,D=0;L[N]===d;)C++,N++;for(var k=(L.length-N)*h+1>>>0,F=new Uint8Array(k);N<L.length;){var Q=L.charCodeAt(N);if(Q>255)return;var G=n[Q];if(G===255)return;for(var Y=0,ee=k-1;(G!==0||Y<D)&&ee!==-1;ee--,Y++)G+=c*F[ee]>>>0,F[ee]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");D=Y,N++}for(var te=k-D;te!==k&&F[te]===0;)te++;var U=r.allocUnsafe(C+(k-te));U.fill(0,0,C);for(var V=C;te!==k;)U[V++]=F[te++];return U}function A(L){var N=x(L);if(N)return N;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:x,decode:A}}return LS=e,LS}var kS,tC;function d8(){if(tC)return kS;tC=1;var r=h8(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return kS=r(e),kS}function Ru(r,e,t){return e<=r&&r<=t}function U1(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function p8(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var l=s&1023,c=o&1023;i.push(65536+(l<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function m8(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var M_=-1;function FA(r){this.tokens=[].slice.call(r)}FA.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():M_},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var p0=-1;function OS(r,e){if(r)throw TypeError("Decoder error");return e||65533}var E_="utf-8";function b_(r,e){if(!(this instanceof b_))return new b_(r,e);if(r=r!==void 0?String(r).toLowerCase():E_,r!==E_)throw new Error("Encoding not supported. Only utf-8 is supported");e=U1(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}b_.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=U1(t),this._streaming||(this._decoder=new g8({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new FA(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==p0);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===p0)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),m8(s)}};function A_(r,e){if(!(this instanceof A_))return new A_(r,e);if(r=r!==void 0?String(r).toLowerCase():E_,r!==E_)throw new Error("Encoding not supported. Only utf-8 is supported");e=U1(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}A_.prototype={encode:function(e,t){e=e?String(e):"",t=U1(t),this._streaming||(this._encoder=new y8(this._options)),this._streaming=!!t.stream;for(var n=[],i=new FA(p8(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==p0);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==p0;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function g8(r){var e=r.fatal,t=0,n=0,i=0,s=128,o=191;this.handler=function(l,c){if(c===M_&&i!==0)return i=0,OS(e);if(c===M_)return p0;if(i===0){if(Ru(c,0,127))return c;if(Ru(c,194,223))i=1,t=c-192;else if(Ru(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(Ru(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return OS(e);return t=t<<6*i,null}if(!Ru(c,s,o))return t=i=n=0,s=128,o=191,l.prepend(c),OS(e);if(s=128,o=191,n+=1,t+=c-128<<6*(i-n),n!==i)return null;var d=t;return t=i=n=0,d}}function y8(r){r.fatal,this.handler=function(e,t){if(t===M_)return p0;if(Ru(t,0,127))return t;var n,i;Ru(t,128,2047)?(n=1,i=192):Ru(t,2048,65535)?(n=2,i=224):Ru(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);s.push(128|o&63),n-=1}return s}}const v8=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:b_,TextEncoder:A_},Symbol.toStringTag,{value:"Module"})),w8=L1(v8);var nC;function _8(){if(nC)return Mr;nC=1;var r=Mr&&Mr.__createBinding||(Object.create?(function(te,U,V,K){K===void 0&&(K=V),Object.defineProperty(te,K,{enumerable:!0,get:function(){return U[V]}})}):(function(te,U,V,K){K===void 0&&(K=V),te[K]=U[V]})),e=Mr&&Mr.__setModuleDefault||(Object.create?(function(te,U){Object.defineProperty(te,"default",{enumerable:!0,value:U})}):function(te,U){te.default=U}),t=Mr&&Mr.__decorate||function(te,U,V,K){var E=arguments.length,a=E<3?U:K===null?K=Object.getOwnPropertyDescriptor(U,V):K,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(te,U,V,K);else for(var M=te.length-1;M>=0;M--)(p=te[M])&&(a=(E<3?p(a):E>3?p(U,V,a):p(U,V))||a);return E>3&&a&&Object.defineProperty(U,V,a),a},n=Mr&&Mr.__importStar||function(te){if(te&&te.__esModule)return te;var U={};if(te!=null)for(var V in te)V!=="default"&&Object.hasOwnProperty.call(te,V)&&r(U,te,V);return e(U,te),U},i=Mr&&Mr.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.deserializeUnchecked=Mr.deserialize=Mr.serialize=Mr.BinaryReader=Mr.BinaryWriter=Mr.BorshError=Mr.baseDecode=Mr.baseEncode=void 0;const s=i(f8()),o=i(d8()),l=n(w8),c=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,d=new c("utf-8",{fatal:!0});function h(te){return typeof te=="string"&&(te=qn.from(te,"utf8")),o.default.encode(qn.from(te))}Mr.baseEncode=h;function w(te){return qn.from(o.default.decode(te))}Mr.baseDecode=w;const _=1024;class x extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Mr.BorshError=x;class A{constructor(){this.buf=qn.alloc(_),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=qn.concat([this.buf,qn.alloc(_)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",64)))}writeBuffer(U){this.buf=qn.concat([qn.from(this.buf.subarray(0,this.length)),U,qn.alloc(_)]),this.length+=U.length}writeString(U){this.maybeResize();const V=qn.from(U,"utf8");this.writeU32(V.length),this.writeBuffer(V)}writeFixedArray(U){this.writeBuffer(qn.from(U))}writeArray(U,V){this.maybeResize(),this.writeU32(U.length);for(const K of U)this.maybeResize(),V(K)}toArray(){return this.buf.subarray(0,this.length)}}Mr.BinaryWriter=A;function L(te,U,V){const K=V.value;V.value=function(...E){try{return K.apply(this,E)}catch(a){if(a instanceof RangeError){const p=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(p)>=0)throw new x("Reached the end of buffer when deserializing")}throw a}}}class N{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new s.default(U,"le")}readU128(){const U=this.readBuffer(16);return new s.default(U,"le")}readU256(){const U=this.readBuffer(32);return new s.default(U,"le")}readU512(){const U=this.readBuffer(64);return new s.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new x(`Expected buffer length ${U} isn't within bounds`);const V=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,V}readString(){const U=this.readU32(),V=this.readBuffer(U);try{return d.decode(V)}catch(K){throw new x(`Error decoding UTF-8 string: ${K}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const V=this.readU32(),K=Array();for(let E=0;E<V;++E)K.push(U());return K}}t([L],N.prototype,"readU8",null),t([L],N.prototype,"readU16",null),t([L],N.prototype,"readU32",null),t([L],N.prototype,"readU64",null),t([L],N.prototype,"readU128",null),t([L],N.prototype,"readU256",null),t([L],N.prototype,"readU512",null),t([L],N.prototype,"readString",null),t([L],N.prototype,"readFixedArray",null),t([L],N.prototype,"readArray",null),Mr.BinaryReader=N;function C(te){return te.charAt(0).toUpperCase()+te.slice(1)}function D(te,U,V,K,E){try{if(typeof K=="string")E[`write${C(K)}`](V);else if(K instanceof Array)if(typeof K[0]=="number"){if(V.length!==K[0])throw new x(`Expecting byte array of length ${K[0]}, but got ${V.length} bytes`);E.writeFixedArray(V)}else if(K.length===2&&typeof K[1]=="number"){if(V.length!==K[1])throw new x(`Expecting byte array of length ${K[1]}, but got ${V.length} bytes`);for(let a=0;a<K[1];a++)D(te,null,V[a],K[0],E)}else E.writeArray(V,a=>{D(te,U,a,K[0],E)});else if(K.kind!==void 0)switch(K.kind){case"option":{V==null?E.writeU8(0):(E.writeU8(1),D(te,U,V,K.type,E));break}case"map":{E.writeU32(V.size),V.forEach((a,p)=>{D(te,U,p,K.key,E),D(te,U,a,K.value,E)});break}default:throw new x(`FieldType ${K} unrecognized`)}else k(te,V,E)}catch(a){throw a instanceof x&&a.addToFieldPath(U),a}}function k(te,U,V){if(typeof U.borshSerialize=="function"){U.borshSerialize(V);return}const K=te.get(U.constructor);if(!K)throw new x(`Class ${U.constructor.name} is missing in schema`);if(K.kind==="struct")K.fields.map(([E,a])=>{D(te,E,U[E],a,V)});else if(K.kind==="enum"){const E=U[K.field];for(let a=0;a<K.values.length;++a){const[p,M]=K.values[a];if(p===E){V.writeU8(a),D(te,p,U[p],M,V);break}}}else throw new x(`Unexpected schema kind: ${K.kind} for ${U.constructor.name}`)}function F(te,U,V=A){const K=new V;return k(te,U,K),K.toArray()}Mr.serialize=F;function Q(te,U,V,K){try{if(typeof V=="string")return K[`read${C(V)}`]();if(V instanceof Array){if(typeof V[0]=="number")return K.readFixedArray(V[0]);if(typeof V[1]=="number"){const E=[];for(let a=0;a<V[1];a++)E.push(Q(te,null,V[0],K));return E}else return K.readArray(()=>Q(te,U,V[0],K))}if(V.kind==="option")return K.readU8()?Q(te,U,V.type,K):void 0;if(V.kind==="map"){let E=new Map;const a=K.readU32();for(let p=0;p<a;p++){const M=Q(te,U,V.key,K),R=Q(te,U,V.value,K);E.set(M,R)}return E}return G(te,V,K)}catch(E){throw E instanceof x&&E.addToFieldPath(U),E}}function G(te,U,V){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(V);const K=te.get(U);if(!K)throw new x(`Class ${U.name} is missing in schema`);if(K.kind==="struct"){const E={};for(const[a,p]of te.get(U).fields)E[a]=Q(te,a,p,V);return new U(E)}if(K.kind==="enum"){const E=V.readU8();if(E>=K.values.length)throw new x(`Enum index: ${E} is out of range`);const[a,p]=K.values[E],M=Q(te,a,p,V);return new U({[a]:M})}throw new x(`Unexpected schema kind: ${K.kind} for ${U.constructor.name}`)}function Y(te,U,V,K=N){const E=new K(V),a=G(te,U,E);if(E.offset<V.length)throw new x(`Unexpected ${V.length-E.offset} bytes after deserialized data`);return a}Mr.deserialize=Y;function ee(te,U,V,K=N){const E=new K(V);return G(te,U,E)}return Mr.deserializeUnchecked=ee,Mr}var DS=_8(),at={},rC;function x8(){if(rC)return at;rC=1,Object.defineProperty(at,"__esModule",{value:!0}),at.s16=at.s8=at.nu64be=at.u48be=at.u40be=at.u32be=at.u24be=at.u16be=at.nu64=at.u48=at.u40=at.u32=at.u24=at.u16=at.u8=at.offset=at.greedy=at.Constant=at.UTF8=at.CString=at.Blob=at.Boolean=at.BitField=at.BitStructure=at.VariantLayout=at.Union=at.UnionLayoutDiscriminator=at.UnionDiscriminator=at.Structure=at.Sequence=at.DoubleBE=at.Double=at.FloatBE=at.Float=at.NearInt64BE=at.NearInt64=at.NearUInt64BE=at.NearUInt64=at.IntBE=at.Int=at.UIntBE=at.UInt=at.OffsetLayout=at.GreedyCount=at.ExternalLayout=at.bindConstructorLayout=at.nameWithProperty=at.Layout=at.uint8ArrayToBuffer=at.checkUint8Array=void 0,at.constant=at.utf8=at.cstr=at.blob=at.unionLayoutDiscriminator=at.union=at.seq=at.bits=at.struct=at.f64be=at.f64=at.f32be=at.f32=at.ns64be=at.s48be=at.s40be=at.s32be=at.s24be=at.s16be=at.ns64=at.s48=at.s40=at.s32=at.s24=void 0;const r=A0();function e(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}at.checkUint8Array=e;function t(u){return e(u),r.Buffer.from(u.buffer,u.byteOffset,u.length)}at.uint8ArrayToBuffer=t;class n{constructor(S,W){if(!Number.isInteger(S))throw new TypeError("span must be an integer");this.span=S,this.property=W}makeDestinationObject(){return{}}getSpan(S,W){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(S){const W=Object.create(this.constructor.prototype);return Object.assign(W,this),W.property=S,W}fromArray(S){}}at.Layout=n;function i(u,S){return S.property?u+"["+S.property+"]":u}at.nameWithProperty=i;function s(u,S){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(S&&S instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(S,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=S,S.boundConstructor_=u,S.makeDestinationObject=(()=>new u),Object.defineProperty(u.prototype,"encode",{value(W,$){return S.encode(this,W,$)},writable:!0}),Object.defineProperty(u,"decode",{value(W,$){return S.decode(W,$)},writable:!0})}at.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}at.ExternalLayout=o;class l extends o{constructor(S=1,W){if(!Number.isInteger(S)||0>=S)throw new TypeError("elementSpan must be a (positive) integer");super(-1,W),this.elementSpan=S}isCount(){return!0}decode(S,W=0){e(S);const $=S.length-W;return Math.floor($/this.elementSpan)}encode(S,W,$){return 0}}at.GreedyCount=l;class c extends o{constructor(S,W=0,$){if(!(S instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(W))throw new TypeError("offset must be integer or undefined");super(S.span,$||S.property),this.layout=S,this.offset=W}isCount(){return this.layout instanceof d||this.layout instanceof h}decode(S,W=0){return this.layout.decode(S,W+this.offset)}encode(S,W,$=0){return this.layout.encode(S,W,$+this.offset)}}at.OffsetLayout=c;class d extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readUIntLE(W,this.span)}encode(S,W,$=0){return t(W).writeUIntLE(S,$,this.span),this.span}}at.UInt=d;class h extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readUIntBE(W,this.span)}encode(S,W,$=0){return t(W).writeUIntBE(S,$,this.span),this.span}}at.UIntBE=h;class w extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readIntLE(W,this.span)}encode(S,W,$=0){return t(W).writeIntLE(S,$,this.span),this.span}}at.Int=w;class _ extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readIntBE(W,this.span)}encode(S,W,$=0){return t(W).writeIntBE(S,$,this.span),this.span}}at.IntBE=_;const x=Math.pow(2,32);function A(u){const S=Math.floor(u/x),W=u-S*x;return{hi32:S,lo32:W}}function L(u,S){return u*x+S}class N extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readUInt32LE(W),me=$.readUInt32LE(W+4);return L(me,se)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeUInt32LE(se.lo32,$),me.writeUInt32LE(se.hi32,$+4),8}}at.NearUInt64=N;class C extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readUInt32BE(W),me=$.readUInt32BE(W+4);return L(se,me)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeUInt32BE(se.hi32,$),me.writeUInt32BE(se.lo32,$+4),8}}at.NearUInt64BE=C;class D extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readUInt32LE(W),me=$.readInt32LE(W+4);return L(me,se)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeUInt32LE(se.lo32,$),me.writeInt32LE(se.hi32,$+4),8}}at.NearInt64=D;class k extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readInt32BE(W),me=$.readUInt32BE(W+4);return L(se,me)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeInt32BE(se.hi32,$),me.writeUInt32BE(se.lo32,$+4),8}}at.NearInt64BE=k;class F extends n{constructor(S){super(4,S)}decode(S,W=0){return t(S).readFloatLE(W)}encode(S,W,$=0){return t(W).writeFloatLE(S,$),4}}at.Float=F;class Q extends n{constructor(S){super(4,S)}decode(S,W=0){return t(S).readFloatBE(W)}encode(S,W,$=0){return t(W).writeFloatBE(S,$),4}}at.FloatBE=Q;class G extends n{constructor(S){super(8,S)}decode(S,W=0){return t(S).readDoubleLE(W)}encode(S,W,$=0){return t(W).writeDoubleLE(S,$),8}}at.Double=G;class Y extends n{constructor(S){super(8,S)}decode(S,W=0){return t(S).readDoubleBE(W)}encode(S,W,$=0){return t(W).writeDoubleBE(S,$),8}}at.DoubleBE=Y;class ee extends n{constructor(S,W,$){if(!(S instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(W instanceof o&&W.isCount()||Number.isInteger(W)&&0<=W))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let se=-1;!(W instanceof o)&&0<S.span&&(se=W*S.span),super(se,$),this.elementLayout=S,this.count=W}getSpan(S,W=0){if(0<=this.span)return this.span;let $=0,se=this.count;if(se instanceof o&&(se=se.decode(S,W)),0<this.elementLayout.span)$=se*this.elementLayout.span;else{let me=0;for(;me<se;)$+=this.elementLayout.getSpan(S,W+$),++me}return $}decode(S,W=0){const $=[];let se=0,me=this.count;for(me instanceof o&&(me=me.decode(S,W));se<me;)$.push(this.elementLayout.decode(S,W)),W+=this.elementLayout.getSpan(S,W),se+=1;return $}encode(S,W,$=0){const se=this.elementLayout,me=S.reduce((_e,be)=>_e+se.encode(be,W,$+_e),0);return this.count instanceof o&&this.count.encode(S.length,W,$),me}}at.Sequence=ee;class te extends n{constructor(S,W,$){if(!(Array.isArray(S)&&S.reduce((me,_e)=>me&&_e instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof W=="boolean"&&$===void 0&&($=W,W=void 0);for(const me of S)if(0>me.span&&me.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let se=-1;try{se=S.reduce((me,_e)=>me+_e.getSpan(),0)}catch{}super(se,W),this.fields=S,this.decodePrefixes=!!$}getSpan(S,W=0){if(0<=this.span)return this.span;let $=0;try{$=this.fields.reduce((se,me)=>{const _e=me.getSpan(S,W);return W+=_e,se+_e},0)}catch{throw new RangeError("indeterminate span")}return $}decode(S,W=0){e(S);const $=this.makeDestinationObject();for(const se of this.fields)if(se.property!==void 0&&($[se.property]=se.decode(S,W)),W+=se.getSpan(S,W),this.decodePrefixes&&S.length===W)break;return $}encode(S,W,$=0){const se=$;let me=0,_e=0;for(const be of this.fields){let wt=be.span;if(_e=0<wt?wt:0,be.property!==void 0){const Ze=S[be.property];Ze!==void 0&&(_e=be.encode(Ze,W,$),0>wt&&(wt=be.getSpan(W,$)))}me=$,$+=wt}return me+_e-se}fromArray(S){const W=this.makeDestinationObject();for(const $ of this.fields)$.property!==void 0&&0<S.length&&(W[$.property]=S.shift());return W}layoutFor(S){if(typeof S!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===S)return W}offsetOf(S){if(typeof S!="string")throw new TypeError("property must be string");let W=0;for(const $ of this.fields){if($.property===S)return W;0>$.span?W=-1:0<=W&&(W+=$.span)}}}at.Structure=te;class U{constructor(S){this.property=S}decode(S,W){throw new Error("UnionDiscriminator is abstract")}encode(S,W,$){throw new Error("UnionDiscriminator is abstract")}}at.UnionDiscriminator=U;class V extends U{constructor(S,W){if(!(S instanceof o&&S.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(W||S.property||"variant"),this.layout=S}decode(S,W){return this.layout.decode(S,W)}encode(S,W,$){return this.layout.encode(S,W,$)}}at.UnionLayoutDiscriminator=V;class K extends n{constructor(S,W,$){let se;if(S instanceof d||S instanceof h)se=new V(new c(S));else if(S instanceof o&&S.isCount())se=new V(S);else if(S instanceof U)se=S;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(W===void 0&&(W=null),!(W===null||W instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(W!==null){if(0>W.span)throw new Error("defaultLayout must have constant span");W.property===void 0&&(W=W.replicate("content"))}let me=-1;W&&(me=W.span,0<=me&&(S instanceof d||S instanceof h)&&(me+=se.layout.span)),super(me,$),this.discriminator=se,this.usesPrefixDiscriminator=S instanceof d||S instanceof h,this.defaultLayout=W,this.registry={};let _e=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(be){return _e(be)},this.configGetSourceVariant=function(be){_e=be.bind(this)}}getSpan(S,W=0){if(0<=this.span)return this.span;const $=this.getVariant(S,W);if(!$)throw new Error("unable to determine span for unrecognized variant");return $.getSpan(S,W)}defaultGetSourceVariant(S){if(Object.prototype.hasOwnProperty.call(S,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(S,this.defaultLayout.property))return;const W=this.registry[S[this.discriminator.property]];if(W&&(!W.layout||W.property&&Object.prototype.hasOwnProperty.call(S,W.property)))return W}else for(const W in this.registry){const $=this.registry[W];if($.property&&Object.prototype.hasOwnProperty.call(S,$.property))return $}throw new Error("unable to infer src variant")}decode(S,W=0){let $;const se=this.discriminator,me=se.decode(S,W),_e=this.registry[me];if(_e===void 0){const be=this.defaultLayout;let wt=0;this.usesPrefixDiscriminator&&(wt=se.layout.span),$=this.makeDestinationObject(),$[se.property]=me,$[be.property]=be.decode(S,W+wt)}else $=_e.decode(S,W);return $}encode(S,W,$=0){const se=this.getSourceVariant(S);if(se===void 0){const me=this.discriminator,_e=this.defaultLayout;let be=0;return this.usesPrefixDiscriminator&&(be=me.layout.span),me.encode(S[me.property],W,$),be+_e.encode(S[_e.property],W,$+be)}return se.encode(S,W,$)}addVariant(S,W,$){const se=new E(this,S,W,$);return this.registry[S]=se,se}getVariant(S,W=0){let $;return S instanceof Uint8Array?$=this.discriminator.decode(S,W):$=S,this.registry[$]}}at.Union=K;class E extends n{constructor(S,W,$,se){if(!(S instanceof K))throw new TypeError("union must be a Union");if(!Number.isInteger(W)||0>W)throw new TypeError("variant must be a (non-negative) integer");if(typeof $=="string"&&se===void 0&&(se=$,$=null),$){if(!($ instanceof n))throw new TypeError("layout must be a Layout");if(S.defaultLayout!==null&&0<=$.span&&$.span>S.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof se!="string")throw new TypeError("variant must have a String property")}let me=S.span;0>S.span&&(me=$?$.span:0,0<=me&&S.usesPrefixDiscriminator&&(me+=S.discriminator.layout.span)),super(me,se),this.union=S,this.variant=W,this.layout=$||null}getSpan(S,W=0){if(0<=this.span)return this.span;let $=0;this.union.usesPrefixDiscriminator&&($=this.union.discriminator.layout.span);let se=0;return this.layout&&(se=this.layout.getSpan(S,W+$)),$+se}decode(S,W=0){const $=this.makeDestinationObject();if(this!==this.union.getVariant(S,W))throw new Error("variant mismatch");let se=0;return this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout?$[this.property]=this.layout.decode(S,W+se):this.property?$[this.property]=!0:this.union.usesPrefixDiscriminator&&($[this.union.discriminator.property]=this.variant),$}encode(S,W,$=0){let se=0;if(this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(S,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,W,$);let me=se;if(this.layout&&(this.layout.encode(S[this.property],W,$+se),me+=this.layout.getSpan(W,$+se),0<=this.union.span&&me>this.union.span))throw new Error("encoded variant overruns containing union");return me}fromArray(S){if(this.layout)return this.layout.fromArray(S)}}at.VariantLayout=E;function a(u){return 0>u&&(u+=4294967296),u}class p extends n{constructor(S,W,$){if(!(S instanceof d||S instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof W=="string"&&$===void 0&&($=W,W=!1),4<S.span)throw new RangeError("word cannot exceed 32 bits");super(S.span,$),this.word=S,this.msb=!!W,this.fields=[];let se=0;this._packedSetValue=function(me){return se=a(me),this},this._packedGetValue=function(){return se}}decode(S,W=0){const $=this.makeDestinationObject(),se=this.word.decode(S,W);this._packedSetValue(se);for(const me of this.fields)me.property!==void 0&&($[me.property]=me.decode(S));return $}encode(S,W,$=0){const se=this.word.decode(W,$);this._packedSetValue(se);for(const me of this.fields)if(me.property!==void 0){const _e=S[me.property];_e!==void 0&&me.encode(_e)}return this.word.encode(this._packedGetValue(),W,$)}addField(S,W){const $=new M(this,S,W);return this.fields.push($),$}addBoolean(S){const W=new R(this,S);return this.fields.push(W),W}fieldFor(S){if(typeof S!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===S)return W}}at.BitStructure=p;class M{constructor(S,W,$){if(!(S instanceof p))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(W)||0>=W)throw new TypeError("bits must be positive integer");const se=8*S.span,me=S.fields.reduce((_e,be)=>_e+be.bits,0);if(W+me>se)throw new Error("bits too long for span remainder ("+(se-me)+" of "+se+" remain)");this.container=S,this.bits=W,this.valueMask=(1<<W)-1,W===32&&(this.valueMask=4294967295),this.start=me,this.container.msb&&(this.start=se-me-W),this.wordMask=a(this.valueMask<<this.start),this.property=$}decode(S,W){const $=this.container._packedGetValue();return a($&this.wordMask)>>>this.start}encode(S){if(typeof S!="number"||!Number.isInteger(S)||S!==a(S&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const W=this.container._packedGetValue(),$=a(S<<this.start);this.container._packedSetValue(a(W&~this.wordMask)|$)}}at.BitField=M;class R extends M{constructor(S,W){super(S,1,W)}decode(S,W){return!!super.decode(S,W)}encode(S){typeof S=="boolean"&&(S=+S),super.encode(S)}}at.Boolean=R;class T extends n{constructor(S,W){if(!(S instanceof o&&S.isCount()||Number.isInteger(S)&&0<=S))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let $=-1;S instanceof o||($=S),super($,W),this.length=S}getSpan(S,W){let $=this.span;return 0>$&&($=this.length.decode(S,W)),$}decode(S,W=0){let $=this.span;return 0>$&&($=this.length.decode(S,W)),t(S).slice(W,W+$)}encode(S,W,$){let se=this.length;if(this.length instanceof o&&(se=S.length),!(S instanceof Uint8Array&&se===S.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+se+") Uint8Array as src");if($+se>W.length)throw new RangeError("encoding overruns Uint8Array");const me=t(S);return t(W).write(me.toString("hex"),$,se,"hex"),this.length instanceof o&&this.length.encode(se,W,$),se}}at.Blob=T;class P extends n{constructor(S){super(-1,S)}getSpan(S,W=0){e(S);let $=W;for(;$<S.length&&S[$]!==0;)$+=1;return 1+$-W}decode(S,W=0){const $=this.getSpan(S,W);return t(S).slice(W,W+$-1).toString("utf-8")}encode(S,W,$=0){typeof S!="string"&&(S=String(S));const se=r.Buffer.from(S,"utf8"),me=se.length;if($+me>W.length)throw new RangeError("encoding overruns Buffer");const _e=t(W);return se.copy(_e,$),_e[$+me]=0,me+1}}at.CString=P;class I extends n{constructor(S,W){if(typeof S=="string"&&W===void 0&&(W=S,S=void 0),S===void 0)S=-1;else if(!Number.isInteger(S))throw new TypeError("maxSpan must be an integer");super(-1,W),this.maxSpan=S}getSpan(S,W=0){return e(S),S.length-W}decode(S,W=0){const $=this.getSpan(S,W);if(0<=this.maxSpan&&this.maxSpan<$)throw new RangeError("text length exceeds maxSpan");return t(S).slice(W,W+$).toString("utf-8")}encode(S,W,$=0){typeof S!="string"&&(S=String(S));const se=r.Buffer.from(S,"utf8"),me=se.length;if(0<=this.maxSpan&&this.maxSpan<me)throw new RangeError("text length exceeds maxSpan");if($+me>W.length)throw new RangeError("encoding overruns Buffer");return se.copy(t(W),$),me}}at.UTF8=I;class y extends n{constructor(S,W){super(0,W),this.value=S}decode(S,W){return this.value}encode(S,W,$){return 0}}return at.Constant=y,at.greedy=((u,S)=>new l(u,S)),at.offset=((u,S,W)=>new c(u,S,W)),at.u8=(u=>new d(1,u)),at.u16=(u=>new d(2,u)),at.u24=(u=>new d(3,u)),at.u32=(u=>new d(4,u)),at.u40=(u=>new d(5,u)),at.u48=(u=>new d(6,u)),at.nu64=(u=>new N(u)),at.u16be=(u=>new h(2,u)),at.u24be=(u=>new h(3,u)),at.u32be=(u=>new h(4,u)),at.u40be=(u=>new h(5,u)),at.u48be=(u=>new h(6,u)),at.nu64be=(u=>new C(u)),at.s8=(u=>new w(1,u)),at.s16=(u=>new w(2,u)),at.s24=(u=>new w(3,u)),at.s32=(u=>new w(4,u)),at.s40=(u=>new w(5,u)),at.s48=(u=>new w(6,u)),at.ns64=(u=>new D(u)),at.s16be=(u=>new _(2,u)),at.s24be=(u=>new _(3,u)),at.s32be=(u=>new _(4,u)),at.s40be=(u=>new _(5,u)),at.s48be=(u=>new _(6,u)),at.ns64be=(u=>new k(u)),at.f32=(u=>new F(u)),at.f32be=(u=>new Q(u)),at.f64=(u=>new G(u)),at.f64be=(u=>new Y(u)),at.struct=((u,S,W)=>new te(u,S,W)),at.bits=((u,S,W)=>new p(u,S,W)),at.seq=((u,S,W)=>new ee(u,S,W)),at.union=((u,S,W)=>new K(u,S,W)),at.unionLayoutDiscriminator=((u,S)=>new V(u,S)),at.blob=((u,S)=>new T(u,S)),at.cstr=(u=>new P(u)),at.utf8=((u,S)=>new I(u,S)),at.constant=((u,S)=>new y(u,S)),at}var Ee=x8(),S8=8078e3,M8=8078001,E8=8078004,b8=8078005,A8=8078006,T8=8078011;function Pk(r){return Array.isArray(r)?"%5B"+r.map(Pk).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function R8([r,e]){return`${r}=${Pk(e)}`}function C8(r){const e=Object.entries(r).map(R8).join("&");return btoa(e)}function I8(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${C8(e)}'`),`${t}\``}}var s0=class extends Error{constructor(...[e,t]){let n,i;if(t){const{cause:o,...l}=t;o&&(i={cause:o}),Object.keys(l).length>0&&(n=l)}const s=I8(e,n);super(s,i);Ei(this,"cause",this.cause);Ei(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function N8(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function P8(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(N8(e,r));return r.write(e,t,0),t}})}function L8(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function yp(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function k8(r,e){if(yp(r)!==yp(e))throw new s0(E8);if(yp(r)&&yp(e)&&r.fixedSize!==e.fixedSize)throw new s0(b8,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!yp(r)&&!yp(e)&&r.maxSize!==e.maxSize)throw new s0(A8,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function O8(r,e,t=0){if(e.length-t<=0)throw new s0(S8,{codecDescription:r})}function D8(r,e,t,n=0){const i=t.length-n;if(i<e)throw new s0(M8,{bytesLength:i,codecDescription:r,expected:e})}function B8(r,e,t,n){if(n<e||n>t)throw new s0(T8,{codecDescription:r,max:t,min:e,value:n})}function Lk(r){return(r==null?void 0:r.endian)!==1}function U8(r){return P8({fixedSize:r.size,write(e,t,n){r.range&&B8(r.name,r.range[0],r.range[1],e);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,Lk(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function F8(r){return L8({fixedSize:r.size,read(e,t=0){O8(r.name,e,t),D8(r.name,r.size,e,t);const n=new DataView(z8(e,t,r.size));return[r.get(n,Lk(r.config)),t+r.size]}})}function z8(r,e,t){const n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var kk=(r={})=>U8({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),W8=(r={})=>F8({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),V8=(r={})=>k8(kk(r),W8(r));let H8=class extends TypeError{constructor(e,t){let n;const{message:i,explanation:s,...o}=e,{path:l}=e,c=l.length===0?i:`At path: ${l.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}};function G8(r){return vy(r)&&typeof r[Symbol.iterator]=="function"}function vy(r){return typeof r=="object"&&r!=null}function T_(r){return vy(r)&&!Array.isArray(r)}function Ha(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function j8(r){const{done:e,value:t}=r.next();return e?void 0:t}function q8(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:l,message:c=`Expected a value of type \`${o}\`${l?` with refinement \`${l}\``:""}, but received: \`${Ha(n)}\``}=r;return{value:n,type:o,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*iC(r,e,t,n){G8(r)||(r=[r]);for(const i of r){const s=q8(i,e,t,n);s&&(yield s)}}function*zA(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,l={path:n,branch:i,mask:o};s&&(r=e.coercer(r,l));let c="valid";for(const d of e.validator(r,l))d.explanation=t.message,c="not_valid",yield[d,void 0];for(let[d,h,w]of e.entries(r,l)){const _=zA(h,w,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,h],coerce:s,mask:o,message:t.message});for(const x of _)x[0]?(c=x[0].refinement!=null?"not_refined":"not_valid",yield[x[0],void 0]):s&&(h=x[1],d===void 0?r=h:r instanceof Map?r.set(d,h):r instanceof Set?r.add(h):vy(r)&&(h!==void 0||d in r)&&(r[d]=h))}if(c!=="not_valid")for(const d of e.refiner(r,l))d.explanation=t.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,r])}let Ll=class{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:l=function*(){}}=e;this.type=t,this.schema=n,this.entries=l,this.coercer=o,i?this.validator=(c,d)=>{const h=i(c,d);return iC(h,d,this,c)}:this.validator=()=>[],s?this.refiner=(c,d)=>{const h=s(c,d);return iC(h,d,this,c)}:this.refiner=()=>[]}assert(e,t){return Ok(e,this,t)}create(e,t){return Yt(e,this,t)}is(e){return Dk(e,this)}mask(e,t){return K8(e,this,t)}validate(e,t={}){return wy(e,this,t)}};function Ok(r,e,t){const n=wy(r,e,{message:t});if(n[0])throw n[0]}function Yt(r,e,t){const n=wy(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function K8(r,e,t){const n=wy(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Dk(r,e){return!wy(r,e)[0]}function wy(r,e,t={}){const n=zA(r,e,t),i=j8(n);return i[0]?[new H8(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function sd(r,e){return new Ll({type:r,schema:null,validator:e})}function Y8(){return sd("any",()=>!0)}function en(r){return new Ll({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Ha(e)}`}})}function Pl(){return sd("boolean",r=>typeof r=="boolean")}function WA(r){return sd("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Ha(e)}`)}function $r(r){const e=Ha(r),t=typeof r;return new Ll({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Ha(n)}`}})}function X8(){return sd("never",()=>!1)}function tn(r){return new Ll({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function tt(){return sd("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Ha(r)}`)}function An(r){return new Ll({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Bk(r,e){return new Ll({type:"record",schema:null,*entries(t){if(vy(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return T_(t)||`Expected an object, but received: ${Ha(t)}`},coercer(t){return T_(t)?{...t}:t}})}function Ht(){return sd("string",r=>typeof r=="string"||`Expected a string, but received: ${Ha(r)}`)}function VA(r){const e=X8();return new Ll({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Ha(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function It(r){const e=Object.keys(r);return new Ll({type:"type",schema:r,*entries(t){if(vy(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return T_(t)||`Expected an object, but received: ${Ha(t)}`},coercer(t){return T_(t)?{...t}:t}})}function Zs(r){const e=r.map(t=>t.type).join(" | ");return new Ll({type:"union",schema:null,coercer(t,n){for(const i of r){const[s,o]=i.validate(t,{coerce:!0,mask:n.mask});if(!s)return o}return t},validator(t,n){const i=[];for(const s of r){const[...o]=zA(t,s,n),[l]=o;if(l[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Ha(t)}`,...i]}})}function T0(){return sd("unknown",()=>!0)}function _y(r,e,t){return new Ll({...r,coercer:(n,i)=>Dk(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var Wv,$8=new Uint8Array(16);function Uk(){if(!Wv&&(Wv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Wv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wv($8)}const Z8=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function F1(r){return typeof r=="string"&&Z8.test(r)}var ls=[];for(var BS=0;BS<256;++BS)ls.push((BS+256).toString(16).substr(1));function z1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(ls[r[e+0]]+ls[r[e+1]]+ls[r[e+2]]+ls[r[e+3]]+"-"+ls[r[e+4]]+ls[r[e+5]]+"-"+ls[r[e+6]]+ls[r[e+7]]+"-"+ls[r[e+8]]+ls[r[e+9]]+"-"+ls[r[e+10]]+ls[r[e+11]]+ls[r[e+12]]+ls[r[e+13]]+ls[r[e+14]]+ls[r[e+15]]).toLowerCase();if(!F1(t))throw TypeError("Stringified UUID is invalid");return t}var sC,US,FS=0,zS=0;function Q8(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||sC,o=r.clockseq!==void 0?r.clockseq:US;if(s==null||o==null){var l=r.random||(r.rng||Uk)();s==null&&(s=sC=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),o==null&&(o=US=(l[6]<<8|l[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),d=r.nsecs!==void 0?r.nsecs:zS+1,h=c-FS+(d-zS)/1e4;if(h<0&&r.clockseq===void 0&&(o=o+1&16383),(h<0||c>FS)&&r.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");FS=c,zS=d,US=o,c+=122192928e5;var w=((c&268435455)*1e4+d)%4294967296;i[n++]=w>>>24&255,i[n++]=w>>>16&255,i[n++]=w>>>8&255,i[n++]=w&255;var _=c/4294967296*1e4&268435455;i[n++]=_>>>8&255,i[n++]=_&255,i[n++]=_>>>24&15|16,i[n++]=_>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var x=0;x<6;++x)i[n+x]=s[x];return e||z1(i)}function Fk(r){if(!F1(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function J8(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var eW="6ba7b810-9dad-11d1-80b4-00c04fd430c8",tW="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function zk(r,e,t){function n(i,s,o,l){if(typeof i=="string"&&(i=J8(i)),typeof s=="string"&&(s=Fk(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){l=l||0;for(var d=0;d<16;++d)o[l+d]=c[d];return o}return z1(c)}try{n.name=r}catch{}return n.DNS=eW,n.URL=tW,n}function nW(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return rW(iW(sW(r),r.length*8))}function rW(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function Wk(r){return(r+64>>>9<<4)+14+1}function iW(r,e){r[e>>5]|=128<<e%32,r[Wk(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var l=t,c=n,d=i,h=s;t=xs(t,n,i,s,r[o],7,-680876936),s=xs(s,t,n,i,r[o+1],12,-389564586),i=xs(i,s,t,n,r[o+2],17,606105819),n=xs(n,i,s,t,r[o+3],22,-1044525330),t=xs(t,n,i,s,r[o+4],7,-176418897),s=xs(s,t,n,i,r[o+5],12,1200080426),i=xs(i,s,t,n,r[o+6],17,-1473231341),n=xs(n,i,s,t,r[o+7],22,-45705983),t=xs(t,n,i,s,r[o+8],7,1770035416),s=xs(s,t,n,i,r[o+9],12,-1958414417),i=xs(i,s,t,n,r[o+10],17,-42063),n=xs(n,i,s,t,r[o+11],22,-1990404162),t=xs(t,n,i,s,r[o+12],7,1804603682),s=xs(s,t,n,i,r[o+13],12,-40341101),i=xs(i,s,t,n,r[o+14],17,-1502002290),n=xs(n,i,s,t,r[o+15],22,1236535329),t=Ss(t,n,i,s,r[o+1],5,-165796510),s=Ss(s,t,n,i,r[o+6],9,-1069501632),i=Ss(i,s,t,n,r[o+11],14,643717713),n=Ss(n,i,s,t,r[o],20,-373897302),t=Ss(t,n,i,s,r[o+5],5,-701558691),s=Ss(s,t,n,i,r[o+10],9,38016083),i=Ss(i,s,t,n,r[o+15],14,-660478335),n=Ss(n,i,s,t,r[o+4],20,-405537848),t=Ss(t,n,i,s,r[o+9],5,568446438),s=Ss(s,t,n,i,r[o+14],9,-1019803690),i=Ss(i,s,t,n,r[o+3],14,-187363961),n=Ss(n,i,s,t,r[o+8],20,1163531501),t=Ss(t,n,i,s,r[o+13],5,-1444681467),s=Ss(s,t,n,i,r[o+2],9,-51403784),i=Ss(i,s,t,n,r[o+7],14,1735328473),n=Ss(n,i,s,t,r[o+12],20,-1926607734),t=Ms(t,n,i,s,r[o+5],4,-378558),s=Ms(s,t,n,i,r[o+8],11,-2022574463),i=Ms(i,s,t,n,r[o+11],16,1839030562),n=Ms(n,i,s,t,r[o+14],23,-35309556),t=Ms(t,n,i,s,r[o+1],4,-1530992060),s=Ms(s,t,n,i,r[o+4],11,1272893353),i=Ms(i,s,t,n,r[o+7],16,-155497632),n=Ms(n,i,s,t,r[o+10],23,-1094730640),t=Ms(t,n,i,s,r[o+13],4,681279174),s=Ms(s,t,n,i,r[o],11,-358537222),i=Ms(i,s,t,n,r[o+3],16,-722521979),n=Ms(n,i,s,t,r[o+6],23,76029189),t=Ms(t,n,i,s,r[o+9],4,-640364487),s=Ms(s,t,n,i,r[o+12],11,-421815835),i=Ms(i,s,t,n,r[o+15],16,530742520),n=Ms(n,i,s,t,r[o+2],23,-995338651),t=Es(t,n,i,s,r[o],6,-198630844),s=Es(s,t,n,i,r[o+7],10,1126891415),i=Es(i,s,t,n,r[o+14],15,-1416354905),n=Es(n,i,s,t,r[o+5],21,-57434055),t=Es(t,n,i,s,r[o+12],6,1700485571),s=Es(s,t,n,i,r[o+3],10,-1894986606),i=Es(i,s,t,n,r[o+10],15,-1051523),n=Es(n,i,s,t,r[o+1],21,-2054922799),t=Es(t,n,i,s,r[o+8],6,1873313359),s=Es(s,t,n,i,r[o+15],10,-30611744),i=Es(i,s,t,n,r[o+6],15,-1560198380),n=Es(n,i,s,t,r[o+13],21,1309151649),t=Es(t,n,i,s,r[o+4],6,-145523070),s=Es(s,t,n,i,r[o+11],10,-1120210379),i=Es(i,s,t,n,r[o+2],15,718787259),n=Es(n,i,s,t,r[o+9],21,-343485551),t=Yc(t,l),n=Yc(n,c),i=Yc(i,d),s=Yc(s,h)}return[t,n,i,s]}function sW(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Wk(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function Yc(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function oW(r,e){return r<<e|r>>>32-e}function W1(r,e,t,n,i,s){return Yc(oW(Yc(Yc(e,r),Yc(n,s)),i),t)}function xs(r,e,t,n,i,s,o){return W1(e&t|~e&n,r,e,i,s,o)}function Ss(r,e,t,n,i,s,o){return W1(e&n|t&~n,r,e,i,s,o)}function Ms(r,e,t,n,i,s,o){return W1(e^t^n,r,e,i,s,o)}function Es(r,e,t,n,i,s,o){return W1(t^(e|~n),r,e,i,s,o)}var aW=zk("v3",48,nW);function lW(r,e,t){r=r||{};var n=r.random||(r.rng||Uk)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return z1(n)}function uW(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function WS(r,e){return r<<e|r>>>32-e}function cW(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),l=new Array(o),c=0;c<o;++c){for(var d=new Uint32Array(16),h=0;h<16;++h)d[h]=r[c*64+h*4]<<24|r[c*64+h*4+1]<<16|r[c*64+h*4+2]<<8|r[c*64+h*4+3];l[c]=d}l[o-1][14]=(r.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(r.length-1)*8&4294967295;for(var w=0;w<o;++w){for(var _=new Uint32Array(80),x=0;x<16;++x)_[x]=l[w][x];for(var A=16;A<80;++A)_[A]=WS(_[A-3]^_[A-8]^_[A-14]^_[A-16],1);for(var L=t[0],N=t[1],C=t[2],D=t[3],k=t[4],F=0;F<80;++F){var Q=Math.floor(F/20),G=WS(L,5)+uW(Q,N,C,D)+k+e[Q]+_[F]>>>0;k=D,D=C,C=WS(N,30)>>>0,N=L,L=G}t[0]=t[0]+L>>>0,t[1]=t[1]+N>>>0,t[2]=t[2]+C>>>0,t[3]=t[3]+D>>>0,t[4]=t[4]+k>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var fW=zk("v5",80,cW);const hW="00000000-0000-0000-0000-000000000000";function dW(r){if(!F1(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const pW=Object.freeze(Object.defineProperty({__proto__:null,NIL:hW,parse:Fk,stringify:z1,v1:Q8,v3:aW,v4:lW,v5:fW,validate:F1,version:dW},Symbol.toStringTag,{value:"Module"})),Vk=L1(pW);var VS,oC;function mW(){if(oC)return VS;oC=1;const r=Vk.v4;return VS=function(t,n,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const l={method:t};if(o===2&&(l.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");l.params=n}if(typeof i>"u"){const c=typeof s.generator=="function"?s.generator:function(){return r()};l.id=c(l,s)}else o===2&&i===null?s.notificationIdNull&&(l.id=null):l.id=i;return l},VS}var HS,aC;function gW(){if(aC)return HS;aC=1;const r=Vk.v4,e=mW(),t=function(n,i){if(!(this instanceof t))return new t(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return HS=t,t.prototype.request=function(n,i,s,o){const l=this;let c=null;const d=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&d)throw new TypeError("JSON-RPC 1.0 does not support batching");if(d||!d&&n&&typeof n=="object"&&typeof i=="function")o=i,c=n;else{typeof s=="function"&&(o=s,s=void 0);const _=typeof o=="function";try{c=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(_)return o(x);throw x}if(!_)return c}let w;try{w=JSON.stringify(c,this.options.replacer)}catch(_){return o(_)}return this.callServer(w,function(_,x){l._parseResponse(_,x,o)}),c},t.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(l){return s(l)}if(s.length===3)if(Array.isArray(o)){const l=function(d){return typeof d.error<"u"},c=function(d){return!l(d)};return s(null,o.filter(l),o.filter(c))}else return s(null,o.error,o.result);s(null,o)},HS}var yW=gW();const vW=Ya(yW);var GS={exports:{}},lC;function Hk(){return lC||(lC=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function s(c,d,h,w,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,w||c,_),A=t?t+d:d;return c._events[A]?c._events[A].fn?c._events[A]=[c._events[A],x]:c._events[A].push(x):(c._events[A]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,w;if(this._eventsCount===0)return d;for(w in h=this._events)e.call(h,w)&&d.push(t?w.slice(1):w);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=t?t+d:d,w=this._events[h];if(!w)return[];if(w.fn)return[w.fn];for(var _=0,x=w.length,A=new Array(x);_<x;_++)A[_]=w[_].fn;return A},l.prototype.listenerCount=function(d){var h=t?t+d:d,w=this._events[h];return w?w.fn?1:w.length:0},l.prototype.emit=function(d,h,w,_,x,A){var L=t?t+d:d;if(!this._events[L])return!1;var N=this._events[L],C=arguments.length,D,k;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),C){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,h),!0;case 3:return N.fn.call(N.context,h,w),!0;case 4:return N.fn.call(N.context,h,w,_),!0;case 5:return N.fn.call(N.context,h,w,_,x),!0;case 6:return N.fn.call(N.context,h,w,_,x,A),!0}for(k=1,D=new Array(C-1);k<C;k++)D[k-1]=arguments[k];N.fn.apply(N.context,D)}else{var F=N.length,Q;for(k=0;k<F;k++)switch(N[k].once&&this.removeListener(d,N[k].fn,void 0,!0),C){case 1:N[k].fn.call(N[k].context);break;case 2:N[k].fn.call(N[k].context,h);break;case 3:N[k].fn.call(N[k].context,h,w);break;case 4:N[k].fn.call(N[k].context,h,w,_);break;default:if(!D)for(Q=1,D=new Array(C-1);Q<C;Q++)D[Q-1]=arguments[Q];N[k].fn.apply(N[k].context,D)}}return!0},l.prototype.on=function(d,h,w){return s(this,d,h,w,!1)},l.prototype.once=function(d,h,w){return s(this,d,h,w,!0)},l.prototype.removeListener=function(d,h,w,_){var x=t?t+d:d;if(!this._events[x])return this;if(!h)return o(this,x),this;var A=this._events[x];if(A.fn)A.fn===h&&(!_||A.once)&&(!w||A.context===w)&&o(this,x);else{for(var L=0,N=[],C=A.length;L<C;L++)(A[L].fn!==h||_&&!A[L].once||w&&A[L].context!==w)&&N.push(A[L]);N.length?this._events[x]=N.length===1?N[0]:N:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l})(GS)),GS.exports}var wW=Hk();const HA=Ya(wW);var _W=class extends HA{constructor(e,t,n){super();Ei(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,n){const i=n||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function xW(r,e){return new _W(r,e)}var SW=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},MW=class extends HA{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...l}={},c,d){super();Ei(this,"address");Ei(this,"rpc_id");Ei(this,"queue");Ei(this,"options");Ei(this,"autoconnect");Ei(this,"ready");Ei(this,"reconnect");Ei(this,"reconnect_timer_id");Ei(this,"reconnect_interval");Ei(this,"max_reconnects");Ei(this,"rest_options");Ei(this,"current_reconnects");Ei(this,"generate_request_id");Ei(this,"socket");Ei(this,"webSocketFactory");Ei(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new SW,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const l=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:l};this.socket.send(this.dataPack.encode(c),i,d=>{if(d)return o(d);this.queue[l]={promise:[s,o]},n&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],o(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=mn.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,i),1))})}};const EW=BigInt(0),Pm=BigInt(1),bW=BigInt(2),AW=BigInt(7),TW=BigInt(256),RW=BigInt(113),Gk=[],jk=[],qk=[];for(let r=0,e=Pm,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Gk.push(2*(5*n+t)),jk.push((r+1)*(r+2)/2%64);let i=EW;for(let s=0;s<7;s++)e=(e<<Pm^(e>>AW)*RW)%TW,e&bW&&(i^=Pm<<(Pm<<BigInt(s))-Pm);qk.push(i)}const Kk=uk(qk,!0),CW=Kk[0],IW=Kk[1],uC=(r,e,t)=>t>32?pz(r,e,t):hz(r,e,t),cC=(r,e,t)=>t>32?mz(r,e,t):dz(r,e,t);function NW(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,c=(o+2)%10,d=t[c],h=t[c+1],w=uC(d,h,1)^t[l],_=cC(d,h,1)^t[l+1];for(let x=0;x<50;x+=10)r[o+x]^=w,r[o+x+1]^=_}let i=r[2],s=r[3];for(let o=0;o<24;o++){const l=jk[o],c=uC(i,s,l),d=cC(i,s,l),h=Gk[o];i=r[h],s=r[h+1],r[h]=c,r[h+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=r[o+l];for(let l=0;l<10;l++)r[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=CW[n],r[1]^=IW[n]}Jc(t)}class GA extends NA{constructor(e,t,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,Pg(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=nz(this.state)}clone(){return this._cloneInto()}keccak(){L2(this.state32),NW(this.state32,this.rounds),L2(this.state32),this.posOut=0,this.pos=0}update(e){h0(this),e=D1(e),Vu(e);const{blockLen:t,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let l=0;l<o;l++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){h0(this,!1),Vu(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ok(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Jc(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new GA(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const PW=(r,e,t)=>PA(()=>new GA(e,r,t)),fC=PW(1,136,256/8);class Yk extends NA{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,sk(e);const n=D1(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Jc(s)}update(e){return h0(this),this.iHash.update(e),this}digestInto(e){h0(this),Vu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Xk=(r,e,t)=>new Yk(r,e).update(t).digest();Xk.create=(r,e)=>new Yk(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hC=(r,e)=>(r+(r>=0?e:-e)/$k)/e;function LW(r,e,t){const[[n,i],[s,o]]=e,l=hC(o*r,t),c=hC(-i*r,t);let d=r-l*n-c*s,h=-l*i-c*o;const w=d<ku,_=h<ku;w&&(d=-d),_&&(h=-h);const x=gy(Math.ceil(pk(t)/2))+o0;if(d<ku||d>=x||h<ku||h>=x)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:w,k1:d,k2neg:_,k2:h}}function cb(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function jS(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return Xh(t.lowS,"lowS"),Xh(t.prehash,"prehash"),t.format!==void 0&&cb(t.format),t}class kW extends Error{constructor(e=""){super(e)}}const bu={Err:kW,_tlv:{encode:(r,e)=>{const{Err:t}=bu;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=Fv(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?Fv(i.length/2|128):"";return Fv(r)+s+i+e},decode(r,e){const{Err:t}=bu;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(n,n+c);if(d.length!==c)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of d)o=o<<8|h;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(n,n+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=bu;if(r<ku)throw new e("integer: negative integers are not allowed");let t=Fv(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=bu;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return B1(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=bu,i=si("signature",r),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:c}=n.decode(2,s),{v:d,l:h}=n.decode(2,c);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(d)}},hexFromSig(r){const{_tlv:e,_int:t}=bu,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},ku=BigInt(0),o0=BigInt(1),$k=BigInt(2),Vv=BigInt(3),OW=BigInt(4);function Hp(r,e){const{BYTES:t}=r;let n;if(typeof e=="bigint")n=e;else{let i=si("private key",e);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function DW(r,e={}){const t=Ik("weierstrass",r,e),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:o,n:l}=s;yy(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=Qk(n,i);function h(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function w(K,E,a){const{x:p,y:M}=E.toAffine(),R=n.toBytes(p);if(Xh(a,"isCompressed"),a){h();const T=!n.isOdd(M);return vl(Zk(T),R)}else return vl(Uint8Array.of(4),R,n.toBytes(M))}function _(K){Wa(K,void 0,"Point");const{publicKey:E,publicKeyUncompressed:a}=d,p=K.length,M=K[0],R=K.subarray(1);if(p===E&&(M===2||M===3)){const T=n.fromBytes(R);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const P=L(T);let I;try{I=n.sqrt(P)}catch(S){const W=S instanceof Error?": "+S.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}h();const y=n.isOdd(I);return(M&1)===1!==y&&(I=n.neg(I)),{x:T,y:I}}else if(p===a&&M===4){const T=n.BYTES,P=n.fromBytes(R.subarray(0,T)),I=n.fromBytes(R.subarray(T,T*2));if(!N(P,I))throw new Error("bad point: is not on curve");return{x:P,y:I}}else throw new Error(`bad point: got length ${p}, expected compressed=${E} or uncompressed=${a}`)}const x=e.toBytes||w,A=e.fromBytes||_;function L(K){const E=n.sqr(K),a=n.mul(E,K);return n.add(n.add(a,n.mul(K,s.a)),s.b)}function N(K,E){const a=n.sqr(E),p=L(K);return n.eql(a,p)}if(!N(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const C=n.mul(n.pow(s.a,Vv),OW),D=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(C,D)))throw new Error("bad curve params: a or b");function k(K,E,a=!1){if(!n.isValid(E)||a&&n.is0(E))throw new Error(`bad point coordinate ${K}`);return E}function F(K){if(!(K instanceof te))throw new Error("ProjectivePoint expected")}function Q(K){if(!c||!c.basises)throw new Error("no endo");return LW(K,c.basises,i.ORDER)}const G=x_((K,E)=>{const{X:a,Y:p,Z:M}=K;if(n.eql(M,n.ONE))return{x:a,y:p};const R=K.is0();E==null&&(E=R?n.ONE:n.inv(M));const T=n.mul(a,E),P=n.mul(p,E),I=n.mul(M,E);if(R)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:T,y:P}}),Y=x_(K=>{if(K.is0()){if(e.allowInfinityPoint&&!n.is0(K.Y))return;throw new Error("bad point: ZERO")}const{x:E,y:a}=K.toAffine();if(!n.isValid(E)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!N(E,a))throw new Error("bad point: equation left != right");if(!K.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ee(K,E,a,p,M){return a=new te(n.mul(a.X,K),a.Y,a.Z),E=S_(p,E),a=S_(M,a),E.add(a)}class te{constructor(E,a,p){this.X=k("x",E),this.Y=k("y",a,!0),this.Z=k("z",p),Object.freeze(this)}static CURVE(){return s}static fromAffine(E){const{x:a,y:p}=E||{};if(!E||!n.isValid(a)||!n.isValid(p))throw new Error("invalid affine point");if(E instanceof te)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(p)?te.ZERO:new te(a,p,n.ONE)}static fromBytes(E){const a=te.fromAffine(A(Wa(E,void 0,"point")));return a.assertValidity(),a}static fromHex(E){return te.fromBytes(si("pointHex",E))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,a=!0){return V.createCache(this,E),a||this.multiply(Vv),this}assertValidity(){Y(this)}hasEvenY(){const{y:E}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(E)}equals(E){F(E);const{X:a,Y:p,Z:M}=this,{X:R,Y:T,Z:P}=E,I=n.eql(n.mul(a,P),n.mul(R,M)),y=n.eql(n.mul(p,P),n.mul(T,M));return I&&y}negate(){return new te(this.X,n.neg(this.Y),this.Z)}double(){const{a:E,b:a}=s,p=n.mul(a,Vv),{X:M,Y:R,Z:T}=this;let P=n.ZERO,I=n.ZERO,y=n.ZERO,u=n.mul(M,M),S=n.mul(R,R),W=n.mul(T,T),$=n.mul(M,R);return $=n.add($,$),y=n.mul(M,T),y=n.add(y,y),P=n.mul(E,y),I=n.mul(p,W),I=n.add(P,I),P=n.sub(S,I),I=n.add(S,I),I=n.mul(P,I),P=n.mul($,P),y=n.mul(p,y),W=n.mul(E,W),$=n.sub(u,W),$=n.mul(E,$),$=n.add($,y),y=n.add(u,u),u=n.add(y,u),u=n.add(u,W),u=n.mul(u,$),I=n.add(I,u),W=n.mul(R,T),W=n.add(W,W),u=n.mul(W,$),P=n.sub(P,u),y=n.mul(W,S),y=n.add(y,y),y=n.add(y,y),new te(P,I,y)}add(E){F(E);const{X:a,Y:p,Z:M}=this,{X:R,Y:T,Z:P}=E;let I=n.ZERO,y=n.ZERO,u=n.ZERO;const S=s.a,W=n.mul(s.b,Vv);let $=n.mul(a,R),se=n.mul(p,T),me=n.mul(M,P),_e=n.add(a,p),be=n.add(R,T);_e=n.mul(_e,be),be=n.add($,se),_e=n.sub(_e,be),be=n.add(a,M);let wt=n.add(R,P);return be=n.mul(be,wt),wt=n.add($,me),be=n.sub(be,wt),wt=n.add(p,M),I=n.add(T,P),wt=n.mul(wt,I),I=n.add(se,me),wt=n.sub(wt,I),u=n.mul(S,be),I=n.mul(W,me),u=n.add(I,u),I=n.sub(se,u),u=n.add(se,u),y=n.mul(I,u),se=n.add($,$),se=n.add(se,$),me=n.mul(S,me),be=n.mul(W,be),se=n.add(se,me),me=n.sub($,me),me=n.mul(S,me),be=n.add(be,me),$=n.mul(se,be),y=n.add(y,$),$=n.mul(wt,be),I=n.mul(_e,I),I=n.sub(I,$),$=n.mul(_e,se),u=n.mul(wt,u),u=n.add(u,$),new te(I,y,u)}subtract(E){return this.add(E.negate())}is0(){return this.equals(te.ZERO)}multiply(E){const{endo:a}=e;if(!i.isValidNot0(E))throw new Error("invalid scalar: out of range");let p,M;const R=T=>V.cached(this,T,P=>Th(te,P));if(a){const{k1neg:T,k1:P,k2neg:I,k2:y}=Q(E),{p:u,f:S}=R(P),{p:W,f:$}=R(y);M=S.add($),p=ee(a.beta,u,W,T,I)}else{const{p:T,f:P}=R(E);p=T,M=P}return Th(te,[p,M])[0]}multiplyUnsafe(E){const{endo:a}=e,p=this;if(!i.isValid(E))throw new Error("invalid scalar: out of range");if(E===ku||p.is0())return te.ZERO;if(E===o0)return p;if(V.hasCache(this))return this.multiply(E);if(a){const{k1neg:M,k1:R,k2neg:T,k2:P}=Q(E),{p1:I,p2:y}=Vz(te,p,R,P);return ee(a.beta,I,y,M,T)}else return V.unsafe(p,E)}multiplyAndAddUnsafe(E,a,p){const M=this.multiplyUnsafe(a).add(E.multiplyUnsafe(p));return M.is0()?void 0:M}toAffine(E){return G(this,E)}isTorsionFree(){const{isTorsionFree:E}=e;return o===o0?!0:E?E(te,this):V.unsafe(this,l).is0()}clearCofactor(){const{clearCofactor:E}=e;return o===o0?this:E?E(te,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(E=!0){return Xh(E,"isCompressed"),this.assertValidity(),x(te,this,E)}toHex(E=!0){return Wh(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(E=!0){return this.toBytes(E)}_setWindowSize(E){this.precompute(E)}static normalizeZ(E){return Th(te,E)}static msm(E,a){return Ck(te,i,E,a)}static fromPrivateKey(E){return te.BASE.multiply(Hp(i,E))}}te.BASE=new te(s.Gx,s.Gy,n.ONE),te.ZERO=new te(n.ZERO,n.ONE,n.ZERO),te.Fp=n,te.Fn=i;const U=i.BITS,V=new Rk(te,e.endo?Math.ceil(U/2):U);return te.BASE.precompute(8),te}function Zk(r){return Uint8Array.of(r?2:3)}function Qk(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function BW(r,e={}){const{Fn:t}=r,n=e.randomBytes||LA,i=Object.assign(Qk(r.Fp,t),{seed:bk(t.ORDER)});function s(x){try{return!!Hp(t,x)}catch{return!1}}function o(x,A){const{publicKey:L,publicKeyUncompressed:N}=i;try{const C=x.length;return A===!0&&C!==L||A===!1&&C!==N?!1:!!r.fromBytes(x)}catch{return!1}}function l(x=n(i.seed)){return Fz(Wa(x,i.seed,"seed"),t.ORDER)}function c(x,A=!0){return r.BASE.multiply(Hp(t,x)).toBytes(A)}function d(x){const A=l(x);return{secretKey:A,publicKey:c(A)}}function h(x){if(typeof x=="bigint")return!1;if(x instanceof r)return!0;const{secretKey:A,publicKey:L,publicKeyUncompressed:N}=i;if(t.allowedLengths||A===L)return;const C=si("key",x).length;return C===L||C===N}function w(x,A,L=!0){if(h(x)===!0)throw new Error("first arg must be private key");if(h(A)===!1)throw new Error("second arg must be public key");const N=Hp(t,x);return r.fromHex(A).multiply(N).toBytes(L)}return Object.freeze({getPublicKey:c,getSharedSecret:w,keygen:d,Point:r,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:l,isValidPrivateKey:s,randomPrivateKey:l,normPrivateKeyToScalar:x=>Hp(t,x),precompute(x=8,A=r.BASE){return A.precompute(x,!1)}},lengths:i})}function UW(r,e,t={}){sk(e),yy(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||LA,i=t.hmac||((a,...p)=>Xk(e,a,vl(...p))),{Fp:s,Fn:o}=r,{ORDER:l,BITS:c}=o,{keygen:d,getPublicKey:h,getSharedSecret:w,utils:_,lengths:x}=BW(r,t),A={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},L="compact";function N(a){const p=l>>o0;return a>p}function C(a,p){if(!o.isValidNot0(p))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return p}function D(a,p){cb(p);const M=x.signature,R=p==="compact"?M:p==="recovered"?M+1:void 0;return Wa(a,R,`${p} signature`)}class k{constructor(p,M,R){this.r=C("r",p),this.s=C("s",M),R!=null&&(this.recovery=R),Object.freeze(this)}static fromBytes(p,M=L){D(p,M);let R;if(M==="der"){const{r:y,s:u}=bu.toSig(Wa(p));return new k(y,u)}M==="recovered"&&(R=p[0],M="compact",p=p.subarray(1));const T=o.BYTES,P=p.subarray(0,T),I=p.subarray(T,T*2);return new k(o.fromBytes(P),o.fromBytes(I),R)}static fromHex(p,M){return this.fromBytes(__(p),M)}addRecoveryBit(p){return new k(this.r,this.s,p)}recoverPublicKey(p){const M=s.ORDER,{r:R,s:T,recovery:P}=this;if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");if(l*$k<M&&P>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=P===2||P===3?R+l:R;if(!s.isValid(y))throw new Error("recovery id 2 or 3 invalid");const u=s.toBytes(y),S=r.fromBytes(vl(Zk((P&1)===0),u)),W=o.inv(y),$=Q(si("msgHash",p)),se=o.create(-$*W),me=o.create(T*W),_e=r.BASE.multiplyUnsafe(se).add(S.multiplyUnsafe(me));if(_e.is0())throw new Error("point at infinify");return _e.assertValidity(),_e}hasHighS(){return N(this.s)}toBytes(p=L){if(cb(p),p==="der")return __(bu.hexFromSig(this));const M=o.toBytes(this.r),R=o.toBytes(this.s);if(p==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return vl(Uint8Array.of(this.recovery),M,R)}return vl(M,R)}toHex(p){return Wh(this.toBytes(p))}assertValidity(){}static fromCompact(p){return k.fromBytes(si("sig",p),"compact")}static fromDER(p){return k.fromBytes(si("sig",p),"der")}normalizeS(){return this.hasHighS()?new k(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Wh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Wh(this.toBytes("compact"))}}const F=t.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const M=B1(p),R=p.length*8-c;return R>0?M>>BigInt(R):M},Q=t.bits2int_modN||function(p){return o.create(F(p))},G=gy(c);function Y(a){return ub("num < 2^"+c,a,ku,G),o.toBytes(a)}function ee(a,p){return Wa(a,void 0,"message"),p?Wa(e(a),void 0,"prehashed message"):a}function te(a,p,M){if(["recovered","canonical"].some(se=>se in M))throw new Error("sign() legacy options not supported");const{lowS:R,prehash:T,extraEntropy:P}=jS(M,A);a=ee(a,T);const I=Q(a),y=Hp(o,p),u=[Y(y),Y(I)];if(P!=null&&P!==!1){const se=P===!0?n(x.secretKey):P;u.push(si("extraEntropy",se))}const S=vl(...u),W=I;function $(se){const me=F(se);if(!o.isValidNot0(me))return;const _e=o.inv(me),be=r.BASE.multiply(me).toAffine(),wt=o.create(be.x);if(wt===ku)return;const Ze=o.create(_e*o.create(W+wt*y));if(Ze===ku)return;let Pe=(be.x===wt?0:2)|Number(be.y&o0),ge=Ze;return R&&N(Ze)&&(ge=o.neg(Ze),Pe^=1),new k(wt,ge,Pe)}return{seed:S,k2sig:$}}function U(a,p,M={}){a=si("message",a);const{seed:R,k2sig:T}=te(a,p,M);return Cz(e.outputLen,o.BYTES,i)(R,T)}function V(a){let p;const M=typeof a=="string"||my(a),R=!M&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!M&&!R)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(R)p=new k(a.r,a.s);else if(M){try{p=k.fromBytes(si("sig",a),"der")}catch(T){if(!(T instanceof bu.Err))throw T}if(!p)try{p=k.fromBytes(si("sig",a),"compact")}catch{return!1}}return p||!1}function K(a,p,M,R={}){const{lowS:T,prehash:P,format:I}=jS(R,A);if(M=si("publicKey",M),p=ee(si("message",p),P),"strict"in R)throw new Error("options.strict was renamed to lowS");const y=I===void 0?V(a):k.fromBytes(si("sig",a),I);if(y===!1)return!1;try{const u=r.fromBytes(M);if(T&&y.hasHighS())return!1;const{r:S,s:W}=y,$=Q(p),se=o.inv(W),me=o.create($*se),_e=o.create(S*se),be=r.BASE.multiplyUnsafe(me).add(u.multiplyUnsafe(_e));return be.is0()?!1:o.create(be.x)===S}catch{return!1}}function E(a,p,M={}){const{prehash:R}=jS(M,A);return p=ee(p,R),k.fromBytes(a,"recovered").recoverPublicKey(p).toBytes()}return Object.freeze({keygen:d,getPublicKey:h,getSharedSecret:w,utils:_,lengths:x,Point:r,sign:U,verify:K,recoverPublicKey:E,Signature:k,hash:e})}function FW(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=id(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:s}}function zW(r){const{CURVE:e,curveOpts:t}=FW(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function WW(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Mk(t.Fn.ORDER,t.Fn.BITS))})}function VW(r){const{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:i}=zW(r),s=DW(e,t),o=UW(s,n,i);return WW(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function HW(r,e){const t=n=>VW({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jA={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},GW={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},dC=BigInt(2);function jW(r){const e=jA.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),c=BigInt(88),d=r*r*r%e,h=d*d*r%e,w=ii(h,t,e)*h%e,_=ii(w,t,e)*h%e,x=ii(_,dC,e)*d%e,A=ii(x,i,e)*x%e,L=ii(A,s,e)*A%e,N=ii(L,l,e)*L%e,C=ii(N,c,e)*N%e,D=ii(C,l,e)*L%e,k=ii(D,t,e)*h%e,F=ii(k,o,e)*A%e,Q=ii(F,n,e)*d%e,G=ii(Q,dC,e);if(!fb.eql(fb.sqr(G),r))throw new Error("Cannot find square root");return G}const fb=id(jA.p,{sqrt:jW}),qA=HW({...jA,Fp:fb,lowS:!0,endo:GW},fk),qW=b0.utils.randomPrivateKey,pC=()=>{const r=b0.utils.randomPrivateKey(),e=R_(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},R_=b0.getPublicKey;function mC(r){try{return b0.ExtendedPoint.fromHex(r),!0}catch{return!1}}const KA=(r,e)=>b0.sign(r,e.slice(0,32)),KW=b0.verify,Qn=r=>mn.isBuffer(r)?r:r instanceof Uint8Array?mn.from(r.buffer,r.byteOffset,r.byteLength):mn.from(r);let YA=class{constructor(e){Object.assign(this,e)}encode(){return mn.from(DS.serialize(dg,this))}static decode(e){return DS.deserialize(dg,this,e)}static decodeUnchecked(e){return DS.deserializeUnchecked(dg,this,e)}};class YW extends YA{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const dg=new Map;var Jk;const eO=32,Al=32;function XW(r){return r._bn!==void 0}let gC=1;class Mt extends YA{constructor(e){if(super({}),this._bn=void 0,XW(e))this._bn=e._bn;else{if(typeof e=="string"){const t=fs.decode(e);if(t.length!=Al)throw new Error("Invalid public key input");this._bn=new Y2(t)}else this._bn=new Y2(e);if(this._bn.byteLength()>Al)throw new Error("Invalid public key input")}}static unique(){const e=new Mt(gC);return gC+=1,new Mt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return fs.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(mn);if(e.length===Al)return e;const t=mn.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=mn.concat([e.toBuffer(),mn.from(t),n.toBuffer()]),s=Q2(i);return new Mt(s)}static createProgramAddressSync(e,t){let n=mn.alloc(0);e.forEach(function(s){if(s.length>eO)throw new TypeError("Max seed length exceeded");n=mn.concat([n,Qn(s)])}),n=mn.concat([n,t.toBuffer(),mn.from("ProgramDerivedAddress")]);const i=Q2(n);if(mC(i))throw new Error("Invalid seeds, address must fall off the curve");return new Mt(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(mn.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Mt(e);return mC(t.toBytes())}}Jk=Mt;Mt.default=new Jk("11111111111111111111111111111111");dg.set(Mt,{kind:"struct",fields:[["_bn","u256"]]});class $W{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Qn(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Qn(qW()),this._publicKey=Qn(R_(this._secretKey))}get publicKey(){return new Mt(this._publicKey)}get secretKey(){return mn.concat([this._secretKey,this._publicKey],64)}}const ZW=new Mt("BPFLoader1111111111111111111111111111111111"),$c=1232,V1=127,kg=64;class XA extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(XA.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class $A extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty($A.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Gp extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Gp.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Og{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const nr=(r="publicKey")=>Ee.blob(32,r),QW=(r="signature")=>Ee.blob(64,r),Rh=(r="string")=>{const e=Ee.struct([Ee.u32("length"),Ee.u32("lengthPadding"),Ee.blob(Ee.offset(Ee.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,l)=>{const c={chars:mn.from(s,"utf8")};return n(c,o,l)},i.alloc=s=>Ee.u32().span+Ee.u32().span+mn.from(s,"utf8").length,i},JW=(r="authorized")=>Ee.struct([nr("staker"),nr("withdrawer")],r),eV=(r="lockup")=>Ee.struct([Ee.ns64("unixTimestamp"),Ee.ns64("epoch"),nr("custodian")],r),tV=(r="voteInit")=>Ee.struct([nr("nodePubkey"),nr("authorizedVoter"),nr("authorizedWithdrawer"),Ee.u8("commission")],r),nV=(r="voteAuthorizeWithSeedArgs")=>Ee.struct([Ee.u32("voteAuthorizationType"),nr("currentAuthorityDerivedKeyOwnerPubkey"),Rh("currentAuthorityDerivedKeySeed"),nr("newAuthorized")],r);function tO(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return tO({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function mo(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Bo(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function yr(r,e){if(!r)throw new Error(e||"Assertion failed")}class H1{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const l=o.toBase58();let c=n.get(l);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const l of o.keys){const c=i(l.pubkey);c.isSigner||(c.isSigner=l.isSigner),c.isWritable||(c.isWritable=l.isWritable)}}return new H1(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];yr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{yr(t.length>0,"Expected at least one writable signer key");const[c]=t[0];yr(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...t.map(([c])=>new Mt(c)),...n.map(([c])=>new Mt(c)),...i.map(([c])=>new Mt(c)),...s.map(([c])=>new Mt(c))];return[o,l]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const l=new Mt(s),c=e.findIndex(d=>d.equals(l));c>=0&&(yr(c<256,"Max lookup table index exceeded"),n.push(c),i.push(l),this.keyMetaMap.delete(s))}return[n,i]}}const nO="Reached end of buffer unexpectedly";function wl(r){if(r.length===0)throw new Error(nO);return r.shift()}function go(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(nO);return r.splice(...e)}class Ga{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Mt(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:fs.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Og(this.staticAccountKeys)}static compile(e){const t=H1.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new Og(i).compileInstructions(e.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:fs.encode(l.data)}));return new Ga({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Bo(t,e);const n=this.instructions.map(w=>{const{accounts:_,programIdIndex:x}=w,A=Array.from(fs.decode(w.data));let L=[];Bo(L,_.length);let N=[];return Bo(N,A.length),{programIdIndex:x,keyIndicesCount:mn.from(L),keyIndices:_,dataLength:mn.from(N),data:A}});let i=[];Bo(i,n.length);let s=mn.alloc($c);mn.from(i).copy(s);let o=i.length;n.forEach(w=>{const x=Ee.struct([Ee.u8("programIdIndex"),Ee.blob(w.keyIndicesCount.length,"keyIndicesCount"),Ee.seq(Ee.u8("keyIndex"),w.keyIndices.length,"keyIndices"),Ee.blob(w.dataLength.length,"dataLength"),Ee.seq(Ee.u8("userdatum"),w.data.length,"data")]).encode(w,s,o);o+=x}),s=s.slice(0,o);const l=Ee.struct([Ee.blob(1,"numRequiredSignatures"),Ee.blob(1,"numReadonlySignedAccounts"),Ee.blob(1,"numReadonlyUnsignedAccounts"),Ee.blob(t.length,"keyCount"),Ee.seq(nr("key"),e,"keys"),nr("recentBlockhash")]),c={numRequiredSignatures:mn.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:mn.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:mn.from([this.header.numReadonlyUnsignedAccounts]),keyCount:mn.from(t),keys:this.accountKeys.map(w=>Qn(w.toBytes())),recentBlockhash:fs.decode(this.recentBlockhash)};let d=mn.alloc(2048);const h=l.encode(c,d);return s.copy(d,h),d.slice(0,h+s.length)}static from(e){let t=[...e];const n=wl(t);if(n!==(n&V1))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=wl(t),s=wl(t),o=mo(t);let l=[];for(let _=0;_<o;_++){const x=go(t,0,Al);l.push(new Mt(mn.from(x)))}const c=go(t,0,Al),d=mo(t);let h=[];for(let _=0;_<d;_++){const x=wl(t),A=mo(t),L=go(t,0,A),N=mo(t),C=go(t,0,N),D=fs.encode(mn.from(C));h.push({programIdIndex:x,accounts:L,data:D})}const w={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:fs.encode(mn.from(c)),accountKeys:l,instructions:h};return new Ga(w)}}class $h{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Og(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,l)=>o+l.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=H1.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const h of s){const w=t.extractTableLookup(h);if(w!==void 0){const[_,{writable:x,readonly:A}]=w;n.push(_),i.writable.push(...x),i.readonly.push(...A)}}const[o,l]=t.getMessageComponents(),d=new Og(l,i).compileInstructions(e.instructions);return new $h({header:o,staticAccountKeys:l,recentBlockhash:e.recentBlockhash,compiledInstructions:d,addressTableLookups:n})}serialize(){const e=Array();Bo(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Bo(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Bo(s,this.addressTableLookups.length);const o=Ee.struct([Ee.u8("prefix"),Ee.struct([Ee.u8("numRequiredSignatures"),Ee.u8("numReadonlySignedAccounts"),Ee.u8("numReadonlyUnsignedAccounts")],"header"),Ee.blob(e.length,"staticAccountKeysLength"),Ee.seq(nr(),this.staticAccountKeys.length,"staticAccountKeys"),nr("recentBlockhash"),Ee.blob(n.length,"instructionsLength"),Ee.blob(t.length,"serializedInstructions"),Ee.blob(s.length,"addressTableLookupsLength"),Ee.blob(i.length,"serializedAddressTableLookups")]),l=new Uint8Array($c),d=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:fs.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},l);return l.slice(0,d)}serializeInstructions(){let e=0;const t=new Uint8Array($c);for(const n of this.compiledInstructions){const i=Array();Bo(i,n.accountKeyIndexes.length);const s=Array();Bo(s,n.data.length);const o=Ee.struct([Ee.u8("programIdIndex"),Ee.blob(i.length,"encodedAccountKeyIndexesLength"),Ee.seq(Ee.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ee.blob(s.length,"encodedDataLength"),Ee.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array($c);for(const n of this.addressTableLookups){const i=Array();Bo(i,n.writableIndexes.length);const s=Array();Bo(s,n.readonlyIndexes.length);const o=Ee.struct([nr("accountKey"),Ee.blob(i.length,"encodedWritableIndexesLength"),Ee.seq(Ee.u8(),n.writableIndexes.length,"writableIndexes"),Ee.blob(s.length,"encodedReadonlyIndexesLength"),Ee.seq(Ee.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=wl(t),i=n&V1;yr(n!==i,"Expected versioned message but received legacy message");const s=i;yr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:wl(t),numReadonlySignedAccounts:wl(t),numReadonlyUnsignedAccounts:wl(t)},l=[],c=mo(t);for(let A=0;A<c;A++)l.push(new Mt(go(t,0,Al)));const d=fs.encode(go(t,0,Al)),h=mo(t),w=[];for(let A=0;A<h;A++){const L=wl(t),N=mo(t),C=go(t,0,N),D=mo(t),k=new Uint8Array(go(t,0,D));w.push({programIdIndex:L,accountKeyIndexes:C,data:k})}const _=mo(t),x=[];for(let A=0;A<_;A++){const L=new Mt(go(t,0,Al)),N=mo(t),C=go(t,0,N),D=mo(t),k=go(t,0,D);x.push({accountKey:L,writableIndexes:C,readonlyIndexes:k})}return new $h({header:o,staticAccountKeys:l,recentBlockhash:d,compiledInstructions:w,addressTableLookups:x})}}const ZA={deserializeMessageVersion(r){const e=r[0],t=e&V1;return t===e?"legacy":t},deserialize:r=>{const e=ZA.deserializeMessageVersion(r);if(e==="legacy")return Ga.from(r);if(e===0)return $h.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Eu=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const rV=mn.alloc(kg).fill(0);class Cr{constructor(e){this.keys=void 0,this.programId=void 0,this.data=mn.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ur{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Cr(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let L=0;L<t.length;L++)if(t[L].programId===void 0)throw new Error(`Transaction instruction index ${L} has undefined program id`);const i=[],s=[];t.forEach(L=>{L.keys.forEach(C=>{s.push({...C})});const N=L.programId.toString();i.includes(N)||i.push(N)}),i.forEach(L=>{s.push({pubkey:new Mt(L),isSigner:!1,isWritable:!1})});const o=[];s.forEach(L=>{const N=L.pubkey.toString(),C=o.findIndex(D=>D.pubkey.toString()===N);C>-1?(o[C].isWritable=o[C].isWritable||L.isWritable,o[C].isSigner=o[C].isSigner||L.isSigner):o.push(L)}),o.sort(function(L,N){if(L.isSigner!==N.isSigner)return L.isSigner?-1:1;if(L.isWritable!==N.isWritable)return L.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return L.pubkey.toBase58().localeCompare(N.pubkey.toBase58(),"en",C)});const l=o.findIndex(L=>L.pubkey.equals(n));if(l>-1){const[L]=o.splice(l,1);L.isSigner=!0,L.isWritable=!0,o.unshift(L)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const L of this.signatures){const N=o.findIndex(C=>C.pubkey.equals(L.publicKey));if(N>-1)o[N].isSigner||(o[N].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${L.publicKey.toString()}`)}let c=0,d=0,h=0;const w=[],_=[];o.forEach(({pubkey:L,isSigner:N,isWritable:C})=>{N?(w.push(L.toString()),c+=1,C||(d+=1)):(_.push(L.toString()),C||(h+=1))});const x=w.concat(_),A=t.map(L=>{const{data:N,programId:C}=L;return{programIdIndex:x.indexOf(C.toString()),accounts:L.keys.map(D=>x.indexOf(D.pubkey.toString())),data:fs.encode(N)}});return A.forEach(L=>{yr(L.programIdIndex>=0),L.accounts.forEach(N=>yr(N>=0))}),new Ga({header:{numRequiredSignatures:c,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:h},accountKeys:x,recentBlockhash:e,instructions:A})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=KA(n,i.secretKey);this._addSignature(i.publicKey,Qn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){yr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=mn.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(n.missing||(n.missing=[])).push(s):KW(i,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Bo(n,t.length);const i=n.length+t.length*64+e.length,s=mn.alloc(i);return yr(t.length<256),mn.from(n).copy(s,0),t.forEach(({signature:o},l)=>{o!==null&&(yr(o.length===64,"signature has invalid length"),mn.from(o).copy(s,n.length+l*64))}),e.copy(s,n.length+t.length*64),yr(s.length<=$c,`Transaction too large: ${s.length} > ${$c}`),s}get keys(){return yr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return yr(this.instructions.length===1),this.instructions[0].programId}get data(){return yr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=mo(t);let i=[];for(let s=0;s<n;s++){const o=go(t,0,kg);i.push(fs.encode(mn.from(o)))}return ur.populate(Ga.from(t),i)}static populate(e,t=[]){const n=new ur;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==fs.encode(rV)?null:fs.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const l=e.accountKeys[o];return{pubkey:l,isSigner:n.signatures.some(c=>c.publicKey.toString()===l.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Cr({keys:s,programId:e.accountKeys[i.programIdIndex],data:fs.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class QA{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:c}=n,d=o-l;yr(d>0,"Message header is invalid");const h=e.staticAccountKeys.length-o-c;yr(h>=0,"Message header is invalid");const w=e.getAccountKeys(t),_=w.get(0);if(_===void 0)throw new Error("Failed to decompile message because no account keys were found");const x=[];for(const A of i){const L=[];for(const C of A.accountKeyIndexes){const D=w.get(C);if(D===void 0)throw new Error(`Failed to find key for account key index ${C}`);const k=C<o;let F;k?F=C<d:C<w.staticAccountKeys.length?F=C-o<h:F=C-w.staticAccountKeys.length<w.accountKeysFromLookups.writable.length,L.push({pubkey:D,isSigner:C<n.numRequiredSignatures,isWritable:F})}const N=w.get(A.programIdIndex);if(N===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);x.push(new Cr({programId:N,data:Qn(A.data),keys:L}))}return new QA({payerKey:_,instructions:x,recentBlockhash:s})}compileToLegacyMessage(){return Ga.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return $h.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Dg{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)yr(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(kg));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Bo(t,this.signatures.length);const n=Ee.struct([Ee.blob(t.length,"encodedSignaturesLength"),Ee.seq(QW(),this.signatures.length,"signatures"),Ee.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=mo(t);for(let o=0;o<i;o++)n.push(new Uint8Array(go(t,0,kg)));const s=ZA.deserialize(new Uint8Array(t));return new Dg(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));yr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=KA(t,i.secretKey)}}addSignature(e,t){yr(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));yr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const iV=160,sV=64,oV=iV/sV,rO=1e3/oV,gl=new Mt("SysvarC1ock11111111111111111111111111111111"),aV=new Mt("SysvarEpochSchedu1e111111111111111111111111"),lV=new Mt("Sysvar1nstructions1111111111111111111111111"),e_=new Mt("SysvarRecentB1ockHashes11111111111111111111"),Zh=new Mt("SysvarRent111111111111111111111111111111111"),uV=new Mt("SysvarRewards111111111111111111111111111111"),cV=new Mt("SysvarS1otHashes111111111111111111111111111"),fV=new Mt("SysvarS1otHistory11111111111111111111111111"),t_=new Mt("SysvarStakeHistory1111111111111111111111111");class ef extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(e){case"send":l=`Transaction ${t} resulted in an error. 
${n}. `+s+o;break;case"simulate":l=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:l=`Unknown action '${(c=>c)(e)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const hV={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class xn extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function hb(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:l}=e.nonceInfo,c=l.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw s!=null?new ef({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Sh(r){return new Promise(e=>setTimeout(e,r))}function lr(r,e){const t=r.layout.span>=0?r.layout.span:tO(r,e),n=mn.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function xr(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const iO=Ee.nu64("lamportsPerSignature"),sO=Ee.struct([Ee.u32("version"),Ee.u32("state"),nr("authorizedPubkey"),nr("nonce"),Ee.struct([iO],"feeCalculator")]),db=sO.span;class G1{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=sO.decode(Qn(e),0);return new G1({authorizedPubkey:new Mt(t.authorizedPubkey),nonce:new Mt(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function m0(r){const e=Ee.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,s=V8();return i.decode=(o,l)=>{const c=t(o,l);return s.decode(c)},i.encode=(o,l,c)=>{const d=s.encode(o);return n(d,l,c)},i}class dV{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ee.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Ur))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=xr(Ur.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new Mt(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=xr(Ur.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=xr(Ur.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new Mt(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=xr(Ur.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=xr(Ur.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Mt(t),seed:n,space:i,programId:new Mt(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=xr(Ur.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Mt(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=xr(Ur.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Mt(t),seed:n,programId:new Mt(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:o}=xr(Ur.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Mt(t),seed:n,lamports:i,space:s,programId:new Mt(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=xr(Ur.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Mt(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),xr(Ur.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=xr(Ur.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=xr(Ur.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Mt(t)}}static checkProgramId(e){if(!e.equals(Ri.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ur=Object.freeze({Create:{index:0,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports"),Ee.ns64("space"),nr("programId")])},Assign:{index:1,layout:Ee.struct([Ee.u32("instruction"),nr("programId")])},Transfer:{index:2,layout:Ee.struct([Ee.u32("instruction"),m0("lamports")])},CreateWithSeed:{index:3,layout:Ee.struct([Ee.u32("instruction"),nr("base"),Rh("seed"),Ee.ns64("lamports"),Ee.ns64("space"),nr("programId")])},AdvanceNonceAccount:{index:4,layout:Ee.struct([Ee.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Ee.struct([Ee.u32("instruction"),nr("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ee.struct([Ee.u32("instruction"),nr("authorized")])},Allocate:{index:8,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("space")])},AllocateWithSeed:{index:9,layout:Ee.struct([Ee.u32("instruction"),nr("base"),Rh("seed"),Ee.ns64("space"),nr("programId")])},AssignWithSeed:{index:10,layout:Ee.struct([Ee.u32("instruction"),nr("base"),Rh("seed"),nr("programId")])},TransferWithSeed:{index:11,layout:Ee.struct([Ee.u32("instruction"),m0("lamports"),Rh("seed"),nr("programId")])},UpgradeNonceAccount:{index:12,layout:Ee.struct([Ee.u32("instruction")])}});class Ri{constructor(){}static createAccount(e){const t=Ur.Create,n=lr(t,{lamports:e.lamports,space:e.space,programId:Qn(e.programId.toBuffer())});return new Cr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Ur.TransferWithSeed;t=lr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Ur.Transfer;t=lr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Cr({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Ur.AssignWithSeed;t=lr(i,{base:Qn(e.basePubkey.toBuffer()),seed:e.seed,programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ur.Assign;t=lr(i,{programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Cr({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ur.CreateWithSeed,n=lr(t,{base:Qn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Qn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Cr({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new ur;"basePubkey"in e&&"seed"in e?t.add(Ri.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:db,programId:this.programId})):t.add(Ri.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:db,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Ur.InitializeNonceAccount,n=lr(t,{authorized:Qn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e_,isSigner:!1,isWritable:!1},{pubkey:Zh,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Cr(i)}static nonceAdvance(e){const t=Ur.AdvanceNonceAccount,n=lr(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e_,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Cr(i)}static nonceWithdraw(e){const t=Ur.WithdrawNonceAccount,n=lr(t,{lamports:e.lamports});return new Cr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:e_,isSigner:!1,isWritable:!1},{pubkey:Zh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Ur.AuthorizeNonceAccount,n=lr(t,{authorized:Qn(e.newAuthorizedPubkey.toBuffer())});return new Cr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Ur.AllocateWithSeed;t=lr(i,{base:Qn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Ur.Allocate;t=lr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Cr({keys:n,programId:this.programId,data:t})}}Ri.programId=new Mt("11111111111111111111111111111111");const pV=$c-300;let C_=class pb{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/pb.chunkSize)+1+1)}static async load(e,t,n,i,s){{const w=await e.getMinimumBalanceForRentExemption(s.length),_=await e.getAccountInfo(n.publicKey,"confirmed");let x=null;if(_!==null){if(_.executable)return console.error("Program load failed, account is already executable"),!1;_.data.length!==s.length&&(x=x||new ur,x.add(Ri.allocate({accountPubkey:n.publicKey,space:s.length}))),_.owner.equals(i)||(x=x||new ur,x.add(Ri.assign({accountPubkey:n.publicKey,programId:i}))),_.lamports<w&&(x=x||new ur,x.add(Ri.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:w-_.lamports})))}else x=new ur().add(Ri.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:w>0?w:1,space:s.length,programId:i}));x!==null&&await hb(e,x,[t,n],{commitment:"confirmed"})}const o=Ee.struct([Ee.u32("instruction"),Ee.u32("offset"),Ee.u32("bytesLength"),Ee.u32("bytesLengthPadding"),Ee.seq(Ee.u8("byte"),Ee.offset(Ee.u32(),-8),"bytes")]),l=pb.chunkSize;let c=0,d=s,h=[];for(;d.length>0;){const w=d.slice(0,l),_=mn.alloc(l+16);o.encode({instruction:0,offset:c,bytes:w,bytesLength:0,bytesLengthPadding:0},_);const x=new ur().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:_});h.push(hb(e,x,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Sh(1e3/4),c+=l,d=d.slice(l)}await Promise.all(h);{const w=Ee.struct([Ee.u32("instruction")]),_=mn.alloc(w.span);w.encode({instruction:1},_);const x=new ur().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Zh,isSigner:!1,isWritable:!1}],programId:i,data:_}),A="processed",L=await e.sendTransaction(x,[t,n],{preflightCommitment:A}),{context:N,value:C}=await e.confirmTransaction({signature:L,lastValidBlockHeight:x.lastValidBlockHeight,blockhash:x.recentBlockhash},A);if(C.err)throw new Error(`Transaction ${L} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:A})>N.slot)break}catch{}await new Promise(D=>setTimeout(D,Math.round(rO/2)))}}return!0}};C_.chunkSize=pV;const mV=new Mt("BPFLoader2111111111111111111111111111111111");class gV{static getMinNumSignatures(e){return C_.getMinNumSignatures(e)}static load(e,t,n,i,s){return C_.load(e,t,n,s,i)}}function yV(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var qS,yC;function vV(){if(yC)return qS;yC=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function t(n,i){var s,o,l,c,d,h,w;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(w=r.call(n),w==="[object Array]"){for(l="[",o=n.length-1,s=0;s<o;s++)l+=t(n[s],!0)+",";return o>-1&&(l+=t(n[s],!0)),l+"]"}else if(w==="[object Object]"){for(c=e(n).sort(),o=c.length,l="",s=0;s<o;)d=c[s],h=t(n[d],!1),h!==void 0&&(l&&(l+=","),l+=JSON.stringify(d)+":"+h),s++;return"{"+l+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return qS=function(n){var i=t(n,!1);if(i!==void 0)return""+i},qS}var wV=vV(),vC=yV(wV);const Lm=32;function KS(r){let e=0;for(;r>1;)r/=2,e++;return e}function _V(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class oO{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=KS(_V(e+Lm+1))-KS(Lm)-1,n=this.getSlotsInEpoch(t),i=e-(n-Lm);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Lm:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+KS(Lm)):this.slotsPerEpoch}}var xV=globalThis.fetch;class SV extends MW{constructor(e,t,n){const i=s=>{const o=xW(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function MV(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const wC=56;class mb{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=MV(EV,e),n=e.length-wC;yr(n>=0,"lookup table is invalid"),yr(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Ee.struct([Ee.seq(nr(),i,"addresses")]).decode(e.slice(wC));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Mt(t.authority[0]):void 0,addresses:s.map(o=>new Mt(o))}}}const EV={index:1,layout:Ee.struct([Ee.u32("typeIndex"),m0("deactivationSlot"),Ee.nu64("lastExtendedSlot"),Ee.u8("lastExtendedStartIndex"),Ee.u8(),Ee.seq(nr(),Ee.offset(Ee.u8(),-1),"authority")])},bV=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function AV(r){const e=r.match(bV);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",l=i==null?null:parseInt(i.slice(1),10),c=l==null?"":`:${l+1}`;return`${o}//${n}${c}${s}`}const Jr=_y(WA(Mt),Ht(),r=>new Mt(r)),aO=VA([Ht(),$r("base64")]),JA=_y(WA(mn),aO,r=>mn.from(r[0],"base64")),lO=30*1e3;function TV(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Dr(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function _C(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function uO(r){return Zs([It({jsonrpc:$r("2.0"),id:Ht(),result:r}),It({jsonrpc:$r("2.0"),id:Ht(),error:It({code:T0(),message:Ht(),data:An(Y8())})})])}const RV=uO(T0());function Zn(r){return _y(uO(r),RV,e=>"error"in e?e:{...e,result:Yt(e.result,r)})}function pi(r){return Zn(It({context:It({slot:tt()}),value:r}))}function j1(r){return It({context:It({slot:tt()}),value:r})}function YS(r,e){return r===0?new $h({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Mt(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:fs.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Ga(e)}const CV=It({foundation:tt(),foundationTerm:tt(),initial:tt(),taper:tt(),terminal:tt()}),IV=Zn(en(tn(It({epoch:tt(),effectiveSlot:tt(),amount:tt(),postBalance:tt(),commission:An(tn(tt()))})))),NV=en(It({slot:tt(),prioritizationFee:tt()})),PV=It({total:tt(),validator:tt(),foundation:tt(),epoch:tt()}),LV=It({epoch:tt(),slotIndex:tt(),slotsInEpoch:tt(),absoluteSlot:tt(),blockHeight:An(tt()),transactionCount:An(tt())}),kV=It({slotsPerEpoch:tt(),leaderScheduleSlotOffset:tt(),warmup:Pl(),firstNormalEpoch:tt(),firstNormalSlot:tt()}),OV=Bk(Ht(),en(tt())),od=tn(Zs([It({}),Ht()])),DV=It({err:od}),BV=$r("receivedSignature"),UV=It({"solana-core":Ht(),"feature-set":An(tt())}),FV=It({program:Ht(),programId:Jr,parsed:T0()}),zV=It({programId:Jr,accounts:en(Jr),data:Ht()}),xC=pi(It({err:tn(Zs([It({}),Ht()])),logs:tn(en(Ht())),accounts:An(tn(en(tn(It({executable:Pl(),owner:Ht(),lamports:tt(),data:en(Ht()),rentEpoch:An(tt())}))))),unitsConsumed:An(tt()),returnData:An(tn(It({programId:Ht(),data:VA([Ht(),$r("base64")])}))),innerInstructions:An(tn(en(It({index:tt(),instructions:en(Zs([FV,zV]))}))))})),WV=pi(It({byIdentity:Bk(Ht(),en(tt())),range:It({firstSlot:tt(),lastSlot:tt()})}));function VV(r,e,t,n,i,s){const o=t||xV;let l;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,w)=>{const _=await new Promise((x,A)=>{try{n(h,w,(L,N)=>x([L,N]))}catch(L){A(L)}});return await o(..._)}),new vW(async(h,w)=>{const _={method:"POST",body:h,agent:l,headers:Object.assign({"Content-Type":"application/json"},e||{},VH)};try{let x=5,A,L=500;for(;c?A=await c(r,_):A=await o(r,_),!(A.status!==429||i===!0||(x-=1,x===0));)console.error(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${L}ms delay...`),await Sh(L),L*=2;const N=await A.text();A.ok?w(null,N):w(new Error(`${A.status} ${A.statusText}: ${N}`))}catch(x){x instanceof Error&&w(x)}},{})}function HV(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function GV(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const jV=Zn(CV),qV=Zn(PV),KV=Zn(NV),YV=Zn(LV),XV=Zn(kV),$V=Zn(OV),ZV=Zn(tt()),QV=pi(It({total:tt(),circulating:tt(),nonCirculating:tt(),nonCirculatingAccounts:en(Jr)})),gb=It({amount:Ht(),uiAmount:tn(tt()),decimals:tt(),uiAmountString:An(Ht())}),JV=pi(en(It({address:Jr,amount:Ht(),uiAmount:tn(tt()),decimals:tt(),uiAmountString:An(Ht())}))),eH=pi(en(It({pubkey:Jr,account:It({executable:Pl(),owner:Jr,lamports:tt(),data:JA,rentEpoch:tt()})}))),yb=It({program:Ht(),parsed:T0(),space:tt()}),tH=pi(en(It({pubkey:Jr,account:It({executable:Pl(),owner:Jr,lamports:tt(),data:yb,rentEpoch:tt()})}))),nH=pi(en(It({lamports:tt(),address:Jr}))),Bg=It({executable:Pl(),owner:Jr,lamports:tt(),data:JA,rentEpoch:tt()}),rH=It({pubkey:Jr,account:Bg}),iH=_y(Zs([WA(mn),yb]),Zs([aO,yb]),r=>Array.isArray(r)?Yt(r,JA):r),vb=It({executable:Pl(),owner:Jr,lamports:tt(),data:iH,rentEpoch:tt()}),sH=It({pubkey:Jr,account:vb}),oH=It({state:Zs([$r("active"),$r("inactive"),$r("activating"),$r("deactivating")]),active:tt(),inactive:tt()}),aH=Zn(en(It({signature:Ht(),slot:tt(),err:od,memo:tn(Ht()),blockTime:An(tn(tt()))}))),lH=Zn(en(It({signature:Ht(),slot:tt(),err:od,memo:tn(Ht()),blockTime:An(tn(tt()))}))),uH=It({subscription:tt(),result:j1(Bg)}),cH=It({pubkey:Jr,account:Bg}),fH=It({subscription:tt(),result:j1(cH)}),hH=It({parent:tt(),slot:tt(),root:tt()}),dH=It({subscription:tt(),result:hH}),pH=Zs([It({type:Zs([$r("firstShredReceived"),$r("completed"),$r("optimisticConfirmation"),$r("root")]),slot:tt(),timestamp:tt()}),It({type:$r("createdBank"),parent:tt(),slot:tt(),timestamp:tt()}),It({type:$r("frozen"),slot:tt(),timestamp:tt(),stats:It({numTransactionEntries:tt(),numSuccessfulTransactions:tt(),numFailedTransactions:tt(),maxTransactionsPerEntry:tt()})}),It({type:$r("dead"),slot:tt(),timestamp:tt(),err:Ht()})]),mH=It({subscription:tt(),result:pH}),gH=It({subscription:tt(),result:j1(Zs([DV,BV]))}),yH=It({subscription:tt(),result:tt()}),vH=It({pubkey:Ht(),gossip:tn(Ht()),tpu:tn(Ht()),rpc:tn(Ht()),version:tn(Ht())}),SC=It({votePubkey:Ht(),nodePubkey:Ht(),activatedStake:tt(),epochVoteAccount:Pl(),epochCredits:en(VA([tt(),tt(),tt()])),commission:tt(),lastVote:tt(),rootSlot:tn(tt())}),wH=Zn(It({current:en(SC),delinquent:en(SC)})),_H=Zs([$r("processed"),$r("confirmed"),$r("finalized")]),xH=It({slot:tt(),confirmations:tn(tt()),err:od,confirmationStatus:An(_H)}),SH=pi(en(tn(xH))),MH=Zn(tt()),cO=It({accountKey:Jr,writableIndexes:en(tt()),readonlyIndexes:en(tt())}),eT=It({signatures:en(Ht()),message:It({accountKeys:en(Ht()),header:It({numRequiredSignatures:tt(),numReadonlySignedAccounts:tt(),numReadonlyUnsignedAccounts:tt()}),instructions:en(It({accounts:en(tt()),data:Ht(),programIdIndex:tt()})),recentBlockhash:Ht(),addressTableLookups:An(en(cO))})}),fO=It({pubkey:Jr,signer:Pl(),writable:Pl(),source:An(Zs([$r("transaction"),$r("lookupTable")]))}),hO=It({accountKeys:en(fO),signatures:en(Ht())}),dO=It({parsed:T0(),program:Ht(),programId:Jr}),pO=It({accounts:en(Jr),data:Ht(),programId:Jr}),EH=Zs([pO,dO]),bH=Zs([It({parsed:T0(),program:Ht(),programId:Ht()}),It({accounts:en(Ht()),data:Ht(),programId:Ht()})]),mO=_y(EH,bH,r=>"accounts"in r?Yt(r,pO):Yt(r,dO)),gO=It({signatures:en(Ht()),message:It({accountKeys:en(fO),instructions:en(mO),recentBlockhash:Ht(),addressTableLookups:An(tn(en(cO)))})}),I_=It({accountIndex:tt(),mint:Ht(),owner:An(Ht()),programId:An(Ht()),uiTokenAmount:gb}),yO=It({writable:en(Jr),readonly:en(Jr)}),q1=It({err:od,fee:tt(),innerInstructions:An(tn(en(It({index:tt(),instructions:en(It({accounts:en(tt()),data:Ht(),programIdIndex:tt()}))})))),preBalances:en(tt()),postBalances:en(tt()),logMessages:An(tn(en(Ht()))),preTokenBalances:An(tn(en(I_))),postTokenBalances:An(tn(en(I_))),loadedAddresses:An(yO),computeUnitsConsumed:An(tt()),costUnits:An(tt())}),tT=It({err:od,fee:tt(),innerInstructions:An(tn(en(It({index:tt(),instructions:en(mO)})))),preBalances:en(tt()),postBalances:en(tt()),logMessages:An(tn(en(Ht()))),preTokenBalances:An(tn(en(I_))),postTokenBalances:An(tn(en(I_))),loadedAddresses:An(yO),computeUnitsConsumed:An(tt()),costUnits:An(tt())}),R0=Zs([$r(0),$r("legacy")]),ad=It({pubkey:Ht(),lamports:tt(),postBalance:tn(tt()),rewardType:tn(Ht()),commission:An(tn(tt()))}),AH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),transactions:en(It({transaction:eT,meta:tn(q1),version:An(R0)})),rewards:An(en(ad)),blockTime:tn(tt()),blockHeight:tn(tt())}))),TH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),rewards:An(en(ad)),blockTime:tn(tt()),blockHeight:tn(tt())}))),RH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),transactions:en(It({transaction:hO,meta:tn(q1),version:An(R0)})),rewards:An(en(ad)),blockTime:tn(tt()),blockHeight:tn(tt())}))),CH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),transactions:en(It({transaction:gO,meta:tn(tT),version:An(R0)})),rewards:An(en(ad)),blockTime:tn(tt()),blockHeight:tn(tt())}))),IH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),transactions:en(It({transaction:hO,meta:tn(tT),version:An(R0)})),rewards:An(en(ad)),blockTime:tn(tt()),blockHeight:tn(tt())}))),NH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),rewards:An(en(ad)),blockTime:tn(tt()),blockHeight:tn(tt())}))),PH=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),transactions:en(It({transaction:eT,meta:tn(q1)})),rewards:An(en(ad)),blockTime:tn(tt())}))),MC=Zn(tn(It({blockhash:Ht(),previousBlockhash:Ht(),parentSlot:tt(),signatures:en(Ht()),blockTime:tn(tt())}))),XS=Zn(tn(It({slot:tt(),meta:tn(q1),blockTime:An(tn(tt())),transaction:eT,version:An(R0)}))),Hv=Zn(tn(It({slot:tt(),transaction:gO,meta:tn(tT),blockTime:An(tn(tt())),version:An(R0)}))),LH=pi(It({blockhash:Ht(),lastValidBlockHeight:tt()})),kH=pi(Pl()),OH=It({slot:tt(),numTransactions:tt(),numSlots:tt(),samplePeriodSecs:tt()}),DH=Zn(en(OH)),BH=pi(tn(It({feeCalculator:It({lamportsPerSignature:tt()})}))),UH=Zn(Ht()),FH=Zn(Ht()),zH=It({err:od,logs:en(Ht()),signature:Ht()}),WH=It({result:j1(zH),subscription:tt()}),VH={"solana-client":"js/1.0.0-maintenance"};class vO{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const d={};return async h=>{const{commitment:w,config:_}=Dr(h),x=this._buildArgs([],w,void 0,_),A=vC(x);return d[A]=d[A]??(async()=>{try{const L=await this._rpcRequest("getBlockHeight",x),N=Yt(L,Zn(tt()));if("error"in N)throw new xn(N.error,"failed to get block height information");return N.result}finally{delete d[A]}})(),await d[A]}})();let n,i,s,o,l,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,l=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=TV(e),this._rpcWsEndpoint=n||AV(e),this._rpcClient=VV(e,i,s,o,l,c),this._rpcRequest=HV(this._rpcClient),this._rpcBatchRequest=GV(this._rpcClient),this._rpcWebSocket=new SV(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),l=Yt(o,pi(tt()));if("error"in l)throw new xn(l.error,`failed to get balance for ${e.toBase58()}`);return l.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=Yt(t,Zn(tn(tt())));if("error"in n)throw new xn(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=Yt(e,Zn(tt()));if("error"in t)throw new xn(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=Yt(e,ZV);if("error"in t)throw new xn(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=Yt(n,QV);if("error"in i)throw new xn(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=Yt(i,pi(gb));if("error"in s)throw new xn(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=Yt(i,pi(gb));if("error"in s)throw new xn(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Dr(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const l=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",l),d=Yt(c,eH);if("error"in d)throw new xn(d.error,`failed to get token accounts owned by account ${e.toBase58()}`);return d.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),l=Yt(o,tH);if("error"in l)throw new xn(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=Yt(i,nH);if("error"in s)throw new xn(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=Yt(i,JV);if("error"in s)throw new xn(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),l=Yt(o,pi(tn(Bg)));if("error"in l)throw new xn(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),l=Yt(o,pi(tn(vb)));if("error"in l)throw new xn(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Dr(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),l=await this._rpcRequest("getMultipleAccounts",o),c=Yt(l,pi(en(tn(vb))));if("error"in c)throw new xn(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Dr(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"base64",i),l=await this._rpcRequest("getMultipleAccounts",o),c=Yt(l,pi(en(tn(Bg))));if("error"in c)throw new xn(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Dr(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),l=await this._rpcRequest("getStakeActivation",o),c=Yt(l,Zn(oH));if("error"in c)throw new xn(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Dr(t),{encoding:s,...o}=i||{},l=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:_C(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",l),d=en(rH),h=o.withContext===!0?Yt(c,pi(d)):Yt(c,Zn(d));if("error"in h)throw new xn(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),l=Yt(o,Zn(en(sH)));if("error"in l)throw new xn(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=fs.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return yr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((c,d)=>{try{n=this.onSignature(t,(w,_)=>{n=void 0;const x={context:_,value:w};c({__type:Eu.PROCESSED,response:x})},e);const h=new Promise(w=>{n==null?w():i=this._onSubscriptionStateChange(n,_=>{_==="subscribed"&&w()})});(async()=>{if(await h,s)return;const w=await this.getSignatureStatus(t);if(s||w==null)return;const{context:_,value:x}=w;if(x!=null)if(x!=null&&x.err)d(x.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:Eu.PROCESSED,response:{context:_,value:x}})}})()}catch(h){d(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(w=>{const _=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let x=await _();if(!s){for(;x<=n;)if(await Sh(1e3),s||(x=await _(),s))return;w({__type:Eu.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),d=this.getCancellationPromise(t);let h;try{const w=await Promise.race([d,c,o]);if(w.__type===Eu.PROCESSED)h=w.response;else throw new XA(i)}finally{s=!0,l()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let l=!1;const c=new Promise(x=>{let A=s,L=null;const N=async()=>{try{const{context:C,value:D}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return L=C.slot,D==null?void 0:D.nonce}catch{return A}};(async()=>{if(A=await N(),!l)for(;;){if(s!==A){x({__type:Eu.NONCE_INVALID,slotInWhichNonceDidAdvance:L});return}if(await Sh(2e3),l||(A=await N(),l))return}})()}),{abortConfirmation:d,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),w=this.getCancellationPromise(t);let _;try{const x=await Promise.race([w,h,c]);if(x.__type===Eu.PROCESSED)_=x.response;else{let A;for(;;){const L=await this.getSignatureStatus(o);if(L==null)break;if(L.context.slot<(x.slotInWhichNonceDidAdvance??n)){await Sh(400);continue}A=L;break}if(A!=null&&A.value){const L=e||"finalized",{confirmationStatus:N}=A.value;switch(L){case"processed":case"recent":if(N!=="processed"&&N!=="confirmed"&&N!=="finalized")throw new Gp(o);break;case"confirmed":case"single":case"singleGossip":if(N!=="confirmed"&&N!=="finalized")throw new Gp(o);break;case"finalized":case"max":case"root":if(N!=="finalized")throw new Gp(o);break;default:}_={context:A.context,value:{err:A.value.err}}}else throw new Gp(o)}}finally{l=!0,d()}return _}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(c=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{d=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Eu.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let l;try{const c=await Promise.race([o,i]);if(c.__type===Eu.PROCESSED)l=c.response;else throw new $A(t,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return l}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=Yt(e,Zn(en(vH)));if("error"in t)throw new xn(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=Yt(n,wH);if("error"in i)throw new xn(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Dr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=Yt(s,Zn(tt()));if("error"in o)throw new xn(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Dr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=Yt(s,Zn(Ht()));if("error"in o)throw new xn(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=Yt(i,Zn(en(Jr)));if("error"in s)throw new xn(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);yr(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=Yt(i,SH);if("error"in s)throw new xn(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Dr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=Yt(s,Zn(tt()));if("error"in o)throw new xn(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=Yt(n,jV);if("error"in i)throw new xn(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Dr(n),o=this._buildArgs([e.map(d=>d.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),l=await this._rpcRequest("getInflationReward",o),c=Yt(l,IV);if("error"in c)throw new xn(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=Yt(e,qV);if("error"in t)throw new xn(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Dr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=Yt(s,YV);if("error"in o)throw new xn(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=Yt(e,XV);if("error"in t)throw new xn(t.error,"failed to get epoch schedule");const n=t.result;return new oO(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=Yt(e,$V);if("error"in t)throw new xn(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=Yt(i,MH);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=Yt(t,DH);if("error"in n)throw new xn(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=Yt(i,BH);if("error"in s)throw new xn(s.error,"failed to get fee calculator");const{context:o,value:l}=s.result;return{context:o,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(e,t){const n=Qn(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=Yt(s,pi(tn(tt())));if("error"in o)throw new xn(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(l=>l.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=Yt(i,KV);if("error"in s)throw new xn(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Dr(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=Yt(s,LH);if("error"in o)throw new xn(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),l=Yt(o,kH);if("error"in l)throw new xn(l.error,"failed to determine if the blockhash `"+e+"`is valid");return l.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=Yt(e,Zn(UV));if("error"in t)throw new xn(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=Yt(e,Zn(Ht()));if("error"in t)throw new xn(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const l=Yt(o,RH);if("error"in l)throw l.error;return l.result}case"none":{const l=Yt(o,TH);if("error"in l)throw l.error;return l.result}default:{const l=Yt(o,AH);if("error"in l)throw l.error;const{result:c}=l;return c?{...c,transactions:c.transactions.map(({transaction:d,meta:h,version:w})=>({meta:h,transaction:{...d,message:YS(w,d.message)},version:w}))}:null}}}catch(l){throw new xn(l,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const l=Yt(o,IH);if("error"in l)throw l.error;return l.result}case"none":{const l=Yt(o,NH);if("error"in l)throw l.error;return l.result}default:{const l=Yt(o,CH);if("error"in l)throw l.error;return l.result}}}catch(l){throw new xn(l,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:l,...c}=e;n=l,t=c}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=Yt(s,WV);if("error"in o)throw new xn(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),l=Yt(o,XS);if("error"in l)throw new xn(l.error,"failed to get transaction");const c=l.result;return c&&{...c,transaction:{...c.transaction,message:YS(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Dr(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),l=Yt(o,Hv);if("error"in l)throw new xn(l.error,"failed to get transaction");return l.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Dr(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const d=Yt(c,Hv);if("error"in d)throw new xn(d.error,"failed to get transactions");return d.result})}async getTransactions(e,t){const{commitment:n,config:i}=Dr(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const d=Yt(c,XS);if("error"in d)throw new xn(d.error,"failed to get transactions");const h=d.result;return h&&{...h,transaction:{...h.transaction,message:YS(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),s=Yt(i,PH);if("error"in s)throw new xn(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const l={...o,transactions:o.transactions.map(({transaction:c,meta:d})=>{const h=new Ga(c.message);return{meta:d,transaction:{...c,message:h}}})};return{...l,transactions:l.transactions.map(({transaction:c,meta:d})=>({meta:d,transaction:ur.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=Yt(s,Zn(en(tt())));if("error"in o)throw new xn(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=Yt(i,MC);if("error"in s)throw new xn(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=Yt(i,MC);if("error"in s)throw new xn(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),s=Yt(i,XS);if("error"in s)throw new xn(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const l=new Ga(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:ur.populate(l,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=Yt(i,Hv);if("error"in s)throw new xn(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const l=Yt(o,Hv);if("error"in l)throw new xn(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=Yt(s,aH);if("error"in o)throw new xn(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=Yt(s,lH);if("error"in o)throw new xn(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new mb({key:e,state:mb.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=G1.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=Yt(n,UH);if("error"in i)throw new xn(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Sh(100);const n=Date.now()-this._blockhashInfo.lastFetch>=lO;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Sh(rO/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Dr(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=Yt(s,pi(tt()));if("error"in o)throw new xn(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const L=e.serialize(),N=mn.from(L).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(C.innerInstructions=t.innerInstructions);const D=[N,C],k=await this._rpcRequest("simulateTransaction",D),F=Yt(k,xC);if("error"in F)throw new Error("failed to simulate transaction: "+F.error.message);return F.result}let i;if(e instanceof ur){let A=e;i=new ur,i.feePayer=A.feePayer,i.instructions=e.instructions,i.nonceInfo=A.nonceInfo,i.signatures=A.signatures}else i=ur.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let A=this._disableBlockhashCaching;for(;;){const L=await this._blockhashWithExpiryBlockHeight(A);if(i.lastValidBlockHeight=L.lastValidBlockHeight,i.recentBlockhash=L.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const N=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(N)&&!this._blockhashInfo.transactionSignatures.includes(N)){this._blockhashInfo.simulatedSignatures.push(N);break}else A=!0}}const o=i._compile(),l=o.serialize(),d=i._serialize(l).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){const A=(Array.isArray(n)?n:o.nonProgramIds()).map(L=>L.toBase58());h.accounts={encoding:"base64",addresses:A}}s&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const w=[d,h],_=await this._rpcRequest("simulateTransaction",w),x=Yt(_,xC);if("error"in x){let A;if("data"in x.error&&(A=x.error.data.logs,A&&Array.isArray(A))){const L=`
    `,N=L+A.join(L);console.error(x.error.message,N)}throw new ef({action:"simulate",signature:"",transactionMessage:x.error.message,logs:A})}return x.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=l.lastValidBlockHeight,e.recentBlockhash=l.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Qn(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],l=await this._rpcRequest("sendTransaction",o),c=Yt(l,FH);if("error"in c){let d;throw"data"in c.error&&(d=c.error.data.logs),new ef({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:d})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const l=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=i.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:l}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(l){if(l instanceof Error&&console.error(`${o} error:`,l.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=Yt(e,uH);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=vC([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];yr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:i,config:s}=Dr(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=Yt(e,fH);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const{commitment:s,config:o}=Dr(n),l=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:_C(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=Yt(e,WH);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=Yt(e,dH);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=Yt(e,mH);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=Yt(e,gH);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,l)=>{if(o.type==="status"){t(o.result,l);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),l=this._makeSubscription({callback:(c,d)=>{t(c,d);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return l}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=Yt(e,yH);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Vh{constructor(e){this._keypair=void 0,this._keypair=e??pC()}static generate(){return new Vh(pC())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=R_(i);for(let o=0;o<32;o++)if(n[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Vh({publicKey:n,secretKey:e})}static fromSeed(e){const t=R_(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Vh({publicKey:t,secretKey:n})}get publicKey(){return new Mt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Cu=Object.freeze({CreateLookupTable:{index:0,layout:Ee.struct([Ee.u32("instruction"),m0("recentSlot"),Ee.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ee.struct([Ee.u32("instruction")])},ExtendLookupTable:{index:2,layout:Ee.struct([Ee.u32("instruction"),m0(),Ee.seq(nr(),Ee.offset(Ee.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ee.struct([Ee.u32("instruction")])},CloseLookupTable:{index:4,layout:Ee.struct([Ee.u32("instruction")])}});class HH{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ee.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Cu))if(o.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=xr(Cu.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=xr(Cu.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new Mt(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(nT.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class nT{constructor(){}static createLookupTable(e){const[t,n]=Mt.findProgramAddressSync([e.authority.toBuffer(),kk().encode(e.recentSlot)],this.programId),i=Cu.CreateLookupTable,s=lr(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Ri.programId,isSigner:!1,isWritable:!1}];return[new Cr({programId:this.programId,keys:o,data:s}),t]}static freezeLookupTable(e){const t=Cu.FreezeLookupTable,n=lr(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Cr({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Cu.ExtendLookupTable,n=lr(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Ri.programId,isSigner:!1,isWritable:!1}),new Cr({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Cu.DeactivateLookupTable,n=lr(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Cr({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Cu.CloseLookupTable,n=lr(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Cr({programId:this.programId,keys:i,data:n})}}nT.programId=new Mt("AddressLookupTab1e1111111111111111111111111");class GH{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ee.u8("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(_l))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=xr(_l.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=xr(_l.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=xr(_l.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=xr(_l.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(rT.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const _l=Object.freeze({RequestUnits:{index:0,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("units"),Ee.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Ee.struct([Ee.u8("instruction"),Ee.u32("units")])},SetComputeUnitPrice:{index:3,layout:Ee.struct([Ee.u8("instruction"),m0("microLamports")])}});class rT{constructor(){}static requestUnits(e){const t=_l.RequestUnits,n=lr(t,e);return new Cr({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=_l.RequestHeapFrame,n=lr(t,e);return new Cr({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=_l.SetComputeUnitLimit,n=lr(t,e);return new Cr({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=_l.SetComputeUnitPrice,n=lr(t,{microLamports:BigInt(e.microLamports)});return new Cr({keys:[],programId:this.programId,data:n})}}rT.programId=new Mt("ComputeBudget111111111111111111111111111111");const EC=64,bC=32,AC=64,TC=Ee.struct([Ee.u8("numSignatures"),Ee.u8("padding"),Ee.u16("signatureOffset"),Ee.u16("signatureInstructionIndex"),Ee.u16("publicKeyOffset"),Ee.u16("publicKeyInstructionIndex"),Ee.u16("messageDataOffset"),Ee.u16("messageDataSize"),Ee.u16("messageInstructionIndex")]);class K1{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;yr(t.length===bC,`Public Key must be ${bC} bytes but received ${t.length} bytes`),yr(i.length===AC,`Signature must be ${AC} bytes but received ${i.length} bytes`);const o=TC.span,l=o+t.length,c=l+i.length,d=1,h=mn.alloc(c+n.length),w=s??65535;return TC.encode({numSignatures:d,padding:0,signatureOffset:l,signatureInstructionIndex:w,publicKeyOffset:o,publicKeyInstructionIndex:w,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:w},h),h.fill(t,o),h.fill(i,l),h.fill(n,c),new Cr({keys:[],programId:K1.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;yr(t.length===EC,`Private key must be ${EC} bytes but received ${t.length} bytes`);try{const s=Vh.fromSecretKey(t),o=s.publicKey.toBytes(),l=KA(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:l,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}K1.programId=new Mt("Ed25519SigVerify111111111111111111111111111");const jH=(r,e)=>{const t=qA.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};qA.utils.isValidPrivateKey;const qH=qA.getPublicKey,RC=32,$S=20,CC=64,KH=11,ZS=Ee.struct([Ee.u8("numSignatures"),Ee.u16("signatureOffset"),Ee.u8("signatureInstructionIndex"),Ee.u16("ethAddressOffset"),Ee.u8("ethAddressInstructionIndex"),Ee.u16("messageDataOffset"),Ee.u16("messageDataSize"),Ee.u8("messageInstructionIndex"),Ee.blob(20,"ethAddress"),Ee.blob(64,"signature"),Ee.u8("recoveryId")]);class a0{constructor(){}static publicKeyToEthAddress(e){yr(e.length===CC,`Public key must be ${CC} bytes but received ${e.length} bytes`);try{return mn.from(fC(Qn(e))).slice(-$S)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:o}=e;return a0.createInstructionWithEthAddress({ethAddress:a0.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:o=0}=e;let l;typeof t=="string"?t.startsWith("0x")?l=mn.from(t.substr(2),"hex"):l=mn.from(t,"hex"):l=t,yr(l.length===$S,`Address must be ${$S} bytes but received ${l.length} bytes`);const c=1+KH,d=c,h=c+l.length,w=h+i.length+1,_=1,x=mn.alloc(ZS.span+n.length);return ZS.encode({numSignatures:_,signatureOffset:h,signatureInstructionIndex:o,ethAddressOffset:d,ethAddressInstructionIndex:o,messageDataOffset:w,messageDataSize:n.length,messageInstructionIndex:o,signature:Qn(i),ethAddress:Qn(l),recoveryId:s},x),x.fill(Qn(n),ZS.span),new Cr({keys:[],programId:a0.programId,data:x})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;yr(t.length===RC,`Private key must be ${RC} bytes but received ${t.length} bytes`);try{const s=Qn(t),o=qH(s,!1).slice(1),l=mn.from(fC(Qn(n))),[c,d]=jH(l,s);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:c,recoveryId:d,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}a0.programId=new Mt("KeccakSecp256k11111111111111111111111111111");var wO;const _O=new Mt("StakeConfig11111111111111111111111111111111");class xO{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class xy{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}wO=xy;xy.default=new wO(0,0,Mt.default);class YH{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ee.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Xi))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=xr(Xi.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new xO(new Mt(t.staker),new Mt(t.withdrawer)),lockup:new xy(n.unixTimestamp,n.epoch,new Mt(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),xr(Xi.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=xr(Xi.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Mt(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=xr(Xi.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Mt(s),newAuthorizedPubkey:new Mt(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=xr(Xi.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),xr(Xi.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=xr(Xi.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),xr(Xi.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Y1.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Xi=Object.freeze({Initialize:{index:0,layout:Ee.struct([Ee.u32("instruction"),JW(),eV()])},Authorize:{index:1,layout:Ee.struct([Ee.u32("instruction"),nr("newAuthorized"),Ee.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Ee.struct([Ee.u32("instruction")])},Split:{index:3,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},Withdraw:{index:4,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},Deactivate:{index:5,layout:Ee.struct([Ee.u32("instruction")])},Merge:{index:7,layout:Ee.struct([Ee.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Ee.struct([Ee.u32("instruction"),nr("newAuthorized"),Ee.u32("stakeAuthorizationType"),Rh("authoritySeed"),nr("authorityOwner")])}}),XH=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Y1{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||xy.default,o=Xi.Initialize,l=lr(o,{authorized:{staker:Qn(n.staker.toBuffer()),withdrawer:Qn(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:Qn(s.custodian.toBuffer())}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Zh,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new Cr(c)}static createAccountWithSeed(e){const t=new ur;t.add(Ri.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new ur;t.add(Ri.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=Xi.Delegate,o=lr(s);return new ur().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:t_,isSigner:!1,isWritable:!1},{pubkey:_O,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,l=Xi.Authorize,c=lr(l,{newAuthorized:Qn(i.toBuffer()),stakeAuthorizationType:s.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:gl,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!0,isWritable:!1}),new ur().add({keys:d,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:l,custodianPubkey:c}=e,d=Xi.AuthorizeWithSeed,h=lr(d,{newAuthorized:Qn(o.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:i,authorityOwner:Qn(s.toBuffer())}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:gl,isSigner:!1,isWritable:!1}];return c&&w.push({pubkey:c,isSigner:!0,isWritable:!1}),new ur().add({keys:w,programId:this.programId,data:h})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,o=Xi.Split,l=lr(o,{lamports:s});return new Cr({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static split(e,t){const n=new ur;return n.add(Ri.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:l,lamports:c}=e,d=new ur;return d.add(Ri.allocate({accountPubkey:s,basePubkey:o,seed:l,space:this.space,programId:this.programId})),t&&t>0&&d.add(Ri.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:t})),d.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,lamports:c}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=Xi.Merge,o=lr(s);return new ur().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:t_,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:o}=e,l=Xi.Withdraw,c=lr(l,{lamports:s}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:t_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!0,isWritable:!1}),new ur().add({keys:d,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=Xi.Deactivate,s=lr(i);return new ur().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}Y1.programId=new Mt("Stake11111111111111111111111111111111111111");Y1.space=200;class SO{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class $H{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ee.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(xl))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=xr(xl.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new SO(new Mt(t.nodePubkey),new Mt(t.authorizedVoter),new Mt(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=xr(xl.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Mt(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=xr(xl.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Mt(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Mt(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=xr(xl.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(C0.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const xl=Object.freeze({InitializeAccount:{index:0,layout:Ee.struct([Ee.u32("instruction"),tV()])},Authorize:{index:1,layout:Ee.struct([Ee.u32("instruction"),nr("newAuthorized"),Ee.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Ee.struct([Ee.u32("instruction"),Ee.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Ee.struct([Ee.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Ee.struct([Ee.u32("instruction"),nV()])}}),ZH=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class C0{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=xl.InitializeAccount,o=lr(s,{voteInit:{nodePubkey:Qn(i.nodePubkey.toBuffer()),authorizedVoter:Qn(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Qn(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),l={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Zh,isSigner:!1,isWritable:!1},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Cr(l)}static createAccount(e){const t=new ur;return t.add(Ri.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=xl.Authorize,l=lr(o,{newAuthorized:Qn(i.toBuffer()),voteAuthorizationType:s.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ur().add({keys:c,programId:this.programId,data:l})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:l}=e,c=xl.AuthorizeWithSeed,d=lr(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Qn(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Qn(s.toBuffer()),voteAuthorizationType:o.index}}),h=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:gl,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new ur().add({keys:h,programId:this.programId,data:d})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,o=xl.Withdraw,l=lr(o,{lamports:i}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new ur().add({keys:c,programId:this.programId,data:l})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return C0.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:i}=e,s=xl.UpdateValidatorIdentity,o=lr(s),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new ur().add({keys:l,programId:this.programId,data:o})}}C0.programId=new Mt("Vote111111111111111111111111111111111111111");C0.space=3762;const MO=new Mt("Va1idator1nfo111111111111111111111111111111"),QH=It({name:Ht(),website:An(Ht()),details:An(Ht()),iconUrl:An(Ht()),keybaseUsername:An(Ht())});class iT{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(mo(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new Mt(go(t,0,Al)),l=wl(t)===1;i.push({publicKey:o,isSigner:l})}if(i[0].publicKey.equals(MO)&&i[1].isSigner){const s=Rh().decode(mn.from(t)),o=JSON.parse(s);return Ok(o,QH),new iT(i[1].publicKey,o)}return null}}const JH=new Mt("Vote111111111111111111111111111111111111111"),e7=Ee.struct([nr("nodePubkey"),nr("authorizedWithdrawer"),Ee.u8("commission"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("slot"),Ee.u32("confirmationCount")]),Ee.offset(Ee.u32(),-8),"votes"),Ee.u8("rootSlotValid"),Ee.nu64("rootSlot"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("epoch"),nr("authorizedVoter")]),Ee.offset(Ee.u32(),-8),"authorizedVoters"),Ee.struct([Ee.seq(Ee.struct([nr("authorizedPubkey"),Ee.nu64("epochOfLastAuthorizedSwitch"),Ee.nu64("targetEpoch")]),32,"buf"),Ee.nu64("idx"),Ee.u8("isEmpty")],"priorVoters"),Ee.nu64(),Ee.seq(Ee.struct([Ee.nu64("epoch"),Ee.nu64("credits"),Ee.nu64("prevCredits")]),Ee.offset(Ee.u32(),-8),"epochCredits"),Ee.struct([Ee.nu64("slot"),Ee.nu64("timestamp")],"lastTimestamp")]);class sT{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=e7.decode(Qn(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new sT({nodePubkey:new Mt(n.nodePubkey),authorizedWithdrawer:new Mt(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(t7),priorVoters:n7(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function t7({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new Mt(r)}}function IC({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Mt(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function n7({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(IC),...r.slice(0,e).map(IC)]}const NC={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function EO(r,e){const t=e===!1?"http":"https";if(!r)return NC[t].devnet;const n=NC[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function r7(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},l=await r.sendRawTransaction(e,o),c=s&&s.commitment,h=(await(i?r.confirmTransaction(i,c):r.confirmTransaction(l,c))).value;if(h.err)throw l!=null?new ef({action:o!=null&&o.skipPreflight?"send":"simulate",signature:l,transactionMessage:`Status: (${JSON.stringify(h)})`}):new Error(`Raw transaction ${l} failed (${JSON.stringify(h)})`);return l}const i7=1e9,s7=Object.freeze(Object.defineProperty({__proto__:null,Account:$W,AddressLookupTableAccount:mb,AddressLookupTableInstruction:HH,AddressLookupTableProgram:nT,Authorized:xO,BLOCKHASH_CACHE_TIMEOUT_MS:lO,BPF_LOADER_DEPRECATED_PROGRAM_ID:ZW,BPF_LOADER_PROGRAM_ID:mV,BpfLoader:gV,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:_l,ComputeBudgetInstruction:GH,ComputeBudgetProgram:rT,Connection:vO,Ed25519Program:K1,Enum:YW,EpochSchedule:oO,FeeCalculatorLayout:iO,Keypair:Vh,LAMPORTS_PER_SOL:i7,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Cu,Loader:C_,Lockup:xy,MAX_SEED_LENGTH:eO,Message:Ga,MessageAccountKeys:Og,MessageV0:$h,NONCE_ACCOUNT_LENGTH:db,NonceAccount:G1,PACKET_DATA_SIZE:$c,PUBLIC_KEY_LENGTH:Al,PublicKey:Mt,SIGNATURE_LENGTH_IN_BYTES:kg,SOLANA_SCHEMA:dg,STAKE_CONFIG_ID:_O,STAKE_INSTRUCTION_LAYOUTS:Xi,SYSTEM_INSTRUCTION_LAYOUTS:Ur,SYSVAR_CLOCK_PUBKEY:gl,SYSVAR_EPOCH_SCHEDULE_PUBKEY:aV,SYSVAR_INSTRUCTIONS_PUBKEY:lV,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:e_,SYSVAR_RENT_PUBKEY:Zh,SYSVAR_REWARDS_PUBKEY:uV,SYSVAR_SLOT_HASHES_PUBKEY:cV,SYSVAR_SLOT_HISTORY_PUBKEY:fV,SYSVAR_STAKE_HISTORY_PUBKEY:t_,Secp256k1Program:a0,SendTransactionError:ef,SolanaJSONRPCError:xn,SolanaJSONRPCErrorCode:hV,StakeAuthorizationLayout:XH,StakeInstruction:YH,StakeProgram:Y1,Struct:YA,SystemInstruction:dV,SystemProgram:Ri,Transaction:ur,TransactionExpiredBlockheightExceededError:XA,TransactionExpiredNonceInvalidError:Gp,TransactionExpiredTimeoutError:$A,TransactionInstruction:Cr,TransactionMessage:QA,TransactionStatus:Eu,VALIDATOR_INFO_KEY:MO,VERSION_PREFIX_MASK:V1,VOTE_PROGRAM_ID:JH,ValidatorInfo:iT,VersionedMessage:ZA,VersionedTransaction:Dg,VoteAccount:sT,VoteAuthorizationLayout:ZH,VoteInit:SO,VoteInstruction:$H,VoteProgram:C0,clusterApiUrl:EO,sendAndConfirmRawTransaction:r7,sendAndConfirmTransaction:hb},Symbol.toStringTag,{value:"Module"})),bO=Ce.createContext({});function AO(){return Ce.useContext(bO)}const o7=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=Ce.useMemo(()=>new vO(e,t),[e,t]);return Ut.createElement(bO.Provider,{value:{connection:n}},r)};class Qi extends Error{constructor(e,t){super(e),this.error=t}}class Ug extends Qi{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class a7 extends Qi{constructor(){super(...arguments),this.name="WalletLoadError"}}class jp extends Qi{constructor(){super(...arguments),this.name="WalletConfigError"}}class N_ extends Qi{constructor(){super(...arguments),this.name="WalletConnectionError"}}class oT extends Qi{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class aT extends Qi{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Ch extends Qi{constructor(){super(...arguments),this.name="WalletAccountError"}}class Fg extends Qi{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Ii extends Qi{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Xc extends Qi{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Ml extends Qi{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class lT extends Qi{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class PC extends Qi{constructor(){super(...arguments),this.name="WalletSignInError"}}var vr;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(vr||(vr={}));class TO extends HA{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const i=this.publicKey;if(!i)throw new Ii;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function RO(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const s of e)s()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function wb(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function Ou(r){return"version"in r}class l7 extends TO{async sendTransaction(e,t,n={}){let i=!0;try{if(Ou(e)){if(!this.supportedTransactionVersions)throw new Xc("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Xc(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,n)}catch(s){throw s instanceof Ml?(i=!1,s):new Xc(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const l=e.serialize();return await t.sendRawTransaction(l,o)}catch(s){throw s instanceof Ml?(i=!1,s):new Xc(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(Ou(n)){if(!this.supportedTransactionVersions)throw new Ml("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Ml(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class CO extends l7{}const Iu="solana:signAndSendTransaction",QS="solana:signIn",zp="solana:signMessage",$i="solana:signTransaction",uT="standard:connect",_b="standard:disconnect",cT="standard:events";function u7(r){return uT in r.features&&cT in r.features&&(Iu in r.features||$i in r.features)}var xb;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(xb||(xb={}));class LC extends Qi{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const c7=[],X1={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Ua("call","select")},connect(){return Promise.reject(Ua("call","connect"))},disconnect(){return Promise.reject(Ua("call","disconnect"))},sendTransaction(){return Promise.reject(Ua("call","sendTransaction"))},signTransaction(){return Promise.reject(Ua("call","signTransaction"))},signAllTransactions(){return Promise.reject(Ua("call","signAllTransactions"))},signMessage(){return Promise.reject(Ua("call","signMessage"))},signIn(){return Promise.reject(Ua("call","signIn"))}};Object.defineProperty(X1,"wallets",{get(){return Ua("read","wallets"),c7}});Object.defineProperty(X1,"wallet",{get(){return Ua("read","wallet"),null}});Object.defineProperty(X1,"publicKey",{get(){return Ua("read","publicKey"),null}});function Ua(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const IO=Ce.createContext(X1);function fT(){return Ce.useContext(IO)}function f7(r,e){const t=Ce.useState(()=>{try{const s=localStorage.getItem(r);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),n=t[0],i=Ce.useRef(!0);return Ce.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,r]),t}var fl={},Qf={},js={},er={},kC;function hT(){if(kC)return er;kC=1,Object.defineProperty(er,"__esModule",{value:!0}),er.WalletWindowClosedError=er.WalletWindowBlockedError=er.WalletTimeoutError=er.WalletSignInError=er.WalletSignMessageError=er.WalletSignTransactionError=er.WalletSendTransactionError=er.WalletNotConnectedError=er.WalletKeypairError=er.WalletPublicKeyError=er.WalletAccountError=er.WalletDisconnectionError=er.WalletDisconnectedError=er.WalletConnectionError=er.WalletConfigError=er.WalletLoadError=er.WalletNotReadyError=er.WalletError=void 0;class r extends Error{constructor(k,F){super(k),this.error=F}}er.WalletError=r;class e extends r{constructor(){super(...arguments),this.name="WalletNotReadyError"}}er.WalletNotReadyError=e;class t extends r{constructor(){super(...arguments),this.name="WalletLoadError"}}er.WalletLoadError=t;class n extends r{constructor(){super(...arguments),this.name="WalletConfigError"}}er.WalletConfigError=n;class i extends r{constructor(){super(...arguments),this.name="WalletConnectionError"}}er.WalletConnectionError=i;class s extends r{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}er.WalletDisconnectedError=s;class o extends r{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}er.WalletDisconnectionError=o;class l extends r{constructor(){super(...arguments),this.name="WalletAccountError"}}er.WalletAccountError=l;class c extends r{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}er.WalletPublicKeyError=c;class d extends r{constructor(){super(...arguments),this.name="WalletKeypairError"}}er.WalletKeypairError=d;class h extends r{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}er.WalletNotConnectedError=h;class w extends r{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}er.WalletSendTransactionError=w;class _ extends r{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}er.WalletSignTransactionError=_;class x extends r{constructor(){super(...arguments),this.name="WalletSignMessageError"}}er.WalletSignMessageError=x;class A extends r{constructor(){super(...arguments),this.name="WalletSignInError"}}er.WalletSignInError=A;class L extends r{constructor(){super(...arguments),this.name="WalletTimeoutError"}}er.WalletTimeoutError=L;class N extends r{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}er.WalletWindowBlockedError=N;class C extends r{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}return er.WalletWindowClosedError=C,er}var OC;function NO(){if(OC)return js;OC=1;var r=js&&js.__awaiter||function(c,d,h,w){function _(x){return x instanceof h?x:new h(function(A){A(x)})}return new(h||(h=Promise))(function(x,A){function L(D){try{C(w.next(D))}catch(k){A(k)}}function N(D){try{C(w.throw(D))}catch(k){A(k)}}function C(D){D.done?x(D.value):_(D.value).then(L,N)}C((w=w.apply(c,d||[])).next())})},e=js&&js.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js,"__esModule",{value:!0}),js.BaseWalletAdapter=js.WalletReadyState=js.EventEmitter=void 0,js.scopePollingDetectionStrategy=o,js.isIosAndRedirectable=l;const t=e(Hk());js.EventEmitter=t.default;const n=hT();var i;(function(c){c.Installed="Installed",c.NotDetected="NotDetected",c.Loadable="Loadable",c.Unsupported="Unsupported"})(i||(js.WalletReadyState=i={}));class s extends t.default{get connected(){return!!this.publicKey}autoConnect(){return r(this,void 0,void 0,function*(){yield this.connect()})}prepareTransaction(d,h){return r(this,arguments,void 0,function*(w,_,x={}){const A=this.publicKey;if(!A)throw new n.WalletNotConnectedError;return w.feePayer=w.feePayer||A,w.recentBlockhash=w.recentBlockhash||(yield _.getLatestBlockhash({commitment:x.preflightCommitment,minContextSlot:x.minContextSlot})).blockhash,w})}}js.BaseWalletAdapter=s;function o(c){if(typeof window>"u"||typeof document>"u")return;const d=[];function h(){if(c())for(const x of d)x()}const w=setInterval(h,1e3);d.push(()=>clearInterval(w)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",h,{once:!0}),d.push(()=>document.removeEventListener("DOMContentLoaded",h))),document.readyState!=="complete"&&(window.addEventListener("load",h,{once:!0}),d.push(()=>window.removeEventListener("load",h))),h()}function l(){if(!navigator)return!1;const c=navigator.userAgent.toLowerCase(),d=c.includes("iphone")||c.includes("ipad"),h=c.includes("safari");return d&&h}return js}var Po={},Gv={},DC;function PO(){if(DC)return Gv;DC=1,Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.isVersionedTransaction=r;function r(e){return"version"in e}return Gv}var BC;function h7(){if(BC)return Po;BC=1;var r=Po&&Po.__awaiter||function(c,d,h,w){function _(x){return x instanceof h?x:new h(function(A){A(x)})}return new(h||(h=Promise))(function(x,A){function L(D){try{C(w.next(D))}catch(k){A(k)}}function N(D){try{C(w.throw(D))}catch(k){A(k)}}function C(D){D.done?x(D.value):_(D.value).then(L,N)}C((w=w.apply(c,d||[])).next())})},e=Po&&Po.__rest||function(c,d){var h={};for(var w in c)Object.prototype.hasOwnProperty.call(c,w)&&d.indexOf(w)<0&&(h[w]=c[w]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,w=Object.getOwnPropertySymbols(c);_<w.length;_++)d.indexOf(w[_])<0&&Object.prototype.propertyIsEnumerable.call(c,w[_])&&(h[w[_]]=c[w[_]]);return h};Object.defineProperty(Po,"__esModule",{value:!0}),Po.BaseSignInMessageSignerWalletAdapter=Po.BaseMessageSignerWalletAdapter=Po.BaseSignerWalletAdapter=void 0;const t=NO(),n=hT(),i=PO();class s extends t.BaseWalletAdapter{sendTransaction(d,h){return r(this,arguments,void 0,function*(w,_,x={}){let A=!0;try{if((0,i.isVersionedTransaction)(w)){if(!this.supportedTransactionVersions)throw new n.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(w.version))throw new n.WalletSendTransactionError(`Sending transaction version ${w.version} isn't supported by this wallet`);try{w=yield this.signTransaction(w);const L=w.serialize();return yield _.sendRawTransaction(L,x)}catch(L){throw L instanceof n.WalletSignTransactionError?(A=!1,L):new n.WalletSendTransactionError(L==null?void 0:L.message,L)}}else try{const{signers:L}=x,N=e(x,["signers"]);w=yield this.prepareTransaction(w,_,N),L!=null&&L.length&&w.partialSign(...L),w=yield this.signTransaction(w);const C=w.serialize();return yield _.sendRawTransaction(C,N)}catch(L){throw L instanceof n.WalletSignTransactionError?(A=!1,L):new n.WalletSendTransactionError(L==null?void 0:L.message,L)}}catch(L){throw A&&this.emit("error",L),L}})}signAllTransactions(d){return r(this,void 0,void 0,function*(){for(const w of d)if((0,i.isVersionedTransaction)(w)){if(!this.supportedTransactionVersions)throw new n.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(w.version))throw new n.WalletSignTransactionError(`Signing transaction version ${w.version} isn't supported by this wallet`)}const h=[];for(const w of d)h.push(yield this.signTransaction(w));return h})}}Po.BaseSignerWalletAdapter=s;class o extends s{}Po.BaseMessageSignerWalletAdapter=o;class l extends o{}return Po.BaseSignInMessageSignerWalletAdapter=l,Po}var jv={},Jf={},km={},UC;function d7(){return UC||(UC=1,Object.defineProperty(km,"__esModule",{value:!0}),km.SolanaSignAndSendTransaction=void 0,km.SolanaSignAndSendTransaction="solana:signAndSendTransaction"),km}var Om={},FC;function p7(){return FC||(FC=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.SolanaSignIn=void 0,Om.SolanaSignIn="solana:signIn"),Om}var Dm={},zC;function m7(){return zC||(zC=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.SolanaSignMessage=void 0,Dm.SolanaSignMessage="solana:signMessage"),Dm}var Bm={},WC;function g7(){return WC||(WC=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.SolanaSignTransaction=void 0,Bm.SolanaSignTransaction="solana:signTransaction"),Bm}var Um={},VC;function y7(){return VC||(VC=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.SignAndSendAllTransactions=void 0,Um.SignAndSendAllTransactions="solana:signAndSendAllTransactions"),Um}var HC;function dT(){return HC||(HC=1,(function(r){var e=Jf&&Jf.__createBinding||(Object.create?(function(n,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,l)}):(function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]})),t=Jf&&Jf.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(d7(),r),t(p7(),r),t(m7(),r),t(g7(),r),t(y7(),r)})(Jf)),Jf}var eh={},JS={},GC;function v7(){return GC||(GC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Connect=r.StandardConnect=void 0,r.StandardConnect="standard:connect",r.Connect=r.StandardConnect})(JS)),JS}var eM={},jC;function w7(){return jC||(jC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Disconnect=r.StandardDisconnect=void 0,r.StandardDisconnect="standard:disconnect",r.Disconnect=r.StandardDisconnect})(eM)),eM}var tM={},qC;function _7(){return qC||(qC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Events=r.StandardEvents=void 0,r.StandardEvents="standard:events",r.Events=r.StandardEvents})(tM)),tM}var KC;function LO(){return KC||(KC=1,(function(r){var e=eh&&eh.__createBinding||(Object.create?(function(n,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,l)}):(function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]})),t=eh&&eh.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(v7(),r),t(w7(),r),t(_7(),r)})(eh)),eh}var YC;function x7(){if(YC)return jv;YC=1,Object.defineProperty(jv,"__esModule",{value:!0}),jv.isWalletAdapterCompatibleStandardWallet=t;const r=dT(),e=LO();function t(n){return e.StandardConnect in n.features&&e.StandardEvents in n.features&&(r.SolanaSignAndSendTransaction in n.features||r.SolanaSignTransaction in n.features)}return jv}var Fm={},XC;function S7(){if(XC)return Fm;XC=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.WalletAdapterNetwork=void 0;var r;return(function(e){e.Mainnet="mainnet-beta",e.Testnet="testnet",e.Devnet="devnet"})(r||(Fm.WalletAdapterNetwork=r={})),Fm}var $C;function M7(){return $C||($C=1,(function(r){var e=Qf&&Qf.__createBinding||(Object.create?(function(n,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,l)}):(function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]})),t=Qf&&Qf.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(NO(),r),t(hT(),r),t(h7(),r),t(x7(),r),t(PO(),r),t(S7(),r)})(Qf)),Qf}const kO=L1(s7);var La={},vp={},nM,ZC;function E7(){return ZC||(ZC=1,nM=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),nM}var rM={},Pc={},QC;function ld(){if(QC)return Pc;QC=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Pc.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Pc.getSymbolTotalCodewords=function(n){return e[n]},Pc.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},Pc.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},Pc.isKanjiModeEnabled=function(){return typeof r<"u"},Pc.toSJIS=function(n){return r(n)},Pc}var iM={},JC;function pT(){return JC||(JC=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return e(n)}catch{return i}}})(iM)),iM}var sM,eI;function b7(){if(eI)return sM;eI=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},sM=r,sM}var oM,tI;function A7(){if(tI)return oM;tI=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,i){const s=e*this.size+t;this.data[s]=n,i&&(this.reservedBit[s]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},oM=r,oM}var aM={},nI;function T7(){return nI||(nI=1,(function(r){const e=ld().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,l=[s-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},r.getPositions=function(n){const i=[],s=r.getRowColCoords(n),o=s.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([s[l],s[c]]);return i}})(aM)),aM}var lM={},rI;function R7(){if(rI)return lM;rI=1;const r=ld().getSymbolSize,e=7;return lM.getPositions=function(n){const i=r(n);return[[0,0],[i-e,0],[0,i-e]]},lM}var uM={},iI;function C7(){return iI||(iI=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const s=i.size;let o=0,l=0,c=0,d=null,h=null;for(let w=0;w<s;w++){l=c=0,d=h=null;for(let _=0;_<s;_++){let x=i.get(w,_);x===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=x,l=1),x=i.get(_,w),x===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=x,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},r.getPenaltyN2=function(i){const s=i.size;let o=0;for(let l=0;l<s-1;l++)for(let c=0;c<s-1;c++){const d=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},r.getPenaltyN3=function(i){const s=i.size;let o=0,l=0,c=0;for(let d=0;d<s;d++){l=c=0;for(let h=0;h<s;h++)l=l<<1&2047|i.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},r.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(n,i,s){switch(n){case r.Patterns.PATTERN000:return(i+s)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return s%3===0;case r.Patterns.PATTERN011:return(i+s)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case r.Patterns.PATTERN101:return i*s%2+i*s%3===0;case r.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case r.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,s){const o=s.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)s.isReserved(c,l)||s.xor(c,l,t(i,c,l))},r.getBestMask=function(i,s){const o=Object.keys(r.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){s(d),r.applyMask(d,i);const h=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(d,i),h<c&&(c=h,l=d)}return l}})(uM)),uM}var qv={},sI;function OO(){if(sI)return qv;sI=1;const r=pT(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return qv.getBlocksCount=function(i,s){switch(s){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},qv.getTotalCodewordsCount=function(i,s){switch(s){case r.L:return t[(i-1)*4+0];case r.M:return t[(i-1)*4+1];case r.Q:return t[(i-1)*4+2];case r.H:return t[(i-1)*4+3];default:return}},qv}var cM={},zm={},oI;function I7(){if(oI)return zm;oI=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let i=0;i<255;i++)r[i]=n,e[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)r[i]=r[i-255]})(),zm.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},zm.exp=function(n){return r[n]},zm.mul=function(n,i){return n===0||i===0?0:r[e[n]+e[i]]},zm}var aI;function N7(){return aI||(aI=1,(function(r){const e=I7();r.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)s[o+l]^=e.mul(n[o],i[l]);return s},r.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=r.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(cM)),cM}var fM,lI;function P7(){if(lI)return fM;lI=1;const r=N7();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const s=r.mod(i,this.genPoly),o=this.degree-s.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(s,o),l}return s},fM=e,fM}var hM={},dM={},pM={},uI;function DO(){return uI||(uI=1,pM.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),pM}var hl={},cI;function BO(){if(cI)return hl;cI=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;hl.KANJI=new RegExp(t,"g"),hl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),hl.BYTE=new RegExp(n,"g"),hl.NUMERIC=new RegExp(r,"g"),hl.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),s=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return hl.testKanji=function(c){return i.test(c)},hl.testNumeric=function(c){return s.test(c)},hl.testAlphanumeric=function(c){return o.test(c)},hl}var fI;function ud(){return fI||(fI=1,(function(r){const e=DO(),t=BO();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},r.getBestModeForData=function(s){return t.testNumeric(s)?r.NUMERIC:t.testAlphanumeric(s)?r.ALPHANUMERIC:t.testKanji(s)?r.KANJI:r.BYTE},r.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},r.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(s,o){if(r.isValid(s))return s;try{return n(s)}catch{return o}}})(dM)),dM}var hI;function L7(){return hI||(hI=1,(function(r){const e=ld(),t=OO(),n=pT(),i=ud(),s=DO(),o=7973,l=e.getBCHDigit(o);function c(_,x,A){for(let L=1;L<=40;L++)if(x<=r.getCapacity(L,A,_))return L}function d(_,x){return i.getCharCountIndicator(_,x)+4}function h(_,x){let A=0;return _.forEach(function(L){const N=d(L.mode,x);A+=N+L.getBitsLength()}),A}function w(_,x){for(let A=1;A<=40;A++)if(h(_,A)<=r.getCapacity(A,x,i.MIXED))return A}r.from=function(x,A){return s.isValid(x)?parseInt(x,10):A},r.getCapacity=function(x,A,L){if(!s.isValid(x))throw new Error("Invalid QR Code version");typeof L>"u"&&(L=i.BYTE);const N=e.getSymbolTotalCodewords(x),C=t.getTotalCodewordsCount(x,A),D=(N-C)*8;if(L===i.MIXED)return D;const k=D-d(L,x);switch(L){case i.NUMERIC:return Math.floor(k/10*3);case i.ALPHANUMERIC:return Math.floor(k/11*2);case i.KANJI:return Math.floor(k/13);case i.BYTE:default:return Math.floor(k/8)}},r.getBestVersionForData=function(x,A){let L;const N=n.from(A,n.M);if(Array.isArray(x)){if(x.length>1)return w(x,N);if(x.length===0)return 1;L=x[0]}else L=x;return c(L.mode,L.getLength(),N)},r.getEncodedBits=function(x){if(!s.isValid(x)||x<7)throw new Error("Invalid QR Code version");let A=x<<12;for(;e.getBCHDigit(A)-l>=0;)A^=o<<e.getBCHDigit(A)-l;return x<<12|A}})(hM)),hM}var mM={},dI;function k7(){if(dI)return mM;dI=1;const r=ld(),e=1335,t=21522,n=r.getBCHDigit(e);return mM.getEncodedBits=function(s,o){const l=s.bit<<3|o;let c=l<<10;for(;r.getBCHDigit(c)-n>=0;)c^=e<<r.getBCHDigit(c)-n;return(l<<10|c)^t},mM}var gM={},yM,pI;function O7(){if(pI)return yM;pI=1;const r=ud();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let i,s,o;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),o=parseInt(s,10),n.put(o,10);const l=this.data.length-i;l>0&&(s=this.data.substr(i),o=parseInt(s,10),n.put(o,l*3+1))},yM=e,yM}var vM,mI;function D7(){if(mI)return vM;mI=1;const r=ud(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let o=e.indexOf(this.data[s])*45;o+=e.indexOf(this.data[s+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[s]),6)},vM=t,vM}var wM,gI;function B7(){if(gI)return wM;gI=1;const r=ud();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,i=this.data.length;n<i;n++)t.put(this.data[n],8)},wM=e,wM}var _M,yI;function U7(){if(yI)return _M;yI=1;const r=ud(),e=ld();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let s=e.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),n.put(s,13)}},_M=t,_M}var xM={exports:{}},vI;function F7(){return vI||(vI=1,(function(r){var e={single_source_shortest_paths:function(t,n,i){var s={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,d,h,w,_,x,A,L,N;!l.empty();){c=l.pop(),d=c.value,w=c.cost,_=t[d]||{};for(h in _)_.hasOwnProperty(h)&&(x=_[h],A=w+x,L=o[h],N=typeof o[h]>"u",(N||L>A)&&(o[h]=A,l.push(h,A),s[h]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var C=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(C)}return s},extract_shortest_path_from_predecessor_list:function(t,n){for(var i=[],s=n;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,n,i){var s=e.single_source_shortest_paths(t,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,i={},s;t=t||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var i={value:t,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(xM)),xM.exports}var wI;function z7(){return wI||(wI=1,(function(r){const e=ud(),t=O7(),n=D7(),i=B7(),s=U7(),o=BO(),l=ld(),c=F7();function d(C){return unescape(encodeURIComponent(C)).length}function h(C,D,k){const F=[];let Q;for(;(Q=C.exec(k))!==null;)F.push({data:Q[0],index:Q.index,mode:D,length:Q[0].length});return F}function w(C){const D=h(o.NUMERIC,e.NUMERIC,C),k=h(o.ALPHANUMERIC,e.ALPHANUMERIC,C);let F,Q;return l.isKanjiModeEnabled()?(F=h(o.BYTE,e.BYTE,C),Q=h(o.KANJI,e.KANJI,C)):(F=h(o.BYTE_KANJI,e.BYTE,C),Q=[]),D.concat(k,F,Q).sort(function(Y,ee){return Y.index-ee.index}).map(function(Y){return{data:Y.data,mode:Y.mode,length:Y.length}})}function _(C,D){switch(D){case e.NUMERIC:return t.getBitsLength(C);case e.ALPHANUMERIC:return n.getBitsLength(C);case e.KANJI:return s.getBitsLength(C);case e.BYTE:return i.getBitsLength(C)}}function x(C){return C.reduce(function(D,k){const F=D.length-1>=0?D[D.length-1]:null;return F&&F.mode===k.mode?(D[D.length-1].data+=k.data,D):(D.push(k),D)},[])}function A(C){const D=[];for(let k=0;k<C.length;k++){const F=C[k];switch(F.mode){case e.NUMERIC:D.push([F,{data:F.data,mode:e.ALPHANUMERIC,length:F.length},{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.ALPHANUMERIC:D.push([F,{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.KANJI:D.push([F,{data:F.data,mode:e.BYTE,length:d(F.data)}]);break;case e.BYTE:D.push([{data:F.data,mode:e.BYTE,length:d(F.data)}])}}return D}function L(C,D){const k={},F={start:{}};let Q=["start"];for(let G=0;G<C.length;G++){const Y=C[G],ee=[];for(let te=0;te<Y.length;te++){const U=Y[te],V=""+G+te;ee.push(V),k[V]={node:U,lastCount:0},F[V]={};for(let K=0;K<Q.length;K++){const E=Q[K];k[E]&&k[E].node.mode===U.mode?(F[E][V]=_(k[E].lastCount+U.length,U.mode)-_(k[E].lastCount,U.mode),k[E].lastCount+=U.length):(k[E]&&(k[E].lastCount=U.length),F[E][V]=_(U.length,U.mode)+4+e.getCharCountIndicator(U.mode,D))}}Q=ee}for(let G=0;G<Q.length;G++)F[Q[G]].end=0;return{map:F,table:k}}function N(C,D){let k;const F=e.getBestModeForData(C);if(k=e.from(D,F),k!==e.BYTE&&k.bit<F.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(k)+`.
 Suggested mode is: `+e.toString(F));switch(k===e.KANJI&&!l.isKanjiModeEnabled()&&(k=e.BYTE),k){case e.NUMERIC:return new t(C);case e.ALPHANUMERIC:return new n(C);case e.KANJI:return new s(C);case e.BYTE:return new i(C)}}r.fromArray=function(D){return D.reduce(function(k,F){return typeof F=="string"?k.push(N(F,null)):F.data&&k.push(N(F.data,F.mode)),k},[])},r.fromString=function(D,k){const F=w(D,l.isKanjiModeEnabled()),Q=A(F),G=L(Q,k),Y=c.find_path(G.map,"start","end"),ee=[];for(let te=1;te<Y.length-1;te++)ee.push(G.table[Y[te]].node);return r.fromArray(x(ee))},r.rawSplit=function(D){return r.fromArray(w(D,l.isKanjiModeEnabled()))}})(gM)),gM}var _I;function W7(){if(_I)return rM;_I=1;const r=ld(),e=pT(),t=b7(),n=A7(),i=T7(),s=R7(),o=C7(),l=OO(),c=P7(),d=L7(),h=k7(),w=ud(),_=z7();function x(G,Y){const ee=G.size,te=s.getPositions(Y);for(let U=0;U<te.length;U++){const V=te[U][0],K=te[U][1];for(let E=-1;E<=7;E++)if(!(V+E<=-1||ee<=V+E))for(let a=-1;a<=7;a++)K+a<=-1||ee<=K+a||(E>=0&&E<=6&&(a===0||a===6)||a>=0&&a<=6&&(E===0||E===6)||E>=2&&E<=4&&a>=2&&a<=4?G.set(V+E,K+a,!0,!0):G.set(V+E,K+a,!1,!0))}}function A(G){const Y=G.size;for(let ee=8;ee<Y-8;ee++){const te=ee%2===0;G.set(ee,6,te,!0),G.set(6,ee,te,!0)}}function L(G,Y){const ee=i.getPositions(Y);for(let te=0;te<ee.length;te++){const U=ee[te][0],V=ee[te][1];for(let K=-2;K<=2;K++)for(let E=-2;E<=2;E++)K===-2||K===2||E===-2||E===2||K===0&&E===0?G.set(U+K,V+E,!0,!0):G.set(U+K,V+E,!1,!0)}}function N(G,Y){const ee=G.size,te=d.getEncodedBits(Y);let U,V,K;for(let E=0;E<18;E++)U=Math.floor(E/3),V=E%3+ee-8-3,K=(te>>E&1)===1,G.set(U,V,K,!0),G.set(V,U,K,!0)}function C(G,Y,ee){const te=G.size,U=h.getEncodedBits(Y,ee);let V,K;for(V=0;V<15;V++)K=(U>>V&1)===1,V<6?G.set(V,8,K,!0):V<8?G.set(V+1,8,K,!0):G.set(te-15+V,8,K,!0),V<8?G.set(8,te-V-1,K,!0):V<9?G.set(8,15-V-1+1,K,!0):G.set(8,15-V-1,K,!0);G.set(te-8,8,1,!0)}function D(G,Y){const ee=G.size;let te=-1,U=ee-1,V=7,K=0;for(let E=ee-1;E>0;E-=2)for(E===6&&E--;;){for(let a=0;a<2;a++)if(!G.isReserved(U,E-a)){let p=!1;K<Y.length&&(p=(Y[K]>>>V&1)===1),G.set(U,E-a,p),V--,V===-1&&(K++,V=7)}if(U+=te,U<0||ee<=U){U-=te,te=-te;break}}}function k(G,Y,ee){const te=new t;ee.forEach(function(a){te.put(a.mode.bit,4),te.put(a.getLength(),w.getCharCountIndicator(a.mode,G)),a.write(te)});const U=r.getSymbolTotalCodewords(G),V=l.getTotalCodewordsCount(G,Y),K=(U-V)*8;for(te.getLengthInBits()+4<=K&&te.put(0,4);te.getLengthInBits()%8!==0;)te.putBit(0);const E=(K-te.getLengthInBits())/8;for(let a=0;a<E;a++)te.put(a%2?17:236,8);return F(te,G,Y)}function F(G,Y,ee){const te=r.getSymbolTotalCodewords(Y),U=l.getTotalCodewordsCount(Y,ee),V=te-U,K=l.getBlocksCount(Y,ee),E=te%K,a=K-E,p=Math.floor(te/K),M=Math.floor(V/K),R=M+1,T=p-M,P=new c(T);let I=0;const y=new Array(K),u=new Array(K);let S=0;const W=new Uint8Array(G.buffer);for(let be=0;be<K;be++){const wt=be<a?M:R;y[be]=W.slice(I,I+wt),u[be]=P.encode(y[be]),I+=wt,S=Math.max(S,wt)}const $=new Uint8Array(te);let se=0,me,_e;for(me=0;me<S;me++)for(_e=0;_e<K;_e++)me<y[_e].length&&($[se++]=y[_e][me]);for(me=0;me<T;me++)for(_e=0;_e<K;_e++)$[se++]=u[_e][me];return $}function Q(G,Y,ee,te){let U;if(Array.isArray(G))U=_.fromArray(G);else if(typeof G=="string"){let p=Y;if(!p){const M=_.rawSplit(G);p=d.getBestVersionForData(M,ee)}U=_.fromString(G,p||40)}else throw new Error("Invalid data");const V=d.getBestVersionForData(U,ee);if(!V)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Y)Y=V;else if(Y<V)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+V+`.
`);const K=k(Y,ee,U),E=r.getSymbolSize(Y),a=new n(E);return x(a,Y),A(a),L(a,Y),C(a,ee,0),Y>=7&&N(a,Y),D(a,K),isNaN(te)&&(te=o.getBestMask(a,C.bind(null,a,ee))),o.applyMask(te,a),C(a,ee,te),{modules:a,version:Y,errorCorrectionLevel:ee,maskPattern:te,segments:U}}return rM.create=function(Y,ee){if(typeof Y>"u"||Y==="")throw new Error("No input text");let te=e.M,U,V;return typeof ee<"u"&&(te=e.from(ee.errorCorrectionLevel,e.M),U=d.from(ee.version),V=o.from(ee.maskPattern),ee.toSJISFunc&&r.setToSJISFunction(ee.toSJISFunc)),Q(Y,U,te,V)},rM}var SM={},MM={},xI;function UO(){return xI||(xI=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const s=r.getScale(n,i);return Math.floor((n+i.margin*2)*s)},r.qrToImageData=function(n,i,s){const o=i.modules.size,l=i.modules.data,c=r.getScale(o,s),d=Math.floor((o+s.margin*2)*c),h=s.margin*c,w=[s.color.light,s.color.dark];for(let _=0;_<d;_++)for(let x=0;x<d;x++){let A=(_*d+x)*4,L=s.color.light;if(_>=h&&x>=h&&_<d-h&&x<d-h){const N=Math.floor((_-h)/c),C=Math.floor((x-h)/c);L=w[l[N*o+C]?1:0]}n[A++]=L.r,n[A++]=L.g,n[A++]=L.b,n[A]=L.a}}})(MM)),MM}var SI;function V7(){return SI||(SI=1,(function(r){const e=UO();function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(s,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),w=d.getContext("2d"),_=w.createImageData(h,h);return e.qrToImageData(_.data,s,c),t(w,d,h),w.putImageData(_,0,0),d},r.renderToDataURL=function(s,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=r.render(s,o,c),h=c.type||"image/png",w=c.rendererOpts||{};return d.toDataURL(h,w.quality)}})(SM)),SM}var EM={},MI;function H7(){if(MI)return EM;MI=1;const r=UO();function e(i,s){const o=i.a/255,l=s+'="'+i.hex+'"';return o<1?l+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function t(i,s,o){let l=i+s;return typeof o<"u"&&(l+=" "+o),l}function n(i,s,o){let l="",c=0,d=!1,h=0;for(let w=0;w<i.length;w++){const _=Math.floor(w%s),x=Math.floor(w/s);!_&&!d&&(d=!0),i[w]?(h++,w>0&&_>0&&i[w-1]||(l+=d?t("M",_+o,.5+x+o):t("m",c,0),c=0,d=!1),_+1<s&&i[w+1]||(l+=t("h",h),h=0)):c++}return l}return EM.render=function(s,o,l){const c=r.getOptions(o),d=s.modules.size,h=s.modules.data,w=d+c.margin*2,_=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",x="<path "+e(c.color.dark,"stroke")+' d="'+n(h,d,c.margin)+'"/>',A='viewBox="0 0 '+w+" "+w+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+A+' shape-rendering="crispEdges">'+_+x+`</svg>
`;return typeof l=="function"&&l(null,N),N},EM}var EI;function G7(){if(EI)return vp;EI=1;const r=E7(),e=W7(),t=V7(),n=H7();function i(s,o,l,c,d){const h=[].slice.call(arguments,1),w=h.length,_=typeof h[w-1]=="function";if(!_&&!r())throw new Error("Callback required as last argument");if(_){if(w<2)throw new Error("Too few arguments provided");w===2?(d=l,l=o,o=c=void 0):w===3&&(o.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=l,l=o,o=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(l=o,o=c=void 0):w===2&&!o.getContext&&(c=l,l=o,o=void 0),new Promise(function(x,A){try{const L=e.create(l,c);x(s(L,o,c))}catch(L){A(L)}})}try{const x=e.create(l,c);d(null,s(x,o,c))}catch(x){d(x)}}return vp.create=e.create,vp.toCanvas=i.bind(null,t.render),vp.toDataURL=i.bind(null,t.renderToDataURL),vp.toString=i.bind(null,function(s,o,l){return n.render(s,l)}),vp}function bM(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Sb="solana:mainnet",FO="solana:devnet",zO="solana:testnet",j7="solana:localnet",q7="https://api.mainnet-beta.solana.com";function K7(r){return r.includes(q7)?Sb:/\bdevnet\b/i.test(r)?FO:/\btestnet\b/i.test(r)?zO:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?j7:Sb}function Y7(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const Uo={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class Fo extends Error{constructor(...e){const[t,n,i]=e;super(n),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}const X7={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class $1 extends Error{constructor(...e){const[t,n,i,s]=e;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function br(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(h){try{d(n.next(h))}catch(w){o(w)}}function c(h){try{d(n.throw(h))}catch(w){o(w)}}function d(h){h.done?s(h.value):i(h.value).then(l,c)}d((n=n.apply(r,[])).next())})}function $7(r){return window.btoa(r)}function Mb(r,e){const t=window.btoa(String.fromCharCode.call(null,...r));return e?t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):t}function Z7(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function n_(r,e){return br(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+n.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),i})}function Q7(r){return Y7(r)}function J7(r){return $7(Q7(r))}const WO="solana:signTransactions",Eb="solana:cloneAuthorization",e9="solana:signInWithSolana";function VO(r,e){return new Proxy({},{get(t,n){return n==="then"?null:(t[n]==null&&(t[n]=function(i){return br(this,void 0,void 0,function*(){const{method:s,params:o}=t9(n,i,r),l=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!l.sign_in_result&&(l.sign_in_result=yield r9(o.sign_in_payload,l,e)),n9(n,l,r)})}),t[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function t9(r,e,t){let n=e,i=r.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:s}=n;if(t==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=n.cluster}n.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}n.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=n;if(s)switch(t){case"legacy":{i="reauthorize",n={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:n}}function n9(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const i=[WO];return n.supports_clone_authorization===!0&&i.push(Eb),Object.assign(Object.assign({},n),{features:i})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(Eb)})}}}return e}function r9(r,e,t){var n;return br(this,void 0,void 0,function*(){const i=(n=r.domain)!==null&&n!==void 0?n:window.location.host,s=e.accounts[0].address,o=J7(Object.assign(Object.assign({},r),{domain:i,address:s})),l=yield t("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:l.signed_payloads[0].slice(o.length)}})}const Du=4;function i9(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Du);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const bb=12,mT=65;function s9(r,e,t){return br(this,void 0,void 0,function*(){const n=i9(e),i=new Uint8Array(bb);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(GO(n,i),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function HO(r,e){return br(this,void 0,void 0,function*(){const t=r.slice(0,Du),n=r.slice(Du,Du+bb),i=r.slice(Du+bb),s=yield crypto.subtle.decrypt(GO(t,n),e,i);return o9().decode(s)})}function GO(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let AM;function o9(){return AM===void 0&&(AM=new TextDecoder("utf-8")),AM}function jO(){return br(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function r_(){return br(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function qO(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function a9(){return KO(49152+Math.floor(Math.random()*16384))}function KO(r){if(r<49152||r>65535)throw new Fo(Uo.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function YO(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const l9="solana-wallet";function bI(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function XO(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new Fo(Uo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${l9}:/`));const n=r.startsWith("/")?r:[...bI(t.pathname),...bI(r)].join("/");return new URL(n,t)}function u9(r,e,t,n=["v1"]){return br(this,void 0,void 0,function*(){const i=KO(e),s=yield crypto.subtle.exportKey("raw",r),o=qO(s),l=XO("v1/associate/local",t);return l.searchParams.set("association",YO(o)),l.searchParams.set("port",`${i}`),n.forEach(c=>{l.searchParams.set("v",c)}),l})}function c9(r,e,t,n,i=["v1"]){return br(this,void 0,void 0,function*(){const s=yield crypto.subtle.exportKey("raw",r),o=qO(s),l=XO("v1/associate/remote",n);return l.searchParams.set("association",YO(o)),l.searchParams.set("reflector",`${e}`),l.searchParams.set("id",`${Mb(t,!0)}`),i.forEach(c=>{l.searchParams.set("v",c)}),l})}function $O(r,e){return br(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return s9(t,n,e)})}function ZO(r,e){return br(this,void 0,void 0,function*(){const t=yield HO(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new $1(n.id,n.error.code,n.error.message);return n})}function QO(r,e,t){return br(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,mT),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function JO(r,e){return br(this,void 0,void 0,function*(){const t=yield HO(r,e),n=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Fo(Uo.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}const P_={Firefox:0,Other:1};function f9(){return navigator.userAgent.indexOf("Firefox/")!==-1?P_.Firefox:P_.Other}function h9(){return new Promise((r,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const i=setTimeout(()=>{t(),e()},3e3)})}let Wm=null;function d9(r){Wm==null&&(Wm=document.createElement("iframe"),Wm.style.display="none",document.body.appendChild(Wm)),Wm.contentWindow.location.href=r.toString()}function p9(r){return br(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=f9();switch(e){case P_.Firefox:d9(r);break;case P_.Other:{const t=h9();window.location.assign(r),yield t;break}default:}}catch{throw new Fo(Uo.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function m9(r,e){return br(this,void 0,void 0,function*(){const t=a9(),n=yield u9(r,t,e);return yield p9(n),t})}const L_={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},eD="com.solana.mobilewalletadapter.v1",AI="com.solana.mobilewalletadapter.v1.base64";function tD(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Fo(Uo.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function nD(r){let e;try{e=new URL(r)}catch{throw new Fo(Uo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Fo(Uo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function k_(r){return new DataView(r).getUint32(0,!1)}function g9(r){var e=new Uint8Array(r),t=r.byteLength,n=10,i=0,s=0,o;do{if(s>=t||s>n)throw new RangeError("Failed to decode varint");o=e[s++],i|=(o&127)<<7*s}while(o>=128);return{value:i,offset:s}}function y9(r){let{value:e,offset:t}=g9(r);return new Uint8Array(r.slice(t,t+e))}function v9(r,e){return br(this,void 0,void 0,function*(){tD();const t=yield jO(),i=`ws://localhost:${yield m9(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const h=[...L_.retryDelayScheduleMs];return()=>h.length>1?h.shift():h[0]})();let l=1,c=0,d={__type:"disconnected"};return new Promise((h,w)=>{let _;const x={},A=()=>br(this,void 0,void 0,function*(){if(d.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);return}_.removeEventListener("open",A);const{associationKeypair:Q}=d,G=yield r_();_.send(yield n_(G.publicKey,Q.privateKey)),d={__type:"hello_req_sent",associationPublicKey:Q.publicKey,ecdhPrivateKey:G.privateKey}}),L=Q=>{Q.wasClean?d={__type:"disconnected"}:w(new Fo(Uo.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Q.code}: ${Q.reason}).`,{closeEvent:Q})),D()},N=Q=>br(this,void 0,void 0,function*(){D(),Date.now()-s>=L_.timeoutMs?w(new Fo(Uo.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(G=>{const Y=o();k=window.setTimeout(G,Y)}),F())}),C=Q=>br(this,void 0,void 0,function*(){const G=yield Q.data.arrayBuffer();switch(d.__type){case"connecting":if(G.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const Y=yield r_();_.send(yield n_(Y.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:Y.privateKey};break;case"connected":try{const ee=G.slice(0,Du),te=k_(ee);if(te!==c+1)throw new Error("Encrypted message has invalid sequence number");c=te;const U=yield ZO(G,d.sharedSecret),V=x[U.id];delete x[U.id],V.resolve(U.result)}catch(ee){if(ee instanceof $1){const te=x[ee.jsonRpcMessageId];delete x[ee.jsonRpcMessageId],te.reject(ee)}else throw ee}break;case"hello_req_sent":{if(G.byteLength===0){const K=yield r_();_.send(yield n_(K.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:K.privateKey};break}const ee=yield QO(G,d.associationPublicKey,d.ecdhPrivateKey),te=G.slice(mT),U=te.byteLength!==0?yield br(this,void 0,void 0,function*(){const K=te.slice(0,Du),E=k_(K);if(E!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=E,JO(te,ee)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:ee,sessionProperties:U};const V=VO(U.protocol_version,(K,E)=>br(this,void 0,void 0,function*(){const a=l++;return _.send(yield $O({id:a,jsonrpc:"2.0",method:K,params:E??{}},ee)),new Promise((p,M)=>{x[a]={resolve(R){switch(K){case"authorize":case"reauthorize":{const{wallet_uri_base:T}=R;if(T!=null)try{nD(T)}catch(P){M(P);return}break}}p(R)},reject:M}})}));try{h(yield r(V))}catch(K){w(K)}finally{D(),_.close()}break}}});let D,k;const F=()=>{D&&D(),d={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),_=new WebSocket(i,[eD]),_.addEventListener("open",A),_.addEventListener("close",L),_.addEventListener("error",N),_.addEventListener("message",C),D=()=>{window.clearTimeout(k),_.removeEventListener("open",A),_.removeEventListener("close",L),_.removeEventListener("error",N),_.removeEventListener("message",C)}};F()})})}function w9(r){return br(this,void 0,void 0,function*(){tD();const e=yield jO(),t=`wss://${r==null?void 0:r.remoteHostAuthority}/reflect`;let n;const i=(()=>{const L=[...L_.retryDelayScheduleMs];return()=>L.length>1?L.shift():L[0]})();let s=1,o=0,l,c={__type:"disconnected"},d,h,w=L=>br(this,void 0,void 0,function*(){if(l=="base64"){const N=yield L.data;return Z7(N).buffer}else return yield L.data.arrayBuffer()});const _=yield new Promise((L,N)=>{const C=()=>br(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}d.protocol.includes(AI)?l="base64":l="binary",d.removeEventListener("open",C)}),D=Y=>{Y.wasClean?c={__type:"disconnected"}:N(new Fo(Uo.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Y.code}: ${Y.reason}).`,{closeEvent:Y})),h()},k=Y=>br(this,void 0,void 0,function*(){h(),Date.now()-n>=L_.timeoutMs?N(new Fo(Uo.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${t}.`)):(yield new Promise(ee=>{const te=i();Q=window.setTimeout(ee,te)}),G())}),F=Y=>br(this,void 0,void 0,function*(){const ee=yield w(Y);if(c.__type==="connecting"){if(ee.byteLength==0)throw new Error("Encountered unexpected message while connecting");const te=y9(ee);c={__type:"reflector_id_received",reflectorId:te};const U=yield c9(e.publicKey,r.remoteHostAuthority,te,r==null?void 0:r.baseUri);d.removeEventListener("message",F),L(U)}});let Q;const G=()=>{h&&h(),c={__type:"connecting",associationKeypair:e},n===void 0&&(n=Date.now()),d=new WebSocket(t,[eD,AI]),d.addEventListener("open",C),d.addEventListener("close",D),d.addEventListener("error",k),d.addEventListener("message",F),h=()=>{window.clearTimeout(Q),d.removeEventListener("open",C),d.removeEventListener("close",D),d.removeEventListener("error",k),d.removeEventListener("message",F)}};G()});let x=!1,A;return{associationUrl:_,close:()=>{d.close(),A()},wallet:new Promise((L,N)=>{const C={},D=k=>br(this,void 0,void 0,function*(){const F=yield w(k);switch(c.__type){case"reflector_id_received":if(F.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const Q=yield r_(),G=yield n_(Q.publicKey,e.privateKey);l=="base64"?d.send(Mb(G)):d.send(G),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:Q.privateKey};break;case"connected":try{const Y=F.slice(0,Du),ee=k_(Y);if(ee!==o+1)throw new Error("Encrypted message has invalid sequence number");o=ee;const te=yield ZO(F,c.sharedSecret),U=C[te.id];delete C[te.id],U.resolve(te.result)}catch(Y){if(Y instanceof $1){const ee=C[Y.jsonRpcMessageId];delete C[Y.jsonRpcMessageId],ee.reject(Y)}else throw Y}break;case"hello_req_sent":{const Y=yield QO(F,c.associationPublicKey,c.ecdhPrivateKey),ee=F.slice(mT),te=ee.byteLength!==0?yield br(this,void 0,void 0,function*(){const V=ee.slice(0,Du),K=k_(V);if(K!==o+1)throw new Error("Encrypted message has invalid sequence number");return o=K,JO(ee,Y)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:Y,sessionProperties:te};const U=VO(te.protocol_version,(V,K)=>br(this,void 0,void 0,function*(){const E=s++,a=yield $O({id:E,jsonrpc:"2.0",method:V,params:K??{}},Y);return l=="base64"?d.send(Mb(a)):d.send(a),new Promise((p,M)=>{C[E]={resolve(R){switch(V){case"authorize":case"reauthorize":{const{wallet_uri_base:T}=R;if(T!=null)try{nD(T)}catch(P){M(P);return}break}}p(R)},reject:M}})}));x=!0;try{L(U)}catch(V){N(V)}break}}});d.addEventListener("message",D),A=()=>{d.removeEventListener("message",D),h(),x||N(new Fo(Uo.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}const _9=Object.freeze(Object.defineProperty({__proto__:null,SolanaCloneAuthorization:Eb,SolanaMobileWalletAdapterError:Fo,SolanaMobileWalletAdapterErrorCode:Uo,SolanaMobileWalletAdapterProtocolError:$1,SolanaMobileWalletAdapterProtocolErrorCode:X7,SolanaSignInWithSolana:e9,SolanaSignTransactions:WO,startRemoteScenario:w9,transact:v9},Symbol.toStringTag,{value:"Module"})),x9=L1(_9);var TM,TI;function S9(){if(TI)return TM;TI=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var l=e.length,c=e.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function w(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var L=0,N=0,C=0,D=A.length;C!==D&&A[C]===0;)C++,L++;for(var k=(D-C)*h+1>>>0,F=new Uint8Array(k);C!==D;){for(var Q=A[C],G=0,Y=k-1;(Q!==0||G<N)&&Y!==-1;Y--,G++)Q+=256*F[Y]>>>0,F[Y]=Q%l>>>0,Q=Q/l>>>0;if(Q!==0)throw new Error("Non-zero carry");N=G,C++}for(var ee=k-N;ee!==k&&F[ee]===0;)ee++;for(var te=c.repeat(L);ee<k;++ee)te+=e.charAt(F[ee]);return te}function _(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;for(var L=0,N=0,C=0;A[L]===c;)N++,L++;for(var D=(A.length-L)*d+1>>>0,k=new Uint8Array(D);A[L];){var F=A.charCodeAt(L);if(F>255)return;var Q=t[F];if(Q===255)return;for(var G=0,Y=D-1;(Q!==0||G<C)&&Y!==-1;Y--,G++)Q+=l*k[Y]>>>0,k[Y]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");C=G,L++}for(var ee=D-C;ee!==D&&k[ee]===0;)ee++;for(var te=new Uint8Array(N+(D-ee)),U=N;ee!==D;)te[U++]=k[ee++];return te}function x(A){var L=_(A);if(L)return L;throw new Error("Non-base"+l+" character")}return{encode:w,decodeUnsafe:_,decode:x}}return TM=r,TM}var RM,RI;function M9(){return RI||(RI=1,RM=S9()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),RM}var CM={},CI;function E9(){return CI||(CI=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SOLANA_CHAINS=r.SOLANA_LOCALNET_CHAIN=r.SOLANA_TESTNET_CHAIN=r.SOLANA_DEVNET_CHAIN=r.SOLANA_MAINNET_CHAIN=void 0,r.isSolanaChain=e,r.SOLANA_MAINNET_CHAIN="solana:mainnet",r.SOLANA_DEVNET_CHAIN="solana:devnet",r.SOLANA_TESTNET_CHAIN="solana:testnet",r.SOLANA_LOCALNET_CHAIN="solana:localnet",r.SOLANA_CHAINS=[r.SOLANA_MAINNET_CHAIN,r.SOLANA_DEVNET_CHAIN,r.SOLANA_TESTNET_CHAIN,r.SOLANA_LOCALNET_CHAIN];function e(t){return r.SOLANA_CHAINS.includes(t)}})(CM)),CM}var II;function b9(){if(II)return La;II=1,Object.defineProperty(La,"__esModule",{value:!0});var r=dT(),e=G7(),t=x9,n=LO(),i=M9(),s=E9();function o(Kt){return Kt&&typeof Kt=="object"&&"default"in Kt?Kt:{default:Kt}}var l=o(e),c=o(i);function d(Kt,pt,Ve,Fe){function xt(Bt){return Bt instanceof Ve?Bt:new Ve(function(Gt){Gt(Bt)})}return new(Ve||(Ve=Promise))(function(Bt,Gt){function cn(Cn){try{Wn(Fe.next(Cn))}catch(Js){Gt(Js)}}function zn(Cn){try{Wn(Fe.throw(Cn))}catch(Js){Gt(Js)}}function Wn(Cn){Cn.done?Bt(Cn.value):xt(Cn.value).then(cn,zn)}Wn((Fe=Fe.apply(Kt,[])).next())})}function h(Kt,pt,Ve,Fe){if(Ve==="a"&&!Fe)throw new TypeError("Private accessor was defined without a getter");if(typeof pt=="function"?Kt!==pt||!Fe:!pt.has(Kt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Ve==="m"?Fe:Ve==="a"?Fe.call(Kt):Fe?Fe.value:pt.get(Kt)}function w(Kt,pt,Ve,Fe,xt){if(typeof pt=="function"?Kt!==pt||!0:!pt.has(Kt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return pt.set(Kt,Ve),Ve}var _,x,A,L,N,C,D,k;const F=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,Q=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,G=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Y{constructor(){_.add(this),x.set(this,null),A.set(this,{}),L.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),h(this,_,"m",C).call(this),h(this,x,"f")&&(h(this,x,"f").style.display="flex")},this.close=(pt=void 0)=>{var Ve;console.debug("Modal close"),h(this,_,"m",D).call(this),h(this,x,"f")&&(h(this,x,"f").style.display="none"),(Ve=h(this,A,"f").close)===null||Ve===void 0||Ve.forEach(Fe=>Fe(pt))},k.set(this,pt=>{pt.key==="Escape"&&this.close(pt)}),this.init=this.init.bind(this),w(this,x,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return d(this,void 0,void 0,function*(){console.log("Injecting modal"),h(this,_,"m",N).call(this)})}addEventListener(pt,Ve){var Fe;return!((Fe=h(this,A,"f")[pt])===null||Fe===void 0)&&Fe.push(Ve)||(h(this,A,"f")[pt]=[Ve]),()=>this.removeEventListener(pt,Ve)}removeEventListener(pt,Ve){var Fe;h(this,A,"f")[pt]=(Fe=h(this,A,"f")[pt])===null||Fe===void 0?void 0:Fe.filter(xt=>Ve!==xt)}}x=new WeakMap,A=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakSet,N=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){h(this,x,"f")||w(this,x,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}w(this,x,document.createElement("div")),h(this,x,"f").id="mobile-wallet-adapter-embedded-root-ui",h(this,x,"f").innerHTML=F,h(this,x,"f").style.display="none";const pt=h(this,x,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");pt&&(pt.innerHTML=this.contentHtml);const Ve=document.createElement("style");Ve.id="mobile-wallet-adapter-embedded-modal-styles",Ve.textContent=Q+this.contentStyles;const Fe=document.createElement("div");Fe.innerHTML=G,this.dom=Fe.attachShadow({mode:"closed"}),this.dom.appendChild(Ve),this.dom.appendChild(h(this,x,"f")),document.body.appendChild(Fe)},C=function(){if(!h(this,x,"f")||h(this,L,"f"))return;[...h(this,x,"f").querySelectorAll("[data-modal-close]")].forEach(Ve=>Ve==null?void 0:Ve.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",h(this,k,"f")),w(this,L,!0)},D=function(){if(!h(this,L,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",h(this,k,"f")),!h(this,x,"f")))return;[...h(this,x,"f").querySelectorAll("[data-modal-close]")].forEach(Ve=>Ve==null?void 0:Ve.removeEventListener("click",this.close)),w(this,L,!1)};class ee extends Y{constructor(){super(...arguments),this.contentStyles=U,this.contentHtml=te}initWithQR(pt){const Ve=Object.create(null,{init:{get:()=>super.init}});return d(this,void 0,void 0,function*(){Ve.init.call(this),this.populateQRCode(pt)})}populateQRCode(pt){var Ve;return d(this,void 0,void 0,function*(){const Fe=(Ve=this.dom)===null||Ve===void 0?void 0:Ve.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(Fe){const xt=yield l.default.toCanvas(pt,{width:200,margin:0});Fe.firstElementChild!==null?Fe.replaceChild(xt,Fe.firstElementChild):Fe.appendChild(xt)}else console.error("QRCode Container not found")})}}const te=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,U=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,V="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function K(Kt){return window.btoa(String.fromCharCode.call(null,...Kt))}function E(Kt){return new Uint8Array(window.atob(Kt).split("").map(pt=>pt.charCodeAt(0)))}var a,p,M,R,T,P,I,y,u,S,W,$,se,me,_e,be,wt,Ze,Pe,ge,Ge,je,yt,He,nt,Nt,fe,oe,Oe,Te,Le,ot,et,Ye,Et,ut,re,j,q,ue,ve,ye,le,Xe,de,Re,Ue,Me,qe,Rt,ct,gt,Sn,ht,ae,J,X,he,Ie,Ae,Ne,dn,mt,_t,Dn,vt,Lt,Nr,Ot,kt;const pe="Mobile Wallet Adapter",De=64,$e=[r.SolanaSignAndSendTransaction,r.SolanaSignTransaction,r.SolanaSignMessage,r.SolanaSignIn];class Qe{constructor(pt){a.add(this),p.set(this,{}),M.set(this,"1.0.0"),R.set(this,pe),T.set(this,"https://solanamobile.com/wallets"),P.set(this,V),I.set(this,void 0),y.set(this,void 0),u.set(this,void 0),S.set(this,!1),W.set(this,0),$.set(this,[]),se.set(this,void 0),me.set(this,void 0),_e.set(this,void 0),be.set(this,(Ve,Fe)=>{var xt;return!((xt=h(this,p,"f")[Ve])===null||xt===void 0)&&xt.push(Fe)||(h(this,p,"f")[Ve]=[Fe]),()=>h(this,a,"m",Ze).call(this,Ve,Fe)}),Pe.set(this,({silent:Ve}={})=>d(this,void 0,void 0,function*(){if(h(this,S,"f")||this.connected)return{accounts:this.accounts};w(this,S,!0);try{if(Ve){const Fe=yield h(this,u,"f").get();if(Fe)yield h(this,je,"f").call(this,Fe.capabilities),yield h(this,Ge,"f").call(this,Fe);else return{accounts:this.accounts}}else yield h(this,ge,"f").call(this)}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}finally{w(this,S,!1)}return{accounts:this.accounts}})),ge.set(this,Ve=>d(this,void 0,void 0,function*(){try{const Fe=yield h(this,u,"f").get();if(Fe)return h(this,Ge,"f").call(this,Fe),Fe;const xt=yield h(this,se,"f").select(h(this,$,"f"));return yield h(this,nt,"f").call(this,Bt=>d(this,void 0,void 0,function*(){const[Gt,cn]=yield Promise.all([Bt.getCapabilities(),Bt.authorize({chain:xt,identity:h(this,I,"f"),sign_in_payload:Ve})]),zn=h(this,fe,"f").call(this,cn.accounts),Wn=Object.assign(Object.assign({},cn),{accounts:zn,chain:xt,capabilities:Gt});return Promise.all([h(this,je,"f").call(this,Gt),h(this,u,"f").set(Wn),h(this,Ge,"f").call(this,Wn)]),Wn}))}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}})),Ge.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const xt=h(this,y,"f")==null||((Fe=h(this,y,"f"))===null||Fe===void 0?void 0:Fe.accounts.length)!==Ve.accounts.length||h(this,y,"f").accounts.some((Bt,Gt)=>Bt.address!==Ve.accounts[Gt].address);w(this,y,Ve),xt&&h(this,a,"m",wt).call(this,"change",{accounts:this.accounts})})),je.set(this,Ve=>d(this,void 0,void 0,function*(){const Fe=Ve.features.includes("solana:signTransactions"),xt=Ve.supports_sign_and_send_transactions,Bt=r.SolanaSignAndSendTransaction in this.features!==xt||r.SolanaSignTransaction in this.features!==Fe;w(this,me,Object.assign(Object.assign({},(xt||!xt&&!Fe)&&{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:h(this,Te,"f")}}),Fe&&{[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:h(this,Le,"f")}})),Bt&&h(this,a,"m",wt).call(this,"change",{features:this.features})})),yt.set(this,(Ve,Fe,xt)=>d(this,void 0,void 0,function*(){var Bt,Gt;try{const[cn,zn]=yield Promise.all([(Gt=(Bt=h(this,y,"f"))===null||Bt===void 0?void 0:Bt.capabilities)!==null&&Gt!==void 0?Gt:yield Ve.getCapabilities(),Ve.authorize({auth_token:Fe,identity:h(this,I,"f"),chain:xt})]),Wn=h(this,fe,"f").call(this,zn.accounts),Cn=Object.assign(Object.assign({},zn),{accounts:Wn,chain:xt,capabilities:cn});Promise.all([h(this,u,"f").set(Cn),h(this,Ge,"f").call(this,Cn)])}catch(cn){throw h(this,He,"f").call(this),new Error(cn instanceof Error&&cn.message||"Unknown error")}})),He.set(this,()=>d(this,void 0,void 0,function*(){var Ve;h(this,u,"f").clear(),w(this,S,!1),w(this,W,(Ve=h(this,W,"f"),Ve++,Ve)),w(this,y,void 0),h(this,a,"m",wt).call(this,"change",{accounts:this.accounts})})),nt.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const xt=(Fe=h(this,y,"f"))===null||Fe===void 0?void 0:Fe.wallet_uri_base,Bt=xt?{baseUri:xt}:void 0,Gt=h(this,W,"f");try{return yield t.transact(Ve,Bt)}catch(cn){throw h(this,W,"f")!==Gt&&(yield new Promise(()=>{})),cn instanceof Error&&cn.name==="SolanaMobileWalletAdapterError"&&cn.code==="ERROR_WALLET_NOT_FOUND"&&(yield h(this,_e,"f").call(this,this)),cn}})),Nt.set(this,()=>{if(!h(this,y,"f"))throw new Error("Wallet not connected");return{authToken:h(this,y,"f").auth_token,chain:h(this,y,"f").chain}}),fe.set(this,Ve=>Ve.map(Fe=>{var xt,Bt;const Gt=E(Fe.address);return{address:c.default.encode(Gt),publicKey:Gt,label:Fe.label,icon:Fe.icon,chains:(xt=Fe.chains)!==null&&xt!==void 0?xt:h(this,$,"f"),features:(Bt=Fe.features)!==null&&Bt!==void 0?Bt:$e}})),oe.set(this,Ve=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:xt}=h(this,Nt,"f").call(this);try{const Bt=Ve.map(Gt=>K(Gt));return yield h(this,nt,"f").call(this,Gt=>d(this,void 0,void 0,function*(){return yield h(this,yt,"f").call(this,Gt,Fe,xt),(yield Gt.signTransactions({payloads:Bt})).signed_payloads.map(E)}))}catch(Bt){throw new Error(Bt instanceof Error&&Bt.message||"Unknown error")}})),Oe.set(this,(Ve,Fe)=>d(this,void 0,void 0,function*(){const{authToken:xt,chain:Bt}=h(this,Nt,"f").call(this);try{return yield h(this,nt,"f").call(this,Gt=>d(this,void 0,void 0,function*(){const[cn,zn]=yield Promise.all([Gt.getCapabilities(),h(this,yt,"f").call(this,Gt,xt,Bt)]);if(cn.supports_sign_and_send_transactions){const Wn=K(Ve);return(yield Gt.signAndSendTransactions(Object.assign(Object.assign({},Fe),{payloads:[Wn]}))).signatures.map(E)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(Gt){throw new Error(Gt instanceof Error&&Gt.message||"Unknown error")}})),Te.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];for(const xt of Ve){const Bt=yield h(this,Oe,"f").call(this,xt.transaction,xt.options);Fe.push({signature:Bt})}return Fe})),Le.set(this,(...Ve)=>d(this,void 0,void 0,function*(){return(yield h(this,oe,"f").call(this,Ve.map(({transaction:Fe})=>Fe))).map(Fe=>({signedTransaction:Fe}))})),ot.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:xt}=h(this,Nt,"f").call(this),Bt=Ve.map(({account:cn})=>K(cn.publicKey)),Gt=Ve.map(({message:cn})=>K(cn));try{return yield h(this,nt,"f").call(this,cn=>d(this,void 0,void 0,function*(){return yield h(this,yt,"f").call(this,cn,Fe,xt),(yield cn.signMessages({addresses:Bt,payloads:Gt})).signed_payloads.map(E).map(Wn=>({signedMessage:Wn,signature:Wn.slice(-De)}))}))}catch(cn){throw new Error(cn instanceof Error&&cn.message||"Unknown error")}})),et.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];if(Ve.length>1)for(const xt of Ve)Fe.push(yield h(this,Ye,"f").call(this,xt));else return[yield h(this,Ye,"f").call(this,Ve[0])];return Fe})),Ye.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe,xt,Bt;w(this,S,!0);try{const Gt=yield h(this,ge,"f").call(this,Object.assign(Object.assign({},Ve),{domain:(Fe=Ve==null?void 0:Ve.domain)!==null&&Fe!==void 0?Fe:window.location.host}));if(!Gt.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const cn=Gt.sign_in_result.address,zn=Gt.accounts.find(Wn=>Wn.address==cn);return{account:Object.assign(Object.assign({},zn??{address:c.default.encode(E(cn))}),{publicKey:E(cn),chains:(xt=zn==null?void 0:zn.chains)!==null&&xt!==void 0?xt:h(this,$,"f"),features:(Bt=zn==null?void 0:zn.features)!==null&&Bt!==void 0?Bt:Gt.capabilities.features}),signedMessage:E(Gt.sign_in_result.signed_message),signature:E(Gt.sign_in_result.signature)}}catch(Gt){throw new Error(Gt instanceof Error&&Gt.message||"Unknown error")}finally{w(this,S,!1)}})),w(this,u,pt.authorizationCache),w(this,I,pt.appIdentity),w(this,$,pt.chains),w(this,se,pt.chainSelector),w(this,_e,pt.onWalletNotFound),w(this,me,{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:h(this,Te,"f")},[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:h(this,Le,"f")}})}get version(){return h(this,M,"f")}get name(){return h(this,R,"f")}get url(){return h(this,T,"f")}get icon(){return h(this,P,"f")}get chains(){return h(this,$,"f")}get features(){return Object.assign({[n.StandardConnect]:{version:"1.0.0",connect:h(this,Pe,"f")},[n.StandardDisconnect]:{version:"1.0.0",disconnect:h(this,He,"f")},[n.StandardEvents]:{version:"1.0.0",on:h(this,be,"f")},[r.SolanaSignMessage]:{version:"1.0.0",signMessage:h(this,ot,"f")},[r.SolanaSignIn]:{version:"1.0.0",signIn:h(this,et,"f")}},h(this,me,"f"))}get accounts(){var pt,Ve;return(Ve=(pt=h(this,y,"f"))===null||pt===void 0?void 0:pt.accounts)!==null&&Ve!==void 0?Ve:[]}get connected(){return!!h(this,y,"f")}get isAuthorized(){return!!h(this,y,"f")}get currentAuthorization(){return h(this,y,"f")}get cachedAuthorizationResult(){return h(this,u,"f").get()}}p=new WeakMap,M=new WeakMap,R=new WeakMap,T=new WeakMap,P=new WeakMap,I=new WeakMap,y=new WeakMap,u=new WeakMap,S=new WeakMap,W=new WeakMap,$=new WeakMap,se=new WeakMap,me=new WeakMap,_e=new WeakMap,be=new WeakMap,Pe=new WeakMap,ge=new WeakMap,Ge=new WeakMap,je=new WeakMap,yt=new WeakMap,He=new WeakMap,nt=new WeakMap,Nt=new WeakMap,fe=new WeakMap,oe=new WeakMap,Oe=new WeakMap,Te=new WeakMap,Le=new WeakMap,ot=new WeakMap,et=new WeakMap,Ye=new WeakMap,a=new WeakSet,wt=function(pt,...Ve){var Fe;(Fe=h(this,p,"f")[pt])===null||Fe===void 0||Fe.forEach(xt=>xt.apply(null,Ve))},Ze=function(pt,Ve){var Fe;h(this,p,"f")[pt]=(Fe=h(this,p,"f")[pt])===null||Fe===void 0?void 0:Fe.filter(xt=>Ve!==xt)};class Be{constructor(pt){Et.add(this),ut.set(this,{}),re.set(this,"1.0.0"),j.set(this,pe),q.set(this,"https://solanamobile.com/wallets"),ue.set(this,V),ve.set(this,void 0),ye.set(this,void 0),le.set(this,void 0),Xe.set(this,!1),de.set(this,0),Re.set(this,[]),Ue.set(this,void 0),Me.set(this,void 0),qe.set(this,void 0),Rt.set(this,void 0),ct.set(this,void 0),gt.set(this,(Ve,Fe)=>{var xt;return!((xt=h(this,ut,"f")[Ve])===null||xt===void 0)&&xt.push(Fe)||(h(this,ut,"f")[Ve]=[Fe]),()=>h(this,Et,"m",ht).call(this,Ve,Fe)}),ae.set(this,({silent:Ve}={})=>d(this,void 0,void 0,function*(){if(h(this,Xe,"f")||this.connected)return{accounts:this.accounts};w(this,Xe,!0);try{yield h(this,J,"f").call(this)}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}finally{w(this,Xe,!1)}return{accounts:this.accounts}})),J.set(this,Ve=>d(this,void 0,void 0,function*(){try{const Fe=yield h(this,le,"f").get();if(Fe)return h(this,X,"f").call(this,Fe),Fe;h(this,ct,"f")&&w(this,ct,void 0,"f");const xt=yield h(this,Ue,"f").select(h(this,Re,"f"));return yield h(this,Ne,"f").call(this,Bt=>d(this,void 0,void 0,function*(){const[Gt,cn]=yield Promise.all([Bt.getCapabilities(),Bt.authorize({chain:xt,identity:h(this,ve,"f"),sign_in_payload:Ve})]),zn=h(this,mt,"f").call(this,cn.accounts),Wn=Object.assign(Object.assign({},cn),{accounts:zn,chain:xt,capabilities:Gt});return Promise.all([h(this,he,"f").call(this,Gt),h(this,le,"f").set(Wn),h(this,X,"f").call(this,Wn)]),Wn}))}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}})),X.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const xt=h(this,ye,"f")==null||((Fe=h(this,ye,"f"))===null||Fe===void 0?void 0:Fe.accounts.length)!==Ve.accounts.length||h(this,ye,"f").accounts.some((Bt,Gt)=>Bt.address!==Ve.accounts[Gt].address);w(this,ye,Ve),xt&&h(this,Et,"m",Sn).call(this,"change",{accounts:this.accounts})})),he.set(this,Ve=>d(this,void 0,void 0,function*(){const Fe=Ve.features.includes("solana:signTransactions"),xt=Ve.supports_sign_and_send_transactions||Ve.features.includes("solana:signAndSendTransaction"),Bt=r.SolanaSignAndSendTransaction in this.features!==xt||r.SolanaSignTransaction in this.features!==Fe;w(this,Me,Object.assign(Object.assign({},xt&&{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:Ve.supported_transaction_versions,signAndSendTransaction:h(this,vt,"f")}}),Fe&&{[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:Ve.supported_transaction_versions,signTransaction:h(this,Lt,"f")}})),Bt&&h(this,Et,"m",Sn).call(this,"change",{features:this.features})})),Ie.set(this,(Ve,Fe,xt)=>d(this,void 0,void 0,function*(){var Bt,Gt;try{const[cn,zn]=yield Promise.all([(Gt=(Bt=h(this,ye,"f"))===null||Bt===void 0?void 0:Bt.capabilities)!==null&&Gt!==void 0?Gt:yield Ve.getCapabilities(),Ve.authorize({auth_token:Fe,identity:h(this,ve,"f"),chain:xt})]),Wn=h(this,mt,"f").call(this,zn.accounts),Cn=Object.assign(Object.assign({},zn),{accounts:Wn,chain:xt,capabilities:cn});Promise.all([h(this,le,"f").set(Cn),h(this,X,"f").call(this,Cn)])}catch(cn){throw h(this,Ae,"f").call(this),new Error(cn instanceof Error&&cn.message||"Unknown error")}})),Ae.set(this,()=>d(this,void 0,void 0,function*(){var Ve,Fe;(Ve=h(this,ct,"f"))===null||Ve===void 0||Ve.close(),h(this,le,"f").clear(),w(this,Xe,!1),w(this,de,(Fe=h(this,de,"f"),Fe++,Fe)),w(this,ye,void 0),w(this,ct,void 0),h(this,Et,"m",Sn).call(this,"change",{accounts:this.accounts})})),Ne.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const xt=(Fe=h(this,ye,"f"))===null||Fe===void 0?void 0:Fe.wallet_uri_base,Gt=Object.assign(Object.assign({},xt?{baseUri:xt}:void 0),{remoteHostAuthority:h(this,Rt,"f")}),cn=h(this,de,"f"),zn=new ee;if(h(this,ct,"f"))return Ve(h(this,ct,"f").wallet);try{const{associationUrl:Wn,close:Cn,wallet:Js}=yield t.startRemoteScenario(Gt),Dl=zn.addEventListener("close",df=>{df&&Cn()});return zn.initWithQR(Wn.toString()),zn.open(),w(this,ct,{close:Cn,wallet:yield Js},"f"),Dl(),zn.close(),yield Ve(h(this,ct,"f").wallet)}catch(Wn){throw zn.close(),h(this,de,"f")!==cn&&(yield new Promise(()=>{})),Wn instanceof Error&&Wn.name==="SolanaMobileWalletAdapterError"&&Wn.code==="ERROR_WALLET_NOT_FOUND"&&(yield h(this,qe,"f").call(this,this)),Wn}})),dn.set(this,()=>{if(!h(this,ye,"f"))throw new Error("Wallet not connected");return{authToken:h(this,ye,"f").auth_token,chain:h(this,ye,"f").chain}}),mt.set(this,Ve=>Ve.map(Fe=>{var xt,Bt;const Gt=E(Fe.address);return{address:c.default.encode(Gt),publicKey:Gt,label:Fe.label,icon:Fe.icon,chains:(xt=Fe.chains)!==null&&xt!==void 0?xt:h(this,Re,"f"),features:(Bt=Fe.features)!==null&&Bt!==void 0?Bt:$e}})),_t.set(this,Ve=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:xt}=h(this,dn,"f").call(this);try{return yield h(this,Ne,"f").call(this,Bt=>d(this,void 0,void 0,function*(){return yield h(this,Ie,"f").call(this,Bt,Fe,xt),(yield Bt.signTransactions({payloads:Ve.map(K)})).signed_payloads.map(E)}))}catch(Bt){throw new Error(Bt instanceof Error&&Bt.message||"Unknown error")}})),Dn.set(this,(Ve,Fe)=>d(this,void 0,void 0,function*(){const{authToken:xt,chain:Bt}=h(this,dn,"f").call(this);try{return yield h(this,Ne,"f").call(this,Gt=>d(this,void 0,void 0,function*(){const[cn,zn]=yield Promise.all([Gt.getCapabilities(),h(this,Ie,"f").call(this,Gt,xt,Bt)]);if(cn.supports_sign_and_send_transactions)return(yield Gt.signAndSendTransactions(Object.assign(Object.assign({},Fe),{payloads:[K(Ve)]}))).signatures.map(E)[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(Gt){throw new Error(Gt instanceof Error&&Gt.message||"Unknown error")}})),vt.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];for(const xt of Ve){const Bt=yield h(this,Dn,"f").call(this,xt.transaction,xt.options);Fe.push({signature:Bt})}return Fe})),Lt.set(this,(...Ve)=>d(this,void 0,void 0,function*(){return(yield h(this,_t,"f").call(this,Ve.map(({transaction:Fe})=>Fe))).map(Fe=>({signedTransaction:Fe}))})),Nr.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:xt}=h(this,dn,"f").call(this),Bt=Ve.map(({account:cn})=>K(cn.publicKey)),Gt=Ve.map(({message:cn})=>K(cn));try{return yield h(this,Ne,"f").call(this,cn=>d(this,void 0,void 0,function*(){return yield h(this,Ie,"f").call(this,cn,Fe,xt),(yield cn.signMessages({addresses:Bt,payloads:Gt})).signed_payloads.map(E).map(Wn=>({signedMessage:Wn,signature:Wn.slice(-De)}))}))}catch(cn){throw new Error(cn instanceof Error&&cn.message||"Unknown error")}})),Ot.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];if(Ve.length>1)for(const xt of Ve)Fe.push(yield h(this,kt,"f").call(this,xt));else return[yield h(this,kt,"f").call(this,Ve[0])];return Fe})),kt.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe,xt,Bt;w(this,Xe,!0);try{const Gt=yield h(this,J,"f").call(this,Object.assign(Object.assign({},Ve),{domain:(Fe=Ve==null?void 0:Ve.domain)!==null&&Fe!==void 0?Fe:window.location.host}));if(!Gt.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const cn=Gt.sign_in_result.address,zn=Gt.accounts.find(Wn=>Wn.address==cn);return{account:Object.assign(Object.assign({},zn??{address:c.default.encode(E(cn))}),{publicKey:E(cn),chains:(xt=zn==null?void 0:zn.chains)!==null&&xt!==void 0?xt:h(this,Re,"f"),features:(Bt=zn==null?void 0:zn.features)!==null&&Bt!==void 0?Bt:Gt.capabilities.features}),signedMessage:E(Gt.sign_in_result.signed_message),signature:E(Gt.sign_in_result.signature)}}catch(Gt){throw new Error(Gt instanceof Error&&Gt.message||"Unknown error")}finally{w(this,Xe,!1)}})),w(this,le,pt.authorizationCache),w(this,ve,pt.appIdentity),w(this,Re,pt.chains),w(this,Ue,pt.chainSelector),w(this,Rt,pt.remoteHostAuthority),w(this,qe,pt.onWalletNotFound),w(this,Me,{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:h(this,vt,"f")},[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:h(this,Lt,"f")}})}get version(){return h(this,re,"f")}get name(){return h(this,j,"f")}get url(){return h(this,q,"f")}get icon(){return h(this,ue,"f")}get chains(){return h(this,Re,"f")}get features(){return Object.assign({[n.StandardConnect]:{version:"1.0.0",connect:h(this,ae,"f")},[n.StandardDisconnect]:{version:"1.0.0",disconnect:h(this,Ae,"f")},[n.StandardEvents]:{version:"1.0.0",on:h(this,gt,"f")},[r.SolanaSignMessage]:{version:"1.0.0",signMessage:h(this,Nr,"f")},[r.SolanaSignIn]:{version:"1.0.0",signIn:h(this,Ot,"f")}},h(this,Me,"f"))}get accounts(){var pt,Ve;return(Ve=(pt=h(this,ye,"f"))===null||pt===void 0?void 0:pt.accounts)!==null&&Ve!==void 0?Ve:[]}get connected(){return!!h(this,ct,"f")&&!!h(this,ye,"f")}get isAuthorized(){return!!h(this,ye,"f")}get currentAuthorization(){return h(this,ye,"f")}get cachedAuthorizationResult(){return h(this,le,"f").get()}}ut=new WeakMap,re=new WeakMap,j=new WeakMap,q=new WeakMap,ue=new WeakMap,ve=new WeakMap,ye=new WeakMap,le=new WeakMap,Xe=new WeakMap,de=new WeakMap,Re=new WeakMap,Ue=new WeakMap,Me=new WeakMap,qe=new WeakMap,Rt=new WeakMap,ct=new WeakMap,gt=new WeakMap,ae=new WeakMap,J=new WeakMap,X=new WeakMap,he=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,dn=new WeakMap,mt=new WeakMap,_t=new WeakMap,Dn=new WeakMap,vt=new WeakMap,Lt=new WeakMap,Nr=new WeakMap,Ot=new WeakMap,kt=new WeakMap,Et=new WeakSet,Sn=function(pt,...Ve){var Fe;(Fe=h(this,ut,"f")[pt])===null||Fe===void 0||Fe.forEach(xt=>xt.apply(null,Ve))},ht=function(pt,Ve){var Fe;h(this,ut,"f")[pt]=(Fe=h(this,ut,"f")[pt])===null||Fe===void 0?void 0:Fe.filter(xt=>Ve!==xt)};var At=function(Kt,pt,Ve,Fe,xt){if(Fe==="m")throw new TypeError("Private method is not writable");if(Fe==="a"&&!xt)throw new TypeError("Private accessor was defined without a setter");if(typeof pt=="function"?Kt!==pt||!xt:!pt.has(Kt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Fe==="a"?xt.call(Kt,Ve):xt?xt.value=Ve:pt.set(Kt,Ve),Ve},Ft=function(Kt,pt,Ve,Fe){if(Ve==="a"&&!Fe)throw new TypeError("Private accessor was defined without a getter");if(typeof pt=="function"?Kt!==pt||!Fe:!pt.has(Kt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Ve==="m"?Fe:Ve==="a"?Fe.call(Kt):Fe?Fe.value:pt.get(Kt)},bt;function Vt(Kt){const pt=({register:Ve})=>Ve(Kt);try{window.dispatchEvent(new nn(pt))}catch(Ve){console.error(`wallet-standard:register-wallet event could not be dispatched
`,Ve)}try{window.addEventListener("wallet-standard:app-ready",({detail:Ve})=>pt(Ve))}catch(Ve){console.error(`wallet-standard:app-ready event listener could not be added
`,Ve)}}class nn extends Event{constructor(pt){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),bt.set(this,void 0),At(this,bt,pt,"f")}get detail(){return Ft(this,bt,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}bt=new WeakMap;function sn(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function qt(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Tn(Kt){sn()?Vt(new Qe(Kt)):qt()&&Kt.remoteHostAuthority!==void 0&&Vt(new Be(Object.assign(Object.assign({},Kt),{remoteHostAuthority:Kt.remoteHostAuthority})))}const Rn="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",En="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class un extends Y{constructor(){super(...arguments),this.contentStyles=Dt,this.contentHtml=$t}initWithError(pt){super.init(),this.populateError(pt)}populateError(pt){var Ve,Fe;const xt=(Ve=this.dom)===null||Ve===void 0?void 0:Ve.getElementById("mobile-wallet-adapter-error-message"),Bt=(Fe=this.dom)===null||Fe===void 0?void 0:Fe.getElementById("mobile-wallet-adapter-error-action");if(xt){if(pt.name==="SolanaMobileWalletAdapterError")switch(pt.code){case"ERROR_WALLET_NOT_FOUND":xt.innerHTML=Rn,Bt&&Bt.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":xt.innerHTML=En,Bt&&(Bt.style.display="none");return}xt.innerHTML=`An unexpected error occurred: ${pt.message}`}else console.log("Failed to locate error dialog element")}}const $t=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Dt=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Mn(){return d(this,void 0,void 0,function*(){if(typeof window<"u"){const Kt=window.navigator.userAgent.toLowerCase(),pt=new un;Kt.includes("wv")?pt.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):pt.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),pt.open()}})}function On(){return()=>d(this,void 0,void 0,function*(){Mn()})}const Fr="SolanaMobileWalletAdapterDefaultAuthorizationCache";function yi(){let Kt;try{Kt=window.localStorage}catch{}return{clear(){return d(this,void 0,void 0,function*(){if(Kt)try{Kt.removeItem(Fr)}catch{}})},get(){return d(this,void 0,void 0,function*(){if(Kt)try{const pt=JSON.parse(Kt.getItem(Fr));if(pt&&pt.accounts){const Ve=pt.accounts.map(Fe=>Object.assign(Object.assign({},Fe),{publicKey:"publicKey"in Fe?new Uint8Array(Object.values(Fe.publicKey)):c.default.decode(Fe.address)}));return Object.assign(Object.assign({},pt),{accounts:Ve})}else return pt||void 0}catch{}})},set(pt){return d(this,void 0,void 0,function*(){if(Kt)try{Kt.setItem(Fr,JSON.stringify(pt))}catch{}})}}}function ir(){return{select(Kt){return d(this,void 0,void 0,function*(){return Kt.length===1?Kt[0]:Kt.includes(s.SOLANA_MAINNET_CHAIN)?s.SOLANA_MAINNET_CHAIN:Kt[0]})}}}return La.LocalSolanaMobileWalletAdapterWallet=Qe,La.RemoteSolanaMobileWalletAdapterWallet=Be,La.SolanaMobileWalletAdapterWalletName=pe,La.createDefaultAuthorizationCache=yi,La.createDefaultChainSelector=ir,La.createDefaultWalletNotFoundHandler=On,La.defaultErrorModalWalletNotFoundHandler=Mn,La.registerMwa=Tn,La}var NI;function A9(){if(NI)return fl;NI=1,Object.defineProperty(fl,"__esModule",{value:!0});var r=M7(),e=kO,t=dT(),n=b9();function i(y,u,S,W){function $(se){return se instanceof S?se:new S(function(me){me(se)})}return new(S||(S=Promise))(function(se,me){function _e(Ze){try{wt(W.next(Ze))}catch(Pe){me(Pe)}}function be(Ze){try{wt(W.throw(Ze))}catch(Pe){me(Pe)}}function wt(Ze){Ze.done?se(Ze.value):$(Ze.value).then(_e,be)}wt((W=W.apply(y,[])).next())})}function s(y,u,S,W){if(S==="a"&&!W)throw new TypeError("Private accessor was defined without a getter");if(typeof u=="function"?y!==u||!W:!u.has(y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return S==="m"?W:S==="a"?W.call(y):W?W.value:u.get(y)}function o(y,u,S,W,$){if(typeof u=="function"?y!==u||!0:!u.has(y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u.set(y,S),S}const l="standard:connect",c="standard:disconnect",d="standard:events";function h(y){return window.btoa(String.fromCharCode.call(null,...y))}function w(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var _,x,A,L,N,C,D,k,F,Q,G,Y,ee;const te="Mobile Wallet Adapter",U=64;function V(y){return"version"in y}function K(y){switch(y){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return y}}class E extends r.BaseSignInMessageSignerWalletAdapter{constructor(u,S){super(),_.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),x.set(this,void 0),A.set(this,!1),L.set(this,w()?r.WalletReadyState.Loadable:r.WalletReadyState.Unsupported),N.set(this,void 0),C.set(this,void 0),D.set(this,void 0),k.set(this,W=>i(this,void 0,void 0,function*(){if(W.accounts&&W.accounts.length>0){s(this,_,"m",Q).call(this);const $=yield s(this,N,"f").call(this,W.accounts);$!==s(this,C,"f")&&(o(this,C,$),o(this,D,void 0),this.emit("connect",this.publicKey))}})),o(this,N,W=>i(this,void 0,void 0,function*(){var $;const se=yield S.addressSelector.select(W.map(({publicKey:me})=>h(me)));return($=W.find(({publicKey:me})=>h(me)===se))!==null&&$!==void 0?$:W[0]})),o(this,x,u),s(this,x,"f").features[d].on("change",s(this,k,"f")),this.name=s(this,x,"f").name,this.icon=s(this,x,"f").icon,this.url=s(this,x,"f").url}get publicKey(){var u;if(!s(this,D,"f")&&s(this,C,"f"))try{o(this,D,new e.PublicKey(s(this,C,"f").publicKey),"f")}catch(S){throw new r.WalletPublicKeyError(S instanceof Error&&(S==null?void 0:S.message)||"Unknown error",S)}return(u=s(this,D,"f"))!==null&&u!==void 0?u:null}get connected(){return s(this,x,"f").connected}get connecting(){return s(this,A,"f")}get readyState(){return s(this,L,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return i(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return i(this,void 0,void 0,function*(){s(this,_,"m",F).call(this,!0)})}connect(){return i(this,void 0,void 0,function*(){s(this,_,"m",F).call(this)})}performAuthorization(u){return i(this,void 0,void 0,function*(){try{const S=yield s(this,x,"f").cachedAuthorizationResult;return S?(yield s(this,x,"f").features[l].connect({silent:!0}),S):(u?yield s(this,x,"f").features[t.SolanaSignIn].signIn(u):yield s(this,x,"f").features[l].connect(),yield yield s(this,x,"f").cachedAuthorizationResult)}catch(S){throw new r.WalletConnectionError(S instanceof Error&&S.message||"Unknown error",S)}})}disconnect(){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){o(this,A,!1),o(this,D,void 0),o(this,C,void 0),yield s(this,x,"f").features[c].disconnect(),this.emit("disconnect")}))})}signIn(u){return i(this,void 0,void 0,function*(){return s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){var S;if(s(this,L,"f")!==r.WalletReadyState.Installed&&s(this,L,"f")!==r.WalletReadyState.Loadable)throw new r.WalletNotReadyError;o(this,A,!0);try{const W=yield s(this,x,"f").features[t.SolanaSignIn].signIn(Object.assign(Object.assign({},u),{domain:(S=u==null?void 0:u.domain)!==null&&S!==void 0?S:window.location.host}));if(W.length>0)return W[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(W){throw new r.WalletConnectionError(W instanceof Error&&W.message||"Unknown error",W)}finally{o(this,A,!1)}}))})}signMessage(u){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){const S=s(this,_,"m",G).call(this);try{return(yield s(this,x,"f").features[t.SolanaSignMessage].signMessage({account:S,message:u}))[0].signature}catch(W){throw new r.WalletSignMessageError(W==null?void 0:W.message,W)}}))})}sendTransaction(u,S,W){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){const $=s(this,_,"m",G).call(this);try{let se=function(){let me;switch(S.commitment){case"confirmed":case"finalized":case"processed":me=S.commitment;break;default:me="finalized"}let _e;switch(W==null?void 0:W.preflightCommitment){case"confirmed":case"finalized":case"processed":_e=W.preflightCommitment;break;case void 0:_e=me;break;default:_e="finalized"}return(_e==="finalized"?2:_e==="confirmed"?1:0)<(me==="finalized"?2:me==="confirmed"?1:0)?_e:me};if(t.SolanaSignAndSendTransaction in s(this,x,"f").features){const me=K(s(this,x,"f").currentAuthorization.chain),[_e]=(yield s(this,x,"f").features[t.SolanaSignAndSendTransaction].signAndSendTransaction({account:$,transaction:u.serialize(),chain:me,options:W?{skipPreflight:W.skipPreflight,maxRetries:W.maxRetries}:void 0})).map((be=>h(be.signature)));return _e}else{const[me]=yield s(this,_,"m",Y).call(this,[u]);if(V(me))return yield S.sendTransaction(me);{const _e=me.serialize();return yield S.sendRawTransaction(_e,Object.assign(Object.assign({},W),{preflightCommitment:se()}))}}}catch(se){throw new r.WalletSendTransactionError(se==null?void 0:se.message,se)}}))})}signTransaction(u){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){const[S]=yield s(this,_,"m",Y).call(this,[u]);return S}))})}signAllTransactions(u){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){return yield s(this,_,"m",Y).call(this,u)}))})}}x=new WeakMap,A=new WeakMap,L=new WeakMap,N=new WeakMap,C=new WeakMap,D=new WeakMap,k=new WeakMap,_=new WeakSet,F=function(u=!1){return i(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){if(s(this,L,"f")!==r.WalletReadyState.Installed&&s(this,L,"f")!==r.WalletReadyState.Loadable)throw new r.WalletNotReadyError;o(this,A,!0);try{yield s(this,x,"f").features[l].connect({silent:u})}catch(S){throw new r.WalletConnectionError(S instanceof Error&&S.message||"Unknown error",S)}finally{o(this,A,!1)}}))})},Q=function(){s(this,L,"f")!==r.WalletReadyState.Installed&&this.emit("readyStateChange",o(this,L,r.WalletReadyState.Installed))},G=function(){if(!s(this,x,"f").isAuthorized||!s(this,C,"f"))throw new r.WalletNotConnectedError;return s(this,C,"f")},Y=function(u){return i(this,void 0,void 0,function*(){const S=s(this,_,"m",G).call(this);try{if(t.SolanaSignTransaction in s(this,x,"f").features)return s(this,x,"f").features[t.SolanaSignTransaction].signTransaction(...u.map(W=>({account:S,transaction:W.serialize()}))).then(W=>W.map($=>{const se=$.signedTransaction,_e=se[0]*U+1;return e.VersionedMessage.deserializeMessageVersion(se.slice(_e,se.length))==="legacy"?e.Transaction.from(se):e.VersionedTransaction.deserialize(se)}));throw new Error("Connected wallet does not support signing transactions")}catch(W){throw new r.WalletSignTransactionError(W==null?void 0:W.message,W)}})},ee=function(u){return i(this,void 0,void 0,function*(){try{return yield u()}catch(S){throw this.emit("error",S),S}})};class a extends E{constructor(u){var S;const W=K((S=u.chain)!==null&&S!==void 0?S:u.cluster);super(new n.LocalSolanaMobileWalletAdapterWallet({appIdentity:u.appIdentity,authorizationCache:{set:u.authorizationResultCache.set,get:()=>i(this,void 0,void 0,function*(){return yield u.authorizationResultCache.get()}),clear:u.authorizationResultCache.clear},chains:[W],chainSelector:n.createDefaultChainSelector(),onWalletNotFound:()=>i(this,void 0,void 0,function*(){u.onWalletNotFound(this)})}),{addressSelector:u.addressSelector,chain:W})}}class p extends E{constructor(u){const S=K(u.chain);super(new n.RemoteSolanaMobileWalletAdapterWallet({appIdentity:u.appIdentity,authorizationCache:{set:u.authorizationResultCache.set,get:()=>i(this,void 0,void 0,function*(){return yield u.authorizationResultCache.get()}),clear:u.authorizationResultCache.clear},chains:[S],chainSelector:n.createDefaultChainSelector(),remoteHostAuthority:u.remoteHostAuthority,onWalletNotFound:()=>i(this,void 0,void 0,function*(){u.onWalletNotFound(this)})}),{addressSelector:u.addressSelector,chain:S})}}class M extends a{}function R(){return{select(y){return i(this,void 0,void 0,function*(){return y[0]})}}}function T(){return n.createDefaultAuthorizationCache()}function P(y){return i(this,void 0,void 0,function*(){return n.defaultErrorModalWalletNotFoundHandler()})}function I(){return P}return fl.LocalSolanaMobileWalletAdapter=a,fl.RemoteSolanaMobileWalletAdapter=p,fl.SolanaMobileWalletAdapter=M,fl.SolanaMobileWalletAdapterWalletName=te,fl.createDefaultAddressSelector=R,fl.createDefaultAuthorizationResultCache=T,fl.createDefaultWalletNotFoundHandler=I,fl}var Hc=A9(),T9=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},R9=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},i_;function C9(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new I9(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class I9 extends Event{get detail(){return T9(this,i_,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),i_.set(this,void 0),R9(this,i_,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}i_=new WeakMap;function N9(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function P9(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<r.length;d++){const h=r.charAt(d),w=h.charCodeAt(0);if(e[w]!==255)throw new TypeError(h+" is ambiguous");e[w]=d}const t=r.length,n=r.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let h=0,w=0,_=0;const x=d.length;for(;_!==x&&d[_]===0;)_++,h++;const A=(x-_)*s+1>>>0,L=new Uint8Array(A);for(;_!==x;){let D=d[_],k=0;for(let F=A-1;(D!==0||k<w)&&F!==-1;F--,k++)D+=256*L[F]>>>0,L[F]=D%t>>>0,D=D/t>>>0;if(D!==0)throw new Error("Non-zero carry");w=k,_++}let N=A-w;for(;N!==A&&L[N]===0;)N++;let C=n.repeat(h);for(;N<A;++N)C+=r.charAt(L[N]);return C}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let h=0,w=0,_=0;for(;d[h]===n;)w++,h++;const x=(d.length-h)*i+1>>>0,A=new Uint8Array(x);for(;h<d.length;){const D=d.charCodeAt(h);if(D>255)return;let k=e[D];if(k===255)return;let F=0;for(let Q=x-1;(k!==0||F<_)&&Q!==-1;Q--,F++)k+=t*A[Q]>>>0,A[Q]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");_=F,h++}let L=x-_;for(;L!==x&&A[L]===0;)L++;const N=new Uint8Array(w+(x-L));let C=w;for(;L!==x;)N[C++]=A[L++];return N}function c(d){const h=l(d);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:c}}var L9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const k9=P9(L9);var _n=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ai=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},cs,po,Ih,Nh,mh,ag,O_,mr,D_,Ab,s_,Tb,pg,Rb,PI,LI,kI,OI;class O9 extends TO{get name(){return _n(this,mr,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _n(this,mr,"f").icon}get readyState(){return _n(this,D_,"f")}get publicKey(){return _n(this,Ih,"f")}get connecting(){return _n(this,Nh,"f")}get supportedTransactionVersions(){return _n(this,O_,"f")}get wallet(){return _n(this,mr,"f")}get standard(){return!0}constructor({wallet:e}){super(),cs.add(this),po.set(this,void 0),Ih.set(this,void 0),Nh.set(this,void 0),mh.set(this,void 0),ag.set(this,void 0),O_.set(this,void 0),mr.set(this,void 0),D_.set(this,typeof window>"u"||typeof document>"u"?vr.Unsupported:vr.Installed),Rb.set(this,t=>{if("accounts"in t){const n=_n(this,mr,"f").accounts[0];_n(this,po,"f")&&!_n(this,mh,"f")&&n!==_n(this,po,"f")&&(n?_n(this,cs,"m",s_).call(this,n):(this.emit("error",new oT),_n(this,cs,"m",Tb).call(this)))}"features"in t&&_n(this,cs,"m",pg).call(this)}),Ai(this,mr,e,"f"),Ai(this,po,null,"f"),Ai(this,Ih,null,"f"),Ai(this,Nh,!1,"f"),Ai(this,mh,!1,"f"),Ai(this,ag,_n(this,mr,"f").features[cT].on("change",_n(this,Rb,"f")),"f"),_n(this,cs,"m",pg).call(this)}destroy(){Ai(this,po,null,"f"),Ai(this,Ih,null,"f"),Ai(this,Nh,!1,"f"),Ai(this,mh,!1,"f");const e=_n(this,ag,"f");e&&(Ai(this,ag,null,"f"),e())}async autoConnect(){return _n(this,cs,"m",Ab).call(this,{silent:!0})}async connect(){return _n(this,cs,"m",Ab).call(this)}async disconnect(){if(_b in _n(this,mr,"f").features)try{Ai(this,mh,!0,"f"),await _n(this,mr,"f").features[_b].disconnect()}catch(e){this.emit("error",new aT(e==null?void 0:e.message,e))}finally{Ai(this,mh,!1,"f")}_n(this,cs,"m",Tb).call(this)}async sendTransaction(e,t,n={}){try{const i=_n(this,po,"f");if(!i)throw new Ii;let s;if(Iu in _n(this,mr,"f").features)if(i.features.includes(Iu))s=Iu;else if($i in _n(this,mr,"f").features&&i.features.includes($i))s=$i;else throw new Ch;else if($i in _n(this,mr,"f").features){if(!i.features.includes($i))throw new Ch;s=$i}else throw new jp;const o=K7(t.rpcEndpoint);if(!i.chains.includes(o))throw new Xc;try{const{signers:l,...c}=n;let d;if(Ou(e)?(l!=null&&l.length&&e.sign(l),d=e.serialize()):(e=await this.prepareTransaction(e,t,c),l!=null&&l.length&&e.partialSign(...l),d=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Iu){const[h]=await _n(this,mr,"f").features[Iu].signAndSendTransaction({account:i,chain:o,transaction:d,options:{preflightCommitment:bM(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return k9.encode(h.signature)}else{const[h]=await _n(this,mr,"f").features[$i].signTransaction({account:i,chain:o,transaction:d,options:{preflightCommitment:bM(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(h.signedTransaction,{...c,preflightCommitment:bM(c.preflightCommitment||t.commitment)})}}catch(l){throw l instanceof Qi?l:new Xc(l==null?void 0:l.message,l)}}catch(i){throw this.emit("error",i),i}}}po=new WeakMap,Ih=new WeakMap,Nh=new WeakMap,mh=new WeakMap,ag=new WeakMap,O_=new WeakMap,mr=new WeakMap,D_=new WeakMap,Rb=new WeakMap,cs=new WeakSet,Ab=async function(e){try{if(this.connected||this.connecting)return;if(_n(this,D_,"f")!==vr.Installed)throw new Ug;if(Ai(this,Nh,!0,"f"),!_n(this,mr,"f").accounts.length)try{await _n(this,mr,"f").features[uT].connect(e)}catch(n){throw new N_(n==null?void 0:n.message,n)}const t=_n(this,mr,"f").accounts[0];if(!t)throw new Ch;_n(this,cs,"m",s_).call(this,t)}catch(t){throw this.emit("error",t),t}finally{Ai(this,Nh,!1,"f")}},s_=function(e){let t;try{t=new Mt(e.address)}catch(n){throw new Fg(n==null?void 0:n.message,n)}Ai(this,po,e,"f"),Ai(this,Ih,t,"f"),_n(this,cs,"m",pg).call(this),this.emit("connect",t)},Tb=function(){Ai(this,po,null,"f"),Ai(this,Ih,null,"f"),_n(this,cs,"m",pg).call(this),this.emit("disconnect")},pg=function(){var t,n;const e=Iu in _n(this,mr,"f").features?_n(this,mr,"f").features[Iu].supportedTransactionVersions:_n(this,mr,"f").features[$i].supportedTransactionVersions;Ai(this,O_,N9(e,["legacy"])?null:new Set(e),"f"),$i in _n(this,mr,"f").features&&((t=_n(this,po,"f"))!=null&&t.features.includes($i))?(this.signTransaction=_n(this,cs,"m",PI),this.signAllTransactions=_n(this,cs,"m",LI)):(delete this.signTransaction,delete this.signAllTransactions),zp in _n(this,mr,"f").features&&((n=_n(this,po,"f"))!=null&&n.features.includes(zp))?this.signMessage=_n(this,cs,"m",kI):delete this.signMessage,QS in _n(this,mr,"f").features?this.signIn=_n(this,cs,"m",OI):delete this.signIn},PI=async function(e){try{const t=_n(this,po,"f");if(!t)throw new Ii;if(!($i in _n(this,mr,"f").features))throw new jp;if(!t.features.includes($i))throw new Ch;try{const i=(await _n(this,mr,"f").features[$i].signTransaction({account:t,transaction:Ou(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Ou(e)?Dg.deserialize(i):ur.from(i)}catch(n){throw n instanceof Qi?n:new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},LI=async function(e){try{const t=_n(this,po,"f");if(!t)throw new Ii;if(!($i in _n(this,mr,"f").features))throw new jp;if(!t.features.includes($i))throw new Ch;try{const n=await _n(this,mr,"f").features[$i].signTransaction(...e.map(i=>({account:t,transaction:Ou(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return Ou(i)?Dg.deserialize(o):ur.from(o)})}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},kI=async function(e){try{const t=_n(this,po,"f");if(!t)throw new Ii;if(!(zp in _n(this,mr,"f").features))throw new jp;if(!t.features.includes(zp))throw new Ch;try{return(await _n(this,mr,"f").features[zp].signMessage({account:t,message:e}))[0].signature}catch(n){throw new lT(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},OI=async function(e={}){try{if(!(QS in _n(this,mr,"f").features))throw new jp;let t;try{[t]=await _n(this,mr,"f").features[QS].signIn(e)}catch(n){throw new PC(n==null?void 0:n.message,n)}if(!t)throw new PC;return _n(this,cs,"m",s_).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const D9=u7;var B9=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},U9=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},o_;let Do;const Z1=new Set;function F9(r){mg=void 0,Z1.add(r)}function z9(r){mg=void 0,Z1.delete(r)}const qp={};function W9(){if(Do||(Do=Object.freeze({register:DI,get:V9,on:H9}),typeof window>"u"))return Do;const r=Object.freeze({register:DI});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new G9(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Do}function DI(...r){var e;return r=r.filter(t=>!Z1.has(t)),r.length?(r.forEach(t=>F9(t)),(e=qp.register)==null||e.forEach(t=>Cb(()=>t(...r))),function(){var n;r.forEach(i=>z9(i)),(n=qp.unregister)==null||n.forEach(i=>Cb(()=>i(...r)))}):()=>{}}let mg;function V9(){return mg||(mg=[...Z1]),mg}function H9(r,e){var t;return(t=qp[r])!=null&&t.push(e)||(qp[r]=[e]),function(){var i;qp[r]=(i=qp[r])==null?void 0:i.filter(s=>e!==s)}}function Cb(r){try{r()}catch(e){console.error(e)}}class G9 extends Event{get detail(){return B9(this,o_,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),o_.set(this,void 0),U9(this,o_,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}o_=new WeakMap;function j9(){if(Do||(Do=W9(),typeof window>"u"))return Do;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),Do;const{register:e}=Do,t=(...n)=>n.forEach(i=>Cb(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Do}return t(...r),Do}function q9(r){const e=BI(()=>new Set),{get:t,on:n}=BI(()=>j9()),[i,s]=Ce.useState(()=>UI(t()));Ce.useEffect(()=>{const l=[n("register",(...c)=>s(d=>[...d,...UI(c)])),n("unregister",(...c)=>s(d=>d.filter(h=>c.some(w=>w===h.wallet))))];return()=>l.forEach(c=>c())},[n]);const o=K9(i);return Ce.useEffect(()=>{if(!o)return;const l=new Set(i);new Set(o.filter(d=>!l.has(d))).forEach(d=>d.destroy())},[o,i]),Ce.useEffect(()=>()=>i.forEach(l=>l.destroy()),[]),Ce.useMemo(()=>[...i,...r.filter(({name:l})=>i.some(c=>c.name===l)?(e.has(l)||(e.add(l),console.warn(`${l} was registered as a Standard Wallet. The Wallet Adapter for ${l} can be removed from your app.`)),!1):!0)],[i,r,e])}function BI(r){const e=Ce.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function K9(r){const e=Ce.useRef(void 0);return Ce.useEffect(()=>{e.current=r}),e.current}function UI(r){return r.filter(D9).map(e=>new O9({wallet:e}))}var l0;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(l0||(l0={}));function Y9(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function X9({adapters:r,userAgentString:e}){return r.some(t=>t.name!==Hc.SolanaMobileWalletAdapterWalletName&&t.readyState===vr.Installed)?l0.DESKTOP_WEB:e&&/android/i.test(e)&&!Y9(e)?l0.MOBILE_WEB:l0.DESKTOP_WEB}function $9(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Z9({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:l}){const c=Ce.useRef(!1),[d,h]=Ce.useState(!1),w=Ce.useRef(!1),[_,x]=Ce.useState(!1),[A,L]=Ce.useState(()=>(t==null?void 0:t.publicKey)??null),[N,C]=Ce.useState(()=>(t==null?void 0:t.connected)??!1),D=Ce.useRef(o);Ce.useEffect(()=>(D.current=o,()=>{D.current=void 0}),[o]);const k=Ce.useRef((p,M)=>(n.current||(D.current?D.current(p,M):(console.error(p,M),p instanceof Ug&&typeof window<"u"&&M&&window.open(M.url,"_blank"))),p)),[F,Q]=Ce.useState(()=>e.map(p=>({adapter:p,readyState:p.readyState})).filter(({readyState:p})=>p!==vr.Unsupported));Ce.useEffect(()=>{Q(M=>e.map((R,T)=>{const P=M[T];return P&&P.adapter===R&&P.readyState===R.readyState?P:{adapter:R,readyState:R.readyState}}).filter(({readyState:R})=>R!==vr.Unsupported));function p(M){Q(R=>{const T=R.findIndex(({adapter:I})=>I===this);if(T===-1)return R;const{adapter:P}=R[T];return[...R.slice(0,T),{adapter:P,readyState:M},...R.slice(T+1)].filter(({readyState:I})=>I!==vr.Unsupported)})}return e.forEach(M=>M.on("readyStateChange",p,M)),()=>{e.forEach(M=>M.off("readyStateChange",p,M))}},[t,e]);const G=Ce.useMemo(()=>F.find(p=>p.adapter===t)??null,[t,F]);Ce.useEffect(()=>{if(!t)return;const p=T=>{L(T),c.current=!1,h(!1),C(!0),w.current=!1,x(!1)},M=()=>{n.current||(L(null),c.current=!1,h(!1),C(!1),w.current=!1,x(!1))},R=T=>{k.current(T,t)};return t.on("connect",p),t.on("disconnect",M),t.on("error",R),()=>{t.off("connect",p),t.off("disconnect",M),t.off("error",R),M()}},[t,n]);const Y=Ce.useRef(!1);Ce.useEffect(()=>()=>{Y.current=!1},[t]),Ce.useEffect(()=>{Y.current||c.current||N||!i||!((G==null?void 0:G.readyState)===vr.Installed||(G==null?void 0:G.readyState)===vr.Loadable)||(c.current=!0,h(!0),Y.current=!0,(async function(){try{await i()}catch{s()}finally{h(!1),c.current=!1}})())},[N,i,s,G]);const ee=Ce.useCallback(async(p,M,R)=>{if(!t)throw k.current(new LC);if(!N)throw k.current(new Ii,t);return await t.sendTransaction(p,M,R)},[t,N]),te=Ce.useMemo(()=>t&&"signTransaction"in t?async p=>{if(!N)throw k.current(new Ii,t);return await t.signTransaction(p)}:void 0,[t,N]),U=Ce.useMemo(()=>t&&"signAllTransactions"in t?async p=>{if(!N)throw k.current(new Ii,t);return await t.signAllTransactions(p)}:void 0,[t,N]),V=Ce.useMemo(()=>t&&"signMessage"in t?async p=>{if(!N)throw k.current(new Ii,t);return await t.signMessage(p)}:void 0,[t,N]),K=Ce.useMemo(()=>t&&"signIn"in t?async p=>await t.signIn(p):void 0,[t]),E=Ce.useCallback(async()=>{if(c.current||w.current||G!=null&&G.adapter.connected)return;if(!G)throw k.current(new LC);const{adapter:p,readyState:M}=G;if(!(M===vr.Installed||M===vr.Loadable))throw k.current(new Ug,p);c.current=!0,h(!0);try{await p.connect()}catch(R){throw s(),R}finally{h(!1),c.current=!1}},[s,G]),a=Ce.useCallback(async()=>{if(!w.current&&t){w.current=!0,x(!0);try{await t.disconnect()}finally{x(!1),w.current=!1}}},[t]);return Ut.createElement(IO.Provider,{value:{autoConnect:!!i,wallets:F,wallet:G,publicKey:A,connected:N,connecting:d,disconnecting:_,select:l,connect:E,disconnect:a,sendTransaction:ee,signTransaction:te,signAllTransactions:U,signMessage:V,signIn:K}},r)}let IM;function Q9(){var r;return IM===void 0&&(IM=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),IM}function FI(r){const e=Q9();return X9({adapters:r,userAgentString:e})===l0.MOBILE_WEB}function J9(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function eG({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:i}){const{connection:s}=AO(),o=q9(e),l=Ce.useMemo(()=>{if(!FI(o))return null;const D=o.find(k=>k.name===Hc.SolanaMobileWalletAdapterWalletName);return D||new Hc.SolanaMobileWalletAdapter({addressSelector:Hc.createDefaultAddressSelector(),appIdentity:{uri:J9()},authorizationResultCache:Hc.createDefaultAuthorizationResultCache(),cluster:$9(s==null?void 0:s.rpcEndpoint),onWalletNotFound:Hc.createDefaultWalletNotFoundHandler()})},[o,s==null?void 0:s.rpcEndpoint]),c=Ce.useMemo(()=>l==null||o.indexOf(l)!==-1?o:[l,...o],[o,l]),[d,h]=f7(n,null),w=Ce.useMemo(()=>c.find(D=>D.name===d)??null,[c,d]),_=Ce.useCallback(D=>{d!==D&&(w&&w.name!==Hc.SolanaMobileWalletAdapterWalletName&&w.disconnect(),h(D))},[w,h,d]);Ce.useEffect(()=>{if(!w)return;function D(){L.current||h(null)}return w.on("disconnect",D),()=>{w.off("disconnect",D)}},[w,o,h,d]);const x=Ce.useRef(!1),A=Ce.useMemo(()=>{if(!(!t||!w))return async()=>{(t===!0||await t(w))&&(x.current?await w.connect():await w.autoConnect())}},[t,w]),L=Ce.useRef(!1);Ce.useEffect(()=>{if(d===Hc.SolanaMobileWalletAdapterWalletName&&FI(o)){L.current=!1;return}function D(){L.current=!0}return window.addEventListener("beforeunload",D),()=>{window.removeEventListener("beforeunload",D)}},[o,d]);const N=Ce.useCallback(()=>{w&&_(null)},[w,_]),C=Ce.useCallback(D=>{x.current=!0,_(D)},[_]);return Ut.createElement(Z9,{wallets:c,adapter:w,isUnloadingRef:L,onAutoConnectRequest:A,onConnectError:N,onError:i,onSelectWallet:C},r)}const rD={setVisible(r){console.error(iD("call","setVisible"))},visible:!1};Object.defineProperty(rD,"visible",{get(){return console.error(iD("read","visible")),!1}});function iD(r,e){return`You have tried to  ${r} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const sD=Ce.createContext(rD);function oD(){return Ce.useContext(sD)}function tG({onSelectWallet:r}){const{connect:e,connected:t,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:l,wallet:c,wallets:d}=fT();let h;n?h="connecting":t?h="connected":s?h="disconnecting":c?h="has-wallet":h="no-wallet";const w=Ce.useCallback(()=>{e().catch(()=>{})},[e]),_=Ce.useCallback(()=>{i().catch(()=>{})},[i]),x=Ce.useCallback(()=>{r({onSelectWallet:l,wallets:d})},[r,l,d]);return{buttonState:h,onConnect:h==="has-wallet"?w:void 0,onDisconnect:h!=="disconnecting"&&h!=="no-wallet"?_:void 0,onSelectWallet:x,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const aD=r=>Ut.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&Ut.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&Ut.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),lD=({wallet:r,...e})=>r&&Ut.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...e});function nG({walletIcon:r,walletName:e,...t}){return Ut.createElement(aD,{...t,className:"wallet-adapter-button-trigger",startIcon:r&&e?Ut.createElement(lD,{wallet:{adapter:{icon:r,name:e}}}):void 0})}function rG({children:r,labels:e,...t}){const{setVisible:n}=oD(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:l,walletIcon:c,walletName:d}=tG({onSelectWallet(){n(!0)}}),[h,w]=Ce.useState(!1),[_,x]=Ce.useState(!1),A=Ce.useRef(null);Ce.useEffect(()=>{const N=C=>{const D=A.current;!D||D.contains(C.target)||x(!1)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[]);const L=Ce.useMemo(()=>{if(r)return r;if(l){const N=l.toBase58();return N.slice(0,4)+".."+N.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,r,e,l]);return Ut.createElement("div",{className:"wallet-adapter-dropdown"},Ut.createElement(nG,{...t,"aria-expanded":_,style:{pointerEvents:_?"none":"auto",...t.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":x(!0);break}},walletIcon:c,walletName:d},L),Ut.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${_&&"wallet-adapter-dropdown-list-active"}`,ref:A,role:"menu"},l?Ut.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(l.toBase58()),w(!0),setTimeout(()=>w(!1),400)},role:"menuitem"},h?e.copied:e["copy-address"]):null,Ut.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),x(!1)},role:"menuitem"},e["change-wallet"]),o?Ut.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),x(!1)},role:"menuitem"},e.disconnect):null))}var iG=rk();const zI=({id:r,children:e,expanded:t=!1})=>{const n=Ce.useRef(null),i=Ce.useRef(!0),s="height 250ms ease-out",o=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},l=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return Ce.useLayoutEffect(()=>{t?o():l()},[t]),Ce.useLayoutEffect(()=>{const c=n.current;if(!c)return;function d(){c&&(c.style.overflow=t?"initial":"hidden",t&&(c.style.height="auto"))}function h(w){c&&w.target===c&&w.propertyName==="height"&&d()}return i.current&&(d(),i.current=!1),c.addEventListener("transitionend",h),()=>c.removeEventListener("transitionend",h)},[t]),Ut.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},NM=({handleClick:r,tabIndex:e,wallet:t})=>Ut.createElement("li",null,Ut.createElement(aD,{onClick:r,startIcon:Ut.createElement(lD,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===vr.Installed&&Ut.createElement("span",null,"Detected"))),sG=()=>Ut.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ut.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),Ut.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),Ut.createElement("g",{clipPath:"url(#clip0_880_5115)"},Ut.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),Ut.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),Ut.createElement("defs",null,Ut.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Ut.createElement("stop",{stopColor:"#9945FF"}),Ut.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ut.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ut.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ut.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ut.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ut.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Ut.createElement("stop",{stopColor:"#9945FF"}),Ut.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ut.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ut.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ut.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ut.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ut.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},Ut.createElement("stop",{stopColor:"#9945FF"}),Ut.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ut.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ut.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ut.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ut.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ut.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},Ut.createElement("stop",{stopColor:"#9945FF"}),Ut.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ut.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ut.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ut.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ut.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ut.createElement("clipPath",{id:"clip0_880_5115"},Ut.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),oG=({className:r="",container:e="body"})=>{const t=Ce.useRef(null),{wallets:n,select:i}=fT(),{setVisible:s}=oD(),[o,l]=Ce.useState(!1),[c,d]=Ce.useState(!1),[h,w]=Ce.useState(null),[_,x]=Ce.useMemo(()=>{const k=[],F=[];for(const Q of n)Q.readyState===vr.Installed?k.push(Q):F.push(Q);return k.length?[k,F]:[F,[]]},[n]),A=Ce.useCallback(()=>{d(!1),setTimeout(()=>s(!1),150)},[s]),L=Ce.useCallback(k=>{k.preventDefault(),A()},[A]),N=Ce.useCallback((k,F)=>{i(F),L(k)},[i,L]),C=Ce.useCallback(()=>l(!o),[o]),D=Ce.useCallback(k=>{const F=t.current;if(!F)return;const Q=F.querySelectorAll("button"),G=Q[0],Y=Q[Q.length-1];k.shiftKey?document.activeElement===G&&(Y.focus(),k.preventDefault()):document.activeElement===Y&&(G.focus(),k.preventDefault())},[t]);return Ce.useLayoutEffect(()=>{const k=Q=>{Q.key==="Escape"?A():Q.key==="Tab"&&D(Q)},{overflow:F}=window.getComputedStyle(document.body);return setTimeout(()=>d(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",k,!1),()=>{document.body.style.overflow=F,window.removeEventListener("keydown",k,!1)}},[A,D]),Ce.useLayoutEffect(()=>w(document.querySelector(e)),[e]),h&&iG.createPortal(Ut.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${r}`,ref:t,role:"dialog"},Ut.createElement("div",{className:"wallet-adapter-modal-container"},Ut.createElement("div",{className:"wallet-adapter-modal-wrapper"},Ut.createElement("button",{onClick:L,className:"wallet-adapter-modal-button-close"},Ut.createElement("svg",{width:"14",height:"14"},Ut.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),_.length?Ut.createElement(Ut.Fragment,null,Ut.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),Ut.createElement("ul",{className:"wallet-adapter-modal-list"},_.map(k=>Ut.createElement(NM,{key:k.adapter.name,handleClick:F=>N(F,k.adapter.name),wallet:k})),x.length?Ut.createElement(zI,{expanded:o,id:"wallet-adapter-modal-collapse"},x.map(k=>Ut.createElement(NM,{key:k.adapter.name,handleClick:F=>N(F,k.adapter.name),tabIndex:o?0:-1,wallet:k}))):null),x.length?Ut.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:C,tabIndex:0},Ut.createElement("span",null,o?"Less ":"More ","options"),Ut.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Ut.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):Ut.createElement(Ut.Fragment,null,Ut.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),Ut.createElement("div",{className:"wallet-adapter-modal-middle"},Ut.createElement(sG,null)),x.length?Ut.createElement(Ut.Fragment,null,Ut.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:C,tabIndex:0},Ut.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),Ut.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Ut.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),Ut.createElement(zI,{expanded:o,id:"wallet-adapter-modal-collapse"},Ut.createElement("ul",{className:"wallet-adapter-modal-list"},x.map(k=>Ut.createElement(NM,{key:k.adapter.name,handleClick:F=>N(F,k.adapter.name),tabIndex:o?0:-1,wallet:k}))))):null))),Ut.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:L})),h)},aG=({children:r,...e})=>{const[t,n]=Ce.useState(!1);return Ut.createElement(sD.Provider,{value:{visible:t,setVisible:n}},r,t&&Ut.createElement(oG,{...e}))},lG={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function uG(r){return Ut.createElement(rG,{...r,labels:lG})}const cG="modulepreload",fG=function(r){return"/"+r},WI={},uD=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(t.map(d=>{if(d=fG(d),d in WI)return;WI[d]=!0;const h=d.endsWith(".css"),w=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${w}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":cG,h||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),h)return new Promise((x,A)=>{_.addEventListener("load",x),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},hG="Phantom";class dG extends CO{constructor(e={}){super(),this.name=hG,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?vr.Unsupported:vr.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new oT),this.emit("disconnect"))},this._accountChanged=t=>{const n=this._publicKey;if(n){try{t=new Mt(t.toBytes())}catch(i){this.emit("error",new Fg(i==null?void 0:i.message,i));return}n.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==vr.Unsupported&&(wb()?(this._readyState=vr.Loadable,this.emit("readyStateChange",this._readyState)):RO(()=>{var t,n,i;return(n=(t=window.phantom)==null?void 0:t.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=vr.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===vr.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===vr.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==vr.Installed)throw new Ug;this._connecting=!0;const t=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!t.isConnected)try{await t.connect()}catch(i){throw new N_(i==null?void 0:i.message,i)}if(!t.publicKey)throw new Ch;let n;try{n=new Mt(t.publicKey.toBytes())}catch(i){throw new Fg(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=n,this.emit("connect",n)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new aT(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,n={}){try{const i=this._wallet;if(!i)throw new Ii;try{const{signers:s,...o}=n;Ou(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:l}=await i.signAndSendTransaction(e,o);return l}catch(s){throw s instanceof Qi?s:new Xc(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Ii;try{return await t.signTransaction(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Ii;try{return await t.signAllTransactions(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Ii;try{const{signature:n}=await t.signMessage(e);return n}catch(n){throw new lT(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}}const pG="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var Er=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},mG=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},a_,Ph,Ib,Nb,Pb,Rs,Lb,cD,fD,kb,Ob,Db,Bb,Ub;class gG{constructor(){a_.add(this),Ph.set(this,{}),Ib.set(this,"1.0.0"),Nb.set(this,"MetaMask"),Pb.set(this,pG),Rs.set(this,null),Lb.set(this,(e,t)=>{var n;return(n=Er(this,Ph,"f")[e])!=null&&n.push(t)||(Er(this,Ph,"f")[e]=[t]),()=>Er(this,a_,"m",fD).call(this,e,t)}),kb.set(this,async()=>{if(!Er(this,Rs,"f")){let e;try{e=(await uD(async()=>{const{default:t}=await import("./index-CLN04Gd5.js");return{default:t}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}mG(this,Rs,new e,"f"),Er(this,Rs,"f").on("standard_change",t=>Er(this,a_,"m",cD).call(this,"change",t))}return this.accounts.length||await Er(this,Rs,"f").connect(),{accounts:this.accounts}}),Ob.set(this,async()=>{Er(this,Rs,"f")&&await Er(this,Rs,"f").disconnect()}),Db.set(this,async(...e)=>{if(!Er(this,Rs,"f"))throw new Ii;return await Er(this,Rs,"f").standardSignAndSendTransaction(...e)}),Bb.set(this,async(...e)=>{if(!Er(this,Rs,"f"))throw new Ii;return await Er(this,Rs,"f").standardSignTransaction(...e)}),Ub.set(this,async(...e)=>{if(!Er(this,Rs,"f"))throw new Ii;return await Er(this,Rs,"f").standardSignMessage(...e)})}get version(){return Er(this,Ib,"f")}get name(){return Er(this,Nb,"f")}get icon(){return Er(this,Pb,"f")}get chains(){return[Sb,FO,zO]}get features(){return{[uT]:{version:"1.0.0",connect:Er(this,kb,"f")},[_b]:{version:"1.0.0",disconnect:Er(this,Ob,"f")},[cT]:{version:"1.0.0",on:Er(this,Lb,"f")},[Iu]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:Er(this,Db,"f")},[$i]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:Er(this,Bb,"f")},[zp]:{version:"1.0.0",signMessage:Er(this,Ub,"f")}}}get accounts(){return Er(this,Rs,"f")?Er(this,Rs,"f").standardAccounts:[]}}Ph=new WeakMap,Ib=new WeakMap,Nb=new WeakMap,Pb=new WeakMap,Rs=new WeakMap,Lb=new WeakMap,kb=new WeakMap,Ob=new WeakMap,Db=new WeakMap,Bb=new WeakMap,Ub=new WeakMap,a_=new WeakSet,cD=function(e,...t){var n;(n=Er(this,Ph,"f")[e])==null||n.forEach(i=>i.apply(null,t))},fD=function(e,t){var n;Er(this,Ph,"f")[e]=(n=Er(this,Ph,"f")[e])==null?void 0:n.filter(i=>t!==i)};let VI=!1;function yG(){VI||(C9(new gG),VI=!0)}async function vG(){const r="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:r,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function t(n){var s,o;const i=n.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===r?(window.removeEventListener("message",t),i.data.data.error||yG()):e())}window.addEventListener("message",t),window.setTimeout(()=>window.removeEventListener("message",t),5e3),e()}const wG="Solflare";class _G extends CO{constructor(e={}){super(),this.name=wG,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?vr.Unsupported:vr.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new oT),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const n=this._publicKey;if(n){try{t=new Mt(t.toBytes())}catch(i){this.emit("error",new Fg(i==null?void 0:i.message,i));return}n.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==vr.Unsupported&&(RO(()=>{var t;return(t=window.solflare)!=null&&t.isSolflare||window.SolflareApp?(this._readyState=vr.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),vG())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===vr.Loadable&&wb()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==vr.Loadable&&this._readyState!==vr.Installed)throw new Ug;if(this.readyState===vr.Loadable&&wb()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await uD(async()=>{const{default:i}=await import("./index-MLBIq14b.js");return{default:i}},[])).default}catch(i){throw new a7(i==null?void 0:i.message,i)}let t;try{t=new e({network:this._config.network})}catch(i){throw new jp(i==null?void 0:i.message,i)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(i){throw new N_(i==null?void 0:i.message,i)}if(!t.publicKey)throw new N_;let n;try{n=new Mt(t.publicKey.toBytes())}catch(i){throw new Fg(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new aT(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,n={}){try{const i=this._wallet;if(!i)throw new Ii;try{const{signers:s,...o}=n;return Ou(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof Qi?s:new Xc(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Ii;try{return await t.signTransaction(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Ii;try{return await t.signAllTransactions(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Ii;try{return await t.signMessage(e,"utf8")}catch(n){throw new lT(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}}const HI=globalThis||void 0||self;var gi={},pl,ml;function Fb(){throw new Error("setTimeout has not been defined")}function zb(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?pl=setTimeout:pl=Fb}catch{pl=Fb}try{typeof clearTimeout=="function"?ml=clearTimeout:ml=zb}catch{ml=zb}})();function hD(r){if(pl===setTimeout)return setTimeout(r,0);if((pl===Fb||!pl)&&setTimeout)return pl=setTimeout,setTimeout(r,0);try{return pl(r,0)}catch{try{return pl.call(null,r,0)}catch{return pl.call(this,r,0)}}}function xG(r){if(ml===clearTimeout)return clearTimeout(r);if((ml===zb||!ml)&&clearTimeout)return ml=clearTimeout,clearTimeout(r);try{return ml(r)}catch{try{return ml.call(null,r)}catch{return ml.call(this,r)}}}var Bu=[],u0=!1,Lh,l_=-1;function SG(){!u0||!Lh||(u0=!1,Lh.length?Bu=Lh.concat(Bu):l_=-1,Bu.length&&dD())}function dD(){if(!u0){var r=hD(SG);u0=!0;for(var e=Bu.length;e;){for(Lh=Bu,Bu=[];++l_<e;)Lh&&Lh[l_].run();l_=-1,e=Bu.length}Lh=null,u0=!1,xG(r)}}gi.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Bu.push(new pD(r,e)),Bu.length===1&&!u0&&hD(dD)};function pD(r,e){this.fun=r,this.array=e}pD.prototype.run=function(){this.fun.apply(null,this.array)};gi.title="browser";gi.browser=!0;gi.env={};gi.argv=[];gi.version="";gi.versions={};function Xu(){}gi.on=Xu;gi.addListener=Xu;gi.once=Xu;gi.off=Xu;gi.removeListener=Xu;gi.removeAllListeners=Xu;gi.emit=Xu;gi.prependListener=Xu;gi.prependOnceListener=Xu;gi.listeners=function(r){return[]};gi.binding=function(r){throw new Error("process.binding is not supported")};gi.cwd=function(){return"/"};gi.chdir=function(r){throw new Error("process.chdir is not supported")};gi.umask=function(){return 0};var u_={exports:{}},MG=u_.exports,GI;function EG(){return GI||(GI=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=A0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,P,I=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)P=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)P=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,P=0,I;if(M==="be")for(R=a.length-1;R>=p;R-=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8;else{var y=a.length-p;for(R=y%2===0?p+1:p;R<a.length;R+=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,P=Math.min(E.length,p),I=a;I<P;I++){var y=E.charCodeAt(I)-48;R*=M,y>=49?T=y-49+10:y>=17?T=y-17+10:T=y,n(y>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var P=a.length-M,I=P%R,y=Math.min(P,P-I)+M,u=0,S=M;S<y;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(I!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<I;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,P=0;P<this.length;P++){var I=this.words[P],y=((I<<R|T)&16777215).toString(16);T=I>>>24-R&16777215,R+=2,R>=26&&(R-=26,P--),T!==0||P!==this.length-1?M=_[6-y.length]+y+M:M=y+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var L=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var P=L(a,T),I=p==="le"?"LE":"BE";return this["_toArrayLike"+I](P,R),P},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M++]=I&255,M<a.length&&(a[M++]=I>>8&255),M<a.length&&(a[M++]=I>>16&255),P===6?(M<a.length&&(a[M++]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M--]=I&255,M>=0&&(a[M--]=I>>8&255),M>=0&&(a[M--]=I>>16&255),P===6?(M>=0&&(a[M--]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function N(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,P=0;P<R.length;P++)p=(M.words[P]|0)+(R.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;for(;T!==0&&P<M.length;P++)p=(M.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;P<M.length;P++)this.words[P]=M.words[P];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var P=0,I=0;I<T.length;I++)p=(R.words[I]|0)-(T.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;for(;P!==0&&I<R.length;I++)p=(R.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;if(P===0&&I<R.length&&R!==this)for(;I<R.length;I++)this.words[I]=R.words[I];return this.length=Math.max(this.length,I),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,P=R*T,I=P&67108863,y=P/67108864|0;p.words[0]=I;for(var u=1;u<M;u++){for(var S=y>>>26,W=y&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,P=R*T+W,S+=P/67108864|0,W=P&67108863}p.words[u]=W|0,y=S|0}return y!==0?p.words[u]=y|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,P=M.words,I=0,y,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,be=me>>>13,wt=R[2]|0,Ze=wt&8191,Pe=wt>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,yt=R[4]|0,He=yt&8191,nt=yt>>>13,Nt=R[5]|0,fe=Nt&8191,oe=Nt>>>13,Oe=R[6]|0,Te=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,Et=R[8]|0,ut=Et&8191,re=Et>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,ve=T[0]|0,ye=ve&8191,le=ve>>>13,Xe=T[1]|0,de=Xe&8191,Re=Xe>>>13,Ue=T[2]|0,Me=Ue&8191,qe=Ue>>>13,Rt=T[3]|0,ct=Rt&8191,gt=Rt>>>13,Sn=T[4]|0,ht=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Ae=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,mt=dn&8191,_t=dn>>>13,Dn=T[8]|0,vt=Dn&8191,Lt=Dn>>>13,Nr=T[9]|0,Ot=Nr&8191,kt=Nr>>>13;M.negative=a.negative^p.negative,M.length=19,y=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,y=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(be,ye)|0,S=Math.imul(be,le),y=y+Math.imul($,de)|0,u=u+Math.imul($,Re)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Re)|0;var De=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,y=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),y=y+Math.imul(_e,de)|0,u=u+Math.imul(_e,Re)|0,u=u+Math.imul(be,de)|0,S=S+Math.imul(be,Re)|0,y=y+Math.imul($,Me)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Me)|0,S=S+Math.imul(se,qe)|0;var $e=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,y=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),y=y+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Re)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Re)|0,y=y+Math.imul(_e,Me)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(be,Me)|0,S=S+Math.imul(be,qe)|0,y=y+Math.imul($,ct)|0,u=u+Math.imul($,gt)|0,u=u+Math.imul(se,ct)|0,S=S+Math.imul(se,gt)|0;var Qe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),y=y+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Re)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Re)|0,y=y+Math.imul(Ze,Me)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Me)|0,S=S+Math.imul(Pe,qe)|0,y=y+Math.imul(_e,ct)|0,u=u+Math.imul(_e,gt)|0,u=u+Math.imul(be,ct)|0,S=S+Math.imul(be,gt)|0,y=y+Math.imul($,ht)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,ht)|0,S=S+Math.imul(se,ae)|0;var Be=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,y=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),y=y+Math.imul(He,de)|0,u=u+Math.imul(He,Re)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Re)|0,y=y+Math.imul(Ge,Me)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Me)|0,S=S+Math.imul(je,qe)|0,y=y+Math.imul(Ze,ct)|0,u=u+Math.imul(Ze,gt)|0,u=u+Math.imul(Pe,ct)|0,S=S+Math.imul(Pe,gt)|0,y=y+Math.imul(_e,ht)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(be,ht)|0,S=S+Math.imul(be,ae)|0,y=y+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var At=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,y=Math.imul(Te,ye),u=Math.imul(Te,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),y=y+Math.imul(fe,de)|0,u=u+Math.imul(fe,Re)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Re)|0,y=y+Math.imul(He,Me)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Me)|0,S=S+Math.imul(nt,qe)|0,y=y+Math.imul(Ge,ct)|0,u=u+Math.imul(Ge,gt)|0,u=u+Math.imul(je,ct)|0,S=S+Math.imul(je,gt)|0,y=y+Math.imul(Ze,ht)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,ht)|0,S=S+Math.imul(Pe,ae)|0,y=y+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(be,X)|0,S=S+Math.imul(be,he)|0,y=y+Math.imul($,Ae)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Ae)|0,S=S+Math.imul(se,Ne)|0;var Ft=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,y=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),y=y+Math.imul(Te,de)|0,u=u+Math.imul(Te,Re)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Re)|0,y=y+Math.imul(fe,Me)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Me)|0,S=S+Math.imul(oe,qe)|0,y=y+Math.imul(He,ct)|0,u=u+Math.imul(He,gt)|0,u=u+Math.imul(nt,ct)|0,S=S+Math.imul(nt,gt)|0,y=y+Math.imul(Ge,ht)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,ht)|0,S=S+Math.imul(je,ae)|0,y=y+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,y=y+Math.imul(_e,Ae)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ne)|0,y=y+Math.imul($,mt)|0,u=u+Math.imul($,_t)|0,u=u+Math.imul(se,mt)|0,S=S+Math.imul(se,_t)|0;var bt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(bt>>>26)|0,bt&=67108863,y=Math.imul(ut,ye),u=Math.imul(ut,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),y=y+Math.imul(et,de)|0,u=u+Math.imul(et,Re)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Re)|0,y=y+Math.imul(Te,Me)|0,u=u+Math.imul(Te,qe)|0,u=u+Math.imul(Le,Me)|0,S=S+Math.imul(Le,qe)|0,y=y+Math.imul(fe,ct)|0,u=u+Math.imul(fe,gt)|0,u=u+Math.imul(oe,ct)|0,S=S+Math.imul(oe,gt)|0,y=y+Math.imul(He,ht)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,ht)|0,S=S+Math.imul(nt,ae)|0,y=y+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,y=y+Math.imul(Ze,Ae)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Ae)|0,S=S+Math.imul(Pe,Ne)|0,y=y+Math.imul(_e,mt)|0,u=u+Math.imul(_e,_t)|0,u=u+Math.imul(be,mt)|0,S=S+Math.imul(be,_t)|0,y=y+Math.imul($,vt)|0,u=u+Math.imul($,Lt)|0,u=u+Math.imul(se,vt)|0,S=S+Math.imul(se,Lt)|0;var Vt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),y=y+Math.imul(ut,de)|0,u=u+Math.imul(ut,Re)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Re)|0,y=y+Math.imul(et,Me)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Me)|0,S=S+Math.imul(Ye,qe)|0,y=y+Math.imul(Te,ct)|0,u=u+Math.imul(Te,gt)|0,u=u+Math.imul(Le,ct)|0,S=S+Math.imul(Le,gt)|0,y=y+Math.imul(fe,ht)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,ht)|0,S=S+Math.imul(oe,ae)|0,y=y+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,y=y+Math.imul(Ge,Ae)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Ae)|0,S=S+Math.imul(je,Ne)|0,y=y+Math.imul(Ze,mt)|0,u=u+Math.imul(Ze,_t)|0,u=u+Math.imul(Pe,mt)|0,S=S+Math.imul(Pe,_t)|0,y=y+Math.imul(_e,vt)|0,u=u+Math.imul(_e,Lt)|0,u=u+Math.imul(be,vt)|0,S=S+Math.imul(be,Lt)|0,y=y+Math.imul($,Ot)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,Ot)|0,S=S+Math.imul(se,kt)|0;var nn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(nn>>>26)|0,nn&=67108863,y=Math.imul(q,de),u=Math.imul(q,Re),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Re),y=y+Math.imul(ut,Me)|0,u=u+Math.imul(ut,qe)|0,u=u+Math.imul(re,Me)|0,S=S+Math.imul(re,qe)|0,y=y+Math.imul(et,ct)|0,u=u+Math.imul(et,gt)|0,u=u+Math.imul(Ye,ct)|0,S=S+Math.imul(Ye,gt)|0,y=y+Math.imul(Te,ht)|0,u=u+Math.imul(Te,ae)|0,u=u+Math.imul(Le,ht)|0,S=S+Math.imul(Le,ae)|0,y=y+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,y=y+Math.imul(He,Ae)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Ae)|0,S=S+Math.imul(nt,Ne)|0,y=y+Math.imul(Ge,mt)|0,u=u+Math.imul(Ge,_t)|0,u=u+Math.imul(je,mt)|0,S=S+Math.imul(je,_t)|0,y=y+Math.imul(Ze,vt)|0,u=u+Math.imul(Ze,Lt)|0,u=u+Math.imul(Pe,vt)|0,S=S+Math.imul(Pe,Lt)|0,y=y+Math.imul(_e,Ot)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(be,Ot)|0,S=S+Math.imul(be,kt)|0;var sn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(sn>>>26)|0,sn&=67108863,y=Math.imul(q,Me),u=Math.imul(q,qe),u=u+Math.imul(ue,Me)|0,S=Math.imul(ue,qe),y=y+Math.imul(ut,ct)|0,u=u+Math.imul(ut,gt)|0,u=u+Math.imul(re,ct)|0,S=S+Math.imul(re,gt)|0,y=y+Math.imul(et,ht)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,ht)|0,S=S+Math.imul(Ye,ae)|0,y=y+Math.imul(Te,X)|0,u=u+Math.imul(Te,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,y=y+Math.imul(fe,Ae)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Ae)|0,S=S+Math.imul(oe,Ne)|0,y=y+Math.imul(He,mt)|0,u=u+Math.imul(He,_t)|0,u=u+Math.imul(nt,mt)|0,S=S+Math.imul(nt,_t)|0,y=y+Math.imul(Ge,vt)|0,u=u+Math.imul(Ge,Lt)|0,u=u+Math.imul(je,vt)|0,S=S+Math.imul(je,Lt)|0,y=y+Math.imul(Ze,Ot)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,Ot)|0,S=S+Math.imul(Pe,kt)|0;var qt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(qt>>>26)|0,qt&=67108863,y=Math.imul(q,ct),u=Math.imul(q,gt),u=u+Math.imul(ue,ct)|0,S=Math.imul(ue,gt),y=y+Math.imul(ut,ht)|0,u=u+Math.imul(ut,ae)|0,u=u+Math.imul(re,ht)|0,S=S+Math.imul(re,ae)|0,y=y+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,y=y+Math.imul(Te,Ae)|0,u=u+Math.imul(Te,Ne)|0,u=u+Math.imul(Le,Ae)|0,S=S+Math.imul(Le,Ne)|0,y=y+Math.imul(fe,mt)|0,u=u+Math.imul(fe,_t)|0,u=u+Math.imul(oe,mt)|0,S=S+Math.imul(oe,_t)|0,y=y+Math.imul(He,vt)|0,u=u+Math.imul(He,Lt)|0,u=u+Math.imul(nt,vt)|0,S=S+Math.imul(nt,Lt)|0,y=y+Math.imul(Ge,Ot)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,Ot)|0,S=S+Math.imul(je,kt)|0;var Tn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(q,ht),u=Math.imul(q,ae),u=u+Math.imul(ue,ht)|0,S=Math.imul(ue,ae),y=y+Math.imul(ut,X)|0,u=u+Math.imul(ut,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,y=y+Math.imul(et,Ae)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Ae)|0,S=S+Math.imul(Ye,Ne)|0,y=y+Math.imul(Te,mt)|0,u=u+Math.imul(Te,_t)|0,u=u+Math.imul(Le,mt)|0,S=S+Math.imul(Le,_t)|0,y=y+Math.imul(fe,vt)|0,u=u+Math.imul(fe,Lt)|0,u=u+Math.imul(oe,vt)|0,S=S+Math.imul(oe,Lt)|0,y=y+Math.imul(He,Ot)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,Ot)|0,S=S+Math.imul(nt,kt)|0;var Rn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,y=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),y=y+Math.imul(ut,Ae)|0,u=u+Math.imul(ut,Ne)|0,u=u+Math.imul(re,Ae)|0,S=S+Math.imul(re,Ne)|0,y=y+Math.imul(et,mt)|0,u=u+Math.imul(et,_t)|0,u=u+Math.imul(Ye,mt)|0,S=S+Math.imul(Ye,_t)|0,y=y+Math.imul(Te,vt)|0,u=u+Math.imul(Te,Lt)|0,u=u+Math.imul(Le,vt)|0,S=S+Math.imul(Le,Lt)|0,y=y+Math.imul(fe,Ot)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,Ot)|0,S=S+Math.imul(oe,kt)|0;var En=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,y=Math.imul(q,Ae),u=Math.imul(q,Ne),u=u+Math.imul(ue,Ae)|0,S=Math.imul(ue,Ne),y=y+Math.imul(ut,mt)|0,u=u+Math.imul(ut,_t)|0,u=u+Math.imul(re,mt)|0,S=S+Math.imul(re,_t)|0,y=y+Math.imul(et,vt)|0,u=u+Math.imul(et,Lt)|0,u=u+Math.imul(Ye,vt)|0,S=S+Math.imul(Ye,Lt)|0,y=y+Math.imul(Te,Ot)|0,u=u+Math.imul(Te,kt)|0,u=u+Math.imul(Le,Ot)|0,S=S+Math.imul(Le,kt)|0;var un=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,y=Math.imul(q,mt),u=Math.imul(q,_t),u=u+Math.imul(ue,mt)|0,S=Math.imul(ue,_t),y=y+Math.imul(ut,vt)|0,u=u+Math.imul(ut,Lt)|0,u=u+Math.imul(re,vt)|0,S=S+Math.imul(re,Lt)|0,y=y+Math.imul(et,Ot)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,Ot)|0,S=S+Math.imul(Ye,kt)|0;var $t=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,y=Math.imul(q,vt),u=Math.imul(q,Lt),u=u+Math.imul(ue,vt)|0,S=Math.imul(ue,Lt),y=y+Math.imul(ut,Ot)|0,u=u+Math.imul(ut,kt)|0,u=u+Math.imul(re,Ot)|0,S=S+Math.imul(re,kt)|0;var Dt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,y=Math.imul(q,Ot),u=Math.imul(q,kt),u=u+Math.imul(ue,Ot)|0,S=Math.imul(ue,kt);var Mn=(I+y|0)+((u&8191)<<13)|0;return I=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,P[0]=pe,P[1]=De,P[2]=$e,P[3]=Qe,P[4]=Be,P[5]=At,P[6]=Ft,P[7]=bt,P[8]=Vt,P[9]=nn,P[10]=sn,P[11]=qt,P[12]=Tn,P[13]=Rn,P[14]=En,P[15]=un,P[16]=$t,P[17]=Dt,P[18]=Mn,I!==0&&(P[19]=I,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var P=R;R=0;for(var I=M&67108863,y=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=y;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;P=P+(se/67108864|0)|0,me=me+I|0,I=me&67108863,P=P+(me>>>26)|0,R+=P>>>26,P&=67108863}p.words[T]=I,M=P,P=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,P=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=P>>>26,this.words[R]=P&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=N(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var P=0;for(T=0;T<this.length;T++){var I=this.words[T]&R,y=(this.words[T]|0)-I<<p;this.words[T]=y|P,P=I>>>26-p}P&&(this.words[T]=P,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,P=Math.min((a-T)/26,this.length),I=67108863^67108863>>>T<<T,y=M;if(R-=P,R=Math.max(0,R),y){for(var u=0;u<P;u++)y.words[u]=this.words[u];y.length=P}if(P!==0)if(this.length>P)for(this.length-=P,u=0;u<this.length;u++)this.words[u]=this.words[u+P];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&I}return y&&S!==0&&(y.words[y.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var P,I=0;for(T=0;T<a.length;T++){P=(this.words[T+M]|0)+I;var y=(a.words[T]|0)*p;P-=y&67108863,I=(P>>26)-(y/67108864|0),this.words[T+M]=P&67108863}for(;T<this.length-M;T++)P=(this.words[T+M]|0)+I,I=P>>26,this.words[T+M]=P&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,T=0;T<this.length;T++)P=-(this.words[T]|0)+I,I=P>>26,this.words[T]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,P=T.words[T.length-1]|0,I=this._countBits(P);M=26-I,M!==0&&(T=T.ushln(M),R.iushln(M),P=T.words[T.length-1]|0);var y=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=y+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,y);W.negative===0&&(R=W,u&&(u.words[y]=1));for(var $=y-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/P|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,P;return this.negative!==0&&a.negative===0?(P=this.neg().divmod(a,p),p!=="mod"&&(R=P.div.neg()),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(P=this.divmod(a.neg(),p),p!=="mod"&&(R=P.div.neg()),{div:R,mod:P.mod}):(this.negative&a.negative)!==0?(P=this.neg().divmod(a.neg(),p),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:P.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),P=M.cmp(R);return P<0||T===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=new s(0),I=new s(1),y=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++y;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(P.isOdd()||I.isOdd())&&(P.iadd(u),I.isub(S)),P.iushrn(1),I.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(P),T.isub(I)):(M.isub(p),P.isub(R),I.isub(T))}return{a:P,b:I,gcd:M.iushln(y)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var I=0,y=1;(p.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(p.iushrn(I);I-- >0;)R.isOdd()&&R.iadd(P),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(P),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var P=p;p=M,M=P}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,P=M;T!==0&&P<this.length;P++){var I=this.words[P]|0;I+=T,T=I>>>26,I&=67108863,this.words[P]=I}return T!==0&&(this.words[P]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var P=a.words[9];for(p.words[p.length++]=P&M,T=10;T<a.length;T++){var I=a.words[T]|0;a.words[T-10]=(I&M)<<4|P>>>22,P=I}P>>>=22,a.words[T-10]=P,P===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var P=new s(1).toRed(this),I=P.redNeg(),y=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,y).cmp(I)!==0;)u.redIAdd(I);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(P)!==0;){for(var me=$,_e=0;me.cmp(P)!==0;_e++)me=me.redSqr();n(_e<se);var be=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(be),S=be.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var P=R[0],I=0,y=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(P!==R[0]&&(P=this.sqr(P)),$===0&&I===0){y=0;continue}I<<=1,I|=$,y++,!(y!==M&&(T!==0||W!==0))&&(P=this.mul(P,R[I]),y=0,I=0)}u=26}return P},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,MG)})(u_)),u_.exports}var bG=EG();const Mh=Ya(bG);var PM,jI;function AG(){if(jI)return PM;jI=1;var r=UA().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),w=Math.log(256)/Math.log(c);function _(L){if((Array.isArray(L)||L instanceof Uint8Array)&&(L=r.from(L)),!r.isBuffer(L))throw new TypeError("Expected Buffer");if(L.length===0)return"";for(var N=0,C=0,D=0,k=L.length;D!==k&&L[D]===0;)D++,N++;for(var F=(k-D)*w+1>>>0,Q=new Uint8Array(F);D!==k;){for(var G=L[D],Y=0,ee=F-1;(G!==0||Y<C)&&ee!==-1;ee--,Y++)G+=256*Q[ee]>>>0,Q[ee]=G%c>>>0,G=G/c>>>0;if(G!==0)throw new Error("Non-zero carry");C=Y,D++}for(var te=F-C;te!==F&&Q[te]===0;)te++;for(var U=d.repeat(N);te<F;++te)U+=t.charAt(Q[te]);return U}function x(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return r.alloc(0);for(var N=0,C=0,D=0;L[N]===d;)C++,N++;for(var k=(L.length-N)*h+1>>>0,F=new Uint8Array(k);N<L.length;){var Q=L.charCodeAt(N);if(Q>255)return;var G=n[Q];if(G===255)return;for(var Y=0,ee=k-1;(G!==0||Y<D)&&ee!==-1;ee--,Y++)G+=c*F[ee]>>>0,F[ee]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");D=Y,N++}for(var te=k-D;te!==k&&F[te]===0;)te++;var U=r.allocUnsafe(C+(k-te));U.fill(0,0,C);for(var V=C;te!==k;)U[V++]=F[te++];return U}function A(L){var N=x(L);if(N)return N;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:x,decode:A}}return PM=e,PM}var LM,qI;function TG(){if(qI)return LM;qI=1;var r=AG(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return LM=r(e),LM}var RG=TG();const gT=Ya(RG);var Kv={exports:{}},KI;function CG(){if(KI)return Kv.exports;KI=1;const r=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,s=new RegExp("^"+i.source),o=new RegExp(i.source+n.source,"gu"),l=new RegExp("\\d+"+n.source,"gu"),c=(_,x,A)=>{let L=!1,N=!1,C=!1;for(let D=0;D<_.length;D++){const k=_[D];L&&r.test(k)?(_=_.slice(0,D)+"-"+_.slice(D),L=!1,C=N,N=!0,D++):N&&C&&e.test(k)?(_=_.slice(0,D-1)+"-"+_.slice(D-1),C=N,N=!1,L=!0):(L=x(k)===k&&A(k)!==k,C=N,N=A(k)===k&&x(k)!==k)}return _},d=(_,x)=>(t.lastIndex=0,_.replace(t,A=>x(A))),h=(_,x)=>(o.lastIndex=0,l.lastIndex=0,_.replace(o,(A,L)=>x(L)).replace(l,A=>x(A))),w=(_,x)=>{if(!(typeof _=="string"||Array.isArray(_)))throw new TypeError("Expected the input to be `string | string[]`");if(x={pascalCase:!1,preserveConsecutiveUppercase:!1,...x},Array.isArray(_)?_=_.map(C=>C.trim()).filter(C=>C.length).join("-"):_=_.trim(),_.length===0)return"";const A=x.locale===!1?C=>C.toLowerCase():C=>C.toLocaleLowerCase(x.locale),L=x.locale===!1?C=>C.toUpperCase():C=>C.toLocaleUpperCase(x.locale);return _.length===1?x.pascalCase?L(_):A(_):(_!==A(_)&&(_=c(_,A,L)),_=_.replace(s,""),x.preserveConsecutiveUppercase?_=d(_,A):_=A(_),x.pascalCase&&(_=L(_.charAt(0))+_.slice(1)),h(_,L))};return Kv.exports=w,Kv.exports.default=w,Kv.exports}var IG=CG();const NG=Ya(IG);var Vm={},an={},YI;function XI(){if(YI)return an;YI=1;class r{constructor(I,y){if(!Number.isInteger(I))throw new TypeError("span must be an integer");this.span=I,this.property=y}makeDestinationObject(){return{}}decode(I,y){throw new Error("Layout is abstract")}encode(I,y,u){throw new Error("Layout is abstract")}getSpan(I,y){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(I){const y=Object.create(this.constructor.prototype);return Object.assign(y,this),y.property=I,y}fromArray(I){}}an.Layout=r;function e(P,I){return I.property?P+"["+I.property+"]":P}an.nameWithProperty=e;function t(P,I){if(typeof P!="function")throw new TypeError("Class must be constructor");if(P.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(I&&I instanceof r))throw new TypeError("layout must be a Layout");if(I.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");P.layout_=I,I.boundConstructor_=P,I.makeDestinationObject=(()=>new P),Object.defineProperty(P.prototype,"encode",{value:function(y,u){return I.encode(this,y,u)},writable:!0}),Object.defineProperty(P,"decode",{value:function(y,u){return I.decode(y,u)},writable:!0})}an.bindConstructorLayout=t;class n extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class i extends n{constructor(I,y){if(I===void 0&&(I=1),!Number.isInteger(I)||0>=I)throw new TypeError("elementSpan must be a (positive) integer");super(-1,y),this.elementSpan=I}isCount(){return!0}decode(I,y){y===void 0&&(y=0);const u=I.length-y;return Math.floor(u/this.elementSpan)}encode(I,y,u){return 0}}class s extends n{constructor(I,y,u){if(!(I instanceof r))throw new TypeError("layout must be a Layout");if(y===void 0)y=0;else if(!Number.isInteger(y))throw new TypeError("offset must be integer or undefined");super(I.span,u||I.property),this.layout=I,this.offset=y}isCount(){return this.layout instanceof o||this.layout instanceof l}decode(I,y){return y===void 0&&(y=0),this.layout.decode(I,y+this.offset)}encode(I,y,u){return u===void 0&&(u=0),this.layout.encode(I,y,u+this.offset)}}class o extends r{constructor(I,y){if(super(I,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(I,y){return y===void 0&&(y=0),I.readUIntLE(y,this.span)}encode(I,y,u){return u===void 0&&(u=0),y.writeUIntLE(I,u,this.span),this.span}}class l extends r{constructor(I,y){if(super(I,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(I,y){return y===void 0&&(y=0),I.readUIntBE(y,this.span)}encode(I,y,u){return u===void 0&&(u=0),y.writeUIntBE(I,u,this.span),this.span}}class c extends r{constructor(I,y){if(super(I,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(I,y){return y===void 0&&(y=0),I.readIntLE(y,this.span)}encode(I,y,u){return u===void 0&&(u=0),y.writeIntLE(I,u,this.span),this.span}}class d extends r{constructor(I,y){if(super(I,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(I,y){return y===void 0&&(y=0),I.readIntBE(y,this.span)}encode(I,y,u){return u===void 0&&(u=0),y.writeIntBE(I,u,this.span),this.span}}const h=Math.pow(2,32);function w(P){const I=Math.floor(P/h),y=P-I*h;return{hi32:I,lo32:y}}function _(P,I){return P*h+I}class x extends r{constructor(I){super(8,I)}decode(I,y){y===void 0&&(y=0);const u=I.readUInt32LE(y),S=I.readUInt32LE(y+4);return _(S,u)}encode(I,y,u){u===void 0&&(u=0);const S=w(I);return y.writeUInt32LE(S.lo32,u),y.writeUInt32LE(S.hi32,u+4),8}}class A extends r{constructor(I){super(8,I)}decode(I,y){y===void 0&&(y=0);const u=I.readUInt32BE(y),S=I.readUInt32BE(y+4);return _(u,S)}encode(I,y,u){u===void 0&&(u=0);const S=w(I);return y.writeUInt32BE(S.hi32,u),y.writeUInt32BE(S.lo32,u+4),8}}class L extends r{constructor(I){super(8,I)}decode(I,y){y===void 0&&(y=0);const u=I.readUInt32LE(y),S=I.readInt32LE(y+4);return _(S,u)}encode(I,y,u){u===void 0&&(u=0);const S=w(I);return y.writeUInt32LE(S.lo32,u),y.writeInt32LE(S.hi32,u+4),8}}class N extends r{constructor(I){super(8,I)}decode(I,y){y===void 0&&(y=0);const u=I.readInt32BE(y),S=I.readUInt32BE(y+4);return _(u,S)}encode(I,y,u){u===void 0&&(u=0);const S=w(I);return y.writeInt32BE(S.hi32,u),y.writeUInt32BE(S.lo32,u+4),8}}class C extends r{constructor(I){super(4,I)}decode(I,y){return y===void 0&&(y=0),I.readFloatLE(y)}encode(I,y,u){return u===void 0&&(u=0),y.writeFloatLE(I,u),4}}class D extends r{constructor(I){super(4,I)}decode(I,y){return y===void 0&&(y=0),I.readFloatBE(y)}encode(I,y,u){return u===void 0&&(u=0),y.writeFloatBE(I,u),4}}class k extends r{constructor(I){super(8,I)}decode(I,y){return y===void 0&&(y=0),I.readDoubleLE(y)}encode(I,y,u){return u===void 0&&(u=0),y.writeDoubleLE(I,u),8}}class F extends r{constructor(I){super(8,I)}decode(I,y){return y===void 0&&(y=0),I.readDoubleBE(y)}encode(I,y,u){return u===void 0&&(u=0),y.writeDoubleBE(I,u),8}}class Q extends r{constructor(I,y,u){if(!(I instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(y instanceof n&&y.isCount()||Number.isInteger(y)&&0<=y))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let S=-1;!(y instanceof n)&&0<I.span&&(S=y*I.span),super(S,u),this.elementLayout=I,this.count=y}getSpan(I,y){if(0<=this.span)return this.span;y===void 0&&(y=0);let u=0,S=this.count;if(S instanceof n&&(S=S.decode(I,y)),0<this.elementLayout.span)u=S*this.elementLayout.span;else{let W=0;for(;W<S;)u+=this.elementLayout.getSpan(I,y+u),++W}return u}decode(I,y){y===void 0&&(y=0);const u=[];let S=0,W=this.count;for(W instanceof n&&(W=W.decode(I,y));S<W;)u.push(this.elementLayout.decode(I,y)),y+=this.elementLayout.getSpan(I,y),S+=1;return u}encode(I,y,u){u===void 0&&(u=0);const S=this.elementLayout,W=I.reduce(($,se)=>$+S.encode(se,y,u+$),0);return this.count instanceof n&&this.count.encode(I.length,y,u),W}}class G extends r{constructor(I,y,u){if(!(Array.isArray(I)&&I.reduce((W,$)=>W&&$ instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof y=="boolean"&&u===void 0&&(u=y,y=void 0);for(const W of I)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let S=-1;try{S=I.reduce((W,$)=>W+$.getSpan(),0)}catch{}super(S,y),this.fields=I,this.decodePrefixes=!!u}getSpan(I,y){if(0<=this.span)return this.span;y===void 0&&(y=0);let u=0;try{u=this.fields.reduce((S,W)=>{const $=W.getSpan(I,y);return y+=$,S+$},0)}catch{throw new RangeError("indeterminate span")}return u}decode(I,y){y===void 0&&(y=0);const u=this.makeDestinationObject();for(const S of this.fields)if(S.property!==void 0&&(u[S.property]=S.decode(I,y)),y+=S.getSpan(I,y),this.decodePrefixes&&I.length===y)break;return u}encode(I,y,u){u===void 0&&(u=0);const S=u;let W=0,$=0;for(const se of this.fields){let me=se.span;if($=0<me?me:0,se.property!==void 0){const _e=I[se.property];_e!==void 0&&($=se.encode(_e,y,u),0>me&&(me=se.getSpan(y,u)))}W=u,u+=me}return W+$-S}fromArray(I){const y=this.makeDestinationObject();for(const u of this.fields)u.property!==void 0&&0<I.length&&(y[u.property]=I.shift());return y}layoutFor(I){if(typeof I!="string")throw new TypeError("property must be string");for(const y of this.fields)if(y.property===I)return y}offsetOf(I){if(typeof I!="string")throw new TypeError("property must be string");let y=0;for(const u of this.fields){if(u.property===I)return y;0>u.span?y=-1:0<=y&&(y+=u.span)}}}class Y{constructor(I){this.property=I}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ee extends Y{constructor(I,y){if(!(I instanceof n&&I.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(y||I.property||"variant"),this.layout=I}decode(I,y){return this.layout.decode(I,y)}encode(I,y,u){return this.layout.encode(I,y,u)}}class te extends r{constructor(I,y,u){const S=I instanceof o||I instanceof l;if(S)I=new ee(new s(I));else if(I instanceof n&&I.isCount())I=new ee(I);else if(!(I instanceof Y))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(y===void 0&&(y=null),!(y===null||y instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(y!==null){if(0>y.span)throw new Error("defaultLayout must have constant span");y.property===void 0&&(y=y.replicate("content"))}let W=-1;y&&(W=y.span,0<=W&&S&&(W+=I.layout.span)),super(W,u),this.discriminator=I,this.usesPrefixDiscriminator=S,this.defaultLayout=y,this.registry={};let $=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(se){return $(se)},this.configGetSourceVariant=function(se){$=se.bind(this)}}getSpan(I,y){if(0<=this.span)return this.span;y===void 0&&(y=0);const u=this.getVariant(I,y);if(!u)throw new Error("unable to determine span for unrecognized variant");return u.getSpan(I,y)}defaultGetSourceVariant(I){if(I.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&I.hasOwnProperty(this.defaultLayout.property))return;const y=this.registry[I[this.discriminator.property]];if(y&&(!y.layout||I.hasOwnProperty(y.property)))return y}else for(const y in this.registry){const u=this.registry[y];if(I.hasOwnProperty(u.property))return u}throw new Error("unable to infer src variant")}decode(I,y){y===void 0&&(y=0);let u;const S=this.discriminator,W=S.decode(I,y);let $=this.registry[W];if($===void 0){let se=0;$=this.defaultLayout,this.usesPrefixDiscriminator&&(se=S.layout.span),u=this.makeDestinationObject(),u[S.property]=W,u[$.property]=this.defaultLayout.decode(I,y+se)}else u=$.decode(I,y);return u}encode(I,y,u){u===void 0&&(u=0);const S=this.getSourceVariant(I);if(S===void 0){const W=this.discriminator,$=this.defaultLayout;let se=0;return this.usesPrefixDiscriminator&&(se=W.layout.span),W.encode(I[W.property],y,u),se+$.encode(I[$.property],y,u+se)}return S.encode(I,y,u)}addVariant(I,y,u){const S=new U(this,I,y,u);return this.registry[I]=S,S}getVariant(I,y){let u=I;return qn.isBuffer(I)&&(y===void 0&&(y=0),u=this.discriminator.decode(I,y)),this.registry[u]}}class U extends r{constructor(I,y,u,S){if(!(I instanceof te))throw new TypeError("union must be a Union");if(!Number.isInteger(y)||0>y)throw new TypeError("variant must be a (non-negative) integer");if(typeof u=="string"&&S===void 0&&(S=u,u=null),u){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(I.defaultLayout!==null&&0<=u.span&&u.span>I.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof S!="string")throw new TypeError("variant must have a String property")}let W=I.span;0>I.span&&(W=u?u.span:0,0<=W&&I.usesPrefixDiscriminator&&(W+=I.discriminator.layout.span)),super(W,S),this.union=I,this.variant=y,this.layout=u||null}getSpan(I,y){if(0<=this.span)return this.span;y===void 0&&(y=0);let u=0;return this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),u+this.layout.getSpan(I,y+u)}decode(I,y){const u=this.makeDestinationObject();if(y===void 0&&(y=0),this!==this.union.getVariant(I,y))throw new Error("variant mismatch");let S=0;return this.union.usesPrefixDiscriminator&&(S=this.union.discriminator.layout.span),this.layout?u[this.property]=this.layout.decode(I,y+S):this.property?u[this.property]=!0:this.union.usesPrefixDiscriminator&&(u[this.union.discriminator.property]=this.variant),u}encode(I,y,u){u===void 0&&(u=0);let S=0;if(this.union.usesPrefixDiscriminator&&(S=this.union.discriminator.layout.span),this.layout&&!I.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,y,u);let W=S;if(this.layout&&(this.layout.encode(I[this.property],y,u+S),W+=this.layout.getSpan(y,u+S),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(I){if(this.layout)return this.layout.fromArray(I)}}function V(P){return 0>P&&(P+=4294967296),P}class K extends r{constructor(I,y,u){if(!(I instanceof o||I instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof y=="string"&&u===void 0&&(u=y,y=void 0),4<I.span)throw new RangeError("word cannot exceed 32 bits");super(I.span,u),this.word=I,this.msb=!!y,this.fields=[];let S=0;this._packedSetValue=function(W){return S=V(W),this},this._packedGetValue=function(){return S}}decode(I,y){const u=this.makeDestinationObject();y===void 0&&(y=0);const S=this.word.decode(I,y);this._packedSetValue(S);for(const W of this.fields)W.property!==void 0&&(u[W.property]=W.decode(S));return u}encode(I,y,u){u===void 0&&(u=0);const S=this.word.decode(y,u);this._packedSetValue(S);for(const W of this.fields)if(W.property!==void 0){const $=I[W.property];$!==void 0&&W.encode($)}return this.word.encode(this._packedGetValue(),y,u)}addField(I,y){const u=new E(this,I,y);return this.fields.push(u),u}addBoolean(I){const y=new a(this,I);return this.fields.push(y),y}fieldFor(I){if(typeof I!="string")throw new TypeError("property must be string");for(const y of this.fields)if(y.property===I)return y}}class E{constructor(I,y,u){if(!(I instanceof K))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(y)||0>=y)throw new TypeError("bits must be positive integer");const S=8*I.span,W=I.fields.reduce(($,se)=>$+se.bits,0);if(y+W>S)throw new Error("bits too long for span remainder ("+(S-W)+" of "+S+" remain)");this.container=I,this.bits=y,this.valueMask=(1<<y)-1,y===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=S-W-y),this.wordMask=V(this.valueMask<<this.start),this.property=u}decode(){const I=this.container._packedGetValue();return V(I&this.wordMask)>>>this.start}encode(I){if(!Number.isInteger(I)||I!==V(I&this.valueMask))throw new TypeError(e("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const y=this.container._packedGetValue(),u=V(I<<this.start);this.container._packedSetValue(V(y&~this.wordMask)|u)}}class a extends E{constructor(I,y){super(I,1,y)}decode(I,y){return!!E.prototype.decode.call(this,I,y)}encode(I){return typeof I=="boolean"&&(I=+I),E.prototype.encode.call(this,I)}}class p extends r{constructor(I,y){if(!(I instanceof n&&I.isCount()||Number.isInteger(I)&&0<=I))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let u=-1;I instanceof n||(u=I),super(u,y),this.length=I}getSpan(I,y){let u=this.span;return 0>u&&(u=this.length.decode(I,y)),u}decode(I,y){y===void 0&&(y=0);let u=this.span;return 0>u&&(u=this.length.decode(I,y)),I.slice(y,y+u)}encode(I,y,u){let S=this.length;if(this.length instanceof n&&(S=I.length),!(qn.isBuffer(I)&&S===I.length))throw new TypeError(e("Blob.encode",this)+" requires (length "+S+") Buffer as src");if(u+S>y.length)throw new RangeError("encoding overruns Buffer");return y.write(I.toString("hex"),u,S,"hex"),this.length instanceof n&&this.length.encode(S,y,u),S}}class M extends r{constructor(I){super(-1,I)}getSpan(I,y){if(!qn.isBuffer(I))throw new TypeError("b must be a Buffer");y===void 0&&(y=0);let u=y;for(;u<I.length&&I[u]!==0;)u+=1;return 1+u-y}decode(I,y,u){y===void 0&&(y=0);let S=this.getSpan(I,y);return I.slice(y,y+S-1).toString("utf-8")}encode(I,y,u){u===void 0&&(u=0),typeof I!="string"&&(I=I.toString());const S=new qn(I,"utf8"),W=S.length;if(u+W>y.length)throw new RangeError("encoding overruns Buffer");return S.copy(y,u),y[u+W]=0,W+1}}class R extends r{constructor(I,y){if(typeof I=="string"&&y===void 0&&(y=I,I=void 0),I===void 0)I=-1;else if(!Number.isInteger(I))throw new TypeError("maxSpan must be an integer");super(-1,y),this.maxSpan=I}getSpan(I,y){if(!qn.isBuffer(I))throw new TypeError("b must be a Buffer");return y===void 0&&(y=0),I.length-y}decode(I,y,u){y===void 0&&(y=0);let S=this.getSpan(I,y);if(0<=this.maxSpan&&this.maxSpan<S)throw new RangeError("text length exceeds maxSpan");return I.slice(y,y+S).toString("utf-8")}encode(I,y,u){u===void 0&&(u=0),typeof I!="string"&&(I=I.toString());const S=new qn(I,"utf8"),W=S.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(u+W>y.length)throw new RangeError("encoding overruns Buffer");return S.copy(y,u),W}}class T extends r{constructor(I,y){super(0,y),this.value=I}decode(I,y,u){return this.value}encode(I,y,u){return 0}}return an.ExternalLayout=n,an.GreedyCount=i,an.OffsetLayout=s,an.UInt=o,an.UIntBE=l,an.Int=c,an.IntBE=d,an.Float=C,an.FloatBE=D,an.Double=k,an.DoubleBE=F,an.Sequence=Q,an.Structure=G,an.UnionDiscriminator=Y,an.UnionLayoutDiscriminator=ee,an.Union=te,an.VariantLayout=U,an.BitStructure=K,an.BitField=E,an.Boolean=a,an.Blob=p,an.CString=M,an.UTF8=R,an.Constant=T,an.greedy=((P,I)=>new i(P,I)),an.offset=((P,I,y)=>new s(P,I,y)),an.u8=(P=>new o(1,P)),an.u16=(P=>new o(2,P)),an.u24=(P=>new o(3,P)),an.u32=(P=>new o(4,P)),an.u40=(P=>new o(5,P)),an.u48=(P=>new o(6,P)),an.nu64=(P=>new x(P)),an.u16be=(P=>new l(2,P)),an.u24be=(P=>new l(3,P)),an.u32be=(P=>new l(4,P)),an.u40be=(P=>new l(5,P)),an.u48be=(P=>new l(6,P)),an.nu64be=(P=>new A(P)),an.s8=(P=>new c(1,P)),an.s16=(P=>new c(2,P)),an.s24=(P=>new c(3,P)),an.s32=(P=>new c(4,P)),an.s40=(P=>new c(5,P)),an.s48=(P=>new c(6,P)),an.ns64=(P=>new L(P)),an.s16be=(P=>new d(2,P)),an.s24be=(P=>new d(3,P)),an.s32be=(P=>new d(4,P)),an.s40be=(P=>new d(5,P)),an.s48be=(P=>new d(6,P)),an.ns64be=(P=>new N(P)),an.f32=(P=>new C(P)),an.f32be=(P=>new D(P)),an.f64=(P=>new k(P)),an.f64be=(P=>new F(P)),an.struct=((P,I,y)=>new G(P,I,y)),an.bits=((P,I,y)=>new K(P,I,y)),an.seq=((P,I,y)=>new Q(P,I,y)),an.union=((P,I,y)=>new te(P,I,y)),an.unionLayoutDiscriminator=((P,I)=>new ee(P,I)),an.blob=((P,I)=>new p(P,I)),an.cstr=(P=>new M(P)),an.utf8=((P,I)=>new R(P,I)),an.const=((P,I)=>new T(P,I)),an}var c_={exports:{}},PG=c_.exports,$I;function LG(){return $I||($I=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=A0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,P,I=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)P=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)P=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=P<<I&67108863,this.words[T+1]=P>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,P=0,I;if(M==="be")for(R=a.length-1;R>=p;R-=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8;else{var y=a.length-p;for(R=y%2===0?p+1:p;R<a.length;R+=2)I=c(a,p,R)<<T,this.words[P]|=I&67108863,T>=18?(T-=18,P+=1,this.words[P]|=I>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,P=Math.min(E.length,p),I=a;I<P;I++){var y=E.charCodeAt(I)-48;R*=M,y>=49?T=y-49+10:y>=17?T=y-17+10:T=y,n(y>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var P=a.length-M,I=P%R,y=Math.min(P,P-I)+M,u=0,S=M;S<y;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(I!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<I;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,P=0;P<this.length;P++){var I=this.words[P],y=((I<<R|T)&16777215).toString(16);T=I>>>24-R&16777215,R+=2,R>=26&&(R-=26,P--),T!==0||P!==this.length-1?M=_[6-y.length]+y+M:M=y+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var L=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var P=L(a,T),I=p==="le"?"LE":"BE";return this["_toArrayLike"+I](P,R),P},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M++]=I&255,M<a.length&&(a[M++]=I>>8&255),M<a.length&&(a[M++]=I>>16&255),P===6?(M<a.length&&(a[M++]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,P=0;T<this.length;T++){var I=this.words[T]<<P|R;a[M--]=I&255,M>=0&&(a[M--]=I>>8&255),M>=0&&(a[M--]=I>>16&255),P===6?(M>=0&&(a[M--]=I>>24&255),R=0,P=0):(R=I>>>24,P+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function N(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,P=0;P<R.length;P++)p=(M.words[P]|0)+(R.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;for(;T!==0&&P<M.length;P++)p=(M.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;P<M.length;P++)this.words[P]=M.words[P];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var P=0,I=0;I<T.length;I++)p=(R.words[I]|0)-(T.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;for(;P!==0&&I<R.length;I++)p=(R.words[I]|0)+P,P=p>>26,this.words[I]=p&67108863;if(P===0&&I<R.length&&R!==this)for(;I<R.length;I++)this.words[I]=R.words[I];return this.length=Math.max(this.length,I),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,P=R*T,I=P&67108863,y=P/67108864|0;p.words[0]=I;for(var u=1;u<M;u++){for(var S=y>>>26,W=y&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,P=R*T+W,S+=P/67108864|0,W=P&67108863}p.words[u]=W|0,y=S|0}return y!==0?p.words[u]=y|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,P=M.words,I=0,y,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,be=me>>>13,wt=R[2]|0,Ze=wt&8191,Pe=wt>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,yt=R[4]|0,He=yt&8191,nt=yt>>>13,Nt=R[5]|0,fe=Nt&8191,oe=Nt>>>13,Oe=R[6]|0,Te=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,Et=R[8]|0,ut=Et&8191,re=Et>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,ve=T[0]|0,ye=ve&8191,le=ve>>>13,Xe=T[1]|0,de=Xe&8191,Re=Xe>>>13,Ue=T[2]|0,Me=Ue&8191,qe=Ue>>>13,Rt=T[3]|0,ct=Rt&8191,gt=Rt>>>13,Sn=T[4]|0,ht=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Ae=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,mt=dn&8191,_t=dn>>>13,Dn=T[8]|0,vt=Dn&8191,Lt=Dn>>>13,Nr=T[9]|0,Ot=Nr&8191,kt=Nr>>>13;M.negative=a.negative^p.negative,M.length=19,y=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,y=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(be,ye)|0,S=Math.imul(be,le),y=y+Math.imul($,de)|0,u=u+Math.imul($,Re)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Re)|0;var De=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,y=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),y=y+Math.imul(_e,de)|0,u=u+Math.imul(_e,Re)|0,u=u+Math.imul(be,de)|0,S=S+Math.imul(be,Re)|0,y=y+Math.imul($,Me)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Me)|0,S=S+Math.imul(se,qe)|0;var $e=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,y=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),y=y+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Re)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Re)|0,y=y+Math.imul(_e,Me)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(be,Me)|0,S=S+Math.imul(be,qe)|0,y=y+Math.imul($,ct)|0,u=u+Math.imul($,gt)|0,u=u+Math.imul(se,ct)|0,S=S+Math.imul(se,gt)|0;var Qe=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,y=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),y=y+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Re)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Re)|0,y=y+Math.imul(Ze,Me)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Me)|0,S=S+Math.imul(Pe,qe)|0,y=y+Math.imul(_e,ct)|0,u=u+Math.imul(_e,gt)|0,u=u+Math.imul(be,ct)|0,S=S+Math.imul(be,gt)|0,y=y+Math.imul($,ht)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,ht)|0,S=S+Math.imul(se,ae)|0;var Be=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,y=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),y=y+Math.imul(He,de)|0,u=u+Math.imul(He,Re)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Re)|0,y=y+Math.imul(Ge,Me)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Me)|0,S=S+Math.imul(je,qe)|0,y=y+Math.imul(Ze,ct)|0,u=u+Math.imul(Ze,gt)|0,u=u+Math.imul(Pe,ct)|0,S=S+Math.imul(Pe,gt)|0,y=y+Math.imul(_e,ht)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(be,ht)|0,S=S+Math.imul(be,ae)|0,y=y+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var At=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,y=Math.imul(Te,ye),u=Math.imul(Te,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),y=y+Math.imul(fe,de)|0,u=u+Math.imul(fe,Re)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Re)|0,y=y+Math.imul(He,Me)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Me)|0,S=S+Math.imul(nt,qe)|0,y=y+Math.imul(Ge,ct)|0,u=u+Math.imul(Ge,gt)|0,u=u+Math.imul(je,ct)|0,S=S+Math.imul(je,gt)|0,y=y+Math.imul(Ze,ht)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,ht)|0,S=S+Math.imul(Pe,ae)|0,y=y+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(be,X)|0,S=S+Math.imul(be,he)|0,y=y+Math.imul($,Ae)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Ae)|0,S=S+Math.imul(se,Ne)|0;var Ft=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,y=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),y=y+Math.imul(Te,de)|0,u=u+Math.imul(Te,Re)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Re)|0,y=y+Math.imul(fe,Me)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Me)|0,S=S+Math.imul(oe,qe)|0,y=y+Math.imul(He,ct)|0,u=u+Math.imul(He,gt)|0,u=u+Math.imul(nt,ct)|0,S=S+Math.imul(nt,gt)|0,y=y+Math.imul(Ge,ht)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,ht)|0,S=S+Math.imul(je,ae)|0,y=y+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,y=y+Math.imul(_e,Ae)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ne)|0,y=y+Math.imul($,mt)|0,u=u+Math.imul($,_t)|0,u=u+Math.imul(se,mt)|0,S=S+Math.imul(se,_t)|0;var bt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(bt>>>26)|0,bt&=67108863,y=Math.imul(ut,ye),u=Math.imul(ut,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),y=y+Math.imul(et,de)|0,u=u+Math.imul(et,Re)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Re)|0,y=y+Math.imul(Te,Me)|0,u=u+Math.imul(Te,qe)|0,u=u+Math.imul(Le,Me)|0,S=S+Math.imul(Le,qe)|0,y=y+Math.imul(fe,ct)|0,u=u+Math.imul(fe,gt)|0,u=u+Math.imul(oe,ct)|0,S=S+Math.imul(oe,gt)|0,y=y+Math.imul(He,ht)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,ht)|0,S=S+Math.imul(nt,ae)|0,y=y+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,y=y+Math.imul(Ze,Ae)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Ae)|0,S=S+Math.imul(Pe,Ne)|0,y=y+Math.imul(_e,mt)|0,u=u+Math.imul(_e,_t)|0,u=u+Math.imul(be,mt)|0,S=S+Math.imul(be,_t)|0,y=y+Math.imul($,vt)|0,u=u+Math.imul($,Lt)|0,u=u+Math.imul(se,vt)|0,S=S+Math.imul(se,Lt)|0;var Vt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,y=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),y=y+Math.imul(ut,de)|0,u=u+Math.imul(ut,Re)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Re)|0,y=y+Math.imul(et,Me)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Me)|0,S=S+Math.imul(Ye,qe)|0,y=y+Math.imul(Te,ct)|0,u=u+Math.imul(Te,gt)|0,u=u+Math.imul(Le,ct)|0,S=S+Math.imul(Le,gt)|0,y=y+Math.imul(fe,ht)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,ht)|0,S=S+Math.imul(oe,ae)|0,y=y+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,y=y+Math.imul(Ge,Ae)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Ae)|0,S=S+Math.imul(je,Ne)|0,y=y+Math.imul(Ze,mt)|0,u=u+Math.imul(Ze,_t)|0,u=u+Math.imul(Pe,mt)|0,S=S+Math.imul(Pe,_t)|0,y=y+Math.imul(_e,vt)|0,u=u+Math.imul(_e,Lt)|0,u=u+Math.imul(be,vt)|0,S=S+Math.imul(be,Lt)|0,y=y+Math.imul($,Ot)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,Ot)|0,S=S+Math.imul(se,kt)|0;var nn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(nn>>>26)|0,nn&=67108863,y=Math.imul(q,de),u=Math.imul(q,Re),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Re),y=y+Math.imul(ut,Me)|0,u=u+Math.imul(ut,qe)|0,u=u+Math.imul(re,Me)|0,S=S+Math.imul(re,qe)|0,y=y+Math.imul(et,ct)|0,u=u+Math.imul(et,gt)|0,u=u+Math.imul(Ye,ct)|0,S=S+Math.imul(Ye,gt)|0,y=y+Math.imul(Te,ht)|0,u=u+Math.imul(Te,ae)|0,u=u+Math.imul(Le,ht)|0,S=S+Math.imul(Le,ae)|0,y=y+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,y=y+Math.imul(He,Ae)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Ae)|0,S=S+Math.imul(nt,Ne)|0,y=y+Math.imul(Ge,mt)|0,u=u+Math.imul(Ge,_t)|0,u=u+Math.imul(je,mt)|0,S=S+Math.imul(je,_t)|0,y=y+Math.imul(Ze,vt)|0,u=u+Math.imul(Ze,Lt)|0,u=u+Math.imul(Pe,vt)|0,S=S+Math.imul(Pe,Lt)|0,y=y+Math.imul(_e,Ot)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(be,Ot)|0,S=S+Math.imul(be,kt)|0;var sn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(sn>>>26)|0,sn&=67108863,y=Math.imul(q,Me),u=Math.imul(q,qe),u=u+Math.imul(ue,Me)|0,S=Math.imul(ue,qe),y=y+Math.imul(ut,ct)|0,u=u+Math.imul(ut,gt)|0,u=u+Math.imul(re,ct)|0,S=S+Math.imul(re,gt)|0,y=y+Math.imul(et,ht)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,ht)|0,S=S+Math.imul(Ye,ae)|0,y=y+Math.imul(Te,X)|0,u=u+Math.imul(Te,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,y=y+Math.imul(fe,Ae)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Ae)|0,S=S+Math.imul(oe,Ne)|0,y=y+Math.imul(He,mt)|0,u=u+Math.imul(He,_t)|0,u=u+Math.imul(nt,mt)|0,S=S+Math.imul(nt,_t)|0,y=y+Math.imul(Ge,vt)|0,u=u+Math.imul(Ge,Lt)|0,u=u+Math.imul(je,vt)|0,S=S+Math.imul(je,Lt)|0,y=y+Math.imul(Ze,Ot)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,Ot)|0,S=S+Math.imul(Pe,kt)|0;var qt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(qt>>>26)|0,qt&=67108863,y=Math.imul(q,ct),u=Math.imul(q,gt),u=u+Math.imul(ue,ct)|0,S=Math.imul(ue,gt),y=y+Math.imul(ut,ht)|0,u=u+Math.imul(ut,ae)|0,u=u+Math.imul(re,ht)|0,S=S+Math.imul(re,ae)|0,y=y+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,y=y+Math.imul(Te,Ae)|0,u=u+Math.imul(Te,Ne)|0,u=u+Math.imul(Le,Ae)|0,S=S+Math.imul(Le,Ne)|0,y=y+Math.imul(fe,mt)|0,u=u+Math.imul(fe,_t)|0,u=u+Math.imul(oe,mt)|0,S=S+Math.imul(oe,_t)|0,y=y+Math.imul(He,vt)|0,u=u+Math.imul(He,Lt)|0,u=u+Math.imul(nt,vt)|0,S=S+Math.imul(nt,Lt)|0,y=y+Math.imul(Ge,Ot)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,Ot)|0,S=S+Math.imul(je,kt)|0;var Tn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,y=Math.imul(q,ht),u=Math.imul(q,ae),u=u+Math.imul(ue,ht)|0,S=Math.imul(ue,ae),y=y+Math.imul(ut,X)|0,u=u+Math.imul(ut,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,y=y+Math.imul(et,Ae)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Ae)|0,S=S+Math.imul(Ye,Ne)|0,y=y+Math.imul(Te,mt)|0,u=u+Math.imul(Te,_t)|0,u=u+Math.imul(Le,mt)|0,S=S+Math.imul(Le,_t)|0,y=y+Math.imul(fe,vt)|0,u=u+Math.imul(fe,Lt)|0,u=u+Math.imul(oe,vt)|0,S=S+Math.imul(oe,Lt)|0,y=y+Math.imul(He,Ot)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,Ot)|0,S=S+Math.imul(nt,kt)|0;var Rn=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,y=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),y=y+Math.imul(ut,Ae)|0,u=u+Math.imul(ut,Ne)|0,u=u+Math.imul(re,Ae)|0,S=S+Math.imul(re,Ne)|0,y=y+Math.imul(et,mt)|0,u=u+Math.imul(et,_t)|0,u=u+Math.imul(Ye,mt)|0,S=S+Math.imul(Ye,_t)|0,y=y+Math.imul(Te,vt)|0,u=u+Math.imul(Te,Lt)|0,u=u+Math.imul(Le,vt)|0,S=S+Math.imul(Le,Lt)|0,y=y+Math.imul(fe,Ot)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,Ot)|0,S=S+Math.imul(oe,kt)|0;var En=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,y=Math.imul(q,Ae),u=Math.imul(q,Ne),u=u+Math.imul(ue,Ae)|0,S=Math.imul(ue,Ne),y=y+Math.imul(ut,mt)|0,u=u+Math.imul(ut,_t)|0,u=u+Math.imul(re,mt)|0,S=S+Math.imul(re,_t)|0,y=y+Math.imul(et,vt)|0,u=u+Math.imul(et,Lt)|0,u=u+Math.imul(Ye,vt)|0,S=S+Math.imul(Ye,Lt)|0,y=y+Math.imul(Te,Ot)|0,u=u+Math.imul(Te,kt)|0,u=u+Math.imul(Le,Ot)|0,S=S+Math.imul(Le,kt)|0;var un=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,y=Math.imul(q,mt),u=Math.imul(q,_t),u=u+Math.imul(ue,mt)|0,S=Math.imul(ue,_t),y=y+Math.imul(ut,vt)|0,u=u+Math.imul(ut,Lt)|0,u=u+Math.imul(re,vt)|0,S=S+Math.imul(re,Lt)|0,y=y+Math.imul(et,Ot)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,Ot)|0,S=S+Math.imul(Ye,kt)|0;var $t=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,y=Math.imul(q,vt),u=Math.imul(q,Lt),u=u+Math.imul(ue,vt)|0,S=Math.imul(ue,Lt),y=y+Math.imul(ut,Ot)|0,u=u+Math.imul(ut,kt)|0,u=u+Math.imul(re,Ot)|0,S=S+Math.imul(re,kt)|0;var Dt=(I+y|0)+((u&8191)<<13)|0;I=(S+(u>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,y=Math.imul(q,Ot),u=Math.imul(q,kt),u=u+Math.imul(ue,Ot)|0,S=Math.imul(ue,kt);var Mn=(I+y|0)+((u&8191)<<13)|0;return I=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,P[0]=pe,P[1]=De,P[2]=$e,P[3]=Qe,P[4]=Be,P[5]=At,P[6]=Ft,P[7]=bt,P[8]=Vt,P[9]=nn,P[10]=sn,P[11]=qt,P[12]=Tn,P[13]=Rn,P[14]=En,P[15]=un,P[16]=$t,P[17]=Dt,P[18]=Mn,I!==0&&(P[19]=I,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var P=R;R=0;for(var I=M&67108863,y=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=y;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;P=P+(se/67108864|0)|0,me=me+I|0,I=me&67108863,P=P+(me>>>26)|0,R+=P>>>26,P&=67108863}p.words[T]=I,M=P,P=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,P=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=P>>>26,this.words[R]=P&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=N(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var P=0;for(T=0;T<this.length;T++){var I=this.words[T]&R,y=(this.words[T]|0)-I<<p;this.words[T]=y|P,P=I>>>26-p}P&&(this.words[T]=P,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,P=Math.min((a-T)/26,this.length),I=67108863^67108863>>>T<<T,y=M;if(R-=P,R=Math.max(0,R),y){for(var u=0;u<P;u++)y.words[u]=this.words[u];y.length=P}if(P!==0)if(this.length>P)for(this.length-=P,u=0;u<this.length;u++)this.words[u]=this.words[u+P];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&I}return y&&S!==0&&(y.words[y.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var P,I=0;for(T=0;T<a.length;T++){P=(this.words[T+M]|0)+I;var y=(a.words[T]|0)*p;P-=y&67108863,I=(P>>26)-(y/67108864|0),this.words[T+M]=P&67108863}for(;T<this.length-M;T++)P=(this.words[T+M]|0)+I,I=P>>26,this.words[T+M]=P&67108863;if(I===0)return this._strip();for(n(I===-1),I=0,T=0;T<this.length;T++)P=-(this.words[T]|0)+I,I=P>>26,this.words[T]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,P=T.words[T.length-1]|0,I=this._countBits(P);M=26-I,M!==0&&(T=T.ushln(M),R.iushln(M),P=T.words[T.length-1]|0);var y=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=y+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,y);W.negative===0&&(R=W,u&&(u.words[y]=1));for(var $=y-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/P|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,P;return this.negative!==0&&a.negative===0?(P=this.neg().divmod(a,p),p!=="mod"&&(R=P.div.neg()),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(P=this.divmod(a.neg(),p),p!=="mod"&&(R=P.div.neg()),{div:R,mod:P.mod}):(this.negative&a.negative)!==0?(P=this.neg().divmod(a.neg(),p),p!=="div"&&(T=P.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:P.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),P=M.cmp(R);return P<0||T===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=new s(0),I=new s(1),y=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++y;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(P.isOdd()||I.isOdd())&&(P.iadd(u),I.isub(S)),P.iushrn(1),I.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(P),T.isub(I)):(M.isub(p),P.isub(R),I.isub(T))}return{a:P,b:I,gcd:M.iushln(y)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),P=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var I=0,y=1;(p.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(p.iushrn(I);I-- >0;)R.isOdd()&&R.iadd(P),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(P),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var P=p;p=M,M=P}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,P=M;T!==0&&P<this.length;P++){var I=this.words[P]|0;I+=T,T=I>>>26,I&=67108863,this.words[P]=I}return T!==0&&(this.words[P]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var P=a.words[9];for(p.words[p.length++]=P&M,T=10;T<a.length;T++){var I=a.words[T]|0;a.words[T-10]=(I&M)<<4|P>>>22,P=I}P>>>=22,a.words[T-10]=P,P===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var P=new s(1).toRed(this),I=P.redNeg(),y=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,y).cmp(I)!==0;)u.redIAdd(I);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(P)!==0;){for(var me=$,_e=0;me.cmp(P)!==0;_e++)me=me.redSqr();n(_e<se);var be=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(be),S=be.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var P=R[0],I=0,y=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(P!==R[0]&&(P=this.sqr(P)),$===0&&I===0){y=0;continue}I<<=1,I|=$,y++,!(y!==M&&(T!==0||W!==0))&&(P=this.mul(P,R[I]),y=0,I=0)}u=26}return P},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,PG)})(c_)),c_.exports}var ZI;function kG(){return ZI||(ZI=1,(function(r){var e=Vm&&Vm.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0,r.u64=l,r.i64=c,r.u128=d,r.i128=h,r.u256=w,r.i256=_,r.publicKey=A,r.option=N,r.bool=C,r.vec=F,r.tagged=Q,r.vecU8=G,r.str=Y,r.rustEnum=ee,r.array=te,r.map=V;const t=XI(),n=kO,i=e(LG());var s=XI();Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class o extends t.Layout{constructor(E,a,p){super(E,p),this.blob=(0,t.blob)(E),this.signed=a}decode(E,a=0){const p=new i.default(this.blob.decode(E,a),10,"le");return this.signed?p.fromTwos(this.span*8).clone():p}encode(E,a,p=0){return this.signed&&(E=E.toTwos(this.span*8)),this.blob.encode(E.toArrayLike(qn,"le",this.span),a,p)}}function l(K){return new o(8,!1,K)}function c(K){return new o(8,!0,K)}function d(K){return new o(16,!1,K)}function h(K){return new o(16,!0,K)}function w(K){return new o(32,!1,K)}function _(K){return new o(32,!0,K)}class x extends t.Layout{constructor(E,a,p,M){super(E.span,M),this.layout=E,this.decoder=a,this.encoder=p}decode(E,a){return this.decoder(this.layout.decode(E,a))}encode(E,a,p){return this.layout.encode(this.encoder(E),a,p)}getSpan(E,a){return this.layout.getSpan(E,a)}}function A(K){return new x((0,t.blob)(32),E=>new n.PublicKey(E),E=>E.toBuffer(),K)}class L extends t.Layout{constructor(E,a){super(-1,a),this.layout=E,this.discriminator=(0,t.u8)()}encode(E,a,p=0){return E==null?this.discriminator.encode(0,a,p):(this.discriminator.encode(1,a,p),this.layout.encode(E,a,p+1)+1)}decode(E,a=0){const p=this.discriminator.decode(E,a);if(p===0)return null;if(p===1)return this.layout.decode(E,a+1);throw new Error("Invalid option "+this.property)}getSpan(E,a=0){const p=this.discriminator.decode(E,a);if(p===0)return 1;if(p===1)return this.layout.getSpan(E,a+1)+1;throw new Error("Invalid option "+this.property)}}function N(K,E){return new L(K,E)}function C(K){return new x((0,t.u8)(),D,k,K)}function D(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function k(K){return K?1:0}function F(K,E){const a=(0,t.u32)("length"),p=(0,t.struct)([a,(0,t.seq)(K,(0,t.offset)(a,-a.span),"values")]);return new x(p,({values:M})=>M,M=>({values:M}),E)}function Q(K,E,a){const p=(0,t.struct)([l("tag"),E.replicate("data")]);function M({tag:R,data:T}){if(!R.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+R.toString("hex"));return T}return new x(p,M,R=>({tag:K,data:R}),a)}function G(K){const E=(0,t.u32)("length"),a=(0,t.struct)([E,(0,t.blob)((0,t.offset)(E,-E.span),"data")]);return new x(a,({data:p})=>p,p=>({data:p}),K)}function Y(K){return new x(G(),E=>E.toString("utf-8"),E=>qn.from(E,"utf-8"),K)}function ee(K,E,a){const p=(0,t.union)(a??(0,t.u8)(),E);return K.forEach((M,R)=>p.addVariant(R,M,M.property)),p}function te(K,E,a){const p=(0,t.struct)([(0,t.seq)(K,E,"values")]);return new x(p,({values:M})=>M,M=>({values:M}),a)}class U extends t.Layout{constructor(E,a,p){super(E.span+a.span,p),this.keyLayout=E,this.valueLayout=a}decode(E,a){a=a||0;const p=this.keyLayout.decode(E,a),M=this.valueLayout.decode(E,a+this.keyLayout.getSpan(E,a));return[p,M]}encode(E,a,p){p=p||0;const M=this.keyLayout.encode(E[0],a,p),R=this.valueLayout.encode(E[1],a,p+M);return M+R}getSpan(E,a){return this.keyLayout.getSpan(E,a)+this.valueLayout.getSpan(E,a)}}function V(K,E,a){const p=(0,t.u32)("length"),M=(0,t.struct)([p,(0,t.seq)(new U(K,E),(0,t.offset)(p,-p.span),"values")]);return new x(M,({values:R})=>new Map(R),R=>({values:Array.from(R.entries())}),a)}})(Vm)),Vm}var $n=kG();function I0(r){let e=r.length;for(;--e>=0;)r[e]=0}const OG=3,DG=258,mD=29,BG=256,UG=BG+1+mD,gD=30,FG=512,zG=new Array((UG+2)*2);I0(zG);const WG=new Array(gD*2);I0(WG);const VG=new Array(FG);I0(VG);const HG=new Array(DG-OG+1);I0(HG);const GG=new Array(mD);I0(GG);const jG=new Array(gD);I0(jG);const qG=(r,e,t,n)=>{let i=r&65535|0,s=r>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var Wb=qG;const KG=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},YG=new Uint32Array(KG()),XG=(r,e,t,n)=>{const i=YG,s=n+t;r^=-1;for(let o=n;o<s;o++)r=r>>>8^i[(r^e[o])&255];return r^-1};var dl=XG,Vb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},yD={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const $G=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var ZG=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)$G(t,n)&&(r[n]=t[n])}}return r},QG=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,s=r.length;n<s;n++){let o=r[n];t.set(o,i),i+=o.length}return t},vD={assign:ZG,flattenChunks:QG};let wD=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{wD=!1}const zg=new Uint8Array(256);for(let r=0;r<256;r++)zg[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;zg[254]=zg[254]=1;var JG=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,s,o=r.length,l=0;for(i=0;i<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const ej=(r,e)=>{if(e<65534&&r.subarray&&wD)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var tj=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const s=new Array(t*2);for(i=0,n=0;n<t;){let o=r[n++];if(o<128){s[i++]=o;continue}let l=zg[o];if(l>4){s[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<t;)o=o<<6|r[n++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return ej(s,i)},nj=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+zg[r[t]]>e?t:e},Hb={string2buf:JG,buf2string:tj,utf8border:nj};function rj(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ij=rj;const Yv=16209,sj=16191;var oj=function(e,t){let n,i,s,o,l,c,d,h,w,_,x,A,L,N,C,D,k,F,Q,G,Y,ee,te,U;const V=e.state;n=e.next_in,te=e.input,i=n+(e.avail_in-5),s=e.next_out,U=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),c=V.dmax,d=V.wsize,h=V.whave,w=V.wnext,_=V.window,x=V.hold,A=V.bits,L=V.lencode,N=V.distcode,C=(1<<V.lenbits)-1,D=(1<<V.distbits)-1;e:do{A<15&&(x+=te[n++]<<A,A+=8,x+=te[n++]<<A,A+=8),k=L[x&C];t:for(;;){if(F=k>>>24,x>>>=F,A-=F,F=k>>>16&255,F===0)U[s++]=k&65535;else if(F&16){Q=k&65535,F&=15,F&&(A<F&&(x+=te[n++]<<A,A+=8),Q+=x&(1<<F)-1,x>>>=F,A-=F),A<15&&(x+=te[n++]<<A,A+=8,x+=te[n++]<<A,A+=8),k=N[x&D];n:for(;;){if(F=k>>>24,x>>>=F,A-=F,F=k>>>16&255,F&16){if(G=k&65535,F&=15,A<F&&(x+=te[n++]<<A,A+=8,A<F&&(x+=te[n++]<<A,A+=8)),G+=x&(1<<F)-1,G>c){e.msg="invalid distance too far back",V.mode=Yv;break e}if(x>>>=F,A-=F,F=s-o,G>F){if(F=G-F,F>h&&V.sane){e.msg="invalid distance too far back",V.mode=Yv;break e}if(Y=0,ee=_,w===0){if(Y+=d-F,F<Q){Q-=F;do U[s++]=_[Y++];while(--F);Y=s-G,ee=U}}else if(w<F){if(Y+=d+w-F,F-=w,F<Q){Q-=F;do U[s++]=_[Y++];while(--F);if(Y=0,w<Q){F=w,Q-=F;do U[s++]=_[Y++];while(--F);Y=s-G,ee=U}}}else if(Y+=w-F,F<Q){Q-=F;do U[s++]=_[Y++];while(--F);Y=s-G,ee=U}for(;Q>2;)U[s++]=ee[Y++],U[s++]=ee[Y++],U[s++]=ee[Y++],Q-=3;Q&&(U[s++]=ee[Y++],Q>1&&(U[s++]=ee[Y++]))}else{Y=s-G;do U[s++]=U[Y++],U[s++]=U[Y++],U[s++]=U[Y++],Q-=3;while(Q>2);Q&&(U[s++]=U[Y++],Q>1&&(U[s++]=U[Y++]))}}else if((F&64)===0){k=N[(k&65535)+(x&(1<<F)-1)];continue n}else{e.msg="invalid distance code",V.mode=Yv;break e}break}}else if((F&64)===0){k=L[(k&65535)+(x&(1<<F)-1)];continue t}else if(F&32){V.mode=sj;break e}else{e.msg="invalid literal/length code",V.mode=Yv;break e}break}}while(n<i&&s<l);Q=A>>3,n-=Q,A-=Q<<3,x&=(1<<A)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<l?257+(l-s):257-(s-l),V.hold=x,V.bits=A};const wp=15,QI=852,JI=592,e3=0,kM=1,t3=2,aj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),uj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),fj=(r,e,t,n,i,s,o,l)=>{const c=l.bits;let d=0,h=0,w=0,_=0,x=0,A=0,L=0,N=0,C=0,D=0,k,F,Q,G,Y,ee=null,te;const U=new Uint16Array(wp+1),V=new Uint16Array(wp+1);let K=null,E,a,p;for(d=0;d<=wp;d++)U[d]=0;for(h=0;h<n;h++)U[e[t+h]]++;for(x=c,_=wp;_>=1&&U[_]===0;_--);if(x>_&&(x=_),_===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(w=1;w<_&&U[w]===0;w++);for(x<w&&(x=w),N=1,d=1;d<=wp;d++)if(N<<=1,N-=U[d],N<0)return-1;if(N>0&&(r===e3||_!==1))return-1;for(V[1]=0,d=1;d<wp;d++)V[d+1]=V[d]+U[d];for(h=0;h<n;h++)e[t+h]!==0&&(o[V[e[t+h]]++]=h);if(r===e3?(ee=K=o,te=20):r===kM?(ee=aj,K=lj,te=257):(ee=uj,K=cj,te=0),D=0,h=0,d=w,Y=s,A=x,L=0,Q=-1,C=1<<x,G=C-1,r===kM&&C>QI||r===t3&&C>JI)return 1;for(;;){E=d-L,o[h]+1<te?(a=0,p=o[h]):o[h]>=te?(a=K[o[h]-te],p=ee[o[h]-te]):(a=96,p=0),k=1<<d-L,F=1<<A,w=F;do F-=k,i[Y+(D>>L)+F]=E<<24|a<<16|p|0;while(F!==0);for(k=1<<d-1;D&k;)k>>=1;if(k!==0?(D&=k-1,D+=k):D=0,h++,--U[d]===0){if(d===_)break;d=e[t+o[h]]}if(d>x&&(D&G)!==Q){for(L===0&&(L=x),Y+=w,A=d-L,N=1<<A;A+L<_&&(N-=U[A+L],!(N<=0));)A++,N<<=1;if(C+=1<<A,r===kM&&C>QI||r===t3&&C>JI)return 1;Q=D&G,i[Q]=x<<24|A<<16|Y-s|0}}return D!==0&&(i[Y+D]=d-L<<24|64<<16|0),l.bits=x,0};var gg=fj;const hj=0,_D=1,xD=2,{Z_FINISH:n3,Z_BLOCK:dj,Z_TREES:Xv,Z_OK:Qh,Z_STREAM_END:pj,Z_NEED_DICT:mj,Z_STREAM_ERROR:la,Z_DATA_ERROR:SD,Z_MEM_ERROR:MD,Z_BUF_ERROR:gj,Z_DEFLATED:r3}=yD,Q1=16180,i3=16181,s3=16182,o3=16183,a3=16184,l3=16185,u3=16186,c3=16187,f3=16188,h3=16189,B_=16190,yu=16191,OM=16192,d3=16193,DM=16194,p3=16195,m3=16196,g3=16197,y3=16198,$v=16199,Zv=16200,v3=16201,w3=16202,_3=16203,x3=16204,S3=16205,BM=16206,M3=16207,E3=16208,Kr=16209,ED=16210,bD=16211,yj=852,vj=592,wj=15,_j=wj,b3=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function xj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cd=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Q1||e.mode>bD?1:0},AD=r=>{if(cd(r))return la;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Q1,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(yj),e.distcode=e.distdyn=new Int32Array(vj),e.sane=1,e.back=-1,Qh},TD=r=>{if(cd(r))return la;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,AD(r)},RD=(r,e)=>{let t;if(cd(r))return la;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?la:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,TD(r))},CD=(r,e)=>{if(!r)return la;const t=new xj;r.state=t,t.strm=r,t.window=null,t.mode=Q1;const n=RD(r,e);return n!==Qh&&(r.state=null),n},Sj=r=>CD(r,_j);let A3=!0,UM,FM;const Mj=r=>{if(A3){UM=new Int32Array(512),FM=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(gg(_D,r.lens,0,288,UM,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;gg(xD,r.lens,0,32,FM,0,r.work,{bits:5}),A3=!1}r.lencode=UM,r.lenbits=9,r.distcode=FM,r.distbits=5},ID=(r,e,t,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(t-n,t-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},Ej=(r,e)=>{let t,n,i,s,o,l,c,d,h,w,_,x,A,L,N=0,C,D,k,F,Q,G,Y,ee;const te=new Uint8Array(4);let U,V;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cd(r)||!r.output||!r.input&&r.avail_in!==0)return la;t=r.state,t.mode===yu&&(t.mode=OM),o=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,l=r.avail_in,d=t.hold,h=t.bits,w=l,_=c,ee=Qh;e:for(;;)switch(t.mode){case Q1:if(t.wrap===0){t.mode=OM;break}for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,te[0]=d&255,te[1]=d>>>8&255,t.check=dl(t.check,te,2,0),d=0,h=0,t.mode=i3;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=Kr;break}if((d&15)!==r3){r.msg="unknown compression method",t.mode=Kr;break}if(d>>>=4,h-=4,Y=(d&15)+8,t.wbits===0&&(t.wbits=Y),Y>15||Y>t.wbits){r.msg="invalid window size",t.mode=Kr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?h3:yu,d=0,h=0;break;case i3:for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.flags=d,(t.flags&255)!==r3){r.msg="unknown compression method",t.mode=Kr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Kr;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,t.check=dl(t.check,te,2,0)),d=0,h=0,t.mode=s3;case s3:for(;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,te[2]=d>>>16&255,te[3]=d>>>24&255,t.check=dl(t.check,te,4,0)),d=0,h=0,t.mode=o3;case o3:for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,t.check=dl(t.check,te,2,0)),d=0,h=0,t.mode=a3;case a3:if(t.flags&1024){for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,t.check=dl(t.check,te,2,0)),d=0,h=0}else t.head&&(t.head.extra=null);t.mode=l3;case l3:if(t.flags&1024&&(x=t.length,x>l&&(x=l),x&&(t.head&&(Y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+x),Y)),t.flags&512&&t.wrap&4&&(t.check=dl(t.check,n,x,s)),l-=x,s+=x,t.length-=x),t.length))break e;t.length=0,t.mode=u3;case u3:if(t.flags&2048){if(l===0)break e;x=0;do Y=n[s+x++],t.head&&Y&&t.length<65536&&(t.head.name+=String.fromCharCode(Y));while(Y&&x<l);if(t.flags&512&&t.wrap&4&&(t.check=dl(t.check,n,x,s)),l-=x,s+=x,Y)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=c3;case c3:if(t.flags&4096){if(l===0)break e;x=0;do Y=n[s+x++],t.head&&Y&&t.length<65536&&(t.head.comment+=String.fromCharCode(Y));while(Y&&x<l);if(t.flags&512&&t.wrap&4&&(t.check=dl(t.check,n,x,s)),l-=x,s+=x,Y)break e}else t.head&&(t.head.comment=null);t.mode=f3;case f3:if(t.flags&512){for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Kr;break}d=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=yu;break;case h3:for(;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}r.adler=t.check=b3(d),d=0,h=0,t.mode=B_;case B_:if(t.havedict===0)return r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=d,t.bits=h,mj;r.adler=t.check=1,t.mode=yu;case yu:if(e===dj||e===Xv)break e;case OM:if(t.last){d>>>=h&7,h-=h&7,t.mode=BM;break}for(;h<3;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}switch(t.last=d&1,d>>>=1,h-=1,d&3){case 0:t.mode=d3;break;case 1:if(Mj(t),t.mode=$v,e===Xv){d>>>=2,h-=2;break e}break;case 2:t.mode=m3;break;case 3:r.msg="invalid block type",t.mode=Kr}d>>>=2,h-=2;break;case d3:for(d>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Kr;break}if(t.length=d&65535,d=0,h=0,t.mode=DM,e===Xv)break e;case DM:t.mode=p3;case p3:if(x=t.length,x){if(x>l&&(x=l),x>c&&(x=c),x===0)break e;i.set(n.subarray(s,s+x),o),l-=x,s+=x,c-=x,o+=x,t.length-=x;break}t.mode=yu;break;case m3:for(;h<14;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.nlen=(d&31)+257,d>>>=5,h-=5,t.ndist=(d&31)+1,d>>>=5,h-=5,t.ncode=(d&15)+4,d>>>=4,h-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Kr;break}t.have=0,t.mode=g3;case g3:for(;t.have<t.ncode;){for(;h<3;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.lens[K[t.have++]]=d&7,d>>>=3,h-=3}for(;t.have<19;)t.lens[K[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,U={bits:t.lenbits},ee=gg(hj,t.lens,0,19,t.lencode,0,t.work,U),t.lenbits=U.bits,ee){r.msg="invalid code lengths set",t.mode=Kr;break}t.have=0,t.mode=y3;case y3:for(;t.have<t.nlen+t.ndist;){for(;N=t.lencode[d&(1<<t.lenbits)-1],C=N>>>24,D=N>>>16&255,k=N&65535,!(C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(k<16)d>>>=C,h-=C,t.lens[t.have++]=k;else{if(k===16){for(V=C+2;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(d>>>=C,h-=C,t.have===0){r.msg="invalid bit length repeat",t.mode=Kr;break}Y=t.lens[t.have-1],x=3+(d&3),d>>>=2,h-=2}else if(k===17){for(V=C+3;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=C,h-=C,Y=0,x=3+(d&7),d>>>=3,h-=3}else{for(V=C+7;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=C,h-=C,Y=0,x=11+(d&127),d>>>=7,h-=7}if(t.have+x>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Kr;break}for(;x--;)t.lens[t.have++]=Y}}if(t.mode===Kr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Kr;break}if(t.lenbits=9,U={bits:t.lenbits},ee=gg(_D,t.lens,0,t.nlen,t.lencode,0,t.work,U),t.lenbits=U.bits,ee){r.msg="invalid literal/lengths set",t.mode=Kr;break}if(t.distbits=6,t.distcode=t.distdyn,U={bits:t.distbits},ee=gg(xD,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,U),t.distbits=U.bits,ee){r.msg="invalid distances set",t.mode=Kr;break}if(t.mode=$v,e===Xv)break e;case $v:t.mode=Zv;case Zv:if(l>=6&&c>=258){r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=d,t.bits=h,oj(r,_),o=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,l=r.avail_in,d=t.hold,h=t.bits,t.mode===yu&&(t.back=-1);break}for(t.back=0;N=t.lencode[d&(1<<t.lenbits)-1],C=N>>>24,D=N>>>16&255,k=N&65535,!(C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(D&&(D&240)===0){for(F=C,Q=D,G=k;N=t.lencode[G+((d&(1<<F+Q)-1)>>F)],C=N>>>24,D=N>>>16&255,k=N&65535,!(F+C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=F,h-=F,t.back+=F}if(d>>>=C,h-=C,t.back+=C,t.length=k,D===0){t.mode=S3;break}if(D&32){t.back=-1,t.mode=yu;break}if(D&64){r.msg="invalid literal/length code",t.mode=Kr;break}t.extra=D&15,t.mode=v3;case v3:if(t.extra){for(V=t.extra;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=w3;case w3:for(;N=t.distcode[d&(1<<t.distbits)-1],C=N>>>24,D=N>>>16&255,k=N&65535,!(C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if((D&240)===0){for(F=C,Q=D,G=k;N=t.distcode[G+((d&(1<<F+Q)-1)>>F)],C=N>>>24,D=N>>>16&255,k=N&65535,!(F+C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=F,h-=F,t.back+=F}if(d>>>=C,h-=C,t.back+=C,D&64){r.msg="invalid distance code",t.mode=Kr;break}t.offset=k,t.extra=D&15,t.mode=_3;case _3:if(t.extra){for(V=t.extra;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Kr;break}t.mode=x3;case x3:if(c===0)break e;if(x=_-c,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Kr;break}x>t.wnext?(x-=t.wnext,A=t.wsize-x):A=t.wnext-x,x>t.length&&(x=t.length),L=t.window}else L=i,A=o-t.offset,x=t.length;x>c&&(x=c),c-=x,t.length-=x;do i[o++]=L[A++];while(--x);t.length===0&&(t.mode=Zv);break;case S3:if(c===0)break e;i[o++]=t.length,c--,t.mode=Zv;break;case BM:if(t.wrap){for(;h<32;){if(l===0)break e;l--,d|=n[s++]<<h,h+=8}if(_-=c,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?dl(t.check,i,_,o-_):Wb(t.check,i,_,o-_)),_=c,t.wrap&4&&(t.flags?d:b3(d))!==t.check){r.msg="incorrect data check",t.mode=Kr;break}d=0,h=0}t.mode=M3;case M3:if(t.wrap&&t.flags){for(;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Kr;break}d=0,h=0}t.mode=E3;case E3:ee=pj;break e;case Kr:ee=SD;break e;case ED:return MD;case bD:default:return la}return r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=d,t.bits=h,(t.wsize||_!==r.avail_out&&t.mode<Kr&&(t.mode<BM||e!==n3))&&ID(r,r.output,r.next_out,_-r.avail_out),w-=r.avail_in,_-=r.avail_out,r.total_in+=w,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?dl(t.check,i,_,r.next_out-_):Wb(t.check,i,_,r.next_out-_)),r.data_type=t.bits+(t.last?64:0)+(t.mode===yu?128:0)+(t.mode===$v||t.mode===DM?256:0),(w===0&&_===0||e===n3)&&ee===Qh&&(ee=gj),ee},bj=r=>{if(cd(r))return la;let e=r.state;return e.window&&(e.window=null),r.state=null,Qh},Aj=(r,e)=>{if(cd(r))return la;const t=r.state;return(t.wrap&2)===0?la:(t.head=e,e.done=!1,Qh)},Tj=(r,e)=>{const t=e.length;let n,i,s;return cd(r)||(n=r.state,n.wrap!==0&&n.mode!==B_)?la:n.mode===B_&&(i=1,i=Wb(i,e,t,0),i!==n.check)?SD:(s=ID(r,e,t,t),s?(n.mode=ED,MD):(n.havedict=1,Qh))};var Rj=TD,Cj=RD,Ij=AD,Nj=Sj,Pj=CD,Lj=Ej,kj=bj,Oj=Aj,Dj=Tj,Bj="pako inflate (from Nodeca project)",Au={inflateReset:Rj,inflateReset2:Cj,inflateResetKeep:Ij,inflateInit:Nj,inflateInit2:Pj,inflate:Lj,inflateEnd:kj,inflateGetHeader:Oj,inflateSetDictionary:Dj,inflateInfo:Bj};function Uj(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Fj=Uj;const ND=Object.prototype.toString,{Z_NO_FLUSH:zj,Z_FINISH:Wj,Z_OK:Wg,Z_STREAM_END:zM,Z_NEED_DICT:WM,Z_STREAM_ERROR:Vj,Z_DATA_ERROR:T3,Z_MEM_ERROR:Hj}=yD;function J1(r){this.options=vD.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ij,this.strm.avail_out=0;let t=Au.inflateInit2(this.strm,e.windowBits);if(t!==Wg)throw new Error(Vb[t]);if(this.header=new Fj,Au.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Hb.string2buf(e.dictionary):ND.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Au.inflateSetDictionary(this.strm,e.dictionary),t!==Wg)))throw new Error(Vb[t])}J1.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Wj:zj,ND.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Au.inflate(t,o),s===WM&&i&&(s=Au.inflateSetDictionary(t,i),s===Wg?s=Au.inflate(t,o):s===T3&&(s=WM));t.avail_in>0&&s===zM&&t.state.wrap>0&&r[t.next_in]!==0;)Au.inflateReset(t),s=Au.inflate(t,o);switch(s){case Vj:case T3:case WM:case Hj:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||s===zM))if(this.options.to==="string"){let c=Hb.utf8border(t.output,t.next_out),d=t.next_out-c,h=Hb.buf2string(t.output,c);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(c,c+d),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Wg&&l===0)){if(s===zM)return s=Au.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};J1.prototype.onData=function(r){this.chunks.push(r)};J1.prototype.onEnd=function(r){r===Wg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vD.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Gj(r,e){const t=new J1(e);if(t.push(r),t.err)throw t.msg||Vb[t.err];return t.result}var jj=Gj,qj={inflate:jj};const{inflate:Kj}=qj;var Yj=Kj,VM={exports:{}},R3;function Xj(){return R3||(R3=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function s(c,d,h,w,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,w||c,_),A=t?t+d:d;return c._events[A]?c._events[A].fn?c._events[A]=[c._events[A],x]:c._events[A].push(x):(c._events[A]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,w;if(this._eventsCount===0)return d;for(w in h=this._events)e.call(h,w)&&d.push(t?w.slice(1):w);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=t?t+d:d,w=this._events[h];if(!w)return[];if(w.fn)return[w.fn];for(var _=0,x=w.length,A=new Array(x);_<x;_++)A[_]=w[_].fn;return A},l.prototype.listenerCount=function(d){var h=t?t+d:d,w=this._events[h];return w?w.fn?1:w.length:0},l.prototype.emit=function(d,h,w,_,x,A){var L=t?t+d:d;if(!this._events[L])return!1;var N=this._events[L],C=arguments.length,D,k;if(N.fn){switch(N.once&&this.removeListener(d,N.fn,void 0,!0),C){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,h),!0;case 3:return N.fn.call(N.context,h,w),!0;case 4:return N.fn.call(N.context,h,w,_),!0;case 5:return N.fn.call(N.context,h,w,_,x),!0;case 6:return N.fn.call(N.context,h,w,_,x,A),!0}for(k=1,D=new Array(C-1);k<C;k++)D[k-1]=arguments[k];N.fn.apply(N.context,D)}else{var F=N.length,Q;for(k=0;k<F;k++)switch(N[k].once&&this.removeListener(d,N[k].fn,void 0,!0),C){case 1:N[k].fn.call(N[k].context);break;case 2:N[k].fn.call(N[k].context,h);break;case 3:N[k].fn.call(N[k].context,h,w);break;case 4:N[k].fn.call(N[k].context,h,w,_);break;default:if(!D)for(Q=1,D=new Array(C-1);Q<C;Q++)D[Q-1]=arguments[Q];N[k].fn.apply(N[k].context,D)}}return!0},l.prototype.on=function(d,h,w){return s(this,d,h,w,!1)},l.prototype.once=function(d,h,w){return s(this,d,h,w,!0)},l.prototype.removeListener=function(d,h,w,_){var x=t?t+d:d;if(!this._events[x])return this;if(!h)return o(this,x),this;var A=this._events[x];if(A.fn)A.fn===h&&(!_||A.once)&&(!w||A.context===w)&&o(this,x);else{for(var L=0,N=[],C=A.length;L<C;L++)(A[L].fn!==h||_&&!A[L].once||w&&A[L].context!==w)&&N.push(A[L]);N.length?this._events[x]=N.length===1?N[0]:N:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l})(VM)),VM.exports}var $j=Xj();const Zj=Ya($j);function Qj(r,e){return Array.apply(0,new Array(Math.ceil(r.length/e))).map((t,n)=>r.slice(n*e,(n+1)*e))}const th=r=>"version"in r;function Jj(r){return new TextDecoder("utf-8").decode(r)}function C3(r){return gT.encode(r)}function PD(r){return mn.from(r,"base64")}function qc(r){return"accounts"in r}async function eq(r){const e=(await Mt.findProgramAddress([],r))[0];return await Mt.createWithSeed(e,tq(),r)}function tq(){return"anchor:idl"}const nq=$n.struct([$n.publicKey("authority"),$n.vecU8("data")]);function rq(r){return nq.decode(r)}function iq(r){const e=["name","path","account","relations","generic"],t=s=>s.split(".").map(NG).join("."),n=s=>{for(const o in s){const l=s[o];e.includes(o)?s[o]=Array.isArray(l)?l.map(t):t(l):typeof l=="object"&&n(l)}},i=structuredClone(r);return n(i),i}function Kp(r,e,t,n){return r!=null&&r.length?r[0].name?t(r):n(r):e()}function sq(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function oq(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function LD(r,e={}){r.forEach(t=>{if(qc(t))LD(t.accounts,e[t.name]);else if(!e[t.name])throw new Error(`Account \`${t.name}\` not provided.`)})}function Va(r){return r instanceof Mt?r:new Mt(r)}class aq extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:o}=e,l=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(l),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[e,...t()]}}}function lq(r){return c0(r)&&typeof r[Symbol.iterator]=="function"}function c0(r){return typeof r=="object"&&r!=null}function tf(r){return typeof r=="string"?JSON.stringify(r):""+r}function uq(r){const{done:e,value:t}=r.next();return e?void 0:t}function cq(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:l,message:c="Expected a value of type `"+o+"`"+(l?" with refinement `"+l+"`":"")+", but received: `"+tf(n)+"`"}=r;return{value:n,type:o,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*I3(r,e,t,n){lq(r)||(r=[r]);for(const i of r){const s=cq(i,e,t,n);s&&(yield s)}}function*yT(r,e,t){t===void 0&&(t={});const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,l={path:n,branch:i};if(s&&(r=e.coercer(r,l),o&&e.type!=="type"&&c0(e.schema)&&c0(r)&&!Array.isArray(r)))for(const d in r)e.schema[d]===void 0&&delete r[d];let c=!0;for(const d of e.validator(r,l))c=!1,yield[d,void 0];for(let[d,h,w]of e.entries(r,l)){const _=yT(h,w,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,h],coerce:s,mask:o});for(const x of _)x[0]?(c=!1,yield[x[0],void 0]):s&&(h=x[1],d===void 0?r=h:r instanceof Map?r.set(d,h):r instanceof Set?r.add(h):c0(r)&&(r[d]=h))}if(c)for(const d of e.refiner(r,l))c=!1,yield[d,void 0];c&&(yield[void 0,r])}class af{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:l=function*(){}}=e;this.type=t,this.schema=n,this.entries=l,this.coercer=o,i?this.validator=(c,d)=>{const h=i(c,d);return I3(h,d,this,c)}:this.validator=()=>[],s?this.refiner=(c,d)=>{const h=s(c,d);return I3(h,d,this,c)}:this.refiner=()=>[]}assert(e){return fq(e,this)}create(e){return vT(e,this)}is(e){return kD(e,this)}mask(e){return hq(e,this)}validate(e,t){return t===void 0&&(t={}),Sy(e,this,t)}}function fq(r,e){const t=Sy(r,e);if(t[0])throw t[0]}function vT(r,e){const t=Sy(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function hq(r,e){const t=Sy(r,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function kD(r,e){return!Sy(r,e)[0]}function Sy(r,e,t){t===void 0&&(t={});const n=yT(r,e,t),i=uq(n);return i[0]?[new aq(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function My(r,e){return new af({type:r,schema:null,validator:e})}function dq(){return My("any",()=>!0)}function HM(r){return new af({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+tf(e)}})}function pq(){return My("boolean",r=>typeof r=="boolean")}function N3(r){const e=tf(r);return new af({type:"literal",schema:r,validator(t){return t===r||"Expected the literal `"+e+"`, but received: "+tf(t)}})}function Qv(r){return new af({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function f_(){return My("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+tf(r))}function h_(r){return new af({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function kh(){return My("string",r=>typeof r=="string"||"Expected a string, but received: "+tf(r))}function Zc(r){const e=Object.keys(r);return new af({type:"type",schema:r,*entries(t){if(c0(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return c0(t)||"Expected an object, but received: "+tf(t)}})}function OD(r){const e=r.map(t=>t.type).join(" | ");return new af({type:"union",schema:null,coercer(t,n){return(r.find(s=>{const[o]=s.validate(t,{coerce:!0});return!o})||wT()).coercer(t,n)},validator(t,n){const i=[];for(const s of r){const[...o]=yT(t,s,n),[l]=o;if(l[0])for(const[c]of o)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+tf(t),...i]}})}function wT(){return My("unknown",()=>!0)}function mq(r,e,t){return new af({...r,coercer:(n,i)=>kD(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}const P3=99;async function gq(r,e,t){if(e.length<=P3)return await L3(r,e,t);{const n=Qj(e,P3);return(await Promise.all(n.map(s=>L3(r,s,t)))).flat()}}async function L3(r,e,t){const n=t??r.commitment,{value:i,context:s}=await r.getMultipleAccountsInfoAndContext(e,n);return i.map((l,c)=>l===null?null:{publicKey:e[c],account:l,context:s})}async function yq(r,e,t,n,i){var s;t&&t.length>0&&e.sign(...t);const o=e._compile(),l=o.serialize(),d=e._serialize(l).toString("base64"),h={encoding:"base64",commitment:n??r.commitment};if(i){const A=(Array.isArray(i)?i:o.nonProgramIds()).map(L=>L.toBase58());h.accounts={encoding:"base64",addresses:A}}t&&t.length>0&&(h.sigVerify=!0);const w=[d,h],_=await r._rpcRequest("simulateTransaction",w),x=vT(_,xq);if("error"in x){let A;if("data"in x.error&&(A=(s=x.error.data)===null||s===void 0?void 0:s.logs,A&&Array.isArray(A))){const L=`
    `,N=L+A.join(L);console.error(x.error.message,N)}throw new ef("failed to simulate transaction: "+x.error.message,A)}return x.result}function vq(r){return mq(DD(r),wq,e=>"error"in e?e:{...e,result:vT(e.result,r)})}const wq=DD(wT());function DD(r){return OD([Zc({jsonrpc:N3("2.0"),id:kh(),result:r}),Zc({jsonrpc:N3("2.0"),id:kh(),error:Zc({code:wT(),message:kh(),data:h_(dq())})})])}function _q(r){return vq(Zc({context:Zc({slot:f_()}),value:r}))}const xq=_q(Zc({err:Qv(OD([Zc({}),kh()])),logs:Qv(HM(kh())),accounts:h_(Qv(HM(Qv(Zc({executable:pq(),owner:kh(),lamports:f_(),data:HM(kh()),rentEpoch:h_(f_())}))))),unitsConsumed:h_(f_())}));class Vg{constructor(e,t,n=Vg.defaultOptions()){this.connection=e,this.wallet=t,this.opts=n,this.publicKey=t==null?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t=Vg.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i,s,o,l;if(n===void 0&&(n=this.opts),th(e))t&&e.sign(t);else if(e.feePayer=(i=e.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,t)for(const d of t)e.partialSign(d);e=await this.wallet.signTransaction(e);const c=e.serialize();try{return await k3(this.connection,c,n)}catch(d){if(d instanceof Gb){const h=C3(th(e)?((s=e.signatures)===null||s===void 0?void 0:s[0])||new Uint8Array:(o=e.signature)!==null&&o!==void 0?o:new Uint8Array),w=th(e)?0:void 0,_=await this.connection.getTransaction(h,{commitment:"confirmed",maxSupportedTransactionVersion:w});if(_){const x=(l=_.meta)===null||l===void 0?void 0:l.logMessages;throw x?new ef(d.message,x):d}else throw d}else throw d}}async sendAll(e,t){var n,i,s;t===void 0&&(t=this.opts);const o=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let l=e.map(h=>{var w,_;if(th(h.tx)){let x=h.tx;return h.signers&&x.sign(h.signers),x}else{let x=h.tx,A=(w=h.signers)!==null&&w!==void 0?w:[];return x.feePayer=(_=x.feePayer)!==null&&_!==void 0?_:this.wallet.publicKey,x.recentBlockhash=o,A.forEach(L=>{x.partialSign(L)}),x}});const c=await this.wallet.signAllTransactions(l),d=[];for(let h=0;h<l.length;h+=1){const w=c[h],_=w.serialize();try{d.push(await k3(this.connection,_,t))}catch(x){if(x instanceof Gb){const A=C3(th(w)?((n=w.signatures)===null||n===void 0?void 0:n[0])||new Uint8Array:(i=w.signature)!==null&&i!==void 0?i:new Uint8Array),L=th(w)?0:void 0,N=await this.connection.getTransaction(A,{commitment:"confirmed",maxSupportedTransactionVersion:L});if(N){const C=(s=N.meta)===null||s===void 0?void 0:s.logMessages;throw C?new ef(x.message,C):x}else throw x}else throw x}}return d}async simulate(e,t,n,i){let s=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,o;if(th(e)?(t&&t.length>0&&(e.sign(t),e=await this.wallet.signTransaction(e)),o=await this.connection.simulateTransaction(e,{commitment:n})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=s,t&&t.length>0&&(e=await this.wallet.signTransaction(e)),o=await yq(this.connection,e,t,n,i)),o.value.err)throw new Sq(o.value);return o.value}}class Sq extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function k3(r,e,t){const n=t?{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment,maxRetries:t.maxRetries,minContextSlot:t.minContextSlot}:{};let i;const s=Date.now();for(;Date.now()-s<6e4;)try{const o=await r.sendRawTransaction(e,n);if(t!=null&&t.blockhash)if(n.maxRetries===0){const l=AbortSignal.timeout(15e3);i=(await r.confirmTransaction({abortSignal:l,signature:o,...t.blockhash},t&&t.commitment)).value}else i=(await r.confirmTransaction({signature:o,...t.blockhash},t&&t.commitment)).value;else i=(await r.confirmTransaction(o,t&&t.commitment)).value;if(i.err)throw new Gb(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}catch(o){if(o.name==="TimeoutError")continue;throw o}throw Error("Transaction failed to confirm in 60s")}class Gb extends Error{constructor(e){super(e)}}function jb(){return Vg.local()}var Mq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof HI<"u"?HI:typeof self<"u"?self:{},it={};Object.defineProperty(it,"__esModule",{value:!0});var BD=it.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=L4=it.ANCHOR_ERROR__REQUIRE_VIOLATED=P4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=N4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=I4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=C4=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=R4=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=T4=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=A4=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=b4=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=E4=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=M4=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=S4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=x4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=_4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=w4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=v4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=y4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=g4=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=m4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=p4=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=d4=it.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=h4=it.ANCHOR_ERROR__CONSTRAINT_SPACE=f4=it.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=c4=it.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=u4=it.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=l4=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=a4=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=o4=it.ANCHOR_ERROR__CONSTRAINT_ZERO=s4=it.ANCHOR_ERROR__CONSTRAINT_ADDRESS=i4=it.ANCHOR_ERROR__CONSTRAINT_CLOSE=r4=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=n4=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=t4=it.ANCHOR_ERROR__CONSTRAINT_STATE=e4=it.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=JD=it.ANCHOR_ERROR__CONSTRAINT_SEEDS=QD=it.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=ZD=it.ANCHOR_ERROR__CONSTRAINT_OWNER=$D=it.ANCHOR_ERROR__CONSTRAINT_RAW=XD=it.ANCHOR_ERROR__CONSTRAINT_SIGNER=YD=it.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=KD=it.ANCHOR_ERROR__CONSTRAINT_MUT=qD=it.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=jD=it.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=GD=it.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=HD=it.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=VD=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=WD=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=zD=it.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=FD=it.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,UD=it.ANCHOR_ERROR__DEPRECATED=sB=it.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=iB=it.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=rB=it.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=nB=it.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=tB=it.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=eB=it.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=J4=it.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=Q4=it.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=Z4=it.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=$4=it.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=X4=it.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=Y4=it.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=K4=it.ANCHOR_ERROR__INVALID_PROGRAM_ID=q4=it.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=j4=it.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=G4=it.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=H4=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=V4=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=W4=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=z4=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=F4=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=U4=it.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=B4=it.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=D4=it.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=O4=it.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=k4=it.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,FD=it.ANCHOR_ERROR__INSTRUCTION_MISSING=100,zD=it.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,WD=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,VD=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,HD=it.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,GD=it.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,jD=it.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,qD=it.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,KD=it.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,YD=it.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,XD=it.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,$D=it.ANCHOR_ERROR__CONSTRAINT_RAW=2003,ZD=it.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,QD=it.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,JD=it.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,e4=it.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,t4=it.ANCHOR_ERROR__CONSTRAINT_STATE=2008,n4=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,r4=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,i4=it.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,s4=it.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,o4=it.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,a4=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,l4=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,u4=it.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,c4=it.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,f4=it.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,h4=it.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,d4=it.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,p4=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,m4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,g4=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,y4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,v4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,w4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,_4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,x4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,S4=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,M4=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,E4=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,b4=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,A4=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,T4=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,R4=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,C4=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,I4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,N4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,P4=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,L4=it.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;BD=it.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var k4=it.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,O4=it.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,D4=it.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,B4=it.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,U4=it.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,F4=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,z4=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,W4=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,V4=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,H4=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,G4=it.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,j4=it.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,q4=it.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,K4=it.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,Y4=it.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,X4=it.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,$4=it.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,Z4=it.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,Q4=it.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,J4=it.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,eB=it.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,tB=it.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,nB=it.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,rB=it.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,iB=it.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,sB=it.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;UD=it.ANCHOR_ERROR__DEPRECATED=5e3;const Eq=new Map;function oB(r){return Eq.get(r)!==void 0}class Gc extends Error{constructor(e){super(e),this.name="IdlError"}}class Ey{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let o=0;o<e.length;o++){if(i.exec(e[o])){s.pop();continue}const l=(t=n.exec(e[o]))===null||t===void 0?void 0:t[1];l&&s.push(new Mt(l))}return new Ey(s)}}class yg extends Error{constructor(e,t,n,i,s,o){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:o,origin:s},this._programErrorStack=Ey.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(_=>_.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const _=/^Program log: (.*)$/,x=_.exec(e[t+2])[1],A=_.exec(e[t+4])[1];s=[new Mt(x),new Mt(A)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const _=/^Program log: (Left|Right): (.*)$/,x=_.exec(e[t+1])[2],A=_.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[x,A]}}const l=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),d=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),w=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(l){const[_,x,A]=l.slice(1,4),L={code:_,number:parseInt(x)};return new yg(L,A,i,e,void 0,s)}else if(d){const[_,x,A,L,N]=d.slice(1,6),C={code:A,number:parseInt(L)},D={file:_,line:parseInt(x)};return new yg(C,N,i,e,D,s)}else if(w){const[_,x,A,L]=w.slice(1,5),N=_,C={code:x,number:parseInt(A)};return new yg(C,L,i,e,N,s)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class U_ extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=Ey.parse(n))}static parse(e,t){const n=e.toString();let i;if(n.includes("custom program error:")){let l=n.split("custom program error: ");if(l.length!==2)return null;i=l[1]}else{const l=n.match(/"Custom":([0-9]+)}/g);if(!l||l.length>1)return null;i=l[0].match(/([0-9]+)/g)[0]}let s;try{s=parseInt(i)}catch{return null}let o=t.get(s);return o!==void 0?new U_(s,o,e.logs):(o=bq.get(s),o!==void 0?new U_(s,o,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function aB(r,e){oB("debug-logs")&&console.log("Translating error:",r);const t=yg.parse(r.logs);if(t)return t;const n=U_.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,o){return o==="programErrorStack"?s.programErrorStack.stack:o==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=Ey.parse(r.logs),new Proxy(r,i)}return r}const Zt={InstructionMissing:FD,InstructionFallbackNotFound:zD,InstructionDidNotDeserialize:WD,InstructionDidNotSerialize:VD,IdlInstructionStub:HD,IdlInstructionInvalidProgram:GD,IdlAccountNotEmpty:jD,EventInstructionStub:qD,ConstraintMut:KD,ConstraintHasOne:YD,ConstraintSigner:XD,ConstraintRaw:$D,ConstraintOwner:ZD,ConstraintRentExempt:QD,ConstraintSeeds:JD,ConstraintExecutable:e4,ConstraintState:t4,ConstraintAssociated:n4,ConstraintAssociatedInit:r4,ConstraintClose:i4,ConstraintAddress:s4,ConstraintZero:o4,ConstraintTokenMint:a4,ConstraintTokenOwner:l4,ConstraintMintMintAuthority:u4,ConstraintMintFreezeAuthority:c4,ConstraintMintDecimals:f4,ConstraintSpace:h4,ConstraintAccountIsNone:d4,ConstraintTokenTokenProgram:p4,ConstraintMintTokenProgram:m4,ConstraintAssociatedTokenTokenProgram:g4,ConstraintMintGroupPointerExtension:y4,ConstraintMintGroupPointerExtensionAuthority:v4,ConstraintMintGroupPointerExtensionGroupAddress:w4,ConstraintMintGroupMemberPointerExtension:_4,ConstraintMintGroupMemberPointerExtensionAuthority:x4,ConstraintMintGroupMemberPointerExtensionMemberAddress:S4,ConstraintMintMetadataPointerExtension:M4,ConstraintMintMetadataPointerExtensionAuthority:E4,ConstraintMintMetadataPointerExtensionMetadataAddress:b4,ConstraintMintCloseAuthorityExtension:A4,ConstraintMintCloseAuthorityExtensionAuthority:T4,ConstraintMintPermanentDelegateExtension:R4,ConstraintMintPermanentDelegateExtensionDelegate:C4,ConstraintMintTransferHookExtension:I4,ConstraintMintTransferHookExtensionAuthority:N4,ConstraintMintTransferHookExtensionProgramId:P4,RequireViolated:L4,RequireEqViolated:BD,RequireKeysEqViolated:k4,RequireNeqViolated:O4,RequireKeysNeqViolated:D4,RequireGtViolated:B4,RequireGteViolated:U4,AccountDiscriminatorAlreadySet:F4,AccountDiscriminatorNotFound:z4,AccountDiscriminatorMismatch:W4,AccountDidNotDeserialize:V4,AccountDidNotSerialize:H4,AccountNotEnoughKeys:G4,AccountNotMutable:j4,AccountOwnedByWrongProgram:q4,InvalidProgramId:K4,InvalidProgramExecutable:Y4,AccountNotSigner:X4,AccountNotSystemOwned:$4,AccountNotInitialized:Z4,AccountNotProgramData:Q4,AccountNotAssociatedTokenAccount:J4,AccountSysvarMismatch:eB,AccountReallocExceedsLimit:tB,AccountDuplicateReallocs:nB,DeclaredProgramIdMismatch:rB,TryingToInitPayerAsProgramAccount:iB,InvalidNumericConversion:sB,Deprecated:UD},bq=new Map([[Zt.InstructionMissing,"Instruction discriminator not provided"],[Zt.InstructionFallbackNotFound,"Fallback functions are not supported"],[Zt.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Zt.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Zt.IdlInstructionStub,"The program was compiled without idl instructions"],[Zt.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Zt.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[Zt.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[Zt.ConstraintMut,"A mut constraint was violated"],[Zt.ConstraintHasOne,"A has one constraint was violated"],[Zt.ConstraintSigner,"A signer constraint was violated"],[Zt.ConstraintRaw,"A raw constraint was violated"],[Zt.ConstraintOwner,"An owner constraint was violated"],[Zt.ConstraintRentExempt,"A rent exemption constraint was violated"],[Zt.ConstraintSeeds,"A seeds constraint was violated"],[Zt.ConstraintExecutable,"An executable constraint was violated"],[Zt.ConstraintState,"Deprecated Error, feel free to replace with something else"],[Zt.ConstraintAssociated,"An associated constraint was violated"],[Zt.ConstraintAssociatedInit,"An associated init constraint was violated"],[Zt.ConstraintClose,"A close constraint was violated"],[Zt.ConstraintAddress,"An address constraint was violated"],[Zt.ConstraintZero,"Expected zero account discriminant"],[Zt.ConstraintTokenMint,"A token mint constraint was violated"],[Zt.ConstraintTokenOwner,"A token owner constraint was violated"],[Zt.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Zt.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Zt.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Zt.ConstraintSpace,"A space constraint was violated"],[Zt.ConstraintAccountIsNone,"A required account for the constraint is None"],[Zt.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[Zt.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[Zt.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[Zt.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[Zt.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[Zt.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[Zt.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[Zt.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[Zt.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[Zt.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[Zt.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[Zt.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[Zt.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[Zt.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[Zt.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[Zt.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[Zt.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[Zt.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[Zt.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[Zt.RequireViolated,"A require expression was violated"],[Zt.RequireEqViolated,"A require_eq expression was violated"],[Zt.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Zt.RequireNeqViolated,"A require_neq expression was violated"],[Zt.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Zt.RequireGtViolated,"A require_gt expression was violated"],[Zt.RequireGteViolated,"A require_gte expression was violated"],[Zt.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Zt.AccountDiscriminatorNotFound,"No discriminator was found on the account"],[Zt.AccountDiscriminatorMismatch,"Account discriminator did not match what was expected"],[Zt.AccountDidNotDeserialize,"Failed to deserialize the account"],[Zt.AccountDidNotSerialize,"Failed to serialize the account"],[Zt.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Zt.AccountNotMutable,"The given account is not mutable"],[Zt.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Zt.InvalidProgramId,"Program ID was not as expected"],[Zt.InvalidProgramExecutable,"Program account is not executable"],[Zt.AccountNotSigner,"The given account did not sign"],[Zt.AccountNotSystemOwned,"The given account is not owned by the system program"],[Zt.AccountNotInitialized,"The program expected this account to be already initialized"],[Zt.AccountNotProgramData,"The given account is not a program data account"],[Zt.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Zt.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Zt.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[Zt.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[Zt.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Zt.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[Zt.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[Zt.Deprecated,"The API being used is deprecated and should no longer be used"]]);class ar{static fieldLayout(e,t=[],n){const i=e.name;switch(e.type){case"bool":return $n.bool(i);case"u8":return $n.u8(i);case"i8":return $n.i8(i);case"u16":return $n.u16(i);case"i16":return $n.i16(i);case"u32":return $n.u32(i);case"i32":return $n.i32(i);case"f32":return $n.f32(i);case"u64":return $n.u64(i);case"i64":return $n.i64(i);case"f64":return $n.f64(i);case"u128":return $n.u128(i);case"i128":return $n.i128(i);case"u256":return $n.u256(i);case"i256":return $n.i256(i);case"bytes":return $n.vecU8(i);case"string":return $n.str(i);case"pubkey":return $n.publicKey(i);default:{if("option"in e.type)return $n.option(ar.fieldLayout({type:e.type.option},t,n),i);if("vec"in e.type)return $n.vec(ar.fieldLayout({type:e.type.vec},t,n),i);if("array"in e.type){let[s,o]=e.type.array;return o=ar.resolveArrayLen(o,n),$n.array(ar.fieldLayout({type:s},t,n),o,i)}if("defined"in e.type){if(!t)throw new Gc("User defined types not provided");const s=e.type.defined.name,o=t.find(l=>l.name===s);if(!o)throw new Gc(`Type not found: ${e.name}`);return ar.typeDefLayout({typeDef:o,types:t,genericArgs:n??e.type.defined.generics,name:i})}if("generic"in e.type){const s=n==null?void 0:n.at(0);if((s==null?void 0:s.kind)!=="type")throw new Gc(`Invalid generic field: ${e.name}`);return ar.fieldLayout({...e,type:s.type},t)}throw new Gc(`Not yet implemented: ${JSON.stringify(e.type)}`)}}}static typeDefLayout({typeDef:e,types:t,name:n,genericArgs:i}){switch(e.type.kind){case"struct":{const s=Kp(e.type.fields,()=>[],o=>o.map(l=>{const c=i&&ar.resolveGenericArgs({type:l.type,typeDef:e,genericArgs:i});return ar.fieldLayout(l,t,c)}),o=>o.map((l,c)=>{const d=i&&ar.resolveGenericArgs({type:l,typeDef:e,genericArgs:i});return ar.fieldLayout({name:c.toString(),type:l},t,d)}));return $n.struct(s,n)}case"enum":{const s=e.type.variants.map(o=>{const l=Kp(o.fields,()=>[],c=>c.map(d=>{const h=i&&ar.resolveGenericArgs({type:d.type,typeDef:e,genericArgs:i});return ar.fieldLayout(d,t,h)}),c=>c.map((d,h)=>{const w=i&&ar.resolveGenericArgs({type:d,typeDef:e,genericArgs:i});return ar.fieldLayout({name:h.toString(),type:d},t,w)}));return $n.struct(l,o.name)});return n!==void 0?$n.rustEnum(s).replicate(n):$n.rustEnum(s,n)}case"type":return ar.fieldLayout({type:e.type.alias,name:n},t)}}static typeSize(e,t,n){var i;switch(e){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in e)return 1+ar.typeSize(e.option,t,n);if("coption"in e)return 4+ar.typeSize(e.coption,t,n);if("vec"in e)return 1;if("array"in e){let[s,o]=e.array;return o=ar.resolveArrayLen(o,n),ar.typeSize(s,t,n)*o}if("defined"in e){const s=(i=t.types)===null||i===void 0?void 0:i.find(l=>l.name===e.defined.name);if(!s)throw new Gc(`Type not found: ${JSON.stringify(e)}`);const o=l=>{const c=n??e.defined.generics,d=c&&ar.resolveGenericArgs({type:l,typeDef:s,genericArgs:c});return ar.typeSize(l,t,d)};switch(s.type.kind){case"struct":return Kp(s.type.fields,()=>[0],l=>l.map(c=>o(c.type)),l=>l.map(c=>o(c))).reduce((l,c)=>l+c,0);case"enum":{const l=s.type.variants.map(c=>Kp(c.fields,()=>[0],d=>d.map(h=>o(h.type)),d=>d.map(h=>o(h))).reduce((d,h)=>d+h,0));return Math.max(...l)+1}case"type":return ar.typeSize(s.type.alias,t,n)}}if("generic"in e){const s=n==null?void 0:n.at(0);if((s==null?void 0:s.kind)!=="type")throw new Gc(`Invalid generic: ${e.generic}`);return ar.typeSize(s.type,t,n)}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}static resolveArrayLen(e,t){if(typeof e=="number")return e;if(t){const n=t.find(i=>i.kind==="const");(n==null?void 0:n.kind)==="const"&&(e=+n.value)}if(typeof e!="number")throw new Gc("Generic array length did not resolve");return e}static resolveGenericArgs({type:e,typeDef:t,genericArgs:n,isDefined:i}){if(typeof e!="object")return null;for(const s in t.generics){const o=t.generics[s];if("generic"in e&&o.name===e.generic)return[n[s]];if("option"in e){const l=ar.resolveGenericArgs({type:e.option,typeDef:t,genericArgs:n,isDefined:i});if(!l||!i)return l;if(l[0].kind==="type")return[{kind:"type",type:{option:l[0].type}}]}if("vec"in e){const l=ar.resolveGenericArgs({type:e.vec,typeDef:t,genericArgs:n,isDefined:i});if(!l||!i)return l;if(l[0].kind==="type")return[{kind:"type",type:{vec:l[0].type}}]}if("array"in e){const[l,c]=e.array,d=typeof c=="object",h=ar.resolveGenericArgs({type:l,typeDef:t,genericArgs:n,isDefined:i})||[];if(d){const w=t.generics.findIndex(_=>_.name===c.generic);w!==-1&&h.push(n[w])}if(h.length>0){if(!i)return h;if(h[0].kind==="type"&&h[1].kind==="const")return[{kind:"type",type:{array:[h[0].type,+h[1].value]}}]}if(d&&o.name===c.generic){const w=n[s];return i?[{kind:"type",type:{array:[l,+w.value]}}]:[w]}return null}if("defined"in e)return e.defined.generics?e.defined.generics.flatMap(l=>{switch(l.kind){case"type":return ar.resolveGenericArgs({type:l.type,typeDef:t,genericArgs:n,isDefined:!0});case"const":return[l]}}).filter(l=>l!==null):null}return null}}class Aq{constructor(e){this.idl=e;const t=e.instructions.map(n=>{const i=n.name,s=n.args.map(l=>ar.fieldLayout(l,e.types)),o=$n.struct(s,i);return[i,{discriminator:n.discriminator,layout:o}]});this.ixLayouts=new Map(t)}encode(e,t){const n=mn.alloc(1e3),i=this.ixLayouts.get(e);if(!i)throw new Error(`Unknown method: ${e}`);const s=i.layout.encode(t,n),o=n.slice(0,s);return mn.concat([mn.from(i.discriminator),o])}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?mn.from(e,"hex"):gT.decode(e));for(const[n,i]of this.ixLayouts){const s=e.subarray(0,i.discriminator.length);if(s.equals(mn.from(i.discriminator)))return{name:n,data:i.layout.decode(e.subarray(s.length))}}return null}format(e,t){return Oo.format(e,t,this.idl)}}class Oo{static format(e,t,n){const i=n.instructions.find(c=>e.name===c.name);if(!i)return console.error("Invalid instruction given"),null;const s=i.args.map(c=>({name:c.name,type:Oo.formatIdlType(c.type),data:Oo.formatIdlData(c,e.data[c.name],n.types)})),o=Oo.flattenIdlAccounts(i.accounts),l=t.map((c,d)=>d<o.length?{name:o[d].name,...c}:{name:void 0,...c});return{args:s,accounts:l}}static formatIdlType(e){if(typeof e=="string")return e;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("coption"in e)return`COption<${this.formatIdlType(e.coption)}>`;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;if("defined"in e){const t=e.defined.name;if(e.defined.generics){const n=e.defined.generics.map(i=>{switch(i.kind){case"type":return Oo.formatIdlType(i.type);case"const":return i.value}}).join(", ");return`${t}<${n}>`}return t}throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if("vec"in e.type)return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i,n)).join(", ")+"]";if("option"in e.type)return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if("defined"in e.type){if(!n)throw new Error("User defined types not provided");const i=e.type.defined.name,s=n.find(o=>o.name===i);if(!s)throw new Error(`Type not found: ${i}`);return Oo.formatIdlDataDefined(s,t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){switch(e.type.kind){case"struct":return"{ "+Kp(e.type.fields,()=>"",i=>Object.entries(t).map(([s,o])=>{const l=i.find(c=>c.name===s);if(!l)throw new Error(`Field not found: ${s}`);return s+": "+Oo.formatIdlData(l,o,n)}).join(", "),i=>Object.entries(t).map(([s,o])=>s+": "+Oo.formatIdlData({name:"",type:i[s]},o,n)).join(", "))+" }";case"enum":{const i=Object.keys(t)[0],s=e.type.variants.find(l=>l.name===i);if(!s)throw new Error(`Unable to find variant: ${i}`);const o=t[i];return Kp(s.fields,()=>i,l=>{const c=Object.keys(o).map(d=>{const h=o[d],w=l.find(_=>_.name===d);if(!w)throw new Error(`Field not found: ${d}`);return d+": "+Oo.formatIdlData(w,h,n)}).join(", ");return`${i} { ${c} }`},l=>{const c=Object.entries(o).map(([d,h])=>d+": "+Oo.formatIdlData({name:"",type:l[d]},h,n)).join(", ");return`${i} { ${c} }`})}case"type":return Oo.formatIdlType(e.type.alias)}}static flattenIdlAccounts(e,t){return e.map(n=>{const i=Tq(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Oo.flattenIdlAccounts(n.accounts,s)}else return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function Tq(r){const e=r.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}class Rq{constructor(e){if(this.idl=e,!e.accounts){this.accountLayouts=new Map;return}const t=e.types;if(!t)throw new Error("Accounts require `idl.types`");const n=e.accounts.map(i=>{const s=t.find(o=>o.name===i.name);if(!s)throw new Error(`Account not found: ${i.name}`);return[i.name,{discriminator:i.discriminator,layout:ar.typeDefLayout({typeDef:s,types:t})}]});this.accountLayouts=new Map(n)}async encode(e,t){const n=mn.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.layout.encode(t,n),o=n.slice(0,s),l=this.accountDiscriminator(e);return mn.concat([l,o])}decode(e,t){const n=this.accountDiscriminator(e);if(n.compare(t.slice(0,n.length)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){for(const[t,n]of this.accountLayouts)if(e.subarray(0,n.discriminator.length).equals(mn.from(n.discriminator)))return this.decodeUnchecked(t,e);throw new Error("Account not found")}decodeUnchecked(e,t){const n=this.accountDiscriminator(e),i=t.subarray(n.length),s=this.accountLayouts.get(e);if(!s)throw new Error(`Unknown account: ${e}`);return s.layout.decode(i)}memcmp(e,t){const n=this.accountDiscriminator(e);return{offset:0,bytes:gT.encode(t?mn.concat([n,t]):n)}}size(e){return this.accountDiscriminator(e).length+ar.typeSize({defined:{name:e}},this.idl)}accountDiscriminator(e){var t;const n=(t=this.idl.accounts)===null||t===void 0?void 0:t.find(i=>i.name===e);if(!n)throw new Error(`Account not found: ${e}`);return mn.from(n.discriminator)}}class Cq{constructor(e){if(!e.events){this.layouts=new Map;return}const t=e.types;if(!t)throw new Error("Events require `idl.types`");const n=e.events.map(i=>{const s=t.find(o=>o.name===i.name);if(!s)throw new Error(`Event not found: ${i.name}`);return[i.name,{discriminator:i.discriminator,layout:ar.typeDefLayout({typeDef:s,types:t})}]});this.layouts=new Map(n)}decode(e){let t;try{t=PD(e)}catch{return null}for(const[n,i]of this.layouts){const s=t.subarray(0,i.discriminator.length);if(s.equals(mn.from(i.discriminator)))return{name:n,data:i.layout.decode(t.subarray(s.length))}}return null}}class Iq{constructor(e){const t=e.types;if(!t){this.typeLayouts=new Map;return}const n=t.filter(i=>!i.generics).map(i=>[i.name,ar.typeDefLayout({typeDef:i,types:t})]);this.typeLayouts=new Map(n)}encode(e,t){const n=mn.alloc(1e3),i=this.typeLayouts.get(e);if(!i)throw new Error(`Unknown type: ${e}`);const s=i.encode(t,n);return n.slice(0,s)}decode(e,t){const n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);return n.decode(t)}}class lB{constructor(e){this.instruction=new Aq(e),this.accounts=new Rq(e),this.events=new Cq(e),this.types=new Iq(e)}}class _o{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var ex=_o;function Nq(r,e){return e.property?r+"["+e.property+"]":r}class Oh extends _o{isCount(){throw new Error("ExternalLayout is abstract")}}class uB extends Oh{constructor(e,t,n){if(!(e instanceof _o))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof tx||this.layout instanceof cB}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class tx extends _o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class cB extends _o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const qb=Math.pow(2,32);function fB(r){const e=Math.floor(r/qb),t=r-e*qb;return{hi32:e,lo32:t}}function hB(r,e){return r*qb+e}class Pq extends _o{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return hB(i,n)}encode(e,t,n){n===void 0&&(n=0);const i=fB(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class Lq extends _o{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),i=e.readInt32LE(t+4);return hB(i,n)}encode(e,t,n){n===void 0&&(n=0);const i=fB(e);return t.writeUInt32LE(i.lo32,n),t.writeInt32LE(i.hi32,n+4),8}}class kq extends _o{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof _o,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,o=0;for(const l of this.fields){let c=l.span;if(o=0<c?c:0,l.property!==void 0){const d=e[l.property];d!==void 0&&(o=l.encode(d,t,n),0>c&&(c=l.getSpan(t,n)))}s=n,n+=c}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class dB{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class O3 extends dB{constructor(e,t){if(!(e instanceof Oh&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class pB extends _o{constructor(e,t,n){const i=e instanceof tx||e instanceof cB;if(i)e=new O3(new uB(e));else if(e instanceof Oh&&e.isCount())e=new O3(e);else if(!(e instanceof dB))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof _o))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return o(l)},this.configGetSourceVariant=function(l){o=l.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const i=this.discriminator,s=i.decode(e,t);let o=this.registry[s];if(o===void 0){let l=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(l=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[o.property]=this.defaultLayout.decode(e,t+l)}else n=o.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let l=0;return this.usesPrefixDiscriminator&&(l=s.layout.span),s.encode(e[s.property],t,n),l+o.encode(e[o.property],t,n+l)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new Oq(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return qn.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class Oq extends _o{constructor(e,t,n,i){if(!(e instanceof pB))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof _o))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class Dq extends _o{constructor(e,t){if(!(e instanceof Oh&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Oh||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Oh&&(i=e.length),!(qn.isBuffer(e)&&i===e.length))throw new TypeError(Nq("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Oh&&this.length.encode(i,t,n),i}}var Bq=((r,e,t)=>new uB(r,e,t)),Uq=(r=>new tx(1,r)),Nu=(r=>new tx(4,r)),Fq=(r=>new Pq(r)),Hu=(r=>new Lq(r)),Fi=((r,e,t)=>new kq(r,e,t)),mB=((r,e,t)=>new pB(r,e,t)),by=((r,e)=>new Dq(r,e));class zq extends ex{constructor(e){super(-1,e),this.property=e,this.layout=Fi([Nu("length"),Nu("lengthPadding"),by(Bq(Nu(),-8),"chars")],this.property)}encode(e,t,n=0){if(e==null)return this.layout.span;const i={chars:qn.from(e,"utf8")};return this.layout.encode(i,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return Nu().span+Nu().span+new Mh(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function nx(r){return new zq(r)}function ua(r){return by(32,r)}const Go=mB(Nu("instruction"));Go.addVariant(0,Fi([Hu("lamports"),Hu("space"),ua("owner")]),"createAccount");Go.addVariant(1,Fi([ua("owner")]),"assign");Go.addVariant(2,Fi([Hu("lamports")]),"transfer");Go.addVariant(3,Fi([ua("base"),nx("seed"),Hu("lamports"),Hu("space"),ua("owner")]),"createAccountWithSeed");Go.addVariant(4,Fi([ua("authorized")]),"advanceNonceAccount");Go.addVariant(5,Fi([Hu("lamports")]),"withdrawNonceAccount");Go.addVariant(6,Fi([ua("authorized")]),"initializeNonceAccount");Go.addVariant(7,Fi([ua("authorized")]),"authorizeNonceAccount");Go.addVariant(8,Fi([Hu("space")]),"allocate");Go.addVariant(9,Fi([ua("base"),nx("seed"),Hu("space"),ua("owner")]),"allocateWithSeed");Go.addVariant(10,Fi([ua("base"),nx("seed"),ua("owner")]),"assignWithSeed");Go.addVariant(11,Fi([Hu("lamports"),nx("seed"),ua("owner")]),"transferWithSeed");Math.max(...Object.values(Go.registry).map(r=>r.span));class Wq extends ex{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function D3(r){return new Wq(by(32),e=>new Mt(e),e=>e.toBuffer(),r)}Fi([Nu("version"),Nu("state"),D3("authorizedPubkey"),D3("nonce"),Fi([Fq("lamportsPerSignature")],"feeCalculator")]);new Mt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Mt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var B3={exports:{}};(function(r,e){var t=typeof self<"u"?self:Mq,n=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(o){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(a){return a&&DataView.prototype.isPrototypeOf(a)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(a){return a&&d.indexOf(Object.prototype.toString.call(a))>-1};function w(a){if(typeof a!="string"&&(a=String(a)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function _(a){return typeof a!="string"&&(a=String(a)),a}function x(a){var p={next:function(){var M=a.shift();return{done:M===void 0,value:M}}};return l.iterable&&(p[Symbol.iterator]=function(){return p}),p}function A(a){this.map={},a instanceof A?a.forEach(function(p,M){this.append(M,p)},this):Array.isArray(a)?a.forEach(function(p){this.append(p[0],p[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(p){this.append(p,a[p])},this)}A.prototype.append=function(a,p){a=w(a),p=_(p);var M=this.map[a];this.map[a]=M?M+", "+p:p},A.prototype.delete=function(a){delete this.map[w(a)]},A.prototype.get=function(a){return a=w(a),this.has(a)?this.map[a]:null},A.prototype.has=function(a){return this.map.hasOwnProperty(w(a))},A.prototype.set=function(a,p){this.map[w(a)]=_(p)},A.prototype.forEach=function(a,p){for(var M in this.map)this.map.hasOwnProperty(M)&&a.call(p,this.map[M],M,this)},A.prototype.keys=function(){var a=[];return this.forEach(function(p,M){a.push(M)}),x(a)},A.prototype.values=function(){var a=[];return this.forEach(function(p){a.push(p)}),x(a)},A.prototype.entries=function(){var a=[];return this.forEach(function(p,M){a.push([M,p])}),x(a)},l.iterable&&(A.prototype[Symbol.iterator]=A.prototype.entries);function L(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function N(a){return new Promise(function(p,M){a.onload=function(){p(a.result)},a.onerror=function(){M(a.error)}})}function C(a){var p=new FileReader,M=N(p);return p.readAsArrayBuffer(a),M}function D(a){var p=new FileReader,M=N(p);return p.readAsText(a),M}function k(a){for(var p=new Uint8Array(a),M=new Array(p.length),R=0;R<p.length;R++)M[R]=String.fromCharCode(p[R]);return M.join("")}function F(a){if(a.slice)return a.slice(0);var p=new Uint8Array(a.byteLength);return p.set(new Uint8Array(a)),p.buffer}function Q(){return this.bodyUsed=!1,this._initBody=function(a){this._bodyInit=a,a?typeof a=="string"?this._bodyText=a:l.blob&&Blob.prototype.isPrototypeOf(a)?this._bodyBlob=a:l.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():l.arrayBuffer&&l.blob&&c(a)?(this._bodyArrayBuffer=F(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||h(a))?this._bodyArrayBuffer=F(a):this._bodyText=a=Object.prototype.toString.call(a):this._bodyText="",this.headers.get("content-type")||(typeof a=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var a=L(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?L(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var a=L(this);if(a)return a;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}var G=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Y(a){var p=a.toUpperCase();return G.indexOf(p)>-1?p:a}function ee(a,p){p=p||{};var M=p.body;if(a instanceof ee){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,p.headers||(this.headers=new A(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,!M&&a._bodyInit!=null&&(M=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new A(p.headers)),this.method=Y(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})};function te(a){var p=new FormData;return a.trim().split("&").forEach(function(M){if(M){var R=M.split("="),T=R.shift().replace(/\+/g," "),P=R.join("=").replace(/\+/g," ");p.append(decodeURIComponent(T),decodeURIComponent(P))}}),p}function U(a){var p=new A,M=a.replace(/\r?\n[\t ]+/g," ");return M.split(/\r?\n/).forEach(function(R){var T=R.split(":"),P=T.shift().trim();if(P){var I=T.join(":").trim();p.append(P,I)}}),p}Q.call(ee.prototype);function V(a,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new A(p.headers),this.url=p.url||"",this._initBody(a)}Q.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new A(this.headers),url:this.url})},V.error=function(){var a=new V(null,{status:0,statusText:""});return a.type="error",a};var K=[301,302,303,307,308];V.redirect=function(a,p){if(K.indexOf(p)===-1)throw new RangeError("Invalid status code");return new V(null,{status:p,headers:{location:a}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(p,M){this.message=p,this.name=M;var R=Error(p);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function E(a,p){return new Promise(function(M,R){var T=new ee(a,p);if(T.signal&&T.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function I(){P.abort()}P.onload=function(){var y={status:P.status,statusText:P.statusText,headers:U(P.getAllResponseHeaders()||"")};y.url="responseURL"in P?P.responseURL:y.headers.get("X-Request-URL");var u="response"in P?P.response:P.responseText;M(new V(u,y))},P.onerror=function(){R(new TypeError("Network request failed"))},P.ontimeout=function(){R(new TypeError("Network request failed"))},P.onabort=function(){R(new o.DOMException("Aborted","AbortError"))},P.open(T.method,T.url,!0),T.credentials==="include"?P.withCredentials=!0:T.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&l.blob&&(P.responseType="blob"),T.headers.forEach(function(y,u){P.setRequestHeader(u,y)}),T.signal&&(T.signal.addEventListener("abort",I),P.onreadystatechange=function(){P.readyState===4&&T.signal.removeEventListener("abort",I)}),P.send(typeof T._bodyInit>"u"?null:T._bodyInit)})}return E.polyfill=!0,s.fetch||(s.fetch=E,s.Headers=A,s.Request=ee,s.Response=V),o.Headers=A,o.Request=ee,o.Response=V,o.fetch=E,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(B3,B3.exports);$n.rustEnum([$n.struct([],"uninitialized"),$n.struct([$n.option($n.publicKey(),"authorityAddress")],"buffer"),$n.struct([$n.publicKey("programdataAddress")],"program"),$n.struct([$n.u64("slot"),$n.option($n.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,$n.u32());const Kb="Program log: ",gB="Program data: ",Vq=Kb.length,Hq=gB.length;class Gq{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new yB(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t,n){var i;let s=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,((i=this._eventListeners.get(e))!==null&&i!==void 0?i:[]).concat(s)),this._eventCallbacks.set(s,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(o,l)=>{if(!o.err)for(const c of this._eventParser.parseLogs(o.logs)){const d=this._eventListeners.get(c.name);d&&d.forEach(h=>{const w=this._eventCallbacks.get(h);if(w){const[,_]=w;_(c.data,l.slot,o.signature)}})}},n)),s}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);if(this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),this._eventListeners.set(n,i),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class yB{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const n=new qq(e),i=new jq;let s=n.next();for(;s!==null;){let[o,l,c]=this.handleLog(i,s,t);o&&(yield o),l&&i.push(l),c&&i.pop(),s=n.next()}}handleLog(e,t,n){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,n):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(Kb)||e.startsWith(gB)){const n=e.startsWith(Kb)?e.slice(Vq):e.slice(Hq),i=this.coder.events.decode(n);if(t&&i===null)throw new Error(`Unable to decode event ${n}`);return[i,null,!1]}else return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class jq{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class qq{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}function rx(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(o=>o.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class F_{static build(e,t,n){if(e.name==="_inner")throw new Gc("the _inner name is reserved");const i=(...s)=>{const[o,l]=rx(e,[...s]);LD(e.accounts,l.accounts),Kq(e,...s);const c=i.accounts(l.accounts);return l.remainingAccounts!==void 0&&c.push(...l.remainingAccounts),oB("debug-logs")&&console.log("Outgoing account metas:",c),new Cr({keys:c,programId:n,data:t(e.name,oq(e,...o))})};return i.accounts=s=>F_.accountsArray(s,e.accounts,n,e.name),i}static accountsArray(e,t,n,i){return e?t.map(s=>{if(qc(s)){const h=e[s.name];return F_.accountsArray(h,s.accounts,n,i).flat()}let o;try{o=Va(e[s.name])}catch{throw new Error(`Wrong input type for account "${s.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}const l=s.optional&&o.equals(n),c=!!(s.writable&&!l),d=!!(s.signer&&!l);return{pubkey:o,isWritable:c,isSigner:d}}).flat():[]}}function Kq(r,...e){}class Yq{static build(e,t){return(...i)=>{var s,o,l;const[,c]=rx(e,[...i]),d=new ur;if(c.preInstructions&&c.instructions)throw new Error("instructions is deprecated, use preInstructions");return(s=c.preInstructions)===null||s===void 0||s.forEach(h=>d.add(h)),(o=c.instructions)===null||o===void 0||o.forEach(h=>d.add(h)),d.add(t(...i)),(l=c.postInstructions)===null||l===void 0||l.forEach(h=>d.add(h)),d}}}class Xq{static build(e,t,n,i){return async(...o)=>{var l;const c=t(...o),[,d]=rx(e,[...o]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(c,(l=d.signers)!==null&&l!==void 0?l:[],d.options)}catch(h){throw aB(h,n)}}}}class $q{static build(e,t,n,i){var s;return((s=e.accounts)!==null&&s!==void 0?s:[]).reduce((o,l)=>(o[l.name]=new Zq(e,l,n,i,t),o),{})}}class Zq{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??jb(),this._coder=s??new lB(e),this._size=this._coder.accounts.size(t.name)}async fetchNullable(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);return n}async fetchNullableAndContext(e,t){const n=await this.getAccountInfoAndContext(e,t),{value:i,context:s}=n;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:s}}async fetch(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);if(n===null)throw new Error(`Account does not exist or has no data ${e.toString()}`);return n}async fetchAndContext(e,t){const{data:n,context:i}=await this.fetchNullableAndContext(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return{data:n,context:i}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map(i=>i?i.data:null)}async fetchMultipleAndContext(e,t){return(await gq(this._provider.connection,e.map(i=>Va(i)),t)).map(i=>{if(i==null)return null;const{account:s,context:o}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,s.data),context:o}})}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof qn?e:void 0),n=[];return(t==null?void 0:t.offset)!=null&&(t==null?void 0:t.bytes)!=null&&n.push({memcmp:{offset:t.offset,bytes:t.bytes}}),(t==null?void 0:t.dataSize)!=null&&n.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...n,...Array.isArray(e)?e:[]]})).map(({pubkey:s,account:o})=>({publicKey:s,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(e,t){const n=Hm.get(e.toString());if(n)return n.ee;const i=new Zj;e=Va(e);const s=this._provider.connection.onAccountChange(e,o=>{const l=this._coder.accounts.decode(this._idlAccount.name,o.data);i.emit("change",l)},t);return Hm.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Hm.get(e.toString());if(!t){console.warn("Address is not subscribed");return}Hm&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Hm.delete(e.toString())}).catch(console.error)}async createInstruction(e,t){const n=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Ri.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Va(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(Va(e),t)}}const Hm=new Map;class Qq{static build(e,t,n,i,s,o,l){return async(...d)=>{var h;const w=t(...d),[,_]=rx(e,[...d]);let x;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{x=await i.simulate(w,_.signers,(h=_.options)===null||h===void 0?void 0:h.commitment)}catch(N){throw aB(N,n)}if(x===void 0)throw new Error("Unable to simulate transaction");const A=x.logs;if(!A)throw new Error("Simulated logs not found");const L=[];if(l.events){let N=new yB(o,s);for(const C of N.parseLogs(A))L.push(C)}return{events:L,raw:A}}}}function GM(r){return new vB(by(8),e=>_T.fromBuffer(e),e=>e.toBuffer(),r)}function Jv(r){return new vB(by(32),e=>new Mt(e),e=>e.toBuffer(),r)}function jM(r,e){return new Jq(r,e)}class vB extends ex{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class Jq extends ex{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=Nu()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class _T extends Mh{toBuffer(){const e=super.toArray().reverse(),t=qn.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=qn.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new _T([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}const eK=Fi([Jv("mint"),Jv("owner"),GM("amount"),jM(Jv(),"delegate"),(r=>{const e=mB(Uq("discriminator"),null,r);return e.addVariant(0,Fi([]),"uninitialized"),e.addVariant(1,Fi([]),"initialized"),e.addVariant(2,Fi([]),"frozen"),e})("state"),jM(GM(),"isNative"),GM("delegatedAmount"),jM(Jv(),"closeAuthority")]);function tK(r){return eK.decode(r)}class nK{constructor(e,t,n,i,s,o,l,c){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._idlTypes=l,this._customResolver=c,this._accountStore=new rK(n,o,i)}args(e){this._args=e}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let e=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(e++,e===16){const t=o=>qc(o)?o.accounts.some(t):!!(o.address||o.pda||o.relations),n=(o,l=[],c=[])=>{for(const d of o)qc(d)?c.push(...n(d.accounts,[...l,d.name])):c.push([...l,d.name]);return c},i=this._idlIx.accounts.filter(t),s=n(i).filter(o=>!this.get(o)).map(o=>o.reduce((l,c)=>l+"."+c)).map(o=>`\`${o}\``).join(", ");throw new Error(["Reached maximum depth for account resolution.",`Unresolved accounts: ${s}`].join(" "))}}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce((n,i)=>n&&n[i],this._accounts);if(t&&t.toBase58)return t}set(e,t){let n=this._accounts;e.forEach((i,s)=>{var o;s===e.length-1&&(n[i]=t),n[i]=(o=n[i])!==null&&o!==void 0?o:{},n=n[i]})}resolveOptionalsHelper(e,t){const n={};for(const i of t){const s=i.name,o=e[s];o!==void 0&&(wB(o)?qc(i)?n[s]=this.resolveOptionalsHelper(o,i.accounts):n[s]=_B(o):o!==null?n[s]=Va(o):i.optional&&(n[s]=this._programId))}return n}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveEventCpi(e,t=[]){for(const n in e){const i=e[n];qc(i)&&this.resolveEventCpi(i.accounts,[...t,i.name]);const s=+n+1;if(s===e.length)return;const o=e[n].name,l=e[s].name;if(o==="eventAuthority"&&l==="program"){const c=[...t,o],d=[...t,l];this.get(c)||this.set(c,Mt.findProgramAddressSync([qn.from("__event_authority")],this._programId)[0]),this.get(d)||this.set(d,this._programId);return}}}resolveConst(e,t=[]){for(const n of e){const i=n.name;if(qc(n))this.resolveConst(n.accounts,[...t,i]);else{const s=n;if((s.signer||s.address)&&!this.get([...t,i])){if(s.signer){if(!this._provider.publicKey)throw new Error("This function requires the `Provider` interface implementor to have a `publicKey` field.");this.set([...t,i],this._provider.publicKey)}s.address&&this.set([...t,i],Va(s.address))}}}}async resolvePdasAndRelations(e,t=[]){let n=0;for(const i of e){const s=i.name;if(qc(i))n+=await this.resolvePdasAndRelations(i.accounts,[...t,s]);else{const o=i;if((o.pda||o.relations)&&!this.get([...t,s])){n++;try{if(o.pda){const l=await Promise.all(o.pda.seeds.map(h=>this.toBuffer(h,t)));if(l.some(h=>!h))continue;const c=await this.parseProgramId(o,t),[d]=Mt.findProgramAddressSync(l,c);this.set([...t,s],d)}}catch{}try{if(o.relations){const l=this.get([...t,o.relations[0]]);if(l){const c=await this._accountStore.fetchAccount({publicKey:l});this.set([...t,s],c[s])}}}catch{}}}}return n}async parseProgramId(e,t=[]){var n;if(!(!((n=e.pda)===null||n===void 0)&&n.program))return this._programId;const i=await this.toBuffer(e.pda.program,t);if(!i)throw new Error(`Program seed not resolved: ${e.name}`);return new Mt(i)}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed: ${e}`)}}toBufferConst(e){return this.toBufferValue("bytes",e.value)}async toBufferArg(e){const[t,...n]=e.path.split("."),i=this._idlIx.args.findIndex(l=>l.name===t);if(i===-1)throw new Error(`Unable to find argument for seed: ${t}`);const s=n.reduce((l,c)=>(l??{})[c],this._args[i]);if(s===void 0)return;const o=this.getType(this._idlIx.args[i].type,n);return this.toBufferValue(o,s)}async toBufferAccount(e,t=[]){const[n,...i]=e.path.split("."),s=this.get([...t,n]);if(!s)return;if(!i.length)return this.toBufferValue("pubkey",s);if(!e.account)throw new Error(`Seed account is required in order to resolve type: ${e.path}`);let l=await this._accountStore.fetchAccount({publicKey:s,name:e.account}),c=i;for(;c.length>0;)l=l[c[0]],c=c.slice(1);if(l===void 0)return;const d=this.getType({defined:{name:e.account}},i);return this.toBufferValue(d,l)}toBufferValue(e,t){switch(e){case"u8":case"i8":return qn.from([t]);case"u16":case"i16":return new Mh(t).toArrayLike(qn,"le",2);case"u32":case"i32":return new Mh(t).toArrayLike(qn,"le",4);case"u64":case"i64":return new Mh(t).toArrayLike(qn,"le",8);case"u128":case"i128":return new Mh(t).toArrayLike(qn,"le",16);case"u256":case"i256":return new Mh(t).toArrayLike(qn,"le",32);case"string":return qn.from(t);case"pubkey":return t.toBuffer();case"bytes":return qn.from(t);default:if(e!=null&&e.array)return qn.from(t);throw new Error(`Unexpected seed type: ${e}`)}}getType(e,t=[]){var n;const i=(n=e==null?void 0:e.defined)===null||n===void 0?void 0:n.name;if(i){if(i==="tokenAccount")switch(t.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${t}`)}const s=this._idlTypes.find(h=>h.name===i);if(!s)throw new Error(`Type not found: ${i}`);const[o,...l]=t,d=s.type.fields.find(h=>h.name===o);if(!d)throw new Error(`Field not found: ${o}`);return this.getType(d.type,l)}return e}}class rK{constructor(e,t,n){this._provider=e,this._cache=new Map,this._idls={},this._idls[n.toBase58()]=t}async fetchAccount({publicKey:e,name:t}){const n=e.toBase58();if(!this._cache.has(n)){const i=await this._provider.connection.getAccountInfo(e);if(i===null)throw new Error(`Account not found: ${n}`);if(t==="tokenAccount"){const s=tK(i.data);this._cache.set(n,s)}else{const s=await this.getAccountsNs(i.owner);if(s){const o=Object.values(s)[0];if(o){const l=o.coder.accounts.decodeAny(i.data);this._cache.set(n,l)}}}}return this._cache.get(n)}async getAccountsNs(e){const t=e.toBase58();if(!this._idls[t]){const n=await g0.fetchIdl(e,this._provider);if(n){const i=new g0(n,this._provider);this._idls[t]=i.account}}return this._idls[t]}}class iK{static build(e,t,n,i,s,o,l,c,d,h,w){return(..._)=>new sK(_,i,s,o,l,c,e,t,n,d,h,w)}}function wB(r){return typeof r=="object"&&r!==null&&!("_bn"in r)}function _B(r,e){const t={};for(const n in r){const i=r[n];if(i===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");t[n]=wB(i)?_B(i):Va(i)}return t}class sK{constructor(e,t,n,i,s,o,l,c,d,h,w,_){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=o,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new nK(e,this._accounts,l,c,d,h,w,_)}args(e){this._args=e,this._accountsResolver.args(e)}accounts(e){return this.accountsPartial(e)}accountsPartial(e){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e,t=!1){return t?this._preInstructions=e.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async simulate(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error(["Method does not support views.","The instruction should return a value, and its accounts must be read-only"].join(" "));return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpc(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{signature:await this.rpc(e),pubkeys:await this.pubkeys()}}async prepare(){return{instruction:await this.instruction(),signers:this._signers,pubkeys:await this.pubkeys()}}}class oK{static build(e,t,n,i){const s=t.accounts.find(c=>c.writable),o=!!t.returns;return s||!o?void 0:async(...c)=>{let d=await n(...c);const h=`Program return: ${e} `;let w=d.raw.find(L=>L.startsWith(h));if(!w)throw new Error("View expected return log");let _=PD(w.slice(h.length)),x=t.returns;if(!x)throw new Error("View expected return type");return ar.fieldLayout({type:x},i.types).decode(_)}}}class aK{static build(e,t,n,i,s){const o={},l={},c={},d={},h={},w={},_=sq(e),x=e.accounts?$q.build(e,t,n,i):{};return e.instructions.forEach(A=>{const L=F_.build(A,(G,Y)=>t.instruction.encode(G,Y),n),N=Yq.build(A,L),C=Xq.build(A,N,_,i),D=Qq.build(A,N,_,i,t,n,e),k=oK.build(n,A,D,e),F=iK.build(i,n,A,L,N,C,D,k,x,e.types||[],s==null?void 0:s(A)),Q=A.name;l[Q]=L,c[Q]=N,o[Q]=C,d[Q]=D,h[Q]=F,k&&(w[Q]=k)}),[o,l,c,x,d,h,w]}}class g0{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t=jb(),n,i){this._idl=iq(e),this._rawIdl=e,this._provider=t,this._programId=Va(e.address),this._coder=n??new lB(this._idl),this._events=new Gq(this._programId,t,this._coder);const[s,o,l,c,d,h,w]=aK.build(this._idl,this._coder,this._programId,t,i);this.rpc=s,this.instruction=o,this.transaction=l,this.account=c,this.simulate=d,this.methods=h,this.views=w}static async at(e,t){const n=Va(e),i=await g0.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new g0(i,t)}static async fetchIdl(e,t){t=t??jb();const n=Va(e),i=await eq(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let o=rq(s.data.slice(8));const l=Yj(o.data);return JSON.parse(Jj(l))}addEventListener(e,t,n){return this._events.addEventListener(e,t,n)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new Mt("11111111111111111111111111111111");const U3=new Mt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Mt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const F3=new Mt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Mt("So11111111111111111111111111111111111111112");new Mt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const xT=Ce.createContext({});function ST(r){const e=Ce.useRef(null);return e.current===null&&(e.current=r()),e.current}const ix=Ce.createContext(null),MT=Ce.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class lK extends Ce.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function uK({children:r,isPresent:e}){const t=Ce.useId(),n=Ce.useRef(null),i=Ce.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Ce.useContext(MT);return Ce.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(e||!n.current||!o||!l)return;n.current.dataset.motionPopId=t;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),Xt.jsx(lK,{isPresent:e,childRef:n,sizeRef:i,children:Ce.cloneElement(r,{ref:n})})}const cK=({children:r,initial:e,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=ST(fK),c=Ce.useId(),d=Ce.useCallback(w=>{l.set(w,!0);for(const _ of l.values())if(!_)return;n&&n()},[l,n]),h=Ce.useMemo(()=>({id:c,initial:e,isPresent:t,custom:i,onExitComplete:d,register:w=>(l.set(w,!1),()=>l.delete(w))}),s?[Math.random(),d]:[t,d]);return Ce.useMemo(()=>{l.forEach((w,_)=>l.set(_,!1))},[t]),Ce.useEffect(()=>{!t&&!l.size&&n&&n()},[t]),o==="popLayout"&&(r=Xt.jsx(uK,{isPresent:t,children:r})),Xt.jsx(ix.Provider,{value:h,children:r})};function fK(){return new Map}function xB(r=!0){const e=Ce.useContext(ix);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=Ce.useId();Ce.useEffect(()=>{r&&i(s)},[r]);const o=Ce.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,o]:[!0]}const ew=r=>r.key||"";function z3(r){const e=[];return Ce.Children.forEach(r,t=>{Ce.isValidElement(t)&&e.push(t)}),e}const ET=typeof window<"u",SB=ET?Ce.useLayoutEffect:Ce.useEffect,W3=({children:r,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[l,c]=xB(o),d=Ce.useMemo(()=>z3(r),[r]),h=o&&!l?[]:d.map(ew),w=Ce.useRef(!0),_=Ce.useRef(d),x=ST(()=>new Map),[A,L]=Ce.useState(d),[N,C]=Ce.useState(d);SB(()=>{w.current=!1,_.current=d;for(let F=0;F<N.length;F++){const Q=ew(N[F]);h.includes(Q)?x.delete(Q):x.get(Q)!==!0&&x.set(Q,!1)}},[N,h.length,h.join("-")]);const D=[];if(d!==A){let F=[...d];for(let Q=0;Q<N.length;Q++){const G=N[Q],Y=ew(G);h.includes(Y)||(F.splice(Q,0,G),D.push(G))}s==="wait"&&D.length&&(F=D),C(z3(F)),L(d);return}const{forceRender:k}=Ce.useContext(xT);return Xt.jsx(Xt.Fragment,{children:N.map(F=>{const Q=ew(F),G=o&&!l?!1:d===N||h.includes(Q),Y=()=>{if(x.has(Q))x.set(Q,!0);else return;let ee=!0;x.forEach(te=>{te||(ee=!1)}),ee&&(k==null||k(),C(_.current),o&&(c==null||c()),n&&n())};return Xt.jsx(cK,{isPresent:G,initial:!w.current||t?void 0:!1,custom:G?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:G?void 0:Y,children:F},Q)})})},zo=r=>r;let MB=zo;function bT(r){let e;return()=>(e===void 0&&(e=r()),e)}const y0=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n},Fu=r=>r*1e3,zu=r=>r/1e3,hK={useManualTiming:!1};function dK(r){let e=new Set,t=new Set,n=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(c.schedule(d),r()),d(o)}const c={schedule:(d,h=!1,w=!1)=>{const x=w&&n?e:t;return h&&s.add(d),x.has(d)||x.add(d),d},cancel:d=>{t.delete(d),s.delete(d)},process:d=>{if(o=d,n){i=!0;return}n=!0,[e,t]=[t,e],e.forEach(l),e.clear(),n=!1,i&&(i=!1,c.process(d))}};return c}const tw=["read","resolveKeyframes","update","preRender","render","postRender"],pK=40;function EB(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=tw.reduce((C,D)=>(C[D]=dK(s),C),{}),{read:l,resolveKeyframes:c,update:d,preRender:h,render:w,postRender:_}=o,x=()=>{const C=performance.now();t=!1,i.delta=n?1e3/60:Math.max(Math.min(C-i.timestamp,pK),1),i.timestamp=C,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),w.process(i),_.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(x))},A=()=>{t=!0,n=!0,i.isProcessing||r(x)};return{schedule:tw.reduce((C,D)=>{const k=o[D];return C[D]=(F,Q=!1,G=!1)=>(t||A(),k.schedule(F,Q,G)),C},{}),cancel:C=>{for(let D=0;D<tw.length;D++)o[tw[D]].cancel(C)},state:i,steps:o}}const{schedule:Hr,cancel:nf,state:us,steps:qM}=EB(typeof requestAnimationFrame<"u"?requestAnimationFrame:zo,!0),bB=Ce.createContext({strict:!1}),V3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},v0={};for(const r in V3)v0[r]={isEnabled:e=>V3[r].some(t=>!!e[t])};function mK(r){for(const e in r)v0[e]={...v0[e],...r[e]}}const gK=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function z_(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||gK.has(r)}let AB=r=>!z_(r);function yK(r){r&&(AB=e=>e.startsWith("on")?!z_(e):r(e))}try{yK(require("@emotion/is-prop-valid").default)}catch{}function vK(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(AB(i)||t===!0&&z_(i)||!e&&!z_(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function wK(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...n)=>r(...n);return new Proxy(t,{get:(n,i)=>i==="create"?r:(e.has(i)||e.set(i,r(i)),e.get(i))})}const sx=Ce.createContext({});function Hg(r){return typeof r=="string"||Array.isArray(r)}function ox(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const AT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],TT=["initial",...AT];function ax(r){return ox(r.animate)||TT.some(e=>Hg(r[e]))}function TB(r){return!!(ax(r)||r.variants)}function _K(r,e){if(ax(r)){const{initial:t,animate:n}=r;return{initial:t===!1||Hg(t)?t:void 0,animate:Hg(n)?n:void 0}}return r.inherit!==!1?e:{}}function xK(r){const{initial:e,animate:t}=_K(r,Ce.useContext(sx));return Ce.useMemo(()=>({initial:e,animate:t}),[H3(e),H3(t)])}function H3(r){return Array.isArray(r)?r.join(" "):r}const SK=Symbol.for("motionComponentSymbol");function Yp(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function MK(r,e,t){return Ce.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Yp(t)&&(t.current=n))},[e])}const RT=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),EK="framerAppearId",RB="data-"+RT(EK),{schedule:CT}=EB(queueMicrotask,!1),CB=Ce.createContext({});function bK(r,e,t,n,i){var s,o;const{visualElement:l}=Ce.useContext(sx),c=Ce.useContext(bB),d=Ce.useContext(ix),h=Ce.useContext(MT).reducedMotion,w=Ce.useRef(null);n=n||c.renderer,!w.current&&n&&(w.current=n(r,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const _=w.current,x=Ce.useContext(CB);_&&!_.projection&&i&&(_.type==="html"||_.type==="svg")&&AK(w.current,t,i,x);const A=Ce.useRef(!1);Ce.useInsertionEffect(()=>{_&&A.current&&_.update(t,d)});const L=t[RB],N=Ce.useRef(!!L&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,L))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,L)));return SB(()=>{_&&(A.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),CT.render(_.render),N.current&&_.animationState&&_.animationState.animateChanges())}),Ce.useEffect(()=>{_&&(!N.current&&_.animationState&&_.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)===null||C===void 0||C.call(window,L)}),N.current=!1))}),_}function AK(r,e,t,n){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:IB(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Yp(l),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function IB(r){if(r)return r.options.allowProjection!==!1?r.projection:IB(r.parent)}function TK({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:i}){var s,o;r&&mK(r);function l(d,h){let w;const _={...Ce.useContext(MT),...d,layoutId:RK(d)},{isStatic:x}=_,A=xK(d),L=n(d,x);if(!x&&ET){CK();const N=IK(_);w=N.MeasureLayout,A.visualElement=bK(i,L,_,e,N.ProjectionNode)}return Xt.jsxs(sx.Provider,{value:A,children:[w&&A.visualElement?Xt.jsx(w,{visualElement:A.visualElement,..._}):null,t(i,d,MK(L,A.visualElement,h),L,x,A.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const c=Ce.forwardRef(l);return c[SK]=i,c}function RK({layoutId:r}){const e=Ce.useContext(xT).id;return e&&r!==void 0?e+"-"+r:r}function CK(r,e){Ce.useContext(bB).strict}function IK(r){const{drag:e,layout:t}=v0;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const NK=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function IT(r){return typeof r!="string"||r.includes("-")?!1:!!(NK.indexOf(r)>-1||/[A-Z]/u.test(r))}function G3(r){const e=[{},{}];return r==null||r.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function NT(r,e,t,n){if(typeof e=="function"){const[i,s]=G3(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=G3(n);e=e(t!==void 0?t:r.custom,i,s)}return e}const Yb=r=>Array.isArray(r),PK=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),LK=r=>Yb(r)?r[r.length-1]||0:r,Is=r=>!!(r&&r.getVelocity);function d_(r){const e=Is(r)?r.get():r;return PK(e)?e.toValue():e}function kK({scrapeMotionValuesFromProps:r,createRenderState:e,onUpdate:t},n,i,s){const o={latestValues:OK(n,i,s,r),renderState:e()};return t&&(o.onMount=l=>t({props:n,current:l,...o}),o.onUpdate=l=>t(l)),o}const NB=r=>(e,t)=>{const n=Ce.useContext(sx),i=Ce.useContext(ix),s=()=>kK(r,e,n,i);return t?s():ST(s)};function OK(r,e,t,n){const i={},s=n(r,{});for(const _ in s)i[_]=d_(s[_]);let{initial:o,animate:l}=r;const c=ax(r),d=TB(r);e&&d&&!c&&r.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const w=h?l:o;if(w&&typeof w!="boolean"&&!ox(w)){const _=Array.isArray(w)?w:[w];for(let x=0;x<_.length;x++){const A=NT(r,_[x]);if(A){const{transitionEnd:L,transition:N,...C}=A;for(const D in C){let k=C[D];if(Array.isArray(k)){const F=h?k.length-1:0;k=k[F]}k!==null&&(i[D]=k)}for(const D in L)i[D]=L[D]}}}return i}const N0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fd=new Set(N0),PB=r=>e=>typeof e=="string"&&e.startsWith(r),LB=PB("--"),DK=PB("var(--"),PT=r=>DK(r)?BK.test(r.split("/*")[0].trim()):!1,BK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kB=(r,e)=>e&&typeof r=="number"?e.transform(r):r,Gu=(r,e,t)=>t>e?e:t<r?r:t,P0={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Gg={...P0,transform:r=>Gu(0,1,r)},nw={...P0,default:1},Ay=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),jc=Ay("deg"),Tl=Ay("%"),kn=Ay("px"),UK=Ay("vh"),FK=Ay("vw"),j3={...Tl,parse:r=>Tl.parse(r)/100,transform:r=>Tl.transform(r*100)},zK={borderWidth:kn,borderTopWidth:kn,borderRightWidth:kn,borderBottomWidth:kn,borderLeftWidth:kn,borderRadius:kn,radius:kn,borderTopLeftRadius:kn,borderTopRightRadius:kn,borderBottomRightRadius:kn,borderBottomLeftRadius:kn,width:kn,maxWidth:kn,height:kn,maxHeight:kn,top:kn,right:kn,bottom:kn,left:kn,padding:kn,paddingTop:kn,paddingRight:kn,paddingBottom:kn,paddingLeft:kn,margin:kn,marginTop:kn,marginRight:kn,marginBottom:kn,marginLeft:kn,backgroundPositionX:kn,backgroundPositionY:kn},WK={rotate:jc,rotateX:jc,rotateY:jc,rotateZ:jc,scale:nw,scaleX:nw,scaleY:nw,scaleZ:nw,skew:jc,skewX:jc,skewY:jc,distance:kn,translateX:kn,translateY:kn,translateZ:kn,x:kn,y:kn,z:kn,perspective:kn,transformPerspective:kn,opacity:Gg,originX:j3,originY:j3,originZ:kn},q3={...P0,transform:Math.round},LT={...zK,...WK,zIndex:q3,size:kn,fillOpacity:Gg,strokeOpacity:Gg,numOctaves:q3},VK={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HK=N0.length;function GK(r,e,t){let n="",i=!0;for(let s=0;s<HK;s++){const o=N0[s],l=r[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const d=kB(l,LT[o]);if(!c){i=!1;const h=VK[o]||o;n+=`${h}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function kT(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let o=!1,l=!1;for(const c in e){const d=e[c];if(fd.has(c)){o=!0;continue}else if(LB(c)){i[c]=d;continue}else{const h=kB(d,LT[c]);c.startsWith("origin")?(l=!0,s[c]=h):n[c]=h}}if(e.transform||(o||t?n.transform=GK(e,r.transform,t):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;n.transformOrigin=`${c} ${d} ${h}`}}const jK={offset:"stroke-dashoffset",array:"stroke-dasharray"},qK={offset:"strokeDashoffset",array:"strokeDasharray"};function KK(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?jK:qK;r[s.offset]=kn.transform(-n);const o=kn.transform(e),l=kn.transform(t);r[s.array]=`${o} ${l}`}function K3(r,e,t){return typeof r=="string"?r:kn.transform(e+t*r)}function YK(r,e,t){const n=K3(e,r.x,r.width),i=K3(t,r.y,r.height);return`${n} ${i}`}function OT(r,{attrX:e,attrY:t,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,w){if(kT(r,d,w),h){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:_,style:x,dimensions:A}=r;_.transform&&(A&&(x.transform=_.transform),delete _.transform),A&&(i!==void 0||s!==void 0||x.transform)&&(x.transformOrigin=YK(A,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),n!==void 0&&(_.scale=n),o!==void 0&&KK(_,o,l,c,!1)}const DT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),OB=()=>({...DT(),attrs:{}}),BT=r=>typeof r=="string"&&r.toLowerCase()==="svg";function DB(r,{style:e,vars:t},n,i){Object.assign(r.style,e,i&&i.getProjectionStyles(n));for(const s in t)r.style.setProperty(s,t[s])}const BB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function UB(r,e,t,n){DB(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(BB.has(i)?i:RT(i),e.attrs[i])}const W_={};function XK(r){Object.assign(W_,r)}function FB(r,{layout:e,layoutId:t}){return fd.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!W_[r]||r==="opacity")}function UT(r,e,t){var n;const{style:i}=r,s={};for(const o in i)(Is(i[o])||e.style&&Is(e.style[o])||FB(o,r)||((n=t==null?void 0:t.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function zB(r,e,t){const n=UT(r,e,t);for(const i in r)if(Is(r[i])||Is(e[i])){const s=N0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}function $K(r,e){try{e.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Y3=["x","y","width","height","cx","cy","r"],ZK={useVisualState:NB({scrapeMotionValuesFromProps:zB,createRenderState:OB,onUpdate:({props:r,prevProps:e,current:t,renderState:n,latestValues:i})=>{if(!t)return;let s=!!r.drag;if(!s){for(const l in i)if(fd.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<Y3.length;l++){const c=Y3[l];r[c]!==e[c]&&(o=!0)}o&&Hr.read(()=>{$K(t,n),Hr.render(()=>{OT(n,i,BT(t.tagName),r.transformTemplate),UB(t,n)})})}})},QK={useVisualState:NB({scrapeMotionValuesFromProps:UT,createRenderState:DT})};function WB(r,e,t){for(const n in e)!Is(e[n])&&!FB(n,t)&&(r[n]=e[n])}function JK({transformTemplate:r},e){return Ce.useMemo(()=>{const t=DT();return kT(t,e,r),Object.assign({},t.vars,t.style)},[e])}function eY(r,e){const t=r.style||{},n={};return WB(n,t,r),Object.assign(n,JK(r,e)),n}function tY(r,e){const t={},n=eY(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}function nY(r,e,t,n){const i=Ce.useMemo(()=>{const s=OB();return OT(s,e,BT(n),r.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};WB(s,r.style,r),i.style={...s,...i.style}}return i}function rY(r=!1){return(t,n,i,{latestValues:s},o)=>{const c=(IT(t)?nY:tY)(n,s,o,t),d=vK(n,typeof t=="string",r),h=t!==Ce.Fragment?{...d,...c,ref:i}:{},{children:w}=n,_=Ce.useMemo(()=>Is(w)?w.get():w,[w]);return Ce.createElement(t,{...h,children:_})}}function iY(r,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...IT(n)?ZK:QK,preloadedFeatures:r,useRender:rY(i),createVisualElement:e,Component:n};return TK(o)}}function VB(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}function lx(r,e,t){const n=r.getProps();return NT(n,e,t!==void 0?t:n.custom,r)}const sY=bT(()=>window.ScrollTimeline!==void 0);class oY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(i=>{if(sY()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class aY extends oY{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function FT(r,e){return r?r[e]||r.default||r:void 0}const Xb=2e4;function HB(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<Xb;)e+=t,n=r.next(e);return e>=Xb?1/0:e}function zT(r){return typeof r=="function"}function X3(r,e){r.timeline=e,r.onfinish=null}const WT=r=>Array.isArray(r)&&typeof r[0]=="number",lY={linearEasing:void 0};function uY(r,e){const t=bT(r);return()=>{var n;return(n=lY[e])!==null&&n!==void 0?n:t()}}const V_=uY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),GB=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=r(y0(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function jB(r){return!!(typeof r=="function"&&V_()||!r||typeof r=="string"&&(r in $b||V_())||WT(r)||Array.isArray(r)&&r.every(jB))}const lg=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,$b={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lg([0,.65,.55,1]),circOut:lg([.55,0,1,.45]),backIn:lg([.31,.01,.66,-.59]),backOut:lg([.33,1.53,.69,.99])};function qB(r,e){if(r)return typeof r=="function"&&V_()?GB(r,e):WT(r)?lg(r):Array.isArray(r)?r.map(t=>qB(t,e)||$b.easeOut):$b[r]}const Ba={x:!1,y:!1};function KB(){return Ba.x||Ba.y}function cY(r,e,t){var n;if(r instanceof Element)return[r];if(typeof r=="string"){let i=document;const s=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(r);return s?Array.from(s):[]}return Array.from(r)}function YB(r,e){const t=cY(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function $3(r){return e=>{e.pointerType==="touch"||KB()||r(e)}}function fY(r,e,t={}){const[n,i,s]=YB(r,t),o=$3(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const h=$3(w=>{d(w),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,i)});return n.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const XB=(r,e)=>e?r===e?!0:XB(r,e.parentElement):!1,VT=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,hY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dY(r){return hY.has(r.tagName)||r.tabIndex!==-1}const ug=new WeakSet;function Z3(r){return e=>{e.key==="Enter"&&r(e)}}function KM(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const pY=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=Z3(()=>{if(ug.has(t))return;KM(t,"down");const i=Z3(()=>{KM(t,"up")}),s=()=>KM(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function Q3(r){return VT(r)&&!KB()}function mY(r,e,t={}){const[n,i,s]=YB(r,t),o=l=>{const c=l.currentTarget;if(!Q3(l)||ug.has(c))return;ug.add(c);const d=e(l),h=(x,A)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",_),!(!Q3(x)||!ug.has(c))&&(ug.delete(c),typeof d=="function"&&d(x,{success:A}))},w=x=>{h(x,t.useGlobalTarget||XB(c,x.target))},_=x=>{h(x,!1)};window.addEventListener("pointerup",w,i),window.addEventListener("pointercancel",_,i)};return n.forEach(l=>{!dY(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",d=>pY(d,i),i)}),s}function gY(r){return r==="x"||r==="y"?Ba[r]?null:(Ba[r]=!0,()=>{Ba[r]=!1}):Ba.x||Ba.y?null:(Ba.x=Ba.y=!0,()=>{Ba.x=Ba.y=!1})}const $B=new Set(["width","height","top","left","right","bottom",...N0]);let p_;function yY(){p_=void 0}const Rl={now:()=>(p_===void 0&&Rl.set(us.isProcessing||hK.useManualTiming?us.timestamp:performance.now()),p_),set:r=>{p_=r,queueMicrotask(yY)}};function HT(r,e){r.indexOf(e)===-1&&r.push(e)}function GT(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}class jT{constructor(){this.subscriptions=[]}add(e){return HT(this.subscriptions,e),()=>GT(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ZB(r,e){return e?r*(1e3/e):0}const J3=30,vY=r=>!isNaN(parseFloat(r));class wY{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=Rl.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Rl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=vY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jT);const n=this.events[e].add(t);return e==="change"?()=>{n(),Hr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Rl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>J3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,J3);return ZB(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jg(r,e){return new wY(r,e)}function _Y(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,jg(t))}function xY(r,e){const t=lx(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const o in s){const l=LK(s[o]);_Y(r,o,l)}}function SY(r){return!!(Is(r)&&r.add)}function Zb(r,e){const t=r.getValue("willChange");if(SY(t))return t.add(e)}function QB(r){return r.props[RB]}const JB=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,MY=1e-7,EY=12;function bY(r,e,t,n,i){let s,o,l=0;do o=e+(t-e)/2,s=JB(o,n,i)-r,s>0?t=o:e=o;while(Math.abs(s)>MY&&++l<EY);return o}function Ty(r,e,t,n){if(r===e&&t===n)return zo;const i=s=>bY(s,0,1,r,t);return s=>s===0||s===1?s:JB(i(s),e,n)}const eU=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,tU=r=>e=>1-r(1-e),nU=Ty(.33,1.53,.69,.99),qT=tU(nU),rU=eU(qT),iU=r=>(r*=2)<1?.5*qT(r):.5*(2-Math.pow(2,-10*(r-1))),KT=r=>1-Math.sin(Math.acos(r)),sU=tU(KT),oU=eU(KT),aU=r=>/^0[^.\s]+$/u.test(r);function AY(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||aU(r):!0}const vg=r=>Math.round(r*1e5)/1e5,YT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TY(r){return r==null}const RY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,XT=(r,e)=>t=>!!(typeof t=="string"&&RY.test(t)&&t.startsWith(r)||e&&!TY(t)&&Object.prototype.hasOwnProperty.call(t,e)),lU=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,o,l]=n.match(YT);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},CY=r=>Gu(0,255,r),YM={...P0,transform:r=>Math.round(CY(r))},Dh={test:XT("rgb","red"),parse:lU("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+YM.transform(r)+", "+YM.transform(e)+", "+YM.transform(t)+", "+vg(Gg.transform(n))+")"};function IY(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Qb={test:XT("#"),parse:IY,transform:Dh.transform},Xp={test:XT("hsl","hue"),parse:lU("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+Tl.transform(vg(e))+", "+Tl.transform(vg(t))+", "+vg(Gg.transform(n))+")"},Cs={test:r=>Dh.test(r)||Qb.test(r)||Xp.test(r),parse:r=>Dh.test(r)?Dh.parse(r):Xp.test(r)?Xp.parse(r):Qb.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Dh.transform(r):Xp.transform(r)},NY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function PY(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(YT))===null||e===void 0?void 0:e.length)||0)+(((t=r.match(NY))===null||t===void 0?void 0:t.length)||0)>0}const uU="number",cU="color",LY="var",kY="var(",eN="${}",OY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function qg(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(OY,c=>(Cs.test(c)?(n.color.push(s),i.push(cU),t.push(Cs.parse(c))):c.startsWith(kY)?(n.var.push(s),i.push(LY),t.push(c)):(n.number.push(s),i.push(uU),t.push(parseFloat(c))),++s,eN)).split(eN);return{values:t,split:l,indexes:n,types:i}}function fU(r){return qg(r).values}function hU(r){const{split:e,types:t}=qg(r),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const l=t[o];l===uU?s+=vg(i[o]):l===cU?s+=Cs.transform(i[o]):s+=i[o]}return s}}const DY=r=>typeof r=="number"?0:r;function BY(r){const e=fU(r);return hU(r)(e.map(DY))}const rf={test:PY,parse:fU,createTransformer:hU,getAnimatableNone:BY},UY=new Set(["brightness","contrast","saturate","opacity"]);function FY(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(YT)||[];if(!n)return r;const i=t.replace(n,"");let s=UY.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const zY=/\b([a-z-]*)\(.*?\)/gu,Jb={...rf,getAnimatableNone:r=>{const e=r.match(zY);return e?e.map(FY).join(" "):r}},WY={...LT,color:Cs,backgroundColor:Cs,outlineColor:Cs,fill:Cs,stroke:Cs,borderColor:Cs,borderTopColor:Cs,borderRightColor:Cs,borderBottomColor:Cs,borderLeftColor:Cs,filter:Jb,WebkitFilter:Jb},$T=r=>WY[r];function dU(r,e){let t=$T(r);return t!==Jb&&(t=rf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const VY=new Set(["auto","none","0"]);function HY(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!VY.has(s)&&qg(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=dU(t,i)}const tN=r=>r===P0||r===kn,nN=(r,e)=>parseFloat(r.split(", ")[e]),rN=(r,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return nN(i[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?nN(s[1],r):0}},GY=new Set(["x","y","z"]),jY=N0.filter(r=>!GY.has(r));function qY(r){const e=[];return jY.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const w0={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:rN(4,13),y:rN(5,14)};w0.translateX=w0.x;w0.translateY=w0.y;const Hh=new Set;let eA=!1,tA=!1;function pU(){if(tA){const r=Array.from(Hh).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=qY(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,o])=>{var l;(l=n.getValue(s))===null||l===void 0||l.set(o)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}tA=!1,eA=!1,Hh.forEach(r=>r.complete()),Hh.clear()}function mU(){Hh.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(tA=!0)})}function KY(){mU(),pU()}class ZT{constructor(e,t,n,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Hh.add(this),eA||(eA=!0,Hr.read(mU),Hr.resolveKeyframes(pU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const c=n.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Hh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Hh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gU=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),YY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XY(r){const e=YY.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function yU(r,e,t=1){const[n,i]=XY(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return gU(o)?parseFloat(o):o}return PT(i)?yU(i,e,t+1):i}const vU=r=>e=>e.test(r),$Y={test:r=>r==="auto",parse:r=>r},wU=[P0,kn,Tl,jc,FK,UK,$Y],iN=r=>wU.find(vU(r));class _U extends ZT{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),PT(d))){const h=yU(d,t.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!$B.has(n)||e.length!==2)return;const[i,s]=e,o=iN(i),l=iN(s);if(o!==l)if(tN(o)&&tN(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)AY(e[i])&&n.push(i);n.length&&HY(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=w0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=w0[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const sN=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(rf.test(r)||r==="0")&&!r.startsWith("url("));function ZY(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function QY(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],o=sN(i,e),l=sN(s,e);return!o||!l?!1:ZY(r)||(t==="spring"||zT(t))&&n}const JY=r=>r!==null;function ux(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(JY),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const eX=40;class xU{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Rl.now(),this.options={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>eX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&KY(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Rl.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!QY(e,n,i,s))if(o)this.options.duration=0;else{c&&c(ux(e,this.options,t)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zr=(r,e,t)=>r+(e-r)*t;function XM(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function tX({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;i=XM(c,l,r+1/3),s=XM(c,l,r),o=XM(c,l,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function H_(r,e){return t=>t>0?e:r}const $M=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},nX=[Qb,Dh,Xp],rX=r=>nX.find(e=>e.test(r));function oN(r){const e=rX(r);if(!e)return!1;let t=e.parse(r);return e===Xp&&(t=tX(t)),t}const aN=(r,e)=>{const t=oN(r),n=oN(e);if(!t||!n)return H_(r,e);const i={...t};return s=>(i.red=$M(t.red,n.red,s),i.green=$M(t.green,n.green,s),i.blue=$M(t.blue,n.blue,s),i.alpha=Zr(t.alpha,n.alpha,s),Dh.transform(i))},iX=(r,e)=>t=>e(r(t)),Ry=(...r)=>r.reduce(iX),nA=new Set(["none","hidden"]);function sX(r,e){return nA.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function oX(r,e){return t=>Zr(r,e,t)}function QT(r){return typeof r=="number"?oX:typeof r=="string"?PT(r)?H_:Cs.test(r)?aN:uX:Array.isArray(r)?SU:typeof r=="object"?Cs.test(r)?aN:aX:H_}function SU(r,e){const t=[...r],n=t.length,i=r.map((s,o)=>QT(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=i[o](s);return t}}function aX(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=QT(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function lX(r,e){var t;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=r.indexes[o][i[o]],c=(t=r.values[l])!==null&&t!==void 0?t:0;n[s]=c,i[o]++}return n}const uX=(r,e)=>{const t=rf.createTransformer(e),n=qg(r),i=qg(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?nA.has(r)&&!i.values.length||nA.has(e)&&!n.values.length?sX(r,e):Ry(SU(lX(n,i),i.values),t):H_(r,e)};function MU(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Zr(r,e,t):QT(r)(r,e)}const cX=5;function EU(r,e,t){const n=Math.max(e-cX,0);return ZB(t-r(n),e-n)}const oi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ZM=.001;function fX({duration:r=oi.duration,bounce:e=oi.bounce,velocity:t=oi.velocity,mass:n=oi.mass}){let i,s,o=1-e;o=Gu(oi.minDamping,oi.maxDamping,o),r=Gu(oi.minDuration,oi.maxDuration,zu(r)),o<1?(i=d=>{const h=d*o,w=h*r,_=h-t,x=rA(d,o),A=Math.exp(-w);return ZM-_/x*A},s=d=>{const w=d*o*r,_=w*t+t,x=Math.pow(o,2)*Math.pow(d,2)*r,A=Math.exp(-w),L=rA(Math.pow(d,2),o);return(-i(d)+ZM>0?-1:1)*((_-x)*A)/L}):(i=d=>{const h=Math.exp(-d*r),w=(d-t)*r+1;return-ZM+h*w},s=d=>{const h=Math.exp(-d*r),w=(t-d)*(r*r);return h*w});const l=5/r,c=dX(i,s,l);if(r=Fu(r),isNaN(c))return{stiffness:oi.stiffness,damping:oi.damping,duration:r};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:r}}}const hX=12;function dX(r,e,t){let n=t;for(let i=1;i<hX;i++)n=n-r(n)/e(n);return n}function rA(r,e){return r*Math.sqrt(1-e*e)}const pX=["duration","bounce"],mX=["stiffness","damping","mass"];function lN(r,e){return e.some(t=>r[t]!==void 0)}function gX(r){let e={velocity:oi.velocity,stiffness:oi.stiffness,damping:oi.damping,mass:oi.mass,isResolvedFromDuration:!1,...r};if(!lN(r,mX)&&lN(r,pX))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*Gu(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:oi.mass,stiffness:i,damping:s}}else{const t=fX(r);e={...e,...t,mass:oi.mass},e.isResolvedFromDuration=!0}return e}function bU(r=oi.visualDuration,e=oi.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:w,velocity:_,isResolvedFromDuration:x}=gX({...t,velocity:-zu(t.velocity||0)}),A=_||0,L=d/(2*Math.sqrt(c*h)),N=o-s,C=zu(Math.sqrt(c/h)),D=Math.abs(N)<5;n||(n=D?oi.restSpeed.granular:oi.restSpeed.default),i||(i=D?oi.restDelta.granular:oi.restDelta.default);let k;if(L<1){const Q=rA(C,L);k=G=>{const Y=Math.exp(-L*C*G);return o-Y*((A+L*C*N)/Q*Math.sin(Q*G)+N*Math.cos(Q*G))}}else if(L===1)k=Q=>o-Math.exp(-C*Q)*(N+(A+C*N)*Q);else{const Q=C*Math.sqrt(L*L-1);k=G=>{const Y=Math.exp(-L*C*G),ee=Math.min(Q*G,300);return o-Y*((A+L*C*N)*Math.sinh(ee)+Q*N*Math.cosh(ee))/Q}}const F={calculatedDuration:x&&w||null,next:Q=>{const G=k(Q);if(x)l.done=Q>=w;else{let Y=0;L<1&&(Y=Q===0?Fu(A):EU(k,Q,G));const ee=Math.abs(Y)<=n,te=Math.abs(o-G)<=i;l.done=ee&&te}return l.value=l.done?o:G,l},toString:()=>{const Q=Math.min(HB(F),Xb),G=GB(Y=>F.next(Q*Y).value,Q,30);return Q+"ms "+G}};return F}function uN({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const w=r[0],_={done:!1,value:w},x=ee=>l!==void 0&&ee<l||c!==void 0&&ee>c,A=ee=>l===void 0?c:c===void 0||Math.abs(l-ee)<Math.abs(c-ee)?l:c;let L=t*e;const N=w+L,C=o===void 0?N:o(N);C!==N&&(L=C-w);const D=ee=>-L*Math.exp(-ee/n),k=ee=>C+D(ee),F=ee=>{const te=D(ee),U=k(ee);_.done=Math.abs(te)<=d,_.value=_.done?C:U};let Q,G;const Y=ee=>{x(_.value)&&(Q=ee,G=bU({keyframes:[_.value,A(_.value)],velocity:EU(k,ee,_.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return Y(0),{calculatedDuration:null,next:ee=>{let te=!1;return!G&&Q===void 0&&(te=!0,F(ee),Y(ee)),Q!==void 0&&ee>=Q?G.next(ee-Q):(!te&&F(ee),_)}}}const yX=Ty(.42,0,1,1),vX=Ty(0,0,.58,1),AU=Ty(.42,0,.58,1),wX=r=>Array.isArray(r)&&typeof r[0]!="number",_X={linear:zo,easeIn:yX,easeInOut:AU,easeOut:vX,circIn:KT,circInOut:oU,circOut:sU,backIn:qT,backInOut:rU,backOut:nU,anticipate:iU},cN=r=>{if(WT(r)){MB(r.length===4);const[e,t,n,i]=r;return Ty(e,t,n,i)}else if(typeof r=="string")return _X[r];return r};function xX(r,e,t){const n=[],i=t||MU,s=r.length-1;for(let o=0;o<s;o++){let l=i(r[o],r[o+1]);if(e){const c=Array.isArray(e)?e[o]||zo:e;l=Ry(c,l)}n.push(l)}return n}function SX(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(MB(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const l=xX(e,n,i),c=l.length,d=h=>{if(o&&h<r[0])return e[0];let w=0;if(c>1)for(;w<r.length-2&&!(h<r[w+1]);w++);const _=y0(r[w],r[w+1],h);return l[w](_)};return t?h=>d(Gu(r[0],r[s-1],h)):d}function MX(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=y0(0,e,n);r.push(Zr(t,1,i))}}function EX(r){const e=[0];return MX(e,r.length-1),e}function bX(r,e){return r.map(t=>t*e)}function AX(r,e){return r.map(()=>e||AU).splice(0,r.length-1)}function G_({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=wX(n)?n.map(cN):cN(n),s={done:!1,value:e[0]},o=bX(t&&t.length===e.length?t:EX(e),r),l=SX(o,e,{ease:Array.isArray(i)?i:AX(e,i)});return{calculatedDuration:r,next:c=>(s.value=l(c),s.done=c>=r,s)}}const TX=r=>{const e=({timestamp:t})=>r(t);return{start:()=>Hr.update(e,!0),stop:()=>nf(e),now:()=>us.isProcessing?us.timestamp:Rl.now()}},RX={decay:uN,inertia:uN,tween:G_,keyframes:G_,spring:bU},CX=r=>r/100;class JT extends xU{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:n,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||ZT,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(s,l,t,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,l=zT(t)?t:RX[t]||G_;let c,d;l!==G_&&typeof e[0]!="number"&&(c=Ry(CX,MU(e[0],e[1])),e=[0,100]);const h=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=HB(h));const{calculatedDuration:w}=h,_=w+i,x=_*(n+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:w,resolvedDuration:_,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:ee}=this.options;return{done:!0,value:ee[ee.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:w}=n;if(this.startTime===null)return s.next(0);const{delay:_,repeat:x,repeatType:A,repeatDelay:L,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const C=this.currentTime-_*(this.speed>=0?1:-1),D=this.speed>=0?C<0:C>h;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let k=this.currentTime,F=s;if(x){const ee=Math.min(this.currentTime,h)/w;let te=Math.floor(ee),U=ee%1;!U&&ee>=1&&(U=1),U===1&&te--,te=Math.min(te,x+1),!!(te%2)&&(A==="reverse"?(U=1-U,L&&(U-=L/w)):A==="mirror"&&(F=o)),k=Gu(0,1,U)*w}const Q=D?{done:!1,value:c[0]}:F.next(k);l&&(Q.value=l(Q.value));let{done:G}=Q;!D&&d!==null&&(G=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const Y=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return Y&&i!==void 0&&(Q.value=ux(c,this.options,i)),N&&N(Q.value),Y&&this.finish(),Q}get duration(){const{resolved:e}=this;return e?zu(e.calculatedDuration):0}get time(){return zu(this.currentTime)}set time(e){e=Fu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=zu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=TX,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const IX=new Set(["opacity","clipPath","filter","transform"]);function NX(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[e]:t};c&&(d.offset=c);const h=qB(l,i);return Array.isArray(h)&&(d.easing=h),r.animate(d,{delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const PX=bT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),j_=10,LX=2e4;function kX(r){return zT(r.type)||r.type==="spring"||!jB(r.ease)}function OX(r,e){const t=new JT({...e,keyframes:r,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:r[0]};const i=[];let s=0;for(;!n.done&&s<LX;)n=t.sample(s),i.push(n.value),s+=j_;return{times:void 0,keyframes:i,duration:s-j_,ease:"linear"}}const TU={anticipate:iU,backInOut:rU,circInOut:oU};function DX(r){return r in TU}class fN extends xU{constructor(e){super(e);const{name:t,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new _U(s,(o,l)=>this.onKeyframesResolved(o,l),t,n,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:i,ease:s,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&V_()&&DX(s)&&(s=TU[s]),kX(this.options)){const{onComplete:w,onUpdate:_,motionValue:x,element:A,...L}=this.options,N=OX(e,L);e=N.keyframes,e.length===1&&(e[1]=e[0]),n=N.duration,i=N.times,s=N.ease,o="keyframes"}const h=NX(l.owner.current,c,e,{...this.options,duration:n,times:i,ease:s});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(X3(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:w}=this.options;l.set(ux(e,this.options,t)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:n,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return zu(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return zu(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=Fu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return zo;const{animation:n}=t;X3(n,e)}return zo}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:w,element:_,...x}=this.options,A=new JT({...x,keyframes:n,duration:i,type:s,ease:o,times:l,isGenerator:!0}),L=Fu(this.time);d.setWithVelocity(A.sample(L-j_).value,A.sample(L).value,j_)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:o,type:l}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return PX()&&n&&IX.has(n)&&!c&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}}const BX={type:"spring",stiffness:500,damping:25,restSpeed:10},UX=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),FX={type:"keyframes",duration:.8},zX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WX=(r,{keyframes:e})=>e.length>2?FX:fd.has(r)?r.startsWith("scale")?UX(e[1]):BX:zX;function VX({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const eR=(r,e,t,n={},i,s)=>o=>{const l=FT(n,r)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Fu(c);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:_=>{e.set(_),l.onUpdate&&l.onUpdate(_)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:r,motionValue:e,element:s?void 0:i};VX(l)||(h={...h,...WX(r,h)}),h.duration&&(h.duration=Fu(h.duration)),h.repeatDelay&&(h.repeatDelay=Fu(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let w=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(w=!0)),w&&!s&&e.get()!==void 0){const _=ux(h.keyframes,l);if(_!==void 0)return Hr.update(()=>{h.onUpdate(_),h.onComplete()}),new aY([])}return!s&&fN.supports(h)?new fN(h):new JT(h)};function HX({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function RU(r,e,{delay:t=0,transitionOverride:n,type:i}={}){var s;let{transition:o=r.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(o=n);const d=[],h=i&&r.animationState&&r.animationState.getState()[i];for(const w in c){const _=r.getValue(w,(s=r.latestValues[w])!==null&&s!==void 0?s:null),x=c[w];if(x===void 0||h&&HX(h,w))continue;const A={delay:t,...FT(o||{},w)};let L=!1;if(window.MotionHandoffAnimation){const C=QB(r);if(C){const D=window.MotionHandoffAnimation(C,w,Hr);D!==null&&(A.startTime=D,L=!0)}}Zb(r,w),_.start(eR(w,_,x,r.shouldReduceMotion&&$B.has(w)?{type:!1}:A,r,L));const N=_.animation;N&&d.push(N)}return l&&Promise.all(d).then(()=>{Hr.update(()=>{l&&xY(r,l)})}),d}function iA(r,e,t={}){var n;const i=lx(r,e,t.type==="exit"?(n=r.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=r.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(RU(r,i,t)):()=>Promise.resolve(),l=r.variantChildren&&r.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:w,staggerDirection:_}=s;return GX(r,e,h+d,w,_,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(t.delay)])}function GX(r,e,t=0,n=0,i=1,s){const o=[],l=(r.variantChildren.size-1)*n,c=i===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(r.variantChildren).sort(jX).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(iA(d,e,{...s,delay:t+c(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function jX(r,e){return r.sortNodePosition(e)}function qX(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>iA(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=iA(r,e,t);else{const i=typeof e=="function"?lx(r,e,t.custom):e;n=Promise.all(RU(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}const KX=TT.length;function CU(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?CU(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<KX;t++){const n=TT[t],i=r.props[n];(Hg(i)||i===!1)&&(e[n]=i)}return e}const YX=[...AT].reverse(),XX=AT.length;function $X(r){return e=>Promise.all(e.map(({animation:t,options:n})=>qX(r,t,n)))}function ZX(r){let e=$X(r),t=hN(),n=!0;const i=c=>(d,h)=>{var w;const _=lx(r,h,c==="exit"?(w=r.presenceContext)===null||w===void 0?void 0:w.custom:void 0);if(_){const{transition:x,transitionEnd:A,...L}=_;d={...d,...L,...A}}return d};function s(c){e=c(r)}function o(c){const{props:d}=r,h=CU(r.parent)||{},w=[],_=new Set;let x={},A=1/0;for(let N=0;N<XX;N++){const C=YX[N],D=t[C],k=d[C]!==void 0?d[C]:h[C],F=Hg(k),Q=C===c?D.isActive:null;Q===!1&&(A=N);let G=k===h[C]&&k!==d[C]&&F;if(G&&n&&r.manuallyAnimateOnMount&&(G=!1),D.protectedKeys={...x},!D.isActive&&Q===null||!k&&!D.prevProp||ox(k)||typeof k=="boolean")continue;const Y=QX(D.prevProp,k);let ee=Y||C===c&&D.isActive&&!G&&F||N>A&&F,te=!1;const U=Array.isArray(k)?k:[k];let V=U.reduce(i(C),{});Q===!1&&(V={});const{prevResolvedValues:K={}}=D,E={...K,...V},a=R=>{ee=!0,_.has(R)&&(te=!0,_.delete(R)),D.needsAnimating[R]=!0;const T=r.getValue(R);T&&(T.liveStyle=!1)};for(const R in E){const T=V[R],P=K[R];if(x.hasOwnProperty(R))continue;let I=!1;Yb(T)&&Yb(P)?I=!VB(T,P):I=T!==P,I?T!=null?a(R):_.add(R):T!==void 0&&_.has(R)?a(R):D.protectedKeys[R]=!0}D.prevProp=k,D.prevResolvedValues=V,D.isActive&&(x={...x,...V}),n&&r.blockInitialAnimation&&(ee=!1),ee&&(!(G&&Y)||te)&&w.push(...U.map(R=>({animation:R,options:{type:C}})))}if(_.size){const N={};_.forEach(C=>{const D=r.getBaseTarget(C),k=r.getValue(C);k&&(k.liveStyle=!0),N[C]=D??null}),w.push({animation:N})}let L=!!w.length;return n&&(d.initial===!1||d.initial===d.animate)&&!r.manuallyAnimateOnMount&&(L=!1),n=!1,L?e(w):Promise.resolve()}function l(c,d){var h;if(t[c].isActive===d)return Promise.resolve();(h=r.variantChildren)===null||h===void 0||h.forEach(_=>{var x;return(x=_.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),t[c].isActive=d;const w=o(c);for(const _ in t)t[_].protectedKeys={};return w}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=hN(),n=!0}}}function QX(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!VB(e,r):!1}function nh(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hN(){return{animate:nh(!0),whileInView:nh(),whileHover:nh(),whileTap:nh(),whileDrag:nh(),whileFocus:nh(),exit:nh()}}class lf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class JX extends lf{constructor(e){super(e),e.animationState||(e.animationState=ZX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ox(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let e$=0;class t$ extends lf{constructor(){super(...arguments),this.id=e$++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const n$={animation:{Feature:JX},exit:{Feature:t$}};function Kg(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function Cy(r){return{point:{x:r.pageX,y:r.pageY}}}const r$=r=>e=>VT(e)&&r(e,Cy(e));function wg(r,e,t,n){return Kg(r,e,r$(t),n)}const dN=(r,e)=>Math.abs(r-e);function i$(r,e){const t=dN(r.x,e.x),n=dN(r.y,e.y);return Math.sqrt(t**2+n**2)}class IU{constructor(e,t,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=JM(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,x=i$(w.offset,{x:0,y:0})>=3;if(!_&&!x)return;const{point:A}=w,{timestamp:L}=us;this.history.push({...A,timestamp:L});const{onStart:N,onMove:C}=this.handlers;_||(N&&N(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,w)},this.handlePointerMove=(w,_)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=QM(_,this.transformPagePoint),Hr.update(this.updatePoint,!0)},this.handlePointerUp=(w,_)=>{this.end();const{onEnd:x,onSessionEnd:A,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=JM(w.type==="pointercancel"?this.lastMoveEventInfo:QM(_,this.transformPagePoint),this.history);this.startEvent&&x&&x(w,N),A&&A(w,N)},!VT(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const o=Cy(e),l=QM(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=us;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=t;h&&h(e,JM(l,this.history)),this.removeListeners=Ry(wg(this.contextWindow,"pointermove",this.handlePointerMove),wg(this.contextWindow,"pointerup",this.handlePointerUp),wg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nf(this.updatePoint)}}function QM(r,e){return e?{point:e(r.point)}:r}function pN(r,e){return{x:r.x-e.x,y:r.y-e.y}}function JM({point:r},e){return{point:r,delta:pN(r,NU(e)),offset:pN(r,s$(e)),velocity:o$(e,.1)}}function s$(r){return r[0]}function NU(r){return r[r.length-1]}function o$(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=NU(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>Fu(e)));)t--;if(!n)return{x:0,y:0};const s=zu(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const PU=1e-4,a$=1-PU,l$=1+PU,LU=.01,u$=0-LU,c$=0+LU;function Vo(r){return r.max-r.min}function f$(r,e,t){return Math.abs(r-e)<=t}function mN(r,e,t,n=.5){r.origin=n,r.originPoint=Zr(e.min,e.max,r.origin),r.scale=Vo(t)/Vo(e),r.translate=Zr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=a$&&r.scale<=l$||isNaN(r.scale))&&(r.scale=1),(r.translate>=u$&&r.translate<=c$||isNaN(r.translate))&&(r.translate=0)}function _g(r,e,t,n){mN(r.x,e.x,t.x,n?n.originX:void 0),mN(r.y,e.y,t.y,n?n.originY:void 0)}function gN(r,e,t){r.min=t.min+e.min,r.max=r.min+Vo(e)}function h$(r,e,t){gN(r.x,e.x,t.x),gN(r.y,e.y,t.y)}function yN(r,e,t){r.min=e.min-t.min,r.max=r.min+Vo(e)}function xg(r,e,t){yN(r.x,e.x,t.x),yN(r.y,e.y,t.y)}function d$(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Zr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Zr(t,r,n.max):Math.min(r,t)),r}function vN(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function p$(r,{top:e,left:t,bottom:n,right:i}){return{x:vN(r.x,t,i),y:vN(r.y,e,n)}}function wN(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function m$(r,e){return{x:wN(r.x,e.x),y:wN(r.y,e.y)}}function g$(r,e){let t=.5;const n=Vo(r),i=Vo(e);return i>n?t=y0(e.min,e.max-n,r.min):n>i&&(t=y0(r.min,r.max-i,e.min)),Gu(0,1,t)}function y$(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const sA=.35;function v$(r=sA){return r===!1?r=0:r===!0&&(r=sA),{x:_N(r,"left","right"),y:_N(r,"top","bottom")}}function _N(r,e,t){return{min:xN(r,e),max:xN(r,t)}}function xN(r,e){return typeof r=="number"?r:r[e]||0}const SN=()=>({translate:0,scale:1,origin:0,originPoint:0}),$p=()=>({x:SN(),y:SN()}),MN=()=>({min:0,max:0}),di=()=>({x:MN(),y:MN()});function ia(r){return[r("x"),r("y")]}function kU({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function w$({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function _$(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function eE(r){return r===void 0||r===1}function oA({scale:r,scaleX:e,scaleY:t}){return!eE(r)||!eE(e)||!eE(t)}function gh(r){return oA(r)||OU(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function OU(r){return EN(r.x)||EN(r.y)}function EN(r){return r&&r!=="0%"}function q_(r,e,t){const n=r-t,i=e*n;return t+i}function bN(r,e,t,n,i){return i!==void 0&&(r=q_(r,i,n)),q_(r,t,n)+e}function aA(r,e=0,t=1,n,i){r.min=bN(r.min,e,t,n,i),r.max=bN(r.max,e,t,n,i)}function DU(r,{x:e,y:t}){aA(r.x,e.translate,e.scale,e.originPoint),aA(r.y,t.translate,t.scale,t.originPoint)}const AN=.999999999999,TN=1.0000000000001;function x$(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=t[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Qp(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,DU(r,o)),n&&gh(s.latestValues)&&Qp(r,s.latestValues))}e.x<TN&&e.x>AN&&(e.x=1),e.y<TN&&e.y>AN&&(e.y=1)}function Zp(r,e){r.min=r.min+e,r.max=r.max+e}function RN(r,e,t,n,i=.5){const s=Zr(r.min,r.max,i);aA(r,e,t,s,n)}function Qp(r,e){RN(r.x,e.x,e.scaleX,e.scale,e.originX),RN(r.y,e.y,e.scaleY,e.scale,e.originY)}function BU(r,e){return kU(_$(r.getBoundingClientRect(),e))}function S$(r,e,t){const n=BU(r,t),{scroll:i}=e;return i&&(Zp(n.x,i.offset.x),Zp(n.y,i.offset.y)),n}const UU=({current:r})=>r?r.ownerDocument.defaultView:null,M$=new WeakMap;class E${constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=di(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Cy(h).point)},s=(h,w)=>{const{drag:_,dragPropagation:x,onDragStart:A}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gY(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ia(N=>{let C=this.getAxisMotionValue(N).get()||0;if(Tl.test(C)){const{projection:D}=this.visualElement;if(D&&D.layout){const k=D.layout.layoutBox[N];k&&(C=Vo(k)*(parseFloat(C)/100))}}this.originPoint[N]=C}),A&&Hr.postRender(()=>A(h,w)),Zb(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},o=(h,w)=>{const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:A,onDrag:L}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:N}=w;if(x&&this.currentDirection===null){this.currentDirection=b$(N),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",w.point,N),this.updateAxis("y",w.point,N),this.visualElement.render(),L&&L(h,w)},l=(h,w)=>this.stop(h,w),c=()=>ia(h=>{var w;return this.getAnimationState(h)==="paused"&&((w=this.getAxisMotionValue(h).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new IU(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:UU(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Hr.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!rw(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=d$(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Yp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=p$(i.layoutBox,t):this.constraints=!1,this.elastic=v$(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ia(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=y$(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Yp(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=S$(n,i.root,this.visualElement.getTransformPagePoint());let o=m$(i.layout.layoutBox,s);if(t){const l=t(w$(o));this.hasMutatedConstraints=!!l,l&&(o=kU(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ia(h=>{if(!rw(h,t,this.currentDirection))return;let w=c&&c[h]||{};o&&(w={min:0,max:0});const _=i?200:1e6,x=i?40:1e7,A={type:"inertia",velocity:n?e[h]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...s,...w};return this.startAxisValueAnimation(h,A)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Zb(this.visualElement,e),n.start(eR(e,n,0,t,this.visualElement,!1))}stopAnimation(){ia(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ia(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ia(t=>{const{drag:n}=this.getProps();if(!rw(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[t];s.set(e[t]-Zr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Yp(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ia(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=g$({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ia(o=>{if(!rw(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Zr(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;M$.set(this.visualElement,this);const e=this.visualElement.current,t=wg(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Yp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Hr.read(n);const o=Kg(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ia(h=>{const w=this.getAxisMotionValue(h);w&&(this.originPoint[h]+=c[h].translate,w.set(w.get()+c[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=sA,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function rw(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function b$(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class A$ extends lf{constructor(e){super(e),this.removeGroupControls=zo,this.removeListeners=zo,this.controls=new E$(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zo}unmount(){this.removeGroupControls(),this.removeListeners()}}const CN=r=>(e,t)=>{r&&Hr.postRender(()=>r(e,t))};class T$ extends lf{constructor(){super(...arguments),this.removePointerDownListener=zo}onPointerDown(e){this.session=new IU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UU(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:CN(e),onStart:CN(t),onMove:n,onEnd:(s,o)=>{delete this.session,i&&Hr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=wg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const m_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IN(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Gm={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(kn.test(r))r=parseFloat(r);else return r;const t=IN(r,e.target.x),n=IN(r,e.target.y);return`${t}% ${n}%`}},R$={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=rf.parse(r);if(i.length>5)return n;const s=rf.createTransformer(r),o=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=Zr(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class C$ extends Ce.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;XK(I$),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),m_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Hr.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),CT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FU(r){const[e,t]=xB(),n=Ce.useContext(xT);return Xt.jsx(C$,{...r,layoutGroup:n,switchLayoutGroup:Ce.useContext(CB),isPresent:e,safeToRemove:t})}const I$={borderRadius:{...Gm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gm,borderTopRightRadius:Gm,borderBottomLeftRadius:Gm,borderBottomRightRadius:Gm,boxShadow:R$};function N$(r,e,t){const n=Is(r)?r:jg(r);return n.start(eR("",n,e,t)),n.animation}function P$(r){return r instanceof SVGElement&&r.tagName!=="svg"}const L$=(r,e)=>r.depth-e.depth;class k${constructor(){this.children=[],this.isDirty=!1}add(e){HT(this.children,e),this.isDirty=!0}remove(e){GT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(L$),this.isDirty=!1,this.children.forEach(e)}}function O$(r,e){const t=Rl.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(nf(n),r(s-e))};return Hr.read(n,!0),()=>nf(n)}const zU=["TopLeft","TopRight","BottomLeft","BottomRight"],D$=zU.length,NN=r=>typeof r=="string"?parseFloat(r):r,PN=r=>typeof r=="number"||kn.test(r);function B$(r,e,t,n,i,s){i?(r.opacity=Zr(0,t.opacity!==void 0?t.opacity:1,U$(n)),r.opacityExit=Zr(e.opacity!==void 0?e.opacity:1,0,F$(n))):s&&(r.opacity=Zr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<D$;o++){const l=`border${zU[o]}Radius`;let c=LN(e,l),d=LN(t,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||PN(c)===PN(d)?(r[l]=Math.max(Zr(NN(c),NN(d),n),0),(Tl.test(d)||Tl.test(c))&&(r[l]+="%")):r[l]=d}(e.rotate||t.rotate)&&(r.rotate=Zr(e.rotate||0,t.rotate||0,n))}function LN(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const U$=WU(0,.5,sU),F$=WU(.5,.95,zo);function WU(r,e,t){return n=>n<r?0:n>e?1:t(y0(r,e,n))}function kN(r,e){r.min=e.min,r.max=e.max}function ta(r,e){kN(r.x,e.x),kN(r.y,e.y)}function ON(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function DN(r,e,t,n,i){return r-=e,r=q_(r,1/t,n),i!==void 0&&(r=q_(r,1/i,n)),r}function z$(r,e=0,t=1,n=.5,i,s=r,o=r){if(Tl.test(e)&&(e=parseFloat(e),e=Zr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Zr(s.min,s.max,n);r===s&&(l-=e),r.min=DN(r.min,e,t,l,i),r.max=DN(r.max,e,t,l,i)}function BN(r,e,[t,n,i],s,o){z$(r,e[t],e[n],e[i],e.scale,s,o)}const W$=["x","scaleX","originX"],V$=["y","scaleY","originY"];function UN(r,e,t,n){BN(r.x,e,W$,t?t.x:void 0,n?n.x:void 0),BN(r.y,e,V$,t?t.y:void 0,n?n.y:void 0)}function FN(r){return r.translate===0&&r.scale===1}function VU(r){return FN(r.x)&&FN(r.y)}function zN(r,e){return r.min===e.min&&r.max===e.max}function H$(r,e){return zN(r.x,e.x)&&zN(r.y,e.y)}function WN(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function HU(r,e){return WN(r.x,e.x)&&WN(r.y,e.y)}function VN(r){return Vo(r.x)/Vo(r.y)}function HN(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class G${constructor(){this.members=[]}add(e){HT(this.members,e),e.scheduleRender()}remove(e){if(GT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function j$(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:h,rotateX:w,rotateY:_,skewX:x,skewY:A}=t;d&&(n=`perspective(${d}px) ${n}`),h&&(n+=`rotate(${h}deg) `),w&&(n+=`rotateX(${w}deg) `),_&&(n+=`rotateY(${_}deg) `),x&&(n+=`skewX(${x}deg) `),A&&(n+=`skewY(${A}deg) `)}const l=r.x.scale*e.x,c=r.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const yh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},cg=typeof window<"u"&&window.MotionDebug!==void 0,tE=["","X","Y","Z"],q$={visibility:"hidden"},GN=1e3;let K$=0;function nE(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function GU(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=QB(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Hr,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&GU(n)}function jU({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=K$++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,cg&&(yh.totalNodes=yh.resolvedTargetDeltas=yh.recalculatedProjection=0),this.nodes.forEach($$),this.nodes.forEach(tZ),this.nodes.forEach(nZ),this.nodes.forEach(Z$),cg&&window.MotionDebug.record(yh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new k$)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new jT),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=P$(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),r){let w;const _=()=>this.root.updateBlockedByResize=!1;r(o,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=O$(_,250),m_.hasAnimatedSinceResize&&(m_.hasAnimatedSinceResize=!1,this.nodes.forEach(qN))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:_,hasRelativeTargetChanged:x,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||h.getDefaultTransition()||aZ,{onLayoutAnimationStart:N,onLayoutAnimationComplete:C}=h.getProps(),D=!this.targetLayout||!HU(this.targetLayout,A)||x,k=!_&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||_&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,k);const F={...FT(L,"layout"),onPlay:N,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||qN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,nf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rZ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const w=this.path[h];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jN);return}this.isUpdating||this.nodes.forEach(J$),this.isUpdating=!1,this.nodes.forEach(eZ),this.nodes.forEach(Y$),this.nodes.forEach(X$),this.clearAllSnapshots();const l=Rl.now();us.delta=Gu(0,1e3/60,l-us.timestamp),us.timestamp=l,us.isProcessing=!0,qM.update.process(us),qM.preRender.process(us),qM.render.process(us),us.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,CT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Q$),this.sharedNodes.forEach(iZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Hr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Hr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=di(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!VU(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||gh(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),lZ(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return di();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(uZ))){const{scroll:h}=this.root;h&&(Zp(c.x,h.offset.x),Zp(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=di();if(ta(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:w,options:_}=h;h!==this.root&&w&&_.layoutScroll&&(w.wasRoot&&ta(c,o),Zp(c.x,w.offset.x),Zp(c.y,w.offset.y))}return c}applyTransform(o,l=!1){const c=di();ta(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Qp(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),gh(h.latestValues)&&Qp(c,h.latestValues)}return gh(this.latestValues)&&Qp(c,this.latestValues),c}removeTransform(o){const l=di();ta(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!gh(d.latestValues))continue;oA(d.latestValues)&&d.updateSnapshot();const h=di(),w=d.measurePageBox();ta(h,w),UN(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return gh(this.latestValues)&&UN(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==us.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:_}=this.options;if(!(!this.layout||!(w||_))){if(this.resolvedRelativeTargetAt=us.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=di(),this.relativeTargetOrigin=di(),xg(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ta(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=di(),this.targetWithTransforms=di()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),h$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ta(this.target,this.layout.layoutBox),DU(this.target,this.targetDelta)):ta(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=di(),this.relativeTargetOrigin=di(),xg(this.relativeTargetOrigin,this.target,x.target),ta(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}cg&&yh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||oA(this.parent.latestValues)||OU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===us.timestamp&&(d=!1),d)return;const{layout:h,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||w))return;ta(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,x=this.treeScale.y;x$(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=di());const{target:A}=l;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ON(this.prevProjectionDelta.x,this.projectionDelta.x),ON(this.prevProjectionDelta.y,this.projectionDelta.y)),_g(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==x||!HN(this.projectionDelta.x,this.prevProjectionDelta.x)||!HN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),cg&&yh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$p(),this.projectionDelta=$p(),this.projectionDeltaWithTransform=$p()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},w=$p();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const _=di(),x=c?c.source:void 0,A=this.layout?this.layout.source:void 0,L=x!==A,N=this.getStack(),C=!N||N.members.length<=1,D=!!(L&&!C&&this.options.crossfade===!0&&!this.path.some(oZ));this.animationProgress=0;let k;this.mixTargetDelta=F=>{const Q=F/1e3;KN(w.x,o.x,Q),KN(w.y,o.y,Q),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xg(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sZ(this.relativeTarget,this.relativeTargetOrigin,_,Q),k&&H$(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=di()),ta(k,this.relativeTarget)),L&&(this.animationValues=h,B$(h,d,this.latestValues,Q,D,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(nf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Hr.update(()=>{m_.hasAnimatedSinceResize=!0,this.currentAnimation=N$(0,GN,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&qU(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||di();const w=Vo(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+w;const _=Vo(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+_}ta(l,c),Qp(l,h),_g(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new G$),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&nE("z",o,d,this.animationValues);for(let h=0;h<tE.length;h++)nE(`rotate${tE[h]}`,o,d,this.animationValues),nE(`skew${tE[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return q$;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=d_(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const L={};return this.options.layoutId&&(L.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,L.pointerEvents=d_(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!gh(this.latestValues)&&(L.transform=h?h({},""):"none",this.hasProjected=!1),L}const _=w.animationValues||w.latestValues;this.applyTransformsToTarget(),d.transform=j$(this.projectionDeltaWithTransform,this.treeScale,_),h&&(d.transform=h(_,d.transform));const{x,y:A}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${A.origin*100}% 0`,w.animationValues?d.opacity=w===this?(c=(l=_.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:d.opacity=w===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const L in W_){if(_[L]===void 0)continue;const{correct:N,applyTo:C}=W_[L],D=d.transform==="none"?_[L]:N(_[L],w);if(C){const k=C.length;for(let F=0;F<k;F++)d[C[F]]=D}else d[L]=D}return this.options.layoutId&&(d.pointerEvents=w===this?d_(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(jN),this.root.sharedNodes.clear()}}}function Y$(r){r.updateLayout()}function X$(r){var e;const t=((e=r.resumeFrom)===null||e===void 0?void 0:e.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,o=t.source!==r.layout.source;s==="size"?ia(w=>{const _=o?t.measuredBox[w]:t.layoutBox[w],x=Vo(_);_.min=n[w].min,_.max=_.min+x}):qU(s,t.layoutBox,n)&&ia(w=>{const _=o?t.measuredBox[w]:t.layoutBox[w],x=Vo(n[w]);_.max=_.min+x,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[w].max=r.relativeTarget[w].min+x)});const l=$p();_g(l,n,t.layoutBox);const c=$p();o?_g(c,r.applyTransform(i,!0),t.measuredBox):_g(c,n,t.layoutBox);const d=!VU(l);let h=!1;if(!r.resumeFrom){const w=r.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:_,layout:x}=w;if(_&&x){const A=di();xg(A,t.layoutBox,_.layoutBox);const L=di();xg(L,n,x.layoutBox),HU(A,L)||(h=!0),w.options.layoutRoot&&(r.relativeTarget=L,r.relativeTargetOrigin=A,r.relativeParent=w)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function $$(r){cg&&yh.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Z$(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function Q$(r){r.clearSnapshot()}function jN(r){r.clearMeasurements()}function J$(r){r.isLayoutDirty=!1}function eZ(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function qN(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function tZ(r){r.resolveTargetDelta()}function nZ(r){r.calcProjection()}function rZ(r){r.resetSkewAndRotation()}function iZ(r){r.removeLeadSnapshot()}function KN(r,e,t){r.translate=Zr(e.translate,0,t),r.scale=Zr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function YN(r,e,t,n){r.min=Zr(e.min,t.min,n),r.max=Zr(e.max,t.max,n)}function sZ(r,e,t,n){YN(r.x,e.x,t.x,n),YN(r.y,e.y,t.y,n)}function oZ(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const aZ={duration:.45,ease:[.4,0,.1,1]},XN=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),$N=XN("applewebkit/")&&!XN("chrome/")?Math.round:zo;function ZN(r){r.min=$N(r.min),r.max=$N(r.max)}function lZ(r){ZN(r.x),ZN(r.y)}function qU(r,e,t){return r==="position"||r==="preserve-aspect"&&!f$(VN(e),VN(t),.2)}function uZ(r){var e;return r!==r.root&&((e=r.scroll)===null||e===void 0?void 0:e.wasRoot)}const cZ=jU({attachResizeListener:(r,e)=>Kg(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rE={current:void 0},KU=jU({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!rE.current){const r=new cZ({});r.mount(window),r.setOptions({layoutScroll:!0}),rE.current=r}return rE.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),fZ={pan:{Feature:T$},drag:{Feature:A$,ProjectionNode:KU,MeasureLayout:FU}};function QN(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Hr.postRender(()=>s(e,Cy(e)))}class hZ extends lf{mount(){const{current:e}=this.node;e&&(this.unmount=fY(e,t=>(QN(this.node,t,"Start"),n=>QN(this.node,n,"End"))))}unmount(){}}class dZ extends lf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ry(Kg(this.node.current,"focus",()=>this.onFocus()),Kg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JN(r,e,t){const{props:n}=r;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Hr.postRender(()=>s(e,Cy(e)))}class pZ extends lf{mount(){const{current:e}=this.node;e&&(this.unmount=mY(e,t=>(JN(this.node,t,"Start"),(n,{success:i})=>JN(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lA=new WeakMap,iE=new WeakMap,mZ=r=>{const e=lA.get(r.target);e&&e(r)},gZ=r=>{r.forEach(mZ)};function yZ({root:r,...e}){const t=r||document;iE.has(t)||iE.set(t,{});const n=iE.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(gZ,{root:r,...e})),n[i]}function vZ(r,e,t){const n=yZ(e);return lA.set(r,t),n.observe(r),()=>{lA.delete(r),n.unobserve(r)}}const wZ={some:0,all:1};class _Z extends lf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:wZ[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:w}=this.node.getProps(),_=d?h:w;_&&_(c)};return vZ(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(xZ(e,t))&&this.startObserver()}unmount(){}}function xZ({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const SZ={inView:{Feature:_Z},tap:{Feature:pZ},focus:{Feature:dZ},hover:{Feature:hZ}},MZ={layout:{ProjectionNode:KU,MeasureLayout:FU}},uA={current:null},YU={current:!1};function EZ(){if(YU.current=!0,!!ET)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>uA.current=r.matches;r.addListener(e),e()}else uA.current=!1}const bZ=[...wU,Cs,rf],AZ=r=>bZ.find(vU(r)),eP=new WeakMap;function TZ(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Is(i))r.addValue(n,i);else if(Is(s))r.addValue(n,jg(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const o=r.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=r.getStaticValue(n);r.addValue(n,jg(o!==void 0?o:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const tP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RZ{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ZT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Rl.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Hr.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=ax(t),this.isVariantNode=TB(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in _){const A=_[x];c[x]!==void 0&&Is(A)&&A.set(c[x],!1)}}mount(e){this.current=e,eP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),YU.current||EZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){eP.delete(this.current),this.projection&&this.projection.unmount(),nf(this.notifyUpdate),nf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=fd.has(e),i=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Hr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in v0){const t=v0[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):di()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<tP.length;n++){const i=tP[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=TZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=jg(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(gU(i)||aU(i))?i=parseFloat(i):!AZ(i)&&rf.test(t)&&(i=dU(e,t)),this.setBaseTarget(e,Is(i)?i.get():i)),Is(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=NT(this.props,n,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Is(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new jT),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class XU extends RZ{constructor(){super(...arguments),this.KeyframeResolver=_U}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Is(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function CZ(r){return window.getComputedStyle(r)}class IZ extends XU{constructor(){super(...arguments),this.type="html",this.renderInstance=DB}readValueFromInstance(e,t){if(fd.has(t)){const n=$T(t);return n&&n.default||0}else{const n=CZ(e),i=(LB(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return BU(e,t)}build(e,t,n){kT(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return UT(e,t,n)}}class NZ extends XU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=di}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fd.has(t)){const n=$T(t);return n&&n.default||0}return t=BB.has(t)?t:RT(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return zB(e,t,n)}build(e,t,n){OT(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,i){UB(e,t,n,i)}mount(e){this.isSVGTag=BT(e.tagName),super.mount(e)}}const PZ=(r,e)=>IT(r)?new NZ(e):new IZ(e,{allowProjection:r!==Ce.Fragment}),LZ=iY({...n$,...SZ,...fZ,...MZ},PZ),na=wK(LZ),kZ="FQuod36e7YC62xJPhpwJvBZMzsVPn36bYL2pjHMWNT2y",OZ={name:"nft",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},DZ=[{name:"mint_nft",discriminator:[211,57,6,167,15,219,35,251],accounts:[{name:"payer",writable:!0,signer:!0},{name:"mint",writable:!0,signer:!0},{name:"token_account",writable:!0,pda:{seeds:[{kind:"account",path:"payer"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"metadata",writable:!0},{name:"master_edition",writable:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"token_metadata_program",address:"metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"rent",address:"SysvarRent111111111111111111111111111111111"}],args:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"uri",type:"string"}]}],BZ={address:kZ,metadata:OZ,instructions:DZ},jm=new Mt("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function UZ(){const{connection:r}=AO(),e=fT(),[t,n]=Ce.useState(""),[i,s]=Ce.useState(""),[o,l]=Ce.useState(""),[c,d]=Ce.useState(null),[h,w]=Ce.useState(!1);Ce.useEffect(()=>{const A=document.querySelector(".stars");if(A&&A.children.length===0)for(let L=0;L<100;L++){const N=document.createElement("div");N.className="star",N.style.left=`${Math.random()*100}%`,N.style.top=`${Math.random()*100}%`,N.style.animationDelay=`${Math.random()*3}s`,A.appendChild(N)}},[]);const _=()=>{if(!e.publicKey||!e.signTransaction)throw new Error("Wallet not connected");return new Vg(r,e,{commitment:"confirmed"})},x=async A=>{if(A.preventDefault(),!e.publicKey){d({type:"error",message:"Please connect your wallet first"});return}if(!t||!i||!o){d({type:"error",message:"Please fill in all fields"});return}w(!0),d({type:"info",message:"Minting your NFT..."});try{const L=_(),N=new g0(BZ,L),C=Vh.generate(),[D]=Mt.findProgramAddressSync([qn.from("metadata"),jm.toBuffer(),C.publicKey.toBuffer()],jm),[k]=Mt.findProgramAddressSync([qn.from("metadata"),jm.toBuffer(),C.publicKey.toBuffer(),qn.from("edition")],jm),[F]=Mt.findProgramAddressSync([e.publicKey.toBuffer(),U3.toBuffer(),C.publicKey.toBuffer()],F3),Q=await N.methods.mintNft(t,i,o).accounts({payer:e.publicKey,mint:C.publicKey,tokenAccount:F,metadata:D,masterEdition:k,tokenProgram:U3,associatedTokenProgram:F3,tokenMetadataProgram:jm,systemProgram:Ri.programId,rent:Zh}).signers([C]).rpc();d({type:"success",message:Xt.jsxs("div",{children:["NFT minted successfully!",Xt.jsx("br",{}),Xt.jsx("a",{href:`https://explorer.solana.com/tx/${Q}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"explorer-link",children:"View on Solana Explorer"}),Xt.jsx("br",{}),"Mint: ",C.publicKey.toString()]})}),n(""),s(""),l("")}catch(L){console.error("Error minting NFT:",L),d({type:"error",message:`Failed to mint NFT: ${L.message||"Unknown error"}`})}finally{w(!1)}};return Xt.jsxs(Xt.Fragment,{children:[Xt.jsxs("div",{className:"floating-shapes",children:[Xt.jsx("div",{className:"shape shape-1"}),Xt.jsx("div",{className:"shape shape-2"}),Xt.jsx("div",{className:"shape shape-3"})]}),Xt.jsx(na.div,{className:"container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:Xt.jsxs(na.div,{className:"card",whileHover:{scale:1.02},transition:{type:"spring",stiffness:300},children:[Xt.jsx(na.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},children:"🎨 NFT Minter"}),Xt.jsx(na.p,{className:"subtitle",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},children:"Create your own Solana NFT with style"}),Xt.jsx(na.div,{className:"wallet-section",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.4},children:Xt.jsx(uG,{})}),Xt.jsx(W3,{children:e.publicKey&&Xt.jsxs(na.form,{onSubmit:x,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:[Xt.jsxs(na.div,{className:"form-group",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.7},children:[Xt.jsx("label",{htmlFor:"name",children:"NFT Name"}),Xt.jsx("input",{id:"name",type:"text",value:t,onChange:A=>n(A.target.value),placeholder:"My Awesome NFT",maxLength:32})]}),Xt.jsxs(na.div,{className:"form-group",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.8},children:[Xt.jsx("label",{htmlFor:"symbol",children:"Symbol"}),Xt.jsx("input",{id:"symbol",type:"text",value:i,onChange:A=>s(A.target.value),placeholder:"MNFT",maxLength:10})]}),Xt.jsxs(na.div,{className:"form-group",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.9},children:[Xt.jsx("label",{htmlFor:"uri",children:"Metadata URI"}),Xt.jsx("textarea",{id:"uri",value:o,onChange:A=>l(A.target.value),placeholder:"https://arweave.net/..."})]}),Xt.jsx(na.button,{type:"submit",className:"mint-button",disabled:h,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},children:h?Xt.jsx(na.span,{animate:{opacity:[1,.5,1]},transition:{repeat:1/0,duration:1.5},children:"Minting..."}):"Mint NFT"})]})}),Xt.jsx(W3,{children:c&&Xt.jsx(na.div,{className:`status ${c.type}`,initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:c.message})})]})})]})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const cx="169",vh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},$U=0,cA=1,ZU=2,FZ=3,QU=0,fx=1,Sg=2,Fa=3,ju=0,Xs=1,Sl=2,Wu=0,Gh=1,fA=2,hA=3,dA=4,JU=5,Kc=100,e6=101,t6=102,n6=103,r6=104,i6=200,s6=201,o6=202,a6=203,K_=204,Y_=205,l6=206,u6=207,c6=208,f6=209,h6=210,d6=211,p6=212,m6=213,g6=214,X_=0,$_=1,Z_=2,Jh=3,Q_=4,J_=5,e1=6,t1=7,Iy=0,y6=1,v6=2,Cl=0,w6=1,_6=2,x6=3,tR=4,S6=5,M6=6,E6=7,pA="attached",b6="detached",hx=300,qu=301,sf=302,Yg=303,Xg=304,L0=306,$g=1e3,aa=1001,Zg=1002,Zi=1003,nR=1004,zZ=1004,Jp=1005,WZ=1005,Ci=1006,Mg=1007,VZ=1007,El=1008,HZ=1008,ja=1009,rR=1010,iR=1011,_0=1012,dx=1013,Ku=1014,wo=1015,k0=1016,px=1017,mx=1018,ed=1020,sR=35902,oR=1021,aR=1022,Ns=1023,lR=1024,uR=1025,jh=1026,td=1027,gx=1028,Ny=1029,cR=1030,yx=1031,GZ=1032,vx=1033,Eg=33776,bg=33777,Ag=33778,Tg=33779,n1=35840,r1=35841,i1=35842,s1=35843,o1=36196,a1=37492,l1=37496,u1=37808,c1=37809,f1=37810,h1=37811,d1=37812,p1=37813,m1=37814,g1=37815,y1=37816,v1=37817,w1=37818,_1=37819,x1=37820,S1=37821,Rg=36492,M1=36494,E1=36495,fR=36283,b1=36284,A1=36285,T1=36286,A6=2200,T6=2201,R6=2202,Qg=2300,R1=2301,g_=2302,Bh=2400,Uh=2401,Jg=2402,wx=2500,hR=2501,jZ=0,qZ=1,KZ=2,C6=3200,I6=3201,YZ=3202,XZ=3203,uf=0,N6=1,Pu="",oa="srgb",$u="srgb-linear",_x="display-p3",Py="display-p3-linear",ey="linear",Br="srgb",ty="rec709",ny="p3",$Z=0,_h=7680,ZZ=7681,QZ=7682,JZ=7683,eQ=34055,tQ=34056,nQ=5386,rQ=512,iQ=513,sQ=514,oQ=515,aQ=516,lQ=517,uQ=518,mA=519,P6=512,L6=513,k6=514,dR=515,O6=516,D6=517,B6=518,U6=519,ry=35044,cQ=35048,fQ=35040,hQ=35045,dQ=35049,pQ=35041,mQ=35046,gQ=35050,yQ=35042,vQ="100",gA="300 es",bl=2e3,iy=2001;let kl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const bs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nP=1234567;const qh=Math.PI/180,x0=180/Math.PI;function Wo(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(bs[r&255]+bs[r>>8&255]+bs[r>>16&255]+bs[r>>24&255]+"-"+bs[e&255]+bs[e>>8&255]+"-"+bs[e>>16&15|64]+bs[e>>24&255]+"-"+bs[t&63|128]+bs[t>>8&255]+"-"+bs[t>>16&255]+bs[t>>24&255]+bs[n&255]+bs[n>>8&255]+bs[n>>16&255]+bs[n>>24&255]).toLowerCase()}function ai(r,e,t){return Math.max(e,Math.min(t,r))}function pR(r,e){return(r%e+e)%e}function wQ(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function _Q(r,e,t){return r!==e?(t-r)/(e-r):0}function Cg(r,e,t){return(1-t)*r+t*e}function xQ(r,e,t,n){return Cg(r,e,1-Math.exp(-t*n))}function SQ(r,e=1){return e-Math.abs(pR(r,e*2)-e)}function MQ(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function EQ(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function bQ(r,e){return r+Math.floor(Math.random()*(e-r+1))}function AQ(r,e){return r+Math.random()*(e-r)}function TQ(r){return r*(.5-Math.random())}function RQ(r){r!==void 0&&(nP=r);let e=nP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function CQ(r){return r*qh}function IQ(r){return r*x0}function NQ(r){return(r&r-1)===0&&r!==0}function PQ(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function LQ(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function kQ(r,e,t,n,i){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),d=s((e+n)/2),h=o((e+n)/2),w=s((e-n)/2),_=o((e-n)/2),x=s((n-e)/2),A=o((n-e)/2);switch(i){case"XYX":r.set(l*h,c*w,c*_,l*d);break;case"YZY":r.set(c*_,l*h,c*w,l*d);break;case"ZXZ":r.set(c*w,c*_,l*h,l*d);break;case"XZX":r.set(l*h,c*A,c*x,l*d);break;case"YXY":r.set(c*x,l*h,c*A,l*d);break;case"ZYZ":r.set(c*A,c*x,l*h,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ys(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Kn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const F6={DEG2RAD:qh,RAD2DEG:x0,generateUUID:Wo,clamp:ai,euclideanModulo:pR,mapLinear:wQ,inverseLerp:_Q,lerp:Cg,damp:xQ,pingpong:SQ,smoothstep:MQ,smootherstep:EQ,randInt:bQ,randFloat:AQ,randFloatSpread:TQ,seededRandom:RQ,degToRad:CQ,radToDeg:IQ,isPowerOfTwo:NQ,ceilPowerOfTwo:PQ,floorPowerOfTwo:LQ,setQuaternionFromProperEuler:kQ,normalize:Kn,denormalize:Ys};class St{constructor(e=0,t=0){St.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ai(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jn{constructor(e,t,n,i,s,o,l,c,d){jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,c,d)}set(e,t,n,i,s,o,l,c,d){const h=this.elements;return h[0]=e,h[1]=i,h[2]=l,h[3]=t,h[4]=s,h[5]=c,h[6]=n,h[7]=o,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[3],c=n[6],d=n[1],h=n[4],w=n[7],_=n[2],x=n[5],A=n[8],L=i[0],N=i[3],C=i[6],D=i[1],k=i[4],F=i[7],Q=i[2],G=i[5],Y=i[8];return s[0]=o*L+l*D+c*Q,s[3]=o*N+l*k+c*G,s[6]=o*C+l*F+c*Y,s[1]=d*L+h*D+w*Q,s[4]=d*N+h*k+w*G,s[7]=d*C+h*F+w*Y,s[2]=_*L+x*D+A*Q,s[5]=_*N+x*k+A*G,s[8]=_*C+x*F+A*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8];return t*o*h-t*l*d-n*s*h+n*l*c+i*s*d-i*o*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],w=h*o-l*d,_=l*c-h*s,x=d*s-o*c,A=t*w+n*_+i*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const L=1/A;return e[0]=w*L,e[1]=(i*d-h*n)*L,e[2]=(l*n-i*o)*L,e[3]=_*L,e[4]=(h*t-i*c)*L,e[5]=(i*s-l*t)*L,e[6]=x*L,e[7]=(n*c-d*t)*L,e[8]=(o*t-n*s)*L,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,l){const c=Math.cos(s),d=Math.sin(s);return this.set(n*c,n*d,-n*(c*o+d*l)+o+e,-i*d,i*c,-i*(-d*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(sE.makeScale(e,t)),this}rotate(e){return this.premultiply(sE.makeRotation(-e)),this}translate(e,t){return this.premultiply(sE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const sE=new jn;function z6(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const OQ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function e0(r,e){return new OQ[r](e)}function sy(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function W6(){const r=sy("canvas");return r.style.display="block",r}const rP={};function y_(r){r in rP||(rP[r]=!0,console.warn(r))}function DQ(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function BQ(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function UQ(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const iP=new jn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),sP=new jn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),qm={[$u]:{transfer:ey,primaries:ty,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r,fromReference:r=>r},[oa]:{transfer:Br,primaries:ty,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[Py]:{transfer:ey,primaries:ny,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.applyMatrix3(sP),fromReference:r=>r.applyMatrix3(iP)},[_x]:{transfer:Br,primaries:ny,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.convertSRGBToLinear().applyMatrix3(sP),fromReference:r=>r.applyMatrix3(iP).convertLinearToSRGB()}},FQ=new Set([$u,Py]),gr={enabled:!0,_workingColorSpace:$u,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!FQ.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=qm[e].toReference,i=qm[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return qm[r].primaries},getTransfer:function(r){return r===Pu?ey:qm[r].transfer},getLuminanceCoefficients:function(r,e=this._workingColorSpace){return r.fromArray(qm[e].luminanceCoefficients)}};function f0(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function oE(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let _p;class V6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_p===void 0&&(_p=sy("canvas")),_p.width=e.width,_p.height=e.height;const n=_p.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=_p}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sy("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=f0(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(f0(t[n]/255)*255):t[n]=f0(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zQ=0;class Fh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zQ++}),this.uuid=Wo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?s.push(aE(i[o].image)):s.push(aE(i[o]))}else s=aE(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function aE(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?V6.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let WQ=0;class li extends kl{constructor(e=li.DEFAULT_IMAGE,t=li.DEFAULT_MAPPING,n=aa,i=aa,s=Ci,o=El,l=Ns,c=ja,d=li.DEFAULT_ANISOTROPY,h=Pu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:WQ++}),this.uuid=Wo(),this.name="",this.source=new Fh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new St(0,0),this.repeat=new St(1,1),this.center=new St(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $g:e.x=e.x-Math.floor(e.x);break;case aa:e.x=e.x<0?0:1;break;case Zg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $g:e.y=e.y-Math.floor(e.y);break;case aa:e.y=e.y<0?0:1;break;case Zg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}li.DEFAULT_IMAGE=null;li.DEFAULT_MAPPING=hx;li.DEFAULT_ANISOTROPY=1;class hr{constructor(e=0,t=0,n=0,i=1){hr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const c=e.elements,d=c[0],h=c[4],w=c[8],_=c[1],x=c[5],A=c[9],L=c[2],N=c[6],C=c[10];if(Math.abs(h-_)<.01&&Math.abs(w-L)<.01&&Math.abs(A-N)<.01){if(Math.abs(h+_)<.1&&Math.abs(w+L)<.1&&Math.abs(A+N)<.1&&Math.abs(d+x+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const k=(d+1)/2,F=(x+1)/2,Q=(C+1)/2,G=(h+_)/4,Y=(w+L)/4,ee=(A+N)/4;return k>F&&k>Q?k<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(k),i=G/n,s=Y/n):F>Q?F<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(F),n=G/i,s=ee/i):Q<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(Q),n=Y/s,i=ee/s),this.set(n,i,s,t),this}let D=Math.sqrt((N-A)*(N-A)+(w-L)*(w-L)+(_-h)*(_-h));return Math.abs(D)<.001&&(D=1),this.x=(N-A)/D,this.y=(w-L)/D,this.z=(_-h)/D,this.w=Math.acos((d+x+C-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class H6 extends kl{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hr(0,0,e,t),this.scissorTest=!1,this.viewport=new hr(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ci,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new li(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Fh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class qa extends H6{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class xx extends li{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Zi,this.minFilter=Zi,this.wrapR=aa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class VQ extends qa{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new xx(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class mR extends li{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Zi,this.minFilter=Zi,this.wrapR=aa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class HQ extends qa{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new mR(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ps{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,l){let c=n[i+0],d=n[i+1],h=n[i+2],w=n[i+3];const _=s[o+0],x=s[o+1],A=s[o+2],L=s[o+3];if(l===0){e[t+0]=c,e[t+1]=d,e[t+2]=h,e[t+3]=w;return}if(l===1){e[t+0]=_,e[t+1]=x,e[t+2]=A,e[t+3]=L;return}if(w!==L||c!==_||d!==x||h!==A){let N=1-l;const C=c*_+d*x+h*A+w*L,D=C>=0?1:-1,k=1-C*C;if(k>Number.EPSILON){const Q=Math.sqrt(k),G=Math.atan2(Q,C*D);N=Math.sin(N*G)/Q,l=Math.sin(l*G)/Q}const F=l*D;if(c=c*N+_*F,d=d*N+x*F,h=h*N+A*F,w=w*N+L*F,N===1-l){const Q=1/Math.sqrt(c*c+d*d+h*h+w*w);c*=Q,d*=Q,h*=Q,w*=Q}}e[t]=c,e[t+1]=d,e[t+2]=h,e[t+3]=w}static multiplyQuaternionsFlat(e,t,n,i,s,o){const l=n[i],c=n[i+1],d=n[i+2],h=n[i+3],w=s[o],_=s[o+1],x=s[o+2],A=s[o+3];return e[t]=l*A+h*w+c*x-d*_,e[t+1]=c*A+h*_+d*w-l*x,e[t+2]=d*A+h*x+l*_-c*w,e[t+3]=h*A-l*w-c*_-d*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,d=l(n/2),h=l(i/2),w=l(s/2),_=c(n/2),x=c(i/2),A=c(s/2);switch(o){case"XYZ":this._x=_*h*w+d*x*A,this._y=d*x*w-_*h*A,this._z=d*h*A+_*x*w,this._w=d*h*w-_*x*A;break;case"YXZ":this._x=_*h*w+d*x*A,this._y=d*x*w-_*h*A,this._z=d*h*A-_*x*w,this._w=d*h*w+_*x*A;break;case"ZXY":this._x=_*h*w-d*x*A,this._y=d*x*w+_*h*A,this._z=d*h*A+_*x*w,this._w=d*h*w-_*x*A;break;case"ZYX":this._x=_*h*w-d*x*A,this._y=d*x*w+_*h*A,this._z=d*h*A-_*x*w,this._w=d*h*w+_*x*A;break;case"YZX":this._x=_*h*w+d*x*A,this._y=d*x*w+_*h*A,this._z=d*h*A-_*x*w,this._w=d*h*w-_*x*A;break;case"XZY":this._x=_*h*w-d*x*A,this._y=d*x*w-_*h*A,this._z=d*h*A+_*x*w,this._w=d*h*w+_*x*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],l=t[5],c=t[9],d=t[2],h=t[6],w=t[10],_=n+l+w;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(h-c)*x,this._y=(s-d)*x,this._z=(o-i)*x}else if(n>l&&n>w){const x=2*Math.sqrt(1+n-l-w);this._w=(h-c)/x,this._x=.25*x,this._y=(i+o)/x,this._z=(s+d)/x}else if(l>w){const x=2*Math.sqrt(1+l-n-w);this._w=(s-d)/x,this._x=(i+o)/x,this._y=.25*x,this._z=(c+h)/x}else{const x=2*Math.sqrt(1+w-n-l);this._w=(o-i)/x,this._x=(s+d)/x,this._y=(c+h)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ai(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,l=t._x,c=t._y,d=t._z,h=t._w;return this._x=n*h+o*l+i*d-s*c,this._y=i*h+o*c+s*l-n*d,this._z=s*h+o*d+n*c-i*l,this._w=o*h-n*l-i*c-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const x=1-t;return this._w=x*o+t*this._w,this._x=x*n+t*this._x,this._y=x*i+t*this._y,this._z=x*s+t*this._z,this.normalize(),this}const d=Math.sqrt(c),h=Math.atan2(d,l),w=Math.sin((1-t)*h)/d,_=Math.sin(t*h)/d;return this._w=o*w+this._w*_,this._x=n*w+this._x*_,this._y=i*w+this._y*_,this._z=s*w+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class we{constructor(e=0,t=0,n=0){we.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(oP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,l=e.z,c=e.w,d=2*(o*i-l*n),h=2*(l*t-s*i),w=2*(s*n-o*t);return this.x=t+c*d+o*w-l*h,this.y=n+c*h+l*d-s*w,this.z=i+c*w+s*h-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=i*c-s*l,this.y=s*o-n*c,this.z=n*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return lE.copy(this).projectOnVector(e),this.sub(lE)}reflect(e){return this.sub(lE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ai(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const lE=new we,oP=new Ps;class $s{constructor(e=new we(1/0,1/0,1/0),t=new we(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ka.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ka.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ka.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,ka):ka.fromBufferAttribute(s,o),ka.applyMatrix4(e.matrixWorld),this.expandByPoint(ka);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),iw.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),iw.copy(n.boundingBox)),iw.applyMatrix4(e.matrixWorld),this.union(iw)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,ka),ka.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Km),sw.subVectors(this.max,Km),xp.subVectors(e.a,Km),Sp.subVectors(e.b,Km),Mp.subVectors(e.c,Km),Lc.subVectors(Sp,xp),kc.subVectors(Mp,Sp),rh.subVectors(xp,Mp);let t=[0,-Lc.z,Lc.y,0,-kc.z,kc.y,0,-rh.z,rh.y,Lc.z,0,-Lc.x,kc.z,0,-kc.x,rh.z,0,-rh.x,-Lc.y,Lc.x,0,-kc.y,kc.x,0,-rh.y,rh.x,0];return!uE(t,xp,Sp,Mp,sw)||(t=[1,0,0,0,1,0,0,0,1],!uE(t,xp,Sp,Mp,sw))?!1:(ow.crossVectors(Lc,kc),t=[ow.x,ow.y,ow.z],uE(t,xp,Sp,Mp,sw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ka).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ka).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vu=[new we,new we,new we,new we,new we,new we,new we,new we],ka=new we,iw=new $s,xp=new we,Sp=new we,Mp=new we,Lc=new we,kc=new we,rh=new we,Km=new we,sw=new we,ow=new we,ih=new we;function uE(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){ih.fromArray(r,s);const l=i.x*Math.abs(ih.x)+i.y*Math.abs(ih.y)+i.z*Math.abs(ih.z),c=e.dot(ih),d=t.dot(ih),h=n.dot(ih);if(Math.max(-Math.max(c,d,h),Math.min(c,d,h))>l)return!1}return!0}const GQ=new $s,Ym=new we,cE=new we;let Ls=class{constructor(e=new we,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):GQ.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ym.subVectors(e,this.center);const t=Ym.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Ym,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ym.copy(e.center).add(cE)),this.expandByPoint(Ym.copy(e.center).sub(cE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const wu=new we,fE=new we,aw=new we,Oc=new we,hE=new we,lw=new we,dE=new we;class hd{constructor(e=new we,t=new we(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=wu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wu.copy(this.origin).addScaledVector(this.direction,t),wu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){fE.copy(e).add(t).multiplyScalar(.5),aw.copy(t).sub(e).normalize(),Oc.copy(this.origin).sub(fE);const s=e.distanceTo(t)*.5,o=-this.direction.dot(aw),l=Oc.dot(this.direction),c=-Oc.dot(aw),d=Oc.lengthSq(),h=Math.abs(1-o*o);let w,_,x,A;if(h>0)if(w=o*c-l,_=o*l-c,A=s*h,w>=0)if(_>=-A)if(_<=A){const L=1/h;w*=L,_*=L,x=w*(w+o*_+2*l)+_*(o*w+_+2*c)+d}else _=s,w=Math.max(0,-(o*_+l)),x=-w*w+_*(_+2*c)+d;else _=-s,w=Math.max(0,-(o*_+l)),x=-w*w+_*(_+2*c)+d;else _<=-A?(w=Math.max(0,-(-o*s+l)),_=w>0?-s:Math.min(Math.max(-s,-c),s),x=-w*w+_*(_+2*c)+d):_<=A?(w=0,_=Math.min(Math.max(-s,-c),s),x=_*(_+2*c)+d):(w=Math.max(0,-(o*s+l)),_=w>0?s:Math.min(Math.max(-s,-c),s),x=-w*w+_*(_+2*c)+d);else _=o>0?-s:s,w=Math.max(0,-(o*_+l)),x=-w*w+_*(_+2*c)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,w),i&&i.copy(fE).addScaledVector(aw,_),x}intersectSphere(e,t){wu.subVectors(e.center,this.origin);const n=wu.dot(this.direction),i=wu.dot(wu)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),l=n-o,c=n+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,l,c;const d=1/this.direction.x,h=1/this.direction.y,w=1/this.direction.z,_=this.origin;return d>=0?(n=(e.min.x-_.x)*d,i=(e.max.x-_.x)*d):(n=(e.max.x-_.x)*d,i=(e.min.x-_.x)*d),h>=0?(s=(e.min.y-_.y)*h,o=(e.max.y-_.y)*h):(s=(e.max.y-_.y)*h,o=(e.min.y-_.y)*h),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),w>=0?(l=(e.min.z-_.z)*w,c=(e.max.z-_.z)*w):(l=(e.max.z-_.z)*w,c=(e.min.z-_.z)*w),n>c||l>i)||((l>n||n!==n)&&(n=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,wu)!==null}intersectTriangle(e,t,n,i,s){hE.subVectors(t,e),lw.subVectors(n,e),dE.crossVectors(hE,lw);let o=this.direction.dot(dE),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Oc.subVectors(this.origin,e);const c=l*this.direction.dot(lw.crossVectors(Oc,lw));if(c<0)return null;const d=l*this.direction.dot(hE.cross(Oc));if(d<0||c+d>o)return null;const h=-l*Oc.dot(dE);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ln{constructor(e,t,n,i,s,o,l,c,d,h,w,_,x,A,L,N){Ln.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,c,d,h,w,_,x,A,L,N)}set(e,t,n,i,s,o,l,c,d,h,w,_,x,A,L,N){const C=this.elements;return C[0]=e,C[4]=t,C[8]=n,C[12]=i,C[1]=s,C[5]=o,C[9]=l,C[13]=c,C[2]=d,C[6]=h,C[10]=w,C[14]=_,C[3]=x,C[7]=A,C[11]=L,C[15]=N,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ln().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ep.setFromMatrixColumn(e,0).length(),s=1/Ep.setFromMatrixColumn(e,1).length(),o=1/Ep.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),c=Math.cos(i),d=Math.sin(i),h=Math.cos(s),w=Math.sin(s);if(e.order==="XYZ"){const _=o*h,x=o*w,A=l*h,L=l*w;t[0]=c*h,t[4]=-c*w,t[8]=d,t[1]=x+A*d,t[5]=_-L*d,t[9]=-l*c,t[2]=L-_*d,t[6]=A+x*d,t[10]=o*c}else if(e.order==="YXZ"){const _=c*h,x=c*w,A=d*h,L=d*w;t[0]=_+L*l,t[4]=A*l-x,t[8]=o*d,t[1]=o*w,t[5]=o*h,t[9]=-l,t[2]=x*l-A,t[6]=L+_*l,t[10]=o*c}else if(e.order==="ZXY"){const _=c*h,x=c*w,A=d*h,L=d*w;t[0]=_-L*l,t[4]=-o*w,t[8]=A+x*l,t[1]=x+A*l,t[5]=o*h,t[9]=L-_*l,t[2]=-o*d,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const _=o*h,x=o*w,A=l*h,L=l*w;t[0]=c*h,t[4]=A*d-x,t[8]=_*d+L,t[1]=c*w,t[5]=L*d+_,t[9]=x*d-A,t[2]=-d,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const _=o*c,x=o*d,A=l*c,L=l*d;t[0]=c*h,t[4]=L-_*w,t[8]=A*w+x,t[1]=w,t[5]=o*h,t[9]=-l*h,t[2]=-d*h,t[6]=x*w+A,t[10]=_-L*w}else if(e.order==="XZY"){const _=o*c,x=o*d,A=l*c,L=l*d;t[0]=c*h,t[4]=-w,t[8]=d*h,t[1]=_*w+L,t[5]=o*h,t[9]=x*w-A,t[2]=A*w-x,t[6]=l*h,t[10]=L*w+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jQ,e,qQ)}lookAt(e,t,n){const i=this.elements;return Lo.subVectors(e,t),Lo.lengthSq()===0&&(Lo.z=1),Lo.normalize(),Dc.crossVectors(n,Lo),Dc.lengthSq()===0&&(Math.abs(n.z)===1?Lo.x+=1e-4:Lo.z+=1e-4,Lo.normalize(),Dc.crossVectors(n,Lo)),Dc.normalize(),uw.crossVectors(Lo,Dc),i[0]=Dc.x,i[4]=uw.x,i[8]=Lo.x,i[1]=Dc.y,i[5]=uw.y,i[9]=Lo.y,i[2]=Dc.z,i[6]=uw.z,i[10]=Lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[4],c=n[8],d=n[12],h=n[1],w=n[5],_=n[9],x=n[13],A=n[2],L=n[6],N=n[10],C=n[14],D=n[3],k=n[7],F=n[11],Q=n[15],G=i[0],Y=i[4],ee=i[8],te=i[12],U=i[1],V=i[5],K=i[9],E=i[13],a=i[2],p=i[6],M=i[10],R=i[14],T=i[3],P=i[7],I=i[11],y=i[15];return s[0]=o*G+l*U+c*a+d*T,s[4]=o*Y+l*V+c*p+d*P,s[8]=o*ee+l*K+c*M+d*I,s[12]=o*te+l*E+c*R+d*y,s[1]=h*G+w*U+_*a+x*T,s[5]=h*Y+w*V+_*p+x*P,s[9]=h*ee+w*K+_*M+x*I,s[13]=h*te+w*E+_*R+x*y,s[2]=A*G+L*U+N*a+C*T,s[6]=A*Y+L*V+N*p+C*P,s[10]=A*ee+L*K+N*M+C*I,s[14]=A*te+L*E+N*R+C*y,s[3]=D*G+k*U+F*a+Q*T,s[7]=D*Y+k*V+F*p+Q*P,s[11]=D*ee+k*K+F*M+Q*I,s[15]=D*te+k*E+F*R+Q*y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],l=e[5],c=e[9],d=e[13],h=e[2],w=e[6],_=e[10],x=e[14],A=e[3],L=e[7],N=e[11],C=e[15];return A*(+s*c*w-i*d*w-s*l*_+n*d*_+i*l*x-n*c*x)+L*(+t*c*x-t*d*_+s*o*_-i*o*x+i*d*h-s*c*h)+N*(+t*d*w-t*l*x-s*o*w+n*o*x+s*l*h-n*d*h)+C*(-i*l*h-t*c*w+t*l*_+i*o*w-n*o*_+n*c*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],w=e[9],_=e[10],x=e[11],A=e[12],L=e[13],N=e[14],C=e[15],D=w*N*d-L*_*d+L*c*x-l*N*x-w*c*C+l*_*C,k=A*_*d-h*N*d-A*c*x+o*N*x+h*c*C-o*_*C,F=h*L*d-A*w*d+A*l*x-o*L*x-h*l*C+o*w*C,Q=A*w*c-h*L*c-A*l*_+o*L*_+h*l*N-o*w*N,G=t*D+n*k+i*F+s*Q;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Y=1/G;return e[0]=D*Y,e[1]=(L*_*s-w*N*s-L*i*x+n*N*x+w*i*C-n*_*C)*Y,e[2]=(l*N*s-L*c*s+L*i*d-n*N*d-l*i*C+n*c*C)*Y,e[3]=(w*c*s-l*_*s-w*i*d+n*_*d+l*i*x-n*c*x)*Y,e[4]=k*Y,e[5]=(h*N*s-A*_*s+A*i*x-t*N*x-h*i*C+t*_*C)*Y,e[6]=(A*c*s-o*N*s-A*i*d+t*N*d+o*i*C-t*c*C)*Y,e[7]=(o*_*s-h*c*s+h*i*d-t*_*d-o*i*x+t*c*x)*Y,e[8]=F*Y,e[9]=(A*w*s-h*L*s-A*n*x+t*L*x+h*n*C-t*w*C)*Y,e[10]=(o*L*s-A*l*s+A*n*d-t*L*d-o*n*C+t*l*C)*Y,e[11]=(h*l*s-o*w*s-h*n*d+t*w*d+o*n*x-t*l*x)*Y,e[12]=Q*Y,e[13]=(h*L*i-A*w*i+A*n*_-t*L*_-h*n*N+t*w*N)*Y,e[14]=(A*l*i-o*L*i-A*n*c+t*L*c+o*n*N-t*l*N)*Y,e[15]=(o*w*i-h*l*i+h*n*c-t*w*c-o*n*_+t*l*_)*Y,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,l=e.y,c=e.z,d=s*o,h=s*l;return this.set(d*o+n,d*l-i*c,d*c+i*l,0,d*l+i*c,h*l+n,h*c-i*o,0,d*c-i*l,h*c+i*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,d=s+s,h=o+o,w=l+l,_=s*d,x=s*h,A=s*w,L=o*h,N=o*w,C=l*w,D=c*d,k=c*h,F=c*w,Q=n.x,G=n.y,Y=n.z;return i[0]=(1-(L+C))*Q,i[1]=(x+F)*Q,i[2]=(A-k)*Q,i[3]=0,i[4]=(x-F)*G,i[5]=(1-(_+C))*G,i[6]=(N+D)*G,i[7]=0,i[8]=(A+k)*Y,i[9]=(N-D)*Y,i[10]=(1-(_+L))*Y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Ep.set(i[0],i[1],i[2]).length();const o=Ep.set(i[4],i[5],i[6]).length(),l=Ep.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Oa.copy(this);const d=1/s,h=1/o,w=1/l;return Oa.elements[0]*=d,Oa.elements[1]*=d,Oa.elements[2]*=d,Oa.elements[4]*=h,Oa.elements[5]*=h,Oa.elements[6]*=h,Oa.elements[8]*=w,Oa.elements[9]*=w,Oa.elements[10]*=w,t.setFromRotationMatrix(Oa),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,i,s,o,l=bl){const c=this.elements,d=2*s/(t-e),h=2*s/(n-i),w=(t+e)/(t-e),_=(n+i)/(n-i);let x,A;if(l===bl)x=-(o+s)/(o-s),A=-2*o*s/(o-s);else if(l===iy)x=-o/(o-s),A=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=d,c[4]=0,c[8]=w,c[12]=0,c[1]=0,c[5]=h,c[9]=_,c[13]=0,c[2]=0,c[6]=0,c[10]=x,c[14]=A,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,i,s,o,l=bl){const c=this.elements,d=1/(t-e),h=1/(n-i),w=1/(o-s),_=(t+e)*d,x=(n+i)*h;let A,L;if(l===bl)A=(o+s)*w,L=-2*w;else if(l===iy)A=s*w,L=-1*w;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-_,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-x,c[2]=0,c[6]=0,c[10]=L,c[14]=-A,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ep=new we,Oa=new Ln,jQ=new we(0,0,0),qQ=new we(1,1,1),Dc=new we,uw=new we,Lo=new we,aP=new Ln,lP=new Ps;class Ho{constructor(e=0,t=0,n=0,i=Ho.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],l=i[8],c=i[1],d=i[5],h=i[9],w=i[2],_=i[6],x=i[10];switch(t){case"XYZ":this._y=Math.asin(ai(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,x),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,d),this._z=0);break;case"YXZ":this._x=Math.asin(-ai(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-w,s),this._z=0);break;case"ZXY":this._x=Math.asin(ai(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-w,x),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-ai(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(ai(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-w,s)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-ai(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return aP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aP,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return lP.setFromEuler(this),this.setFromQuaternion(lP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ho.DEFAULT_ORDER="XYZ";class Kh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let KQ=0;const uP=new we,bp=new Ps,_u=new Ln,cw=new we,Xm=new we,YQ=new we,XQ=new Ps,cP=new we(1,0,0),fP=new we(0,1,0),hP=new we(0,0,1),dP={type:"added"},$Q={type:"removed"},Ap={type:"childadded",child:null},pE={type:"childremoved",child:null};class dr extends kl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:KQ++}),this.uuid=Wo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dr.DEFAULT_UP.clone();const e=new we,t=new Ho,n=new Ps,i=new we(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ln},normalMatrix:{value:new jn}}),this.matrix=new Ln,this.matrixWorld=new Ln,this.matrixAutoUpdate=dr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=dr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Kh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return bp.setFromAxisAngle(e,t),this.quaternion.multiply(bp),this}rotateOnWorldAxis(e,t){return bp.setFromAxisAngle(e,t),this.quaternion.premultiply(bp),this}rotateX(e){return this.rotateOnAxis(cP,e)}rotateY(e){return this.rotateOnAxis(fP,e)}rotateZ(e){return this.rotateOnAxis(hP,e)}translateOnAxis(e,t){return uP.copy(e).applyQuaternion(this.quaternion),this.position.add(uP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cP,e)}translateY(e){return this.translateOnAxis(fP,e)}translateZ(e){return this.translateOnAxis(hP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_u.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?cw.copy(e):cw.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Xm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_u.lookAt(Xm,cw,this.up):_u.lookAt(cw,Xm,this.up),this.quaternion.setFromRotationMatrix(_u),i&&(_u.extractRotation(i.matrixWorld),bp.setFromRotationMatrix(_u),this.quaternion.premultiply(bp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(dP),Ap.child=e,this.dispatchEvent(Ap),Ap.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($Q),pE.child=e,this.dispatchEvent(pE),pE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_u.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_u.multiply(e.parent.matrixWorld)),e.applyMatrix4(_u),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(dP),Ap.child=e,this.dispatchEvent(Ap),Ap.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xm,e,YQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xm,XQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let d=0,h=c.length;d<h;d++){const w=c[d];s(e.shapes,w)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(e.materials,this.material[c]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),d=o(e.textures),h=o(e.images),w=o(e.shapes),_=o(e.skeletons),x=o(e.animations),A=o(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),d.length>0&&(n.textures=d),h.length>0&&(n.images=h),w.length>0&&(n.shapes=w),_.length>0&&(n.skeletons=_),x.length>0&&(n.animations=x),A.length>0&&(n.nodes=A)}return n.object=i,n;function o(l){const c=[];for(const d in l){const h=l[d];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}dr.DEFAULT_UP=new we(0,1,0);dr.DEFAULT_MATRIX_AUTO_UPDATE=!0;dr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Da=new we,xu=new we,mE=new we,Su=new we,Tp=new we,Rp=new we,pP=new we,gE=new we,yE=new we,vE=new we,wE=new hr,_E=new hr,xE=new hr;class yo{constructor(e=new we,t=new we,n=new we){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Da.subVectors(e,t),i.cross(Da);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Da.subVectors(i,t),xu.subVectors(n,t),mE.subVectors(e,t);const o=Da.dot(Da),l=Da.dot(xu),c=Da.dot(mE),d=xu.dot(xu),h=xu.dot(mE),w=o*d-l*l;if(w===0)return s.set(0,0,0),null;const _=1/w,x=(d*c-l*h)*_,A=(o*h-l*c)*_;return s.set(1-x-A,A,x)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Su)===null?!1:Su.x>=0&&Su.y>=0&&Su.x+Su.y<=1}static getInterpolation(e,t,n,i,s,o,l,c){return this.getBarycoord(e,t,n,i,Su)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Su.x),c.addScaledVector(o,Su.y),c.addScaledVector(l,Su.z),c)}static getInterpolatedAttribute(e,t,n,i,s,o){return wE.setScalar(0),_E.setScalar(0),xE.setScalar(0),wE.fromBufferAttribute(e,t),_E.fromBufferAttribute(e,n),xE.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(wE,s.x),o.addScaledVector(_E,s.y),o.addScaledVector(xE,s.z),o}static isFrontFacing(e,t,n,i){return Da.subVectors(n,t),xu.subVectors(e,t),Da.cross(xu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Da.subVectors(this.c,this.b),xu.subVectors(this.a,this.b),Da.cross(xu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return yo.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return yo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,l;Tp.subVectors(i,n),Rp.subVectors(s,n),gE.subVectors(e,n);const c=Tp.dot(gE),d=Rp.dot(gE);if(c<=0&&d<=0)return t.copy(n);yE.subVectors(e,i);const h=Tp.dot(yE),w=Rp.dot(yE);if(h>=0&&w<=h)return t.copy(i);const _=c*w-h*d;if(_<=0&&c>=0&&h<=0)return o=c/(c-h),t.copy(n).addScaledVector(Tp,o);vE.subVectors(e,s);const x=Tp.dot(vE),A=Rp.dot(vE);if(A>=0&&x<=A)return t.copy(s);const L=x*d-c*A;if(L<=0&&d>=0&&A<=0)return l=d/(d-A),t.copy(n).addScaledVector(Rp,l);const N=h*A-x*w;if(N<=0&&w-h>=0&&x-A>=0)return pP.subVectors(s,i),l=(w-h)/(w-h+(x-A)),t.copy(i).addScaledVector(pP,l);const C=1/(N+L+_);return o=L*C,l=_*C,t.copy(n).addScaledVector(Tp,o).addScaledVector(Rp,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const G6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bc={h:0,s:0,l:0},fw={h:0,s:0,l:0};function SE(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class ln{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=oa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=gr.workingColorSpace){return this.r=e,this.g=t,this.b=n,gr.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=gr.workingColorSpace){if(e=pR(e,1),t=ai(t,0,1),n=ai(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=SE(o,s,e+1/3),this.g=SE(o,s,e),this.b=SE(o,s,e-1/3)}return gr.toWorkingColorSpace(this,i),this}setStyle(e,t=oa){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],l=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=oa){const n=G6[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=f0(e.r),this.g=f0(e.g),this.b=f0(e.b),this}copyLinearToSRGB(e){return this.r=oE(e.r),this.g=oE(e.g),this.b=oE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=oa){return gr.fromWorkingColorSpace(As.copy(this),e),Math.round(ai(As.r*255,0,255))*65536+Math.round(ai(As.g*255,0,255))*256+Math.round(ai(As.b*255,0,255))}getHexString(e=oa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=gr.workingColorSpace){gr.fromWorkingColorSpace(As.copy(this),t);const n=As.r,i=As.g,s=As.b,o=Math.max(n,i,s),l=Math.min(n,i,s);let c,d;const h=(l+o)/2;if(l===o)c=0,d=0;else{const w=o-l;switch(d=h<=.5?w/(o+l):w/(2-o-l),o){case n:c=(i-s)/w+(i<s?6:0);break;case i:c=(s-n)/w+2;break;case s:c=(n-i)/w+4;break}c/=6}return e.h=c,e.s=d,e.l=h,e}getRGB(e,t=gr.workingColorSpace){return gr.fromWorkingColorSpace(As.copy(this),t),e.r=As.r,e.g=As.g,e.b=As.b,e}getStyle(e=oa){gr.fromWorkingColorSpace(As.copy(this),e);const t=As.r,n=As.g,i=As.b;return e!==oa?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Bc),this.setHSL(Bc.h+e,Bc.s+t,Bc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Bc),e.getHSL(fw);const n=Cg(Bc.h,fw.h,t),i=Cg(Bc.s,fw.s,t),s=Cg(Bc.l,fw.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const As=new ln;ln.NAMES=G6;let ZQ=0;class ks extends kl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ZQ++}),this.uuid=Wo(),this.name="",this.type="Material",this.blending=Gh,this.side=ju,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=K_,this.blendDst=Y_,this.blendEquation=Kc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ln(0,0,0),this.blendAlpha=0,this.depthFunc=Jh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_h,this.stencilZFail=_h,this.stencilZPass=_h,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Gh&&(n.blending=this.blending),this.side!==ju&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==K_&&(n.blendSrc=this.blendSrc),this.blendDst!==Y_&&(n.blendDst=this.blendDst),this.blendEquation!==Kc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Jh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==mA&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_h&&(n.stencilFail=this.stencilFail),this.stencilZFail!==_h&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==_h&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class cf extends ks{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ho,this.combine=Iy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Lu=QQ();function QQ(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const d=c-127;d<-27?(n[c]=0,n[c|256]=32768,i[c]=24,i[c|256]=24):d<-14?(n[c]=1024>>-d-14,n[c|256]=1024>>-d-14|32768,i[c]=-d-1,i[c|256]=-d-1):d<=15?(n[c]=d+15<<10,n[c|256]=d+15<<10|32768,i[c]=13,i[c|256]=13):d<128?(n[c]=31744,n[c|256]=64512,i[c]=24,i[c|256]=24):(n[c]=31744,n[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let d=c<<13,h=0;for(;(d&8388608)===0;)d<<=1,h-=8388608;d&=-8388609,h+=947912704,s[c]=d|h}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:l}}function ho(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=ai(r,-65504,65504),Lu.floatView[0]=r;const e=Lu.uint32View[0],t=e>>23&511;return Lu.baseTable[t]+((e&8388607)>>Lu.shiftTable[t])}function fg(r){const e=r>>10;return Lu.uint32View[0]=Lu.mantissaTable[Lu.offsetTable[e]+(r&1023)]+Lu.exponentTable[e],Lu.floatView[0]}const JQ={toHalfFloat:ho,fromHalfFloat:fg},bi=new we,hw=new St;class Ir{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=ry,this.updateRanges=[],this.gpuType=wo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)hw.fromBufferAttribute(this,t),hw.applyMatrix3(e),this.setXY(t,hw.x,hw.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)bi.fromBufferAttribute(this,t),bi.applyMatrix3(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)bi.fromBufferAttribute(this,t),bi.applyMatrix4(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)bi.fromBufferAttribute(this,t),bi.applyNormalMatrix(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)bi.fromBufferAttribute(this,t),bi.transformDirection(e),this.setXYZ(t,bi.x,bi.y,bi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ys(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Kn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ys(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ys(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ys(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ys(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array),s=Kn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ry&&(e.usage=this.usage),e}}class eJ extends Ir{constructor(e,t,n){super(new Int8Array(e),t,n)}}class tJ extends Ir{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class nJ extends Ir{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class rJ extends Ir{constructor(e,t,n){super(new Int16Array(e),t,n)}}class gR extends Ir{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class iJ extends Ir{constructor(e,t,n){super(new Int32Array(e),t,n)}}class yR extends Ir{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class sJ extends Ir{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=fg(this.array[e*this.itemSize]);return this.normalized&&(t=Ys(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize]=ho(t),this}getY(e){let t=fg(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ys(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+1]=ho(t),this}getZ(e){let t=fg(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ys(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+2]=ho(t),this}getW(e){let t=fg(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ys(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+3]=ho(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array)),this.array[e+0]=ho(t),this.array[e+1]=ho(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array)),this.array[e+0]=ho(t),this.array[e+1]=ho(n),this.array[e+2]=ho(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array),s=Kn(s,this.array)),this.array[e+0]=ho(t),this.array[e+1]=ho(n),this.array[e+2]=ho(i),this.array[e+3]=ho(s),this}}class vn extends Ir{constructor(e,t,n){super(new Float32Array(e),t,n)}}let oJ=0;const ra=new Ln,ME=new dr,Cp=new we,ko=new $s,$m=new $s,Ki=new we;class Jn extends kl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oJ++}),this.uuid=Wo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(z6(e)?yR:gR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new jn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ra.makeRotationFromQuaternion(e),this.applyMatrix4(ra),this}rotateX(e){return ra.makeRotationX(e),this.applyMatrix4(ra),this}rotateY(e){return ra.makeRotationY(e),this.applyMatrix4(ra),this}rotateZ(e){return ra.makeRotationZ(e),this.applyMatrix4(ra),this}translate(e,t,n){return ra.makeTranslation(e,t,n),this.applyMatrix4(ra),this}scale(e,t,n){return ra.makeScale(e,t,n),this.applyMatrix4(ra),this}lookAt(e){return ME.lookAt(e),ME.updateMatrix(),this.applyMatrix4(ME.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cp).negate(),this.translate(Cp.x,Cp.y,Cp.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new vn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $s);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new we(-1/0,-1/0,-1/0),new we(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];ko.setFromBufferAttribute(s),this.morphTargetsRelative?(Ki.addVectors(this.boundingBox.min,ko.min),this.boundingBox.expandByPoint(Ki),Ki.addVectors(this.boundingBox.max,ko.max),this.boundingBox.expandByPoint(Ki)):(this.boundingBox.expandByPoint(ko.min),this.boundingBox.expandByPoint(ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new we,1/0);return}if(e){const n=this.boundingSphere.center;if(ko.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];$m.setFromBufferAttribute(l),this.morphTargetsRelative?(Ki.addVectors(ko.min,$m.min),ko.expandByPoint(Ki),Ki.addVectors(ko.max,$m.max),ko.expandByPoint(Ki)):(ko.expandByPoint($m.min),ko.expandByPoint($m.max))}ko.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)Ki.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Ki));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let d=0,h=l.count;d<h;d++)Ki.fromBufferAttribute(l,d),c&&(Cp.fromBufferAttribute(e,d),Ki.add(Cp)),i=Math.max(i,n.distanceToSquared(Ki))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ir(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let ee=0;ee<n.count;ee++)l[ee]=new we,c[ee]=new we;const d=new we,h=new we,w=new we,_=new St,x=new St,A=new St,L=new we,N=new we;function C(ee,te,U){d.fromBufferAttribute(n,ee),h.fromBufferAttribute(n,te),w.fromBufferAttribute(n,U),_.fromBufferAttribute(s,ee),x.fromBufferAttribute(s,te),A.fromBufferAttribute(s,U),h.sub(d),w.sub(d),x.sub(_),A.sub(_);const V=1/(x.x*A.y-A.x*x.y);isFinite(V)&&(L.copy(h).multiplyScalar(A.y).addScaledVector(w,-x.y).multiplyScalar(V),N.copy(w).multiplyScalar(x.x).addScaledVector(h,-A.x).multiplyScalar(V),l[ee].add(L),l[te].add(L),l[U].add(L),c[ee].add(N),c[te].add(N),c[U].add(N))}let D=this.groups;D.length===0&&(D=[{start:0,count:e.count}]);for(let ee=0,te=D.length;ee<te;++ee){const U=D[ee],V=U.start,K=U.count;for(let E=V,a=V+K;E<a;E+=3)C(e.getX(E+0),e.getX(E+1),e.getX(E+2))}const k=new we,F=new we,Q=new we,G=new we;function Y(ee){Q.fromBufferAttribute(i,ee),G.copy(Q);const te=l[ee];k.copy(te),k.sub(Q.multiplyScalar(Q.dot(te))).normalize(),F.crossVectors(G,te);const V=F.dot(c[ee])<0?-1:1;o.setXYZW(ee,k.x,k.y,k.z,V)}for(let ee=0,te=D.length;ee<te;++ee){const U=D[ee],V=U.start,K=U.count;for(let E=V,a=V+K;E<a;E+=3)Y(e.getX(E+0)),Y(e.getX(E+1)),Y(e.getX(E+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Ir(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let _=0,x=n.count;_<x;_++)n.setXYZ(_,0,0,0);const i=new we,s=new we,o=new we,l=new we,c=new we,d=new we,h=new we,w=new we;if(e)for(let _=0,x=e.count;_<x;_+=3){const A=e.getX(_+0),L=e.getX(_+1),N=e.getX(_+2);i.fromBufferAttribute(t,A),s.fromBufferAttribute(t,L),o.fromBufferAttribute(t,N),h.subVectors(o,s),w.subVectors(i,s),h.cross(w),l.fromBufferAttribute(n,A),c.fromBufferAttribute(n,L),d.fromBufferAttribute(n,N),l.add(h),c.add(h),d.add(h),n.setXYZ(A,l.x,l.y,l.z),n.setXYZ(L,c.x,c.y,c.z),n.setXYZ(N,d.x,d.y,d.z)}else for(let _=0,x=t.count;_<x;_+=3)i.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),h.subVectors(o,s),w.subVectors(i,s),h.cross(w),n.setXYZ(_+0,h.x,h.y,h.z),n.setXYZ(_+1,h.x,h.y,h.z),n.setXYZ(_+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ki.fromBufferAttribute(e,t),Ki.normalize(),e.setXYZ(t,Ki.x,Ki.y,Ki.z)}toNonIndexed(){function e(l,c){const d=l.array,h=l.itemSize,w=l.normalized,_=new d.constructor(c.length*h);let x=0,A=0;for(let L=0,N=c.length;L<N;L++){l.isInterleavedBufferAttribute?x=c[L]*l.data.stride+l.offset:x=c[L]*h;for(let C=0;C<h;C++)_[A++]=d[x++]}return new Ir(_,h,w)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jn,n=this.index.array,i=this.attributes;for(const l in i){const c=i[l],d=e(c,n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const c=[],d=s[l];for(let h=0,w=d.length;h<w;h++){const _=d[h],x=e(_,n);c.push(x)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const d in c)c[d]!==void 0&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const d=n[c];e.data.attributes[c]=d.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],h=[];for(let w=0,_=d.length;w<_;w++){const x=d[w];h.push(x.toJSON(e.data))}h.length>0&&(i[c]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const d in i){const h=i[d];this.setAttribute(d,h.clone(t))}const s=e.morphAttributes;for(const d in s){const h=[],w=s[d];for(let _=0,x=w.length;_<x;_++)h.push(w[_].clone(t));this.morphAttributes[d]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,h=o.length;d<h;d++){const w=o[d];this.addGroup(w.start,w.count,w.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const mP=new Ln,sh=new hd,dw=new Ls,gP=new we,pw=new we,mw=new we,gw=new we,EE=new we,yw=new we,yP=new we,vw=new we;class Ni extends dr{constructor(e=new Jn,t=new cf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){yw.set(0,0,0);for(let c=0,d=s.length;c<d;c++){const h=l[c],w=s[c];h!==0&&(EE.fromBufferAttribute(w,e),o?yw.addScaledVector(EE,h):yw.addScaledVector(EE.sub(t),h))}t.add(yw)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),dw.copy(n.boundingSphere),dw.applyMatrix4(s),sh.copy(e.ray).recast(e.near),!(dw.containsPoint(sh.origin)===!1&&(sh.intersectSphere(dw,gP)===null||sh.origin.distanceToSquared(gP)>(e.far-e.near)**2))&&(mP.copy(s).invert(),sh.copy(e.ray).applyMatrix4(mP),!(n.boundingBox!==null&&sh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,sh)))}_computeIntersections(e,t,n){let i;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,d=s.attributes.uv,h=s.attributes.uv1,w=s.attributes.normal,_=s.groups,x=s.drawRange;if(l!==null)if(Array.isArray(o))for(let A=0,L=_.length;A<L;A++){const N=_[A],C=o[N.materialIndex],D=Math.max(N.start,x.start),k=Math.min(l.count,Math.min(N.start+N.count,x.start+x.count));for(let F=D,Q=k;F<Q;F+=3){const G=l.getX(F),Y=l.getX(F+1),ee=l.getX(F+2);i=ww(this,C,e,n,d,h,w,G,Y,ee),i&&(i.faceIndex=Math.floor(F/3),i.face.materialIndex=N.materialIndex,t.push(i))}}else{const A=Math.max(0,x.start),L=Math.min(l.count,x.start+x.count);for(let N=A,C=L;N<C;N+=3){const D=l.getX(N),k=l.getX(N+1),F=l.getX(N+2);i=ww(this,o,e,n,d,h,w,D,k,F),i&&(i.faceIndex=Math.floor(N/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let A=0,L=_.length;A<L;A++){const N=_[A],C=o[N.materialIndex],D=Math.max(N.start,x.start),k=Math.min(c.count,Math.min(N.start+N.count,x.start+x.count));for(let F=D,Q=k;F<Q;F+=3){const G=F,Y=F+1,ee=F+2;i=ww(this,C,e,n,d,h,w,G,Y,ee),i&&(i.faceIndex=Math.floor(F/3),i.face.materialIndex=N.materialIndex,t.push(i))}}else{const A=Math.max(0,x.start),L=Math.min(c.count,x.start+x.count);for(let N=A,C=L;N<C;N+=3){const D=N,k=N+1,F=N+2;i=ww(this,o,e,n,d,h,w,D,k,F),i&&(i.faceIndex=Math.floor(N/3),t.push(i))}}}}function aJ(r,e,t,n,i,s,o,l){let c;if(e.side===Xs?c=n.intersectTriangle(o,s,i,!0,l):c=n.intersectTriangle(i,s,o,e.side===ju,l),c===null)return null;vw.copy(l),vw.applyMatrix4(r.matrixWorld);const d=t.ray.origin.distanceTo(vw);return d<t.near||d>t.far?null:{distance:d,point:vw.clone(),object:r}}function ww(r,e,t,n,i,s,o,l,c,d){r.getVertexPosition(l,pw),r.getVertexPosition(c,mw),r.getVertexPosition(d,gw);const h=aJ(r,e,t,n,pw,mw,gw,yP);if(h){const w=new we;yo.getBarycoord(yP,pw,mw,gw,w),i&&(h.uv=yo.getInterpolatedAttribute(i,l,c,d,w,new St)),s&&(h.uv1=yo.getInterpolatedAttribute(s,l,c,d,w,new St)),o&&(h.normal=yo.getInterpolatedAttribute(o,l,c,d,w,new we),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const _={a:l,b:c,c:d,normal:new we,materialIndex:0};yo.getNormal(pw,mw,gw,_.normal),h.face=_,h.barycoord=w}return h}class dd extends Jn{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const l=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],d=[],h=[],w=[];let _=0,x=0;A("z","y","x",-1,-1,n,t,e,o,s,0),A("z","y","x",1,-1,n,t,-e,o,s,1),A("x","z","y",1,1,e,n,t,i,o,2),A("x","z","y",1,-1,e,n,-t,i,o,3),A("x","y","z",1,-1,e,t,n,i,s,4),A("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new vn(d,3)),this.setAttribute("normal",new vn(h,3)),this.setAttribute("uv",new vn(w,2));function A(L,N,C,D,k,F,Q,G,Y,ee,te){const U=F/Y,V=Q/ee,K=F/2,E=Q/2,a=G/2,p=Y+1,M=ee+1;let R=0,T=0;const P=new we;for(let I=0;I<M;I++){const y=I*V-E;for(let u=0;u<p;u++){const S=u*U-K;P[L]=S*D,P[N]=y*k,P[C]=a,d.push(P.x,P.y,P.z),P[L]=0,P[N]=0,P[C]=G>0?1:-1,h.push(P.x,P.y,P.z),w.push(u/Y),w.push(1-I/ee),R+=1}}for(let I=0;I<ee;I++)for(let y=0;y<Y;y++){const u=_+y+p*I,S=_+y+p*(I+1),W=_+(y+1)+p*(I+1),$=_+(y+1)+p*I;c.push(u,S,$),c.push(S,W,$),T+=6}l.addGroup(x,T,te),x+=T,_+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function S0(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Ks(r){const e={};for(let t=0;t<r.length;t++){const n=S0(r[t]);for(const i in n)e[i]=n[i]}return e}function lJ(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function j6(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:gr.workingColorSpace}const q6={clone:S0,merge:Ks};var uJ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cJ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ka extends ks{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uJ,this.fragmentShader=cJ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=S0(e.uniforms),this.uniformsGroups=lJ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ly extends dr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ln,this.projectionMatrix=new Ln,this.projectionMatrixInverse=new Ln,this.coordinateSystem=bl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Uc=new we,vP=new St,wP=new St;class mi extends Ly{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=x0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(qh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return x0*2*Math.atan(Math.tan(qh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Uc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Uc.x,Uc.y).multiplyScalar(-e/Uc.z),Uc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Uc.x,Uc.y).multiplyScalar(-e/Uc.z)}getViewSize(e,t){return this.getViewBounds(e,vP,wP),t.subVectors(wP,vP)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(qh*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,d=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*n/d,i*=o.width/c,n*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ip=-90,Np=1;class K6 extends dr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new mi(Ip,Np,e,t);i.layers=this.layers,this.add(i);const s=new mi(Ip,Np,e,t);s.layers=this.layers,this.add(s);const o=new mi(Ip,Np,e,t);o.layers=this.layers,this.add(o);const l=new mi(Ip,Np,e,t);l.layers=this.layers,this.add(l);const c=new mi(Ip,Np,e,t);c.layers=this.layers,this.add(c);const d=new mi(Ip,Np,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,o,l,c]=t;for(const d of t)this.remove(d);if(e===bl)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===iy)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,c,d,h]=this.children,w=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const L=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,l),e.setRenderTarget(n,3,i),e.render(t,c),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=L,e.setRenderTarget(n,5,i),e.render(t,h),e.setRenderTarget(w,_,x),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}class ky extends li{constructor(e,t,n,i,s,o,l,c,d,h){e=e!==void 0?e:[],t=t!==void 0?t:qu,super(e,t,n,i,s,o,l,c,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Y6 extends qa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new ky(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ci}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new dd(5,5,5),s=new Ka({name:"CubemapFromEquirect",uniforms:S0(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Xs,blending:Wu});s.uniforms.tEquirect.value=t;const o=new Ni(i,s),l=t.minFilter;return t.minFilter===El&&(t.minFilter=Ci),new K6(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const bE=new we,fJ=new we,hJ=new jn;class Tu{constructor(e=new we(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=bE.subVectors(n,t).cross(fJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(bE),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||hJ.getNormalMatrix(e),i=this.coplanarPoint(bE).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const oh=new Ls,_w=new we;class Oy{constructor(e=new Tu,t=new Tu,n=new Tu,i=new Tu,s=new Tu,o=new Tu){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=bl){const n=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],c=i[3],d=i[4],h=i[5],w=i[6],_=i[7],x=i[8],A=i[9],L=i[10],N=i[11],C=i[12],D=i[13],k=i[14],F=i[15];if(n[0].setComponents(c-s,_-d,N-x,F-C).normalize(),n[1].setComponents(c+s,_+d,N+x,F+C).normalize(),n[2].setComponents(c+o,_+h,N+A,F+D).normalize(),n[3].setComponents(c-o,_-h,N-A,F-D).normalize(),n[4].setComponents(c-l,_-w,N-L,F-k).normalize(),t===bl)n[5].setComponents(c+l,_+w,N+L,F+k).normalize();else if(t===iy)n[5].setComponents(l,w,L,k).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),oh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),oh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(oh)}intersectsSprite(e){return oh.center.set(0,0,0),oh.radius=.7071067811865476,oh.applyMatrix4(e.matrixWorld),this.intersectsSphere(oh)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(_w.x=i.normal.x>0?e.max.x:e.min.x,_w.y=i.normal.y>0?e.max.y:e.min.y,_w.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(_w)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function X6(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function dJ(r){const e=new WeakMap;function t(l,c){const d=l.array,h=l.usage,w=d.byteLength,_=r.createBuffer();r.bindBuffer(c,_),r.bufferData(c,d,h),l.onUploadCallback();let x;if(d instanceof Float32Array)x=r.FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?x=r.HALF_FLOAT:x=r.UNSIGNED_SHORT;else if(d instanceof Int16Array)x=r.SHORT;else if(d instanceof Uint32Array)x=r.UNSIGNED_INT;else if(d instanceof Int32Array)x=r.INT;else if(d instanceof Int8Array)x=r.BYTE;else if(d instanceof Uint8Array)x=r.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)x=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:_,type:x,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:w}}function n(l,c,d){const h=c.array,w=c.updateRanges;if(r.bindBuffer(d,l),w.length===0)r.bufferSubData(d,0,h);else{w.sort((x,A)=>x.start-A.start);let _=0;for(let x=1;x<w.length;x++){const A=w[_],L=w[x];L.start<=A.start+A.count+1?A.count=Math.max(A.count,L.start+L.count-A.start):(++_,w[_]=L)}w.length=_+1;for(let x=0,A=w.length;x<A;x++){const L=w[x];r.bufferSubData(d,L.start*h.BYTES_PER_ELEMENT,h,L.start,L.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(r.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const h=e.get(l);(!h||h.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,c));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,l,c),d.version=l.version}}return{get:i,remove:s,update:o}}class O0 extends Jn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,l=Math.floor(n),c=Math.floor(i),d=l+1,h=c+1,w=e/l,_=t/c,x=[],A=[],L=[],N=[];for(let C=0;C<h;C++){const D=C*_-o;for(let k=0;k<d;k++){const F=k*w-s;A.push(F,-D,0),L.push(0,0,1),N.push(k/l),N.push(1-C/c)}}for(let C=0;C<c;C++)for(let D=0;D<l;D++){const k=D+d*C,F=D+d*(C+1),Q=D+1+d*(C+1),G=D+1+d*C;x.push(k,F,G),x.push(F,Q,G)}this.setIndex(x),this.setAttribute("position",new vn(A,3)),this.setAttribute("normal",new vn(L,3)),this.setAttribute("uv",new vn(N,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new O0(e.width,e.height,e.widthSegments,e.heightSegments)}}var pJ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,mJ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,gJ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,yJ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vJ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wJ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_J=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,xJ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,SJ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,MJ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,EJ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bJ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,AJ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,TJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,RJ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,CJ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,IJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,NJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,PJ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,LJ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,OJ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,DJ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,BJ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UJ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FJ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,zJ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,WJ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,VJ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HJ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,GJ="gl_FragColor = linearToOutputTexel( gl_FragColor );",jJ=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,qJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,KJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,YJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,XJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$J=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ZJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,QJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,JJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eee=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tee=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nee=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,ree=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,iee=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,see=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,oee=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,aee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,uee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,fee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,hee=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dee=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mee=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,gee=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,yee=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vee=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wee=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_ee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,xee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,See=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Mee=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Eee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Aee=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Tee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ree=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Cee=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Iee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Pee=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Lee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Oee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Dee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Bee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Uee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Fee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,zee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Wee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Vee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Hee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Gee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Kee=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yee=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Xee=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,$ee=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Zee=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Qee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Jee=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ete=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,tte=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nte=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,rte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ite=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ste=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ote=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ate=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,lte=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ute=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,fte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,hte=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const dte=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,pte=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_te=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,xte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ste=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Mte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ete=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ate=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Rte=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ite=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Pte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Ote=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ute=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zte=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Vte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Hte=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gte=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jte=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xn={alphahash_fragment:pJ,alphahash_pars_fragment:mJ,alphamap_fragment:gJ,alphamap_pars_fragment:yJ,alphatest_fragment:vJ,alphatest_pars_fragment:wJ,aomap_fragment:_J,aomap_pars_fragment:xJ,batching_pars_vertex:SJ,batching_vertex:MJ,begin_vertex:EJ,beginnormal_vertex:bJ,bsdfs:AJ,iridescence_fragment:TJ,bumpmap_pars_fragment:RJ,clipping_planes_fragment:CJ,clipping_planes_pars_fragment:IJ,clipping_planes_pars_vertex:NJ,clipping_planes_vertex:PJ,color_fragment:LJ,color_pars_fragment:kJ,color_pars_vertex:OJ,color_vertex:DJ,common:BJ,cube_uv_reflection_fragment:UJ,defaultnormal_vertex:FJ,displacementmap_pars_vertex:zJ,displacementmap_vertex:WJ,emissivemap_fragment:VJ,emissivemap_pars_fragment:HJ,colorspace_fragment:GJ,colorspace_pars_fragment:jJ,envmap_fragment:qJ,envmap_common_pars_fragment:KJ,envmap_pars_fragment:YJ,envmap_pars_vertex:XJ,envmap_physical_pars_fragment:oee,envmap_vertex:$J,fog_vertex:ZJ,fog_pars_vertex:QJ,fog_fragment:JJ,fog_pars_fragment:eee,gradientmap_pars_fragment:tee,lightmap_pars_fragment:nee,lights_lambert_fragment:ree,lights_lambert_pars_fragment:iee,lights_pars_begin:see,lights_toon_fragment:aee,lights_toon_pars_fragment:lee,lights_phong_fragment:uee,lights_phong_pars_fragment:cee,lights_physical_fragment:fee,lights_physical_pars_fragment:hee,lights_fragment_begin:dee,lights_fragment_maps:pee,lights_fragment_end:mee,logdepthbuf_fragment:gee,logdepthbuf_pars_fragment:yee,logdepthbuf_pars_vertex:vee,logdepthbuf_vertex:wee,map_fragment:_ee,map_pars_fragment:xee,map_particle_fragment:See,map_particle_pars_fragment:Mee,metalnessmap_fragment:Eee,metalnessmap_pars_fragment:bee,morphinstance_vertex:Aee,morphcolor_vertex:Tee,morphnormal_vertex:Ree,morphtarget_pars_vertex:Cee,morphtarget_vertex:Iee,normal_fragment_begin:Nee,normal_fragment_maps:Pee,normal_pars_fragment:Lee,normal_pars_vertex:kee,normal_vertex:Oee,normalmap_pars_fragment:Dee,clearcoat_normal_fragment_begin:Bee,clearcoat_normal_fragment_maps:Uee,clearcoat_pars_fragment:Fee,iridescence_pars_fragment:zee,opaque_fragment:Wee,packing:Vee,premultiplied_alpha_fragment:Hee,project_vertex:Gee,dithering_fragment:jee,dithering_pars_fragment:qee,roughnessmap_fragment:Kee,roughnessmap_pars_fragment:Yee,shadowmap_pars_fragment:Xee,shadowmap_pars_vertex:$ee,shadowmap_vertex:Zee,shadowmask_pars_fragment:Qee,skinbase_vertex:Jee,skinning_pars_vertex:ete,skinning_vertex:tte,skinnormal_vertex:nte,specularmap_fragment:rte,specularmap_pars_fragment:ite,tonemapping_fragment:ste,tonemapping_pars_fragment:ote,transmission_fragment:ate,transmission_pars_fragment:lte,uv_pars_fragment:ute,uv_pars_vertex:cte,uv_vertex:fte,worldpos_vertex:hte,background_vert:dte,background_frag:pte,backgroundCube_vert:mte,backgroundCube_frag:gte,cube_vert:yte,cube_frag:vte,depth_vert:wte,depth_frag:_te,distanceRGBA_vert:xte,distanceRGBA_frag:Ste,equirect_vert:Mte,equirect_frag:Ete,linedashed_vert:bte,linedashed_frag:Ate,meshbasic_vert:Tte,meshbasic_frag:Rte,meshlambert_vert:Cte,meshlambert_frag:Ite,meshmatcap_vert:Nte,meshmatcap_frag:Pte,meshnormal_vert:Lte,meshnormal_frag:kte,meshphong_vert:Ote,meshphong_frag:Dte,meshphysical_vert:Bte,meshphysical_frag:Ute,meshtoon_vert:Fte,meshtoon_frag:zte,points_vert:Wte,points_frag:Vte,shadow_vert:Hte,shadow_frag:Gte,sprite_vert:jte,sprite_frag:qte},Jt={common:{diffuse:{value:new ln(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jn}},envmap:{envMap:{value:null},envMapRotation:{value:new jn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jn},normalScale:{value:new St(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ln(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ln(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0},uvTransform:{value:new jn}},sprite:{diffuse:{value:new ln(16777215)},opacity:{value:1},center:{value:new St(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}}},za={basic:{uniforms:Ks([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.fog]),vertexShader:Xn.meshbasic_vert,fragmentShader:Xn.meshbasic_frag},lambert:{uniforms:Ks([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new ln(0)}}]),vertexShader:Xn.meshlambert_vert,fragmentShader:Xn.meshlambert_frag},phong:{uniforms:Ks([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new ln(0)},specular:{value:new ln(1118481)},shininess:{value:30}}]),vertexShader:Xn.meshphong_vert,fragmentShader:Xn.meshphong_frag},standard:{uniforms:Ks([Jt.common,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.roughnessmap,Jt.metalnessmap,Jt.fog,Jt.lights,{emissive:{value:new ln(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag},toon:{uniforms:Ks([Jt.common,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.gradientmap,Jt.fog,Jt.lights,{emissive:{value:new ln(0)}}]),vertexShader:Xn.meshtoon_vert,fragmentShader:Xn.meshtoon_frag},matcap:{uniforms:Ks([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,{matcap:{value:null}}]),vertexShader:Xn.meshmatcap_vert,fragmentShader:Xn.meshmatcap_frag},points:{uniforms:Ks([Jt.points,Jt.fog]),vertexShader:Xn.points_vert,fragmentShader:Xn.points_frag},dashed:{uniforms:Ks([Jt.common,Jt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xn.linedashed_vert,fragmentShader:Xn.linedashed_frag},depth:{uniforms:Ks([Jt.common,Jt.displacementmap]),vertexShader:Xn.depth_vert,fragmentShader:Xn.depth_frag},normal:{uniforms:Ks([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,{opacity:{value:1}}]),vertexShader:Xn.meshnormal_vert,fragmentShader:Xn.meshnormal_frag},sprite:{uniforms:Ks([Jt.sprite,Jt.fog]),vertexShader:Xn.sprite_vert,fragmentShader:Xn.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xn.background_vert,fragmentShader:Xn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jn}},vertexShader:Xn.backgroundCube_vert,fragmentShader:Xn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xn.cube_vert,fragmentShader:Xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xn.equirect_vert,fragmentShader:Xn.equirect_frag},distanceRGBA:{uniforms:Ks([Jt.common,Jt.displacementmap,{referencePosition:{value:new we},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xn.distanceRGBA_vert,fragmentShader:Xn.distanceRGBA_frag},shadow:{uniforms:Ks([Jt.lights,Jt.fog,{color:{value:new ln(0)},opacity:{value:1}}]),vertexShader:Xn.shadow_vert,fragmentShader:Xn.shadow_frag}};za.physical={uniforms:Ks([za.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jn},clearcoatNormalScale:{value:new St(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jn},sheen:{value:0},sheenColor:{value:new ln(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jn},transmissionSamplerSize:{value:new St},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jn},attenuationDistance:{value:0},attenuationColor:{value:new ln(0)},specularColor:{value:new ln(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jn},anisotropyVector:{value:new St},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jn}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag};const xw={r:0,b:0,g:0},ah=new Ho,Kte=new Ln;function Yte(r,e,t,n,i,s,o){const l=new ln(0);let c=s===!0?0:1,d,h,w=null,_=0,x=null;function A(D){let k=D.isScene===!0?D.background:null;return k&&k.isTexture&&(k=(D.backgroundBlurriness>0?t:e).get(k)),k}function L(D){let k=!1;const F=A(D);F===null?C(l,c):F&&F.isColor&&(C(F,1),k=!0);const Q=r.xr.getEnvironmentBlendMode();Q==="additive"?n.buffers.color.setClear(0,0,0,1,o):Q==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(r.autoClear||k)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function N(D,k){const F=A(k);F&&(F.isCubeTexture||F.mapping===L0)?(h===void 0&&(h=new Ni(new dd(1,1,1),new Ka({name:"BackgroundCubeMaterial",uniforms:S0(za.backgroundCube.uniforms),vertexShader:za.backgroundCube.vertexShader,fragmentShader:za.backgroundCube.fragmentShader,side:Xs,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(Q,G,Y){this.matrixWorld.copyPosition(Y.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),ah.copy(k.backgroundRotation),ah.x*=-1,ah.y*=-1,ah.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(ah.y*=-1,ah.z*=-1),h.material.uniforms.envMap.value=F,h.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(Kte.makeRotationFromEuler(ah)),h.material.toneMapped=gr.getTransfer(F.colorSpace)!==Br,(w!==F||_!==F.version||x!==r.toneMapping)&&(h.material.needsUpdate=!0,w=F,_=F.version,x=r.toneMapping),h.layers.enableAll(),D.unshift(h,h.geometry,h.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new Ni(new O0(2,2),new Ka({name:"BackgroundMaterial",uniforms:S0(za.background.uniforms),vertexShader:za.background.vertexShader,fragmentShader:za.background.fragmentShader,side:ju,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,d.material.toneMapped=gr.getTransfer(F.colorSpace)!==Br,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(w!==F||_!==F.version||x!==r.toneMapping)&&(d.material.needsUpdate=!0,w=F,_=F.version,x=r.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null))}function C(D,k){D.getRGB(xw,j6(r)),n.buffers.color.setClear(xw.r,xw.g,xw.b,k,o)}return{getClearColor:function(){return l},setClearColor:function(D,k=1){l.set(D),c=k,C(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(D){c=D,C(l,c)},render:L,addToRenderList:N}}function Xte(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=_(null);let s=i,o=!1;function l(U,V,K,E,a){let p=!1;const M=w(E,K,V);s!==M&&(s=M,d(s.object)),p=x(U,E,K,a),p&&A(U,E,K,a),a!==null&&e.update(a,r.ELEMENT_ARRAY_BUFFER),(p||o)&&(o=!1,F(U,V,K,E),a!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(a).buffer))}function c(){return r.createVertexArray()}function d(U){return r.bindVertexArray(U)}function h(U){return r.deleteVertexArray(U)}function w(U,V,K){const E=K.wireframe===!0;let a=n[U.id];a===void 0&&(a={},n[U.id]=a);let p=a[V.id];p===void 0&&(p={},a[V.id]=p);let M=p[E];return M===void 0&&(M=_(c()),p[E]=M),M}function _(U){const V=[],K=[],E=[];for(let a=0;a<t;a++)V[a]=0,K[a]=0,E[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:K,attributeDivisors:E,object:U,attributes:{},index:null}}function x(U,V,K,E){const a=s.attributes,p=V.attributes;let M=0;const R=K.getAttributes();for(const T in R)if(R[T].location>=0){const I=a[T];let y=p[T];if(y===void 0&&(T==="instanceMatrix"&&U.instanceMatrix&&(y=U.instanceMatrix),T==="instanceColor"&&U.instanceColor&&(y=U.instanceColor)),I===void 0||I.attribute!==y||y&&I.data!==y.data)return!0;M++}return s.attributesNum!==M||s.index!==E}function A(U,V,K,E){const a={},p=V.attributes;let M=0;const R=K.getAttributes();for(const T in R)if(R[T].location>=0){let I=p[T];I===void 0&&(T==="instanceMatrix"&&U.instanceMatrix&&(I=U.instanceMatrix),T==="instanceColor"&&U.instanceColor&&(I=U.instanceColor));const y={};y.attribute=I,I&&I.data&&(y.data=I.data),a[T]=y,M++}s.attributes=a,s.attributesNum=M,s.index=E}function L(){const U=s.newAttributes;for(let V=0,K=U.length;V<K;V++)U[V]=0}function N(U){C(U,0)}function C(U,V){const K=s.newAttributes,E=s.enabledAttributes,a=s.attributeDivisors;K[U]=1,E[U]===0&&(r.enableVertexAttribArray(U),E[U]=1),a[U]!==V&&(r.vertexAttribDivisor(U,V),a[U]=V)}function D(){const U=s.newAttributes,V=s.enabledAttributes;for(let K=0,E=V.length;K<E;K++)V[K]!==U[K]&&(r.disableVertexAttribArray(K),V[K]=0)}function k(U,V,K,E,a,p,M){M===!0?r.vertexAttribIPointer(U,V,K,a,p):r.vertexAttribPointer(U,V,K,E,a,p)}function F(U,V,K,E){L();const a=E.attributes,p=K.getAttributes(),M=V.defaultAttributeValues;for(const R in p){const T=p[R];if(T.location>=0){let P=a[R];if(P===void 0&&(R==="instanceMatrix"&&U.instanceMatrix&&(P=U.instanceMatrix),R==="instanceColor"&&U.instanceColor&&(P=U.instanceColor)),P!==void 0){const I=P.normalized,y=P.itemSize,u=e.get(P);if(u===void 0)continue;const S=u.buffer,W=u.type,$=u.bytesPerElement,se=W===r.INT||W===r.UNSIGNED_INT||P.gpuType===dx;if(P.isInterleavedBufferAttribute){const me=P.data,_e=me.stride,be=P.offset;if(me.isInstancedInterleavedBuffer){for(let wt=0;wt<T.locationSize;wt++)C(T.location+wt,me.meshPerAttribute);U.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let wt=0;wt<T.locationSize;wt++)N(T.location+wt);r.bindBuffer(r.ARRAY_BUFFER,S);for(let wt=0;wt<T.locationSize;wt++)k(T.location+wt,y/T.locationSize,W,I,_e*$,(be+y/T.locationSize*wt)*$,se)}else{if(P.isInstancedBufferAttribute){for(let me=0;me<T.locationSize;me++)C(T.location+me,P.meshPerAttribute);U.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=P.meshPerAttribute*P.count)}else for(let me=0;me<T.locationSize;me++)N(T.location+me);r.bindBuffer(r.ARRAY_BUFFER,S);for(let me=0;me<T.locationSize;me++)k(T.location+me,y/T.locationSize,W,I,y*$,y/T.locationSize*me*$,se)}}else if(M!==void 0){const I=M[R];if(I!==void 0)switch(I.length){case 2:r.vertexAttrib2fv(T.location,I);break;case 3:r.vertexAttrib3fv(T.location,I);break;case 4:r.vertexAttrib4fv(T.location,I);break;default:r.vertexAttrib1fv(T.location,I)}}}}D()}function Q(){ee();for(const U in n){const V=n[U];for(const K in V){const E=V[K];for(const a in E)h(E[a].object),delete E[a];delete V[K]}delete n[U]}}function G(U){if(n[U.id]===void 0)return;const V=n[U.id];for(const K in V){const E=V[K];for(const a in E)h(E[a].object),delete E[a];delete V[K]}delete n[U.id]}function Y(U){for(const V in n){const K=n[V];if(K[U.id]===void 0)continue;const E=K[U.id];for(const a in E)h(E[a].object),delete E[a];delete K[U.id]}}function ee(){te(),o=!0,s!==i&&(s=i,d(s.object))}function te(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:l,reset:ee,resetDefaultState:te,dispose:Q,releaseStatesOfGeometry:G,releaseStatesOfProgram:Y,initAttributes:L,enableAttribute:N,disableUnusedAttributes:D}}function $te(r,e,t){let n;function i(d){n=d}function s(d,h){r.drawArrays(n,d,h),t.update(h,n,1)}function o(d,h,w){w!==0&&(r.drawArraysInstanced(n,d,h,w),t.update(h,n,w))}function l(d,h,w){if(w===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,h,0,w);let x=0;for(let A=0;A<w;A++)x+=h[A];t.update(x,n,1)}function c(d,h,w,_){if(w===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let A=0;A<d.length;A++)o(d[A],h[A],_[A]);else{x.multiDrawArraysInstancedWEBGL(n,d,0,h,0,_,0,w);let A=0;for(let L=0;L<w;L++)A+=h[L];for(let L=0;L<_.length;L++)t.update(A,n,_[L])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function Zte(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const Y=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(Y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(Y){return!(Y!==Ns&&n.convert(Y)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(Y){const ee=Y===k0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(Y!==ja&&n.convert(Y)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&Y!==wo&&!ee)}function c(Y){if(Y==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";Y="mediump"}return Y==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const h=c(d);h!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",h,"instead."),d=h);const w=t.logarithmicDepthBuffer===!0,_=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(_===!0){const Y=e.get("EXT_clip_control");Y.clipControlEXT(Y.LOWER_LEFT_EXT,Y.ZERO_TO_ONE_EXT)}const x=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),A=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),L=r.getParameter(r.MAX_TEXTURE_SIZE),N=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),C=r.getParameter(r.MAX_VERTEX_ATTRIBS),D=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),k=r.getParameter(r.MAX_VARYING_VECTORS),F=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),Q=A>0,G=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:w,reverseDepthBuffer:_,maxTextures:x,maxVertexTextures:A,maxTextureSize:L,maxCubemapSize:N,maxAttributes:C,maxVertexUniforms:D,maxVaryings:k,maxFragmentUniforms:F,vertexTextures:Q,maxSamples:G}}function Qte(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new Tu,l=new jn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(w,_){const x=w.length!==0||_||n!==0||i;return i=_,n=w.length,x},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(w,_){t=h(w,_,0)},this.setState=function(w,_,x){const A=w.clippingPlanes,L=w.clipIntersection,N=w.clipShadows,C=r.get(w);if(!i||A===null||A.length===0||s&&!N)s?h(null):d();else{const D=s?0:n,k=D*4;let F=C.clippingState||null;c.value=F,F=h(A,_,k,x);for(let Q=0;Q!==k;++Q)F[Q]=t[Q];C.clippingState=F,this.numIntersection=L?this.numPlanes:0,this.numPlanes+=D}};function d(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(w,_,x,A){const L=w!==null?w.length:0;let N=null;if(L!==0){if(N=c.value,A!==!0||N===null){const C=x+L*4,D=_.matrixWorldInverse;l.getNormalMatrix(D),(N===null||N.length<C)&&(N=new Float32Array(C));for(let k=0,F=x;k!==L;++k,F+=4)o.copy(w[k]).applyMatrix4(D,l),o.normal.toArray(N,F),N[F+3]=o.constant}c.value=N,c.needsUpdate=!0}return e.numPlanes=L,e.numIntersection=0,N}}function Jte(r){let e=new WeakMap;function t(o,l){return l===Yg?o.mapping=qu:l===Xg&&(o.mapping=sf),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===Yg||l===Xg)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const d=new Y6(c.height);return d.fromEquirectangularTexture(r,o),e.set(o,d),o.addEventListener("dispose",i),t(d.texture,o.mapping)}else return null}}return o}function i(o){const l=o.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Qc extends Ly{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const t0=4,_P=[.125,.215,.35,.446,.526,.582],Eh=20,AE=new Qc,xP=new ln;let TE=null,RE=0,CE=0,IE=!1;const xh=(1+Math.sqrt(5))/2,Pp=1/xh,SP=[new we(-xh,Pp,0),new we(xh,Pp,0),new we(-Pp,0,xh),new we(Pp,0,xh),new we(0,xh,-Pp),new we(0,xh,Pp),new we(-1,1,-1),new we(1,1,-1),new we(-1,1,1),new we(1,1,1)];class yA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){TE=this._renderer.getRenderTarget(),RE=this._renderer.getActiveCubeFace(),CE=this._renderer.getActiveMipmapLevel(),IE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TE,RE,CE),this._renderer.xr.enabled=IE,e.scissorTest=!1,Sw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===qu||e.mapping===sf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TE=this._renderer.getRenderTarget(),RE=this._renderer.getActiveCubeFace(),CE=this._renderer.getActiveMipmapLevel(),IE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ci,minFilter:Ci,generateMipmaps:!1,type:k0,format:Ns,colorSpace:$u,depthBuffer:!1},i=MP(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=MP(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ene(s)),this._blurMaterial=tne(s,e,t)}return i}_compileMaterial(e){const t=new Ni(this._lodPlanes[0],e);this._renderer.compile(t,AE)}_sceneToCubeUV(e,t,n,i){const l=new mi(90,1,t,n),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,w=h.autoClear,_=h.toneMapping;h.getClearColor(xP),h.toneMapping=Cl,h.autoClear=!1;const x=new cf({name:"PMREM.Background",side:Xs,depthWrite:!1,depthTest:!1}),A=new Ni(new dd,x);let L=!1;const N=e.background;N?N.isColor&&(x.color.copy(N),e.background=null,L=!0):(x.color.copy(xP),L=!0);for(let C=0;C<6;C++){const D=C%3;D===0?(l.up.set(0,c[C],0),l.lookAt(d[C],0,0)):D===1?(l.up.set(0,0,c[C]),l.lookAt(0,d[C],0)):(l.up.set(0,c[C],0),l.lookAt(0,0,d[C]));const k=this._cubeSize;Sw(i,D*k,C>2?k:0,k,k),h.setRenderTarget(i),L&&h.render(A,l),h.render(e,l)}A.geometry.dispose(),A.material.dispose(),h.toneMapping=_,h.autoClear=w,e.background=N}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===qu||e.mapping===sf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=bP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=EP());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ni(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;Sw(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,AE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=SP[(i-s-1)%SP.length];this._blur(e,s-1,s,o,l)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,l){const c=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,w=new Ni(this._lodPlanes[i],d),_=d.uniforms,x=this._sizeLods[n]-1,A=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*Eh-1),L=s/A,N=isFinite(s)?1+Math.floor(h*L):Eh;N>Eh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${N} samples when the maximum is set to ${Eh}`);const C=[];let D=0;for(let Y=0;Y<Eh;++Y){const ee=Y/L,te=Math.exp(-ee*ee/2);C.push(te),Y===0?D+=te:Y<N&&(D+=2*te)}for(let Y=0;Y<C.length;Y++)C[Y]=C[Y]/D;_.envMap.value=e.texture,_.samples.value=N,_.weights.value=C,_.latitudinal.value=o==="latitudinal",l&&(_.poleAxis.value=l);const{_lodMax:k}=this;_.dTheta.value=A,_.mipInt.value=k-n;const F=this._sizeLods[i],Q=3*F*(i>k-t0?i-k+t0:0),G=4*(this._cubeSize-F);Sw(t,Q,G,3*F,2*F),c.setRenderTarget(t),c.render(w,AE)}}function ene(r){const e=[],t=[],n=[];let i=r;const s=r-t0+1+_P.length;for(let o=0;o<s;o++){const l=Math.pow(2,i);t.push(l);let c=1/l;o>r-t0?c=_P[o-r+t0-1]:o===0&&(c=0),n.push(c);const d=1/(l-2),h=-d,w=1+d,_=[h,h,w,h,w,w,h,h,w,w,h,w],x=6,A=6,L=3,N=2,C=1,D=new Float32Array(L*A*x),k=new Float32Array(N*A*x),F=new Float32Array(C*A*x);for(let G=0;G<x;G++){const Y=G%3*2/3-1,ee=G>2?0:-1,te=[Y,ee,0,Y+2/3,ee,0,Y+2/3,ee+1,0,Y,ee,0,Y+2/3,ee+1,0,Y,ee+1,0];D.set(te,L*A*G),k.set(_,N*A*G);const U=[G,G,G,G,G,G];F.set(U,C*A*G)}const Q=new Jn;Q.setAttribute("position",new Ir(D,L)),Q.setAttribute("uv",new Ir(k,N)),Q.setAttribute("faceIndex",new Ir(F,C)),e.push(Q),i>t0&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function MP(r,e,t){const n=new qa(r,e,t);return n.texture.mapping=L0,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Sw(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function tne(r,e,t){const n=new Float32Array(Eh),i=new we(0,1,0);return new Ka({name:"SphericalGaussianBlur",defines:{n:Eh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:vR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wu,depthTest:!1,depthWrite:!1})}function EP(){return new Ka({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wu,depthTest:!1,depthWrite:!1})}function bP(){return new Ka({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wu,depthTest:!1,depthWrite:!1})}function vR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nne(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const c=l.mapping,d=c===Yg||c===Xg,h=c===qu||c===sf;if(d||h){let w=e.get(l);const _=w!==void 0?w.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==_)return t===null&&(t=new yA(r)),w=d?t.fromEquirectangular(l,w):t.fromCubemap(l,w),w.texture.pmremVersion=l.pmremVersion,e.set(l,w),w.texture;if(w!==void 0)return w.texture;{const x=l.image;return d&&x&&x.height>0||h&&x&&i(x)?(t===null&&(t=new yA(r)),w=d?t.fromEquirectangular(l):t.fromCubemap(l),w.texture.pmremVersion=l.pmremVersion,e.set(l,w),l.addEventListener("dispose",s),w.texture):null}}}return l}function i(l){let c=0;const d=6;for(let h=0;h<d;h++)l[h]!==void 0&&c++;return c===d}function s(l){const c=l.target;c.removeEventListener("dispose",s);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function rne(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&y_("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function ine(r,e,t,n){const i={},s=new WeakMap;function o(w){const _=w.target;_.index!==null&&e.remove(_.index);for(const A in _.attributes)e.remove(_.attributes[A]);for(const A in _.morphAttributes){const L=_.morphAttributes[A];for(let N=0,C=L.length;N<C;N++)e.remove(L[N])}_.removeEventListener("dispose",o),delete i[_.id];const x=s.get(_);x&&(e.remove(x),s.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function l(w,_){return i[_.id]===!0||(_.addEventListener("dispose",o),i[_.id]=!0,t.memory.geometries++),_}function c(w){const _=w.attributes;for(const A in _)e.update(_[A],r.ARRAY_BUFFER);const x=w.morphAttributes;for(const A in x){const L=x[A];for(let N=0,C=L.length;N<C;N++)e.update(L[N],r.ARRAY_BUFFER)}}function d(w){const _=[],x=w.index,A=w.attributes.position;let L=0;if(x!==null){const D=x.array;L=x.version;for(let k=0,F=D.length;k<F;k+=3){const Q=D[k+0],G=D[k+1],Y=D[k+2];_.push(Q,G,G,Y,Y,Q)}}else if(A!==void 0){const D=A.array;L=A.version;for(let k=0,F=D.length/3-1;k<F;k+=3){const Q=k+0,G=k+1,Y=k+2;_.push(Q,G,G,Y,Y,Q)}}else return;const N=new(z6(_)?yR:gR)(_,1);N.version=L;const C=s.get(w);C&&e.remove(C),s.set(w,N)}function h(w){const _=s.get(w);if(_){const x=w.index;x!==null&&_.version<x.version&&d(w)}else d(w);return s.get(w)}return{get:l,update:c,getWireframeAttribute:h}}function sne(r,e,t){let n;function i(_){n=_}let s,o;function l(_){s=_.type,o=_.bytesPerElement}function c(_,x){r.drawElements(n,x,s,_*o),t.update(x,n,1)}function d(_,x,A){A!==0&&(r.drawElementsInstanced(n,x,s,_*o,A),t.update(x,n,A))}function h(_,x,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,x,0,s,_,0,A);let N=0;for(let C=0;C<A;C++)N+=x[C];t.update(N,n,1)}function w(_,x,A,L){if(A===0)return;const N=e.get("WEBGL_multi_draw");if(N===null)for(let C=0;C<_.length;C++)d(_[C]/o,x[C],L[C]);else{N.multiDrawElementsInstancedWEBGL(n,x,0,s,_,0,L,0,A);let C=0;for(let D=0;D<A;D++)C+=x[D];for(let D=0;D<L.length;D++)t.update(C,n,L[D])}}this.setMode=i,this.setIndex=l,this.render=c,this.renderInstances=d,this.renderMultiDraw=h,this.renderMultiDrawInstances=w}function one(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=l*(s/3);break;case r.LINES:t.lines+=l*(s/2);break;case r.LINE_STRIP:t.lines+=l*(s-1);break;case r.LINE_LOOP:t.lines+=l*s;break;case r.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function ane(r,e,t){const n=new WeakMap,i=new hr;function s(o,l,c){const d=o.morphTargetInfluences,h=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,w=h!==void 0?h.length:0;let _=n.get(l);if(_===void 0||_.count!==w){let te=function(){Y.dispose(),n.delete(l),l.removeEventListener("dispose",te)};_!==void 0&&_.texture.dispose();const x=l.morphAttributes.position!==void 0,A=l.morphAttributes.normal!==void 0,L=l.morphAttributes.color!==void 0,N=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let k=0;x===!0&&(k=1),A===!0&&(k=2),L===!0&&(k=3);let F=l.attributes.position.count*k,Q=1;F>e.maxTextureSize&&(Q=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const G=new Float32Array(F*Q*4*w),Y=new xx(G,F,Q,w);Y.type=wo,Y.needsUpdate=!0;const ee=k*4;for(let U=0;U<w;U++){const V=N[U],K=C[U],E=D[U],a=F*Q*4*U;for(let p=0;p<V.count;p++){const M=p*ee;x===!0&&(i.fromBufferAttribute(V,p),G[a+M+0]=i.x,G[a+M+1]=i.y,G[a+M+2]=i.z,G[a+M+3]=0),A===!0&&(i.fromBufferAttribute(K,p),G[a+M+4]=i.x,G[a+M+5]=i.y,G[a+M+6]=i.z,G[a+M+7]=0),L===!0&&(i.fromBufferAttribute(E,p),G[a+M+8]=i.x,G[a+M+9]=i.y,G[a+M+10]=i.z,G[a+M+11]=E.itemSize===4?i.w:1)}}_={count:w,texture:Y,size:new St(F,Q)},n.set(l,_),l.addEventListener("dispose",te)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(r,"morphTexture",o.morphTexture,t);else{let x=0;for(let L=0;L<d.length;L++)x+=d[L];const A=l.morphTargetsRelative?1:1-x;c.getUniforms().setValue(r,"morphTargetBaseInfluence",A),c.getUniforms().setValue(r,"morphTargetInfluences",d)}c.getUniforms().setValue(r,"morphTargetsTexture",_.texture,t),c.getUniforms().setValue(r,"morphTargetsTextureSize",_.size)}return{update:s}}function lne(r,e,t,n){let i=new WeakMap;function s(c){const d=n.render.frame,h=c.geometry,w=e.get(c,h);if(i.get(w)!==d&&(e.update(w),i.set(w,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),i.get(c)!==d&&(t.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,r.ARRAY_BUFFER),i.set(c,d))),c.isSkinnedMesh){const _=c.skeleton;i.get(_)!==d&&(_.update(),i.set(_,d))}return w}function o(){i=new WeakMap}function l(c){const d=c.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}class wR extends li{constructor(e,t,n,i,s,o,l,c,d,h=jh){if(h!==jh&&h!==td)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===jh&&(n=Ku),n===void 0&&h===td&&(n=ed),super(null,i,s,o,l,c,h,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Zi,this.minFilter=c!==void 0?c:Zi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const $6=new li,AP=new wR(1,1),Z6=new xx,Q6=new mR,J6=new ky,TP=[],RP=[],CP=new Float32Array(16),IP=new Float32Array(9),NP=new Float32Array(4);function D0(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=TP[i];if(s===void 0&&(s=new Float32Array(i),TP[i]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,r[o].toArray(s,l)}return s}function zi(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Wi(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Sx(r,e){let t=RP[e];t===void 0&&(t=new Int32Array(e),RP[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function une(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function cne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zi(t,e))return;r.uniform2fv(this.addr,e),Wi(t,e)}}function fne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(zi(t,e))return;r.uniform3fv(this.addr,e),Wi(t,e)}}function hne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zi(t,e))return;r.uniform4fv(this.addr,e),Wi(t,e)}}function dne(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(zi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Wi(t,e)}else{if(zi(t,n))return;NP.set(n),r.uniformMatrix2fv(this.addr,!1,NP),Wi(t,n)}}function pne(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(zi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Wi(t,e)}else{if(zi(t,n))return;IP.set(n),r.uniformMatrix3fv(this.addr,!1,IP),Wi(t,n)}}function mne(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(zi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Wi(t,e)}else{if(zi(t,n))return;CP.set(n),r.uniformMatrix4fv(this.addr,!1,CP),Wi(t,n)}}function gne(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function yne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zi(t,e))return;r.uniform2iv(this.addr,e),Wi(t,e)}}function vne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zi(t,e))return;r.uniform3iv(this.addr,e),Wi(t,e)}}function wne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zi(t,e))return;r.uniform4iv(this.addr,e),Wi(t,e)}}function _ne(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function xne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(zi(t,e))return;r.uniform2uiv(this.addr,e),Wi(t,e)}}function Sne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(zi(t,e))return;r.uniform3uiv(this.addr,e),Wi(t,e)}}function Mne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(zi(t,e))return;r.uniform4uiv(this.addr,e),Wi(t,e)}}function Ene(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(AP.compareFunction=dR,s=AP):s=$6,t.setTexture2D(e||s,i)}function bne(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||Q6,i)}function Ane(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||J6,i)}function Tne(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Z6,i)}function Rne(r){switch(r){case 5126:return une;case 35664:return cne;case 35665:return fne;case 35666:return hne;case 35674:return dne;case 35675:return pne;case 35676:return mne;case 5124:case 35670:return gne;case 35667:case 35671:return yne;case 35668:case 35672:return vne;case 35669:case 35673:return wne;case 5125:return _ne;case 36294:return xne;case 36295:return Sne;case 36296:return Mne;case 35678:case 36198:case 36298:case 36306:case 35682:return Ene;case 35679:case 36299:case 36307:return bne;case 35680:case 36300:case 36308:case 36293:return Ane;case 36289:case 36303:case 36311:case 36292:return Tne}}function Cne(r,e){r.uniform1fv(this.addr,e)}function Ine(r,e){const t=D0(e,this.size,2);r.uniform2fv(this.addr,t)}function Nne(r,e){const t=D0(e,this.size,3);r.uniform3fv(this.addr,t)}function Pne(r,e){const t=D0(e,this.size,4);r.uniform4fv(this.addr,t)}function Lne(r,e){const t=D0(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function kne(r,e){const t=D0(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function One(r,e){const t=D0(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function Dne(r,e){r.uniform1iv(this.addr,e)}function Bne(r,e){r.uniform2iv(this.addr,e)}function Une(r,e){r.uniform3iv(this.addr,e)}function Fne(r,e){r.uniform4iv(this.addr,e)}function zne(r,e){r.uniform1uiv(this.addr,e)}function Wne(r,e){r.uniform2uiv(this.addr,e)}function Vne(r,e){r.uniform3uiv(this.addr,e)}function Hne(r,e){r.uniform4uiv(this.addr,e)}function Gne(r,e,t){const n=this.cache,i=e.length,s=Sx(t,i);zi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||$6,s[o])}function jne(r,e,t){const n=this.cache,i=e.length,s=Sx(t,i);zi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||Q6,s[o])}function qne(r,e,t){const n=this.cache,i=e.length,s=Sx(t,i);zi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||J6,s[o])}function Kne(r,e,t){const n=this.cache,i=e.length,s=Sx(t,i);zi(n,s)||(r.uniform1iv(this.addr,s),Wi(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||Z6,s[o])}function Yne(r){switch(r){case 5126:return Cne;case 35664:return Ine;case 35665:return Nne;case 35666:return Pne;case 35674:return Lne;case 35675:return kne;case 35676:return One;case 5124:case 35670:return Dne;case 35667:case 35671:return Bne;case 35668:case 35672:return Une;case 35669:case 35673:return Fne;case 5125:return zne;case 36294:return Wne;case 36295:return Vne;case 36296:return Hne;case 35678:case 36198:case 36298:case 36306:case 35682:return Gne;case 35679:case 36299:case 36307:return jne;case 35680:case 36300:case 36308:case 36293:return qne;case 36289:case 36303:case 36311:case 36292:return Kne}}class Xne{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Rne(t.type)}}class $ne{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Yne(t.type)}}class Zne{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const l=i[s];l.setValue(e,t[l.id],n)}}}const NE=/(\w+)(\])?(\[|\.)?/g;function PP(r,e){r.seq.push(e),r.map[e.id]=e}function Qne(r,e,t){const n=r.name,i=n.length;for(NE.lastIndex=0;;){const s=NE.exec(n),o=NE.lastIndex;let l=s[1];const c=s[2]==="]",d=s[3];if(c&&(l=l|0),d===void 0||d==="["&&o+2===i){PP(t,d===void 0?new Xne(l,r,e):new $ne(l,r,e));break}else{let w=t.map[l];w===void 0&&(w=new Zne(l),PP(t,w)),t=w}}}class v_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);Qne(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function LP(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const Jne=37297;let ere=0;function tre(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}function nre(r){const e=gr.getPrimaries(gr.workingColorSpace),t=gr.getPrimaries(r);let n;switch(e===t?n="":e===ny&&t===ty?n="LinearDisplayP3ToLinearSRGB":e===ty&&t===ny&&(n="LinearSRGBToLinearDisplayP3"),r){case $u:case Py:return[n,"LinearTransferOETF"];case oa:case _x:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function kP(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+tre(r.getShaderSource(e),o)}else return i}function rre(r,e){const t=nre(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function ire(r,e){let t;switch(e){case w6:t="Linear";break;case _6:t="Reinhard";break;case x6:t="Cineon";break;case tR:t="ACESFilmic";break;case M6:t="AgX";break;case E6:t="Neutral";break;case S6:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Mw=new we;function sre(){gr.getLuminanceCoefficients(Mw);const r=Mw.x.toFixed(4),e=Mw.y.toFixed(4),t=Mw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ore(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(hg).join(`
`)}function are(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function lre(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let l=1;s.type===r.FLOAT_MAT2&&(l=2),s.type===r.FLOAT_MAT3&&(l=3),s.type===r.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:l}}return t}function hg(r){return r!==""}function OP(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function DP(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ure=/^[ \t]*#include +<([\w\d./]+)>/gm;function vA(r){return r.replace(ure,fre)}const cre=new Map;function fre(r,e){let t=Xn[e];if(t===void 0){const n=cre.get(e);if(n!==void 0)t=Xn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return vA(t)}const hre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function BP(r){return r.replace(hre,dre)}function dre(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function UP(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function pre(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===fx?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Sg?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Fa&&(e="SHADOWMAP_TYPE_VSM"),e}function mre(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case qu:case sf:e="ENVMAP_TYPE_CUBE";break;case L0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function gre(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case sf:e="ENVMAP_MODE_REFRACTION";break}return e}function yre(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Iy:e="ENVMAP_BLENDING_MULTIPLY";break;case y6:e="ENVMAP_BLENDING_MIX";break;case v6:e="ENVMAP_BLENDING_ADD";break}return e}function vre(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function wre(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=pre(t),d=mre(t),h=gre(t),w=yre(t),_=vre(t),x=ore(t),A=are(s),L=i.createProgram();let N,C,D=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(N=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(hg).join(`
`),N.length>0&&(N+=`
`),C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(hg).join(`
`),C.length>0&&(C+=`
`)):(N=[UP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(hg).join(`
`),C=[UP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",t.envMap?"#define "+w:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Cl?"#define TONE_MAPPING":"",t.toneMapping!==Cl?Xn.tonemapping_pars_fragment:"",t.toneMapping!==Cl?ire("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xn.colorspace_pars_fragment,rre("linearToOutputTexel",t.outputColorSpace),sre(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(hg).join(`
`)),o=vA(o),o=OP(o,t),o=DP(o,t),l=vA(l),l=OP(l,t),l=DP(l,t),o=BP(o),l=BP(l),t.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,N=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+N,C=["#define varying in",t.glslVersion===gA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===gA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const k=D+N+o,F=D+C+l,Q=LP(i,i.VERTEX_SHADER,k),G=LP(i,i.FRAGMENT_SHADER,F);i.attachShader(L,Q),i.attachShader(L,G),t.index0AttributeName!==void 0?i.bindAttribLocation(L,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(L,0,"position"),i.linkProgram(L);function Y(V){if(r.debug.checkShaderErrors){const K=i.getProgramInfoLog(L).trim(),E=i.getShaderInfoLog(Q).trim(),a=i.getShaderInfoLog(G).trim();let p=!0,M=!0;if(i.getProgramParameter(L,i.LINK_STATUS)===!1)if(p=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,L,Q,G);else{const R=kP(i,Q,"vertex"),T=kP(i,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(L,i.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+K+`
`+R+`
`+T)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(E===""||a==="")&&(M=!1);M&&(V.diagnostics={runnable:p,programLog:K,vertexShader:{log:E,prefix:N},fragmentShader:{log:a,prefix:C}})}i.deleteShader(Q),i.deleteShader(G),ee=new v_(i,L),te=lre(i,L)}let ee;this.getUniforms=function(){return ee===void 0&&Y(this),ee};let te;this.getAttributes=function(){return te===void 0&&Y(this),te};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=i.getProgramParameter(L,Jne)),U},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(L),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ere++,this.cacheKey=e,this.usedTimes=1,this.program=L,this.vertexShader=Q,this.fragmentShader=G,this}let _re=0;class xre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Sre(e),t.set(e,n)),n}}class Sre{constructor(e){this.id=_re++,this.code=e,this.usedTimes=0}}function Mre(r,e,t,n,i,s,o){const l=new Kh,c=new xre,d=new Set,h=[],w=i.logarithmicDepthBuffer,_=i.reverseDepthBuffer,x=i.vertexTextures;let A=i.precision;const L={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function N(U){return d.add(U),U===0?"uv":`uv${U}`}function C(U,V,K,E,a){const p=E.fog,M=a.geometry,R=U.isMeshStandardMaterial?E.environment:null,T=(U.isMeshStandardMaterial?t:e).get(U.envMap||R),P=T&&T.mapping===L0?T.image.height:null,I=L[U.type];U.precision!==null&&(A=i.getMaxPrecision(U.precision),A!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",A,"instead."));const y=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,u=y!==void 0?y.length:0;let S=0;M.morphAttributes.position!==void 0&&(S=1),M.morphAttributes.normal!==void 0&&(S=2),M.morphAttributes.color!==void 0&&(S=3);let W,$,se,me;if(I){const ae=za[I];W=ae.vertexShader,$=ae.fragmentShader}else W=U.vertexShader,$=U.fragmentShader,c.update(U),se=c.getVertexShaderID(U),me=c.getFragmentShaderID(U);const _e=r.getRenderTarget(),be=a.isInstancedMesh===!0,wt=a.isBatchedMesh===!0,Ze=!!U.map,Pe=!!U.matcap,ge=!!T,Ge=!!U.aoMap,je=!!U.lightMap,yt=!!U.bumpMap,He=!!U.normalMap,nt=!!U.displacementMap,Nt=!!U.emissiveMap,fe=!!U.metalnessMap,oe=!!U.roughnessMap,Oe=U.anisotropy>0,Te=U.clearcoat>0,Le=U.dispersion>0,ot=U.iridescence>0,et=U.sheen>0,Ye=U.transmission>0,Et=Oe&&!!U.anisotropyMap,ut=Te&&!!U.clearcoatMap,re=Te&&!!U.clearcoatNormalMap,j=Te&&!!U.clearcoatRoughnessMap,q=ot&&!!U.iridescenceMap,ue=ot&&!!U.iridescenceThicknessMap,ve=et&&!!U.sheenColorMap,ye=et&&!!U.sheenRoughnessMap,le=!!U.specularMap,Xe=!!U.specularColorMap,de=!!U.specularIntensityMap,Re=Ye&&!!U.transmissionMap,Ue=Ye&&!!U.thicknessMap,Me=!!U.gradientMap,qe=!!U.alphaMap,Rt=U.alphaTest>0,ct=!!U.alphaHash,gt=!!U.extensions;let Sn=Cl;U.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(Sn=r.toneMapping);const ht={shaderID:I,shaderType:U.type,shaderName:U.name,vertexShader:W,fragmentShader:$,defines:U.defines,customVertexShaderID:se,customFragmentShaderID:me,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:A,batching:wt,batchingColor:wt&&a._colorsTexture!==null,instancing:be,instancingColor:be&&a.instanceColor!==null,instancingMorph:be&&a.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:_e===null?r.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:$u,alphaToCoverage:!!U.alphaToCoverage,map:Ze,matcap:Pe,envMap:ge,envMapMode:ge&&T.mapping,envMapCubeUVHeight:P,aoMap:Ge,lightMap:je,bumpMap:yt,normalMap:He,displacementMap:x&&nt,emissiveMap:Nt,normalMapObjectSpace:He&&U.normalMapType===N6,normalMapTangentSpace:He&&U.normalMapType===uf,metalnessMap:fe,roughnessMap:oe,anisotropy:Oe,anisotropyMap:Et,clearcoat:Te,clearcoatMap:ut,clearcoatNormalMap:re,clearcoatRoughnessMap:j,dispersion:Le,iridescence:ot,iridescenceMap:q,iridescenceThicknessMap:ue,sheen:et,sheenColorMap:ve,sheenRoughnessMap:ye,specularMap:le,specularColorMap:Xe,specularIntensityMap:de,transmission:Ye,transmissionMap:Re,thicknessMap:Ue,gradientMap:Me,opaque:U.transparent===!1&&U.blending===Gh&&U.alphaToCoverage===!1,alphaMap:qe,alphaTest:Rt,alphaHash:ct,combine:U.combine,mapUv:Ze&&N(U.map.channel),aoMapUv:Ge&&N(U.aoMap.channel),lightMapUv:je&&N(U.lightMap.channel),bumpMapUv:yt&&N(U.bumpMap.channel),normalMapUv:He&&N(U.normalMap.channel),displacementMapUv:nt&&N(U.displacementMap.channel),emissiveMapUv:Nt&&N(U.emissiveMap.channel),metalnessMapUv:fe&&N(U.metalnessMap.channel),roughnessMapUv:oe&&N(U.roughnessMap.channel),anisotropyMapUv:Et&&N(U.anisotropyMap.channel),clearcoatMapUv:ut&&N(U.clearcoatMap.channel),clearcoatNormalMapUv:re&&N(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:j&&N(U.clearcoatRoughnessMap.channel),iridescenceMapUv:q&&N(U.iridescenceMap.channel),iridescenceThicknessMapUv:ue&&N(U.iridescenceThicknessMap.channel),sheenColorMapUv:ve&&N(U.sheenColorMap.channel),sheenRoughnessMapUv:ye&&N(U.sheenRoughnessMap.channel),specularMapUv:le&&N(U.specularMap.channel),specularColorMapUv:Xe&&N(U.specularColorMap.channel),specularIntensityMapUv:de&&N(U.specularIntensityMap.channel),transmissionMapUv:Re&&N(U.transmissionMap.channel),thicknessMapUv:Ue&&N(U.thicknessMap.channel),alphaMapUv:qe&&N(U.alphaMap.channel),vertexTangents:!!M.attributes.tangent&&(He||Oe),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!M.attributes.color&&M.attributes.color.itemSize===4,pointsUvs:a.isPoints===!0&&!!M.attributes.uv&&(Ze||qe),fog:!!p,useFog:U.fog===!0,fogExp2:!!p&&p.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:w,reverseDepthBuffer:_,skinning:a.isSkinnedMesh===!0,morphTargets:M.morphAttributes.position!==void 0,morphNormals:M.morphAttributes.normal!==void 0,morphColors:M.morphAttributes.color!==void 0,morphTargetsCount:u,morphTextureStride:S,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:r.shadowMap.enabled&&K.length>0,shadowMapType:r.shadowMap.type,toneMapping:Sn,decodeVideoTexture:Ze&&U.map.isVideoTexture===!0&&gr.getTransfer(U.map.colorSpace)===Br,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Sl,flipSided:U.side===Xs,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:gt&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(gt&&U.extensions.multiDraw===!0||wt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return ht.vertexUv1s=d.has(1),ht.vertexUv2s=d.has(2),ht.vertexUv3s=d.has(3),d.clear(),ht}function D(U){const V=[];if(U.shaderID?V.push(U.shaderID):(V.push(U.customVertexShaderID),V.push(U.customFragmentShaderID)),U.defines!==void 0)for(const K in U.defines)V.push(K),V.push(U.defines[K]);return U.isRawShaderMaterial===!1&&(k(V,U),F(V,U),V.push(r.outputColorSpace)),V.push(U.customProgramCacheKey),V.join()}function k(U,V){U.push(V.precision),U.push(V.outputColorSpace),U.push(V.envMapMode),U.push(V.envMapCubeUVHeight),U.push(V.mapUv),U.push(V.alphaMapUv),U.push(V.lightMapUv),U.push(V.aoMapUv),U.push(V.bumpMapUv),U.push(V.normalMapUv),U.push(V.displacementMapUv),U.push(V.emissiveMapUv),U.push(V.metalnessMapUv),U.push(V.roughnessMapUv),U.push(V.anisotropyMapUv),U.push(V.clearcoatMapUv),U.push(V.clearcoatNormalMapUv),U.push(V.clearcoatRoughnessMapUv),U.push(V.iridescenceMapUv),U.push(V.iridescenceThicknessMapUv),U.push(V.sheenColorMapUv),U.push(V.sheenRoughnessMapUv),U.push(V.specularMapUv),U.push(V.specularColorMapUv),U.push(V.specularIntensityMapUv),U.push(V.transmissionMapUv),U.push(V.thicknessMapUv),U.push(V.combine),U.push(V.fogExp2),U.push(V.sizeAttenuation),U.push(V.morphTargetsCount),U.push(V.morphAttributeCount),U.push(V.numDirLights),U.push(V.numPointLights),U.push(V.numSpotLights),U.push(V.numSpotLightMaps),U.push(V.numHemiLights),U.push(V.numRectAreaLights),U.push(V.numDirLightShadows),U.push(V.numPointLightShadows),U.push(V.numSpotLightShadows),U.push(V.numSpotLightShadowsWithMaps),U.push(V.numLightProbes),U.push(V.shadowMapType),U.push(V.toneMapping),U.push(V.numClippingPlanes),U.push(V.numClipIntersection),U.push(V.depthPacking)}function F(U,V){l.disableAll(),V.supportsVertexTextures&&l.enable(0),V.instancing&&l.enable(1),V.instancingColor&&l.enable(2),V.instancingMorph&&l.enable(3),V.matcap&&l.enable(4),V.envMap&&l.enable(5),V.normalMapObjectSpace&&l.enable(6),V.normalMapTangentSpace&&l.enable(7),V.clearcoat&&l.enable(8),V.iridescence&&l.enable(9),V.alphaTest&&l.enable(10),V.vertexColors&&l.enable(11),V.vertexAlphas&&l.enable(12),V.vertexUv1s&&l.enable(13),V.vertexUv2s&&l.enable(14),V.vertexUv3s&&l.enable(15),V.vertexTangents&&l.enable(16),V.anisotropy&&l.enable(17),V.alphaHash&&l.enable(18),V.batching&&l.enable(19),V.dispersion&&l.enable(20),V.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),V.fog&&l.enable(0),V.useFog&&l.enable(1),V.flatShading&&l.enable(2),V.logarithmicDepthBuffer&&l.enable(3),V.reverseDepthBuffer&&l.enable(4),V.skinning&&l.enable(5),V.morphTargets&&l.enable(6),V.morphNormals&&l.enable(7),V.morphColors&&l.enable(8),V.premultipliedAlpha&&l.enable(9),V.shadowMapEnabled&&l.enable(10),V.doubleSided&&l.enable(11),V.flipSided&&l.enable(12),V.useDepthPacking&&l.enable(13),V.dithering&&l.enable(14),V.transmission&&l.enable(15),V.sheen&&l.enable(16),V.opaque&&l.enable(17),V.pointsUvs&&l.enable(18),V.decodeVideoTexture&&l.enable(19),V.alphaToCoverage&&l.enable(20),U.push(l.mask)}function Q(U){const V=L[U.type];let K;if(V){const E=za[V];K=q6.clone(E.uniforms)}else K=U.uniforms;return K}function G(U,V){let K;for(let E=0,a=h.length;E<a;E++){const p=h[E];if(p.cacheKey===V){K=p,++K.usedTimes;break}}return K===void 0&&(K=new wre(r,V,U,s),h.push(K)),K}function Y(U){if(--U.usedTimes===0){const V=h.indexOf(U);h[V]=h[h.length-1],h.pop(),U.destroy()}}function ee(U){c.remove(U)}function te(){c.dispose()}return{getParameters:C,getProgramCacheKey:D,getUniforms:Q,acquireProgram:G,releaseProgram:Y,releaseShaderCache:ee,programs:h,dispose:te}}function Ere(){let r=new WeakMap;function e(o){return r.has(o)}function t(o){let l=r.get(o);return l===void 0&&(l={},r.set(o,l)),l}function n(o){r.delete(o)}function i(o,l,c){r.get(o)[l]=c}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function bre(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function FP(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function zP(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(w,_,x,A,L,N){let C=r[e];return C===void 0?(C={id:w.id,object:w,geometry:_,material:x,groupOrder:A,renderOrder:w.renderOrder,z:L,group:N},r[e]=C):(C.id=w.id,C.object=w,C.geometry=_,C.material=x,C.groupOrder=A,C.renderOrder=w.renderOrder,C.z=L,C.group=N),e++,C}function l(w,_,x,A,L,N){const C=o(w,_,x,A,L,N);x.transmission>0?n.push(C):x.transparent===!0?i.push(C):t.push(C)}function c(w,_,x,A,L,N){const C=o(w,_,x,A,L,N);x.transmission>0?n.unshift(C):x.transparent===!0?i.unshift(C):t.unshift(C)}function d(w,_){t.length>1&&t.sort(w||bre),n.length>1&&n.sort(_||FP),i.length>1&&i.sort(_||FP)}function h(){for(let w=e,_=r.length;w<_;w++){const x=r[w];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:l,unshift:c,finish:h,sort:d}}function Are(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new zP,r.set(n,[o])):i>=s.length?(o=new zP,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function Tre(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new we,color:new ln};break;case"SpotLight":t={position:new we,direction:new we,color:new ln,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new we,color:new ln,distance:0,decay:0};break;case"HemisphereLight":t={direction:new we,skyColor:new ln,groundColor:new ln};break;case"RectAreaLight":t={color:new ln,position:new we,halfWidth:new we,halfHeight:new we};break}return r[e.id]=t,t}}}function Rre(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Cre=0;function Ire(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Nre(r){const e=new Tre,t=Rre(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new we);const i=new we,s=new Ln,o=new Ln;function l(d){let h=0,w=0,_=0;for(let te=0;te<9;te++)n.probe[te].set(0,0,0);let x=0,A=0,L=0,N=0,C=0,D=0,k=0,F=0,Q=0,G=0,Y=0;d.sort(Ire);for(let te=0,U=d.length;te<U;te++){const V=d[te],K=V.color,E=V.intensity,a=V.distance,p=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)h+=K.r*E,w+=K.g*E,_+=K.b*E;else if(V.isLightProbe){for(let M=0;M<9;M++)n.probe[M].addScaledVector(V.sh.coefficients[M],E);Y++}else if(V.isDirectionalLight){const M=e.get(V);if(M.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const R=V.shadow,T=t.get(V);T.shadowIntensity=R.intensity,T.shadowBias=R.bias,T.shadowNormalBias=R.normalBias,T.shadowRadius=R.radius,T.shadowMapSize=R.mapSize,n.directionalShadow[x]=T,n.directionalShadowMap[x]=p,n.directionalShadowMatrix[x]=V.shadow.matrix,D++}n.directional[x]=M,x++}else if(V.isSpotLight){const M=e.get(V);M.position.setFromMatrixPosition(V.matrixWorld),M.color.copy(K).multiplyScalar(E),M.distance=a,M.coneCos=Math.cos(V.angle),M.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),M.decay=V.decay,n.spot[L]=M;const R=V.shadow;if(V.map&&(n.spotLightMap[Q]=V.map,Q++,R.updateMatrices(V),V.castShadow&&G++),n.spotLightMatrix[L]=R.matrix,V.castShadow){const T=t.get(V);T.shadowIntensity=R.intensity,T.shadowBias=R.bias,T.shadowNormalBias=R.normalBias,T.shadowRadius=R.radius,T.shadowMapSize=R.mapSize,n.spotShadow[L]=T,n.spotShadowMap[L]=p,F++}L++}else if(V.isRectAreaLight){const M=e.get(V);M.color.copy(K).multiplyScalar(E),M.halfWidth.set(V.width*.5,0,0),M.halfHeight.set(0,V.height*.5,0),n.rectArea[N]=M,N++}else if(V.isPointLight){const M=e.get(V);if(M.color.copy(V.color).multiplyScalar(V.intensity),M.distance=V.distance,M.decay=V.decay,V.castShadow){const R=V.shadow,T=t.get(V);T.shadowIntensity=R.intensity,T.shadowBias=R.bias,T.shadowNormalBias=R.normalBias,T.shadowRadius=R.radius,T.shadowMapSize=R.mapSize,T.shadowCameraNear=R.camera.near,T.shadowCameraFar=R.camera.far,n.pointShadow[A]=T,n.pointShadowMap[A]=p,n.pointShadowMatrix[A]=V.shadow.matrix,k++}n.point[A]=M,A++}else if(V.isHemisphereLight){const M=e.get(V);M.skyColor.copy(V.color).multiplyScalar(E),M.groundColor.copy(V.groundColor).multiplyScalar(E),n.hemi[C]=M,C++}}N>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Jt.LTC_FLOAT_1,n.rectAreaLTC2=Jt.LTC_FLOAT_2):(n.rectAreaLTC1=Jt.LTC_HALF_1,n.rectAreaLTC2=Jt.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=w,n.ambient[2]=_;const ee=n.hash;(ee.directionalLength!==x||ee.pointLength!==A||ee.spotLength!==L||ee.rectAreaLength!==N||ee.hemiLength!==C||ee.numDirectionalShadows!==D||ee.numPointShadows!==k||ee.numSpotShadows!==F||ee.numSpotMaps!==Q||ee.numLightProbes!==Y)&&(n.directional.length=x,n.spot.length=L,n.rectArea.length=N,n.point.length=A,n.hemi.length=C,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=k,n.pointShadowMap.length=k,n.spotShadow.length=F,n.spotShadowMap.length=F,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=k,n.spotLightMatrix.length=F+Q-G,n.spotLightMap.length=Q,n.numSpotLightShadowsWithMaps=G,n.numLightProbes=Y,ee.directionalLength=x,ee.pointLength=A,ee.spotLength=L,ee.rectAreaLength=N,ee.hemiLength=C,ee.numDirectionalShadows=D,ee.numPointShadows=k,ee.numSpotShadows=F,ee.numSpotMaps=Q,ee.numLightProbes=Y,n.version=Cre++)}function c(d,h){let w=0,_=0,x=0,A=0,L=0;const N=h.matrixWorldInverse;for(let C=0,D=d.length;C<D;C++){const k=d[C];if(k.isDirectionalLight){const F=n.directional[w];F.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),F.direction.sub(i),F.direction.transformDirection(N),w++}else if(k.isSpotLight){const F=n.spot[x];F.position.setFromMatrixPosition(k.matrixWorld),F.position.applyMatrix4(N),F.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),F.direction.sub(i),F.direction.transformDirection(N),x++}else if(k.isRectAreaLight){const F=n.rectArea[A];F.position.setFromMatrixPosition(k.matrixWorld),F.position.applyMatrix4(N),o.identity(),s.copy(k.matrixWorld),s.premultiply(N),o.extractRotation(s),F.halfWidth.set(k.width*.5,0,0),F.halfHeight.set(0,k.height*.5,0),F.halfWidth.applyMatrix4(o),F.halfHeight.applyMatrix4(o),A++}else if(k.isPointLight){const F=n.point[_];F.position.setFromMatrixPosition(k.matrixWorld),F.position.applyMatrix4(N),_++}else if(k.isHemisphereLight){const F=n.hemi[L];F.direction.setFromMatrixPosition(k.matrixWorld),F.direction.transformDirection(N),L++}}}return{setup:l,setupView:c,state:n}}function WP(r){const e=new Nre(r),t=[],n=[];function i(h){d.camera=h,t.length=0,n.length=0}function s(h){t.push(h)}function o(h){n.push(h)}function l(){e.setup(t)}function c(h){e.setupView(t,h)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:d,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function Pre(r){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let l;return o===void 0?(l=new WP(r),e.set(i,[l])):s>=o.length?(l=new WP(r),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}class _R extends ks{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=C6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xR extends ks{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Lre=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ore(r,e,t){let n=new Oy;const i=new St,s=new St,o=new hr,l=new _R({depthPacking:I6}),c=new xR,d={},h=t.maxTextureSize,w={[ju]:Xs,[Xs]:ju,[Sl]:Sl},_=new Ka({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new St},radius:{value:4}},vertexShader:Lre,fragmentShader:kre}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const A=new Jn;A.setAttribute("position",new Ir(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const L=new Ni(A,_),N=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fx;let C=this.type;this.render=function(G,Y,ee){if(N.enabled===!1||N.autoUpdate===!1&&N.needsUpdate===!1||G.length===0)return;const te=r.getRenderTarget(),U=r.getActiveCubeFace(),V=r.getActiveMipmapLevel(),K=r.state;K.setBlending(Wu),K.buffers.color.setClear(1,1,1,1),K.buffers.depth.setTest(!0),K.setScissorTest(!1);const E=C!==Fa&&this.type===Fa,a=C===Fa&&this.type!==Fa;for(let p=0,M=G.length;p<M;p++){const R=G[p],T=R.shadow;if(T===void 0){console.warn("THREE.WebGLShadowMap:",R,"has no shadow.");continue}if(T.autoUpdate===!1&&T.needsUpdate===!1)continue;i.copy(T.mapSize);const P=T.getFrameExtents();if(i.multiply(P),s.copy(T.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/P.x),i.x=s.x*P.x,T.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/P.y),i.y=s.y*P.y,T.mapSize.y=s.y)),T.map===null||E===!0||a===!0){const y=this.type!==Fa?{minFilter:Zi,magFilter:Zi}:{};T.map!==null&&T.map.dispose(),T.map=new qa(i.x,i.y,y),T.map.texture.name=R.name+".shadowMap",T.camera.updateProjectionMatrix()}r.setRenderTarget(T.map),r.clear();const I=T.getViewportCount();for(let y=0;y<I;y++){const u=T.getViewport(y);o.set(s.x*u.x,s.y*u.y,s.x*u.z,s.y*u.w),K.viewport(o),T.updateMatrices(R,y),n=T.getFrustum(),F(Y,ee,T.camera,R,this.type)}T.isPointLightShadow!==!0&&this.type===Fa&&D(T,ee),T.needsUpdate=!1}C=this.type,N.needsUpdate=!1,r.setRenderTarget(te,U,V)};function D(G,Y){const ee=e.update(L);_.defines.VSM_SAMPLES!==G.blurSamples&&(_.defines.VSM_SAMPLES=G.blurSamples,x.defines.VSM_SAMPLES=G.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),G.mapPass===null&&(G.mapPass=new qa(i.x,i.y)),_.uniforms.shadow_pass.value=G.map.texture,_.uniforms.resolution.value=G.mapSize,_.uniforms.radius.value=G.radius,r.setRenderTarget(G.mapPass),r.clear(),r.renderBufferDirect(Y,null,ee,_,L,null),x.uniforms.shadow_pass.value=G.mapPass.texture,x.uniforms.resolution.value=G.mapSize,x.uniforms.radius.value=G.radius,r.setRenderTarget(G.map),r.clear(),r.renderBufferDirect(Y,null,ee,x,L,null)}function k(G,Y,ee,te){let U=null;const V=ee.isPointLight===!0?G.customDistanceMaterial:G.customDepthMaterial;if(V!==void 0)U=V;else if(U=ee.isPointLight===!0?c:l,r.localClippingEnabled&&Y.clipShadows===!0&&Array.isArray(Y.clippingPlanes)&&Y.clippingPlanes.length!==0||Y.displacementMap&&Y.displacementScale!==0||Y.alphaMap&&Y.alphaTest>0||Y.map&&Y.alphaTest>0){const K=U.uuid,E=Y.uuid;let a=d[K];a===void 0&&(a={},d[K]=a);let p=a[E];p===void 0&&(p=U.clone(),a[E]=p,Y.addEventListener("dispose",Q)),U=p}if(U.visible=Y.visible,U.wireframe=Y.wireframe,te===Fa?U.side=Y.shadowSide!==null?Y.shadowSide:Y.side:U.side=Y.shadowSide!==null?Y.shadowSide:w[Y.side],U.alphaMap=Y.alphaMap,U.alphaTest=Y.alphaTest,U.map=Y.map,U.clipShadows=Y.clipShadows,U.clippingPlanes=Y.clippingPlanes,U.clipIntersection=Y.clipIntersection,U.displacementMap=Y.displacementMap,U.displacementScale=Y.displacementScale,U.displacementBias=Y.displacementBias,U.wireframeLinewidth=Y.wireframeLinewidth,U.linewidth=Y.linewidth,ee.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const K=r.properties.get(U);K.light=ee}return U}function F(G,Y,ee,te,U){if(G.visible===!1)return;if(G.layers.test(Y.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&U===Fa)&&(!G.frustumCulled||n.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,G.matrixWorld);const E=e.update(G),a=G.material;if(Array.isArray(a)){const p=E.groups;for(let M=0,R=p.length;M<R;M++){const T=p[M],P=a[T.materialIndex];if(P&&P.visible){const I=k(G,P,te,U);G.onBeforeShadow(r,G,Y,ee,E,I,T),r.renderBufferDirect(ee,null,E,I,G,T),G.onAfterShadow(r,G,Y,ee,E,I,T)}}}else if(a.visible){const p=k(G,a,te,U);G.onBeforeShadow(r,G,Y,ee,E,p,null),r.renderBufferDirect(ee,null,E,p,G,null),G.onAfterShadow(r,G,Y,ee,E,p,null)}}const K=G.children;for(let E=0,a=K.length;E<a;E++)F(K[E],Y,ee,te,U)}function Q(G){G.target.removeEventListener("dispose",Q);for(const ee in d){const te=d[ee],U=G.target.uuid;U in te&&(te[U].dispose(),delete te[U])}}}const Dre={[X_]:$_,[Z_]:e1,[Q_]:t1,[Jh]:J_,[$_]:X_,[e1]:Z_,[t1]:Q_,[J_]:Jh};function Bre(r){function e(){let de=!1;const Re=new hr;let Ue=null;const Me=new hr(0,0,0,0);return{setMask:function(qe){Ue!==qe&&!de&&(r.colorMask(qe,qe,qe,qe),Ue=qe)},setLocked:function(qe){de=qe},setClear:function(qe,Rt,ct,gt,Sn){Sn===!0&&(qe*=gt,Rt*=gt,ct*=gt),Re.set(qe,Rt,ct,gt),Me.equals(Re)===!1&&(r.clearColor(qe,Rt,ct,gt),Me.copy(Re))},reset:function(){de=!1,Ue=null,Me.set(-1,0,0,0)}}}function t(){let de=!1,Re=!1,Ue=null,Me=null,qe=null;return{setReversed:function(Rt){Re=Rt},setTest:function(Rt){Rt?se(r.DEPTH_TEST):me(r.DEPTH_TEST)},setMask:function(Rt){Ue!==Rt&&!de&&(r.depthMask(Rt),Ue=Rt)},setFunc:function(Rt){if(Re&&(Rt=Dre[Rt]),Me!==Rt){switch(Rt){case X_:r.depthFunc(r.NEVER);break;case $_:r.depthFunc(r.ALWAYS);break;case Z_:r.depthFunc(r.LESS);break;case Jh:r.depthFunc(r.LEQUAL);break;case Q_:r.depthFunc(r.EQUAL);break;case J_:r.depthFunc(r.GEQUAL);break;case e1:r.depthFunc(r.GREATER);break;case t1:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Me=Rt}},setLocked:function(Rt){de=Rt},setClear:function(Rt){qe!==Rt&&(r.clearDepth(Rt),qe=Rt)},reset:function(){de=!1,Ue=null,Me=null,qe=null}}}function n(){let de=!1,Re=null,Ue=null,Me=null,qe=null,Rt=null,ct=null,gt=null,Sn=null;return{setTest:function(ht){de||(ht?se(r.STENCIL_TEST):me(r.STENCIL_TEST))},setMask:function(ht){Re!==ht&&!de&&(r.stencilMask(ht),Re=ht)},setFunc:function(ht,ae,J){(Ue!==ht||Me!==ae||qe!==J)&&(r.stencilFunc(ht,ae,J),Ue=ht,Me=ae,qe=J)},setOp:function(ht,ae,J){(Rt!==ht||ct!==ae||gt!==J)&&(r.stencilOp(ht,ae,J),Rt=ht,ct=ae,gt=J)},setLocked:function(ht){de=ht},setClear:function(ht){Sn!==ht&&(r.clearStencil(ht),Sn=ht)},reset:function(){de=!1,Re=null,Ue=null,Me=null,qe=null,Rt=null,ct=null,gt=null,Sn=null}}}const i=new e,s=new t,o=new n,l=new WeakMap,c=new WeakMap;let d={},h={},w=new WeakMap,_=[],x=null,A=!1,L=null,N=null,C=null,D=null,k=null,F=null,Q=null,G=new ln(0,0,0),Y=0,ee=!1,te=null,U=null,V=null,K=null,E=null;const a=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let p=!1,M=0;const R=r.getParameter(r.VERSION);R.indexOf("WebGL")!==-1?(M=parseFloat(/^WebGL (\d)/.exec(R)[1]),p=M>=1):R.indexOf("OpenGL ES")!==-1&&(M=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),p=M>=2);let T=null,P={};const I=r.getParameter(r.SCISSOR_BOX),y=r.getParameter(r.VIEWPORT),u=new hr().fromArray(I),S=new hr().fromArray(y);function W(de,Re,Ue,Me){const qe=new Uint8Array(4),Rt=r.createTexture();r.bindTexture(de,Rt),r.texParameteri(de,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(de,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let ct=0;ct<Ue;ct++)de===r.TEXTURE_3D||de===r.TEXTURE_2D_ARRAY?r.texImage3D(Re,0,r.RGBA,1,1,Me,0,r.RGBA,r.UNSIGNED_BYTE,qe):r.texImage2D(Re+ct,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,qe);return Rt}const $={};$[r.TEXTURE_2D]=W(r.TEXTURE_2D,r.TEXTURE_2D,1),$[r.TEXTURE_CUBE_MAP]=W(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),$[r.TEXTURE_2D_ARRAY]=W(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),$[r.TEXTURE_3D]=W(r.TEXTURE_3D,r.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),se(r.DEPTH_TEST),s.setFunc(Jh),je(!1),yt(cA),se(r.CULL_FACE),ge(Wu);function se(de){d[de]!==!0&&(r.enable(de),d[de]=!0)}function me(de){d[de]!==!1&&(r.disable(de),d[de]=!1)}function _e(de,Re){return h[de]!==Re?(r.bindFramebuffer(de,Re),h[de]=Re,de===r.DRAW_FRAMEBUFFER&&(h[r.FRAMEBUFFER]=Re),de===r.FRAMEBUFFER&&(h[r.DRAW_FRAMEBUFFER]=Re),!0):!1}function be(de,Re){let Ue=_,Me=!1;if(de){Ue=w.get(Re),Ue===void 0&&(Ue=[],w.set(Re,Ue));const qe=de.textures;if(Ue.length!==qe.length||Ue[0]!==r.COLOR_ATTACHMENT0){for(let Rt=0,ct=qe.length;Rt<ct;Rt++)Ue[Rt]=r.COLOR_ATTACHMENT0+Rt;Ue.length=qe.length,Me=!0}}else Ue[0]!==r.BACK&&(Ue[0]=r.BACK,Me=!0);Me&&r.drawBuffers(Ue)}function wt(de){return x!==de?(r.useProgram(de),x=de,!0):!1}const Ze={[Kc]:r.FUNC_ADD,[e6]:r.FUNC_SUBTRACT,[t6]:r.FUNC_REVERSE_SUBTRACT};Ze[n6]=r.MIN,Ze[r6]=r.MAX;const Pe={[i6]:r.ZERO,[s6]:r.ONE,[o6]:r.SRC_COLOR,[K_]:r.SRC_ALPHA,[h6]:r.SRC_ALPHA_SATURATE,[c6]:r.DST_COLOR,[l6]:r.DST_ALPHA,[a6]:r.ONE_MINUS_SRC_COLOR,[Y_]:r.ONE_MINUS_SRC_ALPHA,[f6]:r.ONE_MINUS_DST_COLOR,[u6]:r.ONE_MINUS_DST_ALPHA,[d6]:r.CONSTANT_COLOR,[p6]:r.ONE_MINUS_CONSTANT_COLOR,[m6]:r.CONSTANT_ALPHA,[g6]:r.ONE_MINUS_CONSTANT_ALPHA};function ge(de,Re,Ue,Me,qe,Rt,ct,gt,Sn,ht){if(de===Wu){A===!0&&(me(r.BLEND),A=!1);return}if(A===!1&&(se(r.BLEND),A=!0),de!==JU){if(de!==L||ht!==ee){if((N!==Kc||k!==Kc)&&(r.blendEquation(r.FUNC_ADD),N=Kc,k=Kc),ht)switch(de){case Gh:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case fA:r.blendFunc(r.ONE,r.ONE);break;case hA:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case dA:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Gh:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case fA:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case hA:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case dA:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}C=null,D=null,F=null,Q=null,G.set(0,0,0),Y=0,L=de,ee=ht}return}qe=qe||Re,Rt=Rt||Ue,ct=ct||Me,(Re!==N||qe!==k)&&(r.blendEquationSeparate(Ze[Re],Ze[qe]),N=Re,k=qe),(Ue!==C||Me!==D||Rt!==F||ct!==Q)&&(r.blendFuncSeparate(Pe[Ue],Pe[Me],Pe[Rt],Pe[ct]),C=Ue,D=Me,F=Rt,Q=ct),(gt.equals(G)===!1||Sn!==Y)&&(r.blendColor(gt.r,gt.g,gt.b,Sn),G.copy(gt),Y=Sn),L=de,ee=!1}function Ge(de,Re){de.side===Sl?me(r.CULL_FACE):se(r.CULL_FACE);let Ue=de.side===Xs;Re&&(Ue=!Ue),je(Ue),de.blending===Gh&&de.transparent===!1?ge(Wu):ge(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),s.setFunc(de.depthFunc),s.setTest(de.depthTest),s.setMask(de.depthWrite),i.setMask(de.colorWrite);const Me=de.stencilWrite;o.setTest(Me),Me&&(o.setMask(de.stencilWriteMask),o.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),o.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),nt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?se(r.SAMPLE_ALPHA_TO_COVERAGE):me(r.SAMPLE_ALPHA_TO_COVERAGE)}function je(de){te!==de&&(de?r.frontFace(r.CW):r.frontFace(r.CCW),te=de)}function yt(de){de!==$U?(se(r.CULL_FACE),de!==U&&(de===cA?r.cullFace(r.BACK):de===ZU?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):me(r.CULL_FACE),U=de}function He(de){de!==V&&(p&&r.lineWidth(de),V=de)}function nt(de,Re,Ue){de?(se(r.POLYGON_OFFSET_FILL),(K!==Re||E!==Ue)&&(r.polygonOffset(Re,Ue),K=Re,E=Ue)):me(r.POLYGON_OFFSET_FILL)}function Nt(de){de?se(r.SCISSOR_TEST):me(r.SCISSOR_TEST)}function fe(de){de===void 0&&(de=r.TEXTURE0+a-1),T!==de&&(r.activeTexture(de),T=de)}function oe(de,Re,Ue){Ue===void 0&&(T===null?Ue=r.TEXTURE0+a-1:Ue=T);let Me=P[Ue];Me===void 0&&(Me={type:void 0,texture:void 0},P[Ue]=Me),(Me.type!==de||Me.texture!==Re)&&(T!==Ue&&(r.activeTexture(Ue),T=Ue),r.bindTexture(de,Re||$[de]),Me.type=de,Me.texture=Re)}function Oe(){const de=P[T];de!==void 0&&de.type!==void 0&&(r.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Te(){try{r.compressedTexImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Le(){try{r.compressedTexImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ot(){try{r.texSubImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function et(){try{r.texSubImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ye(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Et(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ut(){try{r.texStorage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function re(){try{r.texStorage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function j(){try{r.texImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function q(){try{r.texImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ue(de){u.equals(de)===!1&&(r.scissor(de.x,de.y,de.z,de.w),u.copy(de))}function ve(de){S.equals(de)===!1&&(r.viewport(de.x,de.y,de.z,de.w),S.copy(de))}function ye(de,Re){let Ue=c.get(Re);Ue===void 0&&(Ue=new WeakMap,c.set(Re,Ue));let Me=Ue.get(de);Me===void 0&&(Me=r.getUniformBlockIndex(Re,de.name),Ue.set(de,Me))}function le(de,Re){const Me=c.get(Re).get(de);l.get(Re)!==Me&&(r.uniformBlockBinding(Re,Me,de.__bindingPointIndex),l.set(Re,Me))}function Xe(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),d={},T=null,P={},h={},w=new WeakMap,_=[],x=null,A=!1,L=null,N=null,C=null,D=null,k=null,F=null,Q=null,G=new ln(0,0,0),Y=0,ee=!1,te=null,U=null,V=null,K=null,E=null,u.set(0,0,r.canvas.width,r.canvas.height),S.set(0,0,r.canvas.width,r.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:se,disable:me,bindFramebuffer:_e,drawBuffers:be,useProgram:wt,setBlending:ge,setMaterial:Ge,setFlipSided:je,setCullFace:yt,setLineWidth:He,setPolygonOffset:nt,setScissorTest:Nt,activeTexture:fe,bindTexture:oe,unbindTexture:Oe,compressedTexImage2D:Te,compressedTexImage3D:Le,texImage2D:j,texImage3D:q,updateUBOMapping:ye,uniformBlockBinding:le,texStorage2D:ut,texStorage3D:re,texSubImage2D:ot,texSubImage3D:et,compressedTexSubImage2D:Ye,compressedTexSubImage3D:Et,scissor:ue,viewport:ve,reset:Xe}}function Ure(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function Fre(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function zre(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function wA(r,e,t,n){const i=Wre(n);switch(t){case oR:return r*e;case lR:return r*e;case uR:return r*e*2;case gx:return r*e/i.components*i.byteLength;case Ny:return r*e/i.components*i.byteLength;case cR:return r*e*2/i.components*i.byteLength;case yx:return r*e*2/i.components*i.byteLength;case aR:return r*e*3/i.components*i.byteLength;case Ns:return r*e*4/i.components*i.byteLength;case vx:return r*e*4/i.components*i.byteLength;case Eg:case bg:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Ag:case Tg:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case r1:case s1:return Math.max(r,16)*Math.max(e,8)/4;case n1:case i1:return Math.max(r,8)*Math.max(e,8)/2;case o1:case a1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case l1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case u1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case c1:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case f1:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case h1:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case d1:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case p1:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case m1:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case g1:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case y1:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case v1:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case w1:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case _1:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case x1:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case S1:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case Rg:case M1:case E1:return Math.ceil(r/4)*Math.ceil(e/4)*16;case fR:case b1:return Math.ceil(r/4)*Math.ceil(e/4)*8;case A1:case T1:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Wre(r){switch(r){case ja:case rR:return{byteLength:1,components:1};case _0:case iR:case k0:return{byteLength:2,components:1};case px:case mx:return{byteLength:2,components:4};case Ku:case dx:case wo:return{byteLength:4,components:1};case sR:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}const Vre={contain:Ure,cover:Fre,fill:zre,getByteLength:wA};function Hre(r,e,t,n,i,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new St,h=new WeakMap;let w;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(fe,oe){return x?new OffscreenCanvas(fe,oe):sy("canvas")}function L(fe,oe,Oe){let Te=1;const Le=Nt(fe);if((Le.width>Oe||Le.height>Oe)&&(Te=Oe/Math.max(Le.width,Le.height)),Te<1)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap||typeof VideoFrame<"u"&&fe instanceof VideoFrame){const ot=Math.floor(Te*Le.width),et=Math.floor(Te*Le.height);w===void 0&&(w=A(ot,et));const Ye=oe?A(ot,et):w;return Ye.width=ot,Ye.height=et,Ye.getContext("2d").drawImage(fe,0,0,ot,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Le.width+"x"+Le.height+") to ("+ot+"x"+et+")."),Ye}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Le.width+"x"+Le.height+")."),fe;return fe}function N(fe){return fe.generateMipmaps&&fe.minFilter!==Zi&&fe.minFilter!==Ci}function C(fe){r.generateMipmap(fe)}function D(fe,oe,Oe,Te,Le=!1){if(fe!==null){if(r[fe]!==void 0)return r[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let ot=oe;if(oe===r.RED&&(Oe===r.FLOAT&&(ot=r.R32F),Oe===r.HALF_FLOAT&&(ot=r.R16F),Oe===r.UNSIGNED_BYTE&&(ot=r.R8)),oe===r.RED_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.R8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.R16UI),Oe===r.UNSIGNED_INT&&(ot=r.R32UI),Oe===r.BYTE&&(ot=r.R8I),Oe===r.SHORT&&(ot=r.R16I),Oe===r.INT&&(ot=r.R32I)),oe===r.RG&&(Oe===r.FLOAT&&(ot=r.RG32F),Oe===r.HALF_FLOAT&&(ot=r.RG16F),Oe===r.UNSIGNED_BYTE&&(ot=r.RG8)),oe===r.RG_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.RG8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.RG16UI),Oe===r.UNSIGNED_INT&&(ot=r.RG32UI),Oe===r.BYTE&&(ot=r.RG8I),Oe===r.SHORT&&(ot=r.RG16I),Oe===r.INT&&(ot=r.RG32I)),oe===r.RGB_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.RGB8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.RGB16UI),Oe===r.UNSIGNED_INT&&(ot=r.RGB32UI),Oe===r.BYTE&&(ot=r.RGB8I),Oe===r.SHORT&&(ot=r.RGB16I),Oe===r.INT&&(ot=r.RGB32I)),oe===r.RGBA_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.RGBA8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.RGBA16UI),Oe===r.UNSIGNED_INT&&(ot=r.RGBA32UI),Oe===r.BYTE&&(ot=r.RGBA8I),Oe===r.SHORT&&(ot=r.RGBA16I),Oe===r.INT&&(ot=r.RGBA32I)),oe===r.RGB&&Oe===r.UNSIGNED_INT_5_9_9_9_REV&&(ot=r.RGB9_E5),oe===r.RGBA){const et=Le?ey:gr.getTransfer(Te);Oe===r.FLOAT&&(ot=r.RGBA32F),Oe===r.HALF_FLOAT&&(ot=r.RGBA16F),Oe===r.UNSIGNED_BYTE&&(ot=et===Br?r.SRGB8_ALPHA8:r.RGBA8),Oe===r.UNSIGNED_SHORT_4_4_4_4&&(ot=r.RGBA4),Oe===r.UNSIGNED_SHORT_5_5_5_1&&(ot=r.RGB5_A1)}return(ot===r.R16F||ot===r.R32F||ot===r.RG16F||ot===r.RG32F||ot===r.RGBA16F||ot===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ot}function k(fe,oe){let Oe;return fe?oe===null||oe===Ku||oe===ed?Oe=r.DEPTH24_STENCIL8:oe===wo?Oe=r.DEPTH32F_STENCIL8:oe===_0&&(Oe=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):oe===null||oe===Ku||oe===ed?Oe=r.DEPTH_COMPONENT24:oe===wo?Oe=r.DEPTH_COMPONENT32F:oe===_0&&(Oe=r.DEPTH_COMPONENT16),Oe}function F(fe,oe){return N(fe)===!0||fe.isFramebufferTexture&&fe.minFilter!==Zi&&fe.minFilter!==Ci?Math.log2(Math.max(oe.width,oe.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?oe.mipmaps.length:1}function Q(fe){const oe=fe.target;oe.removeEventListener("dispose",Q),Y(oe),oe.isVideoTexture&&h.delete(oe)}function G(fe){const oe=fe.target;oe.removeEventListener("dispose",G),te(oe)}function Y(fe){const oe=n.get(fe);if(oe.__webglInit===void 0)return;const Oe=fe.source,Te=_.get(Oe);if(Te){const Le=Te[oe.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&ee(fe),Object.keys(Te).length===0&&_.delete(Oe)}n.remove(fe)}function ee(fe){const oe=n.get(fe);r.deleteTexture(oe.__webglTexture);const Oe=fe.source,Te=_.get(Oe);delete Te[oe.__cacheKey],o.memory.textures--}function te(fe){const oe=n.get(fe);if(fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(oe.__webglFramebuffer[Te]))for(let Le=0;Le<oe.__webglFramebuffer[Te].length;Le++)r.deleteFramebuffer(oe.__webglFramebuffer[Te][Le]);else r.deleteFramebuffer(oe.__webglFramebuffer[Te]);oe.__webglDepthbuffer&&r.deleteRenderbuffer(oe.__webglDepthbuffer[Te])}else{if(Array.isArray(oe.__webglFramebuffer))for(let Te=0;Te<oe.__webglFramebuffer.length;Te++)r.deleteFramebuffer(oe.__webglFramebuffer[Te]);else r.deleteFramebuffer(oe.__webglFramebuffer);if(oe.__webglDepthbuffer&&r.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&r.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Te=0;Te<oe.__webglColorRenderbuffer.length;Te++)oe.__webglColorRenderbuffer[Te]&&r.deleteRenderbuffer(oe.__webglColorRenderbuffer[Te]);oe.__webglDepthRenderbuffer&&r.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}const Oe=fe.textures;for(let Te=0,Le=Oe.length;Te<Le;Te++){const ot=n.get(Oe[Te]);ot.__webglTexture&&(r.deleteTexture(ot.__webglTexture),o.memory.textures--),n.remove(Oe[Te])}n.remove(fe)}let U=0;function V(){U=0}function K(){const fe=U;return fe>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+i.maxTextures),U+=1,fe}function E(fe){const oe=[];return oe.push(fe.wrapS),oe.push(fe.wrapT),oe.push(fe.wrapR||0),oe.push(fe.magFilter),oe.push(fe.minFilter),oe.push(fe.anisotropy),oe.push(fe.internalFormat),oe.push(fe.format),oe.push(fe.type),oe.push(fe.generateMipmaps),oe.push(fe.premultiplyAlpha),oe.push(fe.flipY),oe.push(fe.unpackAlignment),oe.push(fe.colorSpace),oe.join()}function a(fe,oe){const Oe=n.get(fe);if(fe.isVideoTexture&&He(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&Oe.__version!==fe.version){const Te=fe.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{S(Oe,fe,oe);return}}t.bindTexture(r.TEXTURE_2D,Oe.__webglTexture,r.TEXTURE0+oe)}function p(fe,oe){const Oe=n.get(fe);if(fe.version>0&&Oe.__version!==fe.version){S(Oe,fe,oe);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Oe.__webglTexture,r.TEXTURE0+oe)}function M(fe,oe){const Oe=n.get(fe);if(fe.version>0&&Oe.__version!==fe.version){S(Oe,fe,oe);return}t.bindTexture(r.TEXTURE_3D,Oe.__webglTexture,r.TEXTURE0+oe)}function R(fe,oe){const Oe=n.get(fe);if(fe.version>0&&Oe.__version!==fe.version){W(Oe,fe,oe);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Oe.__webglTexture,r.TEXTURE0+oe)}const T={[$g]:r.REPEAT,[aa]:r.CLAMP_TO_EDGE,[Zg]:r.MIRRORED_REPEAT},P={[Zi]:r.NEAREST,[nR]:r.NEAREST_MIPMAP_NEAREST,[Jp]:r.NEAREST_MIPMAP_LINEAR,[Ci]:r.LINEAR,[Mg]:r.LINEAR_MIPMAP_NEAREST,[El]:r.LINEAR_MIPMAP_LINEAR},I={[P6]:r.NEVER,[U6]:r.ALWAYS,[L6]:r.LESS,[dR]:r.LEQUAL,[k6]:r.EQUAL,[B6]:r.GEQUAL,[O6]:r.GREATER,[D6]:r.NOTEQUAL};function y(fe,oe){if(oe.type===wo&&e.has("OES_texture_float_linear")===!1&&(oe.magFilter===Ci||oe.magFilter===Mg||oe.magFilter===Jp||oe.magFilter===El||oe.minFilter===Ci||oe.minFilter===Mg||oe.minFilter===Jp||oe.minFilter===El)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(fe,r.TEXTURE_WRAP_S,T[oe.wrapS]),r.texParameteri(fe,r.TEXTURE_WRAP_T,T[oe.wrapT]),(fe===r.TEXTURE_3D||fe===r.TEXTURE_2D_ARRAY)&&r.texParameteri(fe,r.TEXTURE_WRAP_R,T[oe.wrapR]),r.texParameteri(fe,r.TEXTURE_MAG_FILTER,P[oe.magFilter]),r.texParameteri(fe,r.TEXTURE_MIN_FILTER,P[oe.minFilter]),oe.compareFunction&&(r.texParameteri(fe,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(fe,r.TEXTURE_COMPARE_FUNC,I[oe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(oe.magFilter===Zi||oe.minFilter!==Jp&&oe.minFilter!==El||oe.type===wo&&e.has("OES_texture_float_linear")===!1)return;if(oe.anisotropy>1||n.get(oe).__currentAnisotropy){const Oe=e.get("EXT_texture_filter_anisotropic");r.texParameterf(fe,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,i.getMaxAnisotropy())),n.get(oe).__currentAnisotropy=oe.anisotropy}}}function u(fe,oe){let Oe=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,oe.addEventListener("dispose",Q));const Te=oe.source;let Le=_.get(Te);Le===void 0&&(Le={},_.set(Te,Le));const ot=E(oe);if(ot!==fe.__cacheKey){Le[ot]===void 0&&(Le[ot]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,Oe=!0),Le[ot].usedTimes++;const et=Le[fe.__cacheKey];et!==void 0&&(Le[fe.__cacheKey].usedTimes--,et.usedTimes===0&&ee(oe)),fe.__cacheKey=ot,fe.__webglTexture=Le[ot].texture}return Oe}function S(fe,oe,Oe){let Te=r.TEXTURE_2D;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(Te=r.TEXTURE_2D_ARRAY),oe.isData3DTexture&&(Te=r.TEXTURE_3D);const Le=u(fe,oe),ot=oe.source;t.bindTexture(Te,fe.__webglTexture,r.TEXTURE0+Oe);const et=n.get(ot);if(ot.version!==et.__version||Le===!0){t.activeTexture(r.TEXTURE0+Oe);const Ye=gr.getPrimaries(gr.workingColorSpace),Et=oe.colorSpace===Pu?null:gr.getPrimaries(oe.colorSpace),ut=oe.colorSpace===Pu||Ye===Et?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,oe.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,oe.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);let re=L(oe.image,!1,i.maxTextureSize);re=nt(oe,re);const j=s.convert(oe.format,oe.colorSpace),q=s.convert(oe.type);let ue=D(oe.internalFormat,j,q,oe.colorSpace,oe.isVideoTexture);y(Te,oe);let ve;const ye=oe.mipmaps,le=oe.isVideoTexture!==!0,Xe=et.__version===void 0||Le===!0,de=ot.dataReady,Re=F(oe,re);if(oe.isDepthTexture)ue=k(oe.format===td,oe.type),Xe&&(le?t.texStorage2D(r.TEXTURE_2D,1,ue,re.width,re.height):t.texImage2D(r.TEXTURE_2D,0,ue,re.width,re.height,0,j,q,null));else if(oe.isDataTexture)if(ye.length>0){le&&Xe&&t.texStorage2D(r.TEXTURE_2D,Re,ue,ye[0].width,ye[0].height);for(let Ue=0,Me=ye.length;Ue<Me;Ue++)ve=ye[Ue],le?de&&t.texSubImage2D(r.TEXTURE_2D,Ue,0,0,ve.width,ve.height,j,q,ve.data):t.texImage2D(r.TEXTURE_2D,Ue,ue,ve.width,ve.height,0,j,q,ve.data);oe.generateMipmaps=!1}else le?(Xe&&t.texStorage2D(r.TEXTURE_2D,Re,ue,re.width,re.height),de&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,re.width,re.height,j,q,re.data)):t.texImage2D(r.TEXTURE_2D,0,ue,re.width,re.height,0,j,q,re.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){le&&Xe&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Re,ue,ye[0].width,ye[0].height,re.depth);for(let Ue=0,Me=ye.length;Ue<Me;Ue++)if(ve=ye[Ue],oe.format!==Ns)if(j!==null)if(le){if(de)if(oe.layerUpdates.size>0){const qe=wA(ve.width,ve.height,oe.format,oe.type);for(const Rt of oe.layerUpdates){const ct=ve.data.subarray(Rt*qe/ve.data.BYTES_PER_ELEMENT,(Rt+1)*qe/ve.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,Rt,ve.width,ve.height,1,j,ct,0,0)}oe.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,ve.width,ve.height,re.depth,j,ve.data,0,0)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ue,ue,ve.width,ve.height,re.depth,0,ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else le?de&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,ve.width,ve.height,re.depth,j,q,ve.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ue,ue,ve.width,ve.height,re.depth,0,j,q,ve.data)}else{le&&Xe&&t.texStorage2D(r.TEXTURE_2D,Re,ue,ye[0].width,ye[0].height);for(let Ue=0,Me=ye.length;Ue<Me;Ue++)ve=ye[Ue],oe.format!==Ns?j!==null?le?de&&t.compressedTexSubImage2D(r.TEXTURE_2D,Ue,0,0,ve.width,ve.height,j,ve.data):t.compressedTexImage2D(r.TEXTURE_2D,Ue,ue,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?de&&t.texSubImage2D(r.TEXTURE_2D,Ue,0,0,ve.width,ve.height,j,q,ve.data):t.texImage2D(r.TEXTURE_2D,Ue,ue,ve.width,ve.height,0,j,q,ve.data)}else if(oe.isDataArrayTexture)if(le){if(Xe&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Re,ue,re.width,re.height,re.depth),de)if(oe.layerUpdates.size>0){const Ue=wA(re.width,re.height,oe.format,oe.type);for(const Me of oe.layerUpdates){const qe=re.data.subarray(Me*Ue/re.data.BYTES_PER_ELEMENT,(Me+1)*Ue/re.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Me,re.width,re.height,1,j,q,qe)}oe.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,re.width,re.height,re.depth,j,q,re.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,ue,re.width,re.height,re.depth,0,j,q,re.data);else if(oe.isData3DTexture)le?(Xe&&t.texStorage3D(r.TEXTURE_3D,Re,ue,re.width,re.height,re.depth),de&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,re.width,re.height,re.depth,j,q,re.data)):t.texImage3D(r.TEXTURE_3D,0,ue,re.width,re.height,re.depth,0,j,q,re.data);else if(oe.isFramebufferTexture){if(Xe)if(le)t.texStorage2D(r.TEXTURE_2D,Re,ue,re.width,re.height);else{let Ue=re.width,Me=re.height;for(let qe=0;qe<Re;qe++)t.texImage2D(r.TEXTURE_2D,qe,ue,Ue,Me,0,j,q,null),Ue>>=1,Me>>=1}}else if(ye.length>0){if(le&&Xe){const Ue=Nt(ye[0]);t.texStorage2D(r.TEXTURE_2D,Re,ue,Ue.width,Ue.height)}for(let Ue=0,Me=ye.length;Ue<Me;Ue++)ve=ye[Ue],le?de&&t.texSubImage2D(r.TEXTURE_2D,Ue,0,0,j,q,ve):t.texImage2D(r.TEXTURE_2D,Ue,ue,j,q,ve);oe.generateMipmaps=!1}else if(le){if(Xe){const Ue=Nt(re);t.texStorage2D(r.TEXTURE_2D,Re,ue,Ue.width,Ue.height)}de&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,j,q,re)}else t.texImage2D(r.TEXTURE_2D,0,ue,j,q,re);N(oe)&&C(Te),et.__version=ot.version,oe.onUpdate&&oe.onUpdate(oe)}fe.__version=oe.version}function W(fe,oe,Oe){if(oe.image.length!==6)return;const Te=u(fe,oe),Le=oe.source;t.bindTexture(r.TEXTURE_CUBE_MAP,fe.__webglTexture,r.TEXTURE0+Oe);const ot=n.get(Le);if(Le.version!==ot.__version||Te===!0){t.activeTexture(r.TEXTURE0+Oe);const et=gr.getPrimaries(gr.workingColorSpace),Ye=oe.colorSpace===Pu?null:gr.getPrimaries(oe.colorSpace),Et=oe.colorSpace===Pu||et===Ye?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,oe.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,oe.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Et);const ut=oe.isCompressedTexture||oe.image[0].isCompressedTexture,re=oe.image[0]&&oe.image[0].isDataTexture,j=[];for(let Me=0;Me<6;Me++)!ut&&!re?j[Me]=L(oe.image[Me],!0,i.maxCubemapSize):j[Me]=re?oe.image[Me].image:oe.image[Me],j[Me]=nt(oe,j[Me]);const q=j[0],ue=s.convert(oe.format,oe.colorSpace),ve=s.convert(oe.type),ye=D(oe.internalFormat,ue,ve,oe.colorSpace),le=oe.isVideoTexture!==!0,Xe=ot.__version===void 0||Te===!0,de=Le.dataReady;let Re=F(oe,q);y(r.TEXTURE_CUBE_MAP,oe);let Ue;if(ut){le&&Xe&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Re,ye,q.width,q.height);for(let Me=0;Me<6;Me++){Ue=j[Me].mipmaps;for(let qe=0;qe<Ue.length;qe++){const Rt=Ue[qe];oe.format!==Ns?ue!==null?le?de&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe,0,0,Rt.width,Rt.height,ue,Rt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe,ye,Rt.width,Rt.height,0,Rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe,0,0,Rt.width,Rt.height,ue,ve,Rt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe,ye,Rt.width,Rt.height,0,ue,ve,Rt.data)}}}else{if(Ue=oe.mipmaps,le&&Xe){Ue.length>0&&Re++;const Me=Nt(j[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Re,ye,Me.width,Me.height)}for(let Me=0;Me<6;Me++)if(re){le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,j[Me].width,j[Me].height,ue,ve,j[Me].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,ye,j[Me].width,j[Me].height,0,ue,ve,j[Me].data);for(let qe=0;qe<Ue.length;qe++){const ct=Ue[qe].image[Me].image;le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe+1,0,0,ct.width,ct.height,ue,ve,ct.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe+1,ye,ct.width,ct.height,0,ue,ve,ct.data)}}else{le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,ue,ve,j[Me]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,ye,ue,ve,j[Me]);for(let qe=0;qe<Ue.length;qe++){const Rt=Ue[qe];le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe+1,0,0,ue,ve,Rt.image[Me]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Me,qe+1,ye,ue,ve,Rt.image[Me])}}}N(oe)&&C(r.TEXTURE_CUBE_MAP),ot.__version=Le.version,oe.onUpdate&&oe.onUpdate(oe)}fe.__version=oe.version}function $(fe,oe,Oe,Te,Le,ot){const et=s.convert(Oe.format,Oe.colorSpace),Ye=s.convert(Oe.type),Et=D(Oe.internalFormat,et,Ye,Oe.colorSpace);if(!n.get(oe).__hasExternalTextures){const re=Math.max(1,oe.width>>ot),j=Math.max(1,oe.height>>ot);Le===r.TEXTURE_3D||Le===r.TEXTURE_2D_ARRAY?t.texImage3D(Le,ot,Et,re,j,oe.depth,0,et,Ye,null):t.texImage2D(Le,ot,Et,re,j,0,et,Ye,null)}t.bindFramebuffer(r.FRAMEBUFFER,fe),yt(oe)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Te,Le,n.get(Oe).__webglTexture,0,je(oe)):(Le===r.TEXTURE_2D||Le>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Te,Le,n.get(Oe).__webglTexture,ot),t.bindFramebuffer(r.FRAMEBUFFER,null)}function se(fe,oe,Oe){if(r.bindRenderbuffer(r.RENDERBUFFER,fe),oe.depthBuffer){const Te=oe.depthTexture,Le=Te&&Te.isDepthTexture?Te.type:null,ot=k(oe.stencilBuffer,Le),et=oe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ye=je(oe);yt(oe)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ye,ot,oe.width,oe.height):Oe?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ye,ot,oe.width,oe.height):r.renderbufferStorage(r.RENDERBUFFER,ot,oe.width,oe.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,et,r.RENDERBUFFER,fe)}else{const Te=oe.textures;for(let Le=0;Le<Te.length;Le++){const ot=Te[Le],et=s.convert(ot.format,ot.colorSpace),Ye=s.convert(ot.type),Et=D(ot.internalFormat,et,Ye,ot.colorSpace),ut=je(oe);Oe&&yt(oe)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ut,Et,oe.width,oe.height):yt(oe)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ut,Et,oe.width,oe.height):r.renderbufferStorage(r.RENDERBUFFER,Et,oe.width,oe.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function me(fe,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,fe),!(oe.depthTexture&&oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),a(oe.depthTexture,0);const Te=n.get(oe.depthTexture).__webglTexture,Le=je(oe);if(oe.depthTexture.format===jh)yt(oe)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Te,0,Le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Te,0);else if(oe.depthTexture.format===td)yt(oe)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Te,0,Le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function _e(fe){const oe=n.get(fe),Oe=fe.isWebGLCubeRenderTarget===!0;if(oe.__boundDepthTexture!==fe.depthTexture){const Te=fe.depthTexture;if(oe.__depthDisposeCallback&&oe.__depthDisposeCallback(),Te){const Le=()=>{delete oe.__boundDepthTexture,delete oe.__depthDisposeCallback,Te.removeEventListener("dispose",Le)};Te.addEventListener("dispose",Le),oe.__depthDisposeCallback=Le}oe.__boundDepthTexture=Te}if(fe.depthTexture&&!oe.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");me(oe.__webglFramebuffer,fe)}else if(Oe){oe.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(r.FRAMEBUFFER,oe.__webglFramebuffer[Te]),oe.__webglDepthbuffer[Te]===void 0)oe.__webglDepthbuffer[Te]=r.createRenderbuffer(),se(oe.__webglDepthbuffer[Te],fe,!1);else{const Le=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ot=oe.__webglDepthbuffer[Te];r.bindRenderbuffer(r.RENDERBUFFER,ot),r.framebufferRenderbuffer(r.FRAMEBUFFER,Le,r.RENDERBUFFER,ot)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,oe.__webglFramebuffer),oe.__webglDepthbuffer===void 0)oe.__webglDepthbuffer=r.createRenderbuffer(),se(oe.__webglDepthbuffer,fe,!1);else{const Te=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Le=oe.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Le),r.framebufferRenderbuffer(r.FRAMEBUFFER,Te,r.RENDERBUFFER,Le)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function be(fe,oe,Oe){const Te=n.get(fe);oe!==void 0&&$(Te.__webglFramebuffer,fe,fe.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Oe!==void 0&&_e(fe)}function wt(fe){const oe=fe.texture,Oe=n.get(fe),Te=n.get(oe);fe.addEventListener("dispose",G);const Le=fe.textures,ot=fe.isWebGLCubeRenderTarget===!0,et=Le.length>1;if(et||(Te.__webglTexture===void 0&&(Te.__webglTexture=r.createTexture()),Te.__version=oe.version,o.memory.textures++),ot){Oe.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)if(oe.mipmaps&&oe.mipmaps.length>0){Oe.__webglFramebuffer[Ye]=[];for(let Et=0;Et<oe.mipmaps.length;Et++)Oe.__webglFramebuffer[Ye][Et]=r.createFramebuffer()}else Oe.__webglFramebuffer[Ye]=r.createFramebuffer()}else{if(oe.mipmaps&&oe.mipmaps.length>0){Oe.__webglFramebuffer=[];for(let Ye=0;Ye<oe.mipmaps.length;Ye++)Oe.__webglFramebuffer[Ye]=r.createFramebuffer()}else Oe.__webglFramebuffer=r.createFramebuffer();if(et)for(let Ye=0,Et=Le.length;Ye<Et;Ye++){const ut=n.get(Le[Ye]);ut.__webglTexture===void 0&&(ut.__webglTexture=r.createTexture(),o.memory.textures++)}if(fe.samples>0&&yt(fe)===!1){Oe.__webglMultisampledFramebuffer=r.createFramebuffer(),Oe.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer);for(let Ye=0;Ye<Le.length;Ye++){const Et=Le[Ye];Oe.__webglColorRenderbuffer[Ye]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Oe.__webglColorRenderbuffer[Ye]);const ut=s.convert(Et.format,Et.colorSpace),re=s.convert(Et.type),j=D(Et.internalFormat,ut,re,Et.colorSpace,fe.isXRRenderTarget===!0),q=je(fe);r.renderbufferStorageMultisample(r.RENDERBUFFER,q,j,fe.width,fe.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ye,r.RENDERBUFFER,Oe.__webglColorRenderbuffer[Ye])}r.bindRenderbuffer(r.RENDERBUFFER,null),fe.depthBuffer&&(Oe.__webglDepthRenderbuffer=r.createRenderbuffer(),se(Oe.__webglDepthRenderbuffer,fe,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ot){t.bindTexture(r.TEXTURE_CUBE_MAP,Te.__webglTexture),y(r.TEXTURE_CUBE_MAP,oe);for(let Ye=0;Ye<6;Ye++)if(oe.mipmaps&&oe.mipmaps.length>0)for(let Et=0;Et<oe.mipmaps.length;Et++)$(Oe.__webglFramebuffer[Ye][Et],fe,oe,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,Et);else $(Oe.__webglFramebuffer[Ye],fe,oe,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0);N(oe)&&C(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(et){for(let Ye=0,Et=Le.length;Ye<Et;Ye++){const ut=Le[Ye],re=n.get(ut);t.bindTexture(r.TEXTURE_2D,re.__webglTexture),y(r.TEXTURE_2D,ut),$(Oe.__webglFramebuffer,fe,ut,r.COLOR_ATTACHMENT0+Ye,r.TEXTURE_2D,0),N(ut)&&C(r.TEXTURE_2D)}t.unbindTexture()}else{let Ye=r.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(Ye=fe.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Ye,Te.__webglTexture),y(Ye,oe),oe.mipmaps&&oe.mipmaps.length>0)for(let Et=0;Et<oe.mipmaps.length;Et++)$(Oe.__webglFramebuffer[Et],fe,oe,r.COLOR_ATTACHMENT0,Ye,Et);else $(Oe.__webglFramebuffer,fe,oe,r.COLOR_ATTACHMENT0,Ye,0);N(oe)&&C(Ye),t.unbindTexture()}fe.depthBuffer&&_e(fe)}function Ze(fe){const oe=fe.textures;for(let Oe=0,Te=oe.length;Oe<Te;Oe++){const Le=oe[Oe];if(N(Le)){const ot=fe.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,et=n.get(Le).__webglTexture;t.bindTexture(ot,et),C(ot),t.unbindTexture()}}}const Pe=[],ge=[];function Ge(fe){if(fe.samples>0){if(yt(fe)===!1){const oe=fe.textures,Oe=fe.width,Te=fe.height;let Le=r.COLOR_BUFFER_BIT;const ot=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,et=n.get(fe),Ye=oe.length>1;if(Ye)for(let Et=0;Et<oe.length;Et++)t.bindFramebuffer(r.FRAMEBUFFER,et.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Et,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,et.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Et,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let Et=0;Et<oe.length;Et++){if(fe.resolveDepthBuffer&&(fe.depthBuffer&&(Le|=r.DEPTH_BUFFER_BIT),fe.stencilBuffer&&fe.resolveStencilBuffer&&(Le|=r.STENCIL_BUFFER_BIT)),Ye){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,et.__webglColorRenderbuffer[Et]);const ut=n.get(oe[Et]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ut,0)}r.blitFramebuffer(0,0,Oe,Te,0,0,Oe,Te,Le,r.NEAREST),c===!0&&(Pe.length=0,ge.length=0,Pe.push(r.COLOR_ATTACHMENT0+Et),fe.depthBuffer&&fe.resolveDepthBuffer===!1&&(Pe.push(ot),ge.push(ot),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ge)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Pe))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Ye)for(let Et=0;Et<oe.length;Et++){t.bindFramebuffer(r.FRAMEBUFFER,et.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Et,r.RENDERBUFFER,et.__webglColorRenderbuffer[Et]);const ut=n.get(oe[Et]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,et.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Et,r.TEXTURE_2D,ut,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(fe.depthBuffer&&fe.resolveDepthBuffer===!1&&c){const oe=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[oe])}}}function je(fe){return Math.min(i.maxSamples,fe.samples)}function yt(fe){const oe=n.get(fe);return fe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&oe.__useRenderToTexture!==!1}function He(fe){const oe=o.render.frame;h.get(fe)!==oe&&(h.set(fe,oe),fe.update())}function nt(fe,oe){const Oe=fe.colorSpace,Te=fe.format,Le=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||Oe!==$u&&Oe!==Pu&&(gr.getTransfer(Oe)===Br?(Te!==Ns||Le!==ja)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Oe)),oe}function Nt(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement?(d.width=fe.naturalWidth||fe.width,d.height=fe.naturalHeight||fe.height):typeof VideoFrame<"u"&&fe instanceof VideoFrame?(d.width=fe.displayWidth,d.height=fe.displayHeight):(d.width=fe.width,d.height=fe.height),d}this.allocateTextureUnit=K,this.resetTextureUnits=V,this.setTexture2D=a,this.setTexture2DArray=p,this.setTexture3D=M,this.setTextureCube=R,this.rebindTextures=be,this.setupRenderTarget=wt,this.updateRenderTargetMipmap=Ze,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=$,this.useMultisampledRTT=yt}function eF(r,e){function t(n,i=Pu){let s;const o=gr.getTransfer(i);if(n===ja)return r.UNSIGNED_BYTE;if(n===px)return r.UNSIGNED_SHORT_4_4_4_4;if(n===mx)return r.UNSIGNED_SHORT_5_5_5_1;if(n===sR)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===rR)return r.BYTE;if(n===iR)return r.SHORT;if(n===_0)return r.UNSIGNED_SHORT;if(n===dx)return r.INT;if(n===Ku)return r.UNSIGNED_INT;if(n===wo)return r.FLOAT;if(n===k0)return r.HALF_FLOAT;if(n===oR)return r.ALPHA;if(n===aR)return r.RGB;if(n===Ns)return r.RGBA;if(n===lR)return r.LUMINANCE;if(n===uR)return r.LUMINANCE_ALPHA;if(n===jh)return r.DEPTH_COMPONENT;if(n===td)return r.DEPTH_STENCIL;if(n===gx)return r.RED;if(n===Ny)return r.RED_INTEGER;if(n===cR)return r.RG;if(n===yx)return r.RG_INTEGER;if(n===vx)return r.RGBA_INTEGER;if(n===Eg||n===bg||n===Ag||n===Tg)if(o===Br)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Eg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===bg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ag)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Tg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Eg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===bg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ag)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Tg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===n1||n===r1||n===i1||n===s1)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===n1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===r1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===i1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===s1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===o1||n===a1||n===l1)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===o1||n===a1)return o===Br?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===l1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===u1||n===c1||n===f1||n===h1||n===d1||n===p1||n===m1||n===g1||n===y1||n===v1||n===w1||n===_1||n===x1||n===S1)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===u1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===c1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===f1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===h1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===d1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===p1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===m1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===g1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===y1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===v1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===w1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===_1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===x1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===S1)return o===Br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Rg||n===M1||n===E1)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Rg)return o===Br?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===M1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===E1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===fR||n===b1||n===A1||n===T1)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Rg)return s.COMPRESSED_RED_RGTC1_EXT;if(n===b1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===A1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===T1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===ed?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}class tF extends mi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class n0 extends dr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Gre={type:"move"};class PE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new n0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new n0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new we,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new we),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new n0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new we,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new we),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const l=this._targetRay,c=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const L of e.hand.values()){const N=t.getJointPose(L,n),C=this._getHandJoint(d,L);N!==null&&(C.matrix.fromArray(N.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,C.jointRadius=N.radius),C.visible=N!==null}const h=d.joints["index-finger-tip"],w=d.joints["thumb-tip"],_=h.position.distanceTo(w.position),x=.02,A=.005;d.inputState.pinching&&_>x+A?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&_<=x-A&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Gre)))}return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new n0;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const jre=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,qre=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Kre{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new li,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ka({vertexShader:jre,fragmentShader:qre,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ni(new O0(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Yre extends kl{constructor(e,t){super();const n=this;let i=null,s=1,o=null,l="local-floor",c=1,d=null,h=null,w=null,_=null,x=null,A=null;const L=new Kre,N=t.getContextAttributes();let C=null,D=null;const k=[],F=[],Q=new St;let G=null;const Y=new mi;Y.layers.enable(1),Y.viewport=new hr;const ee=new mi;ee.layers.enable(2),ee.viewport=new hr;const te=[Y,ee],U=new tF;U.layers.enable(1),U.layers.enable(2);let V=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let $=k[W];return $===void 0&&($=new PE,k[W]=$),$.getTargetRaySpace()},this.getControllerGrip=function(W){let $=k[W];return $===void 0&&($=new PE,k[W]=$),$.getGripSpace()},this.getHand=function(W){let $=k[W];return $===void 0&&($=new PE,k[W]=$),$.getHandSpace()};function E(W){const $=F.indexOf(W.inputSource);if($===-1)return;const se=k[$];se!==void 0&&(se.update(W.inputSource,W.frame,d||o),se.dispatchEvent({type:W.type,data:W.inputSource}))}function a(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",a),i.removeEventListener("inputsourceschange",p);for(let W=0;W<k.length;W++){const $=F[W];$!==null&&(F[W]=null,k[W].disconnect($))}V=null,K=null,L.reset(),e.setRenderTarget(C),x=null,_=null,w=null,i=null,D=null,S.stop(),n.isPresenting=!1,e.setPixelRatio(G),e.setSize(Q.width,Q.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){s=W,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){l=W,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(W){d=W},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return w},this.getFrame=function(){return A},this.getSession=function(){return i},this.setSession=async function(W){if(i=W,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",a),i.addEventListener("inputsourceschange",p),N.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(Q),i.renderState.layers===void 0){const $={antialias:N.antialias,alpha:!0,depth:N.depth,stencil:N.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(i,t,$),i.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),D=new qa(x.framebufferWidth,x.framebufferHeight,{format:Ns,type:ja,colorSpace:e.outputColorSpace,stencilBuffer:N.stencil})}else{let $=null,se=null,me=null;N.depth&&(me=N.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,$=N.stencil?td:jh,se=N.stencil?ed:Ku);const _e={colorFormat:t.RGBA8,depthFormat:me,scaleFactor:s};w=new XRWebGLBinding(i,t),_=w.createProjectionLayer(_e),i.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),D=new qa(_.textureWidth,_.textureHeight,{format:Ns,type:ja,depthTexture:new wR(_.textureWidth,_.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:N.stencil,colorSpace:e.outputColorSpace,samples:N.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(c),d=null,o=await i.requestReferenceSpace(l),S.setContext(i),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return L.getDepthTexture()};function p(W){for(let $=0;$<W.removed.length;$++){const se=W.removed[$],me=F.indexOf(se);me>=0&&(F[me]=null,k[me].disconnect(se))}for(let $=0;$<W.added.length;$++){const se=W.added[$];let me=F.indexOf(se);if(me===-1){for(let be=0;be<k.length;be++)if(be>=F.length){F.push(se),me=be;break}else if(F[be]===null){F[be]=se,me=be;break}if(me===-1)break}const _e=k[me];_e&&_e.connect(se)}}const M=new we,R=new we;function T(W,$,se){M.setFromMatrixPosition($.matrixWorld),R.setFromMatrixPosition(se.matrixWorld);const me=M.distanceTo(R),_e=$.projectionMatrix.elements,be=se.projectionMatrix.elements,wt=_e[14]/(_e[10]-1),Ze=_e[14]/(_e[10]+1),Pe=(_e[9]+1)/_e[5],ge=(_e[9]-1)/_e[5],Ge=(_e[8]-1)/_e[0],je=(be[8]+1)/be[0],yt=wt*Ge,He=wt*je,nt=me/(-Ge+je),Nt=nt*-Ge;if($.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(Nt),W.translateZ(nt),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert(),_e[10]===-1)W.projectionMatrix.copy($.projectionMatrix),W.projectionMatrixInverse.copy($.projectionMatrixInverse);else{const fe=wt+nt,oe=Ze+nt,Oe=yt-Nt,Te=He+(me-Nt),Le=Pe*Ze/oe*fe,ot=ge*Ze/oe*fe;W.projectionMatrix.makePerspective(Oe,Te,Le,ot,fe,oe),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}}function P(W,$){$===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices($.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(i===null)return;let $=W.near,se=W.far;L.texture!==null&&(L.depthNear>0&&($=L.depthNear),L.depthFar>0&&(se=L.depthFar)),U.near=ee.near=Y.near=$,U.far=ee.far=Y.far=se,(V!==U.near||K!==U.far)&&(i.updateRenderState({depthNear:U.near,depthFar:U.far}),V=U.near,K=U.far);const me=W.parent,_e=U.cameras;P(U,me);for(let be=0;be<_e.length;be++)P(_e[be],me);_e.length===2?T(U,Y,ee):U.projectionMatrix.copy(Y.projectionMatrix),I(W,U,me)};function I(W,$,se){se===null?W.matrix.copy($.matrixWorld):(W.matrix.copy(se.matrixWorld),W.matrix.invert(),W.matrix.multiply($.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0),W.projectionMatrix.copy($.projectionMatrix),W.projectionMatrixInverse.copy($.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=x0*2*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(_===null&&x===null))return c},this.setFoveation=function(W){c=W,_!==null&&(_.fixedFoveation=W),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=W)},this.hasDepthSensing=function(){return L.texture!==null},this.getDepthSensingMesh=function(){return L.getMesh(U)};let y=null;function u(W,$){if(h=$.getViewerPose(d||o),A=$,h!==null){const se=h.views;x!==null&&(e.setRenderTargetFramebuffer(D,x.framebuffer),e.setRenderTarget(D));let me=!1;se.length!==U.cameras.length&&(U.cameras.length=0,me=!0);for(let be=0;be<se.length;be++){const wt=se[be];let Ze=null;if(x!==null)Ze=x.getViewport(wt);else{const ge=w.getViewSubImage(_,wt);Ze=ge.viewport,be===0&&(e.setRenderTargetTextures(D,ge.colorTexture,_.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(D))}let Pe=te[be];Pe===void 0&&(Pe=new mi,Pe.layers.enable(be),Pe.viewport=new hr,te[be]=Pe),Pe.matrix.fromArray(wt.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(wt.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),be===0&&(U.matrix.copy(Pe.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),me===!0&&U.cameras.push(Pe)}const _e=i.enabledFeatures;if(_e&&_e.includes("depth-sensing")){const be=w.getDepthInformation(se[0]);be&&be.isValid&&be.texture&&L.init(e,be,i.renderState)}}for(let se=0;se<k.length;se++){const me=F[se],_e=k[se];me!==null&&_e!==void 0&&_e.update(me,$,d||o)}y&&y(W,$),$.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:$}),A=null}const S=new X6;S.setAnimationLoop(u),this.setAnimationLoop=function(W){y=W},this.dispose=function(){}}}const lh=new Ho,Xre=new Ln;function $re(r,e){function t(N,C){N.matrixAutoUpdate===!0&&N.updateMatrix(),C.value.copy(N.matrix)}function n(N,C){C.color.getRGB(N.fogColor.value,j6(r)),C.isFog?(N.fogNear.value=C.near,N.fogFar.value=C.far):C.isFogExp2&&(N.fogDensity.value=C.density)}function i(N,C,D,k,F){C.isMeshBasicMaterial||C.isMeshLambertMaterial?s(N,C):C.isMeshToonMaterial?(s(N,C),w(N,C)):C.isMeshPhongMaterial?(s(N,C),h(N,C)):C.isMeshStandardMaterial?(s(N,C),_(N,C),C.isMeshPhysicalMaterial&&x(N,C,F)):C.isMeshMatcapMaterial?(s(N,C),A(N,C)):C.isMeshDepthMaterial?s(N,C):C.isMeshDistanceMaterial?(s(N,C),L(N,C)):C.isMeshNormalMaterial?s(N,C):C.isLineBasicMaterial?(o(N,C),C.isLineDashedMaterial&&l(N,C)):C.isPointsMaterial?c(N,C,D,k):C.isSpriteMaterial?d(N,C):C.isShadowMaterial?(N.color.value.copy(C.color),N.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}function s(N,C){N.opacity.value=C.opacity,C.color&&N.diffuse.value.copy(C.color),C.emissive&&N.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity),C.map&&(N.map.value=C.map,t(C.map,N.mapTransform)),C.alphaMap&&(N.alphaMap.value=C.alphaMap,t(C.alphaMap,N.alphaMapTransform)),C.bumpMap&&(N.bumpMap.value=C.bumpMap,t(C.bumpMap,N.bumpMapTransform),N.bumpScale.value=C.bumpScale,C.side===Xs&&(N.bumpScale.value*=-1)),C.normalMap&&(N.normalMap.value=C.normalMap,t(C.normalMap,N.normalMapTransform),N.normalScale.value.copy(C.normalScale),C.side===Xs&&N.normalScale.value.negate()),C.displacementMap&&(N.displacementMap.value=C.displacementMap,t(C.displacementMap,N.displacementMapTransform),N.displacementScale.value=C.displacementScale,N.displacementBias.value=C.displacementBias),C.emissiveMap&&(N.emissiveMap.value=C.emissiveMap,t(C.emissiveMap,N.emissiveMapTransform)),C.specularMap&&(N.specularMap.value=C.specularMap,t(C.specularMap,N.specularMapTransform)),C.alphaTest>0&&(N.alphaTest.value=C.alphaTest);const D=e.get(C),k=D.envMap,F=D.envMapRotation;k&&(N.envMap.value=k,lh.copy(F),lh.x*=-1,lh.y*=-1,lh.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(lh.y*=-1,lh.z*=-1),N.envMapRotation.value.setFromMatrix4(Xre.makeRotationFromEuler(lh)),N.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,N.reflectivity.value=C.reflectivity,N.ior.value=C.ior,N.refractionRatio.value=C.refractionRatio),C.lightMap&&(N.lightMap.value=C.lightMap,N.lightMapIntensity.value=C.lightMapIntensity,t(C.lightMap,N.lightMapTransform)),C.aoMap&&(N.aoMap.value=C.aoMap,N.aoMapIntensity.value=C.aoMapIntensity,t(C.aoMap,N.aoMapTransform))}function o(N,C){N.diffuse.value.copy(C.color),N.opacity.value=C.opacity,C.map&&(N.map.value=C.map,t(C.map,N.mapTransform))}function l(N,C){N.dashSize.value=C.dashSize,N.totalSize.value=C.dashSize+C.gapSize,N.scale.value=C.scale}function c(N,C,D,k){N.diffuse.value.copy(C.color),N.opacity.value=C.opacity,N.size.value=C.size*D,N.scale.value=k*.5,C.map&&(N.map.value=C.map,t(C.map,N.uvTransform)),C.alphaMap&&(N.alphaMap.value=C.alphaMap,t(C.alphaMap,N.alphaMapTransform)),C.alphaTest>0&&(N.alphaTest.value=C.alphaTest)}function d(N,C){N.diffuse.value.copy(C.color),N.opacity.value=C.opacity,N.rotation.value=C.rotation,C.map&&(N.map.value=C.map,t(C.map,N.mapTransform)),C.alphaMap&&(N.alphaMap.value=C.alphaMap,t(C.alphaMap,N.alphaMapTransform)),C.alphaTest>0&&(N.alphaTest.value=C.alphaTest)}function h(N,C){N.specular.value.copy(C.specular),N.shininess.value=Math.max(C.shininess,1e-4)}function w(N,C){C.gradientMap&&(N.gradientMap.value=C.gradientMap)}function _(N,C){N.metalness.value=C.metalness,C.metalnessMap&&(N.metalnessMap.value=C.metalnessMap,t(C.metalnessMap,N.metalnessMapTransform)),N.roughness.value=C.roughness,C.roughnessMap&&(N.roughnessMap.value=C.roughnessMap,t(C.roughnessMap,N.roughnessMapTransform)),C.envMap&&(N.envMapIntensity.value=C.envMapIntensity)}function x(N,C,D){N.ior.value=C.ior,C.sheen>0&&(N.sheenColor.value.copy(C.sheenColor).multiplyScalar(C.sheen),N.sheenRoughness.value=C.sheenRoughness,C.sheenColorMap&&(N.sheenColorMap.value=C.sheenColorMap,t(C.sheenColorMap,N.sheenColorMapTransform)),C.sheenRoughnessMap&&(N.sheenRoughnessMap.value=C.sheenRoughnessMap,t(C.sheenRoughnessMap,N.sheenRoughnessMapTransform))),C.clearcoat>0&&(N.clearcoat.value=C.clearcoat,N.clearcoatRoughness.value=C.clearcoatRoughness,C.clearcoatMap&&(N.clearcoatMap.value=C.clearcoatMap,t(C.clearcoatMap,N.clearcoatMapTransform)),C.clearcoatRoughnessMap&&(N.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap,t(C.clearcoatRoughnessMap,N.clearcoatRoughnessMapTransform)),C.clearcoatNormalMap&&(N.clearcoatNormalMap.value=C.clearcoatNormalMap,t(C.clearcoatNormalMap,N.clearcoatNormalMapTransform),N.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),C.side===Xs&&N.clearcoatNormalScale.value.negate())),C.dispersion>0&&(N.dispersion.value=C.dispersion),C.iridescence>0&&(N.iridescence.value=C.iridescence,N.iridescenceIOR.value=C.iridescenceIOR,N.iridescenceThicknessMinimum.value=C.iridescenceThicknessRange[0],N.iridescenceThicknessMaximum.value=C.iridescenceThicknessRange[1],C.iridescenceMap&&(N.iridescenceMap.value=C.iridescenceMap,t(C.iridescenceMap,N.iridescenceMapTransform)),C.iridescenceThicknessMap&&(N.iridescenceThicknessMap.value=C.iridescenceThicknessMap,t(C.iridescenceThicknessMap,N.iridescenceThicknessMapTransform))),C.transmission>0&&(N.transmission.value=C.transmission,N.transmissionSamplerMap.value=D.texture,N.transmissionSamplerSize.value.set(D.width,D.height),C.transmissionMap&&(N.transmissionMap.value=C.transmissionMap,t(C.transmissionMap,N.transmissionMapTransform)),N.thickness.value=C.thickness,C.thicknessMap&&(N.thicknessMap.value=C.thicknessMap,t(C.thicknessMap,N.thicknessMapTransform)),N.attenuationDistance.value=C.attenuationDistance,N.attenuationColor.value.copy(C.attenuationColor)),C.anisotropy>0&&(N.anisotropyVector.value.set(C.anisotropy*Math.cos(C.anisotropyRotation),C.anisotropy*Math.sin(C.anisotropyRotation)),C.anisotropyMap&&(N.anisotropyMap.value=C.anisotropyMap,t(C.anisotropyMap,N.anisotropyMapTransform))),N.specularIntensity.value=C.specularIntensity,N.specularColor.value.copy(C.specularColor),C.specularColorMap&&(N.specularColorMap.value=C.specularColorMap,t(C.specularColorMap,N.specularColorMapTransform)),C.specularIntensityMap&&(N.specularIntensityMap.value=C.specularIntensityMap,t(C.specularIntensityMap,N.specularIntensityMapTransform))}function A(N,C){C.matcap&&(N.matcap.value=C.matcap)}function L(N,C){const D=e.get(C).light;N.referencePosition.value.setFromMatrixPosition(D.matrixWorld),N.nearDistance.value=D.shadow.camera.near,N.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Zre(r,e,t,n){let i={},s={},o=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function c(D,k){const F=k.program;n.uniformBlockBinding(D,F)}function d(D,k){let F=i[D.id];F===void 0&&(A(D),F=h(D),i[D.id]=F,D.addEventListener("dispose",N));const Q=k.program;n.updateUBOMapping(D,Q);const G=e.render.frame;s[D.id]!==G&&(_(D),s[D.id]=G)}function h(D){const k=w();D.__bindingPointIndex=k;const F=r.createBuffer(),Q=D.__size,G=D.usage;return r.bindBuffer(r.UNIFORM_BUFFER,F),r.bufferData(r.UNIFORM_BUFFER,Q,G),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,k,F),F}function w(){for(let D=0;D<l;D++)if(o.indexOf(D)===-1)return o.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(D){const k=i[D.id],F=D.uniforms,Q=D.__cache;r.bindBuffer(r.UNIFORM_BUFFER,k);for(let G=0,Y=F.length;G<Y;G++){const ee=Array.isArray(F[G])?F[G]:[F[G]];for(let te=0,U=ee.length;te<U;te++){const V=ee[te];if(x(V,G,te,Q)===!0){const K=V.__offset,E=Array.isArray(V.value)?V.value:[V.value];let a=0;for(let p=0;p<E.length;p++){const M=E[p],R=L(M);typeof M=="number"||typeof M=="boolean"?(V.__data[0]=M,r.bufferSubData(r.UNIFORM_BUFFER,K+a,V.__data)):M.isMatrix3?(V.__data[0]=M.elements[0],V.__data[1]=M.elements[1],V.__data[2]=M.elements[2],V.__data[3]=0,V.__data[4]=M.elements[3],V.__data[5]=M.elements[4],V.__data[6]=M.elements[5],V.__data[7]=0,V.__data[8]=M.elements[6],V.__data[9]=M.elements[7],V.__data[10]=M.elements[8],V.__data[11]=0):(M.toArray(V.__data,a),a+=R.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,K,V.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function x(D,k,F,Q){const G=D.value,Y=k+"_"+F;if(Q[Y]===void 0)return typeof G=="number"||typeof G=="boolean"?Q[Y]=G:Q[Y]=G.clone(),!0;{const ee=Q[Y];if(typeof G=="number"||typeof G=="boolean"){if(ee!==G)return Q[Y]=G,!0}else if(ee.equals(G)===!1)return ee.copy(G),!0}return!1}function A(D){const k=D.uniforms;let F=0;const Q=16;for(let Y=0,ee=k.length;Y<ee;Y++){const te=Array.isArray(k[Y])?k[Y]:[k[Y]];for(let U=0,V=te.length;U<V;U++){const K=te[U],E=Array.isArray(K.value)?K.value:[K.value];for(let a=0,p=E.length;a<p;a++){const M=E[a],R=L(M),T=F%Q,P=T%R.boundary,I=T+P;F+=P,I!==0&&Q-I<R.storage&&(F+=Q-I),K.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),K.__offset=F,F+=R.storage}}}const G=F%Q;return G>0&&(F+=Q-G),D.__size=F,D.__cache={},this}function L(D){const k={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(k.boundary=4,k.storage=4):D.isVector2?(k.boundary=8,k.storage=8):D.isVector3||D.isColor?(k.boundary=16,k.storage=12):D.isVector4?(k.boundary=16,k.storage=16):D.isMatrix3?(k.boundary=48,k.storage=48):D.isMatrix4?(k.boundary=64,k.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),k}function N(D){const k=D.target;k.removeEventListener("dispose",N);const F=o.indexOf(k.__bindingPointIndex);o.splice(F,1),r.deleteBuffer(i[k.id]),delete i[k.id],delete s[k.id]}function C(){for(const D in i)r.deleteBuffer(i[D]);o=[],i={},s={}}return{bind:c,update:d,dispose:C}}class nF{constructor(e={}){const{canvas:t=W6(),context:n=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:w=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=o;const x=new Uint32Array(4),A=new Int32Array(4);let L=null,N=null;const C=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=oa,this.toneMapping=Cl,this.toneMappingExposure=1;const k=this;let F=!1,Q=0,G=0,Y=null,ee=-1,te=null;const U=new hr,V=new hr;let K=null;const E=new ln(0);let a=0,p=t.width,M=t.height,R=1,T=null,P=null;const I=new hr(0,0,p,M),y=new hr(0,0,p,M);let u=!1;const S=new Oy;let W=!1,$=!1;const se=new Ln,me=new Ln,_e=new we,be=new hr,wt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ze=!1;function Pe(){return Y===null?R:1}let ge=n;function Ge(pe,De){return t.getContext(pe,De)}try{const pe={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:w};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${cx}`),t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",qe,!1),t.addEventListener("webglcontextcreationerror",Rt,!1),ge===null){const De="webgl2";if(ge=Ge(De,pe),ge===null)throw Ge(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let je,yt,He,nt,Nt,fe,oe,Oe,Te,Le,ot,et,Ye,Et,ut,re,j,q,ue,ve,ye,le,Xe,de;function Re(){je=new rne(ge),je.init(),le=new eF(ge,je),yt=new Zte(ge,je,e,le),He=new Bre(ge),yt.reverseDepthBuffer&&He.buffers.depth.setReversed(!0),nt=new one(ge),Nt=new Ere,fe=new Hre(ge,je,He,Nt,yt,le,nt),oe=new Jte(k),Oe=new nne(k),Te=new dJ(ge),Xe=new Xte(ge,Te),Le=new ine(ge,Te,nt,Xe),ot=new lne(ge,Le,Te,nt),ue=new ane(ge,yt,fe),re=new Qte(Nt),et=new Mre(k,oe,Oe,je,yt,Xe,re),Ye=new $re(k,Nt),Et=new Are,ut=new Pre(je),q=new Yte(k,oe,Oe,He,ot,_,c),j=new Ore(k,ot,yt),de=new Zre(ge,nt,yt,He),ve=new $te(ge,je,nt),ye=new sne(ge,je,nt),nt.programs=et.programs,k.capabilities=yt,k.extensions=je,k.properties=Nt,k.renderLists=Et,k.shadowMap=j,k.state=He,k.info=nt}Re();const Ue=new Yre(k,ge);this.xr=Ue,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const pe=je.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=je.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(pe){pe!==void 0&&(R=pe,this.setSize(p,M,!1))},this.getSize=function(pe){return pe.set(p,M)},this.setSize=function(pe,De,$e=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}p=pe,M=De,t.width=Math.floor(pe*R),t.height=Math.floor(De*R),$e===!0&&(t.style.width=pe+"px",t.style.height=De+"px"),this.setViewport(0,0,pe,De)},this.getDrawingBufferSize=function(pe){return pe.set(p*R,M*R).floor()},this.setDrawingBufferSize=function(pe,De,$e){p=pe,M=De,R=$e,t.width=Math.floor(pe*$e),t.height=Math.floor(De*$e),this.setViewport(0,0,pe,De)},this.getCurrentViewport=function(pe){return pe.copy(U)},this.getViewport=function(pe){return pe.copy(I)},this.setViewport=function(pe,De,$e,Qe){pe.isVector4?I.set(pe.x,pe.y,pe.z,pe.w):I.set(pe,De,$e,Qe),He.viewport(U.copy(I).multiplyScalar(R).round())},this.getScissor=function(pe){return pe.copy(y)},this.setScissor=function(pe,De,$e,Qe){pe.isVector4?y.set(pe.x,pe.y,pe.z,pe.w):y.set(pe,De,$e,Qe),He.scissor(V.copy(y).multiplyScalar(R).round())},this.getScissorTest=function(){return u},this.setScissorTest=function(pe){He.setScissorTest(u=pe)},this.setOpaqueSort=function(pe){T=pe},this.setTransparentSort=function(pe){P=pe},this.getClearColor=function(pe){return pe.copy(q.getClearColor())},this.setClearColor=function(){q.setClearColor.apply(q,arguments)},this.getClearAlpha=function(){return q.getClearAlpha()},this.setClearAlpha=function(){q.setClearAlpha.apply(q,arguments)},this.clear=function(pe=!0,De=!0,$e=!0){let Qe=0;if(pe){let Be=!1;if(Y!==null){const At=Y.texture.format;Be=At===vx||At===yx||At===Ny}if(Be){const At=Y.texture.type,Ft=At===ja||At===Ku||At===_0||At===ed||At===px||At===mx,bt=q.getClearColor(),Vt=q.getClearAlpha(),nn=bt.r,sn=bt.g,qt=bt.b;Ft?(x[0]=nn,x[1]=sn,x[2]=qt,x[3]=Vt,ge.clearBufferuiv(ge.COLOR,0,x)):(A[0]=nn,A[1]=sn,A[2]=qt,A[3]=Vt,ge.clearBufferiv(ge.COLOR,0,A))}else Qe|=ge.COLOR_BUFFER_BIT}De&&(Qe|=ge.DEPTH_BUFFER_BIT,ge.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),$e&&(Qe|=ge.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ge.clear(Qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",qe,!1),t.removeEventListener("webglcontextcreationerror",Rt,!1),Et.dispose(),ut.dispose(),Nt.dispose(),oe.dispose(),Oe.dispose(),ot.dispose(),Xe.dispose(),de.dispose(),et.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",X),Ue.removeEventListener("sessionend",he),Ie.stop()};function Me(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function qe(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const pe=nt.autoReset,De=j.enabled,$e=j.autoUpdate,Qe=j.needsUpdate,Be=j.type;Re(),nt.autoReset=pe,j.enabled=De,j.autoUpdate=$e,j.needsUpdate=Qe,j.type=Be}function Rt(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function ct(pe){const De=pe.target;De.removeEventListener("dispose",ct),gt(De)}function gt(pe){Sn(pe),Nt.remove(pe)}function Sn(pe){const De=Nt.get(pe).programs;De!==void 0&&(De.forEach(function($e){et.releaseProgram($e)}),pe.isShaderMaterial&&et.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,De,$e,Qe,Be,At){De===null&&(De=wt);const Ft=Be.isMesh&&Be.matrixWorld.determinant()<0,bt=Nr(pe,De,$e,Qe,Be);He.setMaterial(Qe,Ft);let Vt=$e.index,nn=1;if(Qe.wireframe===!0){if(Vt=Le.getWireframeAttribute($e),Vt===void 0)return;nn=2}const sn=$e.drawRange,qt=$e.attributes.position;let Tn=sn.start*nn,Rn=(sn.start+sn.count)*nn;At!==null&&(Tn=Math.max(Tn,At.start*nn),Rn=Math.min(Rn,(At.start+At.count)*nn)),Vt!==null?(Tn=Math.max(Tn,0),Rn=Math.min(Rn,Vt.count)):qt!=null&&(Tn=Math.max(Tn,0),Rn=Math.min(Rn,qt.count));const En=Rn-Tn;if(En<0||En===1/0)return;Xe.setup(Be,Qe,bt,$e,Vt);let un,$t=ve;if(Vt!==null&&(un=Te.get(Vt),$t=ye,$t.setIndex(un)),Be.isMesh)Qe.wireframe===!0?(He.setLineWidth(Qe.wireframeLinewidth*Pe()),$t.setMode(ge.LINES)):$t.setMode(ge.TRIANGLES);else if(Be.isLine){let Dt=Qe.linewidth;Dt===void 0&&(Dt=1),He.setLineWidth(Dt*Pe()),Be.isLineSegments?$t.setMode(ge.LINES):Be.isLineLoop?$t.setMode(ge.LINE_LOOP):$t.setMode(ge.LINE_STRIP)}else Be.isPoints?$t.setMode(ge.POINTS):Be.isSprite&&$t.setMode(ge.TRIANGLES);if(Be.isBatchedMesh)if(Be._multiDrawInstances!==null)$t.renderMultiDrawInstances(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount,Be._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))$t.renderMultiDraw(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount);else{const Dt=Be._multiDrawStarts,Mn=Be._multiDrawCounts,On=Be._multiDrawCount,Fr=Vt?Te.get(Vt).bytesPerElement:1,yi=Nt.get(Qe).currentProgram.getUniforms();for(let ir=0;ir<On;ir++)yi.setValue(ge,"_gl_DrawID",ir),$t.render(Dt[ir]/Fr,Mn[ir])}else if(Be.isInstancedMesh)$t.renderInstances(Tn,En,Be.count);else if($e.isInstancedBufferGeometry){const Dt=$e._maxInstanceCount!==void 0?$e._maxInstanceCount:1/0,Mn=Math.min($e.instanceCount,Dt);$t.renderInstances(Tn,En,Mn)}else $t.render(Tn,En)};function ht(pe,De,$e){pe.transparent===!0&&pe.side===Sl&&pe.forceSinglePass===!1?(pe.side=Xs,pe.needsUpdate=!0,Dn(pe,De,$e),pe.side=ju,pe.needsUpdate=!0,Dn(pe,De,$e),pe.side=Sl):Dn(pe,De,$e)}this.compile=function(pe,De,$e=null){$e===null&&($e=pe),N=ut.get($e),N.init(De),D.push(N),$e.traverseVisible(function(Be){Be.isLight&&Be.layers.test(De.layers)&&(N.pushLight(Be),Be.castShadow&&N.pushShadow(Be))}),pe!==$e&&pe.traverseVisible(function(Be){Be.isLight&&Be.layers.test(De.layers)&&(N.pushLight(Be),Be.castShadow&&N.pushShadow(Be))}),N.setupLights();const Qe=new Set;return pe.traverse(function(Be){if(!(Be.isMesh||Be.isPoints||Be.isLine||Be.isSprite))return;const At=Be.material;if(At)if(Array.isArray(At))for(let Ft=0;Ft<At.length;Ft++){const bt=At[Ft];ht(bt,$e,Be),Qe.add(bt)}else ht(At,$e,Be),Qe.add(At)}),D.pop(),N=null,Qe},this.compileAsync=function(pe,De,$e=null){const Qe=this.compile(pe,De,$e);return new Promise(Be=>{function At(){if(Qe.forEach(function(Ft){Nt.get(Ft).currentProgram.isReady()&&Qe.delete(Ft)}),Qe.size===0){Be(pe);return}setTimeout(At,10)}je.get("KHR_parallel_shader_compile")!==null?At():setTimeout(At,10)})};let ae=null;function J(pe){ae&&ae(pe)}function X(){Ie.stop()}function he(){Ie.start()}const Ie=new X6;Ie.setAnimationLoop(J),typeof self<"u"&&Ie.setContext(self),this.setAnimationLoop=function(pe){ae=pe,Ue.setAnimationLoop(pe),pe===null?Ie.stop():Ie.start()},Ue.addEventListener("sessionstart",X),Ue.addEventListener("sessionend",he),this.render=function(pe,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(De),De=Ue.getCamera()),pe.isScene===!0&&pe.onBeforeRender(k,pe,De,Y),N=ut.get(pe,D.length),N.init(De),D.push(N),me.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),S.setFromProjectionMatrix(me),$=this.localClippingEnabled,W=re.init(this.clippingPlanes,$),L=Et.get(pe,C.length),L.init(),C.push(L),Ue.enabled===!0&&Ue.isPresenting===!0){const At=k.xr.getDepthSensingMesh();At!==null&&Ae(At,De,-1/0,k.sortObjects)}Ae(pe,De,0,k.sortObjects),L.finish(),k.sortObjects===!0&&L.sort(T,P),Ze=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,Ze&&q.addToRenderList(L,pe),this.info.render.frame++,W===!0&&re.beginShadows();const $e=N.state.shadowsArray;j.render($e,pe,De),W===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset();const Qe=L.opaque,Be=L.transmissive;if(N.setupLights(),De.isArrayCamera){const At=De.cameras;if(Be.length>0)for(let Ft=0,bt=At.length;Ft<bt;Ft++){const Vt=At[Ft];dn(Qe,Be,pe,Vt)}Ze&&q.render(pe);for(let Ft=0,bt=At.length;Ft<bt;Ft++){const Vt=At[Ft];Ne(L,pe,Vt,Vt.viewport)}}else Be.length>0&&dn(Qe,Be,pe,De),Ze&&q.render(pe),Ne(L,pe,De);Y!==null&&(fe.updateMultisampleRenderTarget(Y),fe.updateRenderTargetMipmap(Y)),pe.isScene===!0&&pe.onAfterRender(k,pe,De),Xe.resetDefaultState(),ee=-1,te=null,D.pop(),D.length>0?(N=D[D.length-1],W===!0&&re.setGlobalState(k.clippingPlanes,N.state.camera)):N=null,C.pop(),C.length>0?L=C[C.length-1]:L=null};function Ae(pe,De,$e,Qe){if(pe.visible===!1)return;if(pe.layers.test(De.layers)){if(pe.isGroup)$e=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(De);else if(pe.isLight)N.pushLight(pe),pe.castShadow&&N.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||S.intersectsSprite(pe)){Qe&&be.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(me);const Ft=ot.update(pe),bt=pe.material;bt.visible&&L.push(pe,Ft,bt,$e,be.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(!pe.frustumCulled||S.intersectsObject(pe))){const Ft=ot.update(pe),bt=pe.material;if(Qe&&(pe.boundingSphere!==void 0?(pe.boundingSphere===null&&pe.computeBoundingSphere(),be.copy(pe.boundingSphere.center)):(Ft.boundingSphere===null&&Ft.computeBoundingSphere(),be.copy(Ft.boundingSphere.center)),be.applyMatrix4(pe.matrixWorld).applyMatrix4(me)),Array.isArray(bt)){const Vt=Ft.groups;for(let nn=0,sn=Vt.length;nn<sn;nn++){const qt=Vt[nn],Tn=bt[qt.materialIndex];Tn&&Tn.visible&&L.push(pe,Ft,Tn,$e,be.z,qt)}}else bt.visible&&L.push(pe,Ft,bt,$e,be.z,null)}}const At=pe.children;for(let Ft=0,bt=At.length;Ft<bt;Ft++)Ae(At[Ft],De,$e,Qe)}function Ne(pe,De,$e,Qe){const Be=pe.opaque,At=pe.transmissive,Ft=pe.transparent;N.setupLightsView($e),W===!0&&re.setGlobalState(k.clippingPlanes,$e),Qe&&He.viewport(U.copy(Qe)),Be.length>0&&mt(Be,De,$e),At.length>0&&mt(At,De,$e),Ft.length>0&&mt(Ft,De,$e),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function dn(pe,De,$e,Qe){if(($e.isScene===!0?$e.overrideMaterial:null)!==null)return;N.state.transmissionRenderTarget[Qe.id]===void 0&&(N.state.transmissionRenderTarget[Qe.id]=new qa(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float")?k0:ja,minFilter:El,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:gr.workingColorSpace}));const At=N.state.transmissionRenderTarget[Qe.id],Ft=Qe.viewport||U;At.setSize(Ft.z,Ft.w);const bt=k.getRenderTarget();k.setRenderTarget(At),k.getClearColor(E),a=k.getClearAlpha(),a<1&&k.setClearColor(16777215,.5),k.clear(),Ze&&q.render($e);const Vt=k.toneMapping;k.toneMapping=Cl;const nn=Qe.viewport;if(Qe.viewport!==void 0&&(Qe.viewport=void 0),N.setupLightsView(Qe),W===!0&&re.setGlobalState(k.clippingPlanes,Qe),mt(pe,$e,Qe),fe.updateMultisampleRenderTarget(At),fe.updateRenderTargetMipmap(At),je.has("WEBGL_multisampled_render_to_texture")===!1){let sn=!1;for(let qt=0,Tn=De.length;qt<Tn;qt++){const Rn=De[qt],En=Rn.object,un=Rn.geometry,$t=Rn.material,Dt=Rn.group;if($t.side===Sl&&En.layers.test(Qe.layers)){const Mn=$t.side;$t.side=Xs,$t.needsUpdate=!0,_t(En,$e,Qe,un,$t,Dt),$t.side=Mn,$t.needsUpdate=!0,sn=!0}}sn===!0&&(fe.updateMultisampleRenderTarget(At),fe.updateRenderTargetMipmap(At))}k.setRenderTarget(bt),k.setClearColor(E,a),nn!==void 0&&(Qe.viewport=nn),k.toneMapping=Vt}function mt(pe,De,$e){const Qe=De.isScene===!0?De.overrideMaterial:null;for(let Be=0,At=pe.length;Be<At;Be++){const Ft=pe[Be],bt=Ft.object,Vt=Ft.geometry,nn=Qe===null?Ft.material:Qe,sn=Ft.group;bt.layers.test($e.layers)&&_t(bt,De,$e,Vt,nn,sn)}}function _t(pe,De,$e,Qe,Be,At){pe.onBeforeRender(k,De,$e,Qe,Be,At),pe.modelViewMatrix.multiplyMatrices($e.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),Be.onBeforeRender(k,De,$e,Qe,pe,At),Be.transparent===!0&&Be.side===Sl&&Be.forceSinglePass===!1?(Be.side=Xs,Be.needsUpdate=!0,k.renderBufferDirect($e,De,Qe,Be,pe,At),Be.side=ju,Be.needsUpdate=!0,k.renderBufferDirect($e,De,Qe,Be,pe,At),Be.side=Sl):k.renderBufferDirect($e,De,Qe,Be,pe,At),pe.onAfterRender(k,De,$e,Qe,Be,At)}function Dn(pe,De,$e){De.isScene!==!0&&(De=wt);const Qe=Nt.get(pe),Be=N.state.lights,At=N.state.shadowsArray,Ft=Be.state.version,bt=et.getParameters(pe,Be.state,At,De,$e),Vt=et.getProgramCacheKey(bt);let nn=Qe.programs;Qe.environment=pe.isMeshStandardMaterial?De.environment:null,Qe.fog=De.fog,Qe.envMap=(pe.isMeshStandardMaterial?Oe:oe).get(pe.envMap||Qe.environment),Qe.envMapRotation=Qe.environment!==null&&pe.envMap===null?De.environmentRotation:pe.envMapRotation,nn===void 0&&(pe.addEventListener("dispose",ct),nn=new Map,Qe.programs=nn);let sn=nn.get(Vt);if(sn!==void 0){if(Qe.currentProgram===sn&&Qe.lightsStateVersion===Ft)return Lt(pe,bt),sn}else bt.uniforms=et.getUniforms(pe),pe.onBeforeCompile(bt,k),sn=et.acquireProgram(bt,Vt),nn.set(Vt,sn),Qe.uniforms=bt.uniforms;const qt=Qe.uniforms;return(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(qt.clippingPlanes=re.uniform),Lt(pe,bt),Qe.needsLights=kt(pe),Qe.lightsStateVersion=Ft,Qe.needsLights&&(qt.ambientLightColor.value=Be.state.ambient,qt.lightProbe.value=Be.state.probe,qt.directionalLights.value=Be.state.directional,qt.directionalLightShadows.value=Be.state.directionalShadow,qt.spotLights.value=Be.state.spot,qt.spotLightShadows.value=Be.state.spotShadow,qt.rectAreaLights.value=Be.state.rectArea,qt.ltc_1.value=Be.state.rectAreaLTC1,qt.ltc_2.value=Be.state.rectAreaLTC2,qt.pointLights.value=Be.state.point,qt.pointLightShadows.value=Be.state.pointShadow,qt.hemisphereLights.value=Be.state.hemi,qt.directionalShadowMap.value=Be.state.directionalShadowMap,qt.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,qt.spotShadowMap.value=Be.state.spotShadowMap,qt.spotLightMatrix.value=Be.state.spotLightMatrix,qt.spotLightMap.value=Be.state.spotLightMap,qt.pointShadowMap.value=Be.state.pointShadowMap,qt.pointShadowMatrix.value=Be.state.pointShadowMatrix),Qe.currentProgram=sn,Qe.uniformsList=null,sn}function vt(pe){if(pe.uniformsList===null){const De=pe.currentProgram.getUniforms();pe.uniformsList=v_.seqWithValue(De.seq,pe.uniforms)}return pe.uniformsList}function Lt(pe,De){const $e=Nt.get(pe);$e.outputColorSpace=De.outputColorSpace,$e.batching=De.batching,$e.batchingColor=De.batchingColor,$e.instancing=De.instancing,$e.instancingColor=De.instancingColor,$e.instancingMorph=De.instancingMorph,$e.skinning=De.skinning,$e.morphTargets=De.morphTargets,$e.morphNormals=De.morphNormals,$e.morphColors=De.morphColors,$e.morphTargetsCount=De.morphTargetsCount,$e.numClippingPlanes=De.numClippingPlanes,$e.numIntersection=De.numClipIntersection,$e.vertexAlphas=De.vertexAlphas,$e.vertexTangents=De.vertexTangents,$e.toneMapping=De.toneMapping}function Nr(pe,De,$e,Qe,Be){De.isScene!==!0&&(De=wt),fe.resetTextureUnits();const At=De.fog,Ft=Qe.isMeshStandardMaterial?De.environment:null,bt=Y===null?k.outputColorSpace:Y.isXRRenderTarget===!0?Y.texture.colorSpace:$u,Vt=(Qe.isMeshStandardMaterial?Oe:oe).get(Qe.envMap||Ft),nn=Qe.vertexColors===!0&&!!$e.attributes.color&&$e.attributes.color.itemSize===4,sn=!!$e.attributes.tangent&&(!!Qe.normalMap||Qe.anisotropy>0),qt=!!$e.morphAttributes.position,Tn=!!$e.morphAttributes.normal,Rn=!!$e.morphAttributes.color;let En=Cl;Qe.toneMapped&&(Y===null||Y.isXRRenderTarget===!0)&&(En=k.toneMapping);const un=$e.morphAttributes.position||$e.morphAttributes.normal||$e.morphAttributes.color,$t=un!==void 0?un.length:0,Dt=Nt.get(Qe),Mn=N.state.lights;if(W===!0&&($===!0||pe!==te)){const xt=pe===te&&Qe.id===ee;re.setState(Qe,pe,xt)}let On=!1;Qe.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==Mn.state.version||Dt.outputColorSpace!==bt||Be.isBatchedMesh&&Dt.batching===!1||!Be.isBatchedMesh&&Dt.batching===!0||Be.isBatchedMesh&&Dt.batchingColor===!0&&Be.colorTexture===null||Be.isBatchedMesh&&Dt.batchingColor===!1&&Be.colorTexture!==null||Be.isInstancedMesh&&Dt.instancing===!1||!Be.isInstancedMesh&&Dt.instancing===!0||Be.isSkinnedMesh&&Dt.skinning===!1||!Be.isSkinnedMesh&&Dt.skinning===!0||Be.isInstancedMesh&&Dt.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&Dt.instancingColor===!1&&Be.instanceColor!==null||Be.isInstancedMesh&&Dt.instancingMorph===!0&&Be.morphTexture===null||Be.isInstancedMesh&&Dt.instancingMorph===!1&&Be.morphTexture!==null||Dt.envMap!==Vt||Qe.fog===!0&&Dt.fog!==At||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==re.numPlanes||Dt.numIntersection!==re.numIntersection)||Dt.vertexAlphas!==nn||Dt.vertexTangents!==sn||Dt.morphTargets!==qt||Dt.morphNormals!==Tn||Dt.morphColors!==Rn||Dt.toneMapping!==En||Dt.morphTargetsCount!==$t)&&(On=!0):(On=!0,Dt.__version=Qe.version);let Fr=Dt.currentProgram;On===!0&&(Fr=Dn(Qe,De,Be));let yi=!1,ir=!1,Kt=!1;const pt=Fr.getUniforms(),Ve=Dt.uniforms;if(He.useProgram(Fr.program)&&(yi=!0,ir=!0,Kt=!0),Qe.id!==ee&&(ee=Qe.id,ir=!0),yi||te!==pe){yt.reverseDepthBuffer?(se.copy(pe.projectionMatrix),BQ(se),UQ(se),pt.setValue(ge,"projectionMatrix",se)):pt.setValue(ge,"projectionMatrix",pe.projectionMatrix),pt.setValue(ge,"viewMatrix",pe.matrixWorldInverse);const xt=pt.map.cameraPosition;xt!==void 0&&xt.setValue(ge,_e.setFromMatrixPosition(pe.matrixWorld)),yt.logarithmicDepthBuffer&&pt.setValue(ge,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial)&&pt.setValue(ge,"isOrthographic",pe.isOrthographicCamera===!0),te!==pe&&(te=pe,ir=!0,Kt=!0)}if(Be.isSkinnedMesh){pt.setOptional(ge,Be,"bindMatrix"),pt.setOptional(ge,Be,"bindMatrixInverse");const xt=Be.skeleton;xt&&(xt.boneTexture===null&&xt.computeBoneTexture(),pt.setValue(ge,"boneTexture",xt.boneTexture,fe))}Be.isBatchedMesh&&(pt.setOptional(ge,Be,"batchingTexture"),pt.setValue(ge,"batchingTexture",Be._matricesTexture,fe),pt.setOptional(ge,Be,"batchingIdTexture"),pt.setValue(ge,"batchingIdTexture",Be._indirectTexture,fe),pt.setOptional(ge,Be,"batchingColorTexture"),Be._colorsTexture!==null&&pt.setValue(ge,"batchingColorTexture",Be._colorsTexture,fe));const Fe=$e.morphAttributes;if((Fe.position!==void 0||Fe.normal!==void 0||Fe.color!==void 0)&&ue.update(Be,$e,Fr),(ir||Dt.receiveShadow!==Be.receiveShadow)&&(Dt.receiveShadow=Be.receiveShadow,pt.setValue(ge,"receiveShadow",Be.receiveShadow)),Qe.isMeshGouraudMaterial&&Qe.envMap!==null&&(Ve.envMap.value=Vt,Ve.flipEnvMap.value=Vt.isCubeTexture&&Vt.isRenderTargetTexture===!1?-1:1),Qe.isMeshStandardMaterial&&Qe.envMap===null&&De.environment!==null&&(Ve.envMapIntensity.value=De.environmentIntensity),ir&&(pt.setValue(ge,"toneMappingExposure",k.toneMappingExposure),Dt.needsLights&&Ot(Ve,Kt),At&&Qe.fog===!0&&Ye.refreshFogUniforms(Ve,At),Ye.refreshMaterialUniforms(Ve,Qe,R,M,N.state.transmissionRenderTarget[pe.id]),v_.upload(ge,vt(Dt),Ve,fe)),Qe.isShaderMaterial&&Qe.uniformsNeedUpdate===!0&&(v_.upload(ge,vt(Dt),Ve,fe),Qe.uniformsNeedUpdate=!1),Qe.isSpriteMaterial&&pt.setValue(ge,"center",Be.center),pt.setValue(ge,"modelViewMatrix",Be.modelViewMatrix),pt.setValue(ge,"normalMatrix",Be.normalMatrix),pt.setValue(ge,"modelMatrix",Be.matrixWorld),Qe.isShaderMaterial||Qe.isRawShaderMaterial){const xt=Qe.uniformsGroups;for(let Bt=0,Gt=xt.length;Bt<Gt;Bt++){const cn=xt[Bt];de.update(cn,Fr),de.bind(cn,Fr)}}return Fr}function Ot(pe,De){pe.ambientLightColor.needsUpdate=De,pe.lightProbe.needsUpdate=De,pe.directionalLights.needsUpdate=De,pe.directionalLightShadows.needsUpdate=De,pe.pointLights.needsUpdate=De,pe.pointLightShadows.needsUpdate=De,pe.spotLights.needsUpdate=De,pe.spotLightShadows.needsUpdate=De,pe.rectAreaLights.needsUpdate=De,pe.hemisphereLights.needsUpdate=De}function kt(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return Q},this.getActiveMipmapLevel=function(){return G},this.getRenderTarget=function(){return Y},this.setRenderTargetTextures=function(pe,De,$e){Nt.get(pe.texture).__webglTexture=De,Nt.get(pe.depthTexture).__webglTexture=$e;const Qe=Nt.get(pe);Qe.__hasExternalTextures=!0,Qe.__autoAllocateDepthBuffer=$e===void 0,Qe.__autoAllocateDepthBuffer||je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Qe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(pe,De){const $e=Nt.get(pe);$e.__webglFramebuffer=De,$e.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(pe,De=0,$e=0){Y=pe,Q=De,G=$e;let Qe=!0,Be=null,At=!1,Ft=!1;if(pe){const Vt=Nt.get(pe);if(Vt.__useDefaultFramebuffer!==void 0)He.bindFramebuffer(ge.FRAMEBUFFER,null),Qe=!1;else if(Vt.__webglFramebuffer===void 0)fe.setupRenderTarget(pe);else if(Vt.__hasExternalTextures)fe.rebindTextures(pe,Nt.get(pe.texture).__webglTexture,Nt.get(pe.depthTexture).__webglTexture);else if(pe.depthBuffer){const qt=pe.depthTexture;if(Vt.__boundDepthTexture!==qt){if(qt!==null&&Nt.has(qt)&&(pe.width!==qt.image.width||pe.height!==qt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(pe)}}const nn=pe.texture;(nn.isData3DTexture||nn.isDataArrayTexture||nn.isCompressedArrayTexture)&&(Ft=!0);const sn=Nt.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(Array.isArray(sn[De])?Be=sn[De][$e]:Be=sn[De],At=!0):pe.samples>0&&fe.useMultisampledRTT(pe)===!1?Be=Nt.get(pe).__webglMultisampledFramebuffer:Array.isArray(sn)?Be=sn[$e]:Be=sn,U.copy(pe.viewport),V.copy(pe.scissor),K=pe.scissorTest}else U.copy(I).multiplyScalar(R).floor(),V.copy(y).multiplyScalar(R).floor(),K=u;if(He.bindFramebuffer(ge.FRAMEBUFFER,Be)&&Qe&&He.drawBuffers(pe,Be),He.viewport(U),He.scissor(V),He.setScissorTest(K),At){const Vt=Nt.get(pe.texture);ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+De,Vt.__webglTexture,$e)}else if(Ft){const Vt=Nt.get(pe.texture),nn=De||0;ge.framebufferTextureLayer(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,Vt.__webglTexture,$e||0,nn)}ee=-1},this.readRenderTargetPixels=function(pe,De,$e,Qe,Be,At,Ft){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=Nt.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&Ft!==void 0&&(bt=bt[Ft]),bt){He.bindFramebuffer(ge.FRAMEBUFFER,bt);try{const Vt=pe.texture,nn=Vt.format,sn=Vt.type;if(!yt.textureFormatReadable(nn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!yt.textureTypeReadable(sn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=pe.width-Qe&&$e>=0&&$e<=pe.height-Be&&ge.readPixels(De,$e,Qe,Be,le.convert(nn),le.convert(sn),At)}finally{const Vt=Y!==null?Nt.get(Y).__webglFramebuffer:null;He.bindFramebuffer(ge.FRAMEBUFFER,Vt)}}},this.readRenderTargetPixelsAsync=async function(pe,De,$e,Qe,Be,At,Ft){if(!(pe&&pe.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=Nt.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&Ft!==void 0&&(bt=bt[Ft]),bt){const Vt=pe.texture,nn=Vt.format,sn=Vt.type;if(!yt.textureFormatReadable(nn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!yt.textureTypeReadable(sn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(De>=0&&De<=pe.width-Qe&&$e>=0&&$e<=pe.height-Be){He.bindFramebuffer(ge.FRAMEBUFFER,bt);const qt=ge.createBuffer();ge.bindBuffer(ge.PIXEL_PACK_BUFFER,qt),ge.bufferData(ge.PIXEL_PACK_BUFFER,At.byteLength,ge.STREAM_READ),ge.readPixels(De,$e,Qe,Be,le.convert(nn),le.convert(sn),0);const Tn=Y!==null?Nt.get(Y).__webglFramebuffer:null;He.bindFramebuffer(ge.FRAMEBUFFER,Tn);const Rn=ge.fenceSync(ge.SYNC_GPU_COMMANDS_COMPLETE,0);return ge.flush(),await DQ(ge,Rn,4),ge.bindBuffer(ge.PIXEL_PACK_BUFFER,qt),ge.getBufferSubData(ge.PIXEL_PACK_BUFFER,0,At),ge.deleteBuffer(qt),ge.deleteSync(Rn),At}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(pe,De=null,$e=0){pe.isTexture!==!0&&(y_("WebGLRenderer: copyFramebufferToTexture function signature has changed."),De=arguments[0]||null,pe=arguments[1]);const Qe=Math.pow(2,-$e),Be=Math.floor(pe.image.width*Qe),At=Math.floor(pe.image.height*Qe),Ft=De!==null?De.x:0,bt=De!==null?De.y:0;fe.setTexture2D(pe,0),ge.copyTexSubImage2D(ge.TEXTURE_2D,$e,0,0,Ft,bt,Be,At),He.unbindTexture()},this.copyTextureToTexture=function(pe,De,$e=null,Qe=null,Be=0){pe.isTexture!==!0&&(y_("WebGLRenderer: copyTextureToTexture function signature has changed."),Qe=arguments[0]||null,pe=arguments[1],De=arguments[2],Be=arguments[3]||0,$e=null);let At,Ft,bt,Vt,nn,sn;$e!==null?(At=$e.max.x-$e.min.x,Ft=$e.max.y-$e.min.y,bt=$e.min.x,Vt=$e.min.y):(At=pe.image.width,Ft=pe.image.height,bt=0,Vt=0),Qe!==null?(nn=Qe.x,sn=Qe.y):(nn=0,sn=0);const qt=le.convert(De.format),Tn=le.convert(De.type);fe.setTexture2D(De,0),ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,De.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,De.unpackAlignment);const Rn=ge.getParameter(ge.UNPACK_ROW_LENGTH),En=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),un=ge.getParameter(ge.UNPACK_SKIP_PIXELS),$t=ge.getParameter(ge.UNPACK_SKIP_ROWS),Dt=ge.getParameter(ge.UNPACK_SKIP_IMAGES),Mn=pe.isCompressedTexture?pe.mipmaps[Be]:pe.image;ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Mn.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,Mn.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,bt),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Vt),pe.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,Be,nn,sn,At,Ft,qt,Tn,Mn.data):pe.isCompressedTexture?ge.compressedTexSubImage2D(ge.TEXTURE_2D,Be,nn,sn,Mn.width,Mn.height,qt,Mn.data):ge.texSubImage2D(ge.TEXTURE_2D,Be,nn,sn,At,Ft,qt,Tn,Mn),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Rn),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,En),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,un),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,$t),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Dt),Be===0&&De.generateMipmaps&&ge.generateMipmap(ge.TEXTURE_2D),He.unbindTexture()},this.copyTextureToTexture3D=function(pe,De,$e=null,Qe=null,Be=0){pe.isTexture!==!0&&(y_("WebGLRenderer: copyTextureToTexture3D function signature has changed."),$e=arguments[0]||null,Qe=arguments[1]||null,pe=arguments[2],De=arguments[3],Be=arguments[4]||0);let At,Ft,bt,Vt,nn,sn,qt,Tn,Rn;const En=pe.isCompressedTexture?pe.mipmaps[Be]:pe.image;$e!==null?(At=$e.max.x-$e.min.x,Ft=$e.max.y-$e.min.y,bt=$e.max.z-$e.min.z,Vt=$e.min.x,nn=$e.min.y,sn=$e.min.z):(At=En.width,Ft=En.height,bt=En.depth,Vt=0,nn=0,sn=0),Qe!==null?(qt=Qe.x,Tn=Qe.y,Rn=Qe.z):(qt=0,Tn=0,Rn=0);const un=le.convert(De.format),$t=le.convert(De.type);let Dt;if(De.isData3DTexture)fe.setTexture3D(De,0),Dt=ge.TEXTURE_3D;else if(De.isDataArrayTexture||De.isCompressedArrayTexture)fe.setTexture2DArray(De,0),Dt=ge.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,De.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,De.unpackAlignment);const Mn=ge.getParameter(ge.UNPACK_ROW_LENGTH),On=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),Fr=ge.getParameter(ge.UNPACK_SKIP_PIXELS),yi=ge.getParameter(ge.UNPACK_SKIP_ROWS),ir=ge.getParameter(ge.UNPACK_SKIP_IMAGES);ge.pixelStorei(ge.UNPACK_ROW_LENGTH,En.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,En.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Vt),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,nn),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,sn),pe.isDataTexture||pe.isData3DTexture?ge.texSubImage3D(Dt,Be,qt,Tn,Rn,At,Ft,bt,un,$t,En.data):De.isCompressedArrayTexture?ge.compressedTexSubImage3D(Dt,Be,qt,Tn,Rn,At,Ft,bt,un,En.data):ge.texSubImage3D(Dt,Be,qt,Tn,Rn,At,Ft,bt,un,$t,En),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Mn),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,On),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Fr),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,yi),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,ir),Be===0&&De.generateMipmaps&&ge.generateMipmap(Dt),He.unbindTexture()},this.initRenderTarget=function(pe){Nt.get(pe).__webglFramebuffer===void 0&&fe.setupRenderTarget(pe)},this.initTexture=function(pe){pe.isCubeTexture?fe.setTextureCube(pe,0):pe.isData3DTexture?fe.setTexture3D(pe,0):pe.isDataArrayTexture||pe.isCompressedArrayTexture?fe.setTexture2DArray(pe,0):fe.setTexture2D(pe,0),He.unbindTexture()},this.resetState=function(){Q=0,G=0,Y=null,He.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===_x?"display-p3":"srgb",t.unpackColorSpace=gr.workingColorSpace===Py?"display-p3":"srgb"}}class Mx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ln(e),this.density=t}clone(){return new Mx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ex{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ln(e),this.near=t,this.far=n}clone(){return new Ex(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class SR extends dr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ho,this.environmentIntensity=1,this.environmentRotation=new Ho,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class bx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ry,this.updateRanges=[],this.version=0,this.uuid=Wo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qs=new we;class nd{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)qs.fromBufferAttribute(this,t),qs.applyMatrix4(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)qs.fromBufferAttribute(this,t),qs.applyNormalMatrix(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)qs.fromBufferAttribute(this,t),qs.transformDirection(e),this.setXYZ(t,qs.x,qs.y,qs.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Ys(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Kn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ys(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ys(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ys(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ys(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array),s=Kn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Ir(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MR extends ks{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ln(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Lp;const Zm=new we,kp=new we,Op=new we,Dp=new St,Qm=new St,rF=new Ln,Ew=new we,Jm=new we,bw=new we,VP=new St,LE=new St,HP=new St;class iF extends dr{constructor(e=new MR){if(super(),this.isSprite=!0,this.type="Sprite",Lp===void 0){Lp=new Jn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new bx(t,5);Lp.setIndex([0,1,2,0,2,3]),Lp.setAttribute("position",new nd(n,3,0,!1)),Lp.setAttribute("uv",new nd(n,2,3,!1))}this.geometry=Lp,this.material=e,this.center=new St(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kp.setFromMatrixScale(this.matrixWorld),rF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Op.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kp.multiplyScalar(-Op.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const o=this.center;Aw(Ew.set(-.5,-.5,0),Op,o,kp,i,s),Aw(Jm.set(.5,-.5,0),Op,o,kp,i,s),Aw(bw.set(.5,.5,0),Op,o,kp,i,s),VP.set(0,0),LE.set(1,0),HP.set(1,1);let l=e.ray.intersectTriangle(Ew,Jm,bw,!1,Zm);if(l===null&&(Aw(Jm.set(-.5,.5,0),Op,o,kp,i,s),LE.set(0,1),l=e.ray.intersectTriangle(Ew,bw,Jm,!1,Zm),l===null))return;const c=e.ray.origin.distanceTo(Zm);c<e.near||c>e.far||t.push({distance:c,point:Zm.clone(),uv:yo.getInterpolation(Zm,Ew,Jm,bw,VP,LE,HP,new St),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Aw(r,e,t,n,i,s){Dp.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Qm.x=s*Dp.x-i*Dp.y,Qm.y=i*Dp.x+s*Dp.y):Qm.copy(Dp),r.copy(e),r.x+=Qm.x,r.y+=Qm.y,r.applyMatrix4(rF)}const Tw=new we,GP=new we;class sF extends dr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Tw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Tw);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Tw.setFromMatrixPosition(e.matrixWorld),GP.setFromMatrixPosition(this.matrixWorld);const n=Tw.distanceTo(GP)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const jP=new we,qP=new hr,KP=new hr,Qre=new we,YP=new Ln,Rw=new we,kE=new Ls,XP=new Ln,OE=new hd;class oF extends Ni{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=pA,this.bindMatrix=new Ln,this.bindMatrixInverse=new Ln,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $s),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Rw),this.boundingBox.expandByPoint(Rw)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ls),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Rw),this.boundingSphere.expandByPoint(Rw)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kE.copy(this.boundingSphere),kE.applyMatrix4(i),e.ray.intersectsSphere(kE)!==!1&&(XP.copy(i).invert(),OE.copy(e.ray).applyMatrix4(XP),!(this.boundingBox!==null&&OE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,OE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new hr,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===pA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===b6?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;qP.fromBufferAttribute(i.attributes.skinIndex,e),KP.fromBufferAttribute(i.attributes.skinWeight,e),jP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=KP.getComponent(s);if(o!==0){const l=qP.getComponent(s);YP.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(Qre.copy(jP).applyMatrix4(YP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ER extends dr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Il extends li{constructor(e=null,t=1,n=1,i,s,o,l,c,d=Zi,h=Zi,w,_){super(null,o,l,c,d,h,i,s,w,_),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const $P=new Ln,Jre=new Ln;class Ax{constructor(e=[],t=[]){this.uuid=Wo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ln)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ln;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:Jre;$P.multiplyMatrices(l,t[s]),$P.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Ax(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Il(t,e,e,Ns,wo);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new ER),this.bones.push(o),this.boneInverses.push(new Ln().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class M0 extends Ir{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bp=new Ln,ZP=new Ln,Cw=[],QP=new $s,eie=new Ln,eg=new Ni,tg=new Ls;class aF extends Ni{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new M0(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,eie)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $s),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Bp),QP.copy(e.boundingBox).applyMatrix4(Bp),this.boundingBox.union(QP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ls),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Bp),tg.copy(e.boundingSphere).applyMatrix4(Bp),this.boundingSphere.union(tg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=i[o+l]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(eg.geometry=this.geometry,eg.material=this.material,eg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),tg.copy(this.boundingSphere),tg.applyMatrix4(n),e.ray.intersectsSphere(tg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Bp),ZP.multiplyMatrices(n,Bp),eg.matrixWorld=ZP,eg.raycast(e,Cw);for(let o=0,l=Cw.length;o<l;o++){const c=Cw[o];c.instanceId=s,c.object=this,t.push(c)}Cw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new M0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Il(new Float32Array(i*this.count),i,this.count,gx,wo));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const l=this.geometry.morphTargetsRelative?1:1-o,c=i*e;s[c]=l,s.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function tie(r,e){return r.z-e.z}function nie(r,e){return e.z-r.z}class rie{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=n}reset(){this.list.length=0,this.index=0}}const Fc=new Ln,DE=new Ln,iie=new Ln,sie=new ln(1,1,1),JP=new Ln,BE=new Oy,Iw=new $s,uh=new Ls,ng=new we,eL=new we,oie=new we,UE=new rie,Ts=new Ni,Nw=[];function aie(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,r.getComponent(s,o))}else e.array.set(r.array,t*n);e.needsUpdate=!0}class lF extends Ni{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,n=t*2,i){super(new Jn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Il(t,e,e,Ns,wo);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Il(t,e,e,Ny,Ku);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Il(t,e,e,Ns,wo);n.colorSpace=gr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:c,normalized:d}=o,h=new l.constructor(n*c),w=new Ir(h,c,d);t.setAttribute(s,w)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Ir(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $s);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Fc),this.getBoundingBoxAt(s,Iw).applyMatrix4(Fc),e.union(Iw)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Fc),this.getBoundingSphereAt(s,uh).applyMatrix4(Fc),e.union(uh)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(i=this._availableInstanceIds.pop(),this._drawInfo[i]=n):(i=this._drawInfo.length,this._drawInfo.push(n));const s=this._matricesTexture,o=s.image.data;iie.toArray(o,i*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(sie.toArray(l.image.data,i*4),l.needsUpdate=!0),i}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const d=e.getIndex(),h=d!==null;if(h&&(n===-1?i.indexCount=d.count:i.indexCount=n,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const w=this._geometryCount;return this._geometryCount++,o.push(i),l.push({start:h?i.indexStart:i.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new $s,sphereInitialized:!1,sphere:new Ls}),this.setGeometryAt(w,e),w}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),l=this._reservedRanges[e];if(i&&o.count>l.indexCount||t.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,d=l.vertexCount;for(const x in n.attributes){const A=t.getAttribute(x),L=n.getAttribute(x);aie(A,L,c);const N=A.itemSize;for(let C=A.count,D=d;C<D;C++){const k=c+C;for(let F=0;F<N;F++)L.setComponent(k,F,0)}L.needsUpdate=!0,L.addUpdateRange(c*N,d*N)}if(i){const x=l.indexStart;for(let A=0;A<o.count;A++)s.setX(x+A,c+o.getX(A));for(let A=o.count,L=l.indexCount;A<L;A++)s.setX(x+A,c);s.needsUpdate=!0,s.addUpdateRange(x,l.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const w=this._drawRanges[e],_=t.getAttribute("position");return w.count=i?o.count:_.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.box,s=this.geometry;if(n.boxInitialized===!1){i.makeEmpty();const o=s.index,l=s.attributes.position,c=this._drawRanges[e];for(let d=c.start,h=c.start+c.count;d<h;d++){let w=d;o&&(w=o.getX(w)),i.expandByPoint(ng.fromBufferAttribute(l,w))}n.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,Iw),Iw.getCenter(i.center);const o=s.index,l=s.attributes.position,c=this._drawRanges[e];let d=0;for(let h=c.start,w=c.start+c.count;h<w;h++){let _=h;o&&(_=o.getX(_)),ng.fromBufferAttribute(l,_),d=Math.max(d,i.center.distanceToSquared(ng))}i.radius=Math.sqrt(d),n.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(i,e*4),n.needsUpdate=!0,this)}getColorAt(e,t){const n=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(n,e*4)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||t<0||t>=this._geometryCount?null:(n[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const n=this._drawRanges[e];return t.start=n.start,t.count=n.count,t}raycast(e,t){const n=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,o=this.geometry;Ts.material=this.material,Ts.geometry.index=o.index,Ts.geometry.attributes=o.attributes,Ts.geometry.boundingBox===null&&(Ts.geometry.boundingBox=new $s),Ts.geometry.boundingSphere===null&&(Ts.geometry.boundingSphere=new Ls);for(let l=0,c=n.length;l<c;l++){if(!n[l].visible||!n[l].active)continue;const d=n[l].geometryIndex,h=i[d];Ts.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(l,Ts.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,Ts.geometry.boundingBox),this.getBoundingSphereAt(d,Ts.geometry.boundingSphere),Ts.raycast(e,Nw);for(let w=0,_=Nw.length;w<_;w++){const x=Nw[w];x.object=this,x.batchId=l,t.push(x)}Nw.length=0}Ts.material=null,Ts.geometry.index=null,Ts.geometry.attributes={},Ts.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._drawInfo,d=this._multiDrawStarts,h=this._multiDrawCounts,w=this._drawRanges,_=this.perObjectFrustumCulled,x=this._indirectTexture,A=x.image.data;_&&(JP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),BE.setFromProjectionMatrix(JP,e.coordinateSystem));let L=0;if(this.sortObjects){DE.copy(this.matrixWorld).invert(),ng.setFromMatrixPosition(n.matrixWorld).applyMatrix4(DE),eL.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(DE);for(let D=0,k=c.length;D<k;D++)if(c[D].visible&&c[D].active){const F=c[D].geometryIndex;this.getMatrixAt(D,Fc),this.getBoundingSphereAt(F,uh).applyMatrix4(Fc);let Q=!1;if(_&&(Q=!BE.intersectsSphere(uh)),!Q){const G=oie.subVectors(uh.center,ng).dot(eL);UE.push(w[F],G,D)}}const N=UE.list,C=this.customSort;C===null?N.sort(s.transparent?nie:tie):C.call(this,N,n);for(let D=0,k=N.length;D<k;D++){const F=N[D];d[L]=F.start*l,h[L]=F.count,A[L]=F.index,L++}UE.reset()}else for(let N=0,C=c.length;N<C;N++)if(c[N].visible&&c[N].active){const D=c[N].geometryIndex;let k=!1;if(_&&(this.getMatrixAt(N,Fc),this.getBoundingSphereAt(D,uh).applyMatrix4(Fc),k=!BE.intersectsSphere(uh)),!k){const F=w[D];d[L]=F.start*l,h[L]=F.count,A[L]=N,L++}}x.needsUpdate=!0,this._multiDrawCount=L,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Qs extends ks{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ln(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const C1=new we,I1=new we,tL=new Ln,rg=new hd,Pw=new Ls,FE=new we,nL=new we;class of extends dr{constructor(e=new Jn,t=new Qs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)C1.fromBufferAttribute(t,i-1),I1.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=C1.distanceTo(I1);e.setAttribute("lineDistance",new vn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Pw.copy(n.boundingSphere),Pw.applyMatrix4(i),Pw.radius+=s,e.ray.intersectsSphere(Pw)===!1)return;tL.copy(i).invert(),rg.copy(e.ray).applyMatrix4(tL);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=this.isLineSegments?2:1,h=n.index,_=n.attributes.position;if(h!==null){const x=Math.max(0,o.start),A=Math.min(h.count,o.start+o.count);for(let L=x,N=A-1;L<N;L+=d){const C=h.getX(L),D=h.getX(L+1),k=Lw(this,e,rg,c,C,D);k&&t.push(k)}if(this.isLineLoop){const L=h.getX(A-1),N=h.getX(x),C=Lw(this,e,rg,c,L,N);C&&t.push(C)}}else{const x=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let L=x,N=A-1;L<N;L+=d){const C=Lw(this,e,rg,c,L,L+1);C&&t.push(C)}if(this.isLineLoop){const L=Lw(this,e,rg,c,A-1,x);L&&t.push(L)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Lw(r,e,t,n,i,s){const o=r.geometry.attributes.position;if(C1.fromBufferAttribute(o,i),I1.fromBufferAttribute(o,s),t.distanceSqToSegment(C1,I1,FE,nL)>n)return;FE.applyMatrix4(r.matrixWorld);const c=e.ray.origin.distanceTo(FE);if(!(c<e.near||c>e.far))return{distance:c,point:nL.clone().applyMatrix4(r.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:r}}const rL=new we,iL=new we;class Ol extends of{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)rL.fromBufferAttribute(t,i),iL.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+rL.distanceTo(iL);e.setAttribute("lineDistance",new vn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class uF extends of{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class bR extends ks{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ln(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const sL=new Ln,_A=new hd,kw=new Ls,Ow=new we;class cF extends dr{constructor(e=new Jn,t=new bR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),kw.copy(n.boundingSphere),kw.applyMatrix4(i),kw.radius+=s,e.ray.intersectsSphere(kw)===!1)return;sL.copy(i).invert(),_A.copy(e.ray).applyMatrix4(sL);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=n.index,w=n.attributes.position;if(d!==null){const _=Math.max(0,o.start),x=Math.min(d.count,o.start+o.count);for(let A=_,L=x;A<L;A++){const N=d.getX(A);Ow.fromBufferAttribute(w,N),oL(Ow,N,c,i,e,t,this)}}else{const _=Math.max(0,o.start),x=Math.min(w.count,o.start+o.count);for(let A=_,L=x;A<L;A++)Ow.fromBufferAttribute(w,A),oL(Ow,A,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function oL(r,e,t,n,i,s,o){const l=_A.distanceSqToPoint(r);if(l<t){const c=new we;_A.closestPointToPoint(r,c),c.applyMatrix4(n);const d=i.ray.origin.distanceTo(c);if(d<i.near||d>i.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class lie extends li{constructor(e,t,n,i,s,o,l,c,d){super(e,t,n,i,s,o,l,c,d),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ci,this.magFilter=s!==void 0?s:Ci,this.generateMipmaps=!1;const h=this;function w(){h.needsUpdate=!0,e.requestVideoFrameCallback(w)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(w)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class uie extends li{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Zi,this.minFilter=Zi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Tx extends li{constructor(e,t,n,i,s,o,l,c,d,h,w,_){super(null,o,l,c,d,h,i,s,w,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class cie extends Tx{constructor(e,t,n,i,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=aa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class fie extends Tx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,qu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class hie extends li{constructor(e,t,n,i,s,o,l,c,d){super(e,t,n,i,s,o,l,c,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,c=s-1,d;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),d=n[i]-o,d<0)l=i+1;else if(d>0)c=i-1;else{c=i;break}if(i=c,n[i]===o)return i/(s-1);const h=n[i],_=n[i+1]-h,x=(o-h)/_;return(i+x)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),c=t||(o.isVector2?new St:new we);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new we,i=[],s=[],o=[],l=new we,c=new Ln;for(let x=0;x<=e;x++){const A=x/e;i[x]=this.getTangentAt(A,new we)}s[0]=new we,o[0]=new we;let d=Number.MAX_VALUE;const h=Math.abs(i[0].x),w=Math.abs(i[0].y),_=Math.abs(i[0].z);h<=d&&(d=h,n.set(1,0,0)),w<=d&&(d=w,n.set(0,1,0)),_<=d&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],l),o[0].crossVectors(i[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),o[x]=o[x-1].clone(),l.crossVectors(i[x-1],i[x]),l.length()>Number.EPSILON){l.normalize();const A=Math.acos(ai(i[x-1].dot(i[x]),-1,1));s[x].applyMatrix4(c.makeRotationAxis(l,A))}o[x].crossVectors(i[x],s[x])}if(t===!0){let x=Math.acos(ai(s[0].dot(s[e]),-1,1));x/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(x=-x);for(let A=1;A<=e;A++)s[A].applyMatrix4(c.makeRotationAxis(i[A],x*A)),o[A].crossVectors(i[A],s[A])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Rx extends Xa{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new St){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const h=Math.cos(this.aRotation),w=Math.sin(this.aRotation),_=c-this.aX,x=d-this.aY;c=_*h-x*w+this.aX,d=_*w+x*h+this.aY}return n.set(c,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fF extends Rx{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function AR(){let r=0,e=0,t=0,n=0;function i(s,o,l,c){r=s,e=l,t=-3*s+3*o-2*l-c,n=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,d){i(o,l,d*(l-s),d*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,d,h,w){let _=(o-s)/d-(l-s)/(d+h)+(l-o)/h,x=(l-o)/h-(c-o)/(h+w)+(c-l)/w;_*=h,x*=h,i(o,l,_,x)},calc:function(s){const o=s*s,l=o*s;return r+e*s+t*o+n*l}}}const Dw=new we,zE=new AR,WE=new AR,VE=new AR;class hF extends Xa{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new we){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let d,h;this.closed||l>0?d=i[(l-1)%s]:(Dw.subVectors(i[0],i[1]).add(i[0]),d=Dw);const w=i[l%s],_=i[(l+1)%s];if(this.closed||l+2<s?h=i[(l+2)%s]:(Dw.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=Dw),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let A=Math.pow(d.distanceToSquared(w),x),L=Math.pow(w.distanceToSquared(_),x),N=Math.pow(_.distanceToSquared(h),x);L<1e-4&&(L=1),A<1e-4&&(A=L),N<1e-4&&(N=L),zE.initNonuniformCatmullRom(d.x,w.x,_.x,h.x,A,L,N),WE.initNonuniformCatmullRom(d.y,w.y,_.y,h.y,A,L,N),VE.initNonuniformCatmullRom(d.z,w.z,_.z,h.z,A,L,N)}else this.curveType==="catmullrom"&&(zE.initCatmullRom(d.x,w.x,_.x,h.x,this.tension),WE.initCatmullRom(d.y,w.y,_.y,h.y,this.tension),VE.initCatmullRom(d.z,w.z,_.z,h.z,this.tension));return n.set(zE.calc(c),WE.calc(c),VE.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new we().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aL(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,l=r*r,c=r*l;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*l+s*r+t}function die(r,e){const t=1-r;return t*t*e}function pie(r,e){return 2*(1-r)*r*e}function mie(r,e){return r*r*e}function Ig(r,e,t,n){return die(r,e)+pie(r,t)+mie(r,n)}function gie(r,e){const t=1-r;return t*t*t*e}function yie(r,e){const t=1-r;return 3*t*t*r*e}function vie(r,e){return 3*(1-r)*r*r*e}function wie(r,e){return r*r*r*e}function Ng(r,e,t,n,i){return gie(r,e)+yie(r,t)+vie(r,n)+wie(r,i)}class TR extends Xa{constructor(e=new St,t=new St,n=new St,i=new St){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new St){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Ng(e,i.x,s.x,o.x,l.x),Ng(e,i.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dF extends Xa{constructor(e=new we,t=new we,n=new we,i=new we){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new we){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Ng(e,i.x,s.x,o.x,l.x),Ng(e,i.y,s.y,o.y,l.y),Ng(e,i.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RR extends Xa{constructor(e=new St,t=new St){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new St){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new St){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pF extends Xa{constructor(e=new we,t=new we){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new we){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new we){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CR extends Xa{constructor(e=new St,t=new St,n=new St){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new St){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Ig(e,i.x,s.x,o.x),Ig(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IR extends Xa{constructor(e=new we,t=new we,n=new we){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new we){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Ig(e,i.x,s.x,o.x),Ig(e,i.y,s.y,o.y),Ig(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NR extends Xa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new St){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),l=s-o,c=i[o===0?o:o-1],d=i[o],h=i[o>i.length-2?i.length-1:o+1],w=i[o>i.length-3?i.length-1:o+2];return n.set(aL(l,c.x,d.x,h.x,w.x),aL(l,c.y,d.y,h.y,w.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new St().fromArray(i))}return this}}var N1=Object.freeze({__proto__:null,ArcCurve:fF,CatmullRomCurve3:hF,CubicBezierCurve:TR,CubicBezierCurve3:dF,EllipseCurve:Rx,LineCurve:RR,LineCurve3:pF,QuadraticBezierCurve:CR,QuadraticBezierCurve3:IR,SplineCurve:NR});class mF extends Xa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new N1[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,l=this.curves[s],c=l.getLength(),d=c===0?0:1-o/c;return l.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let d=0;d<c.length;d++){const h=c[d];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new N1[i.type]().fromJSON(i))}return this}}class oy extends mF{constructor(e){super(),this.type="Path",this.currentPoint=new St,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new RR(this.currentPoint.clone(),new St(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new CR(this.currentPoint.clone(),new St(e,t),new St(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const l=new TR(this.currentPoint.clone(),new St(e,t),new St(n,i),new St(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new NR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,l,c){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+d,t+h,n,i,s,o,l,c),this}absellipse(e,t,n,i,s,o,l,c){const d=new Rx(e,t,n,i,s,o,l,c);if(this.curves.length>0){const w=d.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(d);const h=d.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Dy extends Jn{constructor(e=[new St(0,-.5),new St(.5,0),new St(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=ai(i,0,Math.PI*2);const s=[],o=[],l=[],c=[],d=[],h=1/t,w=new we,_=new St,x=new we,A=new we,L=new we;let N=0,C=0;for(let D=0;D<=e.length-1;D++)switch(D){case 0:N=e[D+1].x-e[D].x,C=e[D+1].y-e[D].y,x.x=C*1,x.y=-N,x.z=C*0,L.copy(x),x.normalize(),c.push(x.x,x.y,x.z);break;case e.length-1:c.push(L.x,L.y,L.z);break;default:N=e[D+1].x-e[D].x,C=e[D+1].y-e[D].y,x.x=C*1,x.y=-N,x.z=C*0,A.copy(x),x.x+=L.x,x.y+=L.y,x.z+=L.z,x.normalize(),c.push(x.x,x.y,x.z),L.copy(A)}for(let D=0;D<=t;D++){const k=n+D*h*i,F=Math.sin(k),Q=Math.cos(k);for(let G=0;G<=e.length-1;G++){w.x=e[G].x*F,w.y=e[G].y,w.z=e[G].x*Q,o.push(w.x,w.y,w.z),_.x=D/t,_.y=G/(e.length-1),l.push(_.x,_.y);const Y=c[3*G+0]*F,ee=c[3*G+1],te=c[3*G+0]*Q;d.push(Y,ee,te)}}for(let D=0;D<t;D++)for(let k=0;k<e.length-1;k++){const F=k+D*e.length,Q=F,G=F+e.length,Y=F+e.length+1,ee=F+1;s.push(Q,G,ee),s.push(Y,ee,G)}this.setIndex(s),this.setAttribute("position",new vn(o,3)),this.setAttribute("uv",new vn(l,2)),this.setAttribute("normal",new vn(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dy(e.points,e.segments,e.phiStart,e.phiLength)}}class Cx extends Dy{constructor(e=1,t=1,n=4,i=8){const s=new oy;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Cx(e.radius,e.length,e.capSegments,e.radialSegments)}}class Ix extends Jn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],o=[],l=[],c=[],d=new we,h=new St;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let w=0,_=3;w<=t;w++,_+=3){const x=n+w/t*i;d.x=e*Math.cos(x),d.y=e*Math.sin(x),o.push(d.x,d.y,d.z),l.push(0,0,1),h.x=(o[_]/e+1)/2,h.y=(o[_+1]/e+1)/2,c.push(h.x,h.y)}for(let w=1;w<=t;w++)s.push(w,w+1,0);this.setIndex(s),this.setAttribute("position",new vn(o,3)),this.setAttribute("normal",new vn(l,3)),this.setAttribute("uv",new vn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ix(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class B0 extends Jn{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const d=this;i=Math.floor(i),s=Math.floor(s);const h=[],w=[],_=[],x=[];let A=0;const L=[],N=n/2;let C=0;D(),o===!1&&(e>0&&k(!0),t>0&&k(!1)),this.setIndex(h),this.setAttribute("position",new vn(w,3)),this.setAttribute("normal",new vn(_,3)),this.setAttribute("uv",new vn(x,2));function D(){const F=new we,Q=new we;let G=0;const Y=(t-e)/n;for(let ee=0;ee<=s;ee++){const te=[],U=ee/s,V=U*(t-e)+e;for(let K=0;K<=i;K++){const E=K/i,a=E*c+l,p=Math.sin(a),M=Math.cos(a);Q.x=V*p,Q.y=-U*n+N,Q.z=V*M,w.push(Q.x,Q.y,Q.z),F.set(p,Y,M).normalize(),_.push(F.x,F.y,F.z),x.push(E,1-U),te.push(A++)}L.push(te)}for(let ee=0;ee<i;ee++)for(let te=0;te<s;te++){const U=L[te][ee],V=L[te+1][ee],K=L[te+1][ee+1],E=L[te][ee+1];e>0&&(h.push(U,V,E),G+=3),t>0&&(h.push(V,K,E),G+=3)}d.addGroup(C,G,0),C+=G}function k(F){const Q=A,G=new St,Y=new we;let ee=0;const te=F===!0?e:t,U=F===!0?1:-1;for(let K=1;K<=i;K++)w.push(0,N*U,0),_.push(0,U,0),x.push(.5,.5),A++;const V=A;for(let K=0;K<=i;K++){const a=K/i*c+l,p=Math.cos(a),M=Math.sin(a);Y.x=te*M,Y.y=N*U,Y.z=te*p,w.push(Y.x,Y.y,Y.z),_.push(0,U,0),G.x=p*.5+.5,G.y=M*.5*U+.5,x.push(G.x,G.y),A++}for(let K=0;K<i;K++){const E=Q+K,a=V+K;F===!0?h.push(a,a+1,E):h.push(a+1,a,E),ee+=3}d.addGroup(C,ee,F===!0?1:2),C+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new B0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Nx extends B0{constructor(e=1,t=1,n=32,i=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,i,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Nx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ff extends Jn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],o=[];l(i),d(n),h(),this.setAttribute("position",new vn(s,3)),this.setAttribute("normal",new vn(s.slice(),3)),this.setAttribute("uv",new vn(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(D){const k=new we,F=new we,Q=new we;for(let G=0;G<t.length;G+=3)x(t[G+0],k),x(t[G+1],F),x(t[G+2],Q),c(k,F,Q,D)}function c(D,k,F,Q){const G=Q+1,Y=[];for(let ee=0;ee<=G;ee++){Y[ee]=[];const te=D.clone().lerp(F,ee/G),U=k.clone().lerp(F,ee/G),V=G-ee;for(let K=0;K<=V;K++)K===0&&ee===G?Y[ee][K]=te:Y[ee][K]=te.clone().lerp(U,K/V)}for(let ee=0;ee<G;ee++)for(let te=0;te<2*(G-ee)-1;te++){const U=Math.floor(te/2);te%2===0?(_(Y[ee][U+1]),_(Y[ee+1][U]),_(Y[ee][U])):(_(Y[ee][U+1]),_(Y[ee+1][U+1]),_(Y[ee+1][U]))}}function d(D){const k=new we;for(let F=0;F<s.length;F+=3)k.x=s[F+0],k.y=s[F+1],k.z=s[F+2],k.normalize().multiplyScalar(D),s[F+0]=k.x,s[F+1]=k.y,s[F+2]=k.z}function h(){const D=new we;for(let k=0;k<s.length;k+=3){D.x=s[k+0],D.y=s[k+1],D.z=s[k+2];const F=N(D)/2/Math.PI+.5,Q=C(D)/Math.PI+.5;o.push(F,1-Q)}A(),w()}function w(){for(let D=0;D<o.length;D+=6){const k=o[D+0],F=o[D+2],Q=o[D+4],G=Math.max(k,F,Q),Y=Math.min(k,F,Q);G>.9&&Y<.1&&(k<.2&&(o[D+0]+=1),F<.2&&(o[D+2]+=1),Q<.2&&(o[D+4]+=1))}}function _(D){s.push(D.x,D.y,D.z)}function x(D,k){const F=D*3;k.x=e[F+0],k.y=e[F+1],k.z=e[F+2]}function A(){const D=new we,k=new we,F=new we,Q=new we,G=new St,Y=new St,ee=new St;for(let te=0,U=0;te<s.length;te+=9,U+=6){D.set(s[te+0],s[te+1],s[te+2]),k.set(s[te+3],s[te+4],s[te+5]),F.set(s[te+6],s[te+7],s[te+8]),G.set(o[U+0],o[U+1]),Y.set(o[U+2],o[U+3]),ee.set(o[U+4],o[U+5]),Q.copy(D).add(k).add(F).divideScalar(3);const V=N(Q);L(G,U+0,D,V),L(Y,U+2,k,V),L(ee,U+4,F,V)}}function L(D,k,F,Q){Q<0&&D.x===1&&(o[k]=D.x-1),F.x===0&&F.z===0&&(o[k]=Q/2/Math.PI+.5)}function N(D){return Math.atan2(D.z,-D.x)}function C(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ff(e.vertices,e.indices,e.radius,e.details)}}class Px extends ff{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Px(e.radius,e.detail)}}const Bw=new we,Uw=new we,HE=new we,Fw=new yo;class gF extends Jn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(qh*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,d=[0,0,0],h=["a","b","c"],w=new Array(3),_={},x=[];for(let A=0;A<c;A+=3){o?(d[0]=o.getX(A),d[1]=o.getX(A+1),d[2]=o.getX(A+2)):(d[0]=A,d[1]=A+1,d[2]=A+2);const{a:L,b:N,c:C}=Fw;if(L.fromBufferAttribute(l,d[0]),N.fromBufferAttribute(l,d[1]),C.fromBufferAttribute(l,d[2]),Fw.getNormal(HE),w[0]=`${Math.round(L.x*i)},${Math.round(L.y*i)},${Math.round(L.z*i)}`,w[1]=`${Math.round(N.x*i)},${Math.round(N.y*i)},${Math.round(N.z*i)}`,w[2]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,!(w[0]===w[1]||w[1]===w[2]||w[2]===w[0]))for(let D=0;D<3;D++){const k=(D+1)%3,F=w[D],Q=w[k],G=Fw[h[D]],Y=Fw[h[k]],ee=`${F}_${Q}`,te=`${Q}_${F}`;te in _&&_[te]?(HE.dot(_[te].normal)<=s&&(x.push(G.x,G.y,G.z),x.push(Y.x,Y.y,Y.z)),_[te]=null):ee in _||(_[ee]={index0:d[D],index1:d[k],normal:HE.clone()})}}for(const A in _)if(_[A]){const{index0:L,index1:N}=_[A];Bw.fromBufferAttribute(l,L),Uw.fromBufferAttribute(l,N),x.push(Bw.x,Bw.y,Bw.z),x.push(Uw.x,Uw.y,Uw.z)}this.setAttribute("position",new vn(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Yh extends oy{constructor(e){super(e),this.uuid=Wo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new oy().fromJSON(i))}return this}}const _ie={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=yF(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,d,h,w,_,x;if(n&&(s=bie(r,e,s,t)),r.length>80*t){l=d=r[0],c=h=r[1];for(let A=t;A<i;A+=t)w=r[A],_=r[A+1],w<l&&(l=w),_<c&&(c=_),w>d&&(d=w),_>h&&(h=_);x=Math.max(d-l,h-c),x=x!==0?32767/x:0}return ay(s,o,t,l,c,x,0),o}};function yF(r,e,t,n,i){let s,o;if(i===Die(r,e,t,n)>0)for(s=e;s<t;s+=n)o=lL(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=lL(s,r[s],r[s+1],o);return o&&Lx(o,o.next)&&(uy(o),o=o.next),o}function rd(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Lx(t,t.next)||Qr(t.prev,t,t.next)===0)){if(uy(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function ay(r,e,t,n,i,s,o){if(!r)return;!o&&s&&Iie(r,n,i,s);let l=r,c,d;for(;r.prev!==r.next;){if(c=r.prev,d=r.next,s?Sie(r,n,i,s):xie(r)){e.push(c.i/t|0),e.push(r.i/t|0),e.push(d.i/t|0),uy(r),r=d.next,l=d.next;continue}if(r=d,r===l){o?o===1?(r=Mie(rd(r),e,t),ay(r,e,t,n,i,s,2)):o===2&&Eie(r,e,t,n,i,s):ay(rd(r),e,t,n,i,s,1);break}}}function xie(r){const e=r.prev,t=r,n=r.next;if(Qr(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,l=e.y,c=t.y,d=n.y,h=i<s?i<o?i:o:s<o?s:o,w=l<c?l<d?l:d:c<d?c:d,_=i>s?i>o?i:o:s>o?s:o,x=l>c?l>d?l:d:c>d?c:d;let A=n.next;for(;A!==e;){if(A.x>=h&&A.x<=_&&A.y>=w&&A.y<=x&&r0(i,l,s,c,o,d,A.x,A.y)&&Qr(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function Sie(r,e,t,n){const i=r.prev,s=r,o=r.next;if(Qr(i,s,o)>=0)return!1;const l=i.x,c=s.x,d=o.x,h=i.y,w=s.y,_=o.y,x=l<c?l<d?l:d:c<d?c:d,A=h<w?h<_?h:_:w<_?w:_,L=l>c?l>d?l:d:c>d?c:d,N=h>w?h>_?h:_:w>_?w:_,C=xA(x,A,e,t,n),D=xA(L,N,e,t,n);let k=r.prevZ,F=r.nextZ;for(;k&&k.z>=C&&F&&F.z<=D;){if(k.x>=x&&k.x<=L&&k.y>=A&&k.y<=N&&k!==i&&k!==o&&r0(l,h,c,w,d,_,k.x,k.y)&&Qr(k.prev,k,k.next)>=0||(k=k.prevZ,F.x>=x&&F.x<=L&&F.y>=A&&F.y<=N&&F!==i&&F!==o&&r0(l,h,c,w,d,_,F.x,F.y)&&Qr(F.prev,F,F.next)>=0))return!1;F=F.nextZ}for(;k&&k.z>=C;){if(k.x>=x&&k.x<=L&&k.y>=A&&k.y<=N&&k!==i&&k!==o&&r0(l,h,c,w,d,_,k.x,k.y)&&Qr(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;F&&F.z<=D;){if(F.x>=x&&F.x<=L&&F.y>=A&&F.y<=N&&F!==i&&F!==o&&r0(l,h,c,w,d,_,F.x,F.y)&&Qr(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function Mie(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!Lx(i,s)&&vF(i,n,n.next,s)&&ly(i,s)&&ly(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),uy(n),uy(n.next),n=r=s),n=n.next}while(n!==r);return rd(n)}function Eie(r,e,t,n,i,s){let o=r;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&Lie(o,l)){let c=wF(o,l);o=rd(o,o.next),c=rd(c,c.next),ay(o,e,t,n,i,s,0),ay(c,e,t,n,i,s,0);return}l=l.next}o=o.next}while(o!==r)}function bie(r,e,t,n){const i=[];let s,o,l,c,d;for(s=0,o=e.length;s<o;s++)l=e[s]*n,c=s<o-1?e[s+1]*n:r.length,d=yF(r,l,c,n,!1),d===d.next&&(d.steiner=!0),i.push(Pie(d));for(i.sort(Aie),s=0;s<i.length;s++)t=Tie(i[s],t);return t}function Aie(r,e){return r.x-e.x}function Tie(r,e){const t=Rie(r,e);if(!t)return e;const n=wF(t,r);return rd(n,n.next),rd(t,t.next)}function Rie(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const _=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=s&&_>n&&(n=_,i=t.x<t.next.x?t:t.next,_===s))return i}t=t.next}while(t!==e);if(!i)return null;const l=i,c=i.x,d=i.y;let h=1/0,w;t=i;do s>=t.x&&t.x>=c&&s!==t.x&&r0(o<d?s:n,o,c,d,o<d?n:s,o,t.x,t.y)&&(w=Math.abs(o-t.y)/(s-t.x),ly(t,r)&&(w<h||w===h&&(t.x>i.x||t.x===i.x&&Cie(i,t)))&&(i=t,h=w)),t=t.next;while(t!==l);return i}function Cie(r,e){return Qr(r.prev,r,e.prev)<0&&Qr(e.next,r,r.next)<0}function Iie(r,e,t,n){let i=r;do i.z===0&&(i.z=xA(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,Nie(i)}function Nie(r){let e,t,n,i,s,o,l,c,d=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<d&&(l++,n=n.nextZ,!!n);e++);for(c=d;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,c--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,d*=2}while(o>1);return r}function xA(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function Pie(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function r0(r,e,t,n,i,s,o,l){return(i-o)*(e-l)>=(r-o)*(s-l)&&(r-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(i-o)*(n-l)}function Lie(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!kie(r,e)&&(ly(r,e)&&ly(e,r)&&Oie(r,e)&&(Qr(r.prev,r,e.prev)||Qr(r,e.prev,e))||Lx(r,e)&&Qr(r.prev,r,r.next)>0&&Qr(e.prev,e,e.next)>0)}function Qr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Lx(r,e){return r.x===e.x&&r.y===e.y}function vF(r,e,t,n){const i=Ww(Qr(r,e,t)),s=Ww(Qr(r,e,n)),o=Ww(Qr(t,n,r)),l=Ww(Qr(t,n,e));return!!(i!==s&&o!==l||i===0&&zw(r,t,e)||s===0&&zw(r,n,e)||o===0&&zw(t,r,n)||l===0&&zw(t,e,n))}function zw(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Ww(r){return r>0?1:r<0?-1:0}function kie(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&vF(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function ly(r,e){return Qr(r.prev,r,r.next)<0?Qr(r,e,r.next)>=0&&Qr(r,r.prev,e)>=0:Qr(r,e,r.prev)<0||Qr(r,r.next,e)<0}function Oie(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function wF(r,e){const t=new SA(r.i,r.x,r.y),n=new SA(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function lL(r,e,t,n){const i=new SA(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function uy(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function SA(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Die(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class Nl{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Nl.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];uL(e),cL(n,e);let o=e.length;t.forEach(uL);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,cL(n,t[c]);const l=_ie.triangulate(n,i);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function uL(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function cL(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class kx extends Jn{constructor(e=new Yh([new St(.5,.5),new St(-.5,.5),new St(-.5,-.5),new St(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let l=0,c=e.length;l<c;l++){const d=e[l];o(d)}this.setAttribute("position",new vn(i,3)),this.setAttribute("uv",new vn(s,2)),this.computeVertexNormals();function o(l){const c=[],d=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,w=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:x-.1,L=t.bevelOffset!==void 0?t.bevelOffset:0,N=t.bevelSegments!==void 0?t.bevelSegments:3;const C=t.extrudePath,D=t.UVGenerator!==void 0?t.UVGenerator:Bie;let k,F=!1,Q,G,Y,ee;C&&(k=C.getSpacedPoints(h),F=!0,_=!1,Q=C.computeFrenetFrames(h,!1),G=new we,Y=new we,ee=new we),_||(N=0,x=0,A=0,L=0);const te=l.extractPoints(d);let U=te.shape;const V=te.holes;if(!Nl.isClockWise(U)){U=U.reverse();for(let Pe=0,ge=V.length;Pe<ge;Pe++){const Ge=V[Pe];Nl.isClockWise(Ge)&&(V[Pe]=Ge.reverse())}}const E=Nl.triangulateShape(U,V),a=U;for(let Pe=0,ge=V.length;Pe<ge;Pe++){const Ge=V[Pe];U=U.concat(Ge)}function p(Pe,ge,Ge){return ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(ge,Ge)}const M=U.length,R=E.length;function T(Pe,ge,Ge){let je,yt,He;const nt=Pe.x-ge.x,Nt=Pe.y-ge.y,fe=Ge.x-Pe.x,oe=Ge.y-Pe.y,Oe=nt*nt+Nt*Nt,Te=nt*oe-Nt*fe;if(Math.abs(Te)>Number.EPSILON){const Le=Math.sqrt(Oe),ot=Math.sqrt(fe*fe+oe*oe),et=ge.x-Nt/Le,Ye=ge.y+nt/Le,Et=Ge.x-oe/ot,ut=Ge.y+fe/ot,re=((Et-et)*oe-(ut-Ye)*fe)/(nt*oe-Nt*fe);je=et+nt*re-Pe.x,yt=Ye+Nt*re-Pe.y;const j=je*je+yt*yt;if(j<=2)return new St(je,yt);He=Math.sqrt(j/2)}else{let Le=!1;nt>Number.EPSILON?fe>Number.EPSILON&&(Le=!0):nt<-Number.EPSILON?fe<-Number.EPSILON&&(Le=!0):Math.sign(Nt)===Math.sign(oe)&&(Le=!0),Le?(je=-Nt,yt=nt,He=Math.sqrt(Oe)):(je=nt,yt=Nt,He=Math.sqrt(Oe/2))}return new St(je/He,yt/He)}const P=[];for(let Pe=0,ge=a.length,Ge=ge-1,je=Pe+1;Pe<ge;Pe++,Ge++,je++)Ge===ge&&(Ge=0),je===ge&&(je=0),P[Pe]=T(a[Pe],a[Ge],a[je]);const I=[];let y,u=P.concat();for(let Pe=0,ge=V.length;Pe<ge;Pe++){const Ge=V[Pe];y=[];for(let je=0,yt=Ge.length,He=yt-1,nt=je+1;je<yt;je++,He++,nt++)He===yt&&(He=0),nt===yt&&(nt=0),y[je]=T(Ge[je],Ge[He],Ge[nt]);I.push(y),u=u.concat(y)}for(let Pe=0;Pe<N;Pe++){const ge=Pe/N,Ge=x*Math.cos(ge*Math.PI/2),je=A*Math.sin(ge*Math.PI/2)+L;for(let yt=0,He=a.length;yt<He;yt++){const nt=p(a[yt],P[yt],je);me(nt.x,nt.y,-Ge)}for(let yt=0,He=V.length;yt<He;yt++){const nt=V[yt];y=I[yt];for(let Nt=0,fe=nt.length;Nt<fe;Nt++){const oe=p(nt[Nt],y[Nt],je);me(oe.x,oe.y,-Ge)}}}const S=A+L;for(let Pe=0;Pe<M;Pe++){const ge=_?p(U[Pe],u[Pe],S):U[Pe];F?(Y.copy(Q.normals[0]).multiplyScalar(ge.x),G.copy(Q.binormals[0]).multiplyScalar(ge.y),ee.copy(k[0]).add(Y).add(G),me(ee.x,ee.y,ee.z)):me(ge.x,ge.y,0)}for(let Pe=1;Pe<=h;Pe++)for(let ge=0;ge<M;ge++){const Ge=_?p(U[ge],u[ge],S):U[ge];F?(Y.copy(Q.normals[Pe]).multiplyScalar(Ge.x),G.copy(Q.binormals[Pe]).multiplyScalar(Ge.y),ee.copy(k[Pe]).add(Y).add(G),me(ee.x,ee.y,ee.z)):me(Ge.x,Ge.y,w/h*Pe)}for(let Pe=N-1;Pe>=0;Pe--){const ge=Pe/N,Ge=x*Math.cos(ge*Math.PI/2),je=A*Math.sin(ge*Math.PI/2)+L;for(let yt=0,He=a.length;yt<He;yt++){const nt=p(a[yt],P[yt],je);me(nt.x,nt.y,w+Ge)}for(let yt=0,He=V.length;yt<He;yt++){const nt=V[yt];y=I[yt];for(let Nt=0,fe=nt.length;Nt<fe;Nt++){const oe=p(nt[Nt],y[Nt],je);F?me(oe.x,oe.y+k[h-1].y,k[h-1].x+Ge):me(oe.x,oe.y,w+Ge)}}}W(),$();function W(){const Pe=i.length/3;if(_){let ge=0,Ge=M*ge;for(let je=0;je<R;je++){const yt=E[je];_e(yt[2]+Ge,yt[1]+Ge,yt[0]+Ge)}ge=h+N*2,Ge=M*ge;for(let je=0;je<R;je++){const yt=E[je];_e(yt[0]+Ge,yt[1]+Ge,yt[2]+Ge)}}else{for(let ge=0;ge<R;ge++){const Ge=E[ge];_e(Ge[2],Ge[1],Ge[0])}for(let ge=0;ge<R;ge++){const Ge=E[ge];_e(Ge[0]+M*h,Ge[1]+M*h,Ge[2]+M*h)}}n.addGroup(Pe,i.length/3-Pe,0)}function $(){const Pe=i.length/3;let ge=0;se(a,ge),ge+=a.length;for(let Ge=0,je=V.length;Ge<je;Ge++){const yt=V[Ge];se(yt,ge),ge+=yt.length}n.addGroup(Pe,i.length/3-Pe,1)}function se(Pe,ge){let Ge=Pe.length;for(;--Ge>=0;){const je=Ge;let yt=Ge-1;yt<0&&(yt=Pe.length-1);for(let He=0,nt=h+N*2;He<nt;He++){const Nt=M*He,fe=M*(He+1),oe=ge+je+Nt,Oe=ge+yt+Nt,Te=ge+yt+fe,Le=ge+je+fe;be(oe,Oe,Te,Le)}}}function me(Pe,ge,Ge){c.push(Pe),c.push(ge),c.push(Ge)}function _e(Pe,ge,Ge){wt(Pe),wt(ge),wt(Ge);const je=i.length/3,yt=D.generateTopUV(n,i,je-3,je-2,je-1);Ze(yt[0]),Ze(yt[1]),Ze(yt[2])}function be(Pe,ge,Ge,je){wt(Pe),wt(ge),wt(je),wt(ge),wt(Ge),wt(je);const yt=i.length/3,He=D.generateSideWallUV(n,i,yt-6,yt-3,yt-2,yt-1);Ze(He[0]),Ze(He[1]),Ze(He[3]),Ze(He[1]),Ze(He[2]),Ze(He[3])}function wt(Pe){i.push(c[Pe*3+0]),i.push(c[Pe*3+1]),i.push(c[Pe*3+2])}function Ze(Pe){s.push(Pe.x),s.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return Uie(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new N1[i.type]().fromJSON(i)),new kx(n,e.options)}}const Bie={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],l=e[n*3],c=e[n*3+1],d=e[i*3],h=e[i*3+1];return[new St(s,o),new St(l,c),new St(d,h)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],d=e[n*3],h=e[n*3+1],w=e[n*3+2],_=e[i*3],x=e[i*3+1],A=e[i*3+2],L=e[s*3],N=e[s*3+1],C=e[s*3+2];return Math.abs(l-h)<Math.abs(o-d)?[new St(o,1-c),new St(d,1-w),new St(_,1-A),new St(L,1-C)]:[new St(l,1-c),new St(h,1-w),new St(x,1-A),new St(N,1-C)]}};function Uie(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ox extends ff{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ox(e.radius,e.detail)}}class By extends ff{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new By(e.radius,e.detail)}}class Dx extends Jn{constructor(e=.5,t=1,n=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const l=[],c=[],d=[],h=[];let w=e;const _=(t-e)/i,x=new we,A=new St;for(let L=0;L<=i;L++){for(let N=0;N<=n;N++){const C=s+N/n*o;x.x=w*Math.cos(C),x.y=w*Math.sin(C),c.push(x.x,x.y,x.z),d.push(0,0,1),A.x=(x.x/t+1)/2,A.y=(x.y/t+1)/2,h.push(A.x,A.y)}w+=_}for(let L=0;L<i;L++){const N=L*(n+1);for(let C=0;C<n;C++){const D=C+N,k=D,F=D+n+1,Q=D+n+2,G=D+1;l.push(k,F,G),l.push(F,Q,G)}}this.setIndex(l),this.setAttribute("position",new vn(c,3)),this.setAttribute("normal",new vn(d,3)),this.setAttribute("uv",new vn(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Bx extends Jn{constructor(e=new Yh([new St(0,.5),new St(-.5,-.5),new St(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)d(e);else for(let h=0;h<e.length;h++)d(e[h]),this.addGroup(l,c,h),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new vn(i,3)),this.setAttribute("normal",new vn(s,3)),this.setAttribute("uv",new vn(o,2));function d(h){const w=i.length/3,_=h.extractPoints(t);let x=_.shape;const A=_.holes;Nl.isClockWise(x)===!1&&(x=x.reverse());for(let N=0,C=A.length;N<C;N++){const D=A[N];Nl.isClockWise(D)===!0&&(A[N]=D.reverse())}const L=Nl.triangulateShape(x,A);for(let N=0,C=A.length;N<C;N++){const D=A[N];x=x.concat(D)}for(let N=0,C=x.length;N<C;N++){const D=x[N];i.push(D.x,D.y,0),s.push(0,0,1),o.push(D.x,D.y)}for(let N=0,C=L.length;N<C;N++){const D=L[N],k=D[0]+w,F=D[1]+w,Q=D[2]+w;n.push(k,F,Q),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Fie(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}return new Bx(n,e.curveSegments)}}function Fie(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Uy extends Jn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(o+l,Math.PI);let d=0;const h=[],w=new we,_=new we,x=[],A=[],L=[],N=[];for(let C=0;C<=n;C++){const D=[],k=C/n;let F=0;C===0&&o===0?F=.5/t:C===n&&c===Math.PI&&(F=-.5/t);for(let Q=0;Q<=t;Q++){const G=Q/t;w.x=-e*Math.cos(i+G*s)*Math.sin(o+k*l),w.y=e*Math.cos(o+k*l),w.z=e*Math.sin(i+G*s)*Math.sin(o+k*l),A.push(w.x,w.y,w.z),_.copy(w).normalize(),L.push(_.x,_.y,_.z),N.push(G+F,1-k),D.push(d++)}h.push(D)}for(let C=0;C<n;C++)for(let D=0;D<t;D++){const k=h[C][D+1],F=h[C][D],Q=h[C+1][D],G=h[C+1][D+1];(C!==0||o>0)&&x.push(k,F,G),(C!==n-1||c<Math.PI)&&x.push(F,Q,G)}this.setIndex(x),this.setAttribute("position",new vn(A,3)),this.setAttribute("normal",new vn(L,3)),this.setAttribute("uv",new vn(N,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ux extends ff{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ux(e.radius,e.detail)}}class Fx extends Jn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const o=[],l=[],c=[],d=[],h=new we,w=new we,_=new we;for(let x=0;x<=n;x++)for(let A=0;A<=i;A++){const L=A/i*s,N=x/n*Math.PI*2;w.x=(e+t*Math.cos(N))*Math.cos(L),w.y=(e+t*Math.cos(N))*Math.sin(L),w.z=t*Math.sin(N),l.push(w.x,w.y,w.z),h.x=e*Math.cos(L),h.y=e*Math.sin(L),_.subVectors(w,h).normalize(),c.push(_.x,_.y,_.z),d.push(A/i),d.push(x/n)}for(let x=1;x<=n;x++)for(let A=1;A<=i;A++){const L=(i+1)*x+A-1,N=(i+1)*(x-1)+A-1,C=(i+1)*(x-1)+A,D=(i+1)*x+A;o.push(L,N,D),o.push(N,C,D)}this.setIndex(o),this.setAttribute("position",new vn(l,3)),this.setAttribute("normal",new vn(c,3)),this.setAttribute("uv",new vn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zx extends Jn{constructor(e=1,t=.4,n=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:o},n=Math.floor(n),i=Math.floor(i);const l=[],c=[],d=[],h=[],w=new we,_=new we,x=new we,A=new we,L=new we,N=new we,C=new we;for(let k=0;k<=n;++k){const F=k/n*s*Math.PI*2;D(F,s,o,e,x),D(F+.01,s,o,e,A),N.subVectors(A,x),C.addVectors(A,x),L.crossVectors(N,C),C.crossVectors(L,N),L.normalize(),C.normalize();for(let Q=0;Q<=i;++Q){const G=Q/i*Math.PI*2,Y=-t*Math.cos(G),ee=t*Math.sin(G);w.x=x.x+(Y*C.x+ee*L.x),w.y=x.y+(Y*C.y+ee*L.y),w.z=x.z+(Y*C.z+ee*L.z),c.push(w.x,w.y,w.z),_.subVectors(w,x).normalize(),d.push(_.x,_.y,_.z),h.push(k/n),h.push(Q/i)}}for(let k=1;k<=n;k++)for(let F=1;F<=i;F++){const Q=(i+1)*(k-1)+(F-1),G=(i+1)*k+(F-1),Y=(i+1)*k+F,ee=(i+1)*(k-1)+F;l.push(Q,G,ee),l.push(G,Y,ee)}this.setIndex(l),this.setAttribute("position",new vn(c,3)),this.setAttribute("normal",new vn(d,3)),this.setAttribute("uv",new vn(h,2));function D(k,F,Q,G,Y){const ee=Math.cos(k),te=Math.sin(k),U=Q/F*k,V=Math.cos(U);Y.x=G*(2+V)*.5*ee,Y.y=G*(2+V)*te*.5,Y.z=G*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Wx extends Jn{constructor(e=new IR(new we(-1,-1,0),new we(-1,1,0),new we(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new we,c=new we,d=new St;let h=new we;const w=[],_=[],x=[],A=[];L(),this.setIndex(A),this.setAttribute("position",new vn(w,3)),this.setAttribute("normal",new vn(_,3)),this.setAttribute("uv",new vn(x,2));function L(){for(let k=0;k<t;k++)N(k);N(s===!1?t:0),D(),C()}function N(k){h=e.getPointAt(k/t,h);const F=o.normals[k],Q=o.binormals[k];for(let G=0;G<=i;G++){const Y=G/i*Math.PI*2,ee=Math.sin(Y),te=-Math.cos(Y);c.x=te*F.x+ee*Q.x,c.y=te*F.y+ee*Q.y,c.z=te*F.z+ee*Q.z,c.normalize(),_.push(c.x,c.y,c.z),l.x=h.x+n*c.x,l.y=h.y+n*c.y,l.z=h.z+n*c.z,w.push(l.x,l.y,l.z)}}function C(){for(let k=1;k<=t;k++)for(let F=1;F<=i;F++){const Q=(i+1)*(k-1)+(F-1),G=(i+1)*k+(F-1),Y=(i+1)*k+F,ee=(i+1)*(k-1)+F;A.push(Q,G,ee),A.push(G,Y,ee)}}function D(){for(let k=0;k<=t;k++)for(let F=0;F<=i;F++)d.x=k/t,d.y=F/i,x.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Wx(new N1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class _F extends Jn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new we,s=new we;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,h=c.length;d<h;++d){const w=c[d],_=w.start,x=w.count;for(let A=_,L=_+x;A<L;A+=3)for(let N=0;N<3;N++){const C=l.getX(A+N),D=l.getX(A+(N+1)%3);i.fromBufferAttribute(o,C),s.fromBufferAttribute(o,D),fL(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let d=0;d<3;d++){const h=3*l+d,w=3*l+(d+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,w),fL(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new vn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function fL(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var hL=Object.freeze({__proto__:null,BoxGeometry:dd,CapsuleGeometry:Cx,CircleGeometry:Ix,ConeGeometry:Nx,CylinderGeometry:B0,DodecahedronGeometry:Px,EdgesGeometry:gF,ExtrudeGeometry:kx,IcosahedronGeometry:Ox,LatheGeometry:Dy,OctahedronGeometry:By,PlaneGeometry:O0,PolyhedronGeometry:ff,RingGeometry:Dx,ShapeGeometry:Bx,SphereGeometry:Uy,TetrahedronGeometry:Ux,TorusGeometry:Fx,TorusKnotGeometry:zx,TubeGeometry:Wx,WireframeGeometry:_F});class xF extends ks{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ln(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class SF extends Ka{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class PR extends ks{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ln(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ho,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LR extends PR{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new St(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ai(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ln(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ln(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ln(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class MF extends ks{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ln(16777215),this.specular=new ln(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ho,this.combine=Iy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EF extends ks{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ln(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class bF extends ks{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class AF extends ks{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ln(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ln(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ho,this.combine=Iy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TF extends ks{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ln(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RF extends Qs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function zh(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function CF(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function IF(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function MA(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let c=0;c!==e;++c)i[o++]=r[l+c]}return i}function kR(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}function zie(r,e,t,n,i=30){const s=r.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],h=d.getValueSize(),w=[],_=[];for(let x=0;x<d.times.length;++x){const A=d.times[x]*i;if(!(A<t||A>=n)){w.push(d.times[x]);for(let L=0;L<h;++L)_.push(d.values[x*h+L])}}w.length!==0&&(d.times=zh(w,d.times.constructor),d.values=zh(_,d.values.constructor),o.push(d))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function Wie(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let o=0;o<i;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const d=r.tracks.find(function(C){return C.name===l.name&&C.ValueTypeName===c});if(d===void 0)continue;let h=0;const w=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=w/3);let _=0;const x=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const A=l.times.length-1;let L;if(s<=l.times[0]){const C=h,D=w-h;L=l.values.slice(C,D)}else if(s>=l.times[A]){const C=A*w+h,D=C+w-h;L=l.values.slice(C,D)}else{const C=l.createInterpolant(),D=h,k=w-h;C.evaluate(s),L=C.resultBuffer.slice(D,k)}c==="quaternion"&&new Ps().fromArray(L).normalize().conjugate().toArray(L);const N=d.times.length;for(let C=0;C<N;++C){const D=C*x+_;if(c==="quaternion")Ps.multiplyQuaternionsFlat(d.values,D,L,0,d.values,D);else{const k=x-_*2;for(let F=0;F<k;++F)d.values[D+F]-=L[F]}}}return r.blendMode=hR,r}const Vie={convertArray:zh,isTypedArray:CF,getKeyframeOrder:IF,sortedArray:MA,flattenJSON:kR,subclip:zie,makeClipAdditive:Wie};class Fy{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class NF extends Fy{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bh,endingEnd:Bh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,l=i[s],c=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case Uh:s=e,l=2*t-n;break;case Jg:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Uh:o=e,c=2*n-t;break;case Jg:o=1,c=n+i[1]-i[0];break;default:o=e-1,c=t}const d=(n-t)*.5,h=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(c-n),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,h=this._offsetPrev,w=this._offsetNext,_=this._weightPrev,x=this._weightNext,A=(n-t)/(i-t),L=A*A,N=L*A,C=-_*N+2*_*L-_*A,D=(1+_)*N+(-1.5-2*_)*L+(-.5+_)*A+1,k=(-1-x)*N+(1.5+x)*L+.5*A,F=x*N-x*L;for(let Q=0;Q!==l;++Q)s[Q]=C*o[h+Q]+D*o[d+Q]+k*o[c+Q]+F*o[w+Q];return s}}class OR extends Fy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,h=(n-t)/(i-t),w=1-h;for(let _=0;_!==l;++_)s[_]=o[d+_]*w+o[c+_]*h;return s}}class PF extends Fy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class $a{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zh(t,this.TimeBufferType),this.values=zh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:zh(e.times,Array),values:zh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new PF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new OR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new NF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Qg:t=this.InterpolantFactoryMethodDiscrete;break;case R1:t=this.InterpolantFactoryMethodLinear;break;case g_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qg;case this.InterpolantFactoryMethodLinear:return R1;case this.InterpolantFactoryMethodSmooth:return g_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(i!==void 0&&CF(i))for(let l=0,c=i.length;l!==c;++l){const d=i[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===g_,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const d=e[l],h=e[l+1];if(d!==h&&(l!==1||d!==e[0]))if(i)c=!0;else{const w=l*n,_=w-n,x=w+n;for(let A=0;A!==n;++A){const L=t[w+A];if(L!==t[_+A]||L!==t[x+A]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const w=l*n,_=o*n;for(let x=0;x!==n;++x)t[_+x]=t[w+x]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,c=o*n,d=0;d!==n;++d)t[c+d]=t[l+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}$a.prototype.TimeBufferType=Float32Array;$a.prototype.ValueBufferType=Float32Array;$a.prototype.DefaultInterpolation=R1;class pd extends $a{constructor(e,t,n){super(e,t,n)}}pd.prototype.ValueTypeName="bool";pd.prototype.ValueBufferType=Array;pd.prototype.DefaultInterpolation=Qg;pd.prototype.InterpolantFactoryMethodLinear=void 0;pd.prototype.InterpolantFactoryMethodSmooth=void 0;class DR extends $a{}DR.prototype.ValueTypeName="color";class cy extends $a{}cy.prototype.ValueTypeName="number";class LF extends Fy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-t)/(i-t);let d=e*l;for(let h=d+l;d!==h;d+=4)Ps.slerpFlat(s,0,o,d-l,o,d,c);return s}}class zy extends $a{InterpolantFactoryMethodLinear(e){return new LF(this.times,this.values,this.getValueSize(),e)}}zy.prototype.ValueTypeName="quaternion";zy.prototype.InterpolantFactoryMethodSmooth=void 0;class md extends $a{constructor(e,t,n){super(e,t,n)}}md.prototype.ValueTypeName="string";md.prototype.ValueBufferType=Array;md.prototype.DefaultInterpolation=Qg;md.prototype.InterpolantFactoryMethodLinear=void 0;md.prototype.InterpolantFactoryMethodSmooth=void 0;class fy extends $a{}fy.prototype.ValueTypeName="vector";class hy{constructor(e="",t=-1,n=[],i=wx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Wo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(Gie(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push($a.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],d=[];c.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const h=IF(c);c=MA(c,1,h),d=MA(d,1,h),!i&&c[0]===0&&(c.push(s),d.push(d[0])),o.push(new cy(".morphTargetInfluences["+t[l].name+"]",c,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const d=e[l],h=d.name.match(s);if(h&&h.length>1){const w=h[1];let _=i[w];_||(i[w]=_=[]),_.push(d)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(w,_,x,A,L){if(x.length!==0){const N=[],C=[];kR(x,N,C,A),N.length!==0&&L.push(new w(_,N,C))}},i=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const d=e.hierarchy||[];for(let w=0;w<d.length;w++){const _=d[w].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let A;for(A=0;A<_.length;A++)if(_[A].morphTargets)for(let L=0;L<_[A].morphTargets.length;L++)x[_[A].morphTargets[L]]=-1;for(const L in x){const N=[],C=[];for(let D=0;D!==_[A].morphTargets.length;++D){const k=_[A];N.push(k.time),C.push(k.morphTarget===L?1:0)}i.push(new cy(".morphTargetInfluence["+L+"]",N,C))}c=x.length*o}else{const x=".bones["+t[w].name+"]";n(fy,x+".position",_,"pos",i),n(zy,x+".quaternion",_,"rot",i),n(fy,x+".scale",_,"scl",i)}}return i.length===0?null:new this(s,c,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Hie(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cy;case"vector":case"vector2":case"vector3":case"vector4":return fy;case"color":return DR;case"quaternion":return zy;case"bool":case"boolean":return pd;case"string":return md}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Gie(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Hie(r.type);if(r.times===void 0){const t=[],n=[];kR(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Uu={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class BR{constructor(e,t,n){const i=this;let s=!1,o=0,l=0,c;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){l++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,l),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,l),o===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,w){return d.push(h,w),this},this.removeHandler=function(h){const w=d.indexOf(h);return w!==-1&&d.splice(w,2),this},this.getHandler=function(h){for(let w=0,_=d.length;w<_;w+=2){const x=d[w],A=d[w+1];if(x.global&&(x.lastIndex=0),x.test(h))return A}return null}}}const kF=new BR;class xo{constructor(e){this.manager=e!==void 0?e:kF,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}xo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mu={};class jie extends Error{constructor(e,t){super(e),this.response=t}}class Yu extends xo{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Uu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Mu[e]!==void 0){Mu[e].push({onLoad:t,onProgress:n,onError:i});return}Mu[e]=[],Mu[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const h=Mu[e],w=d.body.getReader(),_=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),x=_?parseInt(_):0,A=x!==0;let L=0;const N=new ReadableStream({start(C){D();function D(){w.read().then(({done:k,value:F})=>{if(k)C.close();else{L+=F.byteLength;const Q=new ProgressEvent("progress",{lengthComputable:A,loaded:L,total:x});for(let G=0,Y=h.length;G<Y;G++){const ee=h[G];ee.onProgress&&ee.onProgress(Q)}C.enqueue(F),D()}},k=>{C.error(k)})}}});return new Response(N)}else throw new jie(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(c){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(h=>new DOMParser().parseFromString(h,l));case"json":return d.json();default:if(l===void 0)return d.text();{const w=/charset="?([^;"\s]*)"?/i.exec(l),_=w&&w[1]?w[1].toLowerCase():void 0,x=new TextDecoder(_);return d.arrayBuffer().then(A=>x.decode(A))}}}).then(d=>{Uu.add(e,d);const h=Mu[e];delete Mu[e];for(let w=0,_=h.length;w<_;w++){const x=h[w];x.onLoad&&x.onLoad(d)}}).catch(d=>{const h=Mu[e];if(h===void 0)throw this.manager.itemError(e),d;delete Mu[e];for(let w=0,_=h.length;w<_;w++){const x=h[w];x.onError&&x.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class qie extends xo{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Yu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=hy.parse(e[n]);t.push(i)}return t}}class Kie extends xo{constructor(e){super(e)}load(e,t,n,i){const s=this,o=[],l=new Tx,c=new Yu(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let d=0;function h(w){c.load(e[w],function(_){const x=s.parse(_,!0);o[w]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},d+=1,d===6&&(x.mipmapCount===1&&(l.minFilter=Ci),l.image=o,l.format=x.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let w=0,_=e.length;w<_;++w)h(w);else c.load(e,function(w){const _=s.parse(w,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let A=0;A<x;A++){o[A]={mipmaps:[]};for(let L=0;L<_.mipmapCount;L++)o[A].mipmaps.push(_.mipmaps[A*_.mipmapCount+L]),o[A].format=_.format,o[A].width=_.width,o[A].height=_.height}l.image=o}else l.image.width=_.width,l.image.height=_.height,l.mipmaps=_.mipmaps;_.mipmapCount===1&&(l.minFilter=Ci),l.format=_.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}class dy extends xo{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Uu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=sy("img");function c(){h(),Uu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(w){h(),i&&i(w),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class Yie extends xo{constructor(e){super(e)}load(e,t,n,i){const s=new ky;s.colorSpace=oa;const o=new dy(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(d){o.load(e[d],function(h){s.images[d]=h,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let d=0;d<e.length;++d)c(d);return s}}class Xie extends xo{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Il,l=new Yu(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let d;try{d=s.parse(c)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:aa,o.wrapT=d.wrapT!==void 0?d.wrapT:aa,o.magFilter=d.magFilter!==void 0?d.magFilter:Ci,o.minFilter=d.minFilter!==void 0?d.minFilter:Ci,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=El),d.mipmapCount===1&&(o.minFilter=Ci),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,i),o}}class $ie extends xo{constructor(e){super(e)}load(e,t,n,i){const s=new li,o=new dy(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class hf extends dr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ln(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class OF extends hf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ln(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const GE=new Ln,dL=new we,pL=new we;class UR{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new St(512,512),this.map=null,this.mapPass=null,this.matrix=new Ln,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Oy,this._frameExtents=new St(1,1),this._viewportCount=1,this._viewports=[new hr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;dL.setFromMatrixPosition(e.matrixWorld),t.position.copy(dL),pL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pL),t.updateMatrixWorld(),GE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(GE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Zie extends UR{constructor(){super(new mi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=x0*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class DF extends hf{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.target=new dr,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Zie}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const mL=new Ln,ig=new we,jE=new we;class Qie extends UR{constructor(){super(new mi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new St(4,2),this._viewportCount=6,this._viewports=[new hr(2,1,1,1),new hr(0,1,1,1),new hr(3,1,1,1),new hr(1,1,1,1),new hr(3,0,1,1),new hr(1,0,1,1)],this._cubeDirections=[new we(1,0,0),new we(-1,0,0),new we(0,0,1),new we(0,0,-1),new we(0,1,0),new we(0,-1,0)],this._cubeUps=[new we(0,1,0),new we(0,1,0),new we(0,1,0),new we(0,1,0),new we(0,0,1),new we(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),ig.setFromMatrixPosition(e.matrixWorld),n.position.copy(ig),jE.copy(n.position),jE.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(jE),n.updateMatrixWorld(),i.makeTranslation(-ig.x,-ig.y,-ig.z),mL.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mL)}}class BF extends hf{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Qie}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Jie extends UR{constructor(){super(new Qc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class UF extends hf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.target=new dr,this.shadow=new Jie}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class FF extends hf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class zF extends hf{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class WF{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new we)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class VF extends hf{constructor(e=new WF,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Vx extends xo{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,o=new Yu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ln().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=n(o.value);break;case"c":i.uniforms[s].value=new ln().setHex(o.value);break;case"v2":i.uniforms[s].value=new St().fromArray(o.value);break;case"v3":i.uniforms[s].value=new we().fromArray(o.value);break;case"v4":i.uniforms[s].value=new hr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new jn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ln().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new St().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new St().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Vx.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:xF,SpriteMaterial:MR,RawShaderMaterial:SF,ShaderMaterial:Ka,PointsMaterial:bR,MeshPhysicalMaterial:LR,MeshStandardMaterial:PR,MeshPhongMaterial:MF,MeshToonMaterial:EF,MeshNormalMaterial:bF,MeshLambertMaterial:AF,MeshDepthMaterial:_R,MeshDistanceMaterial:xR,MeshBasicMaterial:cf,MeshMatcapMaterial:TF,LineDashedMaterial:RF,LineBasicMaterial:Qs,Material:ks};return new t[e]}}class EA{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HF extends Jn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class GF extends xo{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Yu(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(x,A){if(t[A]!==void 0)return t[A];const N=x.interleavedBuffers[A],C=s(x,N.buffer),D=e0(N.type,C),k=new bx(D,N.stride);return k.uuid=N.uuid,t[A]=k,k}function s(x,A){if(n[A]!==void 0)return n[A];const N=x.arrayBuffers[A],C=new Uint32Array(N).buffer;return n[A]=C,C}const o=e.isInstancedBufferGeometry?new HF:new Jn,l=e.data.index;if(l!==void 0){const x=e0(l.type,l.array);o.setIndex(new Ir(x,1))}const c=e.data.attributes;for(const x in c){const A=c[x];let L;if(A.isInterleavedBufferAttribute){const N=i(e.data,A.data);L=new nd(N,A.itemSize,A.offset,A.normalized)}else{const N=e0(A.type,A.array),C=A.isInstancedBufferAttribute?M0:Ir;L=new C(N,A.itemSize,A.normalized)}A.name!==void 0&&(L.name=A.name),A.usage!==void 0&&L.setUsage(A.usage),o.setAttribute(x,L)}const d=e.data.morphAttributes;if(d)for(const x in d){const A=d[x],L=[];for(let N=0,C=A.length;N<C;N++){const D=A[N];let k;if(D.isInterleavedBufferAttribute){const F=i(e.data,D.data);k=new nd(F,D.itemSize,D.offset,D.normalized)}else{const F=e0(D.type,D.array);k=new Ir(F,D.itemSize,D.normalized)}D.name!==void 0&&(k.name=D.name),L.push(k)}o.morphAttributes[x]=L}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const w=e.data.groups||e.data.drawcalls||e.data.offsets;if(w!==void 0)for(let x=0,A=w.length;x!==A;++x){const L=w[x];o.addGroup(L.start,L.count,L.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const x=new we;_.center!==void 0&&x.fromArray(_.center),o.boundingSphere=new Ls(x,_.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class ese extends xo{constructor(e){super(e)}load(e,t,n,i){const s=this,o=this.path===""?EA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new Yu(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let d=null;try{d=JSON.parse(c)}catch(w){i!==void 0&&i(w),console.error("THREE:ObjectLoader: Can't parse "+e+".",w.message);return}const h=d.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?EA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Yu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,c,l,n),h=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,h),this.bindLightTargets(d),t!==void 0){let w=!1;for(const _ in o)if(o[_].data instanceof HTMLImageElement){w=!0;break}w===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,l,o,t),d=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,d),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new Yh().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Ax().fromJSON(e[s],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new GF;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(c);break;default:c.type in hL?l=hL[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new Vx;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),i[c.uuid]=n[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=hy.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function o(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const d=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(h)}else return c.data?{data:e0(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new BR(t);s=new dy(c),s.setCrossOrigin(this.crossOrigin);for(let d=0,h=e.length;d<h;d++){const w=e[d],_=w.url;if(Array.isArray(_)){const x=[];for(let A=0,L=_.length;A<L;A++){const N=_[A],C=l(N);C!==null&&(C instanceof HTMLImageElement?x.push(C):x.push(new Il(C.data,C.width,C.height)))}i[w.uuid]=new Fh(x)}else{const x=l(w.url);i[w.uuid]=new Fh(x)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(c)}else return o.data?{data:e0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new dy(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],d=c.url;if(Array.isArray(d)){const h=[];for(let w=0,_=d.length;w<_;w++){const x=d[w],A=await s(x);A!==null&&(A instanceof HTMLImageElement?h.push(A):h.push(new Il(A.data,A.width,A.height)))}n[c.uuid]=new Fh(h)}else{const h=await s(c.url);n[c.uuid]=new Fh(h)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],d=c.data;let h;Array.isArray(d)?(h=new ky,d.length===6&&(h.needsUpdate=!0)):(d&&d.data?h=new Il:h=new li,d&&(h.needsUpdate=!0)),h.source=c,h.uuid=l.uuid,l.name!==void 0&&(h.name=l.name),l.mapping!==void 0&&(h.mapping=n(l.mapping,tse)),l.channel!==void 0&&(h.channel=l.channel),l.offset!==void 0&&h.offset.fromArray(l.offset),l.repeat!==void 0&&h.repeat.fromArray(l.repeat),l.center!==void 0&&h.center.fromArray(l.center),l.rotation!==void 0&&(h.rotation=l.rotation),l.wrap!==void 0&&(h.wrapS=n(l.wrap[0],gL),h.wrapT=n(l.wrap[1],gL)),l.format!==void 0&&(h.format=l.format),l.internalFormat!==void 0&&(h.internalFormat=l.internalFormat),l.type!==void 0&&(h.type=l.type),l.colorSpace!==void 0&&(h.colorSpace=l.colorSpace),l.minFilter!==void 0&&(h.minFilter=n(l.minFilter,yL)),l.magFilter!==void 0&&(h.magFilter=n(l.magFilter,yL)),l.anisotropy!==void 0&&(h.anisotropy=l.anisotropy),l.flipY!==void 0&&(h.flipY=l.flipY),l.generateMipmaps!==void 0&&(h.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(h.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(h.compareFunction=l.compareFunction),l.userData!==void 0&&(h.userData=l.userData),i[l.uuid]=h}return i}parseObject(e,t,n,i,s){let o;function l(_){return t[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),t[_]}function c(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let A=0,L=_.length;A<L;A++){const N=_[A];n[N]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",N),x.push(n[N])}return x}return n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),n[_]}}function d(_){return i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),i[_]}let h,w;switch(e.type){case"Scene":o=new SR,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ln(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Ex(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Mx(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new mi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Qc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new FF(e.color,e.intensity);break;case"DirectionalLight":o=new UF(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new BF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new zF(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new DF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new OF(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new VF().fromJSON(e);break;case"SkinnedMesh":h=l(e.geometry),w=c(e.material),o=new oF(h,w),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=l(e.geometry),w=c(e.material),o=new Ni(h,w);break;case"InstancedMesh":h=l(e.geometry),w=c(e.material);const _=e.count,x=e.instanceMatrix,A=e.instanceColor;o=new aF(h,w,_),o.instanceMatrix=new M0(new Float32Array(x.array),16),A!==void 0&&(o.instanceColor=new M0(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":h=l(e.geometry),w=c(e.material),o=new lF(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,w),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(L=>{const N=new $s;N.min.fromArray(L.boxMin),N.max.fromArray(L.boxMax);const C=new Ls;return C.radius=L.sphereRadius,C.center.fromArray(L.sphereCenter),{boxInitialized:L.boxInitialized,box:N,sphereInitialized:L.sphereInitialized,sphere:C}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=d(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":o=new sF;break;case"Line":o=new of(l(e.geometry),c(e.material));break;case"LineLoop":o=new uF(l(e.geometry),c(e.material));break;case"LineSegments":o=new Ol(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new cF(l(e.geometry),c(e.material));break;case"Sprite":o=new iF(c(e.material));break;case"Group":o=new n0;break;case"Bone":o=new ER;break;default:o=new dr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let x=0;x<_.length;x++)o.add(this.parseObject(_[x],t,n,i,s))}if(e.animations!==void 0){const _=e.animations;for(let x=0;x<_.length;x++){const A=_[x];o.animations.push(s[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const _=e.levels;for(let x=0;x<_.length;x++){const A=_[x],L=o.getObjectByProperty("uuid",A.object);L!==void 0&&o.addLevel(L,A.distance,A.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new dr}})}}const tse={UVMapping:hx,CubeReflectionMapping:qu,CubeRefractionMapping:sf,EquirectangularReflectionMapping:Yg,EquirectangularRefractionMapping:Xg,CubeUVReflectionMapping:L0},gL={RepeatWrapping:$g,ClampToEdgeWrapping:aa,MirroredRepeatWrapping:Zg},yL={NearestFilter:Zi,NearestMipmapNearestFilter:nR,NearestMipmapLinearFilter:Jp,LinearFilter:Ci,LinearMipmapNearestFilter:Mg,LinearMipmapLinearFilter:El};class nse extends xo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Uu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{t&&t(d),s.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Uu.add(e,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){i&&i(d),Uu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Uu.add(e,c),s.manager.itemStart(e)}}let Vw;class FR{static getContext(){return Vw===void 0&&(Vw=new(window.AudioContext||window.webkitAudioContext)),Vw}static setContext(e){Vw=e}}class rse extends xo{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Yu(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const d=c.slice(0);FR.getContext().decodeAudioData(d,function(w){t(w)}).catch(l)}catch(d){l(d)}},n,i);function l(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const vL=new Ln,wL=new Ln,ch=new Ln;class ise{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ch.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(qh*t.fov*.5)/t.zoom;let l,c;wL.elements[12]=-i,vL.elements[12]=i,l=-o*t.aspect+s,c=o*t.aspect+s,ch.elements[0]=2*t.near/(c-l),ch.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(ch),l=-o*t.aspect-s,c=o*t.aspect-s,ch.elements[0]=2*t.near/(c-l),ch.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(ch)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(wL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(vL)}}class zR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_L(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_L();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _L(){return performance.now()}const fh=new we,xL=new Ps,sse=new we,hh=new we;class ose extends dr{constructor(){super(),this.type="AudioListener",this.context=FR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(fh,xL,sse),hh.set(0,0,-1).applyQuaternion(xL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(fh.x,i),t.positionY.linearRampToValueAtTime(fh.y,i),t.positionZ.linearRampToValueAtTime(fh.z,i),t.forwardX.linearRampToValueAtTime(hh.x,i),t.forwardY.linearRampToValueAtTime(hh.y,i),t.forwardZ.linearRampToValueAtTime(hh.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(fh.x,fh.y,fh.z),t.setOrientation(hh.x,hh.y,hh.z,n.x,n.y,n.z)}}class jF extends dr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const dh=new we,SL=new Ps,ase=new we,ph=new we;class lse extends jF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(dh,SL,ase),ph.set(0,0,1).applyQuaternion(SL);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(dh.x,n),t.positionY.linearRampToValueAtTime(dh.y,n),t.positionZ.linearRampToValueAtTime(dh.z,n),t.orientationX.linearRampToValueAtTime(ph.x,n),t.orientationY.linearRampToValueAtTime(ph.y,n),t.orientationZ.linearRampToValueAtTime(ph.z,n)}else t.setPosition(dh.x,dh.y,dh.z),t.setOrientation(ph.x,ph.y,ph.z)}}class use{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class qF{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,d=t+t;c!==d;++c)if(n[c]!==n[c+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){Ps.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;Ps.multiplyQuaternionsFlat(e,o,e,t,e,n),Ps.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[n+l]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*i}}}const WR="\\[\\]\\.:\\/",cse=new RegExp("["+WR+"]","g"),VR="[^"+WR+"]",fse="[^"+WR.replace("\\.","")+"]",hse=/((?:WC+[\/:])*)/.source.replace("WC",VR),dse=/(WCOD+)?/.source.replace("WCOD",fse),pse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VR),mse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VR),gse=new RegExp("^"+hse+dse+pse+mse+"$"),yse=["material","materials","bones","map"];class vse{constructor(e,t,n){const i=n||fr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class fr{constructor(e,t,n){this.path=t,this.parsedPath=n||fr.parseTrackName(t),this.node=fr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new fr.Composite(e,t,n):new fr(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cse,"")}static parseTrackName(e){const t=gse.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);yse.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=fr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===d){d=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[i];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fr.Composite=vse;fr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fr.prototype.GetterByBindingType=[fr.prototype._getValue_direct,fr.prototype._getValue_array,fr.prototype._getValue_arrayElement,fr.prototype._getValue_toArray];fr.prototype.SetterByBindingTypeAndVersioning=[[fr.prototype._setValue_direct,fr.prototype._setValue_direct_setNeedsUpdate,fr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_array,fr.prototype._setValue_array_setNeedsUpdate,fr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_arrayElement,fr.prototype._setValue_arrayElement_setNeedsUpdate,fr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fr.prototype._setValue_fromArray,fr.prototype._setValue_fromArray_setNeedsUpdate,fr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wse{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Wo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,d=this.nCachedObjects_;for(let h=0,w=arguments.length;h!==w;++h){const _=arguments[h],x=_.uuid;let A=t[x];if(A===void 0){A=c++,t[x]=A,e.push(_);for(let L=0,N=o;L!==N;++L)s[L].push(new fr(_,n[L],i[L]))}else if(A<d){l=e[A];const L=--d,N=e[L];t[N.uuid]=A,e[A]=N,t[x]=L,e[L]=_;for(let C=0,D=o;C!==D;++C){const k=s[C],F=k[L];let Q=k[A];k[A]=F,Q===void 0&&(Q=new fr(_,n[C],i[C])),k[L]=Q}}else e[A]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],d=c.uuid,h=t[d];if(h!==void 0&&h>=s){const w=s++,_=e[w];t[_.uuid]=h,e[h]=_,t[d]=w,e[w]=c;for(let x=0,A=i;x!==A;++x){const L=n[x],N=L[w],C=L[h];L[h]=N,L[w]=C}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],h=d.uuid,w=t[h];if(w!==void 0)if(delete t[h],w<s){const _=--s,x=e[_],A=--o,L=e[A];t[x.uuid]=w,e[w]=x,t[L.uuid]=_,e[_]=L,e.pop();for(let N=0,C=i;N!==C;++N){const D=n[N],k=D[_],F=D[A];D[w]=k,D[_]=F,D.pop()}}else{const _=--o,x=e[_];_>0&&(t[x.uuid]=w),e[w]=x,e.pop();for(let A=0,L=i;A!==L;++A){const N=n[A];N[w]=N[_],N.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,l=this._parsedPaths,c=this._objects,d=c.length,h=this.nCachedObjects_,w=new Array(d);i=s.length,n[e]=i,o.push(e),l.push(t),s.push(w);for(let _=h,x=c.length;_!==x;++_){const A=c[_];w[_]=new fr(A,e,t)}return w}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],d=e[l];t[d]=n,o[n]=c,o.pop(),s[n]=s[l],s.pop(),i[n]=i[l],i.pop()}}}class KF{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:Bh,endingEnd:Bh};for(let d=0;d!==o;++d){const h=s[d].createInterpolant(null);l[d]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=T6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,o=s/i,l=i/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=s,c[1]=s+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case hR:for(let h=0,w=c.length;h!==w;++h)c[h].evaluate(o),d[h].accumulateAdditive(l);break;case wx:default:for(let h=0,w=c.length;h!==w;++h)c[h].evaluate(o),d[h].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===R6;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===A6){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Uh,i.endingEnd=Uh):(e?i.endingStart=this.zeroSlopeAtStart?Uh:Bh:i.endingStart=Jg,t?i.endingEnd=this.zeroSlopeAtEnd?Uh:Bh:i.endingEnd=Jg)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=n,this}}const _se=new Float32Array(1);class xse extends kl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,l=e._interpolants,c=n.uuid,d=this._bindingsByRootAndName;let h=d[c];h===void 0&&(h={},d[c]=h);for(let w=0;w!==s;++w){const _=i[w],x=_.name;let A=h[x];if(A!==void 0)++A.referenceCount,o[w]=A;else{if(A=o[w],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,c,x));continue}const L=t&&t._propertyBindings[w].binding.parsedPath;A=new qF(fr.create(n,x,L),_.ValueTypeName,_.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,c,x),o[w]=A}l[w].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,d=c[c.length-1],h=e._byClipCacheIndex;d._byClipCacheIndex=h,c[h]=d,c.pop(),e._byClipCacheIndex=null;const w=l.actionByRoot,_=(e._localRoot||this._root).uuid;delete w[_],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[i],c=t[t.length-1],d=e._cacheIndex;c._cacheIndex=d,t[d]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new OR(new Float32Array(2),new Float32Array(2),1,_se),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?hy.findByName(i,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=wx),c!==void 0){const w=c.actionByRoot[s];if(w!==void 0&&w.blendMode===n)return w;d=c.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const h=new KF(this,o,t,n);return this._bindAction(h,d),this._addInactiveAction(h,l,s),h}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?hy.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(i,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)l[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const d=o[l];this._deactivateAction(d);const h=d._cacheIndex,w=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,w._cacheIndex=h,t[h]=w,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class HR{constructor(e){this.value=e}clone(){return new HR(this.value.clone===void 0?this.value:this.value.clone())}}let Sse=0;class Mse extends kl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Sse++}),this.name="",this.usage=ry,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Ese extends bx{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class bse{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ML=new Ln;class YF{constructor(e,t,n=0,i=1/0){this.ray=new hd(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Kh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ML.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ML),this}intersectObject(e,t=!0,n=[]){return bA(e,this,n,t),n.sort(EL),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)bA(e[i],this,n,t);return n.sort(EL),n}}function EL(r,e){return r.distance-e.distance}function bA(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let o=0,l=s.length;o<l;o++)bA(s[o],e,t,!0)}}class AA{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(ai(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Ase{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class GR{constructor(e,t,n,i){GR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const bL=new St;class Tse{constructor(e=new St(1/0,1/0),t=new St(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=bL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const AL=new we,Hw=new we;class Rse{constructor(e=new we,t=new we){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){AL.subVectors(e,this.start),Hw.subVectors(this.end,this.start);const n=Hw.dot(Hw);let s=Hw.dot(AL)/n;return t&&(s=ai(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const TL=new we;class Cse extends dr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Jn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const d=o/c*Math.PI*2,h=l/c*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new vn(i,3));const s=new Qs({fog:!1,toneMapped:!1});this.cone=new Ol(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),TL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(TL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const zc=new we,Gw=new Ln,qE=new Ln;class Ise extends Ol{constructor(e){const t=XF(e),n=new Jn,i=[],s=[],o=new ln(0,0,1),l=new ln(0,1,0);for(let d=0;d<t.length;d++){const h=t[d];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new vn(i,3)),n.setAttribute("color",new vn(s,3));const c=new Qs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");qE.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Gw.multiplyMatrices(qE,l.matrixWorld),zc.setFromMatrixPosition(Gw),i.setXYZ(o,zc.x,zc.y,zc.z),Gw.multiplyMatrices(qE,l.parent.matrixWorld),zc.setFromMatrixPosition(Gw),i.setXYZ(o+1,zc.x,zc.y,zc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function XF(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,XF(r.children[t]));return e}class Nse extends Ni{constructor(e,t,n){const i=new Uy(t,4,2),s=new cf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Pse=new we,RL=new ln,CL=new ln;class Lse extends dr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new By(t);i.rotateY(Math.PI*.5),this.material=new cf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Ir(o,3)),this.add(new Ni(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");RL.copy(this.light.color),CL.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?RL:CL;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Pse.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kse extends Ol{constructor(e=10,t=10,n=4473924,i=8947848){n=new ln(n),i=new ln(i);const s=t/2,o=e/t,l=e/2,c=[],d=[];for(let _=0,x=0,A=-l;_<=t;_++,A+=o){c.push(-l,0,A,l,0,A),c.push(A,0,-l,A,0,l);const L=_===s?n:i;L.toArray(d,x),x+=3,L.toArray(d,x),x+=3,L.toArray(d,x),x+=3,L.toArray(d,x),x+=3}const h=new Jn;h.setAttribute("position",new vn(c,3)),h.setAttribute("color",new vn(d,3));const w=new Qs({vertexColors:!0,toneMapped:!1});super(h,w),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ose extends Ol{constructor(e=10,t=16,n=8,i=64,s=4473924,o=8947848){s=new ln(s),o=new ln(o);const l=[],c=[];if(t>1)for(let w=0;w<t;w++){const _=w/t*(Math.PI*2),x=Math.sin(_)*e,A=Math.cos(_)*e;l.push(0,0,0),l.push(x,0,A);const L=w&1?s:o;c.push(L.r,L.g,L.b),c.push(L.r,L.g,L.b)}for(let w=0;w<n;w++){const _=w&1?s:o,x=e-e/n*w;for(let A=0;A<i;A++){let L=A/i*(Math.PI*2),N=Math.sin(L)*x,C=Math.cos(L)*x;l.push(N,0,C),c.push(_.r,_.g,_.b),L=(A+1)/i*(Math.PI*2),N=Math.sin(L)*x,C=Math.cos(L)*x,l.push(N,0,C),c.push(_.r,_.g,_.b)}}const d=new Jn;d.setAttribute("position",new vn(l,3)),d.setAttribute("color",new vn(c,3));const h=new Qs({vertexColors:!0,toneMapped:!1});super(d,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const IL=new we,jw=new we,NL=new we;class Dse extends dr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Jn;i.setAttribute("position",new vn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Qs({fog:!1,toneMapped:!1});this.lightPlane=new of(i,s),this.add(this.lightPlane),i=new Jn,i.setAttribute("position",new vn([0,0,0,0,0,1],3)),this.targetLine=new of(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),IL.setFromMatrixPosition(this.light.matrixWorld),jw.setFromMatrixPosition(this.light.target.matrixWorld),NL.subVectors(jw,IL),this.lightPlane.lookAt(jw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jw),this.targetLine.scale.z=NL.length()}}const qw=new we,ri=new Ly;class Bse extends Ol{constructor(e){const t=new Jn,n=new Qs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(A,L){c(A),c(L)}function c(A){i.push(0,0,0),s.push(0,0,0),o[A]===void 0&&(o[A]=[]),o[A].push(i.length/3-1)}t.setAttribute("position",new vn(i,3)),t.setAttribute("color",new vn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new ln(16755200),h=new ln(16711680),w=new ln(43775),_=new ln(16777215),x=new ln(3355443);this.setColors(d,h,w,_,x)}setColors(e,t,n,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;ri.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),hi("c",t,e,ri,0,0,-1),hi("t",t,e,ri,0,0,1),hi("n1",t,e,ri,-n,-i,-1),hi("n2",t,e,ri,n,-i,-1),hi("n3",t,e,ri,-n,i,-1),hi("n4",t,e,ri,n,i,-1),hi("f1",t,e,ri,-n,-i,1),hi("f2",t,e,ri,n,-i,1),hi("f3",t,e,ri,-n,i,1),hi("f4",t,e,ri,n,i,1),hi("u1",t,e,ri,n*.7,i*1.1,-1),hi("u2",t,e,ri,-n*.7,i*1.1,-1),hi("u3",t,e,ri,0,i*2,-1),hi("cf1",t,e,ri,-n,0,1),hi("cf2",t,e,ri,n,0,1),hi("cf3",t,e,ri,0,-i,1),hi("cf4",t,e,ri,0,i,1),hi("cn1",t,e,ri,-n,0,-1),hi("cn2",t,e,ri,n,0,-1),hi("cn3",t,e,ri,0,-i,-1),hi("cn4",t,e,ri,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function hi(r,e,t,n,i,s,o){qw.set(i,s,o).unproject(n);const l=e[r];if(l!==void 0){const c=t.getAttribute("position");for(let d=0,h=l.length;d<h;d++)c.setXYZ(l[d],qw.x,qw.y,qw.z)}}const Kw=new $s;class Use extends Ol{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new Jn;s.setIndex(new Ir(n,1)),s.setAttribute("position",new Ir(i,3)),super(s,new Qs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Kw.setFromObject(this.object),Kw.isEmpty())return;const t=Kw.min,n=Kw.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fse extends Ol{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jn;s.setIndex(new Ir(n,1)),s.setAttribute("position",new vn(i,3)),super(s,new Qs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class zse extends of{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Jn;o.setAttribute("position",new vn(s,3)),o.computeBoundingSphere(),super(o,new Qs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Jn;c.setAttribute("position",new vn(l,3)),c.computeBoundingSphere(),this.add(new Ni(c,new cf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const PL=new we;let Yw,KE;class Wse extends dr{constructor(e=new we(0,0,1),t=new we(0,0,0),n=1,i=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Yw===void 0&&(Yw=new Jn,Yw.setAttribute("position",new vn([0,0,0,0,1,0],3)),KE=new B0(0,.5,1,5,1),KE.translate(0,-.5,0)),this.position.copy(t),this.line=new of(Yw,new Qs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ni(KE,new cf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{PL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(PL,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Vse extends Ol{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jn;i.setAttribute("position",new vn(t,3)),i.setAttribute("color",new vn(n,3));const s=new Qs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new ln,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hse{constructor(){this.type="ShapePath",this.color=new ln,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new oy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,o){return this.currentPath.bezierCurveTo(e,t,n,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(C){const D=[];for(let k=0,F=C.length;k<F;k++){const Q=C[k],G=new Yh;G.curves=Q.curves,D.push(G)}return D}function n(C,D){const k=D.length;let F=!1;for(let Q=k-1,G=0;G<k;Q=G++){let Y=D[Q],ee=D[G],te=ee.x-Y.x,U=ee.y-Y.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(Y=D[G],te=-te,ee=D[Q],U=-U),C.y<Y.y||C.y>ee.y)continue;if(C.y===Y.y){if(C.x===Y.x)return!0}else{const V=U*(C.x-Y.x)-te*(C.y-Y.y);if(V===0)return!0;if(V<0)continue;F=!F}}else{if(C.y!==Y.y)continue;if(ee.x<=C.x&&C.x<=Y.x||Y.x<=C.x&&C.x<=ee.x)return!0}}return F}const i=Nl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const d=[];if(s.length===1)return l=s[0],c=new Yh,c.curves=l.curves,d.push(c),d;let h=!i(s[0].getPoints());h=e?!h:h;const w=[],_=[];let x=[],A=0,L;_[A]=void 0,x[A]=[];for(let C=0,D=s.length;C<D;C++)l=s[C],L=l.getPoints(),o=i(L),o=e?!o:o,o?(!h&&_[A]&&A++,_[A]={s:new Yh,p:L},_[A].s.curves=l.curves,h&&A++,x[A]=[]):x[A].push({h:l,p:L[0]});if(!_[0])return t(s);if(_.length>1){let C=!1,D=0;for(let k=0,F=_.length;k<F;k++)w[k]=[];for(let k=0,F=_.length;k<F;k++){const Q=x[k];for(let G=0;G<Q.length;G++){const Y=Q[G];let ee=!0;for(let te=0;te<_.length;te++)n(Y.p,_[te].p)&&(k!==te&&D++,ee?(ee=!1,w[te].push(Y)):C=!0);ee&&w[k].push(Y)}}D>0&&C===!1&&(x=w)}let N;for(let C=0,D=_.length;C<D;C++){c=_[C].s,d.push(c),N=x[C];for(let k=0,F=N.length;k<F;k++)c.holes.push(N[k].h)}return d}}class Gse extends kl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class jse extends qa{constructor(e=1,t=1,n=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:cx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=cx);const qse=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:tR,AddEquation:Kc,AddOperation:v6,AdditiveAnimationBlendMode:hR,AdditiveBlending:fA,AgXToneMapping:M6,AlphaFormat:oR,AlwaysCompare:U6,AlwaysDepth:$_,AlwaysStencilFunc:mA,AmbientLight:FF,AnimationAction:KF,AnimationClip:hy,AnimationLoader:qie,AnimationMixer:xse,AnimationObjectGroup:wse,AnimationUtils:Vie,ArcCurve:fF,ArrayCamera:tF,ArrowHelper:Wse,AttachedBindMode:pA,Audio:jF,AudioAnalyser:use,AudioContext:FR,AudioListener:ose,AudioLoader:rse,AxesHelper:Vse,BackSide:Xs,BasicDepthPacking:C6,BasicShadowMap:QU,BatchedMesh:lF,Bone:ER,BooleanKeyframeTrack:pd,Box2:Tse,Box3:$s,Box3Helper:Fse,BoxGeometry:dd,BoxHelper:Use,BufferAttribute:Ir,BufferGeometry:Jn,BufferGeometryLoader:GF,ByteType:rR,Cache:Uu,Camera:Ly,CameraHelper:Bse,CanvasTexture:hie,CapsuleGeometry:Cx,CatmullRomCurve3:hF,CineonToneMapping:x6,CircleGeometry:Ix,ClampToEdgeWrapping:aa,Clock:zR,Color:ln,ColorKeyframeTrack:DR,ColorManagement:gr,CompressedArrayTexture:cie,CompressedCubeTexture:fie,CompressedTexture:Tx,CompressedTextureLoader:Kie,ConeGeometry:Nx,ConstantAlphaFactor:m6,ConstantColorFactor:d6,Controls:Gse,CubeCamera:K6,CubeReflectionMapping:qu,CubeRefractionMapping:sf,CubeTexture:ky,CubeTextureLoader:Yie,CubeUVReflectionMapping:L0,CubicBezierCurve:TR,CubicBezierCurve3:dF,CubicInterpolant:NF,CullFaceBack:cA,CullFaceFront:ZU,CullFaceFrontBack:FZ,CullFaceNone:$U,Curve:Xa,CurvePath:mF,CustomBlending:JU,CustomToneMapping:S6,CylinderGeometry:B0,Cylindrical:Ase,Data3DTexture:mR,DataArrayTexture:xx,DataTexture:Il,DataTextureLoader:Xie,DataUtils:JQ,DecrementStencilOp:JZ,DecrementWrapStencilOp:tQ,DefaultLoadingManager:kF,DepthFormat:jh,DepthStencilFormat:td,DepthTexture:wR,DetachedBindMode:b6,DirectionalLight:UF,DirectionalLightHelper:Dse,DiscreteInterpolant:PF,DisplayP3ColorSpace:_x,DodecahedronGeometry:Px,DoubleSide:Sl,DstAlphaFactor:l6,DstColorFactor:c6,DynamicCopyUsage:gQ,DynamicDrawUsage:cQ,DynamicReadUsage:dQ,EdgesGeometry:gF,EllipseCurve:Rx,EqualCompare:k6,EqualDepth:Q_,EqualStencilFunc:sQ,EquirectangularReflectionMapping:Yg,EquirectangularRefractionMapping:Xg,Euler:Ho,EventDispatcher:kl,ExtrudeGeometry:kx,FileLoader:Yu,Float16BufferAttribute:sJ,Float32BufferAttribute:vn,FloatType:wo,Fog:Ex,FogExp2:Mx,FramebufferTexture:uie,FrontSide:ju,Frustum:Oy,GLBufferAttribute:bse,GLSL1:vQ,GLSL3:gA,GreaterCompare:O6,GreaterDepth:e1,GreaterEqualCompare:B6,GreaterEqualDepth:J_,GreaterEqualStencilFunc:uQ,GreaterStencilFunc:aQ,GridHelper:kse,Group:n0,HalfFloatType:k0,HemisphereLight:OF,HemisphereLightHelper:Lse,IcosahedronGeometry:Ox,ImageBitmapLoader:nse,ImageLoader:dy,ImageUtils:V6,IncrementStencilOp:QZ,IncrementWrapStencilOp:eQ,InstancedBufferAttribute:M0,InstancedBufferGeometry:HF,InstancedInterleavedBuffer:Ese,InstancedMesh:aF,Int16BufferAttribute:rJ,Int32BufferAttribute:iJ,Int8BufferAttribute:eJ,IntType:dx,InterleavedBuffer:bx,InterleavedBufferAttribute:nd,Interpolant:Fy,InterpolateDiscrete:Qg,InterpolateLinear:R1,InterpolateSmooth:g_,InvertStencilOp:nQ,KeepStencilOp:_h,KeyframeTrack:$a,LOD:sF,LatheGeometry:Dy,Layers:Kh,LessCompare:L6,LessDepth:Z_,LessEqualCompare:dR,LessEqualDepth:Jh,LessEqualStencilFunc:oQ,LessStencilFunc:iQ,Light:hf,LightProbe:VF,Line:of,Line3:Rse,LineBasicMaterial:Qs,LineCurve:RR,LineCurve3:pF,LineDashedMaterial:RF,LineLoop:uF,LineSegments:Ol,LinearDisplayP3ColorSpace:Py,LinearFilter:Ci,LinearInterpolant:OR,LinearMipMapLinearFilter:HZ,LinearMipMapNearestFilter:VZ,LinearMipmapLinearFilter:El,LinearMipmapNearestFilter:Mg,LinearSRGBColorSpace:$u,LinearToneMapping:w6,LinearTransfer:ey,Loader:xo,LoaderUtils:EA,LoadingManager:BR,LoopOnce:A6,LoopPingPong:R6,LoopRepeat:T6,LuminanceAlphaFormat:uR,LuminanceFormat:lR,MOUSE:vh,Material:ks,MaterialLoader:Vx,MathUtils:F6,Matrix2:GR,Matrix3:jn,Matrix4:Ln,MaxEquation:r6,Mesh:Ni,MeshBasicMaterial:cf,MeshDepthMaterial:_R,MeshDistanceMaterial:xR,MeshLambertMaterial:AF,MeshMatcapMaterial:TF,MeshNormalMaterial:bF,MeshPhongMaterial:MF,MeshPhysicalMaterial:LR,MeshStandardMaterial:PR,MeshToonMaterial:EF,MinEquation:n6,MirroredRepeatWrapping:Zg,MixOperation:y6,MultiplyBlending:dA,MultiplyOperation:Iy,NearestFilter:Zi,NearestMipMapLinearFilter:WZ,NearestMipMapNearestFilter:zZ,NearestMipmapLinearFilter:Jp,NearestMipmapNearestFilter:nR,NeutralToneMapping:E6,NeverCompare:P6,NeverDepth:X_,NeverStencilFunc:rQ,NoBlending:Wu,NoColorSpace:Pu,NoToneMapping:Cl,NormalAnimationBlendMode:wx,NormalBlending:Gh,NotEqualCompare:D6,NotEqualDepth:t1,NotEqualStencilFunc:lQ,NumberKeyframeTrack:cy,Object3D:dr,ObjectLoader:ese,ObjectSpaceNormalMap:N6,OctahedronGeometry:By,OneFactor:s6,OneMinusConstantAlphaFactor:g6,OneMinusConstantColorFactor:p6,OneMinusDstAlphaFactor:u6,OneMinusDstColorFactor:f6,OneMinusSrcAlphaFactor:Y_,OneMinusSrcColorFactor:a6,OrthographicCamera:Qc,P3Primaries:ny,PCFShadowMap:fx,PCFSoftShadowMap:Sg,PMREMGenerator:yA,Path:oy,PerspectiveCamera:mi,Plane:Tu,PlaneGeometry:O0,PlaneHelper:zse,PointLight:BF,PointLightHelper:Nse,Points:cF,PointsMaterial:bR,PolarGridHelper:Ose,PolyhedronGeometry:ff,PositionalAudio:lse,PropertyBinding:fr,PropertyMixer:qF,QuadraticBezierCurve:CR,QuadraticBezierCurve3:IR,Quaternion:Ps,QuaternionKeyframeTrack:zy,QuaternionLinearInterpolant:LF,RED_GREEN_RGTC2_Format:A1,RED_RGTC1_Format:fR,REVISION:cx,RGBADepthPacking:I6,RGBAFormat:Ns,RGBAIntegerFormat:vx,RGBA_ASTC_10x10_Format:_1,RGBA_ASTC_10x5_Format:y1,RGBA_ASTC_10x6_Format:v1,RGBA_ASTC_10x8_Format:w1,RGBA_ASTC_12x10_Format:x1,RGBA_ASTC_12x12_Format:S1,RGBA_ASTC_4x4_Format:u1,RGBA_ASTC_5x4_Format:c1,RGBA_ASTC_5x5_Format:f1,RGBA_ASTC_6x5_Format:h1,RGBA_ASTC_6x6_Format:d1,RGBA_ASTC_8x5_Format:p1,RGBA_ASTC_8x6_Format:m1,RGBA_ASTC_8x8_Format:g1,RGBA_BPTC_Format:Rg,RGBA_ETC2_EAC_Format:l1,RGBA_PVRTC_2BPPV1_Format:s1,RGBA_PVRTC_4BPPV1_Format:i1,RGBA_S3TC_DXT1_Format:bg,RGBA_S3TC_DXT3_Format:Ag,RGBA_S3TC_DXT5_Format:Tg,RGBDepthPacking:YZ,RGBFormat:aR,RGBIntegerFormat:GZ,RGB_BPTC_SIGNED_Format:M1,RGB_BPTC_UNSIGNED_Format:E1,RGB_ETC1_Format:o1,RGB_ETC2_Format:a1,RGB_PVRTC_2BPPV1_Format:r1,RGB_PVRTC_4BPPV1_Format:n1,RGB_S3TC_DXT1_Format:Eg,RGDepthPacking:XZ,RGFormat:cR,RGIntegerFormat:yx,RawShaderMaterial:SF,Ray:hd,Raycaster:YF,Rec709Primaries:ty,RectAreaLight:zF,RedFormat:gx,RedIntegerFormat:Ny,ReinhardToneMapping:_6,RenderTarget:H6,RepeatWrapping:$g,ReplaceStencilOp:ZZ,ReverseSubtractEquation:t6,RingGeometry:Dx,SIGNED_RED_GREEN_RGTC2_Format:T1,SIGNED_RED_RGTC1_Format:b1,SRGBColorSpace:oa,SRGBTransfer:Br,Scene:SR,ShaderChunk:Xn,ShaderLib:za,ShaderMaterial:Ka,ShadowMaterial:xF,Shape:Yh,ShapeGeometry:Bx,ShapePath:Hse,ShapeUtils:Nl,ShortType:iR,Skeleton:Ax,SkeletonHelper:Ise,SkinnedMesh:oF,Source:Fh,Sphere:Ls,SphereGeometry:Uy,Spherical:AA,SphericalHarmonics3:WF,SplineCurve:NR,SpotLight:DF,SpotLightHelper:Cse,Sprite:iF,SpriteMaterial:MR,SrcAlphaFactor:K_,SrcAlphaSaturateFactor:h6,SrcColorFactor:o6,StaticCopyUsage:mQ,StaticDrawUsage:ry,StaticReadUsage:hQ,StereoCamera:ise,StreamCopyUsage:yQ,StreamDrawUsage:fQ,StreamReadUsage:pQ,StringKeyframeTrack:md,SubtractEquation:e6,SubtractiveBlending:hA,TOUCH:wh,TangentSpaceNormalMap:uf,TetrahedronGeometry:Ux,Texture:li,TextureLoader:$ie,TextureUtils:Vre,TorusGeometry:Fx,TorusKnotGeometry:zx,Triangle:yo,TriangleFanDrawMode:KZ,TriangleStripDrawMode:qZ,TrianglesDrawMode:jZ,TubeGeometry:Wx,UVMapping:hx,Uint16BufferAttribute:gR,Uint32BufferAttribute:yR,Uint8BufferAttribute:tJ,Uint8ClampedBufferAttribute:nJ,Uniform:HR,UniformsGroup:Mse,UniformsLib:Jt,UniformsUtils:q6,UnsignedByteType:ja,UnsignedInt248Type:ed,UnsignedInt5999Type:sR,UnsignedIntType:Ku,UnsignedShort4444Type:px,UnsignedShort5551Type:mx,UnsignedShortType:_0,VSMShadowMap:Fa,Vector2:St,Vector3:we,Vector4:hr,VectorKeyframeTrack:fy,VideoTexture:lie,WebGL3DRenderTarget:HQ,WebGLArrayRenderTarget:VQ,WebGLCoordinateSystem:bl,WebGLCubeRenderTarget:Y6,WebGLMultipleRenderTargets:jse,WebGLRenderTarget:qa,WebGLRenderer:nF,WebGLUtils:eF,WebGPUCoordinateSystem:iy,WireframeGeometry:_F,WrapAroundEnding:Jg,ZeroCurvatureEnding:Bh,ZeroFactor:i6,ZeroSlopeEnding:Uh,ZeroStencilOp:$Z,createCanvasElement:W6},Symbol.toStringTag,{value:"Module"}));var YE={exports:{}},Wc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL;function Kse(){return LL||(LL=1,Wc.ConcurrentRoot=1,Wc.ContinuousEventPriority=4,Wc.DefaultEventPriority=16,Wc.DiscreteEventPriority=1,Wc.IdleEventPriority=536870912,Wc.LegacyRoot=0),Wc}var kL;function Yse(){return kL||(kL=1,YE.exports=Kse()),YE.exports}var i0=Yse();function Xse(r){let e;const t=new Set,n=(d,h)=>{const w=typeof d=="function"?d(e):d;if(w!==e){const _=e;e=h?w:Object.assign({},e,w),t.forEach(x=>x(e,_))}},i=()=>e,s=(d,h=i,w=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=h(e);function x(){const A=h(e);if(!w(_,A)){const L=_;d(_=A,L)}}return t.add(x),()=>t.delete(x)},c={setState:n,getState:i,subscribe:(d,h,w)=>h||w?s(d,h,w):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=r(n,i,c),c}const $se=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),OL=$se?Ce.useEffect:Ce.useLayoutEffect;function Zse(r){const e=typeof r=="function"?Xse(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=Ce.useReducer(N=>N+1,0),o=e.getState(),l=Ce.useRef(o),c=Ce.useRef(n),d=Ce.useRef(i),h=Ce.useRef(!1),w=Ce.useRef();w.current===void 0&&(w.current=n(o));let _,x=!1;(l.current!==o||c.current!==n||d.current!==i||h.current)&&(_=n(o),x=!i(w.current,_)),OL(()=>{x&&(w.current=_),l.current=o,c.current=n,d.current=i,h.current=!1});const A=Ce.useRef(o);OL(()=>{const N=()=>{try{const D=e.getState(),k=c.current(D);d.current(w.current,k)||(l.current=D,w.current=k,s())}catch{h.current=!0,s()}},C=e.subscribe(N);return e.getState()!==A.current&&N(),C},[]);const L=x?_:w.current;return Ce.useDebugValue(L),L};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var XE={exports:{}},$E={exports:{}},ZE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DL;function Qse(){return DL||(DL=1,(function(r){function e(T,P){var I=T.length;T.push(P);e:for(;0<I;){var y=I-1>>>1,u=T[y];if(0<i(u,P))T[y]=P,T[I]=u,I=y;else break e}}function t(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var P=T[0],I=T.pop();if(I!==P){T[0]=I;e:for(var y=0,u=T.length,S=u>>>1;y<S;){var W=2*(y+1)-1,$=T[W],se=W+1,me=T[se];if(0>i($,I))se<u&&0>i(me,$)?(T[y]=me,T[se]=I,y=se):(T[y]=$,T[W]=I,y=W);else if(se<u&&0>i(me,I))T[y]=me,T[se]=I,y=se;else break e}}return P}function i(T,P){var I=T.sortIndex-P.sortIndex;return I!==0?I:T.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,w=null,_=3,x=!1,A=!1,L=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(T){for(var P=t(d);P!==null;){if(P.callback===null)n(d);else if(P.startTime<=T)n(d),P.sortIndex=P.expirationTime,e(c,P);else break;P=t(d)}}function F(T){if(L=!1,k(T),!A)if(t(c)!==null)A=!0,M(Q);else{var P=t(d);P!==null&&R(F,P.startTime-T)}}function Q(T,P){A=!1,L&&(L=!1,C(ee),ee=-1),x=!0;var I=_;try{for(k(P),w=t(c);w!==null&&(!(w.expirationTime>P)||T&&!V());){var y=w.callback;if(typeof y=="function"){w.callback=null,_=w.priorityLevel;var u=y(w.expirationTime<=P);P=r.unstable_now(),typeof u=="function"?w.callback=u:w===t(c)&&n(c),k(P)}else n(c);w=t(c)}if(w!==null)var S=!0;else{var W=t(d);W!==null&&R(F,W.startTime-P),S=!1}return S}finally{w=null,_=I,x=!1}}var G=!1,Y=null,ee=-1,te=5,U=-1;function V(){return!(r.unstable_now()-U<te)}function K(){if(Y!==null){var T=r.unstable_now();U=T;var P=!0;try{P=Y(!0,T)}finally{P?E():(G=!1,Y=null)}}else G=!1}var E;if(typeof D=="function")E=function(){D(K)};else if(typeof MessageChannel<"u"){var a=new MessageChannel,p=a.port2;a.port1.onmessage=K,E=function(){p.postMessage(null)}}else E=function(){N(K,0)};function M(T){Y=T,G||(G=!0,E())}function R(T,P){ee=N(function(){T(r.unstable_now())},P)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_continueExecution=function(){A||x||(A=!0,M(Q))},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(T){switch(_){case 1:case 2:case 3:var P=3;break;default:P=_}var I=_;_=P;try{return T()}finally{_=I}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(T,P){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var I=_;_=T;try{return P()}finally{_=I}},r.unstable_scheduleCallback=function(T,P,I){var y=r.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?y+I:y):I=y,T){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return u=I+u,T={id:h++,callback:P,priorityLevel:T,startTime:I,expirationTime:u,sortIndex:-1},I>y?(T.sortIndex=I,e(d,T),t(c)===null&&T===t(d)&&(L?(C(ee),ee=-1):L=!0,R(F,I-y))):(T.sortIndex=u,e(c,T),A||x||(A=!0,M(Q))),T},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(T){var P=_;return function(){var I=_;_=P;try{return T.apply(this,arguments)}finally{_=I}}}})(ZE)),ZE}var BL;function $F(){return BL||(BL=1,$E.exports=Qse()),$E.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE,UL;function Jse(){return UL||(UL=1,QE=function(e){var t={},n=k1(),i=$F(),s=Object.assign;function o(g){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+g,O=1;O<arguments.length;O++)v+="&args[]="+encodeURIComponent(arguments[O]);return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),A=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),Q=Symbol.iterator;function G(g){return g===null||typeof g!="object"?null:(g=Q&&g[Q]||g["@@iterator"],typeof g=="function"?g:null)}function Y(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case h:return"Fragment";case d:return"Portal";case _:return"Profiler";case w:return"StrictMode";case N:return"Suspense";case C:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case A:return(g.displayName||"Context")+".Consumer";case x:return(g._context.displayName||"Context")+".Provider";case L:var v=g.render;return g=g.displayName,g||(g=v.displayName||v.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case D:return v=g.displayName||null,v!==null?v:Y(g.type)||"Memo";case k:v=g._payload,g=g._init;try{return Y(g(v))}catch{}}return null}function ee(g){var v=g.type;switch(g.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=v.render,g=g.displayName||g.name||"",v.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(v);case 8:return v===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function te(g){var v=g,O=g;if(g.alternate)for(;v.return;)v=v.return;else{g=v;do v=g,(v.flags&4098)!==0&&(O=v.return),g=v.return;while(g)}return v.tag===3?O:null}function U(g){if(te(g)!==g)throw Error(o(188))}function V(g){var v=g.alternate;if(!v){if(v=te(g),v===null)throw Error(o(188));return v!==g?null:g}for(var O=g,z=v;;){var Z=O.return;if(Z===null)break;var ie=Z.alternate;if(ie===null){if(z=Z.return,z!==null){O=z;continue}break}if(Z.child===ie.child){for(ie=Z.child;ie;){if(ie===O)return U(Z),g;if(ie===z)return U(Z),v;ie=ie.sibling}throw Error(o(188))}if(O.return!==z.return)O=Z,z=ie;else{for(var xe=!1,We=Z.child;We;){if(We===O){xe=!0,O=Z,z=ie;break}if(We===z){xe=!0,z=Z,O=ie;break}We=We.sibling}if(!xe){for(We=ie.child;We;){if(We===O){xe=!0,O=ie,z=Z;break}if(We===z){xe=!0,z=ie,O=Z;break}We=We.sibling}if(!xe)throw Error(o(189))}}if(O.alternate!==z)throw Error(o(190))}if(O.tag!==3)throw Error(o(188));return O.stateNode.current===O?g:v}function K(g){return g=V(g),g!==null?E(g):null}function E(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var v=E(g);if(v!==null)return v;g=g.sibling}return null}function a(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var v=a(g);if(v!==null)return v}g=g.sibling}return null}var p=Array.isArray,M=e.getPublicInstance,R=e.getRootHostContext,T=e.getChildHostContext,P=e.prepareForCommit,I=e.resetAfterCommit,y=e.createInstance,u=e.appendInitialChild,S=e.finalizeInitialChildren,W=e.prepareUpdate,$=e.shouldSetTextContent,se=e.createTextInstance,me=e.scheduleTimeout,_e=e.cancelTimeout,be=e.noTimeout,wt=e.isPrimaryRenderer,Ze=e.supportsMutation,Pe=e.supportsPersistence,ge=e.supportsHydration,Ge=e.getInstanceFromNode,je=e.preparePortalMount,yt=e.getCurrentEventPriority,He=e.detachDeletedInstance,nt=e.supportsMicrotasks,Nt=e.scheduleMicrotask,fe=e.supportsTestSelectors,oe=e.findFiberRoot,Oe=e.getBoundingRect,Te=e.getTextContent,Le=e.isHiddenSubtree,ot=e.matchAccessibilityRole,et=e.setFocusIfFocusable,Ye=e.setupIntersectionObserver,Et=e.appendChild,ut=e.appendChildToContainer,re=e.commitTextUpdate,j=e.commitMount,q=e.commitUpdate,ue=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,le=e.removeChildFromContainer,Xe=e.resetTextContent,de=e.hideInstance,Re=e.hideTextInstance,Ue=e.unhideInstance,Me=e.unhideTextInstance,qe=e.clearContainer,Rt=e.cloneInstance,ct=e.createContainerChildSet,gt=e.appendChildToContainerChildSet,Sn=e.finalizeContainerChildren,ht=e.replaceContainerChildren,ae=e.cloneHiddenInstance,J=e.cloneHiddenTextInstance,X=e.canHydrateInstance,he=e.canHydrateTextInstance,Ie=e.canHydrateSuspenseInstance,Ae=e.isSuspenseInstancePending,Ne=e.isSuspenseInstanceFallback,dn=e.registerSuspenseInstanceRetry,mt=e.getNextHydratableSibling,_t=e.getFirstHydratableChild,Dn=e.getFirstHydratableChildWithinContainer,vt=e.getFirstHydratableChildWithinSuspenseInstance,Lt=e.hydrateInstance,Nr=e.hydrateTextInstance,Ot=e.hydrateSuspenseInstance,kt=e.getNextHydratableInstanceAfterSuspenseInstance,pe=e.commitHydratedContainer,De=e.commitHydratedSuspenseInstance,$e=e.clearSuspenseBoundary,Qe=e.clearSuspenseBoundaryFromContainer,Be=e.shouldDeleteUnhydratedTailInstances,At=e.didNotMatchHydratedContainerTextInstance,Ft=e.didNotMatchHydratedTextInstance,bt;function Vt(g){if(bt===void 0)try{throw Error()}catch(O){var v=O.stack.trim().match(/\n( *(at )?)/);bt=v&&v[1]||""}return`
`+bt+g}var nn=!1;function sn(g,v){if(!g||nn)return"";nn=!0;var O=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(zt){var z=zt}Reflect.construct(g,[],v)}else{try{v.call()}catch(zt){z=zt}g.call(v.prototype)}else{try{throw Error()}catch(zt){z=zt}g()}}catch(zt){if(zt&&z&&typeof zt.stack=="string"){for(var Z=zt.stack.split(`
`),ie=z.stack.split(`
`),xe=Z.length-1,We=ie.length-1;1<=xe&&0<=We&&Z[xe]!==ie[We];)We--;for(;1<=xe&&0<=We;xe--,We--)if(Z[xe]!==ie[We]){if(xe!==1||We!==1)do if(xe--,We--,0>We||Z[xe]!==ie[We]){var dt=`
`+Z[xe].replace(" at new "," at ");return g.displayName&&dt.includes("<anonymous>")&&(dt=dt.replace("<anonymous>",g.displayName)),dt}while(1<=xe&&0<=We);break}}}finally{nn=!1,Error.prepareStackTrace=O}return(g=g?g.displayName||g.name:"")?Vt(g):""}var qt=Object.prototype.hasOwnProperty,Tn=[],Rn=-1;function En(g){return{current:g}}function un(g){0>Rn||(g.current=Tn[Rn],Tn[Rn]=null,Rn--)}function $t(g,v){Rn++,Tn[Rn]=g.current,g.current=v}var Dt={},Mn=En(Dt),On=En(!1),Fr=Dt;function yi(g,v){var O=g.type.contextTypes;if(!O)return Dt;var z=g.stateNode;if(z&&z.__reactInternalMemoizedUnmaskedChildContext===v)return z.__reactInternalMemoizedMaskedChildContext;var Z={},ie;for(ie in O)Z[ie]=v[ie];return z&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=v,g.__reactInternalMemoizedMaskedChildContext=Z),Z}function ir(g){return g=g.childContextTypes,g!=null}function Kt(){un(On),un(Mn)}function pt(g,v,O){if(Mn.current!==Dt)throw Error(o(168));$t(Mn,v),$t(On,O)}function Ve(g,v,O){var z=g.stateNode;if(v=v.childContextTypes,typeof z.getChildContext!="function")return O;z=z.getChildContext();for(var Z in z)if(!(Z in v))throw Error(o(108,ee(g)||"Unknown",Z));return s({},O,z)}function Fe(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Dt,Fr=Mn.current,$t(Mn,g),$t(On,On.current),!0}function xt(g,v,O){var z=g.stateNode;if(!z)throw Error(o(169));O?(g=Ve(g,v,Fr),z.__reactInternalMemoizedMergedChildContext=g,un(On),un(Mn),$t(Mn,g)):un(On),$t(On,O)}var Bt=Math.clz32?Math.clz32:zn,Gt=Math.log,cn=Math.LN2;function zn(g){return g>>>=0,g===0?32:31-(Gt(g)/cn|0)|0}var Wn=64,Cn=4194304;function Js(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Dl(g,v){var O=g.pendingLanes;if(O===0)return 0;var z=0,Z=g.suspendedLanes,ie=g.pingedLanes,xe=O&268435455;if(xe!==0){var We=xe&~Z;We!==0?z=Js(We):(ie&=xe,ie!==0&&(z=Js(ie)))}else xe=O&~Z,xe!==0?z=Js(xe):ie!==0&&(z=Js(ie));if(z===0)return 0;if(v!==0&&v!==z&&(v&Z)===0&&(Z=z&-z,ie=v&-v,Z>=ie||Z===16&&(ie&4194240)!==0))return v;if((z&4)!==0&&(z|=O&16),v=g.entangledLanes,v!==0)for(g=g.entanglements,v&=z;0<v;)O=31-Bt(v),Z=1<<O,z|=g[O],v&=~Z;return z}function df(g,v){switch(g){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hy(g,v){for(var O=g.suspendedLanes,z=g.pingedLanes,Z=g.expirationTimes,ie=g.pendingLanes;0<ie;){var xe=31-Bt(ie),We=1<<xe,dt=Z[xe];dt===-1?((We&O)===0||(We&z)!==0)&&(Z[xe]=df(We,v)):dt<=v&&(g.expiredLanes|=We),ie&=~We}}function gd(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function yd(g){for(var v=[],O=0;31>O;O++)v.push(g);return v}function Bl(g,v,O){g.pendingLanes|=v,v!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,v=31-Bt(v),g[v]=O}function vd(g,v){var O=g.pendingLanes&~v;g.pendingLanes=v,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=v,g.mutableReadLanes&=v,g.entangledLanes&=v,v=g.entanglements;var z=g.eventTimes;for(g=g.expirationTimes;0<O;){var Z=31-Bt(O),ie=1<<Z;v[Z]=0,z[Z]=-1,g[Z]=-1,O&=~ie}}function jo(g,v){var O=g.entangledLanes|=v;for(g=g.entanglements;O;){var z=31-Bt(O),Z=1<<z;Z&v|g[z]&v&&(g[z]|=v),O&=~Z}}var Yn=0;function ca(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var Ul=i.unstable_scheduleCallback,Zu=i.unstable_cancelCallback,Za=i.unstable_shouldYield,Hx=i.unstable_requestPaint,ui=i.unstable_now,Fl=i.unstable_ImmediatePriority,Gx=i.unstable_UserBlockingPriority,wd=i.unstable_NormalPriority,_d=i.unstable_IdlePriority,pf=null,qo=null;function mf(g){if(qo&&typeof qo.onCommitFiberRoot=="function")try{qo.onCommitFiberRoot(pf,g,void 0,(g.current.flags&128)===128)}catch{}}function gf(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var Ji=typeof Object.is=="function"?Object.is:gf,eo=null,xd=!1,U0=!1;function Sd(g){eo===null?eo=[g]:eo.push(g)}function Md(g){xd=!0,Sd(g)}function to(){if(!U0&&eo!==null){U0=!0;var g=0,v=Yn;try{var O=eo;for(Yn=1;g<O.length;g++){var z=O[g];do z=z(!0);while(z!==null)}eo=null,xd=!1}catch(Z){throw eo!==null&&(eo=eo.slice(g+1)),Ul(Fl,to),Z}finally{Yn=v,U0=!1}}return null}var Gy=l.ReactCurrentBatchConfig;function So(g,v){if(Ji(g,v))return!0;if(typeof g!="object"||g===null||typeof v!="object"||v===null)return!1;var O=Object.keys(g),z=Object.keys(v);if(O.length!==z.length)return!1;for(z=0;z<O.length;z++){var Z=O[z];if(!qt.call(v,Z)||!Ji(g[Z],v[Z]))return!1}return!0}function F0(g){switch(g.tag){case 5:return Vt(g.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return g=sn(g.type,!1),g;case 11:return g=sn(g.type.render,!1),g;case 1:return g=sn(g.type,!0),g;default:return""}}function ds(g,v){if(g&&g.defaultProps){v=s({},v),g=g.defaultProps;for(var O in g)v[O]===void 0&&(v[O]=g[O]);return v}return v}var yf=En(null),zl=null,fa=null,Ed=null;function es(){Ed=fa=zl=null}function Wl(g,v,O){wt?($t(yf,v._currentValue),v._currentValue=O):($t(yf,v._currentValue2),v._currentValue2=O)}function vf(g){var v=yf.current;un(yf),wt?g._currentValue=v:g._currentValue2=v}function Vl(g,v,O){for(;g!==null;){var z=g.alternate;if((g.childLanes&v)!==v?(g.childLanes|=v,z!==null&&(z.childLanes|=v)):z!==null&&(z.childLanes&v)!==v&&(z.childLanes|=v),g===O)break;g=g.return}}function Qu(g,v){zl=g,Ed=fa=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&v)!==0&&(xi=!0),g.firstContext=null)}function ps(g){var v=wt?g._currentValue:g._currentValue2;if(Ed!==g)if(g={context:g,memoizedValue:v,next:null},fa===null){if(zl===null)throw Error(o(308));fa=g,zl.dependencies={lanes:0,firstContext:g}}else fa=fa.next=g;return v}var no=null,ro=!1;function Ju(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(g,v){g=g.updateQueue,v.updateQueue===g&&(v.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function ha(g,v){return{eventTime:g,lane:v,tag:0,payload:null,callback:null,next:null}}function Qa(g,v){var O=g.updateQueue;O!==null&&(O=O.shared,Xr!==null&&(g.mode&1)!==0&&(Hn&2)===0?(g=O.interleaved,g===null?(v.next=v,no===null?no=[O]:no.push(O)):(v.next=g.next,g.next=v),O.interleaved=v):(g=O.pending,g===null?v.next=v:(v.next=g.next,g.next=v),O.pending=v))}function bd(g,v,O){if(v=v.updateQueue,v!==null&&(v=v.shared,(O&4194240)!==0)){var z=v.lanes;z&=g.pendingLanes,O|=z,v.lanes=O,jo(g,O)}}function Ad(g,v){var O=g.updateQueue,z=g.alternate;if(z!==null&&(z=z.updateQueue,O===z)){var Z=null,ie=null;if(O=O.firstBaseUpdate,O!==null){do{var xe={eventTime:O.eventTime,lane:O.lane,tag:O.tag,payload:O.payload,callback:O.callback,next:null};ie===null?Z=ie=xe:ie=ie.next=xe,O=O.next}while(O!==null);ie===null?Z=ie=v:ie=ie.next=v}else Z=ie=v;O={baseState:z.baseState,firstBaseUpdate:Z,lastBaseUpdate:ie,shared:z.shared,effects:z.effects},g.updateQueue=O;return}g=O.lastBaseUpdate,g===null?O.firstBaseUpdate=v:g.next=v,O.lastBaseUpdate=v}function Td(g,v,O,z){var Z=g.updateQueue;ro=!1;var ie=Z.firstBaseUpdate,xe=Z.lastBaseUpdate,We=Z.shared.pending;if(We!==null){Z.shared.pending=null;var dt=We,zt=dt.next;dt.next=null,xe===null?ie=zt:xe.next=zt,xe=dt;var fn=g.alternate;fn!==null&&(fn=fn.updateQueue,We=fn.lastBaseUpdate,We!==xe&&(We===null?fn.firstBaseUpdate=zt:We.next=zt,fn.lastBaseUpdate=dt))}if(ie!==null){var Un=Z.baseState;xe=0,fn=zt=dt=null,We=ie;do{var bn=We.lane,Gn=We.eventTime;if((z&bn)===bn){fn!==null&&(fn=fn.next={eventTime:Gn,lane:0,tag:We.tag,payload:We.payload,callback:We.callback,next:null});e:{var rn=g,Bi=We;switch(bn=v,Gn=O,Bi.tag){case 1:if(rn=Bi.payload,typeof rn=="function"){Un=rn.call(Gn,Un,bn);break e}Un=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=Bi.payload,bn=typeof rn=="function"?rn.call(Gn,Un,bn):rn,bn==null)break e;Un=s({},Un,bn);break e;case 2:ro=!0}}We.callback!==null&&We.lane!==0&&(g.flags|=64,bn=Z.effects,bn===null?Z.effects=[We]:bn.push(We))}else Gn={eventTime:Gn,lane:bn,tag:We.tag,payload:We.payload,callback:We.callback,next:null},fn===null?(zt=fn=Gn,dt=Un):fn=fn.next=Gn,xe|=bn;if(We=We.next,We===null){if(We=Z.shared.pending,We===null)break;bn=We,We=bn.next,bn.next=null,Z.lastBaseUpdate=bn,Z.shared.pending=null}}while(!0);if(fn===null&&(dt=Un),Z.baseState=dt,Z.firstBaseUpdate=zt,Z.lastBaseUpdate=fn,v=Z.shared.interleaved,v!==null){Z=v;do xe|=Z.lane,Z=Z.next;while(Z!==v)}else ie===null&&(Z.shared.lanes=0);$o|=xe,g.lanes=xe,g.memoizedState=Un}}function jy(g,v,O){if(g=v.effects,v.effects=null,g!==null)for(v=0;v<g.length;v++){var z=g[v],Z=z.callback;if(Z!==null){if(z.callback=null,z=O,typeof Z!="function")throw Error(o(191,Z));Z.call(z)}}}var qy=new n.Component().refs;function W0(g,v,O,z){v=g.memoizedState,O=O(z,v),O=O==null?v:s({},v,O),g.memoizedState=O,g.lanes===0&&(g.updateQueue.baseState=O)}var Rd={isMounted:function(g){return(g=g._reactInternals)?te(g)===g:!1},enqueueSetState:function(g,v,O){g=g._reactInternals;var z=or(),Z=Co(g),ie=ha(z,Z);ie.payload=v,O!=null&&(ie.callback=O),Qa(g,ie),v=Gi(g,Z,z),v!==null&&bd(v,g,Z)},enqueueReplaceState:function(g,v,O){g=g._reactInternals;var z=or(),Z=Co(g),ie=ha(z,Z);ie.tag=1,ie.payload=v,O!=null&&(ie.callback=O),Qa(g,ie),v=Gi(g,Z,z),v!==null&&bd(v,g,Z)},enqueueForceUpdate:function(g,v){g=g._reactInternals;var O=or(),z=Co(g),Z=ha(O,z);Z.tag=2,v!=null&&(Z.callback=v),Qa(g,Z),v=Gi(g,z,O),v!==null&&bd(v,g,z)}};function V0(g,v,O,z,Z,ie,xe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(z,ie,xe):v.prototype&&v.prototype.isPureReactComponent?!So(O,z)||!So(Z,ie):!0}function Ky(g,v,O){var z=!1,Z=Dt,ie=v.contextType;return typeof ie=="object"&&ie!==null?ie=ps(ie):(Z=ir(v)?Fr:Mn.current,z=v.contextTypes,ie=(z=z!=null)?yi(g,Z):Dt),v=new v(O,ie),g.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Rd,g.stateNode=v,v._reactInternals=g,z&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=Z,g.__reactInternalMemoizedMaskedChildContext=ie),v}function Yy(g,v,O,z){g=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(O,z),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(O,z),v.state!==g&&Rd.enqueueReplaceState(v,v.state,null)}function H0(g,v,O,z){var Z=g.stateNode;Z.props=O,Z.state=g.memoizedState,Z.refs=qy,Ju(g);var ie=v.contextType;typeof ie=="object"&&ie!==null?Z.context=ps(ie):(ie=ir(v)?Fr:Mn.current,Z.context=yi(g,ie)),Z.state=g.memoizedState,ie=v.getDerivedStateFromProps,typeof ie=="function"&&(W0(g,v,ie,O),Z.state=g.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(v=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),v!==Z.state&&Rd.enqueueReplaceState(Z,Z.state,null),Td(g,O,Z,z),Z.state=g.memoizedState),typeof Z.componentDidMount=="function"&&(g.flags|=4194308)}var ec=[],Ja=0,Cd=null,Id=0,io=[],Os=0,Hl=null,da=1,pa="";function Gl(g,v){ec[Ja++]=Id,ec[Ja++]=Cd,Cd=g,Id=v}function Xy(g,v,O){io[Os++]=da,io[Os++]=pa,io[Os++]=Hl,Hl=g;var z=da;g=pa;var Z=32-Bt(z)-1;z&=~(1<<Z),O+=1;var ie=32-Bt(v)+Z;if(30<ie){var xe=Z-Z%5;ie=(z&(1<<xe)-1).toString(32),z>>=xe,Z-=xe,da=1<<32-Bt(v)+Z|O<<Z|z,pa=ie+g}else da=1<<ie|O<<Z|z,pa=g}function G0(g){g.return!==null&&(Gl(g,1),Xy(g,1,0))}function j0(g){for(;g===Cd;)Cd=ec[--Ja],ec[Ja]=null,Id=ec[--Ja],ec[Ja]=null;for(;g===Hl;)Hl=io[--Os],io[Os]=null,pa=io[--Os],io[Os]=null,da=io[--Os],io[Os]=null}var ts=null,Pi=null,kr=!1,tc=!1,so=null;function q0(g,v){var O=Vs(5,null,null,0);O.elementType="DELETED",O.stateNode=v,O.return=g,v=g.deletions,v===null?(g.deletions=[O],g.flags|=16):v.push(O)}function K0(g,v){switch(g.tag){case 5:return v=X(v,g.type,g.pendingProps),v!==null?(g.stateNode=v,ts=g,Pi=_t(v),!0):!1;case 6:return v=he(v,g.pendingProps),v!==null?(g.stateNode=v,ts=g,Pi=null,!0):!1;case 13:if(v=Ie(v),v!==null){var O=Hl!==null?{id:da,overflow:pa}:null;return g.memoizedState={dehydrated:v,treeContext:O,retryLane:1073741824},O=Vs(18,null,null,0),O.stateNode=v,O.return=g,g.child=O,ts=g,Pi=null,!0}return!1;default:return!1}}function Nd(g){return(g.mode&1)!==0&&(g.flags&128)===0}function el(g){if(kr){var v=Pi;if(v){var O=v;if(!K0(g,v)){if(Nd(g))throw Error(o(418));v=mt(O);var z=ts;v&&K0(g,v)?q0(z,O):(g.flags=g.flags&-4097|2,kr=!1,ts=g)}}else{if(Nd(g))throw Error(o(418));g.flags=g.flags&-4097|2,kr=!1,ts=g}}}function $y(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;ts=g}function wf(g){if(!ge||g!==ts)return!1;if(!kr)return $y(g),kr=!0,!1;if(g.tag!==3&&(g.tag!==5||Be(g.type)&&!$(g.type,g.memoizedProps))){var v=Pi;if(v){if(Nd(g)){for(g=Pi;g;)g=mt(g);throw Error(o(418))}for(;v;)q0(g,v),v=mt(v)}}if($y(g),g.tag===13){if(!ge)throw Error(o(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Pi=kt(g)}else Pi=ts?mt(g.stateNode):null;return!0}function nc(){ge&&(Pi=ts=null,tc=kr=!1)}function Pd(g){so===null?so=[g]:so.push(g)}function rc(g,v,O){if(g=O.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(O._owner){if(O=O._owner,O){if(O.tag!==1)throw Error(o(309));var z=O.stateNode}if(!z)throw Error(o(147,g));var Z=z,ie=""+g;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===ie?v.ref:(v=function(xe){var We=Z.refs;We===qy&&(We=Z.refs={}),xe===null?delete We[ie]:We[ie]=xe},v._stringRef=ie,v)}if(typeof g!="string")throw Error(o(284));if(!O._owner)throw Error(o(290,g))}return g}function tl(g,v){throw g=Object.prototype.toString.call(v),Error(o(31,g==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":g))}function ic(g){var v=g._init;return v(g._payload)}function Zy(g){function v(st,Ke){if(g){var ft=st.deletions;ft===null?(st.deletions=[Ke],st.flags|=16):ft.push(Ke)}}function O(st,Ke){if(!g)return null;for(;Ke!==null;)v(st,Ke),Ke=Ke.sibling;return null}function z(st,Ke){for(st=new Map;Ke!==null;)Ke.key!==null?st.set(Ke.key,Ke):st.set(Ke.index,Ke),Ke=Ke.sibling;return st}function Z(st,Ke){return st=Ra(st,Ke),st.index=0,st.sibling=null,st}function ie(st,Ke,ft){return st.index=ft,g?(ft=st.alternate,ft!==null?(ft=ft.index,ft<Ke?(st.flags|=2,Ke):ft):(st.flags|=2,Ke)):(st.flags|=1048576,Ke)}function xe(st){return g&&st.alternate===null&&(st.flags|=2),st}function We(st,Ke,ft,Qt){return Ke===null||Ke.tag!==6?(Ke=sp(ft,st.mode,Qt),Ke.return=st,Ke):(Ke=Z(Ke,ft),Ke.return=st,Ke)}function dt(st,Ke,ft,Qt){var yn=ft.type;return yn===h?fn(st,Ke,ft.props.children,Qt,ft.key):Ke!==null&&(Ke.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===k&&ic(yn)===Ke.type)?(Qt=Z(Ke,ft.props),Qt.ref=rc(st,Ke,ft),Qt.return=st,Qt):(Qt=ip(ft.type,ft.key,ft.props,null,st.mode,Qt),Qt.ref=rc(st,Ke,ft),Qt.return=st,Qt)}function zt(st,Ke,ft,Qt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==ft.containerInfo||Ke.stateNode.implementation!==ft.implementation?(Ke=op(ft,st.mode,Qt),Ke.return=st,Ke):(Ke=Z(Ke,ft.children||[]),Ke.return=st,Ke)}function fn(st,Ke,ft,Qt,yn){return Ke===null||Ke.tag!==7?(Ke=hu(ft,st.mode,Qt,yn),Ke.return=st,Ke):(Ke=Z(Ke,ft),Ke.return=st,Ke)}function Un(st,Ke,ft){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Ke=sp(""+Ke,st.mode,ft),Ke.return=st,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case c:return ft=ip(Ke.type,Ke.key,Ke.props,null,st.mode,ft),ft.ref=rc(st,null,Ke),ft.return=st,ft;case d:return Ke=op(Ke,st.mode,ft),Ke.return=st,Ke;case k:var Qt=Ke._init;return Un(st,Qt(Ke._payload),ft)}if(p(Ke)||G(Ke))return Ke=hu(Ke,st.mode,ft,null),Ke.return=st,Ke;tl(st,Ke)}return null}function bn(st,Ke,ft,Qt){var yn=Ke!==null?Ke.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return yn!==null?null:We(st,Ke,""+ft,Qt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case c:return ft.key===yn?dt(st,Ke,ft,Qt):null;case d:return ft.key===yn?zt(st,Ke,ft,Qt):null;case k:return yn=ft._init,bn(st,Ke,yn(ft._payload),Qt)}if(p(ft)||G(ft))return yn!==null?null:fn(st,Ke,ft,Qt,null);tl(st,ft)}return null}function Gn(st,Ke,ft,Qt,yn){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return st=st.get(ft)||null,We(Ke,st,""+Qt,yn);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case c:return st=st.get(Qt.key===null?ft:Qt.key)||null,dt(Ke,st,Qt,yn);case d:return st=st.get(Qt.key===null?ft:Qt.key)||null,zt(Ke,st,Qt,yn);case k:var Vn=Qt._init;return Gn(st,Ke,ft,Vn(Qt._payload),yn)}if(p(Qt)||G(Qt))return st=st.get(ft)||null,fn(Ke,st,Qt,yn,null);tl(Ke,Qt)}return null}function rn(st,Ke,ft,Qt){for(var yn=null,Vn=null,Fn=Ke,sr=Ke=0,ti=null;Fn!==null&&sr<ft.length;sr++){Fn.index>sr?(ti=Fn,Fn=null):ti=Fn.sibling;var rr=bn(st,Fn,ft[sr],Qt);if(rr===null){Fn===null&&(Fn=ti);break}g&&Fn&&rr.alternate===null&&v(st,Fn),Ke=ie(rr,Ke,sr),Vn===null?yn=rr:Vn.sibling=rr,Vn=rr,Fn=ti}if(sr===ft.length)return O(st,Fn),kr&&Gl(st,sr),yn;if(Fn===null){for(;sr<ft.length;sr++)Fn=Un(st,ft[sr],Qt),Fn!==null&&(Ke=ie(Fn,Ke,sr),Vn===null?yn=Fn:Vn.sibling=Fn,Vn=Fn);return kr&&Gl(st,sr),yn}for(Fn=z(st,Fn);sr<ft.length;sr++)ti=Gn(Fn,st,sr,ft[sr],Qt),ti!==null&&(g&&ti.alternate!==null&&Fn.delete(ti.key===null?sr:ti.key),Ke=ie(ti,Ke,sr),Vn===null?yn=ti:Vn.sibling=ti,Vn=ti);return g&&Fn.forEach(function(Ca){return v(st,Ca)}),kr&&Gl(st,sr),yn}function Bi(st,Ke,ft,Qt){var yn=G(ft);if(typeof yn!="function")throw Error(o(150));if(ft=yn.call(ft),ft==null)throw Error(o(151));for(var Vn=yn=null,Fn=Ke,sr=Ke=0,ti=null,rr=ft.next();Fn!==null&&!rr.done;sr++,rr=ft.next()){Fn.index>sr?(ti=Fn,Fn=null):ti=Fn.sibling;var Ca=bn(st,Fn,rr.value,Qt);if(Ca===null){Fn===null&&(Fn=ti);break}g&&Fn&&Ca.alternate===null&&v(st,Fn),Ke=ie(Ca,Ke,sr),Vn===null?yn=Ca:Vn.sibling=Ca,Vn=Ca,Fn=ti}if(rr.done)return O(st,Fn),kr&&Gl(st,sr),yn;if(Fn===null){for(;!rr.done;sr++,rr=ft.next())rr=Un(st,rr.value,Qt),rr!==null&&(Ke=ie(rr,Ke,sr),Vn===null?yn=rr:Vn.sibling=rr,Vn=rr);return kr&&Gl(st,sr),yn}for(Fn=z(st,Fn);!rr.done;sr++,rr=ft.next())rr=Gn(Fn,st,sr,rr.value,Qt),rr!==null&&(g&&rr.alternate!==null&&Fn.delete(rr.key===null?sr:rr.key),Ke=ie(rr,Ke,sr),Vn===null?yn=rr:Vn.sibling=rr,Vn=rr);return g&&Fn.forEach(function(Em){return v(st,Em)}),kr&&Gl(st,sr),yn}function Hs(st,Ke,ft,Qt){if(typeof ft=="object"&&ft!==null&&ft.type===h&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case c:e:{for(var yn=ft.key,Vn=Ke;Vn!==null;){if(Vn.key===yn){if(yn=ft.type,yn===h){if(Vn.tag===7){O(st,Vn.sibling),Ke=Z(Vn,ft.props.children),Ke.return=st,st=Ke;break e}}else if(Vn.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===k&&ic(yn)===Vn.type){O(st,Vn.sibling),Ke=Z(Vn,ft.props),Ke.ref=rc(st,Vn,ft),Ke.return=st,st=Ke;break e}O(st,Vn);break}else v(st,Vn);Vn=Vn.sibling}ft.type===h?(Ke=hu(ft.props.children,st.mode,Qt,ft.key),Ke.return=st,st=Ke):(Qt=ip(ft.type,ft.key,ft.props,null,st.mode,Qt),Qt.ref=rc(st,Ke,ft),Qt.return=st,st=Qt)}return xe(st);case d:e:{for(Vn=ft.key;Ke!==null;){if(Ke.key===Vn)if(Ke.tag===4&&Ke.stateNode.containerInfo===ft.containerInfo&&Ke.stateNode.implementation===ft.implementation){O(st,Ke.sibling),Ke=Z(Ke,ft.children||[]),Ke.return=st,st=Ke;break e}else{O(st,Ke);break}else v(st,Ke);Ke=Ke.sibling}Ke=op(ft,st.mode,Qt),Ke.return=st,st=Ke}return xe(st);case k:return Vn=ft._init,Hs(st,Ke,Vn(ft._payload),Qt)}if(p(ft))return rn(st,Ke,ft,Qt);if(G(ft))return Bi(st,Ke,ft,Qt);tl(st,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,Ke!==null&&Ke.tag===6?(O(st,Ke.sibling),Ke=Z(Ke,ft),Ke.return=st,st=Ke):(O(st,Ke),Ke=sp(ft,st.mode,Qt),Ke.return=st,st=Ke),xe(st)):O(st,Ke)}return Hs}var ma=Zy(!0),Qy=Zy(!1),sc={},ms=En(sc),jl=En(sc),ql=En(sc);function Mo(g){if(g===sc)throw Error(o(174));return g}function Ld(g,v){$t(ql,v),$t(jl,g),$t(ms,sc),g=R(v),un(ms),$t(ms,g)}function oc(){un(ms),un(jl),un(ql)}function Jy(g){var v=Mo(ql.current),O=Mo(ms.current);v=T(O,g.type,v),O!==v&&($t(jl,g),$t(ms,v))}function Y0(g){jl.current===g&&(un(ms),un(jl))}var zr=En(0);function kd(g){for(var v=g;v!==null;){if(v.tag===13){var O=v.memoizedState;if(O!==null&&(O=O.dehydrated,O===null||Ae(O)||Ne(O)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Ds=[];function Kl(){for(var g=0;g<Ds.length;g++){var v=Ds[g];wt?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}Ds.length=0}var _f=l.ReactCurrentDispatcher,Bs=l.ReactCurrentBatchConfig,Yl=0,Wr=null,vi=null,wi=null,Od=!1,Ko=!1,Xl=0,xf=0;function _i(){throw Error(o(321))}function Dd(g,v){if(v===null)return!1;for(var O=0;O<v.length&&O<g.length;O++)if(!Ji(g[O],v[O]))return!1;return!0}function ac(g,v,O,z,Z,ie){if(Yl=ie,Wr=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,_f.current=g===null||g.memoizedState===null?em:tm,g=O(z,Z),Ko){ie=0;do{if(Ko=!1,Xl=0,25<=ie)throw Error(o(301));ie+=1,wi=vi=null,v.updateQueue=null,_f.current=nm,g=O(z,Z)}while(Ko)}if(_f.current=fc,v=vi!==null&&vi.next!==null,Yl=0,wi=vi=Wr=null,Od=!1,v)throw Error(o(300));return g}function nl(){var g=Xl!==0;return Xl=0,g}function Eo(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?Wr.memoizedState=wi=g:wi=wi.next=g,wi}function bo(){if(vi===null){var g=Wr.alternate;g=g!==null?g.memoizedState:null}else g=vi.next;var v=wi===null?Wr.memoizedState:wi.next;if(v!==null)wi=v,vi=g;else{if(g===null)throw Error(o(310));vi=g,g={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},wi===null?Wr.memoizedState=wi=g:wi=wi.next=g}return wi}function Yo(g,v){return typeof v=="function"?v(g):v}function Sf(g){var v=bo(),O=v.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=g;var z=vi,Z=z.baseQueue,ie=O.pending;if(ie!==null){if(Z!==null){var xe=Z.next;Z.next=ie.next,ie.next=xe}z.baseQueue=Z=ie,O.pending=null}if(Z!==null){ie=Z.next,z=z.baseState;var We=xe=null,dt=null,zt=ie;do{var fn=zt.lane;if((Yl&fn)===fn)dt!==null&&(dt=dt.next={lane:0,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null}),z=zt.hasEagerState?zt.eagerState:g(z,zt.action);else{var Un={lane:fn,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null};dt===null?(We=dt=Un,xe=z):dt=dt.next=Un,Wr.lanes|=fn,$o|=fn}zt=zt.next}while(zt!==null&&zt!==ie);dt===null?xe=z:dt.next=We,Ji(z,v.memoizedState)||(xi=!0),v.memoizedState=z,v.baseState=xe,v.baseQueue=dt,O.lastRenderedState=z}if(g=O.interleaved,g!==null){Z=g;do ie=Z.lane,Wr.lanes|=ie,$o|=ie,Z=Z.next;while(Z!==g)}else Z===null&&(O.lanes=0);return[v.memoizedState,O.dispatch]}function Mf(g){var v=bo(),O=v.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=g;var z=O.dispatch,Z=O.pending,ie=v.memoizedState;if(Z!==null){O.pending=null;var xe=Z=Z.next;do ie=g(ie,xe.action),xe=xe.next;while(xe!==Z);Ji(ie,v.memoizedState)||(xi=!0),v.memoizedState=ie,v.baseQueue===null&&(v.baseState=ie),O.lastRenderedState=ie}return[ie,z]}function X0(){}function $0(g,v){var O=Wr,z=bo(),Z=v(),ie=!Ji(z.memoizedState,Z);if(ie&&(z.memoizedState=Z,xi=!0),z=z.queue,lc(ga.bind(null,O,z,g),[g]),z.getSnapshot!==v||ie||wi!==null&&wi.memoizedState.tag&1){if(O.flags|=2048,bf(9,Q0.bind(null,O,z,Z,v),void 0,null),Xr===null)throw Error(o(349));(Yl&30)!==0||Z0(O,v,Z)}return Z}function Z0(g,v,O){g.flags|=16384,g={getSnapshot:v,value:O},v=Wr.updateQueue,v===null?(v={lastEffect:null,stores:null},Wr.updateQueue=v,v.stores=[g]):(O=v.stores,O===null?v.stores=[g]:O.push(g))}function Q0(g,v,O,z){v.value=O,v.getSnapshot=z,Bd(v)&&Gi(g,1,-1)}function ga(g,v,O){return O(function(){Bd(v)&&Gi(g,1,-1)})}function Bd(g){var v=g.getSnapshot;g=g.value;try{var O=v();return!Ji(g,O)}catch{return!0}}function Ef(g){var v=Eo();return typeof g=="function"&&(g=g()),v.memoizedState=v.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:g},v.queue=g,g=g.dispatch=jx.bind(null,Wr,g),[v.memoizedState,g]}function bf(g,v,O,z){return g={tag:g,create:v,destroy:O,deps:z,next:null},v=Wr.updateQueue,v===null?(v={lastEffect:null,stores:null},Wr.updateQueue=v,v.lastEffect=g.next=g):(O=v.lastEffect,O===null?v.lastEffect=g.next=g:(z=O.next,O.next=g,g.next=z,v.lastEffect=g)),g}function ev(){return bo().memoizedState}function rl(g,v,O,z){var Z=Eo();Wr.flags|=g,Z.memoizedState=bf(1|v,O,void 0,z===void 0?null:z)}function Ud(g,v,O,z){var Z=bo();z=z===void 0?null:z;var ie=void 0;if(vi!==null){var xe=vi.memoizedState;if(ie=xe.destroy,z!==null&&Dd(z,xe.deps)){Z.memoizedState=bf(v,O,ie,z);return}}Wr.flags|=g,Z.memoizedState=bf(1|v,O,ie,z)}function Fd(g,v){return rl(8390656,8,g,v)}function lc(g,v){return Ud(2048,8,g,v)}function Ar(g,v){return Ud(4,2,g,v)}function zd(g,v){return Ud(4,4,g,v)}function Af(g,v){if(typeof v=="function")return g=g(),v(g),function(){v(null)};if(v!=null)return g=g(),v.current=g,function(){v.current=null}}function uc(g,v,O){return O=O!=null?O.concat([g]):null,Ud(4,4,Af.bind(null,v,g),O)}function Wd(){}function Vd(g,v){var O=bo();v=v===void 0?null:v;var z=O.memoizedState;return z!==null&&v!==null&&Dd(v,z[1])?z[0]:(O.memoizedState=[g,v],g)}function cc(g,v){var O=bo();v=v===void 0?null:v;var z=O.memoizedState;return z!==null&&v!==null&&Dd(v,z[1])?z[0]:(g=g(),O.memoizedState=[g,v],g)}function Hd(g,v){var O=Yn;Yn=O!==0&&4>O?O:4,g(!0);var z=Bs.transition;Bs.transition={};try{g(!1),v()}finally{Yn=O,Bs.transition=z}}function $l(){return bo().memoizedState}function tv(g,v,O){var z=Co(g);O={lane:z,action:O,hasEagerState:!1,eagerState:null,next:null},nv(g)?J0(v,O):(Tf(g,v,O),O=or(),g=Gi(g,z,O),g!==null&&Rf(g,v,z))}function jx(g,v,O){var z=Co(g),Z={lane:z,action:O,hasEagerState:!1,eagerState:null,next:null};if(nv(g))J0(v,Z);else{Tf(g,v,Z);var ie=g.alternate;if(g.lanes===0&&(ie===null||ie.lanes===0)&&(ie=v.lastRenderedReducer,ie!==null))try{var xe=v.lastRenderedState,We=ie(xe,O);if(Z.hasEagerState=!0,Z.eagerState=We,Ji(We,xe))return}catch{}finally{}O=or(),g=Gi(g,z,O),g!==null&&Rf(g,v,z)}}function nv(g){var v=g.alternate;return g===Wr||v!==null&&v===Wr}function J0(g,v){Ko=Od=!0;var O=g.pending;O===null?v.next=v:(v.next=O.next,O.next=v),g.pending=v}function Tf(g,v,O){Xr!==null&&(g.mode&1)!==0&&(Hn&2)===0?(g=v.interleaved,g===null?(O.next=O,no===null?no=[v]:no.push(v)):(O.next=g.next,g.next=O),v.interleaved=O):(g=v.pending,g===null?O.next=O:(O.next=g.next,g.next=O),v.pending=O)}function Rf(g,v,O){if((O&4194240)!==0){var z=v.lanes;z&=g.pendingLanes,O|=z,v.lanes=O,jo(g,O)}}var fc={readContext:ps,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},em={readContext:ps,useCallback:function(g,v){return Eo().memoizedState=[g,v===void 0?null:v],g},useContext:ps,useEffect:Fd,useImperativeHandle:function(g,v,O){return O=O!=null?O.concat([g]):null,rl(4194308,4,Af.bind(null,v,g),O)},useLayoutEffect:function(g,v){return rl(4194308,4,g,v)},useInsertionEffect:function(g,v){return rl(4,2,g,v)},useMemo:function(g,v){var O=Eo();return v=v===void 0?null:v,g=g(),O.memoizedState=[g,v],g},useReducer:function(g,v,O){var z=Eo();return v=O!==void 0?O(v):v,z.memoizedState=z.baseState=v,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:v},z.queue=g,g=g.dispatch=tv.bind(null,Wr,g),[z.memoizedState,g]},useRef:function(g){var v=Eo();return g={current:g},v.memoizedState=g},useState:Ef,useDebugValue:Wd,useDeferredValue:function(g){var v=Ef(g),O=v[0],z=v[1];return Fd(function(){var Z=Bs.transition;Bs.transition={};try{z(g)}finally{Bs.transition=Z}},[g]),O},useTransition:function(){var g=Ef(!1),v=g[0];return g=Hd.bind(null,g[1]),Eo().memoizedState=g,[v,g]},useMutableSource:function(){},useSyncExternalStore:function(g,v,O){var z=Wr,Z=Eo();if(kr){if(O===void 0)throw Error(o(407));O=O()}else{if(O=v(),Xr===null)throw Error(o(349));(Yl&30)!==0||Z0(z,v,O)}Z.memoizedState=O;var ie={value:O,getSnapshot:v};return Z.queue=ie,Fd(ga.bind(null,z,ie,g),[g]),z.flags|=2048,bf(9,Q0.bind(null,z,ie,O,v),void 0,null),O},useId:function(){var g=Eo(),v=Xr.identifierPrefix;if(kr){var O=pa,z=da;O=(z&~(1<<32-Bt(z)-1)).toString(32)+O,v=":"+v+"R"+O,O=Xl++,0<O&&(v+="H"+O.toString(32)),v+=":"}else O=xf++,v=":"+v+"r"+O.toString(32)+":";return g.memoizedState=v},unstable_isNewReconciler:!1},tm={readContext:ps,useCallback:Vd,useContext:ps,useEffect:lc,useImperativeHandle:uc,useInsertionEffect:Ar,useLayoutEffect:zd,useMemo:cc,useReducer:Sf,useRef:ev,useState:function(){return Sf(Yo)},useDebugValue:Wd,useDeferredValue:function(g){var v=Sf(Yo),O=v[0],z=v[1];return lc(function(){var Z=Bs.transition;Bs.transition={};try{z(g)}finally{Bs.transition=Z}},[g]),O},useTransition:function(){var g=Sf(Yo)[0],v=bo().memoizedState;return[g,v]},useMutableSource:X0,useSyncExternalStore:$0,useId:$l,unstable_isNewReconciler:!1},nm={readContext:ps,useCallback:Vd,useContext:ps,useEffect:lc,useImperativeHandle:uc,useInsertionEffect:Ar,useLayoutEffect:zd,useMemo:cc,useReducer:Mf,useRef:ev,useState:function(){return Mf(Yo)},useDebugValue:Wd,useDeferredValue:function(g){var v=Mf(Yo),O=v[0],z=v[1];return lc(function(){var Z=Bs.transition;Bs.transition={};try{z(g)}finally{Bs.transition=Z}},[g]),O},useTransition:function(){var g=Mf(Yo)[0],v=bo().memoizedState;return[g,v]},useMutableSource:X0,useSyncExternalStore:$0,useId:$l,unstable_isNewReconciler:!1};function rm(g,v){try{var O="",z=v;do O+=F0(z),z=z.return;while(z);var Z=O}catch(ie){Z=`
Error generating stack: `+ie.message+`
`+ie.stack}return{value:g,source:v,stack:Z}}function Gd(g,v){try{console.error(v.value)}catch(O){setTimeout(function(){throw O})}}var qx=typeof WeakMap=="function"?WeakMap:Map;function rv(g,v,O){O=ha(-1,O),O.tag=3,O.payload={element:null};var z=v.value;return O.callback=function(){yc||(yc=!0,Lr=z),Gd(g,v)},O}function jd(g,v,O){O=ha(-1,O),O.tag=3;var z=g.type.getDerivedStateFromError;if(typeof z=="function"){var Z=v.value;O.payload=function(){return z(Z)},O.callback=function(){Gd(g,v)}}var ie=g.stateNode;return ie!==null&&typeof ie.componentDidCatch=="function"&&(O.callback=function(){Gd(g,v),typeof z!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var xe=v.stack;this.componentDidCatch(v.value,{componentStack:xe!==null?xe:""})}),O}function ya(g,v,O){var z=g.pingCache;if(z===null){z=g.pingCache=new qx;var Z=new Set;z.set(v,Z)}else Z=z.get(v),Z===void 0&&(Z=new Set,z.set(v,Z));Z.has(O)||(Z.add(O),g=xm.bind(null,g,v,O),v.then(g,g))}function im(g){do{var v;if((v=g.tag===13)&&(v=g.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return g;g=g.return}while(g!==null);return null}function Zl(g,v,O,z,Z){return(g.mode&1)===0?(g===v?g.flags|=65536:(g.flags|=128,O.flags|=131072,O.flags&=-52805,O.tag===1&&(O.alternate===null?O.tag=17:(v=ha(-1,1),v.tag=2,Qa(O,v))),O.lanes|=1),g):(g.flags|=65536,g.lanes=Z,g)}function ci(g){g.flags|=4}function hc(g,v){if(g!==null&&g.child===v.child)return!0;if((v.flags&16)!==0)return!1;for(g=v.child;g!==null;){if((g.flags&12854)!==0||(g.subtreeFlags&12854)!==0)return!1;g=g.sibling}return!0}var Us,Ql,qd,Kd;if(Ze)Us=function(g,v){for(var O=v.child;O!==null;){if(O.tag===5||O.tag===6)u(g,O.stateNode);else if(O.tag!==4&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===v)break;for(;O.sibling===null;){if(O.return===null||O.return===v)return;O=O.return}O.sibling.return=O.return,O=O.sibling}},Ql=function(){},qd=function(g,v,O,z,Z){if(g=g.memoizedProps,g!==z){var ie=v.stateNode,xe=Mo(ms.current);O=W(ie,O,g,z,Z,xe),(v.updateQueue=O)&&ci(v)}},Kd=function(g,v,O,z){O!==z&&ci(v)};else if(Pe){Us=function(g,v,O,z){for(var Z=v.child;Z!==null;){if(Z.tag===5){var ie=Z.stateNode;O&&z&&(ie=ae(ie,Z.type,Z.memoizedProps,Z)),u(g,ie)}else if(Z.tag===6)ie=Z.stateNode,O&&z&&(ie=J(ie,Z.memoizedProps,Z)),u(g,ie);else if(Z.tag!==4){if(Z.tag===22&&Z.memoizedState!==null)ie=Z.child,ie!==null&&(ie.return=Z),Us(g,Z,!0,!0);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}}if(Z===v)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===v)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}};var il=function(g,v,O,z){for(var Z=v.child;Z!==null;){if(Z.tag===5){var ie=Z.stateNode;O&&z&&(ie=ae(ie,Z.type,Z.memoizedProps,Z)),gt(g,ie)}else if(Z.tag===6)ie=Z.stateNode,O&&z&&(ie=J(ie,Z.memoizedProps,Z)),gt(g,ie);else if(Z.tag!==4){if(Z.tag===22&&Z.memoizedState!==null)ie=Z.child,ie!==null&&(ie.return=Z),il(g,Z,!0,!0);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}}if(Z===v)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===v)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}};Ql=function(g,v){var O=v.stateNode;if(!hc(g,v)){g=O.containerInfo;var z=ct(g);il(z,v,!1,!1),O.pendingChildren=z,ci(v),Sn(g,z)}},qd=function(g,v,O,z,Z){var ie=g.stateNode,xe=g.memoizedProps;if((g=hc(g,v))&&xe===z)v.stateNode=ie;else{var We=v.stateNode,dt=Mo(ms.current),zt=null;xe!==z&&(zt=W(We,O,xe,z,Z,dt)),g&&zt===null?v.stateNode=ie:(ie=Rt(ie,zt,O,xe,z,v,g,We),S(ie,O,z,Z,dt)&&ci(v),v.stateNode=ie,g?ci(v):Us(ie,v,!1,!1))}},Kd=function(g,v,O,z){O!==z?(g=Mo(ql.current),O=Mo(ms.current),v.stateNode=se(z,g,O,v),ci(v)):v.stateNode=g.stateNode}}else Ql=function(){},qd=function(){},Kd=function(){};function va(g,v){if(!kr)switch(g.tailMode){case"hidden":v=g.tail;for(var O=null;v!==null;)v.alternate!==null&&(O=v),v=v.sibling;O===null?g.tail=null:O.sibling=null;break;case"collapsed":O=g.tail;for(var z=null;O!==null;)O.alternate!==null&&(z=O),O=O.sibling;z===null?v||g.tail===null?g.tail=null:g.tail.sibling=null:z.sibling=null}}function Yr(g){var v=g.alternate!==null&&g.alternate.child===g.child,O=0,z=0;if(v)for(var Z=g.child;Z!==null;)O|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags&14680064,z|=Z.flags&14680064,Z.return=g,Z=Z.sibling;else for(Z=g.child;Z!==null;)O|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags,z|=Z.flags,Z.return=g,Z=Z.sibling;return g.subtreeFlags|=z,g.childLanes=O,v}function Yd(g,v,O){var z=v.pendingProps;switch(j0(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(v),null;case 1:return ir(v.type)&&Kt(),Yr(v),null;case 3:return z=v.stateNode,oc(),un(On),un(Mn),Kl(),z.pendingContext&&(z.context=z.pendingContext,z.pendingContext=null),(g===null||g.child===null)&&(wf(v)?ci(v):g===null||g.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,so!==null&&(Wf(so),so=null))),Ql(g,v),Yr(v),null;case 5:Y0(v),O=Mo(ql.current);var Z=v.type;if(g!==null&&v.stateNode!=null)qd(g,v,Z,z,O),g.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!z){if(v.stateNode===null)throw Error(o(166));return Yr(v),null}if(g=Mo(ms.current),wf(v)){if(!ge)throw Error(o(175));g=Lt(v.stateNode,v.type,v.memoizedProps,O,g,v,!tc),v.updateQueue=g,g!==null&&ci(v)}else{var ie=y(Z,z,O,g,v);Us(ie,v,!1,!1),v.stateNode=ie,S(ie,Z,z,O,g)&&ci(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return Yr(v),null;case 6:if(g&&v.stateNode!=null)Kd(g,v,g.memoizedProps,z);else{if(typeof z!="string"&&v.stateNode===null)throw Error(o(166));if(g=Mo(ql.current),O=Mo(ms.current),wf(v)){if(!ge)throw Error(o(176));if(g=v.stateNode,z=v.memoizedProps,(O=Nr(g,z,v,!tc))&&(Z=ts,Z!==null))switch(ie=(Z.mode&1)!==0,Z.tag){case 3:At(Z.stateNode.containerInfo,g,z,ie);break;case 5:Ft(Z.type,Z.memoizedProps,Z.stateNode,g,z,ie)}O&&ci(v)}else v.stateNode=se(z,g,O,v)}return Yr(v),null;case 13:if(un(zr),z=v.memoizedState,kr&&Pi!==null&&(v.mode&1)!==0&&(v.flags&128)===0){for(g=Pi;g;)g=mt(g);return nc(),v.flags|=98560,v}if(z!==null&&z.dehydrated!==null){if(z=wf(v),g===null){if(!z)throw Error(o(318));if(!ge)throw Error(o(344));if(g=v.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Ot(g,v)}else nc(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;return Yr(v),null}return so!==null&&(Wf(so),so=null),(v.flags&128)!==0?(v.lanes=O,v):(z=z!==null,O=!1,g===null?wf(v):O=g.memoizedState!==null,z&&!O&&(v.child.flags|=8192,(v.mode&1)!==0&&(g===null||(zr.current&1)!==0?jr===0&&(jr=3):tp())),v.updateQueue!==null&&(v.flags|=4),Yr(v),null);case 4:return oc(),Ql(g,v),g===null&&je(v.stateNode.containerInfo),Yr(v),null;case 10:return vf(v.type._context),Yr(v),null;case 17:return ir(v.type)&&Kt(),Yr(v),null;case 19:if(un(zr),Z=v.memoizedState,Z===null)return Yr(v),null;if(z=(v.flags&128)!==0,ie=Z.rendering,ie===null)if(z)va(Z,!1);else{if(jr!==0||g!==null&&(g.flags&128)!==0)for(g=v.child;g!==null;){if(ie=kd(g),ie!==null){for(v.flags|=128,va(Z,!1),g=ie.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),v.subtreeFlags=0,g=O,z=v.child;z!==null;)O=z,Z=g,O.flags&=14680066,ie=O.alternate,ie===null?(O.childLanes=0,O.lanes=Z,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=ie.childLanes,O.lanes=ie.lanes,O.child=ie.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=ie.memoizedProps,O.memoizedState=ie.memoizedState,O.updateQueue=ie.updateQueue,O.type=ie.type,Z=ie.dependencies,O.dependencies=Z===null?null:{lanes:Z.lanes,firstContext:Z.firstContext}),z=z.sibling;return $t(zr,zr.current&1|2),v.child}g=g.sibling}Z.tail!==null&&ui()>al&&(v.flags|=128,z=!0,va(Z,!1),v.lanes=4194304)}else{if(!z)if(g=kd(ie),g!==null){if(v.flags|=128,z=!0,g=g.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),va(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ie.alternate&&!kr)return Yr(v),null}else 2*ui()-Z.renderingStartTime>al&&O!==1073741824&&(v.flags|=128,z=!0,va(Z,!1),v.lanes=4194304);Z.isBackwards?(ie.sibling=v.child,v.child=ie):(g=Z.last,g!==null?g.sibling=ie:v.child=ie,Z.last=ie)}return Z.tail!==null?(v=Z.tail,Z.rendering=v,Z.tail=v.sibling,Z.renderingStartTime=ui(),v.sibling=null,g=zr.current,$t(zr,z?g&1|2:g&1),v):(Yr(v),null);case 22:case 23:return Vf(),z=v.memoizedState!==null,g!==null&&g.memoizedState!==null!==z&&(v.flags|=8192),z&&(v.mode&1)!==0?(Hi&1073741824)!==0&&(Yr(v),Ze&&v.subtreeFlags&6&&(v.flags|=8192)):Yr(v),null;case 24:return null;case 25:return null}throw Error(o(156,v.tag))}var sm=l.ReactCurrentOwner,xi=!1;function Gr(g,v,O,z){v.child=g===null?Qy(v,null,O,z):ma(v,g.child,O,z)}function Tr(g,v,O,z,Z){O=O.render;var ie=v.ref;return Qu(v,Z),z=ac(g,v,O,z,ie,Z),O=nl(),g!==null&&!xi?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~Z,gs(g,v,Z)):(kr&&O&&G0(v),v.flags|=1,Gr(g,v,z,Z),v.child)}function Sr(g,v,O,z,Z){if(g===null){var ie=O.type;return typeof ie=="function"&&!rp(ie)&&ie.defaultProps===void 0&&O.compare===null&&O.defaultProps===void 0?(v.tag=15,v.type=ie,wa(g,v,ie,z,Z)):(g=ip(O.type,null,z,v,v.mode,Z),g.ref=v.ref,g.return=v,v.child=g)}if(ie=g.child,(g.lanes&Z)===0){var xe=ie.memoizedProps;if(O=O.compare,O=O!==null?O:So,O(xe,z)&&g.ref===v.ref)return gs(g,v,Z)}return v.flags|=1,g=Ra(ie,z),g.ref=v.ref,g.return=v,v.child=g}function wa(g,v,O,z,Z){if(g!==null&&So(g.memoizedProps,z)&&g.ref===v.ref)if(xi=!1,(g.lanes&Z)!==0)(g.flags&131072)!==0&&(xi=!0);else return v.lanes=g.lanes,gs(g,v,Z);return _a(g,v,O,z,Z)}function Li(g,v,O){var z=v.pendingProps,Z=z.children,ie=g!==null?g.memoizedState:null;if(z.mode==="hidden")if((v.mode&1)===0)v.memoizedState={baseLanes:0,cachePool:null},$t(au,Hi),Hi|=O;else if((O&1073741824)!==0)v.memoizedState={baseLanes:0,cachePool:null},z=ie!==null?ie.baseLanes:O,$t(au,Hi),Hi|=z;else return g=ie!==null?ie.baseLanes|O:O,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:g,cachePool:null},v.updateQueue=null,$t(au,Hi),Hi|=g,null;else ie!==null?(z=ie.baseLanes|O,v.memoizedState=null):z=O,$t(au,Hi),Hi|=z;return Gr(g,v,Z,O),v.child}function ns(g,v){var O=v.ref;(g===null&&O!==null||g!==null&&g.ref!==O)&&(v.flags|=512,v.flags|=2097152)}function _a(g,v,O,z,Z){var ie=ir(O)?Fr:Mn.current;return ie=yi(v,ie),Qu(v,Z),O=ac(g,v,O,z,ie,Z),z=nl(),g!==null&&!xi?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~Z,gs(g,v,Z)):(kr&&z&&G0(v),v.flags|=1,Gr(g,v,O,Z),v.child)}function Jl(g,v,O,z,Z){if(ir(O)){var ie=!0;Fe(v)}else ie=!1;if(Qu(v,Z),v.stateNode===null)g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),Ky(v,O,z),H0(v,O,z,Z),z=!0;else if(g===null){var xe=v.stateNode,We=v.memoizedProps;xe.props=We;var dt=xe.context,zt=O.contextType;typeof zt=="object"&&zt!==null?zt=ps(zt):(zt=ir(O)?Fr:Mn.current,zt=yi(v,zt));var fn=O.getDerivedStateFromProps,Un=typeof fn=="function"||typeof xe.getSnapshotBeforeUpdate=="function";Un||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(We!==z||dt!==zt)&&Yy(v,xe,z,zt),ro=!1;var bn=v.memoizedState;xe.state=bn,Td(v,z,xe,Z),dt=v.memoizedState,We!==z||bn!==dt||On.current||ro?(typeof fn=="function"&&(W0(v,O,fn,z),dt=v.memoizedState),(We=ro||V0(v,O,We,z,bn,dt,zt))?(Un||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(v.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=z,v.memoizedState=dt),xe.props=z,xe.state=dt,xe.context=zt,z=We):(typeof xe.componentDidMount=="function"&&(v.flags|=4194308),z=!1)}else{xe=v.stateNode,z0(g,v),We=v.memoizedProps,zt=v.type===v.elementType?We:ds(v.type,We),xe.props=zt,Un=v.pendingProps,bn=xe.context,dt=O.contextType,typeof dt=="object"&&dt!==null?dt=ps(dt):(dt=ir(O)?Fr:Mn.current,dt=yi(v,dt));var Gn=O.getDerivedStateFromProps;(fn=typeof Gn=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(We!==Un||bn!==dt)&&Yy(v,xe,z,dt),ro=!1,bn=v.memoizedState,xe.state=bn,Td(v,z,xe,Z);var rn=v.memoizedState;We!==Un||bn!==rn||On.current||ro?(typeof Gn=="function"&&(W0(v,O,Gn,z),rn=v.memoizedState),(zt=ro||V0(v,O,zt,z,bn,rn,dt)||!1)?(fn||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(z,rn,dt),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(z,rn,dt)),typeof xe.componentDidUpdate=="function"&&(v.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof xe.componentDidUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(v.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(v.flags|=1024),v.memoizedProps=z,v.memoizedState=rn),xe.props=z,xe.state=rn,xe.context=dt,z=zt):(typeof xe.componentDidUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(v.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(v.flags|=1024),z=!1)}return Vi(g,v,O,z,ie,Z)}function Vi(g,v,O,z,Z,ie){ns(g,v);var xe=(v.flags&128)!==0;if(!z&&!xe)return Z&&xt(v,O,!1),gs(g,v,ie);z=v.stateNode,sm.current=v;var We=xe&&typeof O.getDerivedStateFromError!="function"?null:z.render();return v.flags|=1,g!==null&&xe?(v.child=ma(v,g.child,null,ie),v.child=ma(v,null,We,ie)):Gr(g,v,We,ie),v.memoizedState=z.state,Z&&xt(v,O,!0),v.child}function Cf(g){var v=g.stateNode;v.pendingContext?pt(g,v.pendingContext,v.pendingContext!==v.context):v.context&&pt(g,v.context,!1),Ld(g,v.containerInfo)}function om(g,v,O,z,Z){return nc(),Pd(Z),v.flags|=256,Gr(g,v,O,z),v.child}var If={dehydrated:null,treeContext:null,retryLane:0};function eu(g){return{baseLanes:g,cachePool:null}}function am(g,v,O){var z=v.pendingProps,Z=zr.current,ie=!1,xe=(v.flags&128)!==0,We;if((We=xe)||(We=g!==null&&g.memoizedState===null?!1:(Z&2)!==0),We?(ie=!0,v.flags&=-129):(g===null||g.memoizedState!==null)&&(Z|=1),$t(zr,Z&1),g===null)return el(v),g=v.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((v.mode&1)===0?v.lanes=1:Ne(g)?v.lanes=8:v.lanes=1073741824,null):(Z=z.children,g=z.fallback,ie?(z=v.mode,ie=v.child,Z={mode:"hidden",children:Z},(z&1)===0&&ie!==null?(ie.childLanes=0,ie.pendingProps=Z):ie=jf(Z,z,0,null),g=hu(g,z,O,null),ie.return=v,g.return=v,ie.sibling=g,v.child=ie,v.child.memoizedState=eu(O),v.memoizedState=If,g):Ao(v,Z));if(Z=g.memoizedState,Z!==null){if(We=Z.dehydrated,We!==null){if(xe)return v.flags&256?(v.flags&=-257,Pf(g,v,O,Error(o(422)))):v.memoizedState!==null?(v.child=g.child,v.flags|=128,null):(ie=z.fallback,Z=v.mode,z=jf({mode:"visible",children:z.children},Z,0,null),ie=hu(ie,Z,O,null),ie.flags|=2,z.return=v,ie.return=v,z.sibling=ie,v.child=z,(v.mode&1)!==0&&ma(v,g.child,null,O),v.child.memoizedState=eu(O),v.memoizedState=If,ie);if((v.mode&1)===0)v=Pf(g,v,O,null);else if(Ne(We))v=Pf(g,v,O,Error(o(419)));else if(z=(O&g.childLanes)!==0,xi||z){if(z=Xr,z!==null){switch(O&-O){case 4:ie=2;break;case 16:ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ie=32;break;case 536870912:ie=268435456;break;default:ie=0}z=(ie&(z.suspendedLanes|O))!==0?0:ie,z!==0&&z!==Z.retryLane&&(Z.retryLane=z,Gi(g,z,-1))}tp(),v=Pf(g,v,O,Error(o(421)))}else Ae(We)?(v.flags|=128,v.child=g.child,v=lv.bind(null,g),dn(We,v),v=null):(O=Z.treeContext,ge&&(Pi=vt(We),ts=v,kr=!0,so=null,tc=!1,O!==null&&(io[Os++]=da,io[Os++]=pa,io[Os++]=Hl,da=O.id,pa=O.overflow,Hl=v)),v=Ao(v,v.pendingProps.children),v.flags|=4096);return v}return ie?(z=Xd(g,v,z.children,z.fallback,O),ie=v.child,Z=g.child.memoizedState,ie.memoizedState=Z===null?eu(O):{baseLanes:Z.baseLanes|O,cachePool:null},ie.childLanes=g.childLanes&~O,v.memoizedState=If,z):(O=Nf(g,v,z.children,O),v.memoizedState=null,O)}return ie?(z=Xd(g,v,z.children,z.fallback,O),ie=v.child,Z=g.child.memoizedState,ie.memoizedState=Z===null?eu(O):{baseLanes:Z.baseLanes|O,cachePool:null},ie.childLanes=g.childLanes&~O,v.memoizedState=If,z):(O=Nf(g,v,z.children,O),v.memoizedState=null,O)}function Ao(g,v){return v=jf({mode:"visible",children:v},g.mode,0,null),v.return=g,g.child=v}function Nf(g,v,O,z){var Z=g.child;return g=Z.sibling,O=Ra(Z,{mode:"visible",children:O}),(v.mode&1)===0&&(O.lanes=z),O.return=v,O.sibling=null,g!==null&&(z=v.deletions,z===null?(v.deletions=[g],v.flags|=16):z.push(g)),v.child=O}function Xd(g,v,O,z,Z){var ie=v.mode;g=g.child;var xe=g.sibling,We={mode:"hidden",children:O};return(ie&1)===0&&v.child!==g?(O=v.child,O.childLanes=0,O.pendingProps=We,v.deletions=null):(O=Ra(g,We),O.subtreeFlags=g.subtreeFlags&14680064),xe!==null?z=Ra(xe,z):(z=hu(z,ie,Z,null),z.flags|=2),z.return=v,O.return=v,O.sibling=z,v.child=O,z}function Pf(g,v,O,z){return z!==null&&Pd(z),ma(v,g.child,null,O),g=Ao(v,v.pendingProps.children),g.flags|=2,v.memoizedState=null,g}function iv(g,v,O){g.lanes|=v;var z=g.alternate;z!==null&&(z.lanes|=v),Vl(g.return,v,O)}function Xo(g,v,O,z,Z){var ie=g.memoizedState;ie===null?g.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:z,tail:O,tailMode:Z}:(ie.isBackwards=v,ie.rendering=null,ie.renderingStartTime=0,ie.last=z,ie.tail=O,ie.tailMode=Z)}function tu(g,v,O){var z=v.pendingProps,Z=z.revealOrder,ie=z.tail;if(Gr(g,v,z.children,O),z=zr.current,(z&2)!==0)z=z&1|2,v.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=v.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&iv(g,O,v);else if(g.tag===19)iv(g,O,v);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===v)break e;for(;g.sibling===null;){if(g.return===null||g.return===v)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}z&=1}if($t(zr,z),(v.mode&1)===0)v.memoizedState=null;else switch(Z){case"forwards":for(O=v.child,Z=null;O!==null;)g=O.alternate,g!==null&&kd(g)===null&&(Z=O),O=O.sibling;O=Z,O===null?(Z=v.child,v.child=null):(Z=O.sibling,O.sibling=null),Xo(v,!1,Z,O,ie);break;case"backwards":for(O=null,Z=v.child,v.child=null;Z!==null;){if(g=Z.alternate,g!==null&&kd(g)===null){v.child=Z;break}g=Z.sibling,Z.sibling=O,O=Z,Z=g}Xo(v,!0,O,null,ie);break;case"together":Xo(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function gs(g,v,O){if(g!==null&&(v.dependencies=g.dependencies),$o|=v.lanes,(O&v.childLanes)===0)return null;if(g!==null&&v.child!==g.child)throw Error(o(153));if(v.child!==null){for(g=v.child,O=Ra(g,g.pendingProps),v.child=O,O.return=v;g.sibling!==null;)g=g.sibling,O=O.sibling=Ra(g,g.pendingProps),O.return=v;O.sibling=null}return v.child}function $d(g,v,O){switch(v.tag){case 3:Cf(v),nc();break;case 5:Jy(v);break;case 1:ir(v.type)&&Fe(v);break;case 4:Ld(v,v.stateNode.containerInfo);break;case 10:Wl(v,v.type._context,v.memoizedProps.value);break;case 13:var z=v.memoizedState;if(z!==null)return z.dehydrated!==null?($t(zr,zr.current&1),v.flags|=128,null):(O&v.child.childLanes)!==0?am(g,v,O):($t(zr,zr.current&1),g=gs(g,v,O),g!==null?g.sibling:null);$t(zr,zr.current&1);break;case 19:if(z=(O&v.childLanes)!==0,(g.flags&128)!==0){if(z)return tu(g,v,O);v.flags|=128}var Z=v.memoizedState;if(Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),$t(zr,zr.current),z)break;return null;case 22:case 23:return v.lanes=0,Li(g,v,O)}return gs(g,v,O)}function Zd(g,v){switch(j0(v),v.tag){case 1:return ir(v.type)&&Kt(),g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 3:return oc(),un(On),un(Mn),Kl(),g=v.flags,(g&65536)!==0&&(g&128)===0?(v.flags=g&-65537|128,v):null;case 5:return Y0(v),null;case 13:if(un(zr),g=v.memoizedState,g!==null&&g.dehydrated!==null){if(v.alternate===null)throw Error(o(340));nc()}return g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 19:return un(zr),null;case 4:return oc(),null;case 10:return vf(v.type._context),null;case 22:case 23:return Vf(),null;case 24:return null;default:return null}}var rs=!1,Si=!1,nu=typeof WeakSet=="function"?WeakSet:Set,jt=null;function oo(g,v){var O=g.ref;if(O!==null)if(typeof O=="function")try{O(null)}catch(z){ss(g,v,z)}else O.current=null}function xa(g,v,O){try{O()}catch(z){ss(g,v,z)}}var lm=!1;function um(g,v){for(P(g.containerInfo),jt=v;jt!==null;)if(g=jt,v=g.child,(g.subtreeFlags&1028)!==0&&v!==null)v.return=g,jt=v;else for(;jt!==null;){g=jt;try{var O=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var z=O.memoizedProps,Z=O.memoizedState,ie=g.stateNode,xe=ie.getSnapshotBeforeUpdate(g.elementType===g.type?z:ds(g.type,z),Z);ie.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:Ze&&qe(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(We){ss(g,g.return,We)}if(v=g.sibling,v!==null){v.return=g.return,jt=v;break}jt=g.return}return O=lm,lm=!1,O}function Sa(g,v,O){var z=v.updateQueue;if(z=z!==null?z.lastEffect:null,z!==null){var Z=z=z.next;do{if((Z.tag&g)===g){var ie=Z.destroy;Z.destroy=void 0,ie!==void 0&&xa(v,O,ie)}Z=Z.next}while(Z!==z)}}function ki(g,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var O=v=v.next;do{if((O.tag&g)===g){var z=O.create;O.destroy=z()}O=O.next}while(O!==v)}}function is(g){var v=g.ref;if(v!==null){var O=g.stateNode;switch(g.tag){case 5:g=M(O);break;default:g=O}typeof v=="function"?v(g):v.current=g}}function Pr(g,v,O){if(qo&&typeof qo.onCommitFiberUnmount=="function")try{qo.onCommitFiberUnmount(pf,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(g=v.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var z=g=g.next;do{var Z=z,ie=Z.destroy;Z=Z.tag,ie!==void 0&&((Z&2)!==0||(Z&4)!==0)&&xa(v,O,ie),z=z.next}while(z!==g)}break;case 1:if(oo(v,O),g=v.stateNode,typeof g.componentWillUnmount=="function")try{g.props=v.memoizedProps,g.state=v.memoizedState,g.componentWillUnmount()}catch(xe){ss(v,O,xe)}break;case 5:oo(v,O);break;case 4:Ze?hm(g,v,O):Pe&&Pe&&(v=v.stateNode.containerInfo,O=ct(v),ht(v,O))}}function ao(g,v,O){for(var z=v;;)if(Pr(g,z,O),z.child===null||Ze&&z.tag===4){if(z===v)break;for(;z.sibling===null;){if(z.return===null||z.return===v)return;z=z.return}z.sibling.return=z.return,z=z.sibling}else z.child.return=z,z=z.child}function cm(g){var v=g.alternate;v!==null&&(g.alternate=null,cm(v)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(v=g.stateNode,v!==null&&He(v)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function fm(g){return g.tag===5||g.tag===3||g.tag===4}function Qd(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||fm(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Jd(g){if(Ze){e:{for(var v=g.return;v!==null;){if(fm(v))break e;v=v.return}throw Error(o(160))}var O=v;switch(O.tag){case 5:v=O.stateNode,O.flags&32&&(Xe(v),O.flags&=-33),O=Qd(g),dc(g,O,v);break;case 3:case 4:v=O.stateNode.containerInfo,O=Qd(g),ep(g,O,v);break;default:throw Error(o(161))}}}function ep(g,v,O){var z=g.tag;if(z===5||z===6)g=g.stateNode,v?ve(O,g,v):ut(O,g);else if(z!==4&&(g=g.child,g!==null))for(ep(g,v,O),g=g.sibling;g!==null;)ep(g,v,O),g=g.sibling}function dc(g,v,O){var z=g.tag;if(z===5||z===6)g=g.stateNode,v?ue(O,g,v):Et(O,g);else if(z!==4&&(g=g.child,g!==null))for(dc(g,v,O),g=g.sibling;g!==null;)dc(g,v,O),g=g.sibling}function hm(g,v,O){for(var z=v,Z=!1,ie,xe;;){if(!Z){Z=z.return;e:for(;;){if(Z===null)throw Error(o(160));switch(ie=Z.stateNode,Z.tag){case 5:xe=!1;break e;case 3:ie=ie.containerInfo,xe=!0;break e;case 4:ie=ie.containerInfo,xe=!0;break e}Z=Z.return}Z=!0}if(z.tag===5||z.tag===6)ao(g,z,O),xe?le(ie,z.stateNode):ye(ie,z.stateNode);else if(z.tag===18)xe?Qe(ie,z.stateNode):$e(ie,z.stateNode);else if(z.tag===4){if(z.child!==null){ie=z.stateNode.containerInfo,xe=!0,z.child.return=z,z=z.child;continue}}else if(Pr(g,z,O),z.child!==null){z.child.return=z,z=z.child;continue}if(z===v)break;for(;z.sibling===null;){if(z.return===null||z.return===v)return;z=z.return,z.tag===4&&(Z=!1)}z.sibling.return=z.return,z=z.sibling}}function sl(g,v){if(Ze){switch(v.tag){case 0:case 11:case 14:case 15:Sa(3,v,v.return),ki(3,v),Sa(5,v,v.return);return;case 1:return;case 5:var O=v.stateNode;if(O!=null){var z=v.memoizedProps;g=g!==null?g.memoizedProps:z;var Z=v.type,ie=v.updateQueue;v.updateQueue=null,ie!==null&&q(O,ie,Z,g,z,v)}return;case 6:if(v.stateNode===null)throw Error(o(162));O=v.memoizedProps,re(v.stateNode,g!==null?g.memoizedProps:O,O);return;case 3:ge&&g!==null&&g.memoizedState.isDehydrated&&pe(v.stateNode.containerInfo);return;case 12:return;case 13:pc(v);return;case 19:pc(v);return;case 17:return}throw Error(o(163))}switch(v.tag){case 0:case 11:case 14:case 15:Sa(3,v,v.return),ki(3,v),Sa(5,v,v.return);return;case 12:return;case 13:pc(v);return;case 19:pc(v);return;case 3:ge&&g!==null&&g.memoizedState.isDehydrated&&pe(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(Pe){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,ht(v.containerInfo,v.pendingChildren);break e}throw Error(o(163))}}function pc(g){var v=g.updateQueue;if(v!==null){g.updateQueue=null;var O=g.stateNode;O===null&&(O=g.stateNode=new nu),v.forEach(function(z){var Z=uv.bind(null,g,z);O.has(z)||(O.add(z),z.then(Z,Z))})}}function Kx(g,v){for(jt=v;jt!==null;){v=jt;var O=v.deletions;if(O!==null)for(var z=0;z<O.length;z++){var Z=O[z];try{var ie=g;Ze?hm(ie,Z,v):ao(ie,Z,v);var xe=Z.alternate;xe!==null&&(xe.return=null),Z.return=null}catch(yn){ss(Z,v,yn)}}if(O=v.child,(v.subtreeFlags&12854)!==0&&O!==null)O.return=v,jt=O;else for(;jt!==null;){v=jt;try{var We=v.flags;if(We&32&&Ze&&Xe(v.stateNode),We&512){var dt=v.alternate;if(dt!==null){var zt=dt.ref;zt!==null&&(typeof zt=="function"?zt(null):zt.current=null)}}if(We&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var fn=v.alternate;(fn===null||fn.memoizedState===null)&&(Ff=ui())}break;case 22:var Un=v.memoizedState!==null,bn=v.alternate,Gn=bn!==null&&bn.memoizedState!==null;if(O=v,Ze){e:if(z=O,Z=Un,ie=null,Ze)for(var rn=z;;){if(rn.tag===5){if(ie===null){ie=rn;var Bi=rn.stateNode;Z?de(Bi):Ue(rn.stateNode,rn.memoizedProps)}}else if(rn.tag===6){if(ie===null){var Hs=rn.stateNode;Z?Re(Hs):Me(Hs,rn.memoizedProps)}}else if((rn.tag!==22&&rn.tag!==23||rn.memoizedState===null||rn===z)&&rn.child!==null){rn.child.return=rn,rn=rn.child;continue}if(rn===z)break;for(;rn.sibling===null;){if(rn.return===null||rn.return===z)break e;ie===rn&&(ie=null),rn=rn.return}ie===rn&&(ie=null),rn.sibling.return=rn.return,rn=rn.sibling}}if(Un&&!Gn&&(O.mode&1)!==0){jt=O;for(var st=O.child;st!==null;){for(O=jt=st;jt!==null;){z=jt;var Ke=z.child;switch(z.tag){case 0:case 11:case 14:case 15:Sa(4,z,z.return);break;case 1:oo(z,z.return);var ft=z.stateNode;if(typeof ft.componentWillUnmount=="function"){var Qt=z.return;try{ft.props=z.memoizedProps,ft.state=z.memoizedState,ft.componentWillUnmount()}catch(yn){ss(z,Qt,yn)}}break;case 5:oo(z,z.return);break;case 22:if(z.memoizedState!==null){pm(O);continue}}Ke!==null?(Ke.return=z,jt=Ke):pm(O)}st=st.sibling}}}switch(We&4102){case 2:Jd(v),v.flags&=-3;break;case 6:Jd(v),v.flags&=-3,sl(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,sl(v.alternate,v);break;case 4:sl(v.alternate,v)}}catch(yn){ss(v,v.return,yn)}if(O=v.sibling,O!==null){O.return=v.return,jt=O;break}jt=v.return}}}function Lf(g,v,O){jt=g,kf(g)}function kf(g,v,O){for(var z=(g.mode&1)!==0;jt!==null;){var Z=jt,ie=Z.child;if(Z.tag===22&&z){var xe=Z.memoizedState!==null||rs;if(!xe){var We=Z.alternate,dt=We!==null&&We.memoizedState!==null||Si;We=rs;var zt=Si;if(rs=xe,(Si=dt)&&!zt)for(jt=Z;jt!==null;)xe=jt,dt=xe.child,xe.tag===22&&xe.memoizedState!==null?ru(Z):dt!==null?(dt.return=xe,jt=dt):ru(Z);for(;ie!==null;)jt=ie,kf(ie),ie=ie.sibling;jt=Z,rs=We,Si=zt}dm(g)}else(Z.subtreeFlags&8772)!==0&&ie!==null?(ie.return=Z,jt=ie):dm(g)}}function dm(g){for(;jt!==null;){var v=jt;if((v.flags&8772)!==0){var O=v.alternate;try{if((v.flags&8772)!==0)switch(v.tag){case 0:case 11:case 15:Si||ki(5,v);break;case 1:var z=v.stateNode;if(v.flags&4&&!Si)if(O===null)z.componentDidMount();else{var Z=v.elementType===v.type?O.memoizedProps:ds(v.type,O.memoizedProps);z.componentDidUpdate(Z,O.memoizedState,z.__reactInternalSnapshotBeforeUpdate)}var ie=v.updateQueue;ie!==null&&jy(v,ie,z);break;case 3:var xe=v.updateQueue;if(xe!==null){if(O=null,v.child!==null)switch(v.child.tag){case 5:O=M(v.child.stateNode);break;case 1:O=v.child.stateNode}jy(v,xe,O)}break;case 5:var We=v.stateNode;O===null&&v.flags&4&&j(We,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(ge&&v.memoizedState===null){var dt=v.alternate;if(dt!==null){var zt=dt.memoizedState;if(zt!==null){var fn=zt.dehydrated;fn!==null&&De(fn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Si||v.flags&512&&is(v)}catch(Un){ss(v,v.return,Un)}}if(v===g){jt=null;break}if(O=v.sibling,O!==null){O.return=v.return,jt=O;break}jt=v.return}}function pm(g){for(;jt!==null;){var v=jt;if(v===g){jt=null;break}var O=v.sibling;if(O!==null){O.return=v.return,jt=O;break}jt=v.return}}function ru(g){for(;jt!==null;){var v=jt;try{switch(v.tag){case 0:case 11:case 15:var O=v.return;try{ki(4,v)}catch(dt){ss(v,O,dt)}break;case 1:var z=v.stateNode;if(typeof z.componentDidMount=="function"){var Z=v.return;try{z.componentDidMount()}catch(dt){ss(v,Z,dt)}}var ie=v.return;try{is(v)}catch(dt){ss(v,ie,dt)}break;case 5:var xe=v.return;try{is(v)}catch(dt){ss(v,xe,dt)}}}catch(dt){ss(v,v.return,dt)}if(v===g){jt=null;break}var We=v.sibling;if(We!==null){We.return=v.return,jt=We;break}jt=v.return}}var Of=0,iu=1,su=2,Ma=3,mc=4;if(typeof Symbol=="function"&&Symbol.for){var ou=Symbol.for;Of=ou("selector.component"),iu=ou("selector.has_pseudo_class"),su=ou("selector.role"),Ma=ou("selector.test_id"),mc=ou("selector.text")}function Df(g){var v=Ge(g);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(o(364));return v}if(g=oe(g),g===null)throw Error(o(362));return g.stateNode.current}function Bf(g,v){switch(v.$$typeof){case Of:if(g.type===v.value)return!0;break;case iu:e:{v=v.value,g=[g,0];for(var O=0;O<g.length;){var z=g[O++],Z=g[O++],ie=v[Z];if(z.tag!==5||!Le(z)){for(;ie!=null&&Bf(z,ie);)Z++,ie=v[Z];if(Z===v.length){v=!0;break e}else for(z=z.child;z!==null;)g.push(z,Z),z=z.sibling}}v=!1}return v;case su:if(g.tag===5&&ot(g.stateNode,v.value))return!0;break;case mc:if((g.tag===5||g.tag===6)&&(g=Te(g),g!==null&&0<=g.indexOf(v.value)))return!0;break;case Ma:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ol(g){switch(g.$$typeof){case Of:return"<"+(Y(g.value)||"Unknown")+">";case iu:return":has("+(ol(g)||"")+")";case su:return'[role="'+g.value+'"]';case mc:return'"'+g.value+'"';case Ma:return'[data-testname="'+g.value+'"]';default:throw Error(o(365))}}function Fs(g,v){var O=[];g=[g,0];for(var z=0;z<g.length;){var Z=g[z++],ie=g[z++],xe=v[ie];if(Z.tag!==5||!Le(Z)){for(;xe!=null&&Bf(Z,xe);)ie++,xe=v[ie];if(ie===v.length)O.push(Z);else for(Z=Z.child;Z!==null;)g.push(Z,ie),Z=Z.sibling}}return O}function Ea(g,v){if(!fe)throw Error(o(363));g=Df(g),g=Fs(g,v),v=[],g=Array.from(g);for(var O=0;O<g.length;){var z=g[O++];if(z.tag===5)Le(z)||v.push(z.stateNode);else for(z=z.child;z!==null;)g.push(z),z=z.sibling}return v}var mm=Math.ceil,Uf=l.ReactCurrentDispatcher,To=l.ReactCurrentOwner,wr=l.ReactCurrentBatchConfig,Hn=0,Xr=null,_r=null,Or=0,Hi=0,au=En(0),jr=0,gc=null,$o=0,zs=0,lu=0,ba=null,ei=null,Ff=0,al=1/0;function uu(){al=ui()+500}var yc=!1,Lr=null,Ro=null,vc=!1,Zo=null,cu=0,fu=0,Aa=null,Rr=-1,qr=0;function or(){return(Hn&6)!==0?ui():Rr!==-1?Rr:Rr=ui()}function Co(g){return(g.mode&1)===0?1:(Hn&2)!==0&&Or!==0?Or&-Or:Gy.transition!==null?(qr===0&&(g=Wn,Wn<<=1,(Wn&4194240)===0&&(Wn=64),qr=g),qr):(g=Yn,g!==0?g:yt())}function Gi(g,v,O){if(50<fu)throw fu=0,Aa=null,Error(o(185));var z=ll(g,v);return z===null?null:(Bl(z,v,O),((Hn&2)===0||z!==Xr)&&(z===Xr&&((Hn&2)===0&&(zs|=v),jr===4&&Di(z,Or)),ys(z,O),v===1&&Hn===0&&(g.mode&1)===0&&(uu(),xd&&to())),z)}function ll(g,v){g.lanes|=v;var O=g.alternate;for(O!==null&&(O.lanes|=v),O=g,g=g.return;g!==null;)g.childLanes|=v,O=g.alternate,O!==null&&(O.childLanes|=v),O=g,g=g.return;return O.tag===3?O.stateNode:null}function ys(g,v){var O=g.callbackNode;Hy(g,v);var z=Dl(g,g===Xr?Or:0);if(z===0)O!==null&&Zu(O),g.callbackNode=null,g.callbackPriority=0;else if(v=z&-z,g.callbackPriority!==v){if(O!=null&&Zu(O),v===1)g.tag===0?Md(Ws.bind(null,g)):Sd(Ws.bind(null,g)),nt?Nt(function(){Hn===0&&to()}):Ul(Fl,to),O=null;else{switch(ca(z)){case 1:O=Fl;break;case 4:O=Gx;break;case 16:O=wd;break;case 536870912:O=_d;break;default:O=wd}O=np(O,Oi.bind(null,g))}g.callbackPriority=v,g.callbackNode=O}}function Oi(g,v){if(Rr=-1,qr=0,(Hn&6)!==0)throw Error(o(327));var O=g.callbackNode;if(Qo()&&g.callbackNode!==O)return null;var z=Dl(g,g===Xr?Or:0);if(z===0)return null;if((z&30)!==0||(z&g.expiredLanes)!==0||v)v=Hf(g,z);else{v=z;var Z=Hn;Hn|=2;var ie=vm();(Xr!==g||Or!==v)&&(uu(),Ta(g,v));do try{ov();break}catch(We){ym(g,We)}while(!0);es(),Uf.current=ie,Hn=Z,_r!==null?v=0:(Xr=null,Or=0,v=jr)}if(v!==0){if(v===2&&(Z=gd(g),Z!==0&&(z=Z,v=zf(g,Z))),v===1)throw O=gc,Ta(g,0),Di(g,z),ys(g,ui()),O;if(v===6)Di(g,z);else{if(Z=g.current.alternate,(z&30)===0&&!gm(Z)&&(v=Hf(g,z),v===2&&(ie=gd(g),ie!==0&&(z=ie,v=zf(g,ie))),v===1))throw O=gc,Ta(g,0),Di(g,z),ys(g,ui()),O;switch(g.finishedWork=Z,g.finishedLanes=z,v){case 0:case 1:throw Error(o(345));case 2:Io(g,ei);break;case 3:if(Di(g,z),(z&130023424)===z&&(v=Ff+500-ui(),10<v)){if(Dl(g,0)!==0)break;if(Z=g.suspendedLanes,(Z&z)!==z){or(),g.pingedLanes|=g.suspendedLanes&Z;break}g.timeoutHandle=me(Io.bind(null,g,ei),v);break}Io(g,ei);break;case 4:if(Di(g,z),(z&4194240)===z)break;for(v=g.eventTimes,Z=-1;0<z;){var xe=31-Bt(z);ie=1<<xe,xe=v[xe],xe>Z&&(Z=xe),z&=~ie}if(z=Z,z=ui()-z,z=(120>z?120:480>z?480:1080>z?1080:1920>z?1920:3e3>z?3e3:4320>z?4320:1960*mm(z/1960))-z,10<z){g.timeoutHandle=me(Io.bind(null,g,ei),z);break}Io(g,ei);break;case 5:Io(g,ei);break;default:throw Error(o(329))}}}return ys(g,ui()),g.callbackNode===O?Oi.bind(null,g):null}function zf(g,v){var O=ba;return g.current.memoizedState.isDehydrated&&(Ta(g,v).flags|=256),g=Hf(g,v),g!==2&&(v=ei,ei=O,v!==null&&Wf(v)),g}function Wf(g){ei===null?ei=g:ei.push.apply(ei,g)}function gm(g){for(var v=g;;){if(v.flags&16384){var O=v.updateQueue;if(O!==null&&(O=O.stores,O!==null))for(var z=0;z<O.length;z++){var Z=O[z],ie=Z.getSnapshot;Z=Z.value;try{if(!Ji(ie(),Z))return!1}catch{return!1}}}if(O=v.child,v.subtreeFlags&16384&&O!==null)O.return=v,v=O;else{if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Di(g,v){for(v&=~lu,v&=~zs,g.suspendedLanes|=v,g.pingedLanes&=~v,g=g.expirationTimes;0<v;){var O=31-Bt(v),z=1<<O;g[O]=-1,v&=~z}}function Ws(g){if((Hn&6)!==0)throw Error(o(327));Qo();var v=Dl(g,0);if((v&1)===0)return ys(g,ui()),null;var O=Hf(g,v);if(g.tag!==0&&O===2){var z=gd(g);z!==0&&(v=z,O=zf(g,z))}if(O===1)throw O=gc,Ta(g,0),Di(g,v),ys(g,ui()),O;if(O===6)throw Error(o(345));return g.finishedWork=g.current.alternate,g.finishedLanes=v,Io(g,ei),ys(g,ui()),null}function wc(g){Zo!==null&&Zo.tag===0&&(Hn&6)===0&&Qo();var v=Hn;Hn|=1;var O=wr.transition,z=Yn;try{if(wr.transition=null,Yn=1,g)return g()}finally{Yn=z,wr.transition=O,Hn=v,(Hn&6)===0&&to()}}function Vf(){Hi=au.current,un(au)}function Ta(g,v){g.finishedWork=null,g.finishedLanes=0;var O=g.timeoutHandle;if(O!==be&&(g.timeoutHandle=be,_e(O)),_r!==null)for(O=_r.return;O!==null;){var z=O;switch(j0(z),z.tag){case 1:z=z.type.childContextTypes,z!=null&&Kt();break;case 3:oc(),un(On),un(Mn),Kl();break;case 5:Y0(z);break;case 4:oc();break;case 13:un(zr);break;case 19:un(zr);break;case 10:vf(z.type._context);break;case 22:case 23:Vf()}O=O.return}if(Xr=g,_r=g=Ra(g.current,null),Or=Hi=v,jr=0,gc=null,lu=zs=$o=0,ei=ba=null,no!==null){for(v=0;v<no.length;v++)if(O=no[v],z=O.interleaved,z!==null){O.interleaved=null;var Z=z.next,ie=O.pending;if(ie!==null){var xe=ie.next;ie.next=Z,z.next=xe}O.pending=z}no=null}return g}function ym(g,v){do{var O=_r;try{if(es(),_f.current=fc,Od){for(var z=Wr.memoizedState;z!==null;){var Z=z.queue;Z!==null&&(Z.pending=null),z=z.next}Od=!1}if(Yl=0,wi=vi=Wr=null,Ko=!1,Xl=0,To.current=null,O===null||O.return===null){jr=1,gc=v,_r=null;break}e:{var ie=g,xe=O.return,We=O,dt=v;if(v=Or,We.flags|=32768,dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var zt=dt,fn=We,Un=fn.tag;if((fn.mode&1)===0&&(Un===0||Un===11||Un===15)){var bn=fn.alternate;bn?(fn.updateQueue=bn.updateQueue,fn.memoizedState=bn.memoizedState,fn.lanes=bn.lanes):(fn.updateQueue=null,fn.memoizedState=null)}var Gn=im(xe);if(Gn!==null){Gn.flags&=-257,Zl(Gn,xe,We,ie,v),Gn.mode&1&&ya(ie,zt,v),v=Gn,dt=zt;var rn=v.updateQueue;if(rn===null){var Bi=new Set;Bi.add(dt),v.updateQueue=Bi}else rn.add(dt);break e}else{if((v&1)===0){ya(ie,zt,v),tp();break e}dt=Error(o(426))}}else if(kr&&We.mode&1){var Hs=im(xe);if(Hs!==null){(Hs.flags&65536)===0&&(Hs.flags|=256),Zl(Hs,xe,We,ie,v),Pd(dt);break e}}ie=dt,jr!==4&&(jr=2),ba===null?ba=[ie]:ba.push(ie),dt=rm(dt,We),We=xe;do{switch(We.tag){case 3:We.flags|=65536,v&=-v,We.lanes|=v;var st=rv(We,dt,v);Ad(We,st);break e;case 1:ie=dt;var Ke=We.type,ft=We.stateNode;if((We.flags&128)===0&&(typeof Ke.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Ro===null||!Ro.has(ft)))){We.flags|=65536,v&=-v,We.lanes|=v;var Qt=jd(We,ie,v);Ad(We,Qt);break e}}We=We.return}while(We!==null)}_m(O)}catch(yn){v=yn,_r===O&&O!==null&&(_r=O=O.return);continue}break}while(!0)}function vm(){var g=Uf.current;return Uf.current=fc,g===null?fc:g}function tp(){(jr===0||jr===3||jr===2)&&(jr=4),Xr===null||($o&268435455)===0&&(zs&268435455)===0||Di(Xr,Or)}function Hf(g,v){var O=Hn;Hn|=2;var z=vm();Xr===g&&Or===v||Ta(g,v);do try{sv();break}catch(Z){ym(g,Z)}while(!0);if(es(),Hn=O,Uf.current=z,_r!==null)throw Error(o(261));return Xr=null,Or=0,jr}function sv(){for(;_r!==null;)wm(_r)}function ov(){for(;_r!==null&&!Za();)wm(_r)}function wm(g){var v=Mm(g.alternate,g,Hi);g.memoizedProps=g.pendingProps,v===null?_m(g):_r=v,To.current=null}function _m(g){var v=g;do{var O=v.alternate;if(g=v.return,(v.flags&32768)===0){if(O=Yd(O,v,Hi),O!==null){_r=O;return}}else{if(O=Zd(O,v),O!==null){O.flags&=32767,_r=O;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{jr=6,_r=null;return}}if(v=v.sibling,v!==null){_r=v;return}_r=v=g}while(v!==null);jr===0&&(jr=5)}function Io(g,v){var O=Yn,z=wr.transition;try{wr.transition=null,Yn=1,av(g,v,O)}finally{wr.transition=z,Yn=O}return null}function av(g,v,O){do Qo();while(Zo!==null);if((Hn&6)!==0)throw Error(o(327));var z=g.finishedWork,Z=g.finishedLanes;if(z===null)return null;if(g.finishedWork=null,g.finishedLanes=0,z===g.current)throw Error(o(177));g.callbackNode=null,g.callbackPriority=0;var ie=z.lanes|z.childLanes;if(vd(g,ie),g===Xr&&(_r=Xr=null,Or=0),(z.subtreeFlags&2064)===0&&(z.flags&2064)===0||vc||(vc=!0,np(wd,function(){return Qo(),null})),ie=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||ie){ie=wr.transition,wr.transition=null;var xe=Yn;Yn=1;var We=Hn;Hn|=4,To.current=null,um(g,z),Kx(g,z),I(g.containerInfo),g.current=z,Lf(z),Hx(),Hn=We,Yn=xe,wr.transition=ie}else g.current=z;if(vc&&(vc=!1,Zo=g,cu=Z),ie=g.pendingLanes,ie===0&&(Ro=null),mf(z.stateNode),ys(g,ui()),v!==null)for(O=g.onRecoverableError,z=0;z<v.length;z++)O(v[z]);if(yc)throw yc=!1,g=Lr,Lr=null,g;return(cu&1)!==0&&g.tag!==0&&Qo(),ie=g.pendingLanes,(ie&1)!==0?g===Aa?fu++:(fu=0,Aa=g):fu=0,to(),null}function Qo(){if(Zo!==null){var g=ca(cu),v=wr.transition,O=Yn;try{if(wr.transition=null,Yn=16>g?16:g,Zo===null)var z=!1;else{if(g=Zo,Zo=null,cu=0,(Hn&6)!==0)throw Error(o(331));var Z=Hn;for(Hn|=4,jt=g.current;jt!==null;){var ie=jt,xe=ie.child;if((jt.flags&16)!==0){var We=ie.deletions;if(We!==null){for(var dt=0;dt<We.length;dt++){var zt=We[dt];for(jt=zt;jt!==null;){var fn=jt;switch(fn.tag){case 0:case 11:case 15:Sa(8,fn,ie)}var Un=fn.child;if(Un!==null)Un.return=fn,jt=Un;else for(;jt!==null;){fn=jt;var bn=fn.sibling,Gn=fn.return;if(cm(fn),fn===zt){jt=null;break}if(bn!==null){bn.return=Gn,jt=bn;break}jt=Gn}}}var rn=ie.alternate;if(rn!==null){var Bi=rn.child;if(Bi!==null){rn.child=null;do{var Hs=Bi.sibling;Bi.sibling=null,Bi=Hs}while(Bi!==null)}}jt=ie}}if((ie.subtreeFlags&2064)!==0&&xe!==null)xe.return=ie,jt=xe;else e:for(;jt!==null;){if(ie=jt,(ie.flags&2048)!==0)switch(ie.tag){case 0:case 11:case 15:Sa(9,ie,ie.return)}var st=ie.sibling;if(st!==null){st.return=ie.return,jt=st;break e}jt=ie.return}}var Ke=g.current;for(jt=Ke;jt!==null;){xe=jt;var ft=xe.child;if((xe.subtreeFlags&2064)!==0&&ft!==null)ft.return=xe,jt=ft;else e:for(xe=Ke;jt!==null;){if(We=jt,(We.flags&2048)!==0)try{switch(We.tag){case 0:case 11:case 15:ki(9,We)}}catch(yn){ss(We,We.return,yn)}if(We===xe){jt=null;break e}var Qt=We.sibling;if(Qt!==null){Qt.return=We.return,jt=Qt;break e}jt=We.return}}if(Hn=Z,to(),qo&&typeof qo.onPostCommitFiberRoot=="function")try{qo.onPostCommitFiberRoot(pf,g)}catch{}z=!0}return z}finally{Yn=O,wr.transition=v}}return!1}function Gf(g,v,O){v=rm(O,v),v=rv(g,v,1),Qa(g,v),v=or(),g=ll(g,1),g!==null&&(Bl(g,1,v),ys(g,v))}function ss(g,v,O){if(g.tag===3)Gf(g,g,O);else for(;v!==null;){if(v.tag===3){Gf(v,g,O);break}else if(v.tag===1){var z=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Ro===null||!Ro.has(z))){g=rm(O,g),g=jd(v,g,1),Qa(v,g),g=or(),v=ll(v,1),v!==null&&(Bl(v,1,g),ys(v,g));break}}v=v.return}}function xm(g,v,O){var z=g.pingCache;z!==null&&z.delete(v),v=or(),g.pingedLanes|=g.suspendedLanes&O,Xr===g&&(Or&O)===O&&(jr===4||jr===3&&(Or&130023424)===Or&&500>ui()-Ff?Ta(g,0):lu|=O),ys(g,v)}function Sm(g,v){v===0&&((g.mode&1)===0?v=1:(v=Cn,Cn<<=1,(Cn&130023424)===0&&(Cn=4194304)));var O=or();g=ll(g,v),g!==null&&(Bl(g,v,O),ys(g,O))}function lv(g){var v=g.memoizedState,O=0;v!==null&&(O=v.retryLane),Sm(g,O)}function uv(g,v){var O=0;switch(g.tag){case 13:var z=g.stateNode,Z=g.memoizedState;Z!==null&&(O=Z.retryLane);break;case 19:z=g.stateNode;break;default:throw Error(o(314))}z!==null&&z.delete(v),Sm(g,O)}var Mm;Mm=function(g,v,O){if(g!==null)if(g.memoizedProps!==v.pendingProps||On.current)xi=!0;else{if((g.lanes&O)===0&&(v.flags&128)===0)return xi=!1,$d(g,v,O);xi=(g.flags&131072)!==0}else xi=!1,kr&&(v.flags&1048576)!==0&&Xy(v,Id,v.index);switch(v.lanes=0,v.tag){case 2:var z=v.type;g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps;var Z=yi(v,Mn.current);Qu(v,O),Z=ac(null,v,z,g,Z,O);var ie=nl();return v.flags|=1,typeof Z=="object"&&Z!==null&&typeof Z.render=="function"&&Z.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,ir(z)?(ie=!0,Fe(v)):ie=!1,v.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Ju(v),Z.updater=Rd,v.stateNode=Z,Z._reactInternals=v,H0(v,z,g,O),v=Vi(null,v,z,!0,ie,O)):(v.tag=0,kr&&ie&&G0(v),Gr(null,v,Z,O),v=v.child),v;case 16:z=v.elementType;e:{switch(g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps,Z=z._init,z=Z(z._payload),v.type=z,Z=v.tag=Yx(z),g=ds(z,g),Z){case 0:v=_a(null,v,z,g,O);break e;case 1:v=Jl(null,v,z,g,O);break e;case 11:v=Tr(null,v,z,g,O);break e;case 14:v=Sr(null,v,z,ds(z.type,g),O);break e}throw Error(o(306,z,""))}return v;case 0:return z=v.type,Z=v.pendingProps,Z=v.elementType===z?Z:ds(z,Z),_a(g,v,z,Z,O);case 1:return z=v.type,Z=v.pendingProps,Z=v.elementType===z?Z:ds(z,Z),Jl(g,v,z,Z,O);case 3:e:{if(Cf(v),g===null)throw Error(o(387));z=v.pendingProps,ie=v.memoizedState,Z=ie.element,z0(g,v),Td(v,z,null,O);var xe=v.memoizedState;if(z=xe.element,ge&&ie.isDehydrated)if(ie={element:z,isDehydrated:!1,cache:xe.cache,transitions:xe.transitions},v.updateQueue.baseState=ie,v.memoizedState=ie,v.flags&256){Z=Error(o(423)),v=om(g,v,z,O,Z);break e}else if(z!==Z){Z=Error(o(424)),v=om(g,v,z,O,Z);break e}else for(ge&&(Pi=Dn(v.stateNode.containerInfo),ts=v,kr=!0,so=null,tc=!1),O=Qy(v,null,z,O),v.child=O;O;)O.flags=O.flags&-3|4096,O=O.sibling;else{if(nc(),z===Z){v=gs(g,v,O);break e}Gr(g,v,z,O)}v=v.child}return v;case 5:return Jy(v),g===null&&el(v),z=v.type,Z=v.pendingProps,ie=g!==null?g.memoizedProps:null,xe=Z.children,$(z,Z)?xe=null:ie!==null&&$(z,ie)&&(v.flags|=32),ns(g,v),Gr(g,v,xe,O),v.child;case 6:return g===null&&el(v),null;case 13:return am(g,v,O);case 4:return Ld(v,v.stateNode.containerInfo),z=v.pendingProps,g===null?v.child=ma(v,null,z,O):Gr(g,v,z,O),v.child;case 11:return z=v.type,Z=v.pendingProps,Z=v.elementType===z?Z:ds(z,Z),Tr(g,v,z,Z,O);case 7:return Gr(g,v,v.pendingProps,O),v.child;case 8:return Gr(g,v,v.pendingProps.children,O),v.child;case 12:return Gr(g,v,v.pendingProps.children,O),v.child;case 10:e:{if(z=v.type._context,Z=v.pendingProps,ie=v.memoizedProps,xe=Z.value,Wl(v,z,xe),ie!==null)if(Ji(ie.value,xe)){if(ie.children===Z.children&&!On.current){v=gs(g,v,O);break e}}else for(ie=v.child,ie!==null&&(ie.return=v);ie!==null;){var We=ie.dependencies;if(We!==null){xe=ie.child;for(var dt=We.firstContext;dt!==null;){if(dt.context===z){if(ie.tag===1){dt=ha(-1,O&-O),dt.tag=2;var zt=ie.updateQueue;if(zt!==null){zt=zt.shared;var fn=zt.pending;fn===null?dt.next=dt:(dt.next=fn.next,fn.next=dt),zt.pending=dt}}ie.lanes|=O,dt=ie.alternate,dt!==null&&(dt.lanes|=O),Vl(ie.return,O,v),We.lanes|=O;break}dt=dt.next}}else if(ie.tag===10)xe=ie.type===v.type?null:ie.child;else if(ie.tag===18){if(xe=ie.return,xe===null)throw Error(o(341));xe.lanes|=O,We=xe.alternate,We!==null&&(We.lanes|=O),Vl(xe,O,v),xe=ie.sibling}else xe=ie.child;if(xe!==null)xe.return=ie;else for(xe=ie;xe!==null;){if(xe===v){xe=null;break}if(ie=xe.sibling,ie!==null){ie.return=xe.return,xe=ie;break}xe=xe.return}ie=xe}Gr(g,v,Z.children,O),v=v.child}return v;case 9:return Z=v.type,z=v.pendingProps.children,Qu(v,O),Z=ps(Z),z=z(Z),v.flags|=1,Gr(g,v,z,O),v.child;case 14:return z=v.type,Z=ds(z,v.pendingProps),Z=ds(z.type,Z),Sr(g,v,z,Z,O);case 15:return wa(g,v,v.type,v.pendingProps,O);case 17:return z=v.type,Z=v.pendingProps,Z=v.elementType===z?Z:ds(z,Z),g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,ir(z)?(g=!0,Fe(v)):g=!1,Qu(v,O),Ky(v,z,Z),H0(v,z,Z,O),Vi(null,v,z,!0,g,O);case 19:return tu(g,v,O);case 22:return Li(g,v,O)}throw Error(o(156,v.tag))};function np(g,v){return Ul(g,v)}function cv(g,v,O,z){this.tag=g,this.key=O,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(g,v,O,z){return new cv(g,v,O,z)}function rp(g){return g=g.prototype,!(!g||!g.isReactComponent)}function Yx(g){if(typeof g=="function")return rp(g)?1:0;if(g!=null){if(g=g.$$typeof,g===L)return 11;if(g===D)return 14}return 2}function Ra(g,v){var O=g.alternate;return O===null?(O=Vs(g.tag,v,g.key,g.mode),O.elementType=g.elementType,O.type=g.type,O.stateNode=g.stateNode,O.alternate=g,g.alternate=O):(O.pendingProps=v,O.type=g.type,O.flags=0,O.subtreeFlags=0,O.deletions=null),O.flags=g.flags&14680064,O.childLanes=g.childLanes,O.lanes=g.lanes,O.child=g.child,O.memoizedProps=g.memoizedProps,O.memoizedState=g.memoizedState,O.updateQueue=g.updateQueue,v=g.dependencies,O.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},O.sibling=g.sibling,O.index=g.index,O.ref=g.ref,O}function ip(g,v,O,z,Z,ie){var xe=2;if(z=g,typeof g=="function")rp(g)&&(xe=1);else if(typeof g=="string")xe=5;else e:switch(g){case h:return hu(O.children,Z,ie,v);case w:xe=8,Z|=8;break;case _:return g=Vs(12,O,v,Z|2),g.elementType=_,g.lanes=ie,g;case N:return g=Vs(13,O,v,Z),g.elementType=N,g.lanes=ie,g;case C:return g=Vs(19,O,v,Z),g.elementType=C,g.lanes=ie,g;case F:return jf(O,Z,ie,v);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case x:xe=10;break e;case A:xe=9;break e;case L:xe=11;break e;case D:xe=14;break e;case k:xe=16,z=null;break e}throw Error(o(130,g==null?g:typeof g,""))}return v=Vs(xe,O,v,Z),v.elementType=g,v.type=z,v.lanes=ie,v}function hu(g,v,O,z){return g=Vs(7,g,z,v),g.lanes=O,g}function jf(g,v,O,z){return g=Vs(22,g,z,v),g.elementType=F,g.lanes=O,g.stateNode={},g}function sp(g,v,O){return g=Vs(6,g,null,v),g.lanes=O,g}function op(g,v,O){return v=Vs(4,g.children!==null?g.children:[],g.key,v),v.lanes=O,v.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},v}function ap(g,v,O,z,Z){this.tag=v,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=be,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=z,this.onRecoverableError=Z,ge&&(this.mutableSourceEagerHydrationData=null)}function fv(g,v,O,z,Z,ie,xe,We,dt){return g=new ap(g,v,O,We,dt),v===1?(v=1,ie===!0&&(v|=8)):v=0,ie=Vs(3,null,null,v),g.current=ie,ie.stateNode=g,ie.memoizedState={element:z,isDehydrated:O,cache:null,transitions:null},Ju(ie),g}function hv(g){if(!g)return Dt;g=g._reactInternals;e:{if(te(g)!==g||g.tag!==1)throw Error(o(170));var v=g;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(ir(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(o(171))}if(g.tag===1){var O=g.type;if(ir(O))return Ve(g,O,v)}return v}function dv(g){var v=g._reactInternals;if(v===void 0)throw typeof g.render=="function"?Error(o(188)):(g=Object.keys(g).join(","),Error(o(268,g)));return g=K(v),g===null?null:g.stateNode}function lo(g,v){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var O=g.retryLane;g.retryLane=O!==0&&O<v?O:v}}function qf(g,v){lo(g,v),(g=g.alternate)&&lo(g,v)}function lp(g){return g=K(g),g===null?null:g.stateNode}function pv(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var v=or();Gi(g,134217728,v),qf(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var v=or(),O=Co(g);Gi(g,O,v),qf(g,O)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var v=g.stateNode;if(v.current.memoizedState.isDehydrated){var O=Js(v.pendingLanes);O!==0&&(jo(v,O|1),ys(v,ui()),(Hn&6)===0&&(uu(),to()))}break;case 13:var z=or();wc(function(){return Gi(g,1,z)}),qf(g,1)}},t.batchedUpdates=function(g,v){var O=Hn;Hn|=1;try{return g(v)}finally{Hn=O,Hn===0&&(uu(),xd&&to())}},t.createComponentSelector=function(g){return{$$typeof:Of,value:g}},t.createContainer=function(g,v,O,z,Z,ie,xe){return fv(g,v,!1,null,O,z,Z,ie,xe)},t.createHasPseudoClassSelector=function(g){return{$$typeof:iu,value:g}},t.createHydrationContainer=function(g,v,O,z,Z,ie,xe,We,dt){return g=fv(O,z,!0,g,Z,ie,xe,We,dt),g.context=hv(null),O=g.current,z=or(),Z=Co(O),ie=ha(z,Z),ie.callback=v??null,Qa(O,ie),g.current.lanes=Z,Bl(g,Z,z),ys(g,z),g},t.createPortal=function(g,v,O){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:z==null?null:""+z,children:g,containerInfo:v,implementation:O}},t.createRoleSelector=function(g){return{$$typeof:su,value:g}},t.createTestNameSelector=function(g){return{$$typeof:Ma,value:g}},t.createTextSelector=function(g){return{$$typeof:mc,value:g}},t.deferredUpdates=function(g){var v=Yn,O=wr.transition;try{return wr.transition=null,Yn=16,g()}finally{Yn=v,wr.transition=O}},t.discreteUpdates=function(g,v,O,z,Z){var ie=Yn,xe=wr.transition;try{return wr.transition=null,Yn=1,g(v,O,z,Z)}finally{Yn=ie,wr.transition=xe,Hn===0&&uu()}},t.findAllNodes=Ea,t.findBoundingRects=function(g,v){if(!fe)throw Error(o(363));v=Ea(g,v),g=[];for(var O=0;O<v.length;O++)g.push(Oe(v[O]));for(v=g.length-1;0<v;v--){O=g[v];for(var z=O.x,Z=z+O.width,ie=O.y,xe=ie+O.height,We=v-1;0<=We;We--)if(v!==We){var dt=g[We],zt=dt.x,fn=zt+dt.width,Un=dt.y,bn=Un+dt.height;if(z>=zt&&ie>=Un&&Z<=fn&&xe<=bn){g.splice(v,1);break}else if(z!==zt||O.width!==dt.width||bn<ie||Un>xe){if(!(ie!==Un||O.height!==dt.height||fn<z||zt>Z)){zt>z&&(dt.width+=zt-z,dt.x=z),fn<Z&&(dt.width=Z-zt),g.splice(v,1);break}}else{Un>ie&&(dt.height+=Un-ie,dt.y=ie),bn<xe&&(dt.height=xe-Un),g.splice(v,1);break}}}return g},t.findHostInstance=dv,t.findHostInstanceWithNoPortals=function(g){return g=V(g),g=g!==null?a(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return dv(g)},t.flushControlled=function(g){var v=Hn;Hn|=1;var O=wr.transition,z=Yn;try{wr.transition=null,Yn=1,g()}finally{Yn=z,wr.transition=O,Hn=v,Hn===0&&(uu(),to())}},t.flushPassiveEffects=Qo,t.flushSync=wc,t.focusWithin=function(g,v){if(!fe)throw Error(o(363));for(g=Df(g),v=Fs(g,v),v=Array.from(v),g=0;g<v.length;){var O=v[g++];if(!Le(O)){if(O.tag===5&&et(O.stateNode))return!0;for(O=O.child;O!==null;)v.push(O),O=O.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Yn},t.getFindAllNodesFailureDescription=function(g,v){if(!fe)throw Error(o(363));var O=0,z=[];g=[Df(g),0];for(var Z=0;Z<g.length;){var ie=g[Z++],xe=g[Z++],We=v[xe];if((ie.tag!==5||!Le(ie))&&(Bf(ie,We)&&(z.push(ol(We)),xe++,xe>O&&(O=xe)),xe<v.length))for(ie=ie.child;ie!==null;)g.push(ie,xe),ie=ie.sibling}if(O<v.length){for(g=[];O<v.length;O++)g.push(ol(v[O]));return`findAllNodes was able to match part of the selector:
  `+(z.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return M(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:lp,findFiberByHostInstance:g.findFiberByHostInstance||pv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)g=!0;else{try{pf=v.inject(g),qo=v}catch{}g=!!v.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,v,O,z){if(!fe)throw Error(o(363));g=Ea(g,v);var Z=Ye(g,O,z).disconnect;return{disconnect:function(){Z()}}},t.registerMutableSourceForHydration=function(g,v){var O=v._getVersion;O=O(v._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[v,O]:g.mutableSourceEagerHydrationData.push(v,O)},t.runWithPriority=function(g,v){var O=Yn;try{return Yn=g,v()}finally{Yn=O}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,v,O,z){var Z=v.current,ie=or(),xe=Co(Z);return O=hv(O),v.context===null?v.context=O:v.pendingContext=O,v=ha(ie,xe),v.payload={element:g},z=z===void 0?null:z,z!==null&&(v.callback=z),Qa(Z,v),g=Gi(Z,xe,ie),g!==null&&bd(g,Z,xe),xe},t}),QE}var FL;function eoe(){return FL||(FL=1,XE.exports=Jse()),XE.exports}var toe=eoe();const noe=Ya(toe);var zL=$F();const jR={},roe=r=>void Object.assign(jR,r);function ioe(r,e){function t(h,{args:w=[],attach:_,...x},A){let L=`${h[0].toUpperCase()}${h.slice(1)}`,N;if(h==="primitive"){if(x.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const C=x.object;N=Wp(C,{type:h,root:A,attach:_,primitive:!0})}else{const C=jR[L];if(!C)throw new Error(`R3F: ${L} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(w))throw new Error("R3F: The args prop must be an array!");N=Wp(new C(...w),{type:h,root:A,attach:_,memoizedProps:{args:w}})}return N.__r3f.attach===void 0&&(N.isBufferGeometry?N.__r3f.attach="geometry":N.isMaterial&&(N.__r3f.attach="material")),L!=="inject"&&tb(N,x),N}function n(h,w){let _=!1;if(w){var x,A;(x=w.__r3f)!=null&&x.attach?eb(h,w,w.__r3f.attach):w.isObject3D&&h.isObject3D&&(h.add(w),_=!0),_||(A=h.__r3f)==null||A.objects.push(w),w.__r3f||Wp(w,{}),w.__r3f.parent=h,RA(w),Vp(w)}}function i(h,w,_){let x=!1;if(w){var A,L;if((A=w.__r3f)!=null&&A.attach)eb(h,w,w.__r3f.attach);else if(w.isObject3D&&h.isObject3D){w.parent=h,w.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:w});const N=h.children.filter(D=>D!==w),C=N.indexOf(_);h.children=[...N.slice(0,C),w,...N.slice(C)],x=!0}x||(L=h.__r3f)==null||L.objects.push(w),w.__r3f||Wp(w,{}),w.__r3f.parent=h,RA(w),Vp(w)}}function s(h,w,_=!1){h&&[...h].forEach(x=>o(w,x,_))}function o(h,w,_){if(w){var x,A,L;if(w.__r3f&&(w.__r3f.parent=null),(x=h.__r3f)!=null&&x.objects&&(h.__r3f.objects=h.__r3f.objects.filter(F=>F!==w)),(A=w.__r3f)!=null&&A.attach)jL(h,w,w.__r3f.attach);else if(w.isObject3D&&h.isObject3D){var N;h.remove(w),(N=w.__r3f)!=null&&N.root&&foe(w_(w),w)}const D=(L=w.__r3f)==null?void 0:L.primitive,k=!D&&(_===void 0?w.dispose!==null:_);if(!D){var C;s((C=w.__r3f)==null?void 0:C.objects,w,k),s(w.children,w,k)}if(delete w.__r3f,k&&w.dispose&&w.type!=="Scene"){const F=()=>{try{w.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?zL.unstable_scheduleCallback(zL.unstable_IdlePriority,F):F()}Vp(h)}}function l(h,w,_,x){var A;const L=(A=h.__r3f)==null?void 0:A.parent;if(!L)return;const N=t(w,_,h.__r3f.root);if(h.children){for(const C of h.children)C.__r3f&&n(N,C);h.children=h.children.filter(C=>!C.__r3f)}h.__r3f.objects.forEach(C=>n(N,C)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(L,h),N.parent&&(N.__r3f.autoRemovedBeforeAppend=!0),n(L,N),N.raycast&&N.__r3f.eventCount&&w_(N).getState().internal.interaction.push(N),[x,x.alternate].forEach(C=>{C!==null&&(C.stateNode=N,C.ref&&(typeof C.ref=="function"?C.ref(N):C.ref.current=N))})}const c=()=>{};return{reconciler:noe({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,w)=>{if(!w)return;const _=h.getState().scene;_.__r3f&&(_.__r3f.root=h,n(_,w))},removeChildFromContainer:(h,w)=>{w&&o(h.getState().scene,w)},insertInContainerBefore:(h,w,_)=>{if(!w||!_)return;const x=h.getState().scene;x.__r3f&&i(x,w,_)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var w;return!!((w=h==null?void 0:h.__r3f)!=null?w:{}).handlers},prepareUpdate(h,w,_,x){var A;if(((A=h==null?void 0:h.__r3f)!=null?A:{}).primitive&&x.object&&x.object!==h)return[!0];{const{args:N=[],children:C,...D}=x,{args:k=[],children:F,...Q}=_;if(!Array.isArray(N))throw new Error("R3F: the args prop must be an array!");if(N.some((Y,ee)=>Y!==k[ee]))return[!0];const G=r5(h,D,Q,!0);return G.changes.length?[!1,G]:null}},commitUpdate(h,[w,_],x,A,L,N){w?l(h,x,L,N):tb(h,_)},commitMount(h,w,_,x){var A;const L=(A=h.__r3f)!=null?A:{};h.raycast&&L.handlers&&L.eventCount&&w_(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Wp(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var w;const{attach:_,parent:x}=(w=h.__r3f)!=null?w:{};_&&x&&jL(x,h,_),h.isObject3D&&(h.visible=!1),Vp(h)},unhideInstance(h,w){var _;const{attach:x,parent:A}=(_=h.__r3f)!=null?_:{};x&&A&&eb(A,h,x),(h.isObject3D&&w.visible==null||w.visible)&&(h.visible=!0),Vp(h)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():i0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Vr.fun(performance.now)?performance.now:Vr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Vr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Vr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:tb}}var WL,VL;const JE=r=>"colorSpace"in r||"outputColorSpace"in r,ZF=()=>{var r;return(r=jR.ColorManagement)!=null?r:null},QF=r=>r&&r.isOrthographicCamera,soe=r=>r&&r.hasOwnProperty("current"),Wy=typeof window<"u"&&((WL=window.document)!=null&&WL.createElement||((VL=window.navigator)==null?void 0:VL.product)==="ReactNative")?Ce.useLayoutEffect:Ce.useEffect;function JF(r){const e=Ce.useRef(r);return Wy(()=>void(e.current=r),[r]),e}function ooe({set:r}){return Wy(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class e5 extends Ce.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}e5.getDerivedStateFromError=()=>({error:!0});const t5="__default",HL=new Map,aoe=r=>r&&!!r.memoized&&!!r.changes;function n5(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const sg=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function w_(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Vr={obj:r=>r===Object(r)&&!Vr.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Vr.str(r)||Vr.num(r)||Vr.boo(r))return r===e;const s=Vr.obj(r);if(s&&n==="reference")return r===e;const o=Vr.arr(r);if(o&&t==="reference")return r===e;if((o||s)&&r===e)return!0;let l;for(l in r)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in i?e:r)if(!Vr.equ(r[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:r)if(r[l]!==e[l])return!1;if(Vr.und(l)){if(o&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function loe(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Wp(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function TA(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,o)=>s[o],r),{target:t,key:i}}else return{target:t,key:e}}const GL=/-\d+$/;function eb(r,e,t){if(Vr.str(t)){if(GL.test(t)){const s=t.replace(GL,""),{target:o,key:l}=TA(r,s);Array.isArray(o[l])||(o[l]=[])}const{target:n,key:i}=TA(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function jL(r,e,t){var n,i;if(Vr.str(t)){const{target:s,key:o}=TA(r,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function r5(r,{children:e,key:t,ref:n,...i},{children:s,key:o,ref:l,...c}={},d=!1){const h=r.__r3f,w=Object.entries(i),_=[];if(d){const A=Object.keys(c);for(let L=0;L<A.length;L++)i.hasOwnProperty(A[L])||w.unshift([A[L],t5+"remove"])}w.forEach(([A,L])=>{var N;if((N=r.__r3f)!=null&&N.primitive&&A==="object"||Vr.equ(L,c[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return _.push([A,L,!0,[]]);let C=[];A.includes("-")&&(C=A.split("-")),_.push([A,L,!1,C]);for(const D in i){const k=i[D];D.startsWith(`${A}-`)&&_.push([D,k,!1,D.split("-")])}});const x={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(x.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(x.attach=h.memoizedProps.attach),{memoized:x,changes:_}}function tb(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:l}=aoe(e)?e:r5(r,e),c=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=o);for(let _=0;_<l.length;_++){let[x,A,L,N]=l[_];if(JE(r)){const F="srgb",Q="srgb-linear";x==="encoding"?(x="colorSpace",A=A===3001?F:Q):x==="outputEncoding"&&(x="outputColorSpace",A=A===3001?F:Q)}let C=r,D=C[x];if(N.length&&(D=N.reduce((k,F)=>k[F],r),!(D&&D.set))){const[k,...F]=N.reverse();C=F.reverse().reduce((Q,G)=>Q[G],r),x=k}if(A===t5+"remove")if(C.constructor){let k=HL.get(C.constructor);k||(k=new C.constructor,HL.set(C.constructor,k)),A=k[x]}else A=0;if(L&&n)A?n.handlers[x]=A:delete n.handlers[x],n.eventCount=Object.keys(n.handlers).length;else if(D&&D.set&&(D.copy||D instanceof Kh)){if(Array.isArray(A))D.fromArray?D.fromArray(A):D.set(...A);else if(D.copy&&A&&A.constructor&&D.constructor===A.constructor)D.copy(A);else if(A!==void 0){var d;const k=(d=D)==null?void 0:d.isColor;!k&&D.setScalar?D.setScalar(A):D instanceof Kh&&A instanceof Kh?D.mask=A.mask:D.set(A),!ZF()&&s&&!s.linear&&k&&D.convertSRGBToLinear()}}else{var h;if(C[x]=A,(h=C[x])!=null&&h.isTexture&&C[x].format===Ns&&C[x].type===ja&&s){const k=C[x];JE(k)&&JE(s.gl)?k.colorSpace=s.gl.outputColorSpace:k.encoding=s.gl.outputEncoding}}Vp(r)}if(n&&n.parent&&r.raycast&&c!==n.eventCount){const _=w_(r).getState().internal,x=_.interaction.indexOf(r);x>-1&&_.interaction.splice(x,1),n.eventCount&&_.interaction.push(r)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=r.__r3f)!=null&&t.parent&&RA(r),r}function Vp(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function RA(r){r.onUpdate==null||r.onUpdate(r)}function uoe(r,e){r.manual||(QF(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function Xw(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function coe(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return i0.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return i0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return i0.ContinuousEventPriority;default:return i0.DefaultEventPriority}}function i5(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function foe(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{i5(t.capturedMap,e,n,i)})}function hoe(r){function e(c){const{internal:d}=r.getState(),h=c.offsetX-d.initialClick[0],w=c.offsetY-d.initialClick[1];return Math.round(Math.sqrt(h*h+w*w))}function t(c){return c.filter(d=>["Move","Over","Enter","Out","Leave"].some(h=>{var w;return(w=d.__r3f)==null?void 0:w.handlers["onPointer"+h]}))}function n(c,d){const h=r.getState(),w=new Set,_=[],x=d?d(h.internal.interaction):h.internal.interaction;for(let C=0;C<x.length;C++){const D=sg(x[C]);D&&(D.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function A(C){const D=sg(C);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var k;D.events.compute==null||D.events.compute(c,D,(k=D.previousRoot)==null?void 0:k.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(C,!0):[]}let L=x.flatMap(A).sort((C,D)=>{const k=sg(C.object),F=sg(D.object);return!k||!F?C.distance-D.distance:F.events.priority-k.events.priority||C.distance-D.distance}).filter(C=>{const D=Xw(C);return w.has(D)?!1:(w.add(D),!0)});h.events.filter&&(L=h.events.filter(L,h));for(const C of L){let D=C.object;for(;D;){var N;(N=D.__r3f)!=null&&N.eventCount&&_.push({...C,eventObject:D}),D=D.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let C of h.internal.capturedMap.get(c.pointerId).values())w.has(Xw(C.intersection))||_.push(C.intersection);return _}function i(c,d,h,w){const _=r.getState();if(c.length){const x={stopped:!1};for(const A of c){const L=sg(A.object)||_,{raycaster:N,pointer:C,camera:D,internal:k}=L,F=new we(C.x,C.y,0).unproject(D),Q=U=>{var V,K;return(V=(K=k.capturedMap.get(U))==null?void 0:K.has(A.eventObject))!=null?V:!1},G=U=>{const V={intersection:A,target:d.target};k.capturedMap.has(U)?k.capturedMap.get(U).set(A.eventObject,V):k.capturedMap.set(U,new Map([[A.eventObject,V]])),d.target.setPointerCapture(U)},Y=U=>{const V=k.capturedMap.get(U);V&&i5(k.capturedMap,A.eventObject,V,U)};let ee={};for(let U in d){let V=d[U];typeof V!="function"&&(ee[U]=V)}let te={...A,...ee,pointer:C,intersections:c,stopped:x.stopped,delta:h,unprojectedPoint:F,ray:N.ray,camera:D,stopPropagation(){const U="pointerId"in d&&k.capturedMap.get(d.pointerId);if((!U||U.has(A.eventObject))&&(te.stopped=x.stopped=!0,k.hovered.size&&Array.from(k.hovered.values()).find(V=>V.eventObject===A.eventObject))){const V=c.slice(0,c.indexOf(A));s([...V,A])}},target:{hasPointerCapture:Q,setPointerCapture:G,releasePointerCapture:Y},currentTarget:{hasPointerCapture:Q,setPointerCapture:G,releasePointerCapture:Y},nativeEvent:d};if(w(te),x.stopped===!0)break}}return c}function s(c){const{internal:d}=r.getState();for(const h of d.hovered.values())if(!c.length||!c.find(w=>w.object===h.object&&w.index===h.index&&w.instanceId===h.instanceId)){const _=h.eventObject.__r3f,x=_==null?void 0:_.handlers;if(d.hovered.delete(Xw(h)),_!=null&&_.eventCount){const A={...h,intersections:c};x.onPointerOut==null||x.onPointerOut(A),x.onPointerLeave==null||x.onPointerLeave(A)}}}function o(c,d){for(let h=0;h<d.length;h++){const w=d[h].__r3f;w==null||w.handlers.onPointerMissed==null||w.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:h}=r.getState();"pointerId"in d&&h.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(d.pointerId)&&(h.capturedMap.delete(d.pointerId),s([]))})}}return function(h){const{onPointerMissed:w,internal:_}=r.getState();_.lastEvent.current=h;const x=c==="onPointerMove",A=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",N=n(h,x?t:void 0),C=A?e(h):0;c==="onPointerDown"&&(_.initialClick=[h.offsetX,h.offsetY],_.initialHits=N.map(k=>k.eventObject)),A&&!N.length&&C<=2&&(o(h,_.interaction),w&&w(h)),x&&s(N);function D(k){const F=k.eventObject,Q=F.__r3f,G=Q==null?void 0:Q.handlers;if(Q!=null&&Q.eventCount)if(x){if(G.onPointerOver||G.onPointerEnter||G.onPointerOut||G.onPointerLeave){const Y=Xw(k),ee=_.hovered.get(Y);ee?ee.stopped&&k.stopPropagation():(_.hovered.set(Y,k),G.onPointerOver==null||G.onPointerOver(k),G.onPointerEnter==null||G.onPointerEnter(k))}G.onPointerMove==null||G.onPointerMove(k)}else{const Y=G[c];Y?(!A||_.initialHits.includes(F))&&(o(h,_.interaction.filter(ee=>!_.initialHits.includes(ee))),Y(k)):A&&_.initialHits.includes(F)&&o(h,_.interaction.filter(ee=>!_.initialHits.includes(ee)))}}i(N,h,C,D)}}return{handlePointer:l}}const s5=r=>!!(r!=null&&r.render),o5=Ce.createContext(null),doe=(r,e)=>{const t=Zse((l,c)=>{const d=new we,h=new we,w=new we;function _(C=c().camera,D=h,k=c().size){const{width:F,height:Q,top:G,left:Y}=k,ee=F/Q;D.isVector3?w.copy(D):w.set(...D);const te=C.getWorldPosition(d).distanceTo(w);if(QF(C))return{width:F/C.zoom,height:Q/C.zoom,top:G,left:Y,factor:1,distance:te,aspect:ee};{const U=C.fov*Math.PI/180,V=2*Math.tan(U/2)*te,K=V*(F/Q);return{width:K,height:V,top:G,left:Y,factor:F/K,distance:te,aspect:ee}}}let x;const A=C=>l(D=>({performance:{...D.performance,current:C}})),L=new St;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(C=1)=>r(c(),C),advance:(C,D)=>e(C,D,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new zR,pointer:L,mouse:L,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const C=c();x&&clearTimeout(x),C.performance.current!==C.performance.min&&A(C.performance.min),x=setTimeout(()=>A(c().performance.max),C.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:C=>l(D=>({...D,events:{...D.events,...C}})),setSize:(C,D,k,F,Q)=>{const G=c().camera,Y={width:C,height:D,top:F||0,left:Q||0,updateStyle:k};l(ee=>({size:Y,viewport:{...ee.viewport,..._(G,h,Y)}}))},setDpr:C=>l(D=>{const k=n5(C);return{viewport:{...D.viewport,dpr:k,initialDpr:D.viewport.initialDpr||k}}}),setFrameloop:(C="always")=>{const D=c().clock;D.stop(),D.elapsedTime=0,C!=="never"&&(D.start(),D.elapsedTime=0),l(()=>({frameloop:C}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ce.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(C,D,k)=>{const F=c().internal;return F.priority=F.priority+(D>0?1:0),F.subscribers.push({ref:C,priority:D,store:k}),F.subscribers=F.subscribers.sort((Q,G)=>Q.priority-G.priority),()=>{const Q=c().internal;Q!=null&&Q.subscribers&&(Q.priority=Q.priority-(D>0?1:0),Q.subscribers=Q.subscribers.filter(G=>G.ref!==C))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:d,gl:h,set:w}=t.getState();if(c.width!==i.width||c.height!==i.height||d.dpr!==s){var _;i=c,s=d.dpr,uoe(l,c),h.setPixelRatio(d.dpr);const x=(_=c.updateStyle)!=null?_:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,x)}l!==o&&(o=l,w(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>r(l)),t};let $w,poe=new Set,moe=new Set,goe=new Set;function nb(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function og(r,e){switch(r){case"before":return nb(poe,e);case"after":return nb(moe,e);case"tail":return nb(goe,e)}}let rb,ib;function sb(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),rb=e.internal.subscribers,$w=0;$w<rb.length;$w++)ib=rb[$w],ib.ref.current(ib.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function yoe(r){let e=!1,t=!1,n,i,s;function o(d){i=requestAnimationFrame(o),e=!0,n=0,og("before",d),t=!0;for(const w of r.values()){var h;s=w.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(n+=sb(d,s))}if(t=!1,og("after",d),n===0)return og("tail",d),e=!1,cancelAnimationFrame(i)}function l(d,h=1){var w;if(!d)return r.forEach(_=>l(_.store.getState(),h));(w=d.gl.xr)!=null&&w.isPresenting||!d.internal.active||d.frameloop==="never"||(h>1?d.internal.frames=Math.min(60,d.internal.frames+h):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(d,h=!0,w,_){if(h&&og("before",d),w)sb(d,w,_);else for(const x of r.values())sb(d,x.store.getState());h&&og("after",d)}return{loop:o,invalidate:l,advance:c}}function a5(){const r=Ce.useContext(o5);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Vc(r=t=>t,e){return a5()(r,e)}function Vy(r,e=0){const t=a5(),n=t.getState().internal.subscribe,i=JF(r);return Wy(()=>n(i,e,t),[e,n,t]),null}const E0=new Map,{invalidate:qL,advance:KL}=yoe(E0),{reconciler:P1,applyProps:Up}=ioe(E0,coe),Fp={objects:"shallow",strict:!1},voe=(r,e)=>{const t=typeof r=="function"?r(e):r;return s5(t)?t:new nF({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function woe(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:o,updateStyle:l=t}=e;return{width:n,height:i,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:o}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function _oe(r){const e=E0.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||doe(qL,KL),o=t||P1.createContainer(s,i0.ConcurrentRoot,null,!1,null,"",i,null);e||E0.set(r,{fiber:o,store:s});let l,c=!1,d;return{configure(h={}){let{gl:w,size:_,scene:x,events:A,onCreated:L,shadows:N=!1,linear:C=!1,flat:D=!1,legacy:k=!1,orthographic:F=!1,frameloop:Q="always",dpr:G=[1,2],performance:Y,raycaster:ee,camera:te,onPointerMissed:U}=h,V=s.getState(),K=V.gl;V.gl||V.set({gl:K=voe(w,r)});let E=V.raycaster;E||V.set({raycaster:E=new YF});const{params:a,...p}=ee||{};if(Vr.equ(p,E,Fp)||Up(E,{...p}),Vr.equ(a,E.params,Fp)||Up(E,{params:{...E.params,...a}}),!V.camera||V.camera===d&&!Vr.equ(d,te,Fp)){d=te;const I=te instanceof Ly,y=I?te:F?new Qc(0,0,0,0,.1,1e3):new mi(75,0,.1,1e3);I||(y.position.z=5,te&&(Up(y,te),("aspect"in te||"left"in te||"right"in te||"bottom"in te||"top"in te)&&(y.manual=!0,y.updateProjectionMatrix())),!V.camera&&!(te!=null&&te.rotation)&&y.lookAt(0,0,0)),V.set({camera:y}),E.camera=y}if(!V.scene){let I;x!=null&&x.isScene?I=x:(I=new SR,x&&Up(I,x)),V.set({scene:Wp(I)})}if(!V.xr){var M;const I=(S,W)=>{const $=s.getState();$.frameloop!=="never"&&KL(S,!0,$,W)},y=()=>{const S=s.getState();S.gl.xr.enabled=S.gl.xr.isPresenting,S.gl.xr.setAnimationLoop(S.gl.xr.isPresenting?I:null),S.gl.xr.isPresenting||qL(S)},u={connect(){const S=s.getState().gl;S.xr.addEventListener("sessionstart",y),S.xr.addEventListener("sessionend",y)},disconnect(){const S=s.getState().gl;S.xr.removeEventListener("sessionstart",y),S.xr.removeEventListener("sessionend",y)}};typeof((M=K.xr)==null?void 0:M.addEventListener)=="function"&&u.connect(),V.set({xr:u})}if(K.shadowMap){const I=K.shadowMap.enabled,y=K.shadowMap.type;if(K.shadowMap.enabled=!!N,Vr.boo(N))K.shadowMap.type=Sg;else if(Vr.str(N)){var R;const u={basic:QU,percentage:fx,soft:Sg,variance:Fa};K.shadowMap.type=(R=u[N])!=null?R:Sg}else Vr.obj(N)&&Object.assign(K.shadowMap,N);(I!==K.shadowMap.enabled||y!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const T=ZF();T&&("enabled"in T?T.enabled=!k:"legacyMode"in T&&(T.legacyMode=k)),c||Up(K,{outputEncoding:C?3e3:3001,toneMapping:D?Cl:tR}),V.legacy!==k&&V.set(()=>({legacy:k})),V.linear!==C&&V.set(()=>({linear:C})),V.flat!==D&&V.set(()=>({flat:D})),w&&!Vr.fun(w)&&!s5(w)&&!Vr.equ(w,K,Fp)&&Up(K,w),A&&!V.events.handlers&&V.set({events:A(s)});const P=woe(r,_);return Vr.equ(P,V.size,Fp)||V.setSize(P.width,P.height,P.updateStyle,P.top,P.left),G&&V.viewport.dpr!==n5(G)&&V.setDpr(G),V.frameloop!==Q&&V.setFrameloop(Q),V.onPointerMissed||V.set({onPointerMissed:U}),Y&&!Vr.equ(Y,V.performance,Fp)&&V.set(I=>({performance:{...I.performance,...Y}})),l=L,c=!0,this},render(h){return c||this.configure(),P1.updateContainer(Xt.jsx(xoe,{store:s,children:h,onCreated:l,rootElement:r}),o,null,()=>{}),s},unmount(){l5(r)}}}function xoe({store:r,children:e,onCreated:t,rootElement:n}){return Wy(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),Xt.jsx(o5.Provider,{value:r,children:e})}function l5(r,e){const t=E0.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),P1.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,o,l,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),loe(i),E0.delete(r)}catch{}},500)})}}P1.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ce.version});const ob={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Soe(r){const{handlePointer:e}=hoe(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(ob).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,l])=>{const[c,d]=ob[o];t.addEventListener(c,l,{passive:d})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[l]=ob[s];n.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function YL(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function Moe({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Ce.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Ce.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=r?typeof r=="number"?r:r.scroll:null,d=r?typeof r=="number"?r:r.resize:null,h=Ce.useRef(!1);Ce.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[w,_,x]=Ce.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:D,top:k,width:F,height:Q,bottom:G,right:Y,x:ee,y:te}=l.current.element.getBoundingClientRect(),U={left:D,top:k,width:F,height:Q,bottom:G,right:Y,x:ee,y:te};l.current.element instanceof HTMLElement&&n&&(U.height=l.current.element.offsetHeight,U.width=l.current.element.offsetWidth),Object.freeze(U),h.current&&!Toe(l.current.lastBounds,U)&&o(l.current.lastBounds=U)};return[C,d?YL(C,d):C,c?YL(C,c):C]},[o,n,c,d]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function L(){l.current.element&&(l.current.resizeObserver=new i(x),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",x,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const N=C=>{!C||C===l.current.element||(A(),l.current.element=C,l.current.scrollContainers=u5(C),L())};return boe(x,!!e),Eoe(_),Ce.useEffect(()=>{A(),L()},[e,x,_]),Ce.useEffect(()=>A,[]),[N,s,w]}function Eoe(r){Ce.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function boe(r,e){Ce.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function u5(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...u5(r.parentElement)]}const Aoe=["x","y","top","bottom","left","right","width","height"],Toe=(r,e)=>Aoe.every(t=>r[t]===e[t]);var Roe=Object.defineProperty,Coe=Object.defineProperties,Ioe=Object.getOwnPropertyDescriptors,XL=Object.getOwnPropertySymbols,Noe=Object.prototype.hasOwnProperty,Poe=Object.prototype.propertyIsEnumerable,$L=(r,e,t)=>e in r?Roe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ZL=(r,e)=>{for(var t in e||(e={}))Noe.call(e,t)&&$L(r,t,e[t]);if(XL)for(var t of XL(e))Poe.call(e,t)&&$L(r,t,e[t]);return r},Loe=(r,e)=>Coe(r,Ioe(e)),QL,JL;typeof window<"u"&&((QL=window.document)!=null&&QL.createElement||((JL=window.navigator)==null?void 0:JL.product)==="ReactNative")?Ce.useLayoutEffect:Ce.useEffect;function c5(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=c5(n,e,t);if(i)return i;n=n.sibling}}function f5(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const ek=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=ek;return}return ek.apply(this,arguments)};const qR=f5(Ce.createContext(null));class h5 extends Ce.Component{render(){return Ce.createElement(qR.Provider,{value:this._reactInternals},this.props.children)}}function koe(){const r=Ce.useContext(qR);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ce.useId();return Ce.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=c5(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[r,e])}function Ooe(){const r=koe(),[e]=Ce.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==qR&&!e.has(i)&&e.set(i,Ce.useContext(f5(i)))}t=t.return}return e}function Doe(){const r=Ooe();return Ce.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>Ce.createElement(e,null,Ce.createElement(t.Provider,Loe(ZL({},n),{value:r.get(t)}))),e=>Ce.createElement(h5,ZL({},e))),[r])}const Boe=Ce.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:o=Soe,eventSource:l,eventPrefix:c,shadows:d,linear:h,flat:w,legacy:_,orthographic:x,frameloop:A,dpr:L,performance:N,raycaster:C,camera:D,scene:k,onPointerMissed:F,onCreated:Q,...G},Y){Ce.useMemo(()=>roe(qse),[]);const ee=Doe(),[te,U]=Moe({scroll:!0,debounce:{scroll:50,resize:0},...n}),V=Ce.useRef(null),K=Ce.useRef(null);Ce.useImperativeHandle(Y,()=>V.current);const E=JF(F),[a,p]=Ce.useState(!1),[M,R]=Ce.useState(!1);if(a)throw a;if(M)throw M;const T=Ce.useRef(null);Wy(()=>{const I=V.current;U.width>0&&U.height>0&&I&&(T.current||(T.current=_oe(I)),T.current.configure({gl:s,events:o,shadows:d,linear:h,flat:w,legacy:_,orthographic:x,frameloop:A,dpr:L,performance:N,raycaster:C,camera:D,scene:k,size:U,onPointerMissed:(...y)=>E.current==null?void 0:E.current(...y),onCreated:y=>{y.events.connect==null||y.events.connect(l?soe(l)?l.current:l:K.current),c&&y.setEvents({compute:(u,S)=>{const W=u[c+"X"],$=u[c+"Y"];S.pointer.set(W/S.size.width*2-1,-($/S.size.height)*2+1),S.raycaster.setFromCamera(S.pointer,S.camera)}}),Q==null||Q(y)}}),T.current.render(Xt.jsx(ee,{children:Xt.jsx(e5,{set:R,children:Xt.jsx(Ce.Suspense,{fallback:Xt.jsx(ooe,{set:p}),children:e??null})})})))}),Ce.useEffect(()=>{const I=V.current;if(I)return()=>l5(I)},[]);const P=l?"none":"auto";return Xt.jsx("div",{ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:P,...i},...G,children:Xt.jsx("div",{ref:te,style:{width:"100%",height:"100%"},children:Xt.jsx("canvas",{ref:V,style:{display:"block"},children:t})})})}),Uoe=Ce.forwardRef(function(e,t){return Xt.jsx(h5,{children:Xt.jsx(Boe,{...e,ref:t})})});function py(){return py=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},py.apply(null,arguments)}var Foe=Object.defineProperty,zoe=(r,e,t)=>e in r?Foe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Woe=(r,e,t)=>(zoe(r,e+"",t),t);class Voe{constructor(){Woe(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var Hoe=Object.defineProperty,Goe=(r,e,t)=>e in r?Hoe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pn=(r,e,t)=>(Goe(r,typeof e!="symbol"?e+"":e,t),t);const Zw=new hd,tk=new Tu,joe=Math.cos(70*(Math.PI/180)),nk=(r,e)=>(r%e+e)%e;let qoe=class extends Voe{constructor(e,t){super(),Pn(this,"object"),Pn(this,"domElement"),Pn(this,"enabled",!0),Pn(this,"target",new we),Pn(this,"minDistance",0),Pn(this,"maxDistance",1/0),Pn(this,"minZoom",0),Pn(this,"maxZoom",1/0),Pn(this,"minPolarAngle",0),Pn(this,"maxPolarAngle",Math.PI),Pn(this,"minAzimuthAngle",-1/0),Pn(this,"maxAzimuthAngle",1/0),Pn(this,"enableDamping",!1),Pn(this,"dampingFactor",.05),Pn(this,"enableZoom",!0),Pn(this,"zoomSpeed",1),Pn(this,"enableRotate",!0),Pn(this,"rotateSpeed",1),Pn(this,"enablePan",!0),Pn(this,"panSpeed",1),Pn(this,"screenSpacePanning",!0),Pn(this,"keyPanSpeed",7),Pn(this,"zoomToCursor",!1),Pn(this,"autoRotate",!1),Pn(this,"autoRotateSpeed",2),Pn(this,"reverseOrbit",!1),Pn(this,"reverseHorizontalOrbit",!1),Pn(this,"reverseVerticalOrbit",!1),Pn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Pn(this,"mouseButtons",{LEFT:vh.ROTATE,MIDDLE:vh.DOLLY,RIGHT:vh.PAN}),Pn(this,"touches",{ONE:wh.ROTATE,TWO:wh.DOLLY_PAN}),Pn(this,"target0"),Pn(this,"position0"),Pn(this,"zoom0"),Pn(this,"_domElementKeyEvents",null),Pn(this,"getPolarAngle"),Pn(this,"getAzimuthalAngle"),Pn(this,"setPolarAngle"),Pn(this,"setAzimuthalAngle"),Pn(this,"getDistance"),Pn(this,"getZoomScale"),Pn(this,"listenToKeyEvents"),Pn(this,"stopListenToKeyEvents"),Pn(this,"saveState"),Pn(this,"reset"),Pn(this,"update"),Pn(this,"connect"),Pn(this,"dispose"),Pn(this,"dollyIn"),Pn(this,"dollyOut"),Pn(this,"getScale"),Pn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=le=>{let Xe=nk(le,2*Math.PI),de=h.phi;de<0&&(de+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let Re=Math.abs(Xe-de);2*Math.PI-Re<Re&&(Xe<de?Xe+=2*Math.PI:de+=2*Math.PI),w.phi=Xe-de,n.update()},this.setAzimuthalAngle=le=>{let Xe=nk(le,2*Math.PI),de=h.theta;de<0&&(de+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let Re=Math.abs(Xe-de);2*Math.PI-Re<Re&&(Xe<de?Xe+=2*Math.PI:de+=2*Math.PI),w.theta=Xe-de,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",Et),this._domElementKeyEvents=le},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Et),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),c=l.NONE},this.update=(()=>{const le=new we,Xe=new we(0,1,0),de=new Ps().setFromUnitVectors(e.up,Xe),Re=de.clone().invert(),Ue=new we,Me=new Ps,qe=2*Math.PI;return function(){const ct=n.object.position;de.setFromUnitVectors(e.up,Xe),Re.copy(de).invert(),le.copy(ct).sub(n.target),le.applyQuaternion(de),h.setFromVector3(le),n.autoRotate&&c===l.NONE&&a(K()),n.enableDamping?(h.theta+=w.theta*n.dampingFactor,h.phi+=w.phi*n.dampingFactor):(h.theta+=w.theta,h.phi+=w.phi);let gt=n.minAzimuthAngle,Sn=n.maxAzimuthAngle;isFinite(gt)&&isFinite(Sn)&&(gt<-Math.PI?gt+=qe:gt>Math.PI&&(gt-=qe),Sn<-Math.PI?Sn+=qe:Sn>Math.PI&&(Sn-=qe),gt<=Sn?h.theta=Math.max(gt,Math.min(Sn,h.theta)):h.theta=h.theta>(gt+Sn)/2?Math.max(gt,h.theta):Math.min(Sn,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(x,n.dampingFactor):n.target.add(x),n.zoomToCursor&&te||n.object.isOrthographicCamera?h.radius=S(h.radius):h.radius=S(h.radius*_),le.setFromSpherical(h),le.applyQuaternion(Re),ct.copy(n.target).add(le),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(w.theta*=1-n.dampingFactor,w.phi*=1-n.dampingFactor,x.multiplyScalar(1-n.dampingFactor)):(w.set(0,0,0),x.set(0,0,0));let ht=!1;if(n.zoomToCursor&&te){let ae=null;if(n.object instanceof mi&&n.object.isPerspectiveCamera){const J=le.length();ae=S(J*_);const X=J-ae;n.object.position.addScaledVector(Y,X),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const J=new we(ee.x,ee.y,0);J.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix(),ht=!0;const X=new we(ee.x,ee.y,0);X.unproject(n.object),n.object.position.sub(X).add(J),n.object.updateMatrixWorld(),ae=le.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;ae!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(ae).add(n.object.position):(Zw.origin.copy(n.object.position),Zw.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Zw.direction))<joe?e.lookAt(n.target):(tk.setFromNormalAndCoplanarPoint(n.object.up,n.target),Zw.intersectPlane(tk,n.target))))}else n.object instanceof Qc&&n.object.isOrthographicCamera&&(ht=_!==1,ht&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix()));return _=1,te=!1,ht||Ue.distanceToSquared(n.object.position)>d||8*(1-Me.dot(n.object.quaternion))>d?(n.dispatchEvent(i),Ue.copy(n.object.position),Me.copy(n.object.quaternion),ht=!1,!0):!1}})(),this.connect=le=>{n.domElement=le,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",j),n.domElement.addEventListener("pointerdown",Oe),n.domElement.addEventListener("pointercancel",Le),n.domElement.addEventListener("wheel",Ye)},this.dispose=()=>{var le,Xe,de,Re,Ue,Me;n.domElement&&(n.domElement.style.touchAction="auto"),(le=n.domElement)==null||le.removeEventListener("contextmenu",j),(Xe=n.domElement)==null||Xe.removeEventListener("pointerdown",Oe),(de=n.domElement)==null||de.removeEventListener("pointercancel",Le),(Re=n.domElement)==null||Re.removeEventListener("wheel",Ye),(Ue=n.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",Te),(Me=n.domElement)==null||Me.ownerDocument.removeEventListener("pointerup",Le),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Et)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const d=1e-6,h=new AA,w=new AA;let _=1;const x=new we,A=new St,L=new St,N=new St,C=new St,D=new St,k=new St,F=new St,Q=new St,G=new St,Y=new we,ee=new St;let te=!1;const U=[],V={};function K(){return 2*Math.PI/60/60*n.autoRotateSpeed}function E(){return Math.pow(.95,n.zoomSpeed)}function a(le){n.reverseOrbit||n.reverseHorizontalOrbit?w.theta+=le:w.theta-=le}function p(le){n.reverseOrbit||n.reverseVerticalOrbit?w.phi+=le:w.phi-=le}const M=(()=>{const le=new we;return function(de,Re){le.setFromMatrixColumn(Re,0),le.multiplyScalar(-de),x.add(le)}})(),R=(()=>{const le=new we;return function(de,Re){n.screenSpacePanning===!0?le.setFromMatrixColumn(Re,1):(le.setFromMatrixColumn(Re,0),le.crossVectors(n.object.up,le)),le.multiplyScalar(de),x.add(le)}})(),T=(()=>{const le=new we;return function(de,Re){const Ue=n.domElement;if(Ue&&n.object instanceof mi&&n.object.isPerspectiveCamera){const Me=n.object.position;le.copy(Me).sub(n.target);let qe=le.length();qe*=Math.tan(n.object.fov/2*Math.PI/180),M(2*de*qe/Ue.clientHeight,n.object.matrix),R(2*Re*qe/Ue.clientHeight,n.object.matrix)}else Ue&&n.object instanceof Qc&&n.object.isOrthographicCamera?(M(de*(n.object.right-n.object.left)/n.object.zoom/Ue.clientWidth,n.object.matrix),R(Re*(n.object.top-n.object.bottom)/n.object.zoom/Ue.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function P(le){n.object instanceof mi&&n.object.isPerspectiveCamera||n.object instanceof Qc&&n.object.isOrthographicCamera?_=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(le){P(_/le)}function y(le){P(_*le)}function u(le){if(!n.zoomToCursor||!n.domElement)return;te=!0;const Xe=n.domElement.getBoundingClientRect(),de=le.clientX-Xe.left,Re=le.clientY-Xe.top,Ue=Xe.width,Me=Xe.height;ee.x=de/Ue*2-1,ee.y=-(Re/Me)*2+1,Y.set(ee.x,ee.y,1).unproject(n.object).sub(n.object.position).normalize()}function S(le){return Math.max(n.minDistance,Math.min(n.maxDistance,le))}function W(le){A.set(le.clientX,le.clientY)}function $(le){u(le),F.set(le.clientX,le.clientY)}function se(le){C.set(le.clientX,le.clientY)}function me(le){L.set(le.clientX,le.clientY),N.subVectors(L,A).multiplyScalar(n.rotateSpeed);const Xe=n.domElement;Xe&&(a(2*Math.PI*N.x/Xe.clientHeight),p(2*Math.PI*N.y/Xe.clientHeight)),A.copy(L),n.update()}function _e(le){Q.set(le.clientX,le.clientY),G.subVectors(Q,F),G.y>0?I(E()):G.y<0&&y(E()),F.copy(Q),n.update()}function be(le){D.set(le.clientX,le.clientY),k.subVectors(D,C).multiplyScalar(n.panSpeed),T(k.x,k.y),C.copy(D),n.update()}function wt(le){u(le),le.deltaY<0?y(E()):le.deltaY>0&&I(E()),n.update()}function Ze(le){let Xe=!1;switch(le.code){case n.keys.UP:T(0,n.keyPanSpeed),Xe=!0;break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),Xe=!0;break;case n.keys.LEFT:T(n.keyPanSpeed,0),Xe=!0;break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),Xe=!0;break}Xe&&(le.preventDefault(),n.update())}function Pe(){if(U.length==1)A.set(U[0].pageX,U[0].pageY);else{const le=.5*(U[0].pageX+U[1].pageX),Xe=.5*(U[0].pageY+U[1].pageY);A.set(le,Xe)}}function ge(){if(U.length==1)C.set(U[0].pageX,U[0].pageY);else{const le=.5*(U[0].pageX+U[1].pageX),Xe=.5*(U[0].pageY+U[1].pageY);C.set(le,Xe)}}function Ge(){const le=U[0].pageX-U[1].pageX,Xe=U[0].pageY-U[1].pageY,de=Math.sqrt(le*le+Xe*Xe);F.set(0,de)}function je(){n.enableZoom&&Ge(),n.enablePan&&ge()}function yt(){n.enableZoom&&Ge(),n.enableRotate&&Pe()}function He(le){if(U.length==1)L.set(le.pageX,le.pageY);else{const de=ye(le),Re=.5*(le.pageX+de.x),Ue=.5*(le.pageY+de.y);L.set(Re,Ue)}N.subVectors(L,A).multiplyScalar(n.rotateSpeed);const Xe=n.domElement;Xe&&(a(2*Math.PI*N.x/Xe.clientHeight),p(2*Math.PI*N.y/Xe.clientHeight)),A.copy(L)}function nt(le){if(U.length==1)D.set(le.pageX,le.pageY);else{const Xe=ye(le),de=.5*(le.pageX+Xe.x),Re=.5*(le.pageY+Xe.y);D.set(de,Re)}k.subVectors(D,C).multiplyScalar(n.panSpeed),T(k.x,k.y),C.copy(D)}function Nt(le){const Xe=ye(le),de=le.pageX-Xe.x,Re=le.pageY-Xe.y,Ue=Math.sqrt(de*de+Re*Re);Q.set(0,Ue),G.set(0,Math.pow(Q.y/F.y,n.zoomSpeed)),I(G.y),F.copy(Q)}function fe(le){n.enableZoom&&Nt(le),n.enablePan&&nt(le)}function oe(le){n.enableZoom&&Nt(le),n.enableRotate&&He(le)}function Oe(le){var Xe,de;n.enabled!==!1&&(U.length===0&&((Xe=n.domElement)==null||Xe.ownerDocument.addEventListener("pointermove",Te),(de=n.domElement)==null||de.ownerDocument.addEventListener("pointerup",Le)),q(le),le.pointerType==="touch"?ut(le):ot(le))}function Te(le){n.enabled!==!1&&(le.pointerType==="touch"?re(le):et(le))}function Le(le){var Xe,de,Re;ue(le),U.length===0&&((Xe=n.domElement)==null||Xe.releasePointerCapture(le.pointerId),(de=n.domElement)==null||de.ownerDocument.removeEventListener("pointermove",Te),(Re=n.domElement)==null||Re.ownerDocument.removeEventListener("pointerup",Le)),n.dispatchEvent(o),c=l.NONE}function ot(le){let Xe;switch(le.button){case 0:Xe=n.mouseButtons.LEFT;break;case 1:Xe=n.mouseButtons.MIDDLE;break;case 2:Xe=n.mouseButtons.RIGHT;break;default:Xe=-1}switch(Xe){case vh.DOLLY:if(n.enableZoom===!1)return;$(le),c=l.DOLLY;break;case vh.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enablePan===!1)return;se(le),c=l.PAN}else{if(n.enableRotate===!1)return;W(le),c=l.ROTATE}break;case vh.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enableRotate===!1)return;W(le),c=l.ROTATE}else{if(n.enablePan===!1)return;se(le),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function et(le){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;me(le);break;case l.DOLLY:if(n.enableZoom===!1)return;_e(le);break;case l.PAN:if(n.enablePan===!1)return;be(le);break}}function Ye(le){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(le.preventDefault(),n.dispatchEvent(s),wt(le),n.dispatchEvent(o))}function Et(le){n.enabled===!1||n.enablePan===!1||Ze(le)}function ut(le){switch(ve(le),U.length){case 1:switch(n.touches.ONE){case wh.ROTATE:if(n.enableRotate===!1)return;Pe(),c=l.TOUCH_ROTATE;break;case wh.PAN:if(n.enablePan===!1)return;ge(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case wh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;je(),c=l.TOUCH_DOLLY_PAN;break;case wh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;yt(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function re(le){switch(ve(le),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;He(le),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;nt(le),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;fe(le),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;oe(le),n.update();break;default:c=l.NONE}}function j(le){n.enabled!==!1&&le.preventDefault()}function q(le){U.push(le)}function ue(le){delete V[le.pointerId];for(let Xe=0;Xe<U.length;Xe++)if(U[Xe].pointerId==le.pointerId){U.splice(Xe,1);return}}function ve(le){let Xe=V[le.pointerId];Xe===void 0&&(Xe=new St,V[le.pointerId]=Xe),Xe.set(le.pageX,le.pageY)}function ye(le){const Xe=le.pointerId===U[0].pointerId?U[1]:U[0];return V[Xe.pointerId]}this.dollyIn=(le=E())=>{y(le),n.update()},this.dollyOut=(le=E())=>{I(le),n.update()},this.getScale=()=>_,this.setScale=le=>{P(le),n.update()},this.getZoomScale=()=>E(),t!==void 0&&this.connect(t),this.update()}};const Koe=Ce.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:c,...d},h)=>{const w=Vc(G=>G.invalidate),_=Vc(G=>G.camera),x=Vc(G=>G.gl),A=Vc(G=>G.events),L=Vc(G=>G.setEvents),N=Vc(G=>G.set),C=Vc(G=>G.get),D=Vc(G=>G.performance),k=e||_,F=n||A.connected||x.domElement,Q=Ce.useMemo(()=>new qoe(k),[k]);return Vy(()=>{Q.enabled&&Q.update()},-1),Ce.useEffect(()=>(s&&Q.connect(s===!0?F:s),Q.connect(F),()=>void Q.dispose()),[s,F,t,Q,w]),Ce.useEffect(()=>{const G=te=>{w(),t&&D.regress(),o&&o(te)},Y=te=>{l&&l(te)},ee=te=>{c&&c(te)};return Q.addEventListener("change",G),Q.addEventListener("start",Y),Q.addEventListener("end",ee),()=>{Q.removeEventListener("start",Y),Q.removeEventListener("end",ee),Q.removeEventListener("change",G)}},[o,l,c,Q,w,L]),Ce.useEffect(()=>{if(r){const G=C().controls;return N({controls:Q}),()=>N({controls:G})}},[r,Q]),Ce.createElement("primitive",py({ref:h,object:Q,enableDamping:i},d))});var Yoe=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class Xoe extends LR{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${Yoe}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const $oe=Ce.forwardRef(({speed:r=1,...e},t)=>{const[n]=Ce.useState(()=>new Xoe);return Vy(i=>n&&(n.time=i.clock.elapsedTime*r)),Ce.createElement("primitive",py({object:n,ref:t,attach:"material"},e))});function Zoe(r,e){const t=r+"Geometry";return Ce.forwardRef(({args:n,children:i,...s},o)=>{const l=Ce.useRef(null);return Ce.useImperativeHandle(o,()=>l.current),Ce.useLayoutEffect(()=>void(e==null?void 0:e(l.current))),Ce.createElement("mesh",py({ref:l},s),Ce.createElement(t,{attach:"geometry",args:n}),i)})}const Qoe=Zoe("sphere"),Joe=Ce.forwardRef(({children:r,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...l},c)=>{const d=Ce.useRef(null);Ce.useImperativeHandle(c,()=>d.current,[]);const h=Ce.useRef(Math.random()*1e4);return Vy(w=>{var _,x;if(!e||t===0)return;o&&w.invalidate();const A=h.current+w.clock.elapsedTime;d.current.rotation.x=Math.cos(A/4*t)/8*n,d.current.rotation.y=Math.sin(A/4*t)/8*n,d.current.rotation.z=Math.sin(A/4*t)/20*n;let L=Math.sin(A/4*t)/10;L=F6.mapLinear(L,-.1,.1,(_=s==null?void 0:s[0])!==null&&_!==void 0?_:-.1,(x=s==null?void 0:s[1])!==null&&x!==void 0?x:.1),d.current.position.y=L*i,d.current.updateMatrix()}),Ce.createElement("group",l,Ce.createElement("group",{ref:d,matrixAutoUpdate:!1},r))});function ab({position:r,color:e}){const t=Ce.useRef(null);return Vy(n=>{t.current&&(t.current.rotation.x=n.clock.getElapsedTime()*.2,t.current.rotation.y=n.clock.getElapsedTime()*.3)}),Xt.jsx(Joe,{speed:2,rotationIntensity:1,floatIntensity:2,children:Xt.jsx(Qoe,{ref:t,args:[1,64,64],position:r,children:Xt.jsx($oe,{color:e,attach:"material",distort:.4,speed:2,roughness:.2,metalness:.8})})})}function eae(){const r=Ce.useRef(null),e=1e3,t=new Float32Array(e*3);for(let n=0;n<e*3;n++)t[n]=(Math.random()-.5)*20;return Vy(n=>{r.current&&(r.current.rotation.y=n.clock.getElapsedTime()*.05)}),Xt.jsxs("points",{ref:r,children:[Xt.jsx("bufferGeometry",{children:Xt.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:t,itemSize:3})}),Xt.jsx("pointsMaterial",{size:.02,color:"#8a2be2",transparent:!0,opacity:.6})]})}function tae(){return Xt.jsxs(Uoe,{camera:{position:[0,0,8],fov:50},children:[Xt.jsx("ambientLight",{intensity:.5}),Xt.jsx("pointLight",{position:[10,10,10],intensity:1}),Xt.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#764ba2"}),Xt.jsx(ab,{position:[-2,1,0],color:"#667eea"}),Xt.jsx(ab,{position:[2,-1,-2],color:"#764ba2"}),Xt.jsx(ab,{position:[0,2,-1],color:"#f093fb"}),Xt.jsx(eae,{}),Xt.jsx(Koe,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.5})]})}function nae(){const r=xb.Devnet,e=Ce.useMemo(()=>EO(r),[r]),t=Ce.useMemo(()=>[new dG,new _G],[]);return Xt.jsx(o7,{endpoint:e,children:Xt.jsx(eG,{wallets:t,autoConnect:!0,children:Xt.jsxs(aG,{children:[Xt.jsx("div",{className:"bg-gradient"}),Xt.jsx("div",{className:"stars"}),Xt.jsx("div",{className:"canvas-container",children:Xt.jsx(Ce.Suspense,{fallback:null,children:Xt.jsx(tae,{})})}),Xt.jsx(UZ,{})]})})})}K5.createRoot(document.getElementById("root")).render(Xt.jsx(Ut.StrictMode,{children:Xt.jsx(nae,{})}));export{HA as E,Mt as P,Iu as S,ur as T,Dg as V,$i as a,zp as b,Ya as g};
