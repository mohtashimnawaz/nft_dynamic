var QF=Object.defineProperty;var JF=(r,e,t)=>e in r?QF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var bi=(r,e,t)=>JF(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Xa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function G1(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var IS={exports:{}},Om={},NS={exports:{}},nr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P2;function ez(){if(P2)return nr;P2=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.iterator;function _(v){return v===null||typeof v!="object"?null:(v=y&&v[y]||v["@@iterator"],typeof v=="function"?v:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function I(v,u,S){this.props=v,this.context=u,this.refs=P,this.updater=S||x}I.prototype.isReactComponent={},I.prototype.setState=function(v,u){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,u,"setState")},I.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function C(){}C.prototype=I.prototype;function D(v,u,S){this.props=v,this.context=u,this.refs=P,this.updater=S||x}var k=D.prototype=new C;k.constructor=D,A(k,I.prototype),k.isPureReactComponent=!0;var F=Array.isArray,Q=Object.prototype.hasOwnProperty,G={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function ee(v,u,S){var W,$={},se=null,me=null;if(u!=null)for(W in u.ref!==void 0&&(me=u.ref),u.key!==void 0&&(se=""+u.key),u)Q.call(u,W)&&!Y.hasOwnProperty(W)&&($[W]=u[W]);var _e=arguments.length-2;if(_e===1)$.children=S;else if(1<_e){for(var Ae=Array(_e),_t=0;_t<_e;_t++)Ae[_t]=arguments[_t+2];$.children=Ae}if(v&&v.defaultProps)for(W in _e=v.defaultProps,_e)$[W]===void 0&&($[W]=_e[W]);return{$$typeof:r,type:v,key:se,ref:me,props:$,_owner:G.current}}function te(v,u){return{$$typeof:r,type:v.type,key:u,ref:v.ref,props:v.props,_owner:v._owner}}function U(v){return typeof v=="object"&&v!==null&&v.$$typeof===r}function V(v){var u={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(S){return u[S]})}var K=/\/+/g;function E(v,u){return typeof v=="object"&&v!==null&&v.key!=null?V(""+v.key):u.toString(36)}function a(v,u,S,W,$){var se=typeof v;(se==="undefined"||se==="boolean")&&(v=null);var me=!1;if(v===null)me=!0;else switch(se){case"string":case"number":me=!0;break;case"object":switch(v.$$typeof){case r:case e:me=!0}}if(me)return me=v,$=$(me),v=W===""?"."+E(me,0):W,F($)?(S="",v!=null&&(S=v.replace(K,"$&/")+"/"),a($,u,S,"",function(_t){return _t})):$!=null&&(U($)&&($=te($,S+(!$.key||me&&me.key===$.key?"":(""+$.key).replace(K,"$&/")+"/")+v)),u.push($)),1;if(me=0,W=W===""?".":W+":",F(v))for(var _e=0;_e<v.length;_e++){se=v[_e];var Ae=W+E(se,_e);me+=a(se,u,S,Ae,$)}else if(Ae=_(v),typeof Ae=="function")for(v=Ae.call(v),_e=0;!(se=v.next()).done;)se=se.value,Ae=W+E(se,_e++),me+=a(se,u,S,Ae,$);else if(se==="object")throw u=String(v),Error("Objects are not valid as a React child (found: "+(u==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":u)+"). If you meant to render a collection of children, use an array instead.");return me}function p(v,u,S){if(v==null)return v;var W=[],$=0;return a(v,W,"","",function(se){return u.call(S,se,$++)}),W}function M(v){if(v._status===-1){var u=v._result;u=u(),u.then(function(S){(v._status===0||v._status===-1)&&(v._status=1,v._result=S)},function(S){(v._status===0||v._status===-1)&&(v._status=2,v._result=S)}),v._status===-1&&(v._status=0,v._result=u)}if(v._status===1)return v._result.default;throw v._result}var R={current:null},T={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:T,ReactCurrentOwner:G};function N(){throw Error("act(...) is not supported in production builds of React.")}return nr.Children={map:p,forEach:function(v,u,S){p(v,function(){u.apply(this,arguments)},S)},count:function(v){var u=0;return p(v,function(){u++}),u},toArray:function(v){return p(v,function(u){return u})||[]},only:function(v){if(!U(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},nr.Component=I,nr.Fragment=t,nr.Profiler=i,nr.PureComponent=D,nr.StrictMode=n,nr.Suspense=c,nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,nr.act=N,nr.cloneElement=function(v,u,S){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var W=A({},v.props),$=v.key,se=v.ref,me=v._owner;if(u!=null){if(u.ref!==void 0&&(se=u.ref,me=G.current),u.key!==void 0&&($=""+u.key),v.type&&v.type.defaultProps)var _e=v.type.defaultProps;for(Ae in u)Q.call(u,Ae)&&!Y.hasOwnProperty(Ae)&&(W[Ae]=u[Ae]===void 0&&_e!==void 0?_e[Ae]:u[Ae])}var Ae=arguments.length-2;if(Ae===1)W.children=S;else if(1<Ae){_e=Array(Ae);for(var _t=0;_t<Ae;_t++)_e[_t]=arguments[_t+2];W.children=_e}return{$$typeof:r,type:v.type,key:$,ref:se,props:W,_owner:me}},nr.createContext=function(v){return v={$$typeof:o,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:s,_context:v},v.Consumer=v},nr.createElement=ee,nr.createFactory=function(v){var u=ee.bind(null,v);return u.type=v,u},nr.createRef=function(){return{current:null}},nr.forwardRef=function(v){return{$$typeof:l,render:v}},nr.isValidElement=U,nr.lazy=function(v){return{$$typeof:h,_payload:{_status:-1,_result:v},_init:M}},nr.memo=function(v,u){return{$$typeof:d,type:v,compare:u===void 0?null:u}},nr.startTransition=function(v){var u=T.transition;T.transition={};try{v()}finally{T.transition=u}},nr.unstable_act=N,nr.useCallback=function(v,u){return R.current.useCallback(v,u)},nr.useContext=function(v){return R.current.useContext(v)},nr.useDebugValue=function(){},nr.useDeferredValue=function(v){return R.current.useDeferredValue(v)},nr.useEffect=function(v,u){return R.current.useEffect(v,u)},nr.useId=function(){return R.current.useId()},nr.useImperativeHandle=function(v,u,S){return R.current.useImperativeHandle(v,u,S)},nr.useInsertionEffect=function(v,u){return R.current.useInsertionEffect(v,u)},nr.useLayoutEffect=function(v,u){return R.current.useLayoutEffect(v,u)},nr.useMemo=function(v,u){return R.current.useMemo(v,u)},nr.useReducer=function(v,u,S){return R.current.useReducer(v,u,S)},nr.useRef=function(v){return R.current.useRef(v)},nr.useState=function(v){return R.current.useState(v)},nr.useSyncExternalStore=function(v,u,S){return R.current.useSyncExternalStore(v,u,S)},nr.useTransition=function(){return R.current.useTransition()},nr.version="18.3.1",nr}var L2;function j1(){return L2||(L2=1,NS.exports=ez()),NS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function tz(){if(k2)return Om;k2=1;var r=j1(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var h,y={},_=null,x=null;d!==void 0&&(_=""+d),c.key!==void 0&&(_=""+c.key),c.ref!==void 0&&(x=c.ref);for(h in c)n.call(c,h)&&!s.hasOwnProperty(h)&&(y[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)y[h]===void 0&&(y[h]=c[h]);return{$$typeof:e,type:l,key:_,ref:x,props:y,_owner:i.current}}return Om.Fragment=t,Om.jsx=o,Om.jsxs=o,Om}var O2;function nz(){return O2||(O2=1,IS.exports=tz()),IS.exports}var lt=nz(),Se=j1();const Ft=Xa(Se);var Vv={},PS={exports:{}},ho={},LS={exports:{}},kS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function rz(){return D2||(D2=1,(function(r){function e(T,L){var N=T.length;T.push(L);e:for(;0<N;){var v=N-1>>>1,u=T[v];if(0<i(u,L))T[v]=L,T[N]=u,N=v;else break e}}function t(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var L=T[0],N=T.pop();if(N!==L){T[0]=N;e:for(var v=0,u=T.length,S=u>>>1;v<S;){var W=2*(v+1)-1,$=T[W],se=W+1,me=T[se];if(0>i($,N))se<u&&0>i(me,$)?(T[v]=me,T[se]=N,v=se):(T[v]=$,T[W]=N,v=W);else if(se<u&&0>i(me,N))T[v]=me,T[se]=N,v=se;else break e}}return L}function i(T,L){var N=T.sortIndex-L.sortIndex;return N!==0?N:T.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,y=null,_=3,x=!1,A=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(T){for(var L=t(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=T)n(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=t(d)}}function F(T){if(P=!1,k(T),!A)if(t(c)!==null)A=!0,M(Q);else{var L=t(d);L!==null&&R(F,L.startTime-T)}}function Q(T,L){A=!1,P&&(P=!1,C(ee),ee=-1),x=!0;var N=_;try{for(k(L),y=t(c);y!==null&&(!(y.expirationTime>L)||T&&!V());){var v=y.callback;if(typeof v=="function"){y.callback=null,_=y.priorityLevel;var u=v(y.expirationTime<=L);L=r.unstable_now(),typeof u=="function"?y.callback=u:y===t(c)&&n(c),k(L)}else n(c);y=t(c)}if(y!==null)var S=!0;else{var W=t(d);W!==null&&R(F,W.startTime-L),S=!1}return S}finally{y=null,_=N,x=!1}}var G=!1,Y=null,ee=-1,te=5,U=-1;function V(){return!(r.unstable_now()-U<te)}function K(){if(Y!==null){var T=r.unstable_now();U=T;var L=!0;try{L=Y(!0,T)}finally{L?E():(G=!1,Y=null)}}else G=!1}var E;if(typeof D=="function")E=function(){D(K)};else if(typeof MessageChannel<"u"){var a=new MessageChannel,p=a.port2;a.port1.onmessage=K,E=function(){p.postMessage(null)}}else E=function(){I(K,0)};function M(T){Y=T,G||(G=!0,E())}function R(T,L){ee=I(function(){T(r.unstable_now())},L)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_continueExecution=function(){A||x||(A=!0,M(Q))},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(T){switch(_){case 1:case 2:case 3:var L=3;break;default:L=_}var N=_;_=L;try{return T()}finally{_=N}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var N=_;_=T;try{return L()}finally{_=N}},r.unstable_scheduleCallback=function(T,L,N){var v=r.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?v+N:v):N=v,T){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return u=N+u,T={id:h++,callback:L,priorityLevel:T,startTime:N,expirationTime:u,sortIndex:-1},N>v?(T.sortIndex=N,e(d,T),t(c)===null&&T===t(d)&&(P?(C(ee),ee=-1):P=!0,R(F,N-v))):(T.sortIndex=u,e(c,T),A||x||(A=!0,M(Q))),T},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(T){var L=_;return function(){var N=_;_=L;try{return T.apply(this,arguments)}finally{_=N}}}})(kS)),kS}var B2;function iz(){return B2||(B2=1,LS.exports=rz()),LS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2;function sz(){if(U2)return ho;U2=1;var r=j1(),e=iz();function t(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(f,m){o(f,m),o(f+"Capture",m)}function o(f,m){for(i[f]=m,f=0;f<m.length;f++)n.add(m[f])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},y={};function _(f){return c.call(y,f)?!0:c.call(h,f)?!1:d.test(f)?y[f]=!0:(h[f]=!0,!1)}function x(f,m,b,B){if(b!==null&&b.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return B?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function A(f,m,b,B){if(m===null||typeof m>"u"||x(f,m,b,B))return!0;if(B)return!1;if(b!==null)switch(b.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function P(f,m,b,B,H,ne,ce){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=B,this.attributeNamespace=H,this.mustUseProperty=b,this.propertyName=f,this.type=m,this.sanitizeURL=ne,this.removeEmptyString=ce}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){I[f]=new P(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];I[m]=new P(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){I[f]=new P(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){I[f]=new P(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){I[f]=new P(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){I[f]=new P(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){I[f]=new P(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){I[f]=new P(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){I[f]=new P(f,5,!1,f.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function D(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(C,D);I[m]=new P(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(C,D);I[m]=new P(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(C,D);I[m]=new P(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){I[f]=new P(f,1,!1,f.toLowerCase(),null,!1,!1)}),I.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){I[f]=new P(f,1,!1,f.toLowerCase(),null,!0,!0)});function k(f,m,b,B){var H=I.hasOwnProperty(m)?I[m]:null;(H!==null?H.type!==0:B||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(A(m,b,H,B)&&(b=null),B||H===null?_(m)&&(b===null?f.removeAttribute(m):f.setAttribute(m,""+b)):H.mustUseProperty?f[H.propertyName]=b===null?H.type===3?!1:"":b:(m=H.attributeName,B=H.attributeNamespace,b===null?f.removeAttribute(m):(H=H.type,b=H===3||H===4&&b===!0?"":""+b,B?f.setAttributeNS(B,m,b):f.setAttribute(m,b))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),G=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),V=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),a=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),T=Symbol.iterator;function L(f){return f===null||typeof f!="object"?null:(f=T&&f[T]||f["@@iterator"],typeof f=="function"?f:null)}var N=Object.assign,v;function u(f){if(v===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);v=m&&m[1]||""}return`
`+v+f}var S=!1;function W(f,m){if(!f||S)return"";S=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ut){var B=ut}Reflect.construct(f,[],m)}else{try{m.call()}catch(ut){B=ut}f.call(m.prototype)}else{try{throw Error()}catch(ut){B=ut}f()}}catch(ut){if(ut&&B&&typeof ut.stack=="string"){for(var H=ut.stack.split(`
`),ne=B.stack.split(`
`),ce=H.length-1,Me=ne.length-1;1<=ce&&0<=Me&&H[ce]!==ne[Me];)Me--;for(;1<=ce&&0<=Me;ce--,Me--)if(H[ce]!==ne[Me]){if(ce!==1||Me!==1)do if(ce--,Me--,0>Me||H[ce]!==ne[Me]){var ke=`
`+H[ce].replace(" at new "," at ");return f.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",f.displayName)),ke}while(1<=ce&&0<=Me);break}}}finally{S=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?u(f):""}function $(f){switch(f.tag){case 5:return u(f.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 2:case 15:return f=W(f.type,!1),f;case 11:return f=W(f.type.render,!1),f;case 1:return f=W(f.type,!0),f;default:return""}}function se(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case Y:return"Fragment";case G:return"Portal";case te:return"Profiler";case ee:return"StrictMode";case E:return"Suspense";case a:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case V:return(f.displayName||"Context")+".Consumer";case U:return(f._context.displayName||"Context")+".Provider";case K:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case p:return m=f.displayName||null,m!==null?m:se(f.type)||"Memo";case M:m=f._payload,f=f._init;try{return se(f(m))}catch{}}return null}function me(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(m);case 8:return m===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function _e(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Ae(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function _t(f){var m=Ae(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),B=""+f[m];if(!f.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var H=b.get,ne=b.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return H.call(this)},set:function(ce){B=""+ce,ne.call(this,ce)}}),Object.defineProperty(f,m,{enumerable:b.enumerable}),{getValue:function(){return B},setValue:function(ce){B=""+ce},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Ze(f){f._valueTracker||(f._valueTracker=_t(f))}function Pe(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var b=m.getValue(),B="";return f&&(B=Ae(f)?f.checked?"true":"false":f.value),f=B,f!==b?(m.setValue(f),!0):!1}function ge(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Ge(f,m){var b=m.checked;return N({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function je(f,m){var b=m.defaultValue==null?"":m.defaultValue,B=m.checked!=null?m.checked:m.defaultChecked;b=_e(m.value!=null?m.value:b),f._wrapperState={initialChecked:B,initialValue:b,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function vt(f,m){m=m.checked,m!=null&&k(f,"checked",m,!1)}function He(f,m){vt(f,m);var b=_e(m.value),B=m.type;if(b!=null)B==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(B==="submit"||B==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?Pt(f,m.type,b):m.hasOwnProperty("defaultValue")&&Pt(f,m.type,_e(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function nt(f,m,b){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var B=m.type;if(!(B!=="submit"&&B!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,b||m===f.value||(f.value=m),f.defaultValue=m}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function Pt(f,m,b){(m!=="number"||ge(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var fe=Array.isArray;function oe(f,m,b,B){if(f=f.options,m){m={};for(var H=0;H<b.length;H++)m["$"+b[H]]=!0;for(b=0;b<f.length;b++)H=m.hasOwnProperty("$"+f[b].value),f[b].selected!==H&&(f[b].selected=H),H&&B&&(f[b].defaultSelected=!0)}else{for(b=""+_e(b),m=null,H=0;H<f.length;H++){if(f[H].value===b){f[H].selected=!0,B&&(f[H].defaultSelected=!0);return}m!==null||f[H].disabled||(m=f[H])}m!==null&&(m.selected=!0)}}function Oe(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return N({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Re(f,m){var b=m.value;if(b==null){if(b=m.children,m=m.defaultValue,b!=null){if(m!=null)throw Error(t(92));if(fe(b)){if(1<b.length)throw Error(t(93));b=b[0]}m=b}m==null&&(m=""),b=m}f._wrapperState={initialValue:_e(b)}}function Le(f,m){var b=_e(m.value),B=_e(m.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),m.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),B!=null&&(f.defaultValue=""+B)}function ot(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function et(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ye(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?et(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var bt,ct=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,b,B,H){MSApp.execUnsafeLocalFunction(function(){return f(m,b,B,H)})}:f})(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(bt=bt||document.createElement("div"),bt.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=bt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function re(f,m){if(m){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=m;return}}f.textContent=m}var j={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q=["Webkit","ms","Moz","O"];Object.keys(j).forEach(function(f){q.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),j[m]=j[f]})});function ue(f,m,b){return m==null||typeof m=="boolean"||m===""?"":b||typeof m!="number"||m===0||j.hasOwnProperty(f)&&j[f]?(""+m).trim():m+"px"}function we(f,m){f=f.style;for(var b in m)if(m.hasOwnProperty(b)){var B=b.indexOf("--")===0,H=ue(b,m[b],B);b==="float"&&(b="cssFloat"),B?f.setProperty(b,H):f[b]=H}}var ye=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function le(f,m){if(m){if(ye[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Xe(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var de=null;function Ce(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Ue=null,Ee=null,qe=null;function Ct(f){if(f=wa(f)){if(typeof Ue!="function")throw Error(t(280));var m=f.stateNode;m&&(m=Xd(m),Ue(f.stateNode,f.type,m))}}function ft(f){Ee?qe?qe.push(f):qe=[f]:Ee=f}function yt(){if(Ee){var f=Ee,m=qe;if(qe=Ee=null,Ct(f),m)for(f=0;f<m.length;f++)Ct(m[f])}}function Sn(f,m){return f(m)}function dt(){}var ae=!1;function J(f,m,b){if(ae)return f(m,b);ae=!0;try{return Sn(f,m,b)}finally{ae=!1,(Ee!==null||qe!==null)&&(dt(),yt())}}function X(f,m){var b=f.stateNode;if(b===null)return null;var B=Xd(b);if(B===null)return null;b=B[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(f=f.type,B=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!B;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(t(231,m,typeof b));return b}var he=!1;if(l)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){he=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch{he=!1}function Te(f,m,b,B,H,ne,ce,Me,ke){var ut=Array.prototype.slice.call(arguments,3);try{m.apply(b,ut)}catch(It){this.onError(It)}}var Ne=!1,dn=null,gt=!1,xt=null,Dn={onError:function(f){Ne=!0,dn=f}};function wt(f,m,b,B,H,ne,ce,Me,ke){Ne=!1,dn=null,Te.apply(Dn,arguments)}function kt(f,m,b,B,H,ne,ce,Me,ke){if(wt.apply(this,arguments),Ne){if(Ne){var ut=dn;Ne=!1,dn=null}else throw Error(t(198));gt||(gt=!0,xt=ut)}}function Pr(f){var m=f,b=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(b=m.return),f=m.return;while(f)}return m.tag===3?b:null}function Dt(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function Ot(f){if(Pr(f)!==f)throw Error(t(188))}function pe(f){var m=f.alternate;if(!m){if(m=Pr(f),m===null)throw Error(t(188));return m!==f?null:f}for(var b=f,B=m;;){var H=b.return;if(H===null)break;var ne=H.alternate;if(ne===null){if(B=H.return,B!==null){b=B;continue}break}if(H.child===ne.child){for(ne=H.child;ne;){if(ne===b)return Ot(H),f;if(ne===B)return Ot(H),m;ne=ne.sibling}throw Error(t(188))}if(b.return!==B.return)b=H,B=ne;else{for(var ce=!1,Me=H.child;Me;){if(Me===b){ce=!0,b=H,B=ne;break}if(Me===B){ce=!0,B=H,b=ne;break}Me=Me.sibling}if(!ce){for(Me=ne.child;Me;){if(Me===b){ce=!0,b=ne,B=H;break}if(Me===B){ce=!0,B=ne,b=H;break}Me=Me.sibling}if(!ce)throw Error(t(189))}}if(b.alternate!==B)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?f:m}function De(f){return f=pe(f),f!==null?$e(f):null}function $e(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=$e(f);if(m!==null)return m;f=f.sibling}return null}var Qe=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,Tt=e.unstable_shouldYield,zt=e.unstable_requestPaint,At=e.unstable_now,Ht=e.unstable_getCurrentPriorityLevel,rn=e.unstable_ImmediatePriority,on=e.unstable_UserBlockingPriority,Kt=e.unstable_NormalPriority,Tn=e.unstable_LowPriority,Rn=e.unstable_IdlePriority,En=null,un=null;function $t(f){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(En,f,void 0,(f.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:Wr,Mn=Math.log,On=Math.LN2;function Wr(f){return f>>>=0,f===0?32:31-(Mn(f)/On|0)|0}var vi=64,sr=4194304;function Yt(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function mt(f,m){var b=f.pendingLanes;if(b===0)return 0;var B=0,H=f.suspendedLanes,ne=f.pingedLanes,ce=b&268435455;if(ce!==0){var Me=ce&~H;Me!==0?B=Yt(Me):(ne&=ce,ne!==0&&(B=Yt(ne)))}else ce=b&~H,ce!==0?B=Yt(ce):ne!==0&&(B=Yt(ne));if(B===0)return 0;if(m!==0&&m!==B&&(m&H)===0&&(H=B&-B,ne=m&-m,H>=ne||H===16&&(ne&4194240)!==0))return m;if((B&4)!==0&&(B|=b&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=B;0<m;)b=31-Bt(m),H=1<<b,B|=f[b],m&=~H;return B}function Ve(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fe(f,m){for(var b=f.suspendedLanes,B=f.pingedLanes,H=f.expirationTimes,ne=f.pendingLanes;0<ne;){var ce=31-Bt(ne),Me=1<<ce,ke=H[ce];ke===-1?((Me&b)===0||(Me&B)!==0)&&(H[ce]=Ve(Me,m)):ke<=m&&(f.expiredLanes|=Me),ne&=~Me}}function St(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Ut(){var f=vi;return vi<<=1,(vi&4194240)===0&&(vi=64),f}function jt(f){for(var m=[],b=0;31>b;b++)m.push(f);return m}function cn(f,m,b){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Bt(m),f[m]=b}function zn(f,m){var b=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var B=f.eventTimes;for(f=f.expirationTimes;0<b;){var H=31-Bt(b),ne=1<<H;m[H]=0,B[H]=-1,f[H]=-1,b&=~ne}}function Wn(f,m){var b=f.entangledLanes|=m;for(f=f.entanglements;b;){var B=31-Bt(b),H=1<<B;H&m|f[B]&m&&(f[B]|=m),b&=~H}}var Cn=0;function eo(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Dl,pf,$y,yd,vd,Bl=!1,wd=[],Ko=null,Yn=null,fa=null,Ul=new Map,Ju=new Map,Qa=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ci(f,m){switch(f){case"focusin":case"focusout":Ko=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Ul.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(m.pointerId)}}function Fl(f,m,b,B,H,ne){return f===null||f.nativeEvent!==ne?(f={blockedOn:m,domEventName:b,eventSystemFlags:B,nativeEvent:ne,targetContainers:[H]},m!==null&&(m=wa(m),m!==null&&pf(m)),f):(f.eventSystemFlags|=B,m=f.targetContainers,H!==null&&m.indexOf(H)===-1&&m.push(H),f)}function nS(f,m,b,B,H){switch(m){case"focusin":return Ko=Fl(Ko,f,m,b,B,H),!0;case"dragenter":return Yn=Fl(Yn,f,m,b,B,H),!0;case"mouseover":return fa=Fl(fa,f,m,b,B,H),!0;case"pointerover":var ne=H.pointerId;return Ul.set(ne,Fl(Ul.get(ne)||null,f,m,b,B,H)),!0;case"gotpointercapture":return ne=H.pointerId,Ju.set(ne,Fl(Ju.get(ne)||null,f,m,b,B,H)),!0}return!1}function _d(f){var m=sl(f.target);if(m!==null){var b=Pr(m);if(b!==null){if(m=b.tag,m===13){if(m=Dt(b),m!==null){f.blockedOn=m,vd(f.priority,function(){$y(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function xd(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var b=no(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var B=new b.constructor(b.type,b);de=B,b.target.dispatchEvent(B),de=null}else return m=wa(b),m!==null&&pf(m),f.blockedOn=b,!1;m.shift()}return!0}function mf(f,m,b){xd(f)&&b.delete(m)}function Yo(){Bl=!1,Ko!==null&&xd(Ko)&&(Ko=null),Yn!==null&&xd(Yn)&&(Yn=null),fa!==null&&xd(fa)&&(fa=null),Ul.forEach(mf),Ju.forEach(mf)}function gf(f,m){f.blockedOn===m&&(f.blockedOn=null,Bl||(Bl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yo)))}function yf(f){function m(H){return gf(H,f)}if(0<wd.length){gf(wd[0],f);for(var b=1;b<wd.length;b++){var B=wd[b];B.blockedOn===f&&(B.blockedOn=null)}}for(Ko!==null&&gf(Ko,f),Yn!==null&&gf(Yn,f),fa!==null&&gf(fa,f),Ul.forEach(m),Ju.forEach(m),b=0;b<Qa.length;b++)B=Qa[b],B.blockedOn===f&&(B.blockedOn=null);for(;0<Qa.length&&(b=Qa[0],b.blockedOn===null);)_d(b),b.blockedOn===null&&Qa.shift()}var ns=F.ReactCurrentBatchConfig,to=!0;function Sd(f,m,b,B){var H=Cn,ne=ns.transition;ns.transition=null;try{Cn=1,Md(f,m,b,B)}finally{Cn=H,ns.transition=ne}}function V0(f,m,b,B){var H=Cn,ne=ns.transition;ns.transition=null;try{Cn=4,Md(f,m,b,B)}finally{Cn=H,ns.transition=ne}}function Md(f,m,b,B){if(to){var H=no(f,m,b,B);if(H===null)Hd(f,m,B,Ed,b),ci(f,B);else if(nS(H,f,m,b,B))B.stopPropagation();else if(ci(f,B),m&4&&-1<tS.indexOf(f)){for(;H!==null;){var ne=wa(H);if(ne!==null&&Dl(ne),ne=no(f,m,b,B),ne===null&&Hd(f,m,B,Ed,b),ne===H)break;H=ne}H!==null&&B.stopPropagation()}else Hd(f,m,B,null,b)}}var Ed=null;function no(f,m,b,B){if(Ed=null,f=Ce(B),f=sl(f),f!==null)if(m=Pr(f),m===null)f=null;else if(b=m.tag,b===13){if(f=Dt(m),f!==null)return f;f=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return Ed=f,null}function Zy(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ht()){case rn:return 1;case on:return 4;case Kt:case Tn:return 16;case Rn:return 536870912;default:return 16}default:return 16}}var Mo=null,H0=null,ms=null;function vf(){if(ms)return ms;var f,m=H0,b=m.length,B,H="value"in Mo?Mo.value:Mo.textContent,ne=H.length;for(f=0;f<b&&m[f]===H[f];f++);var ce=b-f;for(B=1;B<=ce&&m[b-B]===H[ne-B];B++);return ms=H.slice(f,1<B?1-B:void 0)}function zl(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function ha(){return!0}function bd(){return!1}function rs(f){function m(b,B,H,ne,ce){this._reactName=b,this._targetInst=H,this.type=B,this.nativeEvent=ne,this.target=ce,this.currentTarget=null;for(var Me in f)f.hasOwnProperty(Me)&&(b=f[Me],this[Me]=b?b(ne):ne[Me]);return this.isDefaultPrevented=(ne.defaultPrevented!=null?ne.defaultPrevented:ne.returnValue===!1)?ha:bd,this.isPropagationStopped=bd,this}return N(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),m}var Wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wf=rs(Wl),Vl=N({},Wl,{view:0,detail:0}),ec=rs(Vl),gs,ro,io,tc=N({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==io&&(io&&f.type==="mousemove"?(gs=f.screenX-io.screenX,ro=f.screenY-io.screenY):ro=gs=0,io=f),gs)},movementY:function(f){return"movementY"in f?f.movementY:ro}}),G0=rs(tc),da=N({},tc,{dataTransfer:0}),Ja=rs(da),Ad=N({},Vl,{relatedTarget:0}),Td=rs(Ad),Rd=N({},Wl,{animationName:0,elapsedTime:0,pseudoElement:0}),Qy=rs(Rd),Jy=N({},Wl,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),j0=rs(Jy),Cd=N({},Wl,{data:0}),q0=rs(Cd),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=K0[f])?!!m[f]:!1}function el(){return nc}var Id=N({},Vl,{key:function(f){if(f.key){var m=ev[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=zl(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?tv[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(f){return f.type==="keypress"?zl(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?zl(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Nd=rs(Id),so=N({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bs=rs(so),Hl=N({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),pa=rs(Hl),ma=N({},Wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gl=rs(ma),nv=N({},tc,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Y0=rs(nv),X0=[9,13,27,32],is=l&&"CompositionEvent"in window,Li=null;l&&"documentMode"in document&&(Li=document.documentMode);var Dr=l&&"TextEvent"in window&&!Li,rc=l&&(!is||Li&&8<Li&&11>=Li),oo=" ",$0=!1;function Z0(f,m){switch(f){case"keyup":return X0.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pd(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var tl=!1;function rv(f,m){switch(f){case"compositionend":return Pd(m);case"keypress":return m.which!==32?null:($0=!0,oo);case"textInput":return f=m.data,f===oo&&$0?null:f;default:return null}}function _f(f,m){if(tl)return f==="compositionend"||!is&&Z0(f,m)?(f=vf(),ms=H0=Mo=null,tl=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return rc&&m.locale!=="ko"?null:m.data;default:return null}}var ic={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ld(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!ic[f.type]:m==="textarea"}function sc(f,m,b,B){ft(B),m=Gd(m,"onChange"),0<m.length&&(b=new wf("onChange","change",null,b,B),f.push({event:b,listeners:m}))}var nl=null,oc=null;function iv(f){cc(f,0)}function ga(f){var m=Xr(f);if(Pe(m))return f}function sv(f,m){if(f==="change")return m}var ac=!1;if(l){var ys;if(l){var jl="oninput"in document;if(!jl){var ql=document.createElement("div");ql.setAttribute("oninput","return;"),jl=typeof ql.oninput=="function"}ys=jl}else ys=!1;ac=ys&&(!document.documentMode||9<document.documentMode)}function Eo(){nl&&(nl.detachEvent("onpropertychange",kd),oc=nl=null)}function kd(f){if(f.propertyName==="value"&&ga(oc)){var m=[];sc(m,oc,f,Ce(f)),J(iv,m)}}function lc(f,m,b){f==="focusin"?(Eo(),nl=m,oc=b,nl.attachEvent("onpropertychange",kd)):f==="focusout"&&Eo()}function ov(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return ga(oc)}function Q0(f,m){if(f==="click")return ga(m)}function Vr(f,m){if(f==="input"||f==="change")return ga(m)}function Od(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Us=typeof Object.is=="function"?Object.is:Od;function Kl(f,m){if(Us(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var b=Object.keys(f),B=Object.keys(m);if(b.length!==B.length)return!1;for(B=0;B<b.length;B++){var H=b[B];if(!c.call(m,H)||!Us(f[H],m[H]))return!1}return!0}function xf(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Fs(f,m){var b=xf(f);f=0;for(var B;b;){if(b.nodeType===3){if(B=f+b.textContent.length,f<=m&&B>=m)return{node:b,offset:m-f};f=B}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=xf(b)}}function Yl(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?Yl(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function Hr(){for(var f=window,m=ge();m instanceof f.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)f=m.contentWindow;else break;m=ge(f.document)}return m}function wi(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function _i(f){var m=Hr(),b=f.focusedElem,B=f.selectionRange;if(m!==b&&b&&b.ownerDocument&&Yl(b.ownerDocument.documentElement,b)){if(B!==null&&wi(b)){if(m=B.start,f=B.end,f===void 0&&(f=m),"selectionStart"in b)b.selectionStart=m,b.selectionEnd=Math.min(f,b.value.length);else if(f=(m=b.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var H=b.textContent.length,ne=Math.min(B.start,H);B=B.end===void 0?ne:Math.min(B.end,H),!f.extend&&ne>B&&(H=B,B=ne,ne=H),H=Fs(b,ne);var ce=Fs(b,B);H&&ce&&(f.rangeCount!==1||f.anchorNode!==H.node||f.anchorOffset!==H.offset||f.focusNode!==ce.node||f.focusOffset!==ce.offset)&&(m=m.createRange(),m.setStart(H.node,H.offset),f.removeAllRanges(),ne>B?(f.addRange(m),f.extend(ce.node,ce.offset)):(m.setEnd(ce.node,ce.offset),f.addRange(m)))}}for(m=[],f=b;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<m.length;b++)f=m[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Dd=l&&"documentMode"in document&&11>=document.documentMode,Xo=null,Xl=null,Sf=null,xi=!1;function Bd(f,m,b){var B=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;xi||Xo==null||Xo!==ge(B)||(B=Xo,"selectionStart"in B&&wi(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),Sf&&Kl(Sf,B)||(Sf=B,B=Gd(Xl,"onSelect"),0<B.length&&(m=new wf("onSelect","select",null,m,b),f.push({event:m,listeners:B}),m.target=Xo)))}function uc(f,m){var b={};return b[f.toLowerCase()]=m.toLowerCase(),b["Webkit"+f]="webkit"+m,b["Moz"+f]="moz"+m,b}var rl={animationend:uc("Animation","AnimationEnd"),animationiteration:uc("Animation","AnimationIteration"),animationstart:uc("Animation","AnimationStart"),transitionend:uc("Transition","TransitionEnd")},bo={},Ao={};l&&(Ao=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function $o(f){if(bo[f])return bo[f];if(!rl[f])return f;var m=rl[f],b;for(b in m)if(m.hasOwnProperty(b)&&b in Ao)return bo[f]=m[b];return f}var Mf=$o("animationend"),Ef=$o("animationiteration"),J0=$o("animationstart"),em=$o("transitionend"),tm=new Map,nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ya(f,m){tm.set(f,m),s(m,[f])}for(var Ud=0;Ud<nm.length;Ud++){var bf=nm[Ud],Af=bf.toLowerCase(),av=bf[0].toUpperCase()+bf.slice(1);ya(Af,"on"+av)}ya(Mf,"onAnimationEnd"),ya(Ef,"onAnimationIteration"),ya(J0,"onAnimationStart"),ya("dblclick","onDoubleClick"),ya("focusin","onFocus"),ya("focusout","onBlur"),ya(em,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fd=new Set("cancel close invalid load scroll toggle".split(" ").concat(il));function zd(f,m,b){var B=f.type||"unknown-event";f.currentTarget=b,kt(B,m,void 0,f),f.currentTarget=null}function cc(f,m){m=(m&4)!==0;for(var b=0;b<f.length;b++){var B=f[b],H=B.event;B=B.listeners;e:{var ne=void 0;if(m)for(var ce=B.length-1;0<=ce;ce--){var Me=B[ce],ke=Me.instance,ut=Me.currentTarget;if(Me=Me.listener,ke!==ne&&H.isPropagationStopped())break e;zd(H,Me,ut),ne=ke}else for(ce=0;ce<B.length;ce++){if(Me=B[ce],ke=Me.instance,ut=Me.currentTarget,Me=Me.listener,ke!==ne&&H.isPropagationStopped())break e;zd(H,Me,ut),ne=ke}}}if(gt)throw f=xt,gt=!1,xt=null,f}function Tr(f,m){var b=m[Ql];b===void 0&&(b=m[Ql]=new Set);var B=f+"__bubble";b.has(B)||(Vd(m,f,2,!1),b.add(B))}function Wd(f,m,b){var B=0;m&&(B|=4),Vd(b,f,B,m)}var Tf="_reactListening"+Math.random().toString(36).slice(2);function fc(f){if(!f[Tf]){f[Tf]=!0,n.forEach(function(b){b!=="selectionchange"&&(Fd.has(b)||Wd(b,!1,f),Wd(b,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[Tf]||(m[Tf]=!0,Wd("selectionchange",!1,m))}}function Vd(f,m,b,B){switch(Zy(m)){case 1:var H=Sd;break;case 4:H=V0;break;default:H=Md}b=H.bind(null,m,b,f),H=void 0,!he||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(H=!0),B?H!==void 0?f.addEventListener(m,b,{capture:!0,passive:H}):f.addEventListener(m,b,!0):H!==void 0?f.addEventListener(m,b,{passive:H}):f.addEventListener(m,b,!1)}function Hd(f,m,b,B,H){var ne=B;if((m&1)===0&&(m&2)===0&&B!==null)e:for(;;){if(B===null)return;var ce=B.tag;if(ce===3||ce===4){var Me=B.stateNode.containerInfo;if(Me===H||Me.nodeType===8&&Me.parentNode===H)break;if(ce===4)for(ce=B.return;ce!==null;){var ke=ce.tag;if((ke===3||ke===4)&&(ke=ce.stateNode.containerInfo,ke===H||ke.nodeType===8&&ke.parentNode===H))return;ce=ce.return}for(;Me!==null;){if(ce=sl(Me),ce===null)return;if(ke=ce.tag,ke===5||ke===6){B=ne=ce;continue e}Me=Me.parentNode}}B=B.return}J(function(){var ut=ne,It=Ce(b),Lt=[];e:{var Rt=tm.get(f);if(Rt!==void 0){var an=wf,pn=f;switch(f){case"keypress":if(zl(b)===0)break e;case"keydown":case"keyup":an=Nd;break;case"focusin":pn="focus",an=Td;break;case"focusout":pn="blur",an=Td;break;case"beforeblur":case"afterblur":an=Td;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":an=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":an=Ja;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":an=pa;break;case Mf:case Ef:case J0:an=Qy;break;case em:an=Gl;break;case"scroll":an=ec;break;case"wheel":an=Y0;break;case"copy":case"cut":case"paste":an=j0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":an=Bs}var gn=(m&4)!==0,hi=!gn&&f==="scroll",Je=gn?Rt!==null?Rt+"Capture":null:Rt;gn=[];for(var ze=ut,rt;ze!==null;){rt=ze;var Vt=rt.stateNode;if(rt.tag===5&&Vt!==null&&(rt=Vt,Je!==null&&(Vt=X(ze,Je),Vt!=null&&gn.push(hc(ze,Vt,rt)))),hi)break;ze=ze.return}0<gn.length&&(Rt=new an(Rt,pn,null,b,It),Lt.push({event:Rt,listeners:gn}))}}if((m&7)===0){e:{if(Rt=f==="mouseover"||f==="pointerover",an=f==="mouseout"||f==="pointerout",Rt&&b!==de&&(pn=b.relatedTarget||b.fromElement)&&(sl(pn)||pn[zs]))break e;if((an||Rt)&&(Rt=It.window===It?It:(Rt=It.ownerDocument)?Rt.defaultView||Rt.parentWindow:window,an?(pn=b.relatedTarget||b.toElement,an=ut,pn=pn?sl(pn):null,pn!==null&&(hi=Pr(pn),pn!==hi||pn.tag!==5&&pn.tag!==6)&&(pn=null)):(an=null,pn=ut),an!==pn)){if(gn=G0,Vt="onMouseLeave",Je="onMouseEnter",ze="mouse",(f==="pointerout"||f==="pointerover")&&(gn=Bs,Vt="onPointerLeave",Je="onPointerEnter",ze="pointer"),hi=an==null?Rt:Xr(an),rt=pn==null?Rt:Xr(pn),Rt=new gn(Vt,ze+"leave",an,b,It),Rt.target=hi,Rt.relatedTarget=rt,Vt=null,sl(It)===ut&&(gn=new gn(Je,ze+"enter",pn,b,It),gn.target=rt,gn.relatedTarget=hi,Vt=gn),hi=Vt,an&&pn)t:{for(gn=an,Je=pn,ze=0,rt=gn;rt;rt=$l(rt))ze++;for(rt=0,Vt=Je;Vt;Vt=$l(Vt))rt++;for(;0<ze-rt;)gn=$l(gn),ze--;for(;0<rt-ze;)Je=$l(Je),rt--;for(;ze--;){if(gn===Je||Je!==null&&gn===Je.alternate)break t;gn=$l(gn),Je=$l(Je)}gn=null}else gn=null;an!==null&&lv(Lt,Rt,an,gn,!1),pn!==null&&hi!==null&&lv(Lt,hi,pn,gn,!0)}}e:{if(Rt=ut?Xr(ut):window,an=Rt.nodeName&&Rt.nodeName.toLowerCase(),an==="select"||an==="input"&&Rt.type==="file")var wn=sv;else if(Ld(Rt))if(ac)wn=Vr;else{wn=ov;var In=lc}else(an=Rt.nodeName)&&an.toLowerCase()==="input"&&(Rt.type==="checkbox"||Rt.type==="radio")&&(wn=Q0);if(wn&&(wn=wn(f,ut))){sc(Lt,wn,b,It);break e}In&&In(f,Rt,ut),f==="focusout"&&(In=Rt._wrapperState)&&In.controlled&&Rt.type==="number"&&Pt(Rt,"number",Rt.value)}switch(In=ut?Xr(ut):window,f){case"focusin":(Ld(In)||In.contentEditable==="true")&&(Xo=In,Xl=ut,Sf=null);break;case"focusout":Sf=Xl=Xo=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,Bd(Lt,b,It);break;case"selectionchange":if(Dd)break;case"keydown":case"keyup":Bd(Lt,b,It)}var Nn;if(is)e:{switch(f){case"compositionstart":var Bn="onCompositionStart";break e;case"compositionend":Bn="onCompositionEnd";break e;case"compositionupdate":Bn="onCompositionUpdate";break e}Bn=void 0}else tl?Z0(f,b)&&(Bn="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(Bn="onCompositionStart");Bn&&(rc&&b.locale!=="ko"&&(tl||Bn!=="onCompositionStart"?Bn==="onCompositionEnd"&&tl&&(Nn=vf()):(Mo=It,H0="value"in Mo?Mo.value:Mo.textContent,tl=!0)),In=Gd(ut,Bn),0<In.length&&(Bn=new q0(Bn,f,null,b,It),Lt.push({event:Bn,listeners:In}),Nn?Bn.data=Nn:(Nn=Pd(b),Nn!==null&&(Bn.data=Nn)))),(Nn=Dr?rv(f,b):_f(f,b))&&(ut=Gd(ut,"onBeforeInput"),0<ut.length&&(It=new q0("onBeforeInput","beforeinput",null,b,It),Lt.push({event:It,listeners:ut}),It.data=Nn))}cc(Lt,m)})}function hc(f,m,b){return{instance:f,listener:m,currentTarget:b}}function Gd(f,m){for(var b=m+"Capture",B=[];f!==null;){var H=f,ne=H.stateNode;H.tag===5&&ne!==null&&(H=ne,ne=X(f,b),ne!=null&&B.unshift(hc(f,ne,H)),ne=X(f,m),ne!=null&&B.push(hc(f,ne,H))),f=f.return}return B}function $l(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function lv(f,m,b,B,H){for(var ne=m._reactName,ce=[];b!==null&&b!==B;){var Me=b,ke=Me.alternate,ut=Me.stateNode;if(ke!==null&&ke===B)break;Me.tag===5&&ut!==null&&(Me=ut,H?(ke=X(b,ne),ke!=null&&ce.unshift(hc(b,ke,Me))):H||(ke=X(b,ne),ke!=null&&ce.push(hc(b,ke,Me)))),b=b.return}ce.length!==0&&f.push({event:m,listeners:ce})}var rS=/\r\n?/g,uv=/\u0000|\uFFFD/g;function rm(f){return(typeof f=="string"?f:""+f).replace(rS,`
`).replace(uv,"")}function Rf(f,m,b){if(m=rm(m),rm(f)!==m&&b)throw Error(t(425))}function Cf(){}var dc=null,im=null;function sm(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var om=typeof setTimeout=="function"?setTimeout:void 0,am=typeof clearTimeout=="function"?clearTimeout:void 0,jd=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof jd<"u"?function(f){return jd.resolve(null).then(f).catch(cv)}:om;function cv(f){setTimeout(function(){throw f})}function qd(f,m){var b=m,B=0;do{var H=b.nextSibling;if(f.removeChild(b),H&&H.nodeType===8)if(b=H.data,b==="/$"){if(B===0){f.removeChild(H),yf(m);return}B--}else b!=="$"&&b!=="$?"&&b!=="$!"||B++;b=H}while(b);yf(m)}function va(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function lm(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return f;m--}else b==="/$"&&m++}f=f.previousSibling}return null}var Zl=Math.random().toString(36).slice(2),fi="__reactFiber$"+Zl,pc="__reactProps$"+Zl,zs="__reactContainer$"+Zl,Ql="__reactEvents$"+Zl,Kd="__reactListeners$"+Zl,Yd="__reactHandles$"+Zl;function sl(f){var m=f[fi];if(m)return m;for(var b=f.parentNode;b;){if(m=b[zs]||b[fi]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(f=lm(f);f!==null;){if(b=f[fi])return b;f=lm(f)}return m}f=b,b=f.parentNode}return null}function wa(f){return f=f[fi]||f[zs],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Xr(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function Xd(f){return f[pc]||null}var um=[],Si=-1;function jr(f){return{current:f}}function Rr(f){0>Si||(f.current=um[Si],um[Si]=null,Si--)}function Mr(f,m){Si++,um[Si]=f.current,f.current=m}var _a={},ki=jr(_a),ss=jr(!1),xa=_a;function Jl(f,m){var b=f.type.contextTypes;if(!b)return _a;var B=f.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===m)return B.__reactInternalMemoizedMaskedChildContext;var H={},ne;for(ne in b)H[ne]=m[ne];return B&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=H),H}function Hi(f){return f=f.childContextTypes,f!=null}function If(){Rr(ss),Rr(ki)}function cm(f,m,b){if(ki.current!==_a)throw Error(t(168));Mr(ki,m),Mr(ss,b)}function Nf(f,m,b){var B=f.stateNode;if(m=m.childContextTypes,typeof B.getChildContext!="function")return b;B=B.getChildContext();for(var H in B)if(!(H in m))throw Error(t(108,me(f)||"Unknown",H));return N({},b,B)}function eu(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||_a,xa=ki.current,Mr(ki,f),Mr(ss,ss.current),!0}function fm(f,m,b){var B=f.stateNode;if(!B)throw Error(t(169));b?(f=Nf(f,m,xa),B.__reactInternalMemoizedMergedChildContext=f,Rr(ss),Rr(ki),Mr(ki,f)):Rr(ss),Mr(ss,b)}var To=null,Pf=!1,$d=!1;function Lf(f){To===null?To=[f]:To.push(f)}function fv(f){Pf=!0,Lf(f)}function Zo(){if(!$d&&To!==null){$d=!0;var f=0,m=Cn;try{var b=To;for(Cn=1;f<b.length;f++){var B=b[f];do B=B(!0);while(B!==null)}To=null,Pf=!1}catch(H){throw To!==null&&(To=To.slice(f+1)),Qe(rn,Zo),H}finally{Cn=m,$d=!1}}return null}var tu=[],vs=0,Zd=null,Qd=0,os=[],Mi=0,nu=null,qt=1,ao="";function Sa(f,m){tu[vs++]=Qd,tu[vs++]=Zd,Zd=f,Qd=m}function hm(f,m,b){os[Mi++]=qt,os[Mi++]=ao,os[Mi++]=nu,nu=f;var B=qt;f=ao;var H=32-Bt(B)-1;B&=~(1<<H),b+=1;var ne=32-Bt(m)+H;if(30<ne){var ce=H-H%5;ne=(B&(1<<ce)-1).toString(32),B>>=ce,H-=ce,qt=1<<32-Bt(m)+H|b<<H|B,ao=ne+f}else qt=1<<ne|b<<H|B,ao=f}function dm(f){f.return!==null&&(Sa(f,1),hm(f,1,0))}function Ma(f){for(;f===Zd;)Zd=tu[--vs],tu[vs]=null,Qd=tu[--vs],tu[vs]=null;for(;f===nu;)nu=os[--Mi],os[Mi]=null,ao=os[--Mi],os[Mi]=null,qt=os[--Mi],os[Mi]=null}var Oi=null,as=null,Lr=!1,lo=null;function pm(f,m){var b=na(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=f,m=f.deletions,m===null?(f.deletions=[b],f.flags|=16):m.push(b)}function mm(f,m){switch(f.tag){case 5:var b=f.type;return m=m.nodeType!==1||b.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,Oi=f,as=va(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,Oi=f,as=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(b=nu!==null?{id:qt,overflow:ao}:null,f.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=na(18,null,null,0),b.stateNode=m,b.return=f,f.child=b,Oi=f,as=null,!0):!1;default:return!1}}function Jd(f){return(f.mode&1)!==0&&(f.flags&128)===0}function ep(f){if(Lr){var m=as;if(m){var b=m;if(!mm(f,m)){if(Jd(f))throw Error(t(418));m=va(b.nextSibling);var B=Oi;m&&mm(f,m)?pm(B,b):(f.flags=f.flags&-4097|2,Lr=!1,Oi=f)}}else{if(Jd(f))throw Error(t(418));f.flags=f.flags&-4097|2,Lr=!1,Oi=f}}}function tp(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Oi=f}function mc(f){if(f!==Oi)return!1;if(!Lr)return tp(f),Lr=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!sm(f.type,f.memoizedProps)),m&&(m=as)){if(Jd(f))throw gm(),Error(t(418));for(;m;)pm(f,m),m=va(m.nextSibling)}if(tp(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(m===0){as=va(f.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++}f=f.nextSibling}as=null}}else as=Oi?va(f.stateNode.nextSibling):null;return!0}function gm(){for(var f=as;f;)f=va(f.nextSibling)}function ol(){as=Oi=null,Lr=!1}function gc(f){lo===null?lo=[f]:lo.push(f)}var sS=F.ReactCurrentBatchConfig;function kf(f,m,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var B=b.stateNode}if(!B)throw Error(t(147,f));var H=B,ne=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===ne?m.ref:(m=function(ce){var Me=H.refs;ce===null?delete Me[ne]:Me[ne]=ce},m._stringRef=ne,m)}if(typeof f!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,f))}return f}function Of(f,m){throw f=Object.prototype.toString.call(m),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function ym(f){var m=f._init;return m(f._payload)}function vm(f){function m(Je,ze){if(f){var rt=Je.deletions;rt===null?(Je.deletions=[ze],Je.flags|=16):rt.push(ze)}}function b(Je,ze){if(!f)return null;for(;ze!==null;)m(Je,ze),ze=ze.sibling;return null}function B(Je,ze){for(Je=new Map;ze!==null;)ze.key!==null?Je.set(ze.key,ze):Je.set(ze.index,ze),ze=ze.sibling;return Je}function H(Je,ze){return Je=Tc(Je,ze),Je.index=0,Je.sibling=null,Je}function ne(Je,ze,rt){return Je.index=rt,f?(rt=Je.alternate,rt!==null?(rt=rt.index,rt<ze?(Je.flags|=2,ze):rt):(Je.flags|=2,ze)):(Je.flags|=1048576,ze)}function ce(Je){return f&&Je.alternate===null&&(Je.flags|=2),Je}function Me(Je,ze,rt,Vt){return ze===null||ze.tag!==6?(ze=ES(rt,Je.mode,Vt),ze.return=Je,ze):(ze=H(ze,rt),ze.return=Je,ze)}function ke(Je,ze,rt,Vt){var wn=rt.type;return wn===Y?It(Je,ze,rt.props.children,Vt,rt.key):ze!==null&&(ze.elementType===wn||typeof wn=="object"&&wn!==null&&wn.$$typeof===M&&ym(wn)===ze.type)?(Vt=H(ze,rt.props),Vt.ref=kf(Je,ze,rt),Vt.return=Je,Vt):(Vt=kv(rt.type,rt.key,rt.props,null,Je.mode,Vt),Vt.ref=kf(Je,ze,rt),Vt.return=Je,Vt)}function ut(Je,ze,rt,Vt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==rt.containerInfo||ze.stateNode.implementation!==rt.implementation?(ze=bS(rt,Je.mode,Vt),ze.return=Je,ze):(ze=H(ze,rt.children||[]),ze.return=Je,ze)}function It(Je,ze,rt,Vt,wn){return ze===null||ze.tag!==7?(ze=Qf(rt,Je.mode,Vt,wn),ze.return=Je,ze):(ze=H(ze,rt),ze.return=Je,ze)}function Lt(Je,ze,rt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=ES(""+ze,Je.mode,rt),ze.return=Je,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Q:return rt=kv(ze.type,ze.key,ze.props,null,Je.mode,rt),rt.ref=kf(Je,null,ze),rt.return=Je,rt;case G:return ze=bS(ze,Je.mode,rt),ze.return=Je,ze;case M:var Vt=ze._init;return Lt(Je,Vt(ze._payload),rt)}if(fe(ze)||L(ze))return ze=Qf(ze,Je.mode,rt,null),ze.return=Je,ze;Of(Je,ze)}return null}function Rt(Je,ze,rt,Vt){var wn=ze!==null?ze.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return wn!==null?null:Me(Je,ze,""+rt,Vt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case Q:return rt.key===wn?ke(Je,ze,rt,Vt):null;case G:return rt.key===wn?ut(Je,ze,rt,Vt):null;case M:return wn=rt._init,Rt(Je,ze,wn(rt._payload),Vt)}if(fe(rt)||L(rt))return wn!==null?null:It(Je,ze,rt,Vt,null);Of(Je,rt)}return null}function an(Je,ze,rt,Vt,wn){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return Je=Je.get(rt)||null,Me(ze,Je,""+Vt,wn);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case Q:return Je=Je.get(Vt.key===null?rt:Vt.key)||null,ke(ze,Je,Vt,wn);case G:return Je=Je.get(Vt.key===null?rt:Vt.key)||null,ut(ze,Je,Vt,wn);case M:var In=Vt._init;return an(Je,ze,rt,In(Vt._payload),wn)}if(fe(Vt)||L(Vt))return Je=Je.get(rt)||null,It(ze,Je,Vt,wn,null);Of(ze,Vt)}return null}function pn(Je,ze,rt,Vt){for(var wn=null,In=null,Nn=ze,Bn=ze=0,Ki=null;Nn!==null&&Bn<rt.length;Bn++){Nn.index>Bn?(Ki=Nn,Nn=null):Ki=Nn.sibling;var mr=Rt(Je,Nn,rt[Bn],Vt);if(mr===null){Nn===null&&(Nn=Ki);break}f&&Nn&&mr.alternate===null&&m(Je,Nn),ze=ne(mr,ze,Bn),In===null?wn=mr:In.sibling=mr,In=mr,Nn=Ki}if(Bn===rt.length)return b(Je,Nn),Lr&&Sa(Je,Bn),wn;if(Nn===null){for(;Bn<rt.length;Bn++)Nn=Lt(Je,rt[Bn],Vt),Nn!==null&&(ze=ne(Nn,ze,Bn),In===null?wn=Nn:In.sibling=Nn,In=Nn);return Lr&&Sa(Je,Bn),wn}for(Nn=B(Je,Nn);Bn<rt.length;Bn++)Ki=an(Nn,Je,Bn,rt[Bn],Vt),Ki!==null&&(f&&Ki.alternate!==null&&Nn.delete(Ki.key===null?Bn:Ki.key),ze=ne(Ki,ze,Bn),In===null?wn=Ki:In.sibling=Ki,In=Ki);return f&&Nn.forEach(function(Rc){return m(Je,Rc)}),Lr&&Sa(Je,Bn),wn}function gn(Je,ze,rt,Vt){var wn=L(rt);if(typeof wn!="function")throw Error(t(150));if(rt=wn.call(rt),rt==null)throw Error(t(151));for(var In=wn=null,Nn=ze,Bn=ze=0,Ki=null,mr=rt.next();Nn!==null&&!mr.done;Bn++,mr=rt.next()){Nn.index>Bn?(Ki=Nn,Nn=null):Ki=Nn.sibling;var Rc=Rt(Je,Nn,mr.value,Vt);if(Rc===null){Nn===null&&(Nn=Ki);break}f&&Nn&&Rc.alternate===null&&m(Je,Nn),ze=ne(Rc,ze,Bn),In===null?wn=Rc:In.sibling=Rc,In=Rc,Nn=Ki}if(mr.done)return b(Je,Nn),Lr&&Sa(Je,Bn),wn;if(Nn===null){for(;!mr.done;Bn++,mr=rt.next())mr=Lt(Je,mr.value,Vt),mr!==null&&(ze=ne(mr,ze,Bn),In===null?wn=mr:In.sibling=mr,In=mr);return Lr&&Sa(Je,Bn),wn}for(Nn=B(Je,Nn);!mr.done;Bn++,mr=rt.next())mr=an(Nn,Je,Bn,mr.value,Vt),mr!==null&&(f&&mr.alternate!==null&&Nn.delete(mr.key===null?Bn:mr.key),ze=ne(mr,ze,Bn),In===null?wn=mr:In.sibling=mr,In=mr);return f&&Nn.forEach(function(ZF){return m(Je,ZF)}),Lr&&Sa(Je,Bn),wn}function hi(Je,ze,rt,Vt){if(typeof rt=="object"&&rt!==null&&rt.type===Y&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case Q:e:{for(var wn=rt.key,In=ze;In!==null;){if(In.key===wn){if(wn=rt.type,wn===Y){if(In.tag===7){b(Je,In.sibling),ze=H(In,rt.props.children),ze.return=Je,Je=ze;break e}}else if(In.elementType===wn||typeof wn=="object"&&wn!==null&&wn.$$typeof===M&&ym(wn)===In.type){b(Je,In.sibling),ze=H(In,rt.props),ze.ref=kf(Je,In,rt),ze.return=Je,Je=ze;break e}b(Je,In);break}else m(Je,In);In=In.sibling}rt.type===Y?(ze=Qf(rt.props.children,Je.mode,Vt,rt.key),ze.return=Je,Je=ze):(Vt=kv(rt.type,rt.key,rt.props,null,Je.mode,Vt),Vt.ref=kf(Je,ze,rt),Vt.return=Je,Je=Vt)}return ce(Je);case G:e:{for(In=rt.key;ze!==null;){if(ze.key===In)if(ze.tag===4&&ze.stateNode.containerInfo===rt.containerInfo&&ze.stateNode.implementation===rt.implementation){b(Je,ze.sibling),ze=H(ze,rt.children||[]),ze.return=Je,Je=ze;break e}else{b(Je,ze);break}else m(Je,ze);ze=ze.sibling}ze=bS(rt,Je.mode,Vt),ze.return=Je,Je=ze}return ce(Je);case M:return In=rt._init,hi(Je,ze,In(rt._payload),Vt)}if(fe(rt))return pn(Je,ze,rt,Vt);if(L(rt))return gn(Je,ze,rt,Vt);Of(Je,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,ze!==null&&ze.tag===6?(b(Je,ze.sibling),ze=H(ze,rt),ze.return=Je,Je=ze):(b(Je,ze),ze=ES(rt,Je.mode,Vt),ze.return=Je,Je=ze),ce(Je)):b(Je,ze)}return hi}var ru=vm(!0),Df=vm(!1),iu=jr(null),su=null,Ea=null,yc=null;function ou(){yc=Ea=su=null}function Bf(f){var m=iu.current;Rr(iu),f._currentValue=m}function Uf(f,m,b){for(;f!==null;){var B=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,B!==null&&(B.childLanes|=m)):B!==null&&(B.childLanes&m)!==m&&(B.childLanes|=m),f===b)break;f=f.return}}function al(f,m){su=f,yc=Ea=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(Gn=!0),f.firstContext=null)}function Ws(f){var m=f._currentValue;if(yc!==f)if(f={context:f,memoizedValue:m,next:null},Ea===null){if(su===null)throw Error(t(308));Ea=f,su.dependencies={lanes:0,firstContext:f}}else Ea=Ea.next=f;return m}var ba=null;function wm(f){ba===null?ba=[f]:ba.push(f)}function Ff(f,m,b,B){var H=m.interleaved;return H===null?(b.next=b,wm(m)):(b.next=H.next,H.next=b),m.interleaved=b,Ro(f,B)}function Ro(f,m){f.lanes|=m;var b=f.alternate;for(b!==null&&(b.lanes|=m),b=f,f=f.return;f!==null;)f.childLanes|=m,b=f.alternate,b!==null&&(b.childLanes|=m),b=f,f=f.return;return b.tag===3?b.stateNode:null}var _r=!1;function Hn(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $r(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function xr(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Br(f,m,b){var B=f.updateQueue;if(B===null)return null;if(B=B.shared,(hr&2)!==0){var H=B.pending;return H===null?m.next=m:(m.next=H.next,H.next=m),B.pending=m,Ro(f,b)}return H=B.interleaved,H===null?(m.next=m,wm(B)):(m.next=H.next,H.next=m),B.interleaved=m,Ro(f,b)}function Gi(f,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var B=m.lanes;B&=f.pendingLanes,b|=B,m.lanes=b,Wn(f,b)}}function au(f,m){var b=f.updateQueue,B=f.alternate;if(B!==null&&(B=B.updateQueue,b===B)){var H=null,ne=null;if(b=b.firstBaseUpdate,b!==null){do{var ce={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};ne===null?H=ne=ce:ne=ne.next=ce,b=b.next}while(b!==null);ne===null?H=ne=m:ne=ne.next=m}else H=ne=m;b={baseState:B.baseState,firstBaseUpdate:H,lastBaseUpdate:ne,shared:B.shared,effects:B.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=m:f.next=m,b.lastBaseUpdate=m}function qr(f,m,b,B){var H=f.updateQueue;_r=!1;var ne=H.firstBaseUpdate,ce=H.lastBaseUpdate,Me=H.shared.pending;if(Me!==null){H.shared.pending=null;var ke=Me,ut=ke.next;ke.next=null,ce===null?ne=ut:ce.next=ut,ce=ke;var It=f.alternate;It!==null&&(It=It.updateQueue,Me=It.lastBaseUpdate,Me!==ce&&(Me===null?It.firstBaseUpdate=ut:Me.next=ut,It.lastBaseUpdate=ke))}if(ne!==null){var Lt=H.baseState;ce=0,It=ut=ke=null,Me=ne;do{var Rt=Me.lane,an=Me.eventTime;if((B&Rt)===Rt){It!==null&&(It=It.next={eventTime:an,lane:0,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null});e:{var pn=f,gn=Me;switch(Rt=m,an=b,gn.tag){case 1:if(pn=gn.payload,typeof pn=="function"){Lt=pn.call(an,Lt,Rt);break e}Lt=pn;break e;case 3:pn.flags=pn.flags&-65537|128;case 0:if(pn=gn.payload,Rt=typeof pn=="function"?pn.call(an,Lt,Rt):pn,Rt==null)break e;Lt=N({},Lt,Rt);break e;case 2:_r=!0}}Me.callback!==null&&Me.lane!==0&&(f.flags|=64,Rt=H.effects,Rt===null?H.effects=[Me]:Rt.push(Me))}else an={eventTime:an,lane:Rt,tag:Me.tag,payload:Me.payload,callback:Me.callback,next:null},It===null?(ut=It=an,ke=Lt):It=It.next=an,ce|=Rt;if(Me=Me.next,Me===null){if(Me=H.shared.pending,Me===null)break;Rt=Me,Me=Rt.next,Rt.next=null,H.lastBaseUpdate=Rt,H.shared.pending=null}}while(!0);if(It===null&&(ke=Lt),H.baseState=ke,H.firstBaseUpdate=ut,H.lastBaseUpdate=It,m=H.shared.interleaved,m!==null){H=m;do ce|=H.lane,H=H.next;while(H!==m)}else ne===null&&(H.shared.lanes=0);Yf|=ce,f.lanes=ce,f.memoizedState=Lt}}function vc(f,m,b){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var B=f[m],H=B.callback;if(H!==null){if(B.callback=null,B=b,typeof H!="function")throw Error(t(191,H));H.call(B)}}}var Qo={},Vs=jr(Qo),lu=jr(Qo),Aa=jr(Qo);function ti(f){if(f===Qo)throw Error(t(174));return f}function zf(f,m){switch(Mr(Aa,m),Mr(lu,f),Mr(Vs,Qo),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Ye(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=Ye(m,f)}Rr(Vs),Mr(Vs,m)}function ll(){Rr(Vs),Rr(lu),Rr(Aa)}function uu(f){ti(Aa.current);var m=ti(Vs.current),b=Ye(m,f.type);m!==b&&(Mr(lu,f),Mr(Vs,b))}function wc(f){lu.current===f&&(Rr(Vs),Rr(lu))}var kr=jr(0);function Co(f){for(var m=f;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var _c=[];function Jo(){for(var f=0;f<_c.length;f++)_c[f]._workInProgressVersionPrimary=null;_c.length=0}var cu=F.ReactCurrentDispatcher,fu=F.ReactCurrentBatchConfig,Ta=0,Cr=null,Kr=null,ar=null,Io=!1,ji=!1,ul=0,ws=0;function Di(){throw Error(t(321))}function Wf(f,m){if(m===null)return!1;for(var b=0;b<m.length&&b<f.length;b++)if(!Us(f[b],m[b]))return!1;return!0}function Vf(f,m,b,B,H,ne){if(Ta=ne,Cr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,cu.current=f===null||f.memoizedState===null?vv:wv,f=b(B,H),ji){ne=0;do{if(ji=!1,ul=0,25<=ne)throw Error(t(301));ne+=1,ar=Kr=null,m.updateQueue=null,cu.current=_v,f=b(B,H)}while(ji)}if(cu.current=lp,m=Kr!==null&&Kr.next!==null,Ta=0,ar=Kr=Cr=null,Io=!1,m)throw Error(t(300));return f}function _m(){var f=ul!==0;return ul=0,f}function Bi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Cr.memoizedState=ar=f:ar=ar.next=f,ar}function Hs(){if(Kr===null){var f=Cr.alternate;f=f!==null?f.memoizedState:null}else f=Kr.next;var m=ar===null?Cr.memoizedState:ar.next;if(m!==null)ar=m,Kr=f;else{if(f===null)throw Error(t(310));Kr=f,f={memoizedState:Kr.memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},ar===null?Cr.memoizedState=ar=f:ar=ar.next=f}return ar}function xc(f,m){return typeof m=="function"?m(f):m}function Hf(f){var m=Hs(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var B=Kr,H=B.baseQueue,ne=b.pending;if(ne!==null){if(H!==null){var ce=H.next;H.next=ne.next,ne.next=ce}B.baseQueue=H=ne,b.pending=null}if(H!==null){ne=H.next,B=B.baseState;var Me=ce=null,ke=null,ut=ne;do{var It=ut.lane;if((Ta&It)===It)ke!==null&&(ke=ke.next={lane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),B=ut.hasEagerState?ut.eagerState:f(B,ut.action);else{var Lt={lane:It,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null};ke===null?(Me=ke=Lt,ce=B):ke=ke.next=Lt,Cr.lanes|=It,Yf|=It}ut=ut.next}while(ut!==null&&ut!==ne);ke===null?ce=B:ke.next=Me,Us(B,m.memoizedState)||(Gn=!0),m.memoizedState=B,m.baseState=ce,m.baseQueue=ke,b.lastRenderedState=B}if(f=b.interleaved,f!==null){H=f;do ne=H.lane,Cr.lanes|=ne,Yf|=ne,H=H.next;while(H!==f)}else H===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function Ra(f){var m=Hs(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var B=b.dispatch,H=b.pending,ne=m.memoizedState;if(H!==null){b.pending=null;var ce=H=H.next;do ne=f(ne,ce.action),ce=ce.next;while(ce!==H);Us(ne,m.memoizedState)||(Gn=!0),m.memoizedState=ne,m.baseQueue===null&&(m.baseState=ne),b.lastRenderedState=ne}return[ne,B]}function xm(){}function Sm(f,m){var b=Cr,B=Hs(),H=m(),ne=!Us(B.memoizedState,H);if(ne&&(B.memoizedState=H,Gn=!0),B=B.queue,bm(hv.bind(null,b,B,f),[f]),B.getSnapshot!==m||ne||ar!==null&&ar.memoizedState.tag&1){if(b.flags|=2048,No(9,Gf.bind(null,b,B,H,m),void 0,null),qi===null)throw Error(t(349));(Ta&30)!==0||np(b,m,H)}return H}function np(f,m,b){f.flags|=16384,f={getSnapshot:m,value:b},m=Cr.updateQueue,m===null?(m={lastEffect:null,stores:null},Cr.updateQueue=m,m.stores=[f]):(b=m.stores,b===null?m.stores=[f]:b.push(f))}function Gf(f,m,b,B){m.value=b,m.getSnapshot=B,dv(m)&&Mm(f)}function hv(f,m,b){return b(function(){dv(m)&&Mm(f)})}function dv(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!Us(f,b)}catch{return!0}}function Mm(f){var m=Ro(f,1);m!==null&&La(m,f,1,-1)}function Em(f){var m=Bi();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:f},m.queue=f,f=f.dispatch=hu.bind(null,Cr,f),[m.memoizedState,f]}function No(f,m,b,B){return f={tag:f,create:m,destroy:b,deps:B,next:null},m=Cr.updateQueue,m===null?(m={lastEffect:null,stores:null},Cr.updateQueue=m,m.lastEffect=f.next=f):(b=m.lastEffect,b===null?m.lastEffect=f.next=f:(B=b.next,b.next=f,f.next=B,m.lastEffect=f)),f}function pv(){return Hs().memoizedState}function ea(f,m,b,B){var H=Bi();Cr.flags|=f,H.memoizedState=No(1|m,b,void 0,B===void 0?null:B)}function jf(f,m,b,B){var H=Hs();B=B===void 0?null:B;var ne=void 0;if(Kr!==null){var ce=Kr.memoizedState;if(ne=ce.destroy,B!==null&&Wf(B,ce.deps)){H.memoizedState=No(m,b,ne,B);return}}Cr.flags|=f,H.memoizedState=No(1|m,b,ne,B)}function ls(f,m){return ea(8390656,8,f,m)}function bm(f,m){return jf(2048,8,f,m)}function Am(f,m){return jf(4,2,f,m)}function mv(f,m){return jf(4,4,f,m)}function gv(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function Tm(f,m,b){return b=b!=null?b.concat([f]):null,jf(4,4,gv.bind(null,m,f),b)}function rp(){}function yv(f,m){var b=Hs();m=m===void 0?null:m;var B=b.memoizedState;return B!==null&&m!==null&&Wf(m,B[1])?B[0]:(b.memoizedState=[f,m],f)}function Gs(f,m){var b=Hs();m=m===void 0?null:m;var B=b.memoizedState;return B!==null&&m!==null&&Wf(m,B[1])?B[0]:(f=f(),b.memoizedState=[f,m],f)}function ip(f,m,b){return(Ta&21)===0?(f.baseState&&(f.baseState=!1,Gn=!0),f.memoizedState=b):(Us(b,m)||(b=Ut(),Cr.lanes|=b,Yf|=b,f.baseState=!0),m)}function oS(f,m){var b=Cn;Cn=b!==0&&4>b?b:4,f(!0);var B=fu.transition;fu.transition={};try{f(!1),m()}finally{Cn=b,fu.transition=B}}function Ca(){return Hs().memoizedState}function sp(f,m,b){var B=bc(f);if(b={lane:B,action:b,hasEagerState:!1,eagerState:null,next:null},qf(f))op(m,b);else if(b=Ff(f,m,b,B),b!==null){var H=qs();La(b,f,B,H),ap(b,m,B)}}function hu(f,m,b){var B=bc(f),H={lane:B,action:b,hasEagerState:!1,eagerState:null,next:null};if(qf(f))op(m,H);else{var ne=f.alternate;if(f.lanes===0&&(ne===null||ne.lanes===0)&&(ne=m.lastRenderedReducer,ne!==null))try{var ce=m.lastRenderedState,Me=ne(ce,b);if(H.hasEagerState=!0,H.eagerState=Me,Us(Me,ce)){var ke=m.interleaved;ke===null?(H.next=H,wm(m)):(H.next=ke.next,ke.next=H),m.interleaved=H;return}}catch{}finally{}b=Ff(f,m,H,B),b!==null&&(H=qs(),La(b,f,B,H),ap(b,m,B))}}function qf(f){var m=f.alternate;return f===Cr||m!==null&&m===Cr}function op(f,m){ji=Io=!0;var b=f.pending;b===null?m.next=m:(m.next=b.next,b.next=m),f.pending=m}function ap(f,m,b){if((b&4194240)!==0){var B=m.lanes;B&=f.pendingLanes,b|=B,m.lanes=b,Wn(f,b)}}var lp={readContext:Ws,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},vv={readContext:Ws,useCallback:function(f,m){return Bi().memoizedState=[f,m===void 0?null:m],f},useContext:Ws,useEffect:ls,useImperativeHandle:function(f,m,b){return b=b!=null?b.concat([f]):null,ea(4194308,4,gv.bind(null,m,f),b)},useLayoutEffect:function(f,m){return ea(4194308,4,f,m)},useInsertionEffect:function(f,m){return ea(4,2,f,m)},useMemo:function(f,m){var b=Bi();return m=m===void 0?null:m,f=f(),b.memoizedState=[f,m],f},useReducer:function(f,m,b){var B=Bi();return m=b!==void 0?b(m):m,B.memoizedState=B.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},B.queue=f,f=f.dispatch=sp.bind(null,Cr,f),[B.memoizedState,f]},useRef:function(f){var m=Bi();return f={current:f},m.memoizedState=f},useState:Em,useDebugValue:rp,useDeferredValue:function(f){return Bi().memoizedState=f},useTransition:function(){var f=Em(!1),m=f[0];return f=oS.bind(null,f[1]),Bi().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,b){var B=Cr,H=Bi();if(Lr){if(b===void 0)throw Error(t(407));b=b()}else{if(b=m(),qi===null)throw Error(t(349));(Ta&30)!==0||np(B,m,b)}H.memoizedState=b;var ne={value:b,getSnapshot:m};return H.queue=ne,ls(hv.bind(null,B,ne,f),[f]),B.flags|=2048,No(9,Gf.bind(null,B,ne,b,m),void 0,null),b},useId:function(){var f=Bi(),m=qi.identifierPrefix;if(Lr){var b=ao,B=qt;b=(B&~(1<<32-Bt(B)-1)).toString(32)+b,m=":"+m+"R"+b,b=ul++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=ws++,m=":"+m+"r"+b.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},wv={readContext:Ws,useCallback:yv,useContext:Ws,useEffect:bm,useImperativeHandle:Tm,useInsertionEffect:Am,useLayoutEffect:mv,useMemo:Gs,useReducer:Hf,useRef:pv,useState:function(){return Hf(xc)},useDebugValue:rp,useDeferredValue:function(f){var m=Hs();return ip(m,Kr.memoizedState,f)},useTransition:function(){var f=Hf(xc)[0],m=Hs().memoizedState;return[f,m]},useMutableSource:xm,useSyncExternalStore:Sm,useId:Ca,unstable_isNewReconciler:!1},_v={readContext:Ws,useCallback:yv,useContext:Ws,useEffect:bm,useImperativeHandle:Tm,useInsertionEffect:Am,useLayoutEffect:mv,useMemo:Gs,useReducer:Ra,useRef:pv,useState:function(){return Ra(xc)},useDebugValue:rp,useDeferredValue:function(f){var m=Hs();return Kr===null?m.memoizedState=f:ip(m,Kr.memoizedState,f)},useTransition:function(){var f=Ra(xc)[0],m=Hs().memoizedState;return[f,m]},useMutableSource:xm,useSyncExternalStore:Sm,useId:Ca,unstable_isNewReconciler:!1};function uo(f,m){if(f&&f.defaultProps){m=N({},m),f=f.defaultProps;for(var b in f)m[b]===void 0&&(m[b]=f[b]);return m}return m}function Kf(f,m,b,B){m=f.memoizedState,b=b(B,m),b=b==null?m:N({},m,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var up={isMounted:function(f){return(f=f._reactInternals)?Pr(f)===f:!1},enqueueSetState:function(f,m,b){f=f._reactInternals;var B=qs(),H=bc(f),ne=xr(B,H);ne.payload=m,b!=null&&(ne.callback=b),m=Br(f,ne,H),m!==null&&(La(m,f,H,B),Gi(m,f,H))},enqueueReplaceState:function(f,m,b){f=f._reactInternals;var B=qs(),H=bc(f),ne=xr(B,H);ne.tag=1,ne.payload=m,b!=null&&(ne.callback=b),m=Br(f,ne,H),m!==null&&(La(m,f,H,B),Gi(m,f,H))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var b=qs(),B=bc(f),H=xr(b,B);H.tag=2,m!=null&&(H.callback=m),m=Br(f,H,B),m!==null&&(La(m,f,B,b),Gi(m,f,B))}};function xv(f,m,b,B,H,ne,ce){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(B,ne,ce):m.prototype&&m.prototype.isPureReactComponent?!Kl(b,B)||!Kl(H,ne):!0}function g(f,m,b){var B=!1,H=_a,ne=m.contextType;return typeof ne=="object"&&ne!==null?ne=Ws(ne):(H=Hi(m)?xa:ki.current,B=m.contextTypes,ne=(B=B!=null)?Jl(f,H):_a),m=new m(b,ne),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=up,f.stateNode=m,m._reactInternals=f,B&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=H,f.__reactInternalMemoizedMaskedChildContext=ne),m}function w(f,m,b,B){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,B),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,B),m.state!==f&&up.enqueueReplaceState(m,m.state,null)}function O(f,m,b,B){var H=f.stateNode;H.props=b,H.state=f.memoizedState,H.refs={},Hn(f);var ne=m.contextType;typeof ne=="object"&&ne!==null?H.context=Ws(ne):(ne=Hi(m)?xa:ki.current,H.context=Jl(f,ne)),H.state=f.memoizedState,ne=m.getDerivedStateFromProps,typeof ne=="function"&&(Kf(f,m,ne,b),H.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(m=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),m!==H.state&&up.enqueueReplaceState(H,H.state,null),qr(f,b,H,B),H.state=f.memoizedState),typeof H.componentDidMount=="function"&&(f.flags|=4194308)}function z(f,m){try{var b="",B=m;do b+=$(B),B=B.return;while(B);var H=b}catch(ne){H=`
Error generating stack: `+ne.message+`
`+ne.stack}return{value:f,source:m,stack:H,digest:null}}function Z(f,m,b){return{value:f,source:null,stack:b??null,digest:m??null}}function ie(f,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var xe=typeof WeakMap=="function"?WeakMap:Map;function We(f,m,b){b=xr(-1,b),b.tag=3,b.payload={element:null};var B=m.value;return b.callback=function(){Rv||(Rv=!0,gS=B),ie(f,m)},b}function pt(f,m,b){b=xr(-1,b),b.tag=3;var B=f.type.getDerivedStateFromError;if(typeof B=="function"){var H=m.value;b.payload=function(){return B(H)},b.callback=function(){ie(f,m)}}var ne=f.stateNode;return ne!==null&&typeof ne.componentDidCatch=="function"&&(b.callback=function(){ie(f,m),typeof B!="function"&&(Mc===null?Mc=new Set([this]):Mc.add(this));var ce=m.stack;this.componentDidCatch(m.value,{componentStack:ce!==null?ce:""})}),b}function Wt(f,m,b){var B=f.pingCache;if(B===null){B=f.pingCache=new xe;var H=new Set;B.set(m,H)}else H=B.get(m),H===void 0&&(H=new Set,B.set(m,H));H.has(b)||(H.add(b),f=zF.bind(null,f,m,b),m.then(f,f))}function fn(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function Un(f,m,b,B,H){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=xr(-1,1),m.tag=2,Br(b,m,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=H,f)}var bn=F.ReactCurrentOwner,Gn=!1;function sn(f,m,b,B){m.child=f===null?Df(m,null,b,B):ru(m,f.child,b,B)}function Ui(f,m,b,B,H){b=b.render;var ne=m.ref;return al(m,H),B=Vf(f,m,b,B,ne,H),b=_m(),f!==null&&!Gn?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~H,du(f,m,H)):(Lr&&b&&dm(m),m.flags|=1,sn(f,m,B,H),m.child)}function js(f,m,b,B,H){if(f===null){var ne=b.type;return typeof ne=="function"&&!MS(ne)&&ne.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=ne,st(f,m,ne,B,H)):(f=kv(b.type,null,B,m,m.mode,H),f.ref=m.ref,f.return=m,m.child=f)}if(ne=f.child,(f.lanes&H)===0){var ce=ne.memoizedProps;if(b=b.compare,b=b!==null?b:Kl,b(ce,B)&&f.ref===m.ref)return du(f,m,H)}return m.flags|=1,f=Tc(ne,B),f.ref=m.ref,f.return=m,m.child=f}function st(f,m,b,B,H){if(f!==null){var ne=f.memoizedProps;if(Kl(ne,B)&&f.ref===m.ref)if(Gn=!1,m.pendingProps=B=ne,(f.lanes&H)!==0)(f.flags&131072)!==0&&(Gn=!0);else return m.lanes=f.lanes,du(f,m,H)}return Qt(f,m,b,B,H)}function Ke(f,m,b){var B=m.pendingProps,H=B.children,ne=f!==null?f.memoizedState:null;if(B.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(fp,Po),Po|=b;else{if((b&1073741824)===0)return f=ne!==null?ne.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,Mr(fp,Po),Po|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=ne!==null?ne.baseLanes:b,Mr(fp,Po),Po|=B}else ne!==null?(B=ne.baseLanes|b,m.memoizedState=null):B=b,Mr(fp,Po),Po|=B;return sn(f,m,H,b),m.child}function ht(f,m){var b=m.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function Qt(f,m,b,B,H){var ne=Hi(b)?xa:ki.current;return ne=Jl(m,ne),al(m,H),b=Vf(f,m,b,B,ne,H),B=_m(),f!==null&&!Gn?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~H,du(f,m,H)):(Lr&&B&&dm(m),m.flags|=1,sn(f,m,b,H),m.child)}function yn(f,m,b,B,H){if(Hi(b)){var ne=!0;eu(m)}else ne=!1;if(al(m,H),m.stateNode===null)Mv(f,m),g(m,b,B),O(m,b,B,H),B=!0;else if(f===null){var ce=m.stateNode,Me=m.memoizedProps;ce.props=Me;var ke=ce.context,ut=b.contextType;typeof ut=="object"&&ut!==null?ut=Ws(ut):(ut=Hi(b)?xa:ki.current,ut=Jl(m,ut));var It=b.getDerivedStateFromProps,Lt=typeof It=="function"||typeof ce.getSnapshotBeforeUpdate=="function";Lt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Me!==B||ke!==ut)&&w(m,ce,B,ut),_r=!1;var Rt=m.memoizedState;ce.state=Rt,qr(m,B,ce,H),ke=m.memoizedState,Me!==B||Rt!==ke||ss.current||_r?(typeof It=="function"&&(Kf(m,b,It,B),ke=m.memoizedState),(Me=_r||xv(m,b,Me,B,Rt,ke,ut))?(Lt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=B,m.memoizedState=ke),ce.props=B,ce.state=ke,ce.context=ut,B=Me):(typeof ce.componentDidMount=="function"&&(m.flags|=4194308),B=!1)}else{ce=m.stateNode,$r(f,m),Me=m.memoizedProps,ut=m.type===m.elementType?Me:uo(m.type,Me),ce.props=ut,Lt=m.pendingProps,Rt=ce.context,ke=b.contextType,typeof ke=="object"&&ke!==null?ke=Ws(ke):(ke=Hi(b)?xa:ki.current,ke=Jl(m,ke));var an=b.getDerivedStateFromProps;(It=typeof an=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Me!==Lt||Rt!==ke)&&w(m,ce,B,ke),_r=!1,Rt=m.memoizedState,ce.state=Rt,qr(m,B,ce,H);var pn=m.memoizedState;Me!==Lt||Rt!==pn||ss.current||_r?(typeof an=="function"&&(Kf(m,b,an,B),pn=m.memoizedState),(ut=_r||xv(m,b,ut,B,Rt,pn,ke)||!1)?(It||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(B,pn,ke),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(B,pn,ke)),typeof ce.componentDidUpdate=="function"&&(m.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Me===f.memoizedProps&&Rt===f.memoizedState||(m.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Me===f.memoizedProps&&Rt===f.memoizedState||(m.flags|=1024),m.memoizedProps=B,m.memoizedState=pn),ce.props=B,ce.state=pn,ce.context=ke,B=ut):(typeof ce.componentDidUpdate!="function"||Me===f.memoizedProps&&Rt===f.memoizedState||(m.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Me===f.memoizedProps&&Rt===f.memoizedState||(m.flags|=1024),B=!1)}return Vn(f,m,b,B,ne,H)}function Vn(f,m,b,B,H,ne){ht(f,m);var ce=(m.flags&128)!==0;if(!B&&!ce)return H&&fm(m,b,!1),du(f,m,ne);B=m.stateNode,bn.current=m;var Me=ce&&typeof b.getDerivedStateFromError!="function"?null:B.render();return m.flags|=1,f!==null&&ce?(m.child=ru(m,f.child,null,ne),m.child=ru(m,null,Me,ne)):sn(f,m,Me,ne),m.memoizedState=B.state,H&&fm(m,b,!0),m.child}function Fn(f){var m=f.stateNode;m.pendingContext?cm(f,m.pendingContext,m.pendingContext!==m.context):m.context&&cm(f,m.context,!1),zf(f,m.containerInfo)}function or(f,m,b,B,H){return ol(),gc(H),m.flags|=256,sn(f,m,b,B),m.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function ir(f){return{baseLanes:f,cachePool:null,transitions:null}}function Ia(f,m,b){var B=m.pendingProps,H=kr.current,ne=!1,ce=(m.flags&128)!==0,Me;if((Me=ce)||(Me=f!==null&&f.memoizedState===null?!1:(H&2)!==0),Me?(ne=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(H|=1),Mr(kr,H&1),f===null)return ep(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(ce=B.children,f=B.fallback,ne?(B=m.mode,ne=m.child,ce={mode:"hidden",children:ce},(B&1)===0&&ne!==null?(ne.childLanes=0,ne.pendingProps=ce):ne=Ov(ce,B,0,null),f=Qf(f,B,b,null),ne.return=m,f.return=m,ne.sibling=f,m.child=ne,m.child.memoizedState=ir(b),m.memoizedState=ni,f):Rm(m,ce));if(H=f.memoizedState,H!==null&&(Me=H.dehydrated,Me!==null))return RF(f,m,ce,B,Me,H,b);if(ne){ne=B.fallback,ce=m.mode,H=f.child,Me=H.sibling;var ke={mode:"hidden",children:B.children};return(ce&1)===0&&m.child!==H?(B=m.child,B.childLanes=0,B.pendingProps=ke,m.deletions=null):(B=Tc(H,ke),B.subtreeFlags=H.subtreeFlags&14680064),Me!==null?ne=Tc(Me,ne):(ne=Qf(ne,ce,b,null),ne.flags|=2),ne.return=m,B.return=m,B.sibling=ne,m.child=B,B=ne,ne=m.child,ce=f.child.memoizedState,ce=ce===null?ir(b):{baseLanes:ce.baseLanes|b,cachePool:null,transitions:ce.transitions},ne.memoizedState=ce,ne.childLanes=f.childLanes&~b,m.memoizedState=ni,B}return ne=f.child,f=ne.sibling,B=Tc(ne,{mode:"visible",children:B.children}),(m.mode&1)===0&&(B.lanes=b),B.return=m,B.sibling=null,f!==null&&(b=m.deletions,b===null?(m.deletions=[f],m.flags|=16):b.push(f)),m.child=B,m.memoizedState=null,B}function Rm(f,m){return m=Ov({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function Sv(f,m,b,B){return B!==null&&gc(B),ru(m,f.child,null,b),f=Rm(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function RF(f,m,b,B,H,ne,ce){if(b)return m.flags&256?(m.flags&=-257,B=Z(Error(t(422))),Sv(f,m,ce,B)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(ne=B.fallback,H=m.mode,B=Ov({mode:"visible",children:B.children},H,0,null),ne=Qf(ne,H,ce,null),ne.flags|=2,B.return=m,ne.return=m,B.sibling=ne,m.child=B,(m.mode&1)!==0&&ru(m,f.child,null,ce),m.child.memoizedState=ir(ce),m.memoizedState=ni,ne);if((m.mode&1)===0)return Sv(f,m,ce,null);if(H.data==="$!"){if(B=H.nextSibling&&H.nextSibling.dataset,B)var Me=B.dgst;return B=Me,ne=Error(t(419)),B=Z(ne,B,void 0),Sv(f,m,ce,B)}if(Me=(ce&f.childLanes)!==0,Gn||Me){if(B=qi,B!==null){switch(ce&-ce){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=(H&(B.suspendedLanes|ce))!==0?0:H,H!==0&&H!==ne.retryLane&&(ne.retryLane=H,Ro(f,H),La(B,f,H,-1))}return SS(),B=Z(Error(t(421))),Sv(f,m,ce,B)}return H.data==="$?"?(m.flags|=128,m.child=f.child,m=WF.bind(null,f),H._reactRetry=m,null):(f=ne.treeContext,as=va(H.nextSibling),Oi=m,Lr=!0,lo=null,f!==null&&(os[Mi++]=qt,os[Mi++]=ao,os[Mi++]=nu,qt=f.id,ao=f.overflow,nu=m),m=Rm(m,B.children),m.flags|=4096,m)}function t2(f,m,b){f.lanes|=m;var B=f.alternate;B!==null&&(B.lanes|=m),Uf(f.return,m,b)}function aS(f,m,b,B,H){var ne=f.memoizedState;ne===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:B,tail:b,tailMode:H}:(ne.isBackwards=m,ne.rendering=null,ne.renderingStartTime=0,ne.last=B,ne.tail=b,ne.tailMode=H)}function n2(f,m,b){var B=m.pendingProps,H=B.revealOrder,ne=B.tail;if(sn(f,m,B.children,b),B=kr.current,(B&2)!==0)B=B&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&t2(f,b,m);else if(f.tag===19)t2(f,b,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}B&=1}if(Mr(kr,B),(m.mode&1)===0)m.memoizedState=null;else switch(H){case"forwards":for(b=m.child,H=null;b!==null;)f=b.alternate,f!==null&&Co(f)===null&&(H=b),b=b.sibling;b=H,b===null?(H=m.child,m.child=null):(H=b.sibling,b.sibling=null),aS(m,!1,H,b,ne);break;case"backwards":for(b=null,H=m.child,m.child=null;H!==null;){if(f=H.alternate,f!==null&&Co(f)===null){m.child=H;break}f=H.sibling,H.sibling=b,b=H,H=f}aS(m,!0,b,null,ne);break;case"together":aS(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Mv(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function du(f,m,b){if(f!==null&&(m.dependencies=f.dependencies),Yf|=m.lanes,(b&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(t(153));if(m.child!==null){for(f=m.child,b=Tc(f,f.pendingProps),m.child=b,b.return=m;f.sibling!==null;)f=f.sibling,b=b.sibling=Tc(f,f.pendingProps),b.return=m;b.sibling=null}return m.child}function CF(f,m,b){switch(m.tag){case 3:Fn(m),ol();break;case 5:uu(m);break;case 1:Hi(m.type)&&eu(m);break;case 4:zf(m,m.stateNode.containerInfo);break;case 10:var B=m.type._context,H=m.memoizedProps.value;Mr(iu,B._currentValue),B._currentValue=H;break;case 13:if(B=m.memoizedState,B!==null)return B.dehydrated!==null?(Mr(kr,kr.current&1),m.flags|=128,null):(b&m.child.childLanes)!==0?Ia(f,m,b):(Mr(kr,kr.current&1),f=du(f,m,b),f!==null?f.sibling:null);Mr(kr,kr.current&1);break;case 19:if(B=(b&m.childLanes)!==0,(f.flags&128)!==0){if(B)return n2(f,m,b);m.flags|=128}if(H=m.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Mr(kr,kr.current),B)break;return null;case 22:case 23:return m.lanes=0,Ke(f,m,b)}return du(f,m,b)}var r2,lS,i2,s2;r2=function(f,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},lS=function(){},i2=function(f,m,b,B){var H=f.memoizedProps;if(H!==B){f=m.stateNode,ti(Vs.current);var ne=null;switch(b){case"input":H=Ge(f,H),B=Ge(f,B),ne=[];break;case"select":H=N({},H,{value:void 0}),B=N({},B,{value:void 0}),ne=[];break;case"textarea":H=Oe(f,H),B=Oe(f,B),ne=[];break;default:typeof H.onClick!="function"&&typeof B.onClick=="function"&&(f.onclick=Cf)}le(b,B);var ce;b=null;for(ut in H)if(!B.hasOwnProperty(ut)&&H.hasOwnProperty(ut)&&H[ut]!=null)if(ut==="style"){var Me=H[ut];for(ce in Me)Me.hasOwnProperty(ce)&&(b||(b={}),b[ce]="")}else ut!=="dangerouslySetInnerHTML"&&ut!=="children"&&ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&ut!=="autoFocus"&&(i.hasOwnProperty(ut)?ne||(ne=[]):(ne=ne||[]).push(ut,null));for(ut in B){var ke=B[ut];if(Me=H!=null?H[ut]:void 0,B.hasOwnProperty(ut)&&ke!==Me&&(ke!=null||Me!=null))if(ut==="style")if(Me){for(ce in Me)!Me.hasOwnProperty(ce)||ke&&ke.hasOwnProperty(ce)||(b||(b={}),b[ce]="");for(ce in ke)ke.hasOwnProperty(ce)&&Me[ce]!==ke[ce]&&(b||(b={}),b[ce]=ke[ce])}else b||(ne||(ne=[]),ne.push(ut,b)),b=ke;else ut==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,Me=Me?Me.__html:void 0,ke!=null&&Me!==ke&&(ne=ne||[]).push(ut,ke)):ut==="children"?typeof ke!="string"&&typeof ke!="number"||(ne=ne||[]).push(ut,""+ke):ut!=="suppressContentEditableWarning"&&ut!=="suppressHydrationWarning"&&(i.hasOwnProperty(ut)?(ke!=null&&ut==="onScroll"&&Tr("scroll",f),ne||Me===ke||(ne=[])):(ne=ne||[]).push(ut,ke))}b&&(ne=ne||[]).push("style",b);var ut=ne;(m.updateQueue=ut)&&(m.flags|=4)}},s2=function(f,m,b,B){b!==B&&(m.flags|=4)};function Cm(f,m){if(!Lr)switch(f.tailMode){case"hidden":m=f.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var B=null;b!==null;)b.alternate!==null&&(B=b),b=b.sibling;B===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:B.sibling=null}}function _s(f){var m=f.alternate!==null&&f.alternate.child===f.child,b=0,B=0;if(m)for(var H=f.child;H!==null;)b|=H.lanes|H.childLanes,B|=H.subtreeFlags&14680064,B|=H.flags&14680064,H.return=f,H=H.sibling;else for(H=f.child;H!==null;)b|=H.lanes|H.childLanes,B|=H.subtreeFlags,B|=H.flags,H.return=f,H=H.sibling;return f.subtreeFlags|=B,f.childLanes=b,m}function IF(f,m,b){var B=m.pendingProps;switch(Ma(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(m),null;case 1:return Hi(m.type)&&If(),_s(m),null;case 3:return B=m.stateNode,ll(),Rr(ss),Rr(ki),Jo(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(f===null||f.child===null)&&(mc(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,lo!==null&&(wS(lo),lo=null))),lS(f,m),_s(m),null;case 5:wc(m);var H=ti(Aa.current);if(b=m.type,f!==null&&m.stateNode!=null)i2(f,m,b,B,H),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!B){if(m.stateNode===null)throw Error(t(166));return _s(m),null}if(f=ti(Vs.current),mc(m)){B=m.stateNode,b=m.type;var ne=m.memoizedProps;switch(B[fi]=m,B[pc]=ne,f=(m.mode&1)!==0,b){case"dialog":Tr("cancel",B),Tr("close",B);break;case"iframe":case"object":case"embed":Tr("load",B);break;case"video":case"audio":for(H=0;H<il.length;H++)Tr(il[H],B);break;case"source":Tr("error",B);break;case"img":case"image":case"link":Tr("error",B),Tr("load",B);break;case"details":Tr("toggle",B);break;case"input":je(B,ne),Tr("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!ne.multiple},Tr("invalid",B);break;case"textarea":Re(B,ne),Tr("invalid",B)}le(b,ne),H=null;for(var ce in ne)if(ne.hasOwnProperty(ce)){var Me=ne[ce];ce==="children"?typeof Me=="string"?B.textContent!==Me&&(ne.suppressHydrationWarning!==!0&&Rf(B.textContent,Me,f),H=["children",Me]):typeof Me=="number"&&B.textContent!==""+Me&&(ne.suppressHydrationWarning!==!0&&Rf(B.textContent,Me,f),H=["children",""+Me]):i.hasOwnProperty(ce)&&Me!=null&&ce==="onScroll"&&Tr("scroll",B)}switch(b){case"input":Ze(B),nt(B,ne,!0);break;case"textarea":Ze(B),ot(B);break;case"select":case"option":break;default:typeof ne.onClick=="function"&&(B.onclick=Cf)}B=H,m.updateQueue=B,B!==null&&(m.flags|=4)}else{ce=H.nodeType===9?H:H.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=et(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=ce.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof B.is=="string"?f=ce.createElement(b,{is:B.is}):(f=ce.createElement(b),b==="select"&&(ce=f,B.multiple?ce.multiple=!0:B.size&&(ce.size=B.size))):f=ce.createElementNS(f,b),f[fi]=m,f[pc]=B,r2(f,m,!1,!1),m.stateNode=f;e:{switch(ce=Xe(b,B),b){case"dialog":Tr("cancel",f),Tr("close",f),H=B;break;case"iframe":case"object":case"embed":Tr("load",f),H=B;break;case"video":case"audio":for(H=0;H<il.length;H++)Tr(il[H],f);H=B;break;case"source":Tr("error",f),H=B;break;case"img":case"image":case"link":Tr("error",f),Tr("load",f),H=B;break;case"details":Tr("toggle",f),H=B;break;case"input":je(f,B),H=Ge(f,B),Tr("invalid",f);break;case"option":H=B;break;case"select":f._wrapperState={wasMultiple:!!B.multiple},H=N({},B,{value:void 0}),Tr("invalid",f);break;case"textarea":Re(f,B),H=Oe(f,B),Tr("invalid",f);break;default:H=B}le(b,H),Me=H;for(ne in Me)if(Me.hasOwnProperty(ne)){var ke=Me[ne];ne==="style"?we(f,ke):ne==="dangerouslySetInnerHTML"?(ke=ke?ke.__html:void 0,ke!=null&&ct(f,ke)):ne==="children"?typeof ke=="string"?(b!=="textarea"||ke!=="")&&re(f,ke):typeof ke=="number"&&re(f,""+ke):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(i.hasOwnProperty(ne)?ke!=null&&ne==="onScroll"&&Tr("scroll",f):ke!=null&&k(f,ne,ke,ce))}switch(b){case"input":Ze(f),nt(f,B,!1);break;case"textarea":Ze(f),ot(f);break;case"option":B.value!=null&&f.setAttribute("value",""+_e(B.value));break;case"select":f.multiple=!!B.multiple,ne=B.value,ne!=null?oe(f,!!B.multiple,ne,!1):B.defaultValue!=null&&oe(f,!!B.multiple,B.defaultValue,!0);break;default:typeof H.onClick=="function"&&(f.onclick=Cf)}switch(b){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return _s(m),null;case 6:if(f&&m.stateNode!=null)s2(f,m,f.memoizedProps,B);else{if(typeof B!="string"&&m.stateNode===null)throw Error(t(166));if(b=ti(Aa.current),ti(Vs.current),mc(m)){if(B=m.stateNode,b=m.memoizedProps,B[fi]=m,(ne=B.nodeValue!==b)&&(f=Oi,f!==null))switch(f.tag){case 3:Rf(B.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Rf(B.nodeValue,b,(f.mode&1)!==0)}ne&&(m.flags|=4)}else B=(b.nodeType===9?b:b.ownerDocument).createTextNode(B),B[fi]=m,m.stateNode=B}return _s(m),null;case 13:if(Rr(kr),B=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Lr&&as!==null&&(m.mode&1)!==0&&(m.flags&128)===0)gm(),ol(),m.flags|=98560,ne=!1;else if(ne=mc(m),B!==null&&B.dehydrated!==null){if(f===null){if(!ne)throw Error(t(318));if(ne=m.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(t(317));ne[fi]=m}else ol(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;_s(m),ne=!1}else lo!==null&&(wS(lo),lo=null),ne=!0;if(!ne)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=b,m):(B=B!==null,B!==(f!==null&&f.memoizedState!==null)&&B&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(kr.current&1)!==0?Fi===0&&(Fi=3):SS())),m.updateQueue!==null&&(m.flags|=4),_s(m),null);case 4:return ll(),lS(f,m),f===null&&fc(m.stateNode.containerInfo),_s(m),null;case 10:return Bf(m.type._context),_s(m),null;case 17:return Hi(m.type)&&If(),_s(m),null;case 19:if(Rr(kr),ne=m.memoizedState,ne===null)return _s(m),null;if(B=(m.flags&128)!==0,ce=ne.rendering,ce===null)if(B)Cm(ne,!1);else{if(Fi!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(ce=Co(f),ce!==null){for(m.flags|=128,Cm(ne,!1),B=ce.updateQueue,B!==null&&(m.updateQueue=B,m.flags|=4),m.subtreeFlags=0,B=b,b=m.child;b!==null;)ne=b,f=B,ne.flags&=14680066,ce=ne.alternate,ce===null?(ne.childLanes=0,ne.lanes=f,ne.child=null,ne.subtreeFlags=0,ne.memoizedProps=null,ne.memoizedState=null,ne.updateQueue=null,ne.dependencies=null,ne.stateNode=null):(ne.childLanes=ce.childLanes,ne.lanes=ce.lanes,ne.child=ce.child,ne.subtreeFlags=0,ne.deletions=null,ne.memoizedProps=ce.memoizedProps,ne.memoizedState=ce.memoizedState,ne.updateQueue=ce.updateQueue,ne.type=ce.type,f=ce.dependencies,ne.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return Mr(kr,kr.current&1|2),m.child}f=f.sibling}ne.tail!==null&&At()>hp&&(m.flags|=128,B=!0,Cm(ne,!1),m.lanes=4194304)}else{if(!B)if(f=Co(ce),f!==null){if(m.flags|=128,B=!0,b=f.updateQueue,b!==null&&(m.updateQueue=b,m.flags|=4),Cm(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!ce.alternate&&!Lr)return _s(m),null}else 2*At()-ne.renderingStartTime>hp&&b!==1073741824&&(m.flags|=128,B=!0,Cm(ne,!1),m.lanes=4194304);ne.isBackwards?(ce.sibling=m.child,m.child=ce):(b=ne.last,b!==null?b.sibling=ce:m.child=ce,ne.last=ce)}return ne.tail!==null?(m=ne.tail,ne.rendering=m,ne.tail=m.sibling,ne.renderingStartTime=At(),m.sibling=null,b=kr.current,Mr(kr,B?b&1|2:b&1),m):(_s(m),null);case 22:case 23:return xS(),B=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==B&&(m.flags|=8192),B&&(m.mode&1)!==0?(Po&1073741824)!==0&&(_s(m),m.subtreeFlags&6&&(m.flags|=8192)):_s(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function NF(f,m){switch(Ma(m),m.tag){case 1:return Hi(m.type)&&If(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return ll(),Rr(ss),Rr(ki),Jo(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return wc(m),null;case 13:if(Rr(kr),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(t(340));ol()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return Rr(kr),null;case 4:return ll(),null;case 10:return Bf(m.type._context),null;case 22:case 23:return xS(),null;case 24:return null;default:return null}}var Ev=!1,xs=!1,PF=typeof WeakSet=="function"?WeakSet:Set,hn=null;function cp(f,m){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(B){ri(f,m,B)}else b.current=null}function uS(f,m,b){try{b()}catch(B){ri(f,m,B)}}var o2=!1;function LF(f,m){if(dc=to,f=Hr(),wi(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var B=b.getSelection&&b.getSelection();if(B&&B.rangeCount!==0){b=B.anchorNode;var H=B.anchorOffset,ne=B.focusNode;B=B.focusOffset;try{b.nodeType,ne.nodeType}catch{b=null;break e}var ce=0,Me=-1,ke=-1,ut=0,It=0,Lt=f,Rt=null;t:for(;;){for(var an;Lt!==b||H!==0&&Lt.nodeType!==3||(Me=ce+H),Lt!==ne||B!==0&&Lt.nodeType!==3||(ke=ce+B),Lt.nodeType===3&&(ce+=Lt.nodeValue.length),(an=Lt.firstChild)!==null;)Rt=Lt,Lt=an;for(;;){if(Lt===f)break t;if(Rt===b&&++ut===H&&(Me=ce),Rt===ne&&++It===B&&(ke=ce),(an=Lt.nextSibling)!==null)break;Lt=Rt,Rt=Lt.parentNode}Lt=an}b=Me===-1||ke===-1?null:{start:Me,end:ke}}else b=null}b=b||{start:0,end:0}}else b=null;for(im={focusedElem:f,selectionRange:b},to=!1,hn=m;hn!==null;)if(m=hn,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,hn=f;else for(;hn!==null;){m=hn;try{var pn=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(pn!==null){var gn=pn.memoizedProps,hi=pn.memoizedState,Je=m.stateNode,ze=Je.getSnapshotBeforeUpdate(m.elementType===m.type?gn:uo(m.type,gn),hi);Je.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var rt=m.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Vt){ri(m,m.return,Vt)}if(f=m.sibling,f!==null){f.return=m.return,hn=f;break}hn=m.return}return pn=o2,o2=!1,pn}function Im(f,m,b){var B=m.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var H=B=B.next;do{if((H.tag&f)===f){var ne=H.destroy;H.destroy=void 0,ne!==void 0&&uS(m,b,ne)}H=H.next}while(H!==B)}}function bv(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&f)===f){var B=b.create;b.destroy=B()}b=b.next}while(b!==m)}}function cS(f){var m=f.ref;if(m!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof m=="function"?m(f):m.current=f}}function a2(f){var m=f.alternate;m!==null&&(f.alternate=null,a2(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[fi],delete m[pc],delete m[Ql],delete m[Kd],delete m[Yd])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function l2(f){return f.tag===5||f.tag===3||f.tag===4}function u2(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||l2(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function fS(f,m,b){var B=f.tag;if(B===5||B===6)f=f.stateNode,m?b.nodeType===8?b.parentNode.insertBefore(f,m):b.insertBefore(f,m):(b.nodeType===8?(m=b.parentNode,m.insertBefore(f,b)):(m=b,m.appendChild(f)),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=Cf));else if(B!==4&&(f=f.child,f!==null))for(fS(f,m,b),f=f.sibling;f!==null;)fS(f,m,b),f=f.sibling}function hS(f,m,b){var B=f.tag;if(B===5||B===6)f=f.stateNode,m?b.insertBefore(f,m):b.appendChild(f);else if(B!==4&&(f=f.child,f!==null))for(hS(f,m,b),f=f.sibling;f!==null;)hS(f,m,b),f=f.sibling}var us=null,Na=!1;function Sc(f,m,b){for(b=b.child;b!==null;)c2(f,m,b),b=b.sibling}function c2(f,m,b){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(En,b)}catch{}switch(b.tag){case 5:xs||cp(b,m);case 6:var B=us,H=Na;us=null,Sc(f,m,b),us=B,Na=H,us!==null&&(Na?(f=us,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):us.removeChild(b.stateNode));break;case 18:us!==null&&(Na?(f=us,b=b.stateNode,f.nodeType===8?qd(f.parentNode,b):f.nodeType===1&&qd(f,b),yf(f)):qd(us,b.stateNode));break;case 4:B=us,H=Na,us=b.stateNode.containerInfo,Na=!0,Sc(f,m,b),us=B,Na=H;break;case 0:case 11:case 14:case 15:if(!xs&&(B=b.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){H=B=B.next;do{var ne=H,ce=ne.destroy;ne=ne.tag,ce!==void 0&&((ne&2)!==0||(ne&4)!==0)&&uS(b,m,ce),H=H.next}while(H!==B)}Sc(f,m,b);break;case 1:if(!xs&&(cp(b,m),B=b.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=b.memoizedProps,B.state=b.memoizedState,B.componentWillUnmount()}catch(Me){ri(b,m,Me)}Sc(f,m,b);break;case 21:Sc(f,m,b);break;case 22:b.mode&1?(xs=(B=xs)||b.memoizedState!==null,Sc(f,m,b),xs=B):Sc(f,m,b);break;default:Sc(f,m,b)}}function f2(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new PF),m.forEach(function(B){var H=VF.bind(null,f,B);b.has(B)||(b.add(B),B.then(H,H))})}}function Pa(f,m){var b=m.deletions;if(b!==null)for(var B=0;B<b.length;B++){var H=b[B];try{var ne=f,ce=m,Me=ce;e:for(;Me!==null;){switch(Me.tag){case 5:us=Me.stateNode,Na=!1;break e;case 3:us=Me.stateNode.containerInfo,Na=!0;break e;case 4:us=Me.stateNode.containerInfo,Na=!0;break e}Me=Me.return}if(us===null)throw Error(t(160));c2(ne,ce,H),us=null,Na=!1;var ke=H.alternate;ke!==null&&(ke.return=null),H.return=null}catch(ut){ri(H,m,ut)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)h2(m,f),m=m.sibling}function h2(f,m){var b=f.alternate,B=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Pa(m,f),cl(f),B&4){try{Im(3,f,f.return),bv(3,f)}catch(gn){ri(f,f.return,gn)}try{Im(5,f,f.return)}catch(gn){ri(f,f.return,gn)}}break;case 1:Pa(m,f),cl(f),B&512&&b!==null&&cp(b,b.return);break;case 5:if(Pa(m,f),cl(f),B&512&&b!==null&&cp(b,b.return),f.flags&32){var H=f.stateNode;try{re(H,"")}catch(gn){ri(f,f.return,gn)}}if(B&4&&(H=f.stateNode,H!=null)){var ne=f.memoizedProps,ce=b!==null?b.memoizedProps:ne,Me=f.type,ke=f.updateQueue;if(f.updateQueue=null,ke!==null)try{Me==="input"&&ne.type==="radio"&&ne.name!=null&&vt(H,ne),Xe(Me,ce);var ut=Xe(Me,ne);for(ce=0;ce<ke.length;ce+=2){var It=ke[ce],Lt=ke[ce+1];It==="style"?we(H,Lt):It==="dangerouslySetInnerHTML"?ct(H,Lt):It==="children"?re(H,Lt):k(H,It,Lt,ut)}switch(Me){case"input":He(H,ne);break;case"textarea":Le(H,ne);break;case"select":var Rt=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!ne.multiple;var an=ne.value;an!=null?oe(H,!!ne.multiple,an,!1):Rt!==!!ne.multiple&&(ne.defaultValue!=null?oe(H,!!ne.multiple,ne.defaultValue,!0):oe(H,!!ne.multiple,ne.multiple?[]:"",!1))}H[pc]=ne}catch(gn){ri(f,f.return,gn)}}break;case 6:if(Pa(m,f),cl(f),B&4){if(f.stateNode===null)throw Error(t(162));H=f.stateNode,ne=f.memoizedProps;try{H.nodeValue=ne}catch(gn){ri(f,f.return,gn)}}break;case 3:if(Pa(m,f),cl(f),B&4&&b!==null&&b.memoizedState.isDehydrated)try{yf(m.containerInfo)}catch(gn){ri(f,f.return,gn)}break;case 4:Pa(m,f),cl(f);break;case 13:Pa(m,f),cl(f),H=f.child,H.flags&8192&&(ne=H.memoizedState!==null,H.stateNode.isHidden=ne,!ne||H.alternate!==null&&H.alternate.memoizedState!==null||(mS=At())),B&4&&f2(f);break;case 22:if(It=b!==null&&b.memoizedState!==null,f.mode&1?(xs=(ut=xs)||It,Pa(m,f),xs=ut):Pa(m,f),cl(f),B&8192){if(ut=f.memoizedState!==null,(f.stateNode.isHidden=ut)&&!It&&(f.mode&1)!==0)for(hn=f,It=f.child;It!==null;){for(Lt=hn=It;hn!==null;){switch(Rt=hn,an=Rt.child,Rt.tag){case 0:case 11:case 14:case 15:Im(4,Rt,Rt.return);break;case 1:cp(Rt,Rt.return);var pn=Rt.stateNode;if(typeof pn.componentWillUnmount=="function"){B=Rt,b=Rt.return;try{m=B,pn.props=m.memoizedProps,pn.state=m.memoizedState,pn.componentWillUnmount()}catch(gn){ri(B,b,gn)}}break;case 5:cp(Rt,Rt.return);break;case 22:if(Rt.memoizedState!==null){m2(Lt);continue}}an!==null?(an.return=Rt,hn=an):m2(Lt)}It=It.sibling}e:for(It=null,Lt=f;;){if(Lt.tag===5){if(It===null){It=Lt;try{H=Lt.stateNode,ut?(ne=H.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none"):(Me=Lt.stateNode,ke=Lt.memoizedProps.style,ce=ke!=null&&ke.hasOwnProperty("display")?ke.display:null,Me.style.display=ue("display",ce))}catch(gn){ri(f,f.return,gn)}}}else if(Lt.tag===6){if(It===null)try{Lt.stateNode.nodeValue=ut?"":Lt.memoizedProps}catch(gn){ri(f,f.return,gn)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===f)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===f)break e;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===f)break e;It===Lt&&(It=null),Lt=Lt.return}It===Lt&&(It=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}break;case 19:Pa(m,f),cl(f),B&4&&f2(f);break;case 21:break;default:Pa(m,f),cl(f)}}function cl(f){var m=f.flags;if(m&2){try{e:{for(var b=f.return;b!==null;){if(l2(b)){var B=b;break e}b=b.return}throw Error(t(160))}switch(B.tag){case 5:var H=B.stateNode;B.flags&32&&(re(H,""),B.flags&=-33);var ne=u2(f);hS(f,ne,H);break;case 3:case 4:var ce=B.stateNode.containerInfo,Me=u2(f);fS(f,Me,ce);break;default:throw Error(t(161))}}catch(ke){ri(f,f.return,ke)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function kF(f,m,b){hn=f,d2(f)}function d2(f,m,b){for(var B=(f.mode&1)!==0;hn!==null;){var H=hn,ne=H.child;if(H.tag===22&&B){var ce=H.memoizedState!==null||Ev;if(!ce){var Me=H.alternate,ke=Me!==null&&Me.memoizedState!==null||xs;Me=Ev;var ut=xs;if(Ev=ce,(xs=ke)&&!ut)for(hn=H;hn!==null;)ce=hn,ke=ce.child,ce.tag===22&&ce.memoizedState!==null?g2(H):ke!==null?(ke.return=ce,hn=ke):g2(H);for(;ne!==null;)hn=ne,d2(ne),ne=ne.sibling;hn=H,Ev=Me,xs=ut}p2(f)}else(H.subtreeFlags&8772)!==0&&ne!==null?(ne.return=H,hn=ne):p2(f)}}function p2(f){for(;hn!==null;){var m=hn;if((m.flags&8772)!==0){var b=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:xs||bv(5,m);break;case 1:var B=m.stateNode;if(m.flags&4&&!xs)if(b===null)B.componentDidMount();else{var H=m.elementType===m.type?b.memoizedProps:uo(m.type,b.memoizedProps);B.componentDidUpdate(H,b.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var ne=m.updateQueue;ne!==null&&vc(m,ne,B);break;case 3:var ce=m.updateQueue;if(ce!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=m.child.stateNode;break;case 1:b=m.child.stateNode}vc(m,ce,b)}break;case 5:var Me=m.stateNode;if(b===null&&m.flags&4){b=Me;var ke=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":ke.autoFocus&&b.focus();break;case"img":ke.src&&(b.src=ke.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var ut=m.alternate;if(ut!==null){var It=ut.memoizedState;if(It!==null){var Lt=It.dehydrated;Lt!==null&&yf(Lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xs||m.flags&512&&cS(m)}catch(Rt){ri(m,m.return,Rt)}}if(m===f){hn=null;break}if(b=m.sibling,b!==null){b.return=m.return,hn=b;break}hn=m.return}}function m2(f){for(;hn!==null;){var m=hn;if(m===f){hn=null;break}var b=m.sibling;if(b!==null){b.return=m.return,hn=b;break}hn=m.return}}function g2(f){for(;hn!==null;){var m=hn;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{bv(4,m)}catch(ke){ri(m,b,ke)}break;case 1:var B=m.stateNode;if(typeof B.componentDidMount=="function"){var H=m.return;try{B.componentDidMount()}catch(ke){ri(m,H,ke)}}var ne=m.return;try{cS(m)}catch(ke){ri(m,ne,ke)}break;case 5:var ce=m.return;try{cS(m)}catch(ke){ri(m,ce,ke)}}}catch(ke){ri(m,m.return,ke)}if(m===f){hn=null;break}var Me=m.sibling;if(Me!==null){Me.return=m.return,hn=Me;break}hn=m.return}}var OF=Math.ceil,Av=F.ReactCurrentDispatcher,dS=F.ReactCurrentOwner,ta=F.ReactCurrentBatchConfig,hr=0,qi=null,Ei=null,cs=0,Po=0,fp=jr(0),Fi=0,Nm=null,Yf=0,Tv=0,pS=0,Pm=null,co=null,mS=0,hp=1/0,pu=null,Rv=!1,gS=null,Mc=null,Cv=!1,Ec=null,Iv=0,Lm=0,yS=null,Nv=-1,Pv=0;function qs(){return(hr&6)!==0?At():Nv!==-1?Nv:Nv=At()}function bc(f){return(f.mode&1)===0?1:(hr&2)!==0&&cs!==0?cs&-cs:sS.transition!==null?(Pv===0&&(Pv=Ut()),Pv):(f=Cn,f!==0||(f=window.event,f=f===void 0?16:Zy(f.type)),f)}function La(f,m,b,B){if(50<Lm)throw Lm=0,yS=null,Error(t(185));cn(f,b,B),((hr&2)===0||f!==qi)&&(f===qi&&((hr&2)===0&&(Tv|=b),Fi===4&&Ac(f,cs)),fo(f,B),b===1&&hr===0&&(m.mode&1)===0&&(hp=At()+500,Pf&&Zo()))}function fo(f,m){var b=f.callbackNode;Fe(f,m);var B=mt(f,f===qi?cs:0);if(B===0)b!==null&&Be(b),f.callbackNode=null,f.callbackPriority=0;else if(m=B&-B,f.callbackPriority!==m){if(b!=null&&Be(b),m===1)f.tag===0?fv(v2.bind(null,f)):Lf(v2.bind(null,f)),iS(function(){(hr&6)===0&&Zo()}),b=null;else{switch(eo(B)){case 1:b=rn;break;case 4:b=on;break;case 16:b=Kt;break;case 536870912:b=Rn;break;default:b=Kt}b=A2(b,y2.bind(null,f))}f.callbackPriority=m,f.callbackNode=b}}function y2(f,m){if(Nv=-1,Pv=0,(hr&6)!==0)throw Error(t(327));var b=f.callbackNode;if(dp()&&f.callbackNode!==b)return null;var B=mt(f,f===qi?cs:0);if(B===0)return null;if((B&30)!==0||(B&f.expiredLanes)!==0||m)m=Lv(f,B);else{m=B;var H=hr;hr|=2;var ne=_2();(qi!==f||cs!==m)&&(pu=null,hp=At()+500,$f(f,m));do try{UF();break}catch(Me){w2(f,Me)}while(!0);ou(),Av.current=ne,hr=H,Ei!==null?m=0:(qi=null,cs=0,m=Fi)}if(m!==0){if(m===2&&(H=St(f),H!==0&&(B=H,m=vS(f,H))),m===1)throw b=Nm,$f(f,0),Ac(f,B),fo(f,At()),b;if(m===6)Ac(f,B);else{if(H=f.current.alternate,(B&30)===0&&!DF(H)&&(m=Lv(f,B),m===2&&(ne=St(f),ne!==0&&(B=ne,m=vS(f,ne))),m===1))throw b=Nm,$f(f,0),Ac(f,B),fo(f,At()),b;switch(f.finishedWork=H,f.finishedLanes=B,m){case 0:case 1:throw Error(t(345));case 2:Zf(f,co,pu);break;case 3:if(Ac(f,B),(B&130023424)===B&&(m=mS+500-At(),10<m)){if(mt(f,0)!==0)break;if(H=f.suspendedLanes,(H&B)!==B){qs(),f.pingedLanes|=f.suspendedLanes&H;break}f.timeoutHandle=om(Zf.bind(null,f,co,pu),m);break}Zf(f,co,pu);break;case 4:if(Ac(f,B),(B&4194240)===B)break;for(m=f.eventTimes,H=-1;0<B;){var ce=31-Bt(B);ne=1<<ce,ce=m[ce],ce>H&&(H=ce),B&=~ne}if(B=H,B=At()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*OF(B/1960))-B,10<B){f.timeoutHandle=om(Zf.bind(null,f,co,pu),B);break}Zf(f,co,pu);break;case 5:Zf(f,co,pu);break;default:throw Error(t(329))}}}return fo(f,At()),f.callbackNode===b?y2.bind(null,f):null}function vS(f,m){var b=Pm;return f.current.memoizedState.isDehydrated&&($f(f,m).flags|=256),f=Lv(f,m),f!==2&&(m=co,co=b,m!==null&&wS(m)),f}function wS(f){co===null?co=f:co.push.apply(co,f)}function DF(f){for(var m=f;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var B=0;B<b.length;B++){var H=b[B],ne=H.getSnapshot;H=H.value;try{if(!Us(ne(),H))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ac(f,m){for(m&=~pS,m&=~Tv,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var b=31-Bt(m),B=1<<b;f[b]=-1,m&=~B}}function v2(f){if((hr&6)!==0)throw Error(t(327));dp();var m=mt(f,0);if((m&1)===0)return fo(f,At()),null;var b=Lv(f,m);if(f.tag!==0&&b===2){var B=St(f);B!==0&&(m=B,b=vS(f,B))}if(b===1)throw b=Nm,$f(f,0),Ac(f,m),fo(f,At()),b;if(b===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Zf(f,co,pu),fo(f,At()),null}function _S(f,m){var b=hr;hr|=1;try{return f(m)}finally{hr=b,hr===0&&(hp=At()+500,Pf&&Zo())}}function Xf(f){Ec!==null&&Ec.tag===0&&(hr&6)===0&&dp();var m=hr;hr|=1;var b=ta.transition,B=Cn;try{if(ta.transition=null,Cn=1,f)return f()}finally{Cn=B,ta.transition=b,hr=m,(hr&6)===0&&Zo()}}function xS(){Po=fp.current,Rr(fp)}function $f(f,m){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,am(b)),Ei!==null)for(b=Ei.return;b!==null;){var B=b;switch(Ma(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&If();break;case 3:ll(),Rr(ss),Rr(ki),Jo();break;case 5:wc(B);break;case 4:ll();break;case 13:Rr(kr);break;case 19:Rr(kr);break;case 10:Bf(B.type._context);break;case 22:case 23:xS()}b=b.return}if(qi=f,Ei=f=Tc(f.current,null),cs=Po=m,Fi=0,Nm=null,pS=Tv=Yf=0,co=Pm=null,ba!==null){for(m=0;m<ba.length;m++)if(b=ba[m],B=b.interleaved,B!==null){b.interleaved=null;var H=B.next,ne=b.pending;if(ne!==null){var ce=ne.next;ne.next=H,B.next=ce}b.pending=B}ba=null}return f}function w2(f,m){do{var b=Ei;try{if(ou(),cu.current=lp,Io){for(var B=Cr.memoizedState;B!==null;){var H=B.queue;H!==null&&(H.pending=null),B=B.next}Io=!1}if(Ta=0,ar=Kr=Cr=null,ji=!1,ul=0,dS.current=null,b===null||b.return===null){Fi=1,Nm=m,Ei=null;break}e:{var ne=f,ce=b.return,Me=b,ke=m;if(m=cs,Me.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var ut=ke,It=Me,Lt=It.tag;if((It.mode&1)===0&&(Lt===0||Lt===11||Lt===15)){var Rt=It.alternate;Rt?(It.updateQueue=Rt.updateQueue,It.memoizedState=Rt.memoizedState,It.lanes=Rt.lanes):(It.updateQueue=null,It.memoizedState=null)}var an=fn(ce);if(an!==null){an.flags&=-257,Un(an,ce,Me,ne,m),an.mode&1&&Wt(ne,ut,m),m=an,ke=ut;var pn=m.updateQueue;if(pn===null){var gn=new Set;gn.add(ke),m.updateQueue=gn}else pn.add(ke);break e}else{if((m&1)===0){Wt(ne,ut,m),SS();break e}ke=Error(t(426))}}else if(Lr&&Me.mode&1){var hi=fn(ce);if(hi!==null){(hi.flags&65536)===0&&(hi.flags|=256),Un(hi,ce,Me,ne,m),gc(z(ke,Me));break e}}ne=ke=z(ke,Me),Fi!==4&&(Fi=2),Pm===null?Pm=[ne]:Pm.push(ne),ne=ce;do{switch(ne.tag){case 3:ne.flags|=65536,m&=-m,ne.lanes|=m;var Je=We(ne,ke,m);au(ne,Je);break e;case 1:Me=ke;var ze=ne.type,rt=ne.stateNode;if((ne.flags&128)===0&&(typeof ze.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(Mc===null||!Mc.has(rt)))){ne.flags|=65536,m&=-m,ne.lanes|=m;var Vt=pt(ne,Me,m);au(ne,Vt);break e}}ne=ne.return}while(ne!==null)}S2(b)}catch(wn){m=wn,Ei===b&&b!==null&&(Ei=b=b.return);continue}break}while(!0)}function _2(){var f=Av.current;return Av.current=lp,f===null?lp:f}function SS(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),qi===null||(Yf&268435455)===0&&(Tv&268435455)===0||Ac(qi,cs)}function Lv(f,m){var b=hr;hr|=2;var B=_2();(qi!==f||cs!==m)&&(pu=null,$f(f,m));do try{BF();break}catch(H){w2(f,H)}while(!0);if(ou(),hr=b,Av.current=B,Ei!==null)throw Error(t(261));return qi=null,cs=0,Fi}function BF(){for(;Ei!==null;)x2(Ei)}function UF(){for(;Ei!==null&&!Tt();)x2(Ei)}function x2(f){var m=b2(f.alternate,f,Po);f.memoizedProps=f.pendingProps,m===null?S2(f):Ei=m,dS.current=null}function S2(f){var m=f;do{var b=m.alternate;if(f=m.return,(m.flags&32768)===0){if(b=IF(b,m,Po),b!==null){Ei=b;return}}else{if(b=NF(b,m),b!==null){b.flags&=32767,Ei=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Fi=6,Ei=null;return}}if(m=m.sibling,m!==null){Ei=m;return}Ei=m=f}while(m!==null);Fi===0&&(Fi=5)}function Zf(f,m,b){var B=Cn,H=ta.transition;try{ta.transition=null,Cn=1,FF(f,m,b,B)}finally{ta.transition=H,Cn=B}return null}function FF(f,m,b,B){do dp();while(Ec!==null);if((hr&6)!==0)throw Error(t(327));b=f.finishedWork;var H=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var ne=b.lanes|b.childLanes;if(zn(f,ne),f===qi&&(Ei=qi=null,cs=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Cv||(Cv=!0,A2(Kt,function(){return dp(),null})),ne=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||ne){ne=ta.transition,ta.transition=null;var ce=Cn;Cn=1;var Me=hr;hr|=4,dS.current=null,LF(f,b),h2(b,f),_i(im),to=!!dc,im=dc=null,f.current=b,kF(b),zt(),hr=Me,Cn=ce,ta.transition=ne}else f.current=b;if(Cv&&(Cv=!1,Ec=f,Iv=H),ne=f.pendingLanes,ne===0&&(Mc=null),$t(b.stateNode),fo(f,At()),m!==null)for(B=f.onRecoverableError,b=0;b<m.length;b++)H=m[b],B(H.value,{componentStack:H.stack,digest:H.digest});if(Rv)throw Rv=!1,f=gS,gS=null,f;return(Iv&1)!==0&&f.tag!==0&&dp(),ne=f.pendingLanes,(ne&1)!==0?f===yS?Lm++:(Lm=0,yS=f):Lm=0,Zo(),null}function dp(){if(Ec!==null){var f=eo(Iv),m=ta.transition,b=Cn;try{if(ta.transition=null,Cn=16>f?16:f,Ec===null)var B=!1;else{if(f=Ec,Ec=null,Iv=0,(hr&6)!==0)throw Error(t(331));var H=hr;for(hr|=4,hn=f.current;hn!==null;){var ne=hn,ce=ne.child;if((hn.flags&16)!==0){var Me=ne.deletions;if(Me!==null){for(var ke=0;ke<Me.length;ke++){var ut=Me[ke];for(hn=ut;hn!==null;){var It=hn;switch(It.tag){case 0:case 11:case 15:Im(8,It,ne)}var Lt=It.child;if(Lt!==null)Lt.return=It,hn=Lt;else for(;hn!==null;){It=hn;var Rt=It.sibling,an=It.return;if(a2(It),It===ut){hn=null;break}if(Rt!==null){Rt.return=an,hn=Rt;break}hn=an}}}var pn=ne.alternate;if(pn!==null){var gn=pn.child;if(gn!==null){pn.child=null;do{var hi=gn.sibling;gn.sibling=null,gn=hi}while(gn!==null)}}hn=ne}}if((ne.subtreeFlags&2064)!==0&&ce!==null)ce.return=ne,hn=ce;else e:for(;hn!==null;){if(ne=hn,(ne.flags&2048)!==0)switch(ne.tag){case 0:case 11:case 15:Im(9,ne,ne.return)}var Je=ne.sibling;if(Je!==null){Je.return=ne.return,hn=Je;break e}hn=ne.return}}var ze=f.current;for(hn=ze;hn!==null;){ce=hn;var rt=ce.child;if((ce.subtreeFlags&2064)!==0&&rt!==null)rt.return=ce,hn=rt;else e:for(ce=ze;hn!==null;){if(Me=hn,(Me.flags&2048)!==0)try{switch(Me.tag){case 0:case 11:case 15:bv(9,Me)}}catch(wn){ri(Me,Me.return,wn)}if(Me===ce){hn=null;break e}var Vt=Me.sibling;if(Vt!==null){Vt.return=Me.return,hn=Vt;break e}hn=Me.return}}if(hr=H,Zo(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(En,f)}catch{}B=!0}return B}finally{Cn=b,ta.transition=m}}return!1}function M2(f,m,b){m=z(b,m),m=We(f,m,1),f=Br(f,m,1),m=qs(),f!==null&&(cn(f,1,m),fo(f,m))}function ri(f,m,b){if(f.tag===3)M2(f,f,b);else for(;m!==null;){if(m.tag===3){M2(m,f,b);break}else if(m.tag===1){var B=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Mc===null||!Mc.has(B))){f=z(b,f),f=pt(m,f,1),m=Br(m,f,1),f=qs(),m!==null&&(cn(m,1,f),fo(m,f));break}}m=m.return}}function zF(f,m,b){var B=f.pingCache;B!==null&&B.delete(m),m=qs(),f.pingedLanes|=f.suspendedLanes&b,qi===f&&(cs&b)===b&&(Fi===4||Fi===3&&(cs&130023424)===cs&&500>At()-mS?$f(f,0):pS|=b),fo(f,m)}function E2(f,m){m===0&&((f.mode&1)===0?m=1:(m=sr,sr<<=1,(sr&130023424)===0&&(sr=4194304)));var b=qs();f=Ro(f,m),f!==null&&(cn(f,m,b),fo(f,b))}function WF(f){var m=f.memoizedState,b=0;m!==null&&(b=m.retryLane),E2(f,b)}function VF(f,m){var b=0;switch(f.tag){case 13:var B=f.stateNode,H=f.memoizedState;H!==null&&(b=H.retryLane);break;case 19:B=f.stateNode;break;default:throw Error(t(314))}B!==null&&B.delete(m),E2(f,b)}var b2;b2=function(f,m,b){if(f!==null)if(f.memoizedProps!==m.pendingProps||ss.current)Gn=!0;else{if((f.lanes&b)===0&&(m.flags&128)===0)return Gn=!1,CF(f,m,b);Gn=(f.flags&131072)!==0}else Gn=!1,Lr&&(m.flags&1048576)!==0&&hm(m,Qd,m.index);switch(m.lanes=0,m.tag){case 2:var B=m.type;Mv(f,m),f=m.pendingProps;var H=Jl(m,ki.current);al(m,b),H=Vf(null,m,B,f,H,b);var ne=_m();return m.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Hi(B)?(ne=!0,eu(m)):ne=!1,m.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Hn(m),H.updater=up,m.stateNode=H,H._reactInternals=m,O(m,B,f,b),m=Vn(null,m,B,!0,ne,b)):(m.tag=0,Lr&&ne&&dm(m),sn(null,m,H,b),m=m.child),m;case 16:B=m.elementType;e:{switch(Mv(f,m),f=m.pendingProps,H=B._init,B=H(B._payload),m.type=B,H=m.tag=GF(B),f=uo(B,f),H){case 0:m=Qt(null,m,B,f,b);break e;case 1:m=yn(null,m,B,f,b);break e;case 11:m=Ui(null,m,B,f,b);break e;case 14:m=js(null,m,B,uo(B.type,f),b);break e}throw Error(t(306,B,""))}return m;case 0:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:uo(B,H),Qt(f,m,B,H,b);case 1:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:uo(B,H),yn(f,m,B,H,b);case 3:e:{if(Fn(m),f===null)throw Error(t(387));B=m.pendingProps,ne=m.memoizedState,H=ne.element,$r(f,m),qr(m,B,null,b);var ce=m.memoizedState;if(B=ce.element,ne.isDehydrated)if(ne={element:B,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},m.updateQueue.baseState=ne,m.memoizedState=ne,m.flags&256){H=z(Error(t(423)),m),m=or(f,m,B,b,H);break e}else if(B!==H){H=z(Error(t(424)),m),m=or(f,m,B,b,H);break e}else for(as=va(m.stateNode.containerInfo.firstChild),Oi=m,Lr=!0,lo=null,b=Df(m,null,B,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(ol(),B===H){m=du(f,m,b);break e}sn(f,m,B,b)}m=m.child}return m;case 5:return uu(m),f===null&&ep(m),B=m.type,H=m.pendingProps,ne=f!==null?f.memoizedProps:null,ce=H.children,sm(B,H)?ce=null:ne!==null&&sm(B,ne)&&(m.flags|=32),ht(f,m),sn(f,m,ce,b),m.child;case 6:return f===null&&ep(m),null;case 13:return Ia(f,m,b);case 4:return zf(m,m.stateNode.containerInfo),B=m.pendingProps,f===null?m.child=ru(m,null,B,b):sn(f,m,B,b),m.child;case 11:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:uo(B,H),Ui(f,m,B,H,b);case 7:return sn(f,m,m.pendingProps,b),m.child;case 8:return sn(f,m,m.pendingProps.children,b),m.child;case 12:return sn(f,m,m.pendingProps.children,b),m.child;case 10:e:{if(B=m.type._context,H=m.pendingProps,ne=m.memoizedProps,ce=H.value,Mr(iu,B._currentValue),B._currentValue=ce,ne!==null)if(Us(ne.value,ce)){if(ne.children===H.children&&!ss.current){m=du(f,m,b);break e}}else for(ne=m.child,ne!==null&&(ne.return=m);ne!==null;){var Me=ne.dependencies;if(Me!==null){ce=ne.child;for(var ke=Me.firstContext;ke!==null;){if(ke.context===B){if(ne.tag===1){ke=xr(-1,b&-b),ke.tag=2;var ut=ne.updateQueue;if(ut!==null){ut=ut.shared;var It=ut.pending;It===null?ke.next=ke:(ke.next=It.next,It.next=ke),ut.pending=ke}}ne.lanes|=b,ke=ne.alternate,ke!==null&&(ke.lanes|=b),Uf(ne.return,b,m),Me.lanes|=b;break}ke=ke.next}}else if(ne.tag===10)ce=ne.type===m.type?null:ne.child;else if(ne.tag===18){if(ce=ne.return,ce===null)throw Error(t(341));ce.lanes|=b,Me=ce.alternate,Me!==null&&(Me.lanes|=b),Uf(ce,b,m),ce=ne.sibling}else ce=ne.child;if(ce!==null)ce.return=ne;else for(ce=ne;ce!==null;){if(ce===m){ce=null;break}if(ne=ce.sibling,ne!==null){ne.return=ce.return,ce=ne;break}ce=ce.return}ne=ce}sn(f,m,H.children,b),m=m.child}return m;case 9:return H=m.type,B=m.pendingProps.children,al(m,b),H=Ws(H),B=B(H),m.flags|=1,sn(f,m,B,b),m.child;case 14:return B=m.type,H=uo(B,m.pendingProps),H=uo(B.type,H),js(f,m,B,H,b);case 15:return st(f,m,m.type,m.pendingProps,b);case 17:return B=m.type,H=m.pendingProps,H=m.elementType===B?H:uo(B,H),Mv(f,m),m.tag=1,Hi(B)?(f=!0,eu(m)):f=!1,al(m,b),g(m,B,H),O(m,B,H,b),Vn(null,m,B,!0,f,b);case 19:return n2(f,m,b);case 22:return Ke(f,m,b)}throw Error(t(156,m.tag))};function A2(f,m){return Qe(f,m)}function HF(f,m,b,B){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(f,m,b,B){return new HF(f,m,b,B)}function MS(f){return f=f.prototype,!(!f||!f.isReactComponent)}function GF(f){if(typeof f=="function")return MS(f)?1:0;if(f!=null){if(f=f.$$typeof,f===K)return 11;if(f===p)return 14}return 2}function Tc(f,m){var b=f.alternate;return b===null?(b=na(f.tag,m,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=m,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,m=f.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function kv(f,m,b,B,H,ne){var ce=2;if(B=f,typeof f=="function")MS(f)&&(ce=1);else if(typeof f=="string")ce=5;else e:switch(f){case Y:return Qf(b.children,H,ne,m);case ee:ce=8,H|=8;break;case te:return f=na(12,b,m,H|2),f.elementType=te,f.lanes=ne,f;case E:return f=na(13,b,m,H),f.elementType=E,f.lanes=ne,f;case a:return f=na(19,b,m,H),f.elementType=a,f.lanes=ne,f;case R:return Ov(b,H,ne,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case U:ce=10;break e;case V:ce=9;break e;case K:ce=11;break e;case p:ce=14;break e;case M:ce=16,B=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return m=na(ce,b,m,H),m.elementType=f,m.type=B,m.lanes=ne,m}function Qf(f,m,b,B){return f=na(7,f,B,m),f.lanes=b,f}function Ov(f,m,b,B){return f=na(22,f,B,m),f.elementType=R,f.lanes=b,f.stateNode={isHidden:!1},f}function ES(f,m,b){return f=na(6,f,null,m),f.lanes=b,f}function bS(f,m,b){return m=na(4,f.children!==null?f.children:[],f.key,m),m.lanes=b,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function jF(f,m,b,B,H){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.identifierPrefix=B,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function AS(f,m,b,B,H,ne,ce,Me,ke){return f=new jF(f,m,b,Me,ke),m===1?(m=1,ne===!0&&(m|=8)):m=0,ne=na(3,null,null,m),f.current=ne,ne.stateNode=f,ne.memoizedState={element:B,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hn(ne),f}function qF(f,m,b){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:B==null?null:""+B,children:f,containerInfo:m,implementation:b}}function T2(f){if(!f)return _a;f=f._reactInternals;e:{if(Pr(f)!==f||f.tag!==1)throw Error(t(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Hi(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(f.tag===1){var b=f.type;if(Hi(b))return Nf(f,b,m)}return m}function R2(f,m,b,B,H,ne,ce,Me,ke){return f=AS(b,B,!0,f,H,ne,ce,Me,ke),f.context=T2(null),b=f.current,B=qs(),H=bc(b),ne=xr(B,H),ne.callback=m??null,Br(b,ne,H),f.current.lanes=H,cn(f,H,B),fo(f,B),f}function Dv(f,m,b,B){var H=m.current,ne=qs(),ce=bc(H);return b=T2(b),m.context===null?m.context=b:m.pendingContext=b,m=xr(ne,ce),m.payload={element:f},B=B===void 0?null:B,B!==null&&(m.callback=B),f=Br(H,m,ce),f!==null&&(La(f,H,ce,ne),Gi(f,H,ce)),ce}function Bv(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function C2(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<m?b:m}}function TS(f,m){C2(f,m),(f=f.alternate)&&C2(f,m)}function KF(){return null}var I2=typeof reportError=="function"?reportError:function(f){console.error(f)};function RS(f){this._internalRoot=f}Uv.prototype.render=RS.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(t(409));Dv(f,m,null,null)},Uv.prototype.unmount=RS.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;Xf(function(){Dv(null,f,null,null)}),m[zs]=null}};function Uv(f){this._internalRoot=f}Uv.prototype.unstable_scheduleHydration=function(f){if(f){var m=yd();f={blockedOn:null,target:f,priority:m};for(var b=0;b<Qa.length&&m!==0&&m<Qa[b].priority;b++);Qa.splice(b,0,f),b===0&&_d(f)}};function CS(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function Fv(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function N2(){}function YF(f,m,b,B,H){if(H){if(typeof B=="function"){var ne=B;B=function(){var ut=Bv(ce);ne.call(ut)}}var ce=R2(m,B,f,0,null,!1,!1,"",N2);return f._reactRootContainer=ce,f[zs]=ce.current,fc(f.nodeType===8?f.parentNode:f),Xf(),ce}for(;H=f.lastChild;)f.removeChild(H);if(typeof B=="function"){var Me=B;B=function(){var ut=Bv(ke);Me.call(ut)}}var ke=AS(f,0,!1,null,null,!1,!1,"",N2);return f._reactRootContainer=ke,f[zs]=ke.current,fc(f.nodeType===8?f.parentNode:f),Xf(function(){Dv(m,ke,b,B)}),ke}function zv(f,m,b,B,H){var ne=b._reactRootContainer;if(ne){var ce=ne;if(typeof H=="function"){var Me=H;H=function(){var ke=Bv(ce);Me.call(ke)}}Dv(m,ce,f,H)}else ce=YF(b,m,f,H,B);return Bv(ce)}Dl=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var b=Yt(m.pendingLanes);b!==0&&(Wn(m,b|1),fo(m,At()),(hr&6)===0&&(hp=At()+500,Zo()))}break;case 13:Xf(function(){var B=Ro(f,1);if(B!==null){var H=qs();La(B,f,1,H)}}),TS(f,1)}},pf=function(f){if(f.tag===13){var m=Ro(f,134217728);if(m!==null){var b=qs();La(m,f,134217728,b)}TS(f,134217728)}},$y=function(f){if(f.tag===13){var m=bc(f),b=Ro(f,m);if(b!==null){var B=qs();La(b,f,m,B)}TS(f,m)}},yd=function(){return Cn},vd=function(f,m){var b=Cn;try{return Cn=f,m()}finally{Cn=b}},Ue=function(f,m,b){switch(m){case"input":if(He(f,b),m=b.name,b.type==="radio"&&m!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<b.length;m++){var B=b[m];if(B!==f&&B.form===f.form){var H=Xd(B);if(!H)throw Error(t(90));Pe(B),He(B,H)}}}break;case"textarea":Le(f,b);break;case"select":m=b.value,m!=null&&oe(f,!!b.multiple,m,!1)}},Sn=_S,dt=Xf;var XF={usingClientEntryPoint:!1,Events:[wa,Xr,Xd,ft,yt,_S]},km={findFiberByHostInstance:sl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$F={bundleType:km.bundleType,version:km.version,rendererPackageName:km.rendererPackageName,rendererConfig:km.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=De(f),f===null?null:f.stateNode},findFiberByHostInstance:km.findFiberByHostInstance||KF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wv.isDisabled&&Wv.supportsFiber)try{En=Wv.inject($F),un=Wv}catch{}}return ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XF,ho.createPortal=function(f,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CS(m))throw Error(t(200));return qF(f,m,null,b)},ho.createRoot=function(f,m){if(!CS(f))throw Error(t(299));var b=!1,B="",H=I2;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(B=m.identifierPrefix),m.onRecoverableError!==void 0&&(H=m.onRecoverableError)),m=AS(f,1,!1,null,null,b,!1,B,H),f[zs]=m.current,fc(f.nodeType===8?f.parentNode:f),new RS(m)},ho.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=De(m),f=f===null?null:f.stateNode,f},ho.flushSync=function(f){return Xf(f)},ho.hydrate=function(f,m,b){if(!Fv(m))throw Error(t(200));return zv(null,f,m,!0,b)},ho.hydrateRoot=function(f,m,b){if(!CS(f))throw Error(t(405));var B=b!=null&&b.hydratedSources||null,H=!1,ne="",ce=I2;if(b!=null&&(b.unstable_strictMode===!0&&(H=!0),b.identifierPrefix!==void 0&&(ne=b.identifierPrefix),b.onRecoverableError!==void 0&&(ce=b.onRecoverableError)),m=R2(m,null,f,1,b??null,H,!1,ne,ce),f[zs]=m.current,fc(f),B)for(f=0;f<B.length;f++)b=B[f],H=b._getVersion,H=H(b._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[b,H]:m.mutableSourceEagerHydrationData.push(b,H);return new Uv(m)},ho.render=function(f,m,b){if(!Fv(m))throw Error(t(200));return zv(null,f,m,!1,b)},ho.unmountComponentAtNode=function(f){if(!Fv(f))throw Error(t(40));return f._reactRootContainer?(Xf(function(){zv(null,null,f,!1,function(){f._reactRootContainer=null,f[zs]=null})}),!0):!1},ho.unstable_batchedUpdates=_S,ho.unstable_renderSubtreeIntoContainer=function(f,m,b,B){if(!Fv(b))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return zv(f,m,b,!1,B)},ho.version="18.3.1-next-f1338f8080-20240426",ho}var F2;function dk(){if(F2)return PS.exports;F2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),PS.exports=sz(),PS.exports}var z2;function oz(){if(z2)return Vv;z2=1;var r=dk();return Vv.createRoot=r.createRoot,Vv.hydrateRoot=r.hydrateRoot,Vv}var az=oz();const lz=Xa(az);var FA={},q1={};q1.byteLength=fz;q1.toByteArray=dz;q1.fromByteArray=gz;var vl=[],oa=[],uz=typeof Uint8Array<"u"?Uint8Array:Array,OS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pp=0,cz=OS.length;pp<cz;++pp)vl[pp]=OS[pp],oa[OS.charCodeAt(pp)]=pp;oa[45]=62;oa[95]=63;function pk(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function fz(r){var e=pk(r),t=e[0],n=e[1];return(t+n)*3/4-n}function hz(r,e,t){return(e+t)*3/4-t}function dz(r){var e,t=pk(r),n=t[0],i=t[1],s=new uz(hz(r,n,i)),o=0,l=i>0?n-4:n,c;for(c=0;c<l;c+=4)e=oa[r.charCodeAt(c)]<<18|oa[r.charCodeAt(c+1)]<<12|oa[r.charCodeAt(c+2)]<<6|oa[r.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=oa[r.charCodeAt(c)]<<2|oa[r.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=oa[r.charCodeAt(c)]<<10|oa[r.charCodeAt(c+1)]<<4|oa[r.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function pz(r){return vl[r>>18&63]+vl[r>>12&63]+vl[r>>6&63]+vl[r&63]}function mz(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(pz(n));return i.join("")}function gz(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,l=t-n;o<l;o+=s)i.push(mz(r,o,o+s>l?l:o+s));return n===1?(e=r[t-1],i.push(vl[e>>2]+vl[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(vl[e>>10]+vl[e>>4&63]+vl[e<<2&63]+"=")),i.join("")}var zA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */zA.read=function(r,e,t,n,i){var s,o,l=i*8-n-1,c=(1<<l)-1,d=c>>1,h=-7,y=t?i-1:0,_=t?-1:1,x=r[e+y];for(y+=_,s=x&(1<<-h)-1,x>>=-h,h+=l;h>0;s=s*256+r[e+y],y+=_,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=n;h>0;o=o*256+r[e+y],y+=_,h-=8);if(s===0)s=1-d;else{if(s===c)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-d}return(x?-1:1)*o*Math.pow(2,s-n)};zA.write=function(r,e,t,n,i,s){var o,l,c,d=s*8-i-1,h=(1<<d)-1,y=h>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:s-1,A=n?1:-1,P=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+y>=1?e+=_/c:e+=_*Math.pow(2,1-y),e*c>=2&&(o++,c/=2),o+y>=h?(l=0,o=h):o+y>=1?(l=(e*c-1)*Math.pow(2,i),o=o+y):(l=e*Math.pow(2,y-1)*Math.pow(2,i),o=0));i>=8;r[t+x]=l&255,x+=A,l/=256,i-=8);for(o=o<<i|l,d+=i;d>0;r[t+x]=o&255,x+=A,o/=256,d-=8);r[t+x-A]|=P*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=q1,t=zA,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=h,r.SlowBuffer=Q,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:l}=globalThis;h.TYPED_ARRAY_SUPPORT=c(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const re=new s(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,s.prototype),Object.setPrototypeOf(re,j),re.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function d(re){if(re>i)throw new RangeError('The value "'+re+'" is invalid for option "size"');const j=new s(re);return Object.setPrototypeOf(j,h.prototype),j}function h(re,j,q){if(typeof re=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(re)}return y(re,j,q)}h.poolSize=8192;function y(re,j,q){if(typeof re=="string")return P(re,j);if(o.isView(re))return C(re);if(re==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re);if(ot(re,o)||re&&ot(re.buffer,o)||typeof l<"u"&&(ot(re,l)||re&&ot(re.buffer,l)))return D(re,j,q);if(typeof re=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=re.valueOf&&re.valueOf();if(ue!=null&&ue!==re)return h.from(ue,j,q);const we=k(re);if(we)return we;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof re[Symbol.toPrimitive]=="function")return h.from(re[Symbol.toPrimitive]("string"),j,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof re)}h.from=function(re,j,q){return y(re,j,q)},Object.setPrototypeOf(h.prototype,s.prototype),Object.setPrototypeOf(h,s);function _(re){if(typeof re!="number")throw new TypeError('"size" argument must be of type number');if(re<0)throw new RangeError('The value "'+re+'" is invalid for option "size"')}function x(re,j,q){return _(re),re<=0?d(re):j!==void 0?typeof q=="string"?d(re).fill(j,q):d(re).fill(j):d(re)}h.alloc=function(re,j,q){return x(re,j,q)};function A(re){return _(re),d(re<0?0:F(re)|0)}h.allocUnsafe=function(re){return A(re)},h.allocUnsafeSlow=function(re){return A(re)};function P(re,j){if((typeof j!="string"||j==="")&&(j="utf8"),!h.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const q=G(re,j)|0;let ue=d(q);const we=ue.write(re,j);return we!==q&&(ue=ue.slice(0,we)),ue}function I(re){const j=re.length<0?0:F(re.length)|0,q=d(j);for(let ue=0;ue<j;ue+=1)q[ue]=re[ue]&255;return q}function C(re){if(ot(re,s)){const j=new s(re);return D(j.buffer,j.byteOffset,j.byteLength)}return I(re)}function D(re,j,q){if(j<0||re.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<j+(q||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return j===void 0&&q===void 0?ue=new s(re):q===void 0?ue=new s(re,j):ue=new s(re,j,q),Object.setPrototypeOf(ue,h.prototype),ue}function k(re){if(h.isBuffer(re)){const j=F(re.length)|0,q=d(j);return q.length===0||re.copy(q,0,0,j),q}if(re.length!==void 0)return typeof re.length!="number"||et(re.length)?d(0):I(re);if(re.type==="Buffer"&&Array.isArray(re.data))return I(re.data)}function F(re){if(re>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return re|0}function Q(re){return+re!=re&&(re=0),h.alloc(+re)}h.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==h.prototype},h.compare=function(j,q){if(ot(j,s)&&(j=h.from(j,j.offset,j.byteLength)),ot(q,s)&&(q=h.from(q,q.offset,q.byteLength)),!h.isBuffer(j)||!h.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===q)return 0;let ue=j.length,we=q.length;for(let ye=0,le=Math.min(ue,we);ye<le;++ye)if(j[ye]!==q[ye]){ue=j[ye],we=q[ye];break}return ue<we?-1:we<ue?1:0},h.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(j,q){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return h.alloc(0);let ue;if(q===void 0)for(q=0,ue=0;ue<j.length;++ue)q+=j[ue].length;const we=h.allocUnsafe(q);let ye=0;for(ue=0;ue<j.length;++ue){let le=j[ue];if(ot(le,s))ye+le.length>we.length?(h.isBuffer(le)||(le=h.from(le)),le.copy(we,ye)):s.prototype.set.call(we,le,ye);else if(h.isBuffer(le))le.copy(we,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=le.length}return we};function G(re,j){if(h.isBuffer(re))return re.length;if(o.isView(re)||ot(re,o))return re.byteLength;if(typeof re!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof re);const q=re.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&q===0)return 0;let we=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return fe(re).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return Re(re).length;default:if(we)return ue?-1:fe(re).length;j=(""+j).toLowerCase(),we=!0}}h.byteLength=G;function Y(re,j,q){let ue=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,j>>>=0,q<=j))return"";for(re||(re="utf8");;)switch(re){case"hex":return u(this,j,q);case"utf8":case"utf-8":return R(this,j,q);case"ascii":return N(this,j,q);case"latin1":case"binary":return v(this,j,q);case"base64":return M(this,j,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,j,q);default:if(ue)throw new TypeError("Unknown encoding: "+re);re=(re+"").toLowerCase(),ue=!0}}h.prototype._isBuffer=!0;function ee(re,j,q){const ue=re[j];re[j]=re[q],re[q]=ue}h.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<j;q+=2)ee(this,q,q+1);return this},h.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<j;q+=4)ee(this,q,q+3),ee(this,q+1,q+2);return this},h.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<j;q+=8)ee(this,q,q+7),ee(this,q+1,q+6),ee(this,q+2,q+5),ee(this,q+3,q+4);return this},h.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?R(this,0,j):Y.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(j){if(!h.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:h.compare(this,j)===0},h.prototype.inspect=function(){let j="";const q=r.INSPECT_MAX_BYTES;return j=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(j+=" ... "),"<Buffer "+j+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(j,q,ue,we,ye){if(ot(j,s)&&(j=h.from(j,j.offset,j.byteLength)),!h.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(q===void 0&&(q=0),ue===void 0&&(ue=j?j.length:0),we===void 0&&(we=0),ye===void 0&&(ye=this.length),q<0||ue>j.length||we<0||ye>this.length)throw new RangeError("out of range index");if(we>=ye&&q>=ue)return 0;if(we>=ye)return-1;if(q>=ue)return 1;if(q>>>=0,ue>>>=0,we>>>=0,ye>>>=0,this===j)return 0;let le=ye-we,Xe=ue-q;const de=Math.min(le,Xe),Ce=this.slice(we,ye),Ue=j.slice(q,ue);for(let Ee=0;Ee<de;++Ee)if(Ce[Ee]!==Ue[Ee]){le=Ce[Ee],Xe=Ue[Ee];break}return le<Xe?-1:Xe<le?1:0};function te(re,j,q,ue,we){if(re.length===0)return-1;if(typeof q=="string"?(ue=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,et(q)&&(q=we?0:re.length-1),q<0&&(q=re.length+q),q>=re.length){if(we)return-1;q=re.length-1}else if(q<0)if(we)q=0;else return-1;if(typeof j=="string"&&(j=h.from(j,ue)),h.isBuffer(j))return j.length===0?-1:U(re,j,q,ue,we);if(typeof j=="number")return j=j&255,typeof s.prototype.indexOf=="function"?we?s.prototype.indexOf.call(re,j,q):s.prototype.lastIndexOf.call(re,j,q):U(re,[j],q,ue,we);throw new TypeError("val must be string, number or Buffer")}function U(re,j,q,ue,we){let ye=1,le=re.length,Xe=j.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(re.length<2||j.length<2)return-1;ye=2,le/=2,Xe/=2,q/=2}function de(Ue,Ee){return ye===1?Ue[Ee]:Ue.readUInt16BE(Ee*ye)}let Ce;if(we){let Ue=-1;for(Ce=q;Ce<le;Ce++)if(de(re,Ce)===de(j,Ue===-1?0:Ce-Ue)){if(Ue===-1&&(Ue=Ce),Ce-Ue+1===Xe)return Ue*ye}else Ue!==-1&&(Ce-=Ce-Ue),Ue=-1}else for(q+Xe>le&&(q=le-Xe),Ce=q;Ce>=0;Ce--){let Ue=!0;for(let Ee=0;Ee<Xe;Ee++)if(de(re,Ce+Ee)!==de(j,Ee)){Ue=!1;break}if(Ue)return Ce}return-1}h.prototype.includes=function(j,q,ue){return this.indexOf(j,q,ue)!==-1},h.prototype.indexOf=function(j,q,ue){return te(this,j,q,ue,!0)},h.prototype.lastIndexOf=function(j,q,ue){return te(this,j,q,ue,!1)};function V(re,j,q,ue){q=Number(q)||0;const we=re.length-q;ue?(ue=Number(ue),ue>we&&(ue=we)):ue=we;const ye=j.length;ue>ye/2&&(ue=ye/2);let le;for(le=0;le<ue;++le){const Xe=parseInt(j.substr(le*2,2),16);if(et(Xe))return le;re[q+le]=Xe}return le}function K(re,j,q,ue){return Le(fe(j,re.length-q),re,q,ue)}function E(re,j,q,ue){return Le(oe(j),re,q,ue)}function a(re,j,q,ue){return Le(Re(j),re,q,ue)}function p(re,j,q,ue){return Le(Oe(j,re.length-q),re,q,ue)}h.prototype.write=function(j,q,ue,we){if(q===void 0)we="utf8",ue=this.length,q=0;else if(ue===void 0&&typeof q=="string")we=q,ue=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(ue)?(ue=ue>>>0,we===void 0&&(we="utf8")):(we=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-q;if((ue===void 0||ue>ye)&&(ue=ye),j.length>0&&(ue<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");we||(we="utf8");let le=!1;for(;;)switch(we){case"hex":return V(this,j,q,ue);case"utf8":case"utf-8":return K(this,j,q,ue);case"ascii":case"latin1":case"binary":return E(this,j,q,ue);case"base64":return a(this,j,q,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,j,q,ue);default:if(le)throw new TypeError("Unknown encoding: "+we);we=(""+we).toLowerCase(),le=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(re,j,q){return j===0&&q===re.length?e.fromByteArray(re):e.fromByteArray(re.slice(j,q))}function R(re,j,q){q=Math.min(re.length,q);const ue=[];let we=j;for(;we<q;){const ye=re[we];let le=null,Xe=ye>239?4:ye>223?3:ye>191?2:1;if(we+Xe<=q){let de,Ce,Ue,Ee;switch(Xe){case 1:ye<128&&(le=ye);break;case 2:de=re[we+1],(de&192)===128&&(Ee=(ye&31)<<6|de&63,Ee>127&&(le=Ee));break;case 3:de=re[we+1],Ce=re[we+2],(de&192)===128&&(Ce&192)===128&&(Ee=(ye&15)<<12|(de&63)<<6|Ce&63,Ee>2047&&(Ee<55296||Ee>57343)&&(le=Ee));break;case 4:de=re[we+1],Ce=re[we+2],Ue=re[we+3],(de&192)===128&&(Ce&192)===128&&(Ue&192)===128&&(Ee=(ye&15)<<18|(de&63)<<12|(Ce&63)<<6|Ue&63,Ee>65535&&Ee<1114112&&(le=Ee))}}le===null?(le=65533,Xe=1):le>65535&&(le-=65536,ue.push(le>>>10&1023|55296),le=56320|le&1023),ue.push(le),we+=Xe}return L(ue)}const T=4096;function L(re){const j=re.length;if(j<=T)return String.fromCharCode.apply(String,re);let q="",ue=0;for(;ue<j;)q+=String.fromCharCode.apply(String,re.slice(ue,ue+=T));return q}function N(re,j,q){let ue="";q=Math.min(re.length,q);for(let we=j;we<q;++we)ue+=String.fromCharCode(re[we]&127);return ue}function v(re,j,q){let ue="";q=Math.min(re.length,q);for(let we=j;we<q;++we)ue+=String.fromCharCode(re[we]);return ue}function u(re,j,q){const ue=re.length;(!j||j<0)&&(j=0),(!q||q<0||q>ue)&&(q=ue);let we="";for(let ye=j;ye<q;++ye)we+=Ye[re[ye]];return we}function S(re,j,q){const ue=re.slice(j,q);let we="";for(let ye=0;ye<ue.length-1;ye+=2)we+=String.fromCharCode(ue[ye]+ue[ye+1]*256);return we}h.prototype.slice=function(j,q){const ue=this.length;j=~~j,q=q===void 0?ue:~~q,j<0?(j+=ue,j<0&&(j=0)):j>ue&&(j=ue),q<0?(q+=ue,q<0&&(q=0)):q>ue&&(q=ue),q<j&&(q=j);const we=this.subarray(j,q);return Object.setPrototypeOf(we,h.prototype),we};function W(re,j,q){if(re%1!==0||re<0)throw new RangeError("offset is not uint");if(re+j>q)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let we=this[j],ye=1,le=0;for(;++le<q&&(ye*=256);)we+=this[j+le]*ye;return we},h.prototype.readUintBE=h.prototype.readUIntBE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let we=this[j+--q],ye=1;for(;q>0&&(ye*=256);)we+=this[j+--q]*ye;return we},h.prototype.readUint8=h.prototype.readUInt8=function(j,q){return j=j>>>0,q||W(j,1,this.length),this[j]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(j,q){return j=j>>>0,q||W(j,2,this.length),this[j]|this[j+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(j,q){return j=j>>>0,q||W(j,2,this.length),this[j]<<8|this[j+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(j,q){return j=j>>>0,q||W(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(j,q){return j=j>>>0,q||W(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},h.prototype.readBigUInt64LE=bt(function(j){j=j>>>0,vt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const we=q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,ye=this[++j]+this[++j]*2**8+this[++j]*2**16+ue*2**24;return BigInt(we)+(BigInt(ye)<<BigInt(32))}),h.prototype.readBigUInt64BE=bt(function(j){j=j>>>0,vt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const we=q*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],ye=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+ue;return(BigInt(we)<<BigInt(32))+BigInt(ye)}),h.prototype.readIntLE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let we=this[j],ye=1,le=0;for(;++le<q&&(ye*=256);)we+=this[j+le]*ye;return ye*=128,we>=ye&&(we-=Math.pow(2,8*q)),we},h.prototype.readIntBE=function(j,q,ue){j=j>>>0,q=q>>>0,ue||W(j,q,this.length);let we=q,ye=1,le=this[j+--we];for(;we>0&&(ye*=256);)le+=this[j+--we]*ye;return ye*=128,le>=ye&&(le-=Math.pow(2,8*q)),le},h.prototype.readInt8=function(j,q){return j=j>>>0,q||W(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},h.prototype.readInt16LE=function(j,q){j=j>>>0,q||W(j,2,this.length);const ue=this[j]|this[j+1]<<8;return ue&32768?ue|4294901760:ue},h.prototype.readInt16BE=function(j,q){j=j>>>0,q||W(j,2,this.length);const ue=this[j+1]|this[j]<<8;return ue&32768?ue|4294901760:ue},h.prototype.readInt32LE=function(j,q){return j=j>>>0,q||W(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},h.prototype.readInt32BE=function(j,q){return j=j>>>0,q||W(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},h.prototype.readBigInt64LE=bt(function(j){j=j>>>0,vt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const we=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(ue<<24);return(BigInt(we)<<BigInt(32))+BigInt(q+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),h.prototype.readBigInt64BE=bt(function(j){j=j>>>0,vt(j,"offset");const q=this[j],ue=this[j+7];(q===void 0||ue===void 0)&&He(j,this.length-8);const we=(q<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(we)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+ue)}),h.prototype.readFloatLE=function(j,q){return j=j>>>0,q||W(j,4,this.length),t.read(this,j,!0,23,4)},h.prototype.readFloatBE=function(j,q){return j=j>>>0,q||W(j,4,this.length),t.read(this,j,!1,23,4)},h.prototype.readDoubleLE=function(j,q){return j=j>>>0,q||W(j,8,this.length),t.read(this,j,!0,52,8)},h.prototype.readDoubleBE=function(j,q){return j=j>>>0,q||W(j,8,this.length),t.read(this,j,!1,52,8)};function $(re,j,q,ue,we,ye){if(!h.isBuffer(re))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>we||j<ye)throw new RangeError('"value" argument is out of bounds');if(q+ue>re.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(j,q,ue,we){if(j=+j,q=q>>>0,ue=ue>>>0,!we){const Xe=Math.pow(2,8*ue)-1;$(this,j,q,ue,Xe,0)}let ye=1,le=0;for(this[q]=j&255;++le<ue&&(ye*=256);)this[q+le]=j/ye&255;return q+ue},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(j,q,ue,we){if(j=+j,q=q>>>0,ue=ue>>>0,!we){const Xe=Math.pow(2,8*ue)-1;$(this,j,q,ue,Xe,0)}let ye=ue-1,le=1;for(this[q+ye]=j&255;--ye>=0&&(le*=256);)this[q+ye]=j/le&255;return q+ue},h.prototype.writeUint8=h.prototype.writeUInt8=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,1,255,0),this[q]=j&255,q+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,65535,0),this[q]=j&255,this[q+1]=j>>>8,q+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,65535,0),this[q]=j>>>8,this[q+1]=j&255,q+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,4294967295,0),this[q+3]=j>>>24,this[q+2]=j>>>16,this[q+1]=j>>>8,this[q]=j&255,q+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,4294967295,0),this[q]=j>>>24,this[q+1]=j>>>16,this[q+2]=j>>>8,this[q+3]=j&255,q+4};function se(re,j,q,ue,we){je(j,ue,we,re,q,7);let ye=Number(j&BigInt(4294967295));re[q++]=ye,ye=ye>>8,re[q++]=ye,ye=ye>>8,re[q++]=ye,ye=ye>>8,re[q++]=ye;let le=Number(j>>BigInt(32)&BigInt(4294967295));return re[q++]=le,le=le>>8,re[q++]=le,le=le>>8,re[q++]=le,le=le>>8,re[q++]=le,q}function me(re,j,q,ue,we){je(j,ue,we,re,q,7);let ye=Number(j&BigInt(4294967295));re[q+7]=ye,ye=ye>>8,re[q+6]=ye,ye=ye>>8,re[q+5]=ye,ye=ye>>8,re[q+4]=ye;let le=Number(j>>BigInt(32)&BigInt(4294967295));return re[q+3]=le,le=le>>8,re[q+2]=le,le=le>>8,re[q+1]=le,le=le>>8,re[q]=le,q+8}h.prototype.writeBigUInt64LE=bt(function(j,q=0){return se(this,j,q,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=bt(function(j,q=0){return me(this,j,q,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(j,q,ue,we){if(j=+j,q=q>>>0,!we){const de=Math.pow(2,8*ue-1);$(this,j,q,ue,de-1,-de)}let ye=0,le=1,Xe=0;for(this[q]=j&255;++ye<ue&&(le*=256);)j<0&&Xe===0&&this[q+ye-1]!==0&&(Xe=1),this[q+ye]=(j/le>>0)-Xe&255;return q+ue},h.prototype.writeIntBE=function(j,q,ue,we){if(j=+j,q=q>>>0,!we){const de=Math.pow(2,8*ue-1);$(this,j,q,ue,de-1,-de)}let ye=ue-1,le=1,Xe=0;for(this[q+ye]=j&255;--ye>=0&&(le*=256);)j<0&&Xe===0&&this[q+ye+1]!==0&&(Xe=1),this[q+ye]=(j/le>>0)-Xe&255;return q+ue},h.prototype.writeInt8=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,1,127,-128),j<0&&(j=255+j+1),this[q]=j&255,q+1},h.prototype.writeInt16LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,32767,-32768),this[q]=j&255,this[q+1]=j>>>8,q+2},h.prototype.writeInt16BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,2,32767,-32768),this[q]=j>>>8,this[q+1]=j&255,q+2},h.prototype.writeInt32LE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,2147483647,-2147483648),this[q]=j&255,this[q+1]=j>>>8,this[q+2]=j>>>16,this[q+3]=j>>>24,q+4},h.prototype.writeInt32BE=function(j,q,ue){return j=+j,q=q>>>0,ue||$(this,j,q,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[q]=j>>>24,this[q+1]=j>>>16,this[q+2]=j>>>8,this[q+3]=j&255,q+4},h.prototype.writeBigInt64LE=bt(function(j,q=0){return se(this,j,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=bt(function(j,q=0){return me(this,j,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _e(re,j,q,ue,we,ye){if(q+ue>re.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function Ae(re,j,q,ue,we){return j=+j,q=q>>>0,we||_e(re,j,q,4),t.write(re,j,q,ue,23,4),q+4}h.prototype.writeFloatLE=function(j,q,ue){return Ae(this,j,q,!0,ue)},h.prototype.writeFloatBE=function(j,q,ue){return Ae(this,j,q,!1,ue)};function _t(re,j,q,ue,we){return j=+j,q=q>>>0,we||_e(re,j,q,8),t.write(re,j,q,ue,52,8),q+8}h.prototype.writeDoubleLE=function(j,q,ue){return _t(this,j,q,!0,ue)},h.prototype.writeDoubleBE=function(j,q,ue){return _t(this,j,q,!1,ue)},h.prototype.copy=function(j,q,ue,we){if(!h.isBuffer(j))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!we&&we!==0&&(we=this.length),q>=j.length&&(q=j.length),q||(q=0),we>0&&we<ue&&(we=ue),we===ue||j.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("sourceEnd out of bounds");we>this.length&&(we=this.length),j.length-q<we-ue&&(we=j.length-q+ue);const ye=we-ue;return this===j&&typeof s.prototype.copyWithin=="function"?this.copyWithin(q,ue,we):s.prototype.set.call(j,this.subarray(ue,we),q),ye},h.prototype.fill=function(j,q,ue,we){if(typeof j=="string"){if(typeof q=="string"?(we=q,q=0,ue=this.length):typeof ue=="string"&&(we=ue,ue=this.length),we!==void 0&&typeof we!="string")throw new TypeError("encoding must be a string");if(typeof we=="string"&&!h.isEncoding(we))throw new TypeError("Unknown encoding: "+we);if(j.length===1){const le=j.charCodeAt(0);(we==="utf8"&&le<128||we==="latin1")&&(j=le)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(q<0||this.length<q||this.length<ue)throw new RangeError("Out of range index");if(ue<=q)return this;q=q>>>0,ue=ue===void 0?this.length:ue>>>0,j||(j=0);let ye;if(typeof j=="number")for(ye=q;ye<ue;++ye)this[ye]=j;else{const le=h.isBuffer(j)?j:h.from(j,we),Xe=le.length;if(Xe===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(ye=0;ye<ue-q;++ye)this[ye+q]=le[ye%Xe]}return this};const Ze={};function Pe(re,j,q){Ze[re]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${re}]`,this.stack,delete this.name}get code(){return re}set code(we){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:we,writable:!0})}toString(){return`${this.name} [${re}]: ${this.message}`}}}Pe("ERR_BUFFER_OUT_OF_BOUNDS",function(re){return re?`${re} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pe("ERR_INVALID_ARG_TYPE",function(re,j){return`The "${re}" argument must be of type number. Received type ${typeof j}`},TypeError),Pe("ERR_OUT_OF_RANGE",function(re,j,q){let ue=`The value of "${re}" is out of range.`,we=q;return Number.isInteger(q)&&Math.abs(q)>2**32?we=ge(String(q)):typeof q=="bigint"&&(we=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(we=ge(we)),we+="n"),ue+=` It must be ${j}. Received ${we}`,ue},RangeError);function ge(re){let j="",q=re.length;const ue=re[0]==="-"?1:0;for(;q>=ue+4;q-=3)j=`_${re.slice(q-3,q)}${j}`;return`${re.slice(0,q)}${j}`}function Ge(re,j,q){vt(j,"offset"),(re[j]===void 0||re[j+q]===void 0)&&He(j,re.length-(q+1))}function je(re,j,q,ue,we,ye){if(re>q||re<j){const le=typeof j=="bigint"?"n":"";let Xe;throw j===0||j===BigInt(0)?Xe=`>= 0${le} and < 2${le} ** ${(ye+1)*8}${le}`:Xe=`>= -(2${le} ** ${(ye+1)*8-1}${le}) and < 2 ** ${(ye+1)*8-1}${le}`,new Ze.ERR_OUT_OF_RANGE("value",Xe,re)}Ge(ue,we,ye)}function vt(re,j){if(typeof re!="number")throw new Ze.ERR_INVALID_ARG_TYPE(j,"number",re)}function He(re,j,q){throw Math.floor(re)!==re?(vt(re,q),new Ze.ERR_OUT_OF_RANGE("offset","an integer",re)):j<0?new Ze.ERR_BUFFER_OUT_OF_BOUNDS:new Ze.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,re)}const nt=/[^+/0-9A-Za-z-_]/g;function Pt(re){if(re=re.split("=")[0],re=re.trim().replace(nt,""),re.length<2)return"";for(;re.length%4!==0;)re=re+"=";return re}function fe(re,j){j=j||1/0;let q;const ue=re.length;let we=null;const ye=[];for(let le=0;le<ue;++le){if(q=re.charCodeAt(le),q>55295&&q<57344){if(!we){if(q>56319){(j-=3)>-1&&ye.push(239,191,189);continue}else if(le+1===ue){(j-=3)>-1&&ye.push(239,191,189);continue}we=q;continue}if(q<56320){(j-=3)>-1&&ye.push(239,191,189),we=q;continue}q=(we-55296<<10|q-56320)+65536}else we&&(j-=3)>-1&&ye.push(239,191,189);if(we=null,q<128){if((j-=1)<0)break;ye.push(q)}else if(q<2048){if((j-=2)<0)break;ye.push(q>>6|192,q&63|128)}else if(q<65536){if((j-=3)<0)break;ye.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((j-=4)<0)break;ye.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return ye}function oe(re){const j=[];for(let q=0;q<re.length;++q)j.push(re.charCodeAt(q)&255);return j}function Oe(re,j){let q,ue,we;const ye=[];for(let le=0;le<re.length&&!((j-=2)<0);++le)q=re.charCodeAt(le),ue=q>>8,we=q%256,ye.push(we),ye.push(ue);return ye}function Re(re){return e.toByteArray(Pt(re))}function Le(re,j,q,ue){let we;for(we=0;we<ue&&!(we+q>=j.length||we>=re.length);++we)j[we+q]=re[we];return we}function ot(re,j){return re instanceof j||re!=null&&re.constructor!=null&&re.constructor.name!=null&&re.constructor.name===j.name}function et(re){return re!==re}const Ye=(function(){const re="0123456789abcdef",j=new Array(256);for(let q=0;q<16;++q){const ue=q*16;for(let we=0;we<16;++we)j[ue+we]=re[q]+re[we]}return j})();function bt(re){return typeof BigInt>"u"?ct:re}function ct(){throw new Error("BigInt not supported")}})(FA);const qn=FA.Buffer,mn=FA.Buffer,mp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _y(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ug(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Hu(r,...e){if(!_y(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function mk(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ug(r.outputLen),Ug(r.blockLen)}function d0(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function gk(r,e){Hu(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function yz(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function ef(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function DS(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function fl(r,e){return r<<32-e|r>>>e}const vz=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function wz(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function _z(r){for(let e=0;e<r.length;e++)r[e]=wz(r[e]);return r}const W2=vz?r=>r:_z,yk=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xz=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Vh(r){if(Hu(r),yk)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=xz[r[t]];return e}const mu={_0:48,_9:57,A:65,F:70,a:97,f:102};function V2(r){if(r>=mu._0&&r<=mu._9)return r-mu._0;if(r>=mu.A&&r<=mu.F)return r-(mu.A-10);if(r>=mu.a&&r<=mu.f)return r-(mu.a-10)}function R_(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(yk)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=V2(r.charCodeAt(s)),l=V2(r.charCodeAt(s+1));if(o===void 0||l===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+l}return n}function Sz(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function K1(r){return typeof r=="string"&&(r=Sz(r)),Hu(r),r}function wl(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Hu(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}class WA{}function VA(r){const e=n=>r().update(K1(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function HA(r=32){if(mp&&typeof mp.getRandomValues=="function")return mp.getRandomValues(new Uint8Array(r));if(mp&&typeof mp.randomBytes=="function")return Uint8Array.from(mp.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Mz(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),l=Number(t&s),c=n?4:0,d=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+d,l,n)}function Ez(r,e,t){return r&e^~r&t}function bz(r,e,t){return r&e^r&t^e&t}class vk extends WA{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=DS(this.buffer)}update(e){d0(this),e=K1(e),Hu(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const c=DS(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){d0(this),gk(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,ef(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let y=o;y<i;y++)t[y]=0;Mz(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=DS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)l.setUint32(4*y,h[y],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:l}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=l,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Cc=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ss=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Hv=BigInt(2**32-1),H2=BigInt(32);function Az(r,e=!1){return e?{h:Number(r&Hv),l:Number(r>>H2&Hv)}:{h:Number(r>>H2&Hv)|0,l:Number(r&Hv)|0}}function wk(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:o,l}=Az(r[s],e);[n[s],i[s]]=[o,l]}return[n,i]}const G2=(r,e,t)=>r>>>t,j2=(r,e,t)=>r<<32-t|e>>>t,gp=(r,e,t)=>r>>>t|e<<32-t,yp=(r,e,t)=>r<<32-t|e>>>t,Gv=(r,e,t)=>r<<64-t|e>>>t-32,jv=(r,e,t)=>r>>>t-32|e<<64-t,Tz=(r,e,t)=>r<<t|e>>>32-t,Rz=(r,e,t)=>e<<t|r>>>32-t,Cz=(r,e,t)=>e<<t-32|r>>>64-t,Iz=(r,e,t)=>r<<t-32|e>>>64-t;function gu(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const Nz=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Pz=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,Lz=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),kz=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,Oz=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Dz=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,Bz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ic=new Uint32Array(64);class Uz extends vk{constructor(e=32){super(64,e,8,!1),this.A=Cc[0]|0,this.B=Cc[1]|0,this.C=Cc[2]|0,this.D=Cc[3]|0,this.E=Cc[4]|0,this.F=Cc[5]|0,this.G=Cc[6]|0,this.H=Cc[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:l,H:c}=this;return[e,t,n,i,s,o,l,c]}set(e,t,n,i,s,o,l,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,t){for(let y=0;y<16;y++,t+=4)Ic[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){const _=Ic[y-15],x=Ic[y-2],A=fl(_,7)^fl(_,18)^_>>>3,P=fl(x,17)^fl(x,19)^x>>>10;Ic[y]=P+Ic[y-7]+A+Ic[y-16]|0}let{A:n,B:i,C:s,D:o,E:l,F:c,G:d,H:h}=this;for(let y=0;y<64;y++){const _=fl(l,6)^fl(l,11)^fl(l,25),x=h+_+Ez(l,c,d)+Bz[y]+Ic[y]|0,P=(fl(n,2)^fl(n,13)^fl(n,22))+bz(n,i,s)|0;h=d,d=c,c=l,l=o+x|0,o=s,s=i,i=n,n=x+P|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,d=d+this.G|0,h=h+this.H|0,this.set(n,i,s,o,l,c,d,h)}roundClean(){ef(Ic)}destroy(){this.set(0,0,0,0,0,0,0,0),ef(this.buffer)}}const _k=wk(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Fz=_k[0],zz=_k[1],Nc=new Uint32Array(80),Pc=new Uint32Array(80);class Wz extends vk{constructor(e=64){super(128,e,16,!1),this.Ah=Ss[0]|0,this.Al=Ss[1]|0,this.Bh=Ss[2]|0,this.Bl=Ss[3]|0,this.Ch=Ss[4]|0,this.Cl=Ss[5]|0,this.Dh=Ss[6]|0,this.Dl=Ss[7]|0,this.Eh=Ss[8]|0,this.El=Ss[9]|0,this.Fh=Ss[10]|0,this.Fl=Ss[11]|0,this.Gh=Ss[12]|0,this.Gl=Ss[13]|0,this.Hh=Ss[14]|0,this.Hl=Ss[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:l,Dl:c,Eh:d,El:h,Fh:y,Fl:_,Gh:x,Gl:A,Hh:P,Hl:I}=this;return[e,t,n,i,s,o,l,c,d,h,y,_,x,A,P,I]}set(e,t,n,i,s,o,l,c,d,h,y,_,x,A,P,I){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=d|0,this.El=h|0,this.Fh=y|0,this.Fl=_|0,this.Gh=x|0,this.Gl=A|0,this.Hh=P|0,this.Hl=I|0}process(e,t){for(let k=0;k<16;k++,t+=4)Nc[k]=e.getUint32(t),Pc[k]=e.getUint32(t+=4);for(let k=16;k<80;k++){const F=Nc[k-15]|0,Q=Pc[k-15]|0,G=gp(F,Q,1)^gp(F,Q,8)^G2(F,Q,7),Y=yp(F,Q,1)^yp(F,Q,8)^j2(F,Q,7),ee=Nc[k-2]|0,te=Pc[k-2]|0,U=gp(ee,te,19)^Gv(ee,te,61)^G2(ee,te,6),V=yp(ee,te,19)^jv(ee,te,61)^j2(ee,te,6),K=Lz(Y,V,Pc[k-7],Pc[k-16]),E=kz(K,G,U,Nc[k-7],Nc[k-16]);Nc[k]=E|0,Pc[k]=K|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:l,Cl:c,Dh:d,Dl:h,Eh:y,El:_,Fh:x,Fl:A,Gh:P,Gl:I,Hh:C,Hl:D}=this;for(let k=0;k<80;k++){const F=gp(y,_,14)^gp(y,_,18)^Gv(y,_,41),Q=yp(y,_,14)^yp(y,_,18)^jv(y,_,41),G=y&x^~y&P,Y=_&A^~_&I,ee=Oz(D,Q,Y,zz[k],Pc[k]),te=Dz(ee,C,F,G,Fz[k],Nc[k]),U=ee|0,V=gp(n,i,28)^Gv(n,i,34)^Gv(n,i,39),K=yp(n,i,28)^jv(n,i,34)^jv(n,i,39),E=n&s^n&l^s&l,a=i&o^i&c^o&c;C=P|0,D=I|0,P=x|0,I=A|0,x=y|0,A=_|0,{h:y,l:_}=gu(d|0,h|0,te|0,U|0),d=l|0,h=c|0,l=s|0,c=o|0,s=n|0,o=i|0;const p=Nz(U,K,a);n=Pz(p,te,V,E),i=p|0}({h:n,l:i}=gu(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=gu(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:c}=gu(this.Ch|0,this.Cl|0,l|0,c|0),{h:d,l:h}=gu(this.Dh|0,this.Dl|0,d|0,h|0),{h:y,l:_}=gu(this.Eh|0,this.El|0,y|0,_|0),{h:x,l:A}=gu(this.Fh|0,this.Fl|0,x|0,A|0),{h:P,l:I}=gu(this.Gh|0,this.Gl|0,P|0,I|0),{h:C,l:D}=gu(this.Hh|0,this.Hl|0,C|0,D|0),this.set(n,i,s,o,l,c,d,h,y,_,x,A,P,I,C,D)}roundClean(){ef(Nc,Pc)}destroy(){ef(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xk=VA(()=>new Uz),Vz=VA(()=>new Wz);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const GA=BigInt(0),wb=BigInt(1);function $h(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function Ha(r,e,t=""){const n=_y(r),i=r==null?void 0:r.length,s=e!==void 0;if(!n||s&&i!==e){const o=t&&`"${t}" `,l=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+l+", got "+c)}return r}function qv(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Sk(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?GA:BigInt("0x"+r)}function Y1(r){return Sk(Vh(r))}function Fg(r){return Hu(r),Sk(Vh(Uint8Array.from(r).reverse()))}function jA(r,e){return R_(r.toString(16).padStart(e*2,"0"))}function Mk(r,e){return jA(r,e).reverse()}function oi(r,e,t){let n;if(typeof e=="string")try{n=R_(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(_y(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function q2(r){return Uint8Array.from(r)}const BS=r=>typeof r=="bigint"&&GA<=r;function Hz(r,e,t){return BS(r)&&BS(e)&&BS(t)&&e<=r&&r<t}function _b(r,e,t,n){if(!Hz(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Ek(r){let e;for(e=0;r>GA;r>>=wb,e+=1);return e}const xy=r=>(wb<<BigInt(r))-wb;function Gz(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=x=>new Uint8Array(x),i=x=>Uint8Array.of(x);let s=n(r),o=n(r),l=0;const c=()=>{s.fill(1),o.fill(0),l=0},d=(...x)=>t(o,s,...x),h=(x=n(0))=>{o=d(i(0),x),s=d(),x.length!==0&&(o=d(i(1),x),s=d())},y=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let x=0;const A=[];for(;x<e;){s=d();const P=s.slice();A.push(P),x+=s.length}return wl(...A)};return(x,A)=>{c(),h(x);let P;for(;!(P=A(y()));)h();return c(),P}}function Sy(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,o){const l=r[i];if(o&&l===void 0)return;const c=typeof l;if(c!==s||l===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(t).forEach(([i,s])=>n(i,s,!0))}function C_(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wo=BigInt(0),ps=BigInt(1),Ah=BigInt(2),bk=BigInt(3),Ak=BigInt(4),Tk=BigInt(5),jz=BigInt(7),Rk=BigInt(8),qz=BigInt(9),Ck=BigInt(16);function Ri(r,e){const t=r%e;return t>=wo?t:e+t}function si(r,e,t){let n=r;for(;e-- >wo;)n*=n,n%=t;return n}function K2(r,e){if(r===wo)throw new Error("invert: expected non-zero number");if(e<=wo)throw new Error("invert: expected positive modulus, got "+e);let t=Ri(r,e),n=e,i=wo,s=ps;for(;t!==wo;){const l=n/t,c=n%t,d=i-s*l;n=t,t=c,i=s,s=d}if(n!==ps)throw new Error("invert: does not exist");return Ri(i,e)}function qA(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function Ik(r,e){const t=(r.ORDER+ps)/Ak,n=r.pow(e,t);return qA(r,n,e),n}function Kz(r,e){const t=(r.ORDER-Tk)/Rk,n=r.mul(e,Ah),i=r.pow(n,t),s=r.mul(e,i),o=r.mul(r.mul(s,Ah),i),l=r.mul(s,r.sub(o,r.ONE));return qA(r,l,e),l}function Yz(r){const e=sd(r),t=Nk(r),n=t(e,e.neg(e.ONE)),i=t(e,n),s=t(e,e.neg(n)),o=(r+jz)/Ck;return(l,c)=>{let d=l.pow(c,o),h=l.mul(d,n);const y=l.mul(d,i),_=l.mul(d,s),x=l.eql(l.sqr(h),c),A=l.eql(l.sqr(y),c);d=l.cmov(d,h,x),h=l.cmov(_,y,A);const P=l.eql(l.sqr(h),c),I=l.cmov(d,h,P);return qA(l,I,c),I}}function Nk(r){if(r<bk)throw new Error("sqrt is not defined for small field");let e=r-ps,t=0;for(;e%Ah===wo;)e/=Ah,t++;let n=Ah;const i=sd(r);for(;Y2(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Ik;let s=i.pow(n,e);const o=(e+ps)/Ah;return function(c,d){if(c.is0(d))return d;if(Y2(c,d)!==1)throw new Error("Cannot find square root");let h=t,y=c.mul(c.ONE,s),_=c.pow(d,e),x=c.pow(d,o);for(;!c.eql(_,c.ONE);){if(c.is0(_))return c.ZERO;let A=1,P=c.sqr(_);for(;!c.eql(P,c.ONE);)if(A++,P=c.sqr(P),A===h)throw new Error("Cannot find square root");const I=ps<<BigInt(h-A-1),C=c.pow(y,I);h=A,y=c.sqr(C),_=c.mul(_,y),x=c.mul(x,C)}return x}}function Xz(r){return r%Ak===bk?Ik:r%Rk===Tk?Kz:r%Ck===qz?Yz(r):Nk(r)}const $z=(r,e)=>(Ri(r,e)&ps)===ps,Zz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qz(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Zz.reduce((n,i)=>(n[i]="function",n),e);return Sy(r,t),r}function Jz(r,e,t){if(t<wo)throw new Error("invalid exponent, negatives unsupported");if(t===wo)return r.ONE;if(t===ps)return e;let n=r.ONE,i=e;for(;t>wo;)t&ps&&(n=r.mul(n,i)),i=r.sqr(i),t>>=ps;return n}function Pk(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,l,c)=>r.is0(l)?o:(n[c]=o,r.mul(o,l)),r.ONE),s=r.inv(i);return e.reduceRight((o,l,c)=>r.is0(l)?o:(n[c]=r.mul(o,n[c]),r.mul(o,l)),s),n}function Y2(r,e){const t=(r.ORDER-ps)/Ah,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Lk(r,e){e!==void 0&&Ug(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function sd(r,e,t=!1,n={}){if(r<=wo)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s,o=!1,l;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const _=e;_.BITS&&(i=_.BITS),_.sqrt&&(s=_.sqrt),typeof _.isLE=="boolean"&&(t=_.isLE),typeof _.modFromBytes=="boolean"&&(o=_.modFromBytes),l=_.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:d}=Lk(r,i);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const y=Object.freeze({ORDER:r,isLE:t,BITS:c,BYTES:d,MASK:xy(c),ZERO:wo,ONE:ps,allowedLengths:l,create:_=>Ri(_,r),isValid:_=>{if(typeof _!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof _);return wo<=_&&_<r},is0:_=>_===wo,isValidNot0:_=>!y.is0(_)&&y.isValid(_),isOdd:_=>(_&ps)===ps,neg:_=>Ri(-_,r),eql:(_,x)=>_===x,sqr:_=>Ri(_*_,r),add:(_,x)=>Ri(_+x,r),sub:(_,x)=>Ri(_-x,r),mul:(_,x)=>Ri(_*x,r),pow:(_,x)=>Jz(y,_,x),div:(_,x)=>Ri(_*K2(x,r),r),sqrN:_=>_*_,addN:(_,x)=>_+x,subN:(_,x)=>_-x,mulN:(_,x)=>_*x,inv:_=>K2(_,r),sqrt:s||(_=>(h||(h=Xz(r)),h(y,_))),toBytes:_=>t?Mk(_,d):jA(_,d),fromBytes:(_,x=!0)=>{if(l){if(!l.includes(_.length)||_.length>d)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+_.length);const P=new Uint8Array(d);P.set(_,t?0:P.length-_.length),_=P}if(_.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+_.length);let A=t?Fg(_):Y1(_);if(o&&(A=Ri(A,r)),!x&&!y.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:_=>Pk(y,_),cmov:(_,x,A)=>A?x:_});return Object.freeze(y)}function kk(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function Ok(r){const e=kk(r);return e+Math.ceil(e/2)}function e8(r,e,t=!1){const n=r.length,i=kk(e),s=Ok(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=t?Fg(r):Y1(r),l=Ri(o,e-ps)+ps;return t?Mk(l,i):jA(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const p0=BigInt(0),Th=BigInt(1);function I_(r,e){const t=e.negate();return r?t:e}function Rh(r,e){const t=Pk(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function Dk(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function US(r,e){Dk(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=xy(r),o=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function X2(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=t;let l=Number(r&i),c=r>>o;l>n&&(l-=s,c+=Th);const d=e*n,h=d+Math.abs(l)-1,y=l===0,_=l<0,x=e%2!==0;return{nextN:c,offset:h,isZero:y,isNeg:_,isNegF:x,offsetF:d}}function t8(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function n8(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const FS=new WeakMap,Bk=new WeakMap;function zS(r){return Bk.get(r)||1}function $2(r){if(r!==p0)throw new Error("invalid wNAF")}class Uk{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>p0;)t&Th&&(n=n.add(i)),i=i.double(),t>>=Th;return n}precomputeWindow(e,t){const{windows:n,windowSize:i}=US(t,this.bits),s=[];let o=e,l=o;for(let c=0;c<n;c++){l=o,s.push(l);for(let d=1;d<i;d++)l=l.add(o),s.push(l);o=l.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=US(e,this.bits);for(let l=0;l<o.windows;l++){const{nextN:c,offset:d,isZero:h,isNeg:y,isNegF:_,offsetF:x}=X2(n,l,o);n=c,h?s=s.add(I_(_,t[x])):i=i.add(I_(y,t[d]))}return $2(n),{p:i,f:s}}wNAFUnsafe(e,t,n,i=this.ZERO){const s=US(e,this.bits);for(let o=0;o<s.windows&&n!==p0;o++){const{nextN:l,offset:c,isZero:d,isNeg:h}=X2(n,o,s);if(n=l,!d){const y=t[c];i=i.add(h?y.negate():y)}}return $2(n),i}getPrecomputes(e,t,n){let i=FS.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),FS.set(t,i))),i}cached(e,t,n){const i=zS(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){const s=zS(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,i)}createCache(e,t){Dk(t,this.bits),Bk.set(e,t),FS.delete(e)}hasCache(e){return zS(e)!==1}}function r8(r,e,t,n){let i=e,s=r.ZERO,o=r.ZERO;for(;t>p0||n>p0;)t&Th&&(s=s.add(i)),n&Th&&(o=o.add(i)),i=i.double(),t>>=Th,n>>=Th;return{p1:s,p2:o}}function Fk(r,e,t,n){t8(t,r),n8(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,l=Ek(BigInt(i));let c=1;l>12?c=l-3:l>4?c=l-2:l>0&&(c=2);const d=xy(c),h=new Array(Number(d)+1).fill(o),y=Math.floor((e.BITS-1)/c)*c;let _=o;for(let x=y;x>=0;x-=c){h.fill(o);for(let P=0;P<s;P++){const I=n[P],C=Number(I>>BigInt(x)&d);h[C]=h[C].add(t[P])}let A=o;for(let P=h.length-1,I=o;P>0;P--)I=I.add(h[P]),A=A.add(I);if(_=_.add(A),x!==0)for(let P=0;P<c;P++)_=_.double()}return _}function Z2(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Qz(e),e}else return sd(r,{isLE:t})}function zk(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const d=e[c];if(!(typeof d=="bigint"&&d>p0))throw new Error(`CURVE.${c} must be positive bigint`)}const i=Z2(e.p,t.Fp,n),s=Z2(e.n,t.Fn,n),l=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const c of l)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lc=BigInt(0),Xi=BigInt(1),WS=BigInt(2),i8=BigInt(8);function s8(r,e,t,n){const i=r.sqr(t),s=r.sqr(n),o=r.add(r.mul(e.a,i),s),l=r.add(r.ONE,r.mul(e.d,r.mul(i,s)));return r.eql(o,l)}function o8(r,e={}){const t=zk("edwards",r,e,e.FpFnLE),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:o}=s;Sy(e,{},{uvRatio:"function"});const l=WS<<BigInt(i.BYTES*8)-Xi,c=I=>n.create(I),d=e.uvRatio||((I,C)=>{try{return{isValid:!0,value:n.sqrt(n.div(I,C))}}catch{return{isValid:!1,value:Lc}}});if(!s8(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function h(I,C,D=!1){const k=D?Xi:Lc;return _b("coordinate "+I,C,k,l),C}function y(I){if(!(I instanceof A))throw new Error("ExtendedPoint expected")}const _=C_((I,C)=>{const{X:D,Y:k,Z:F}=I,Q=I.is0();C==null&&(C=Q?i8:n.inv(F));const G=c(D*C),Y=c(k*C),ee=n.mul(F,C);if(Q)return{x:Lc,y:Xi};if(ee!==Xi)throw new Error("invZ was invalid");return{x:G,y:Y}}),x=C_(I=>{const{a:C,d:D}=s;if(I.is0())throw new Error("bad point: ZERO");const{X:k,Y:F,Z:Q,T:G}=I,Y=c(k*k),ee=c(F*F),te=c(Q*Q),U=c(te*te),V=c(Y*C),K=c(te*c(V+ee)),E=c(U+c(D*c(Y*ee)));if(K!==E)throw new Error("bad point: equation left != right (1)");const a=c(k*F),p=c(Q*G);if(a!==p)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(C,D,k,F){this.X=h("x",C),this.Y=h("y",D),this.Z=h("z",k,!0),this.T=h("t",F),Object.freeze(this)}static CURVE(){return s}static fromAffine(C){if(C instanceof A)throw new Error("extended point not allowed");const{x:D,y:k}=C||{};return h("x",D),h("y",k),new A(D,k,Xi,c(D*k))}static fromBytes(C,D=!1){const k=n.BYTES,{a:F,d:Q}=s;C=q2(Ha(C,k,"point")),$h(D,"zip215");const G=q2(C),Y=C[k-1];G[k-1]=Y&-129;const ee=Fg(G),te=D?l:n.ORDER;_b("point.y",ee,Lc,te);const U=c(ee*ee),V=c(U-Xi),K=c(Q*U-F);let{isValid:E,value:a}=d(V,K);if(!E)throw new Error("bad point: invalid y coordinate");const p=(a&Xi)===Xi,M=(Y&128)!==0;if(!D&&a===Lc&&M)throw new Error("bad point: x=0 and x_0=1");return M!==p&&(a=c(-a)),A.fromAffine({x:a,y:ee})}static fromHex(C,D=!1){return A.fromBytes(oi("point",C),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,D=!0){return P.createCache(this,C),D||this.multiply(WS),this}assertValidity(){x(this)}equals(C){y(C);const{X:D,Y:k,Z:F}=this,{X:Q,Y:G,Z:Y}=C,ee=c(D*Y),te=c(Q*F),U=c(k*Y),V=c(G*F);return ee===te&&U===V}is0(){return this.equals(A.ZERO)}negate(){return new A(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:C}=s,{X:D,Y:k,Z:F}=this,Q=c(D*D),G=c(k*k),Y=c(WS*c(F*F)),ee=c(C*Q),te=D+k,U=c(c(te*te)-Q-G),V=ee+G,K=V-Y,E=ee-G,a=c(U*K),p=c(V*E),M=c(U*E),R=c(K*V);return new A(a,p,R,M)}add(C){y(C);const{a:D,d:k}=s,{X:F,Y:Q,Z:G,T:Y}=this,{X:ee,Y:te,Z:U,T:V}=C,K=c(F*ee),E=c(Q*te),a=c(Y*k*V),p=c(G*U),M=c((F+Q)*(ee+te)-K-E),R=p-a,T=p+a,L=c(E-D*K),N=c(M*R),v=c(T*L),u=c(M*L),S=c(R*T);return new A(N,v,S,u)}subtract(C){return this.add(C.negate())}multiply(C){if(!i.isValidNot0(C))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:k}=P.cached(this,C,F=>Rh(A,F));return Rh(A,[D,k])[0]}multiplyUnsafe(C,D=A.ZERO){if(!i.isValid(C))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return C===Lc?A.ZERO:this.is0()||C===Xi?this:P.unsafe(this,C,k=>Rh(A,k),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return P.unsafe(this,s.n).is0()}toAffine(C){return _(this,C)}clearCofactor(){return o===Xi?this:this.multiplyUnsafe(o)}toBytes(){const{x:C,y:D}=this.toAffine(),k=n.toBytes(D);return k[k.length-1]|=C&Xi?128:0,k}toHex(){return Vh(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(C){return Rh(A,C)}static msm(C,D){return Fk(A,i,C,D)}_setWindowSize(C){this.precompute(C)}toRawBytes(){return this.toBytes()}}A.BASE=new A(s.Gx,s.Gy,Xi,c(s.Gx*s.Gy)),A.ZERO=new A(Lc,Xi,Xi,Lc),A.Fp=n,A.Fn=i;const P=new Uk(A,i.BITS);return A.BASE.precompute(8),A}function a8(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');Sy(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=t,{BASE:i,Fp:s,Fn:o}=r,l=t.randomBytes||HA,c=t.adjustScalarBytes||(te=>te),d=t.domain||((te,U,V)=>{if($h(V,"phflag"),U.length||V)throw new Error("Contexts/pre-hash are not supported");return te});function h(te){return o.create(Fg(te))}function y(te){const U=k.secretKey;te=oi("private key",te,U);const V=oi("hashed private key",e(te),2*U),K=c(V.slice(0,U)),E=V.slice(U,2*U),a=h(K);return{head:K,prefix:E,scalar:a}}function _(te){const{head:U,prefix:V,scalar:K}=y(te),E=i.multiply(K),a=E.toBytes();return{head:U,prefix:V,scalar:K,point:E,pointBytes:a}}function x(te){return _(te).pointBytes}function A(te=Uint8Array.of(),...U){const V=wl(...U);return h(e(d(V,oi("context",te),!!n)))}function P(te,U,V={}){te=oi("message",te),n&&(te=n(te));const{prefix:K,scalar:E,pointBytes:a}=_(U),p=A(V.context,K,te),M=i.multiply(p).toBytes(),R=A(V.context,M,a,te),T=o.create(p+R*E);if(!o.isValid(T))throw new Error("sign failed: invalid s");const L=wl(M,o.toBytes(T));return Ha(L,k.signature,"result")}const I={zip215:!0};function C(te,U,V,K=I){const{context:E,zip215:a}=K,p=k.signature;te=oi("signature",te,p),U=oi("message",U),V=oi("publicKey",V,k.publicKey),a!==void 0&&$h(a,"zip215"),n&&(U=n(U));const M=p/2,R=te.subarray(0,M),T=Fg(te.subarray(M,p));let L,N,v;try{L=r.fromBytes(V,a),N=r.fromBytes(R,a),v=i.multiplyUnsafe(T)}catch{return!1}if(!a&&L.isSmallOrder())return!1;const u=A(E,N.toBytes(),L.toBytes(),U);return N.add(L.multiplyUnsafe(u)).subtract(v).clearCofactor().is0()}const D=s.BYTES,k={secretKey:D,publicKey:D,signature:2*D,seed:D};function F(te=l(k.seed)){return Ha(te,k.seed,"seed")}function Q(te){const U=ee.randomSecretKey(te);return{secretKey:U,publicKey:x(U)}}function G(te){return _y(te)&&te.length===o.BYTES}function Y(te,U){try{return!!r.fromBytes(te,U)}catch{return!1}}const ee={getExtendedPublicKey:_,randomSecretKey:F,isValidSecretKey:G,isValidPublicKey:Y,toMontgomery(te){const{y:U}=r.fromBytes(te),V=k.publicKey,K=V===32;if(!K&&V!==57)throw new Error("only defined for 25519 and 448");const E=K?s.div(Xi+U,Xi-U):s.div(U-Xi,U+Xi);return s.toBytes(E)},toMontgomerySecret(te){const U=k.secretKey;Ha(te,U);const V=e(te.subarray(0,U));return c(V).subarray(0,U)},randomPrivateKey:F,precompute(te=8,U=r.BASE){return U.precompute(te,!1)}};return Object.freeze({keygen:Q,getPublicKey:x,sign:P,verify:C,utils:ee,Point:r,lengths:k})}function l8(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=sd(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},s={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,hash:r.hash,eddsaOpts:s}}function u8(r,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function c8(r){const{CURVE:e,curveOpts:t,hash:n,eddsaOpts:i}=l8(r),s=o8(e,t),o=a8(s,n,i);return u8(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f8=BigInt(1),Q2=BigInt(2);BigInt(3);const h8=BigInt(5),d8=BigInt(8),KA=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Wk={p:KA,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:d8,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function p8(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=KA,l=r*r%s*r%s,c=si(l,Q2,s)*l%s,d=si(c,f8,s)*r%s,h=si(d,h8,s)*d%s,y=si(h,e,s)*h%s,_=si(y,t,s)*y%s,x=si(_,n,s)*_%s,A=si(x,i,s)*x%s,P=si(A,i,s)*x%s,I=si(P,e,s)*h%s;return{pow_p_5_8:si(I,Q2,s)*r%s,b2:l}}function m8(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const J2=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function g8(r,e){const t=KA,n=Ri(e*e*e,t),i=Ri(n*n*e,t),s=p8(r*i).pow_p_5_8;let o=Ri(r*n*s,t);const l=Ri(e*o*o,t),c=o,d=Ri(o*J2,t),h=l===r,y=l===Ri(-r,t),_=l===Ri(-r*J2,t);return h&&(o=c),(y||_)&&(o=d),$z(o,t)&&(o=Ri(-o,t)),{isValid:h||y,value:o}}const y8=sd(Wk.p,{isLE:!0}),v8={...Wk,Fp:y8,hash:Vz,adjustScalarBytes:m8,uvRatio:g8},C0=c8(v8);var o_={exports:{}},VS={},eC;function I0(){return eC||(eC=1,(function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},t={};t.byteLength=h,t.toByteArray=_,t.fromByteArray=P;for(var n=[],i=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=o.length;l<c;++l)n[l]=o[l],i[o.charCodeAt(l)]=l;i[45]=62,i[95]=63;function d(D){var k=D.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var F=D.indexOf("=");F===-1&&(F=k);var Q=F===k?0:4-F%4;return[F,Q]}function h(D){var k=d(D),F=k[0],Q=k[1];return(F+Q)*3/4-Q}function y(D,k,F){return(k+F)*3/4-F}function _(D){var k,F=d(D),Q=F[0],G=F[1],Y=new s(y(D,Q,G)),ee=0,te=G>0?Q-4:Q,U;for(U=0;U<te;U+=4)k=i[D.charCodeAt(U)]<<18|i[D.charCodeAt(U+1)]<<12|i[D.charCodeAt(U+2)]<<6|i[D.charCodeAt(U+3)],Y[ee++]=k>>16&255,Y[ee++]=k>>8&255,Y[ee++]=k&255;return G===2&&(k=i[D.charCodeAt(U)]<<2|i[D.charCodeAt(U+1)]>>4,Y[ee++]=k&255),G===1&&(k=i[D.charCodeAt(U)]<<10|i[D.charCodeAt(U+1)]<<4|i[D.charCodeAt(U+2)]>>2,Y[ee++]=k>>8&255,Y[ee++]=k&255),Y}function x(D){return n[D>>18&63]+n[D>>12&63]+n[D>>6&63]+n[D&63]}function A(D,k,F){for(var Q,G=[],Y=k;Y<F;Y+=3)Q=(D[Y]<<16&16711680)+(D[Y+1]<<8&65280)+(D[Y+2]&255),G.push(x(Q));return G.join("")}function P(D){for(var k,F=D.length,Q=F%3,G=[],Y=16383,ee=0,te=F-Q;ee<te;ee+=Y)G.push(A(D,ee,ee+Y>te?te:ee+Y));return Q===1?(k=D[F-1],G.push(n[k>>2]+n[k<<4&63]+"==")):Q===2&&(k=(D[F-2]<<8)+D[F-1],G.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),G.join("")}var I={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */I.read=function(D,k,F,Q,G){var Y,ee,te=G*8-Q-1,U=(1<<te)-1,V=U>>1,K=-7,E=F?G-1:0,a=F?-1:1,p=D[k+E];for(E+=a,Y=p&(1<<-K)-1,p>>=-K,K+=te;K>0;Y=Y*256+D[k+E],E+=a,K-=8);for(ee=Y&(1<<-K)-1,Y>>=-K,K+=Q;K>0;ee=ee*256+D[k+E],E+=a,K-=8);if(Y===0)Y=1-V;else{if(Y===U)return ee?NaN:(p?-1:1)*(1/0);ee=ee+Math.pow(2,Q),Y=Y-V}return(p?-1:1)*ee*Math.pow(2,Y-Q)},I.write=function(D,k,F,Q,G,Y){var ee,te,U,V=Y*8-G-1,K=(1<<V)-1,E=K>>1,a=G===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=Q?0:Y-1,M=Q?1:-1,R=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(te=isNaN(k)?1:0,ee=K):(ee=Math.floor(Math.log(k)/Math.LN2),k*(U=Math.pow(2,-ee))<1&&(ee--,U*=2),ee+E>=1?k+=a/U:k+=a*Math.pow(2,1-E),k*U>=2&&(ee++,U/=2),ee+E>=K?(te=0,ee=K):ee+E>=1?(te=(k*U-1)*Math.pow(2,G),ee=ee+E):(te=k*Math.pow(2,E-1)*Math.pow(2,G),ee=0));G>=8;D[F+p]=te&255,p+=M,te/=256,G-=8);for(ee=ee<<G|te,V+=G;V>0;D[F+p]=ee&255,p+=M,ee/=256,V-=8);D[F+p-M]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(D){const k=t,F=I,Q=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;D.Buffer=K,D.SlowBuffer=S,D.INSPECT_MAX_BYTES=50;const G=2147483647;D.kMaxLength=G;const{Uint8Array:Y,ArrayBuffer:ee,SharedArrayBuffer:te}=globalThis;K.TYPED_ARRAY_SUPPORT=U(),!K.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function U(){try{const ae=new Y(1),J={foo:function(){return 42}};return Object.setPrototypeOf(J,Y.prototype),Object.setPrototypeOf(ae,J),ae.foo()===42}catch{return!1}}Object.defineProperty(K.prototype,"parent",{enumerable:!0,get:function(){if(K.isBuffer(this))return this.buffer}}),Object.defineProperty(K.prototype,"offset",{enumerable:!0,get:function(){if(K.isBuffer(this))return this.byteOffset}});function V(ae){if(ae>G)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const J=new Y(ae);return Object.setPrototypeOf(J,K.prototype),J}function K(ae,J,X){if(typeof ae=="number"){if(typeof J=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(ae)}return E(ae,J,X)}K.poolSize=8192;function E(ae,J,X){if(typeof ae=="string")return R(ae,J);if(ee.isView(ae))return L(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(Ct(ae,ee)||ae&&Ct(ae.buffer,ee)||typeof te<"u"&&(Ct(ae,te)||ae&&Ct(ae.buffer,te)))return N(ae,J,X);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=ae.valueOf&&ae.valueOf();if(he!=null&&he!==ae)return K.from(he,J,X);const Ie=v(ae);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return K.from(ae[Symbol.toPrimitive]("string"),J,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}K.from=function(ae,J,X){return E(ae,J,X)},Object.setPrototypeOf(K.prototype,Y.prototype),Object.setPrototypeOf(K,Y);function a(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function p(ae,J,X){return a(ae),ae<=0?V(ae):J!==void 0?typeof X=="string"?V(ae).fill(J,X):V(ae).fill(J):V(ae)}K.alloc=function(ae,J,X){return p(ae,J,X)};function M(ae){return a(ae),V(ae<0?0:u(ae)|0)}K.allocUnsafe=function(ae){return M(ae)},K.allocUnsafeSlow=function(ae){return M(ae)};function R(ae,J){if((typeof J!="string"||J==="")&&(J="utf8"),!K.isEncoding(J))throw new TypeError("Unknown encoding: "+J);const X=W(ae,J)|0;let he=V(X);const Ie=he.write(ae,J);return Ie!==X&&(he=he.slice(0,Ie)),he}function T(ae){const J=ae.length<0?0:u(ae.length)|0,X=V(J);for(let he=0;he<J;he+=1)X[he]=ae[he]&255;return X}function L(ae){if(Ct(ae,Y)){const J=new Y(ae);return N(J.buffer,J.byteOffset,J.byteLength)}return T(ae)}function N(ae,J,X){if(J<0||ae.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<J+(X||0))throw new RangeError('"length" is outside of buffer bounds');let he;return J===void 0&&X===void 0?he=new Y(ae):X===void 0?he=new Y(ae,J):he=new Y(ae,J,X),Object.setPrototypeOf(he,K.prototype),he}function v(ae){if(K.isBuffer(ae)){const J=u(ae.length)|0,X=V(J);return X.length===0||ae.copy(X,0,0,J),X}if(ae.length!==void 0)return typeof ae.length!="number"||ft(ae.length)?V(0):T(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return T(ae.data)}function u(ae){if(ae>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return ae|0}function S(ae){return+ae!=ae&&(ae=0),K.alloc(+ae)}K.isBuffer=function(J){return J!=null&&J._isBuffer===!0&&J!==K.prototype},K.compare=function(J,X){if(Ct(J,Y)&&(J=K.from(J,J.offset,J.byteLength)),Ct(X,Y)&&(X=K.from(X,X.offset,X.byteLength)),!K.isBuffer(J)||!K.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(J===X)return 0;let he=J.length,Ie=X.length;for(let Te=0,Ne=Math.min(he,Ie);Te<Ne;++Te)if(J[Te]!==X[Te]){he=J[Te],Ie=X[Te];break}return he<Ie?-1:Ie<he?1:0},K.isEncoding=function(J){switch(String(J).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},K.concat=function(J,X){if(!Array.isArray(J))throw new TypeError('"list" argument must be an Array of Buffers');if(J.length===0)return K.alloc(0);let he;if(X===void 0)for(X=0,he=0;he<J.length;++he)X+=J[he].length;const Ie=K.allocUnsafe(X);let Te=0;for(he=0;he<J.length;++he){let Ne=J[he];if(Ct(Ne,Y))Te+Ne.length>Ie.length?(K.isBuffer(Ne)||(Ne=K.from(Ne)),Ne.copy(Ie,Te)):Y.prototype.set.call(Ie,Ne,Te);else if(K.isBuffer(Ne))Ne.copy(Ie,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=Ne.length}return Ie};function W(ae,J){if(K.isBuffer(ae))return ae.length;if(ee.isView(ae)||Ct(ae,ee))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const X=ae.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&X===0)return 0;let Ie=!1;for(;;)switch(J){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return de(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return Ee(ae).length;default:if(Ie)return he?-1:de(ae).length;J=(""+J).toLowerCase(),Ie=!0}}K.byteLength=W;function $(ae,J,X){let he=!1;if((J===void 0||J<0)&&(J=0),J>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,J>>>=0,X<=J))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return fe(this,J,X);case"utf8":case"utf-8":return je(this,J,X);case"ascii":return nt(this,J,X);case"latin1":case"binary":return Pt(this,J,X);case"base64":return Ge(this,J,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,J,X);default:if(he)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),he=!0}}K.prototype._isBuffer=!0;function se(ae,J,X){const he=ae[J];ae[J]=ae[X],ae[X]=he}K.prototype.swap16=function(){const J=this.length;if(J%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<J;X+=2)se(this,X,X+1);return this},K.prototype.swap32=function(){const J=this.length;if(J%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<J;X+=4)se(this,X,X+3),se(this,X+1,X+2);return this},K.prototype.swap64=function(){const J=this.length;if(J%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<J;X+=8)se(this,X,X+7),se(this,X+1,X+6),se(this,X+2,X+5),se(this,X+3,X+4);return this},K.prototype.toString=function(){const J=this.length;return J===0?"":arguments.length===0?je(this,0,J):$.apply(this,arguments)},K.prototype.toLocaleString=K.prototype.toString,K.prototype.equals=function(J){if(!K.isBuffer(J))throw new TypeError("Argument must be a Buffer");return this===J?!0:K.compare(this,J)===0},K.prototype.inspect=function(){let J="";const X=D.INSPECT_MAX_BYTES;return J=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(J+=" ... "),"<Buffer "+J+">"},Q&&(K.prototype[Q]=K.prototype.inspect),K.prototype.compare=function(J,X,he,Ie,Te){if(Ct(J,Y)&&(J=K.from(J,J.offset,J.byteLength)),!K.isBuffer(J))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof J);if(X===void 0&&(X=0),he===void 0&&(he=J?J.length:0),Ie===void 0&&(Ie=0),Te===void 0&&(Te=this.length),X<0||he>J.length||Ie<0||Te>this.length)throw new RangeError("out of range index");if(Ie>=Te&&X>=he)return 0;if(Ie>=Te)return-1;if(X>=he)return 1;if(X>>>=0,he>>>=0,Ie>>>=0,Te>>>=0,this===J)return 0;let Ne=Te-Ie,dn=he-X;const gt=Math.min(Ne,dn),xt=this.slice(Ie,Te),Dn=J.slice(X,he);for(let wt=0;wt<gt;++wt)if(xt[wt]!==Dn[wt]){Ne=xt[wt],dn=Dn[wt];break}return Ne<dn?-1:dn<Ne?1:0};function me(ae,J,X,he,Ie){if(ae.length===0)return-1;if(typeof X=="string"?(he=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,ft(X)&&(X=Ie?0:ae.length-1),X<0&&(X=ae.length+X),X>=ae.length){if(Ie)return-1;X=ae.length-1}else if(X<0)if(Ie)X=0;else return-1;if(typeof J=="string"&&(J=K.from(J,he)),K.isBuffer(J))return J.length===0?-1:_e(ae,J,X,he,Ie);if(typeof J=="number")return J=J&255,typeof Y.prototype.indexOf=="function"?Ie?Y.prototype.indexOf.call(ae,J,X):Y.prototype.lastIndexOf.call(ae,J,X):_e(ae,[J],X,he,Ie);throw new TypeError("val must be string, number or Buffer")}function _e(ae,J,X,he,Ie){let Te=1,Ne=ae.length,dn=J.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(ae.length<2||J.length<2)return-1;Te=2,Ne/=2,dn/=2,X/=2}function gt(Dn,wt){return Te===1?Dn[wt]:Dn.readUInt16BE(wt*Te)}let xt;if(Ie){let Dn=-1;for(xt=X;xt<Ne;xt++)if(gt(ae,xt)===gt(J,Dn===-1?0:xt-Dn)){if(Dn===-1&&(Dn=xt),xt-Dn+1===dn)return Dn*Te}else Dn!==-1&&(xt-=xt-Dn),Dn=-1}else for(X+dn>Ne&&(X=Ne-dn),xt=X;xt>=0;xt--){let Dn=!0;for(let wt=0;wt<dn;wt++)if(gt(ae,xt+wt)!==gt(J,wt)){Dn=!1;break}if(Dn)return xt}return-1}K.prototype.includes=function(J,X,he){return this.indexOf(J,X,he)!==-1},K.prototype.indexOf=function(J,X,he){return me(this,J,X,he,!0)},K.prototype.lastIndexOf=function(J,X,he){return me(this,J,X,he,!1)};function Ae(ae,J,X,he){X=Number(X)||0;const Ie=ae.length-X;he?(he=Number(he),he>Ie&&(he=Ie)):he=Ie;const Te=J.length;he>Te/2&&(he=Te/2);let Ne;for(Ne=0;Ne<he;++Ne){const dn=parseInt(J.substr(Ne*2,2),16);if(ft(dn))return Ne;ae[X+Ne]=dn}return Ne}function _t(ae,J,X,he){return qe(de(J,ae.length-X),ae,X,he)}function Ze(ae,J,X,he){return qe(Ce(J),ae,X,he)}function Pe(ae,J,X,he){return qe(Ee(J),ae,X,he)}function ge(ae,J,X,he){return qe(Ue(J,ae.length-X),ae,X,he)}K.prototype.write=function(J,X,he,Ie){if(X===void 0)Ie="utf8",he=this.length,X=0;else if(he===void 0&&typeof X=="string")Ie=X,he=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(he)?(he=he>>>0,Ie===void 0&&(Ie="utf8")):(Ie=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-X;if((he===void 0||he>Te)&&(he=Te),J.length>0&&(he<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let Ne=!1;for(;;)switch(Ie){case"hex":return Ae(this,J,X,he);case"utf8":case"utf-8":return _t(this,J,X,he);case"ascii":case"latin1":case"binary":return Ze(this,J,X,he);case"base64":return Pe(this,J,X,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,J,X,he);default:if(Ne)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Ne=!0}},K.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ge(ae,J,X){return J===0&&X===ae.length?k.fromByteArray(ae):k.fromByteArray(ae.slice(J,X))}function je(ae,J,X){X=Math.min(ae.length,X);const he=[];let Ie=J;for(;Ie<X;){const Te=ae[Ie];let Ne=null,dn=Te>239?4:Te>223?3:Te>191?2:1;if(Ie+dn<=X){let gt,xt,Dn,wt;switch(dn){case 1:Te<128&&(Ne=Te);break;case 2:gt=ae[Ie+1],(gt&192)===128&&(wt=(Te&31)<<6|gt&63,wt>127&&(Ne=wt));break;case 3:gt=ae[Ie+1],xt=ae[Ie+2],(gt&192)===128&&(xt&192)===128&&(wt=(Te&15)<<12|(gt&63)<<6|xt&63,wt>2047&&(wt<55296||wt>57343)&&(Ne=wt));break;case 4:gt=ae[Ie+1],xt=ae[Ie+2],Dn=ae[Ie+3],(gt&192)===128&&(xt&192)===128&&(Dn&192)===128&&(wt=(Te&15)<<18|(gt&63)<<12|(xt&63)<<6|Dn&63,wt>65535&&wt<1114112&&(Ne=wt))}}Ne===null?(Ne=65533,dn=1):Ne>65535&&(Ne-=65536,he.push(Ne>>>10&1023|55296),Ne=56320|Ne&1023),he.push(Ne),Ie+=dn}return He(he)}const vt=4096;function He(ae){const J=ae.length;if(J<=vt)return String.fromCharCode.apply(String,ae);let X="",he=0;for(;he<J;)X+=String.fromCharCode.apply(String,ae.slice(he,he+=vt));return X}function nt(ae,J,X){let he="";X=Math.min(ae.length,X);for(let Ie=J;Ie<X;++Ie)he+=String.fromCharCode(ae[Ie]&127);return he}function Pt(ae,J,X){let he="";X=Math.min(ae.length,X);for(let Ie=J;Ie<X;++Ie)he+=String.fromCharCode(ae[Ie]);return he}function fe(ae,J,X){const he=ae.length;(!J||J<0)&&(J=0),(!X||X<0||X>he)&&(X=he);let Ie="";for(let Te=J;Te<X;++Te)Ie+=yt[ae[Te]];return Ie}function oe(ae,J,X){const he=ae.slice(J,X);let Ie="";for(let Te=0;Te<he.length-1;Te+=2)Ie+=String.fromCharCode(he[Te]+he[Te+1]*256);return Ie}K.prototype.slice=function(J,X){const he=this.length;J=~~J,X=X===void 0?he:~~X,J<0?(J+=he,J<0&&(J=0)):J>he&&(J=he),X<0?(X+=he,X<0&&(X=0)):X>he&&(X=he),X<J&&(X=J);const Ie=this.subarray(J,X);return Object.setPrototypeOf(Ie,K.prototype),Ie};function Oe(ae,J,X){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+J>X)throw new RangeError("Trying to access beyond buffer length")}K.prototype.readUintLE=K.prototype.readUIntLE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=this[J],Te=1,Ne=0;for(;++Ne<X&&(Te*=256);)Ie+=this[J+Ne]*Te;return Ie},K.prototype.readUintBE=K.prototype.readUIntBE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=this[J+--X],Te=1;for(;X>0&&(Te*=256);)Ie+=this[J+--X]*Te;return Ie},K.prototype.readUint8=K.prototype.readUInt8=function(J,X){return J=J>>>0,X||Oe(J,1,this.length),this[J]},K.prototype.readUint16LE=K.prototype.readUInt16LE=function(J,X){return J=J>>>0,X||Oe(J,2,this.length),this[J]|this[J+1]<<8},K.prototype.readUint16BE=K.prototype.readUInt16BE=function(J,X){return J=J>>>0,X||Oe(J,2,this.length),this[J]<<8|this[J+1]},K.prototype.readUint32LE=K.prototype.readUInt32LE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),(this[J]|this[J+1]<<8|this[J+2]<<16)+this[J+3]*16777216},K.prototype.readUint32BE=K.prototype.readUInt32BE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),this[J]*16777216+(this[J+1]<<16|this[J+2]<<8|this[J+3])},K.prototype.readBigUInt64LE=Sn(function(J){J=J>>>0,we(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=X+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24,Te=this[++J]+this[++J]*2**8+this[++J]*2**16+he*2**24;return BigInt(Ie)+(BigInt(Te)<<BigInt(32))}),K.prototype.readBigUInt64BE=Sn(function(J){J=J>>>0,we(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=X*2**24+this[++J]*2**16+this[++J]*2**8+this[++J],Te=this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+he;return(BigInt(Ie)<<BigInt(32))+BigInt(Te)}),K.prototype.readIntLE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=this[J],Te=1,Ne=0;for(;++Ne<X&&(Te*=256);)Ie+=this[J+Ne]*Te;return Te*=128,Ie>=Te&&(Ie-=Math.pow(2,8*X)),Ie},K.prototype.readIntBE=function(J,X,he){J=J>>>0,X=X>>>0,he||Oe(J,X,this.length);let Ie=X,Te=1,Ne=this[J+--Ie];for(;Ie>0&&(Te*=256);)Ne+=this[J+--Ie]*Te;return Te*=128,Ne>=Te&&(Ne-=Math.pow(2,8*X)),Ne},K.prototype.readInt8=function(J,X){return J=J>>>0,X||Oe(J,1,this.length),this[J]&128?(255-this[J]+1)*-1:this[J]},K.prototype.readInt16LE=function(J,X){J=J>>>0,X||Oe(J,2,this.length);const he=this[J]|this[J+1]<<8;return he&32768?he|4294901760:he},K.prototype.readInt16BE=function(J,X){J=J>>>0,X||Oe(J,2,this.length);const he=this[J+1]|this[J]<<8;return he&32768?he|4294901760:he},K.prototype.readInt32LE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),this[J]|this[J+1]<<8|this[J+2]<<16|this[J+3]<<24},K.prototype.readInt32BE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),this[J]<<24|this[J+1]<<16|this[J+2]<<8|this[J+3]},K.prototype.readBigInt64LE=Sn(function(J){J=J>>>0,we(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=this[J+4]+this[J+5]*2**8+this[J+6]*2**16+(he<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(X+this[++J]*2**8+this[++J]*2**16+this[++J]*2**24)}),K.prototype.readBigInt64BE=Sn(function(J){J=J>>>0,we(J,"offset");const X=this[J],he=this[J+7];(X===void 0||he===void 0)&&ye(J,this.length-8);const Ie=(X<<24)+this[++J]*2**16+this[++J]*2**8+this[++J];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++J]*2**24+this[++J]*2**16+this[++J]*2**8+he)}),K.prototype.readFloatLE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),F.read(this,J,!0,23,4)},K.prototype.readFloatBE=function(J,X){return J=J>>>0,X||Oe(J,4,this.length),F.read(this,J,!1,23,4)},K.prototype.readDoubleLE=function(J,X){return J=J>>>0,X||Oe(J,8,this.length),F.read(this,J,!0,52,8)},K.prototype.readDoubleBE=function(J,X){return J=J>>>0,X||Oe(J,8,this.length),F.read(this,J,!1,52,8)};function Re(ae,J,X,he,Ie,Te){if(!K.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>Ie||J<Te)throw new RangeError('"value" argument is out of bounds');if(X+he>ae.length)throw new RangeError("Index out of range")}K.prototype.writeUintLE=K.prototype.writeUIntLE=function(J,X,he,Ie){if(J=+J,X=X>>>0,he=he>>>0,!Ie){const dn=Math.pow(2,8*he)-1;Re(this,J,X,he,dn,0)}let Te=1,Ne=0;for(this[X]=J&255;++Ne<he&&(Te*=256);)this[X+Ne]=J/Te&255;return X+he},K.prototype.writeUintBE=K.prototype.writeUIntBE=function(J,X,he,Ie){if(J=+J,X=X>>>0,he=he>>>0,!Ie){const dn=Math.pow(2,8*he)-1;Re(this,J,X,he,dn,0)}let Te=he-1,Ne=1;for(this[X+Te]=J&255;--Te>=0&&(Ne*=256);)this[X+Te]=J/Ne&255;return X+he},K.prototype.writeUint8=K.prototype.writeUInt8=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,1,255,0),this[X]=J&255,X+1},K.prototype.writeUint16LE=K.prototype.writeUInt16LE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,2,65535,0),this[X]=J&255,this[X+1]=J>>>8,X+2},K.prototype.writeUint16BE=K.prototype.writeUInt16BE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,2,65535,0),this[X]=J>>>8,this[X+1]=J&255,X+2},K.prototype.writeUint32LE=K.prototype.writeUInt32LE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,4,4294967295,0),this[X+3]=J>>>24,this[X+2]=J>>>16,this[X+1]=J>>>8,this[X]=J&255,X+4},K.prototype.writeUint32BE=K.prototype.writeUInt32BE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,4,4294967295,0),this[X]=J>>>24,this[X+1]=J>>>16,this[X+2]=J>>>8,this[X+3]=J&255,X+4};function Le(ae,J,X,he,Ie){ue(J,he,Ie,ae,X,7);let Te=Number(J&BigInt(4294967295));ae[X++]=Te,Te=Te>>8,ae[X++]=Te,Te=Te>>8,ae[X++]=Te,Te=Te>>8,ae[X++]=Te;let Ne=Number(J>>BigInt(32)&BigInt(4294967295));return ae[X++]=Ne,Ne=Ne>>8,ae[X++]=Ne,Ne=Ne>>8,ae[X++]=Ne,Ne=Ne>>8,ae[X++]=Ne,X}function ot(ae,J,X,he,Ie){ue(J,he,Ie,ae,X,7);let Te=Number(J&BigInt(4294967295));ae[X+7]=Te,Te=Te>>8,ae[X+6]=Te,Te=Te>>8,ae[X+5]=Te,Te=Te>>8,ae[X+4]=Te;let Ne=Number(J>>BigInt(32)&BigInt(4294967295));return ae[X+3]=Ne,Ne=Ne>>8,ae[X+2]=Ne,Ne=Ne>>8,ae[X+1]=Ne,Ne=Ne>>8,ae[X]=Ne,X+8}K.prototype.writeBigUInt64LE=Sn(function(J,X=0){return Le(this,J,X,BigInt(0),BigInt("0xffffffffffffffff"))}),K.prototype.writeBigUInt64BE=Sn(function(J,X=0){return ot(this,J,X,BigInt(0),BigInt("0xffffffffffffffff"))}),K.prototype.writeIntLE=function(J,X,he,Ie){if(J=+J,X=X>>>0,!Ie){const gt=Math.pow(2,8*he-1);Re(this,J,X,he,gt-1,-gt)}let Te=0,Ne=1,dn=0;for(this[X]=J&255;++Te<he&&(Ne*=256);)J<0&&dn===0&&this[X+Te-1]!==0&&(dn=1),this[X+Te]=(J/Ne>>0)-dn&255;return X+he},K.prototype.writeIntBE=function(J,X,he,Ie){if(J=+J,X=X>>>0,!Ie){const gt=Math.pow(2,8*he-1);Re(this,J,X,he,gt-1,-gt)}let Te=he-1,Ne=1,dn=0;for(this[X+Te]=J&255;--Te>=0&&(Ne*=256);)J<0&&dn===0&&this[X+Te+1]!==0&&(dn=1),this[X+Te]=(J/Ne>>0)-dn&255;return X+he},K.prototype.writeInt8=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,1,127,-128),J<0&&(J=255+J+1),this[X]=J&255,X+1},K.prototype.writeInt16LE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,2,32767,-32768),this[X]=J&255,this[X+1]=J>>>8,X+2},K.prototype.writeInt16BE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,2,32767,-32768),this[X]=J>>>8,this[X+1]=J&255,X+2},K.prototype.writeInt32LE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,4,2147483647,-2147483648),this[X]=J&255,this[X+1]=J>>>8,this[X+2]=J>>>16,this[X+3]=J>>>24,X+4},K.prototype.writeInt32BE=function(J,X,he){return J=+J,X=X>>>0,he||Re(this,J,X,4,2147483647,-2147483648),J<0&&(J=4294967295+J+1),this[X]=J>>>24,this[X+1]=J>>>16,this[X+2]=J>>>8,this[X+3]=J&255,X+4},K.prototype.writeBigInt64LE=Sn(function(J,X=0){return Le(this,J,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),K.prototype.writeBigInt64BE=Sn(function(J,X=0){return ot(this,J,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function et(ae,J,X,he,Ie,Te){if(X+he>ae.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function Ye(ae,J,X,he,Ie){return J=+J,X=X>>>0,Ie||et(ae,J,X,4),F.write(ae,J,X,he,23,4),X+4}K.prototype.writeFloatLE=function(J,X,he){return Ye(this,J,X,!0,he)},K.prototype.writeFloatBE=function(J,X,he){return Ye(this,J,X,!1,he)};function bt(ae,J,X,he,Ie){return J=+J,X=X>>>0,Ie||et(ae,J,X,8),F.write(ae,J,X,he,52,8),X+8}K.prototype.writeDoubleLE=function(J,X,he){return bt(this,J,X,!0,he)},K.prototype.writeDoubleBE=function(J,X,he){return bt(this,J,X,!1,he)},K.prototype.copy=function(J,X,he,Ie){if(!K.isBuffer(J))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Ie&&Ie!==0&&(Ie=this.length),X>=J.length&&(X=J.length),X||(X=0),Ie>0&&Ie<he&&(Ie=he),Ie===he||J.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),J.length-X<Ie-he&&(Ie=J.length-X+he);const Te=Ie-he;return this===J&&typeof Y.prototype.copyWithin=="function"?this.copyWithin(X,he,Ie):Y.prototype.set.call(J,this.subarray(he,Ie),X),Te},K.prototype.fill=function(J,X,he,Ie){if(typeof J=="string"){if(typeof X=="string"?(Ie=X,X=0,he=this.length):typeof he=="string"&&(Ie=he,he=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!K.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(J.length===1){const Ne=J.charCodeAt(0);(Ie==="utf8"&&Ne<128||Ie==="latin1")&&(J=Ne)}}else typeof J=="number"?J=J&255:typeof J=="boolean"&&(J=Number(J));if(X<0||this.length<X||this.length<he)throw new RangeError("Out of range index");if(he<=X)return this;X=X>>>0,he=he===void 0?this.length:he>>>0,J||(J=0);let Te;if(typeof J=="number")for(Te=X;Te<he;++Te)this[Te]=J;else{const Ne=K.isBuffer(J)?J:K.from(J,Ie),dn=Ne.length;if(dn===0)throw new TypeError('The value "'+J+'" is invalid for argument "value"');for(Te=0;Te<he-X;++Te)this[Te+X]=Ne[Te%dn]}return this};const ct={};function re(ae,J,X){ct[ae]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:J.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(ae,J){return`The "${ae}" argument must be of type number. Received type ${typeof J}`},TypeError),re("ERR_OUT_OF_RANGE",function(ae,J,X){let he=`The value of "${ae}" is out of range.`,Ie=X;return Number.isInteger(X)&&Math.abs(X)>2**32?Ie=j(String(X)):typeof X=="bigint"&&(Ie=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(Ie=j(Ie)),Ie+="n"),he+=` It must be ${J}. Received ${Ie}`,he},RangeError);function j(ae){let J="",X=ae.length;const he=ae[0]==="-"?1:0;for(;X>=he+4;X-=3)J=`_${ae.slice(X-3,X)}${J}`;return`${ae.slice(0,X)}${J}`}function q(ae,J,X){we(J,"offset"),(ae[J]===void 0||ae[J+X]===void 0)&&ye(J,ae.length-(X+1))}function ue(ae,J,X,he,Ie,Te){if(ae>X||ae<J){const Ne=typeof J=="bigint"?"n":"";let dn;throw J===0||J===BigInt(0)?dn=`>= 0${Ne} and < 2${Ne} ** ${(Te+1)*8}${Ne}`:dn=`>= -(2${Ne} ** ${(Te+1)*8-1}${Ne}) and < 2 ** ${(Te+1)*8-1}${Ne}`,new ct.ERR_OUT_OF_RANGE("value",dn,ae)}q(he,Ie,Te)}function we(ae,J){if(typeof ae!="number")throw new ct.ERR_INVALID_ARG_TYPE(J,"number",ae)}function ye(ae,J,X){throw Math.floor(ae)!==ae?(we(ae,X),new ct.ERR_OUT_OF_RANGE("offset","an integer",ae)):J<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${J}`,ae)}const le=/[^+/0-9A-Za-z-_]/g;function Xe(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(le,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function de(ae,J){J=J||1/0;let X;const he=ae.length;let Ie=null;const Te=[];for(let Ne=0;Ne<he;++Ne){if(X=ae.charCodeAt(Ne),X>55295&&X<57344){if(!Ie){if(X>56319){(J-=3)>-1&&Te.push(239,191,189);continue}else if(Ne+1===he){(J-=3)>-1&&Te.push(239,191,189);continue}Ie=X;continue}if(X<56320){(J-=3)>-1&&Te.push(239,191,189),Ie=X;continue}X=(Ie-55296<<10|X-56320)+65536}else Ie&&(J-=3)>-1&&Te.push(239,191,189);if(Ie=null,X<128){if((J-=1)<0)break;Te.push(X)}else if(X<2048){if((J-=2)<0)break;Te.push(X>>6|192,X&63|128)}else if(X<65536){if((J-=3)<0)break;Te.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((J-=4)<0)break;Te.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return Te}function Ce(ae){const J=[];for(let X=0;X<ae.length;++X)J.push(ae.charCodeAt(X)&255);return J}function Ue(ae,J){let X,he,Ie;const Te=[];for(let Ne=0;Ne<ae.length&&!((J-=2)<0);++Ne)X=ae.charCodeAt(Ne),he=X>>8,Ie=X%256,Te.push(Ie),Te.push(he);return Te}function Ee(ae){return k.toByteArray(Xe(ae))}function qe(ae,J,X,he){let Ie;for(Ie=0;Ie<he&&!(Ie+X>=J.length||Ie>=ae.length);++Ie)J[Ie+X]=ae[Ie];return Ie}function Ct(ae,J){return ae instanceof J||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===J.name}function ft(ae){return ae!==ae}const yt=(function(){const ae="0123456789abcdef",J=new Array(256);for(let X=0;X<16;++X){const he=X*16;for(let Ie=0;Ie<16;++Ie)J[he+Ie]=ae[X]+ae[Ie]}return J})();function Sn(ae){return typeof BigInt>"u"?dt:ae}function dt(){throw new Error("BigInt not supported")}})(e);const C=e.Buffer;r.Blob=e.Blob,r.BlobOptions=e.BlobOptions,r.Buffer=e.Buffer,r.File=e.File,r.FileOptions=e.FileOptions,r.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,r.SlowBuffer=e.SlowBuffer,r.TranscodeEncoding=e.TranscodeEncoding,r.atob=e.atob,r.btoa=e.btoa,r.constants=e.constants,r.default=C,r.isAscii=e.isAscii,r.isUtf8=e.isUtf8,r.kMaxLength=e.kMaxLength,r.kStringMaxLength=e.kStringMaxLength,r.resolveObjectURL=e.resolveObjectURL,r.transcode=e.transcode})(VS)),VS}var w8=o_.exports,tC;function _8(){return tC||(tC=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=I0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,L,N=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)L=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)L=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,L=0,N;if(M==="be")for(R=a.length-1;R>=p;R-=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8;else{var v=a.length-p;for(R=v%2===0?p+1:p;R<a.length;R+=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,L=Math.min(E.length,p),N=a;N<L;N++){var v=E.charCodeAt(N)-48;R*=M,v>=49?T=v-49+10:v>=17?T=v-17+10:T=v,n(v>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var L=a.length-M,N=L%R,v=Math.min(L,L-N)+M,u=0,S=M;S<v;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(N!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<N;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{s.prototype.inspect=y}else s.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,L=0;L<this.length;L++){var N=this.words[L],v=((N<<R|T)&16777215).toString(16);T=N>>>24-R&16777215,R+=2,R>=26&&(R-=26,L--),T!==0||L!==this.length-1?M=_[6-v.length]+v+M:M=v+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var P=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var L=P(a,T),N=p==="le"?"LE":"BE";return this["_toArrayLike"+N](L,R),L},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M++]=N&255,M<a.length&&(a[M++]=N>>8&255),M<a.length&&(a[M++]=N>>16&255),L===6?(M<a.length&&(a[M++]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M--]=N&255,M>=0&&(a[M--]=N>>8&255),M>=0&&(a[M--]=N>>16&255),L===6?(M>=0&&(a[M--]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function I(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,L=0;L<R.length;L++)p=(M.words[L]|0)+(R.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;for(;T!==0&&L<M.length;L++)p=(M.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;L<M.length;L++)this.words[L]=M.words[L];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var L=0,N=0;N<T.length;N++)p=(R.words[N]|0)-(T.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;for(;L!==0&&N<R.length;N++)p=(R.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;if(L===0&&N<R.length&&R!==this)for(;N<R.length;N++)this.words[N]=R.words[N];return this.length=Math.max(this.length,N),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,L=R*T,N=L&67108863,v=L/67108864|0;p.words[0]=N;for(var u=1;u<M;u++){for(var S=v>>>26,W=v&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,L=R*T+W,S+=L/67108864|0,W=L&67108863}p.words[u]=W|0,v=S|0}return v!==0?p.words[u]=v|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,L=M.words,N=0,v,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,Ae=me>>>13,_t=R[2]|0,Ze=_t&8191,Pe=_t>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,vt=R[4]|0,He=vt&8191,nt=vt>>>13,Pt=R[5]|0,fe=Pt&8191,oe=Pt>>>13,Oe=R[6]|0,Re=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,bt=R[8]|0,ct=bt&8191,re=bt>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,we=T[0]|0,ye=we&8191,le=we>>>13,Xe=T[1]|0,de=Xe&8191,Ce=Xe>>>13,Ue=T[2]|0,Ee=Ue&8191,qe=Ue>>>13,Ct=T[3]|0,ft=Ct&8191,yt=Ct>>>13,Sn=T[4]|0,dt=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Te=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,gt=dn&8191,xt=dn>>>13,Dn=T[8]|0,wt=Dn&8191,kt=Dn>>>13,Pr=T[9]|0,Dt=Pr&8191,Ot=Pr>>>13;M.negative=a.negative^p.negative,M.length=19,v=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,v=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(Ae,ye)|0,S=Math.imul(Ae,le),v=v+Math.imul($,de)|0,u=u+Math.imul($,Ce)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Ce)|0;var De=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),v=v+Math.imul(_e,de)|0,u=u+Math.imul(_e,Ce)|0,u=u+Math.imul(Ae,de)|0,S=S+Math.imul(Ae,Ce)|0,v=v+Math.imul($,Ee)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Ee)|0,S=S+Math.imul(se,qe)|0;var $e=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,v=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),v=v+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Ce)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Ce)|0,v=v+Math.imul(_e,Ee)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(Ae,Ee)|0,S=S+Math.imul(Ae,qe)|0,v=v+Math.imul($,ft)|0,u=u+Math.imul($,yt)|0,u=u+Math.imul(se,ft)|0,S=S+Math.imul(se,yt)|0;var Qe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,v=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),v=v+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Ce)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Ce)|0,v=v+Math.imul(Ze,Ee)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Ee)|0,S=S+Math.imul(Pe,qe)|0,v=v+Math.imul(_e,ft)|0,u=u+Math.imul(_e,yt)|0,u=u+Math.imul(Ae,ft)|0,S=S+Math.imul(Ae,yt)|0,v=v+Math.imul($,dt)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,dt)|0,S=S+Math.imul(se,ae)|0;var Be=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),v=v+Math.imul(He,de)|0,u=u+Math.imul(He,Ce)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Ce)|0,v=v+Math.imul(Ge,Ee)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Ee)|0,S=S+Math.imul(je,qe)|0,v=v+Math.imul(Ze,ft)|0,u=u+Math.imul(Ze,yt)|0,u=u+Math.imul(Pe,ft)|0,S=S+Math.imul(Pe,yt)|0,v=v+Math.imul(_e,dt)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(Ae,dt)|0,S=S+Math.imul(Ae,ae)|0,v=v+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var Tt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(Re,ye),u=Math.imul(Re,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),v=v+Math.imul(fe,de)|0,u=u+Math.imul(fe,Ce)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Ce)|0,v=v+Math.imul(He,Ee)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Ee)|0,S=S+Math.imul(nt,qe)|0,v=v+Math.imul(Ge,ft)|0,u=u+Math.imul(Ge,yt)|0,u=u+Math.imul(je,ft)|0,S=S+Math.imul(je,yt)|0,v=v+Math.imul(Ze,dt)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,dt)|0,S=S+Math.imul(Pe,ae)|0,v=v+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(Ae,X)|0,S=S+Math.imul(Ae,he)|0,v=v+Math.imul($,Te)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Te)|0,S=S+Math.imul(se,Ne)|0;var zt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(zt>>>26)|0,zt&=67108863,v=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),v=v+Math.imul(Re,de)|0,u=u+Math.imul(Re,Ce)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Ce)|0,v=v+Math.imul(fe,Ee)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Ee)|0,S=S+Math.imul(oe,qe)|0,v=v+Math.imul(He,ft)|0,u=u+Math.imul(He,yt)|0,u=u+Math.imul(nt,ft)|0,S=S+Math.imul(nt,yt)|0,v=v+Math.imul(Ge,dt)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,dt)|0,S=S+Math.imul(je,ae)|0,v=v+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,v=v+Math.imul(_e,Te)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(Ae,Te)|0,S=S+Math.imul(Ae,Ne)|0,v=v+Math.imul($,gt)|0,u=u+Math.imul($,xt)|0,u=u+Math.imul(se,gt)|0,S=S+Math.imul(se,xt)|0;var At=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,v=Math.imul(ct,ye),u=Math.imul(ct,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),v=v+Math.imul(et,de)|0,u=u+Math.imul(et,Ce)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Ce)|0,v=v+Math.imul(Re,Ee)|0,u=u+Math.imul(Re,qe)|0,u=u+Math.imul(Le,Ee)|0,S=S+Math.imul(Le,qe)|0,v=v+Math.imul(fe,ft)|0,u=u+Math.imul(fe,yt)|0,u=u+Math.imul(oe,ft)|0,S=S+Math.imul(oe,yt)|0,v=v+Math.imul(He,dt)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,dt)|0,S=S+Math.imul(nt,ae)|0,v=v+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,v=v+Math.imul(Ze,Te)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Te)|0,S=S+Math.imul(Pe,Ne)|0,v=v+Math.imul(_e,gt)|0,u=u+Math.imul(_e,xt)|0,u=u+Math.imul(Ae,gt)|0,S=S+Math.imul(Ae,xt)|0,v=v+Math.imul($,wt)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,wt)|0,S=S+Math.imul(se,kt)|0;var Ht=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),v=v+Math.imul(ct,de)|0,u=u+Math.imul(ct,Ce)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Ce)|0,v=v+Math.imul(et,Ee)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Ee)|0,S=S+Math.imul(Ye,qe)|0,v=v+Math.imul(Re,ft)|0,u=u+Math.imul(Re,yt)|0,u=u+Math.imul(Le,ft)|0,S=S+Math.imul(Le,yt)|0,v=v+Math.imul(fe,dt)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,dt)|0,S=S+Math.imul(oe,ae)|0,v=v+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,v=v+Math.imul(Ge,Te)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Te)|0,S=S+Math.imul(je,Ne)|0,v=v+Math.imul(Ze,gt)|0,u=u+Math.imul(Ze,xt)|0,u=u+Math.imul(Pe,gt)|0,S=S+Math.imul(Pe,xt)|0,v=v+Math.imul(_e,wt)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(Ae,wt)|0,S=S+Math.imul(Ae,kt)|0,v=v+Math.imul($,Dt)|0,u=u+Math.imul($,Ot)|0,u=u+Math.imul(se,Dt)|0,S=S+Math.imul(se,Ot)|0;var rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(rn>>>26)|0,rn&=67108863,v=Math.imul(q,de),u=Math.imul(q,Ce),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Ce),v=v+Math.imul(ct,Ee)|0,u=u+Math.imul(ct,qe)|0,u=u+Math.imul(re,Ee)|0,S=S+Math.imul(re,qe)|0,v=v+Math.imul(et,ft)|0,u=u+Math.imul(et,yt)|0,u=u+Math.imul(Ye,ft)|0,S=S+Math.imul(Ye,yt)|0,v=v+Math.imul(Re,dt)|0,u=u+Math.imul(Re,ae)|0,u=u+Math.imul(Le,dt)|0,S=S+Math.imul(Le,ae)|0,v=v+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,v=v+Math.imul(He,Te)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Te)|0,S=S+Math.imul(nt,Ne)|0,v=v+Math.imul(Ge,gt)|0,u=u+Math.imul(Ge,xt)|0,u=u+Math.imul(je,gt)|0,S=S+Math.imul(je,xt)|0,v=v+Math.imul(Ze,wt)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,wt)|0,S=S+Math.imul(Pe,kt)|0,v=v+Math.imul(_e,Dt)|0,u=u+Math.imul(_e,Ot)|0,u=u+Math.imul(Ae,Dt)|0,S=S+Math.imul(Ae,Ot)|0;var on=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(on>>>26)|0,on&=67108863,v=Math.imul(q,Ee),u=Math.imul(q,qe),u=u+Math.imul(ue,Ee)|0,S=Math.imul(ue,qe),v=v+Math.imul(ct,ft)|0,u=u+Math.imul(ct,yt)|0,u=u+Math.imul(re,ft)|0,S=S+Math.imul(re,yt)|0,v=v+Math.imul(et,dt)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,dt)|0,S=S+Math.imul(Ye,ae)|0,v=v+Math.imul(Re,X)|0,u=u+Math.imul(Re,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,v=v+Math.imul(fe,Te)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Te)|0,S=S+Math.imul(oe,Ne)|0,v=v+Math.imul(He,gt)|0,u=u+Math.imul(He,xt)|0,u=u+Math.imul(nt,gt)|0,S=S+Math.imul(nt,xt)|0,v=v+Math.imul(Ge,wt)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,wt)|0,S=S+Math.imul(je,kt)|0,v=v+Math.imul(Ze,Dt)|0,u=u+Math.imul(Ze,Ot)|0,u=u+Math.imul(Pe,Dt)|0,S=S+Math.imul(Pe,Ot)|0;var Kt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(q,ft),u=Math.imul(q,yt),u=u+Math.imul(ue,ft)|0,S=Math.imul(ue,yt),v=v+Math.imul(ct,dt)|0,u=u+Math.imul(ct,ae)|0,u=u+Math.imul(re,dt)|0,S=S+Math.imul(re,ae)|0,v=v+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,v=v+Math.imul(Re,Te)|0,u=u+Math.imul(Re,Ne)|0,u=u+Math.imul(Le,Te)|0,S=S+Math.imul(Le,Ne)|0,v=v+Math.imul(fe,gt)|0,u=u+Math.imul(fe,xt)|0,u=u+Math.imul(oe,gt)|0,S=S+Math.imul(oe,xt)|0,v=v+Math.imul(He,wt)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,wt)|0,S=S+Math.imul(nt,kt)|0,v=v+Math.imul(Ge,Dt)|0,u=u+Math.imul(Ge,Ot)|0,u=u+Math.imul(je,Dt)|0,S=S+Math.imul(je,Ot)|0;var Tn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,v=Math.imul(q,dt),u=Math.imul(q,ae),u=u+Math.imul(ue,dt)|0,S=Math.imul(ue,ae),v=v+Math.imul(ct,X)|0,u=u+Math.imul(ct,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,v=v+Math.imul(et,Te)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Te)|0,S=S+Math.imul(Ye,Ne)|0,v=v+Math.imul(Re,gt)|0,u=u+Math.imul(Re,xt)|0,u=u+Math.imul(Le,gt)|0,S=S+Math.imul(Le,xt)|0,v=v+Math.imul(fe,wt)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,wt)|0,S=S+Math.imul(oe,kt)|0,v=v+Math.imul(He,Dt)|0,u=u+Math.imul(He,Ot)|0,u=u+Math.imul(nt,Dt)|0,S=S+Math.imul(nt,Ot)|0;var Rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),v=v+Math.imul(ct,Te)|0,u=u+Math.imul(ct,Ne)|0,u=u+Math.imul(re,Te)|0,S=S+Math.imul(re,Ne)|0,v=v+Math.imul(et,gt)|0,u=u+Math.imul(et,xt)|0,u=u+Math.imul(Ye,gt)|0,S=S+Math.imul(Ye,xt)|0,v=v+Math.imul(Re,wt)|0,u=u+Math.imul(Re,kt)|0,u=u+Math.imul(Le,wt)|0,S=S+Math.imul(Le,kt)|0,v=v+Math.imul(fe,Dt)|0,u=u+Math.imul(fe,Ot)|0,u=u+Math.imul(oe,Dt)|0,S=S+Math.imul(oe,Ot)|0;var En=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(q,Te),u=Math.imul(q,Ne),u=u+Math.imul(ue,Te)|0,S=Math.imul(ue,Ne),v=v+Math.imul(ct,gt)|0,u=u+Math.imul(ct,xt)|0,u=u+Math.imul(re,gt)|0,S=S+Math.imul(re,xt)|0,v=v+Math.imul(et,wt)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,wt)|0,S=S+Math.imul(Ye,kt)|0,v=v+Math.imul(Re,Dt)|0,u=u+Math.imul(Re,Ot)|0,u=u+Math.imul(Le,Dt)|0,S=S+Math.imul(Le,Ot)|0;var un=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,v=Math.imul(q,gt),u=Math.imul(q,xt),u=u+Math.imul(ue,gt)|0,S=Math.imul(ue,xt),v=v+Math.imul(ct,wt)|0,u=u+Math.imul(ct,kt)|0,u=u+Math.imul(re,wt)|0,S=S+Math.imul(re,kt)|0,v=v+Math.imul(et,Dt)|0,u=u+Math.imul(et,Ot)|0,u=u+Math.imul(Ye,Dt)|0,S=S+Math.imul(Ye,Ot)|0;var $t=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,v=Math.imul(q,wt),u=Math.imul(q,kt),u=u+Math.imul(ue,wt)|0,S=Math.imul(ue,kt),v=v+Math.imul(ct,Dt)|0,u=u+Math.imul(ct,Ot)|0,u=u+Math.imul(re,Dt)|0,S=S+Math.imul(re,Ot)|0;var Bt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,v=Math.imul(q,Dt),u=Math.imul(q,Ot),u=u+Math.imul(ue,Dt)|0,S=Math.imul(ue,Ot);var Mn=(N+v|0)+((u&8191)<<13)|0;return N=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,L[0]=pe,L[1]=De,L[2]=$e,L[3]=Qe,L[4]=Be,L[5]=Tt,L[6]=zt,L[7]=At,L[8]=Ht,L[9]=rn,L[10]=on,L[11]=Kt,L[12]=Tn,L[13]=Rn,L[14]=En,L[15]=un,L[16]=$t,L[17]=Bt,L[18]=Mn,N!==0&&(L[19]=N,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var L=R;R=0;for(var N=M&67108863,v=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=v;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;L=L+(se/67108864|0)|0,me=me+N|0,N=me&67108863,L=L+(me>>>26)|0,R+=L>>>26,L&=67108863}p.words[T]=N,M=L,L=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,L=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=L>>>26,this.words[R]=L&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=I(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var L=0;for(T=0;T<this.length;T++){var N=this.words[T]&R,v=(this.words[T]|0)-N<<p;this.words[T]=v|L,L=N>>>26-p}L&&(this.words[T]=L,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,L=Math.min((a-T)/26,this.length),N=67108863^67108863>>>T<<T,v=M;if(R-=L,R=Math.max(0,R),v){for(var u=0;u<L;u++)v.words[u]=this.words[u];v.length=L}if(L!==0)if(this.length>L)for(this.length-=L,u=0;u<this.length;u++)this.words[u]=this.words[u+L];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&N}return v&&S!==0&&(v.words[v.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var L,N=0;for(T=0;T<a.length;T++){L=(this.words[T+M]|0)+N;var v=(a.words[T]|0)*p;L-=v&67108863,N=(L>>26)-(v/67108864|0),this.words[T+M]=L&67108863}for(;T<this.length-M;T++)L=(this.words[T+M]|0)+N,N=L>>26,this.words[T+M]=L&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,T=0;T<this.length;T++)L=-(this.words[T]|0)+N,N=L>>26,this.words[T]=L&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,L=T.words[T.length-1]|0,N=this._countBits(L);M=26-N,M!==0&&(T=T.ushln(M),R.iushln(M),L=T.words[T.length-1]|0);var v=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=v+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,v);W.negative===0&&(R=W,u&&(u.words[v]=1));for(var $=v-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/L|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,L;return this.negative!==0&&a.negative===0?(L=this.neg().divmod(a,p),p!=="mod"&&(R=L.div.neg()),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(L=this.divmod(a.neg(),p),p!=="mod"&&(R=L.div.neg()),{div:R,mod:L.mod}):(this.negative&a.negative)!==0?(L=this.neg().divmod(a.neg(),p),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:L.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),L=M.cmp(R);return L<0||T===1&&L===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=new s(0),N=new s(1),v=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++v;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(L.isOdd()||N.isOdd())&&(L.iadd(u),N.isub(S)),L.iushrn(1),N.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(L),T.isub(N)):(M.isub(p),L.isub(R),N.isub(T))}return{a:L,b:N,gcd:M.iushln(v)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var N=0,v=1;(p.words[0]&v)===0&&N<26;++N,v<<=1);if(N>0)for(p.iushrn(N);N-- >0;)R.isOdd()&&R.iadd(L),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(L),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var L=p;p=M,M=L}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,L=M;T!==0&&L<this.length;L++){var N=this.words[L]|0;N+=T,T=N>>>26,N&=67108863,this.words[L]=N}return T!==0&&(this.words[L]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var L=a.words[9];for(p.words[p.length++]=L&M,T=10;T<a.length;T++){var N=a.words[T]|0;a.words[T-10]=(N&M)<<4|L>>>22,L=N}L>>>=22,a.words[T-10]=L,L===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var L=new s(1).toRed(this),N=L.redNeg(),v=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,v).cmp(N)!==0;)u.redIAdd(N);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(L)!==0;){for(var me=$,_e=0;me.cmp(L)!==0;_e++)me=me.redSqr();n(_e<se);var Ae=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(Ae),S=Ae.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var L=R[0],N=0,v=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(L!==R[0]&&(L=this.sqr(L)),$===0&&N===0){v=0;continue}N<<=1,N|=$,v++,!(v!==M&&(T!==0||W!==0))&&(L=this.mul(L,R[N]),v=0,N=0)}u=26}return L},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,w8)})(o_)),o_.exports}var x8=_8();const nC=Xa(x8);var Kv={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var rC;function YA(){return rC||(rC=1,(function(r,e){var t=I0(),n=t.Buffer;function i(o,l){for(var c in o)l[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,l,c){return n(o,l,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,l,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,l,c)},s.alloc=function(o,l,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var d=n(o);return l!==void 0?typeof c=="string"?d.fill(l,c):d.fill(l):d.fill(0),d},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(Kv,Kv.exports)),Kv.exports}var HS,iC;function S8(){if(iC)return HS;iC=1;var r=YA().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function _(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=r.from(P)),!r.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var I=0,C=0,D=0,k=P.length;D!==k&&P[D]===0;)D++,I++;for(var F=(k-D)*y+1>>>0,Q=new Uint8Array(F);D!==k;){for(var G=P[D],Y=0,ee=F-1;(G!==0||Y<C)&&ee!==-1;ee--,Y++)G+=256*Q[ee]>>>0,Q[ee]=G%c>>>0,G=G/c>>>0;if(G!==0)throw new Error("Non-zero carry");C=Y,D++}for(var te=F-C;te!==F&&Q[te]===0;)te++;for(var U=d.repeat(I);te<F;++te)U+=t.charAt(Q[te]);return U}function x(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return r.alloc(0);for(var I=0,C=0,D=0;P[I]===d;)C++,I++;for(var k=(P.length-I)*h+1>>>0,F=new Uint8Array(k);I<P.length;){var Q=P.charCodeAt(I);if(Q>255)return;var G=n[Q];if(G===255)return;for(var Y=0,ee=k-1;(G!==0||Y<D)&&ee!==-1;ee--,Y++)G+=c*F[ee]>>>0,F[ee]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");D=Y,I++}for(var te=k-D;te!==k&&F[te]===0;)te++;var U=r.allocUnsafe(C+(k-te));U.fill(0,0,C);for(var V=C;te!==k;)U[V++]=F[te++];return U}function A(P){var I=x(P);if(I)return I;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:x,decode:A}}return HS=e,HS}var GS,sC;function M8(){if(sC)return GS;sC=1;var r=S8(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return GS=r(e),GS}var E8=M8();const ds=Xa(E8),oC=xk;var Er={},a_={exports:{}},b8=a_.exports,aC;function A8(){return aC||(aC=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=I0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,L,N=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)L=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)L=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,L=0,N;if(M==="be")for(R=a.length-1;R>=p;R-=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8;else{var v=a.length-p;for(R=v%2===0?p+1:p;R<a.length;R+=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,L=Math.min(E.length,p),N=a;N<L;N++){var v=E.charCodeAt(N)-48;R*=M,v>=49?T=v-49+10:v>=17?T=v-17+10:T=v,n(v>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var L=a.length-M,N=L%R,v=Math.min(L,L-N)+M,u=0,S=M;S<v;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(N!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<N;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{s.prototype.inspect=y}else s.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,L=0;L<this.length;L++){var N=this.words[L],v=((N<<R|T)&16777215).toString(16);T=N>>>24-R&16777215,R+=2,R>=26&&(R-=26,L--),T!==0||L!==this.length-1?M=_[6-v.length]+v+M:M=v+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var P=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var L=P(a,T),N=p==="le"?"LE":"BE";return this["_toArrayLike"+N](L,R),L},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M++]=N&255,M<a.length&&(a[M++]=N>>8&255),M<a.length&&(a[M++]=N>>16&255),L===6?(M<a.length&&(a[M++]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M--]=N&255,M>=0&&(a[M--]=N>>8&255),M>=0&&(a[M--]=N>>16&255),L===6?(M>=0&&(a[M--]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function I(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,L=0;L<R.length;L++)p=(M.words[L]|0)+(R.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;for(;T!==0&&L<M.length;L++)p=(M.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;L<M.length;L++)this.words[L]=M.words[L];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var L=0,N=0;N<T.length;N++)p=(R.words[N]|0)-(T.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;for(;L!==0&&N<R.length;N++)p=(R.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;if(L===0&&N<R.length&&R!==this)for(;N<R.length;N++)this.words[N]=R.words[N];return this.length=Math.max(this.length,N),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,L=R*T,N=L&67108863,v=L/67108864|0;p.words[0]=N;for(var u=1;u<M;u++){for(var S=v>>>26,W=v&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,L=R*T+W,S+=L/67108864|0,W=L&67108863}p.words[u]=W|0,v=S|0}return v!==0?p.words[u]=v|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,L=M.words,N=0,v,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,Ae=me>>>13,_t=R[2]|0,Ze=_t&8191,Pe=_t>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,vt=R[4]|0,He=vt&8191,nt=vt>>>13,Pt=R[5]|0,fe=Pt&8191,oe=Pt>>>13,Oe=R[6]|0,Re=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,bt=R[8]|0,ct=bt&8191,re=bt>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,we=T[0]|0,ye=we&8191,le=we>>>13,Xe=T[1]|0,de=Xe&8191,Ce=Xe>>>13,Ue=T[2]|0,Ee=Ue&8191,qe=Ue>>>13,Ct=T[3]|0,ft=Ct&8191,yt=Ct>>>13,Sn=T[4]|0,dt=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Te=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,gt=dn&8191,xt=dn>>>13,Dn=T[8]|0,wt=Dn&8191,kt=Dn>>>13,Pr=T[9]|0,Dt=Pr&8191,Ot=Pr>>>13;M.negative=a.negative^p.negative,M.length=19,v=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,v=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(Ae,ye)|0,S=Math.imul(Ae,le),v=v+Math.imul($,de)|0,u=u+Math.imul($,Ce)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Ce)|0;var De=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),v=v+Math.imul(_e,de)|0,u=u+Math.imul(_e,Ce)|0,u=u+Math.imul(Ae,de)|0,S=S+Math.imul(Ae,Ce)|0,v=v+Math.imul($,Ee)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Ee)|0,S=S+Math.imul(se,qe)|0;var $e=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,v=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),v=v+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Ce)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Ce)|0,v=v+Math.imul(_e,Ee)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(Ae,Ee)|0,S=S+Math.imul(Ae,qe)|0,v=v+Math.imul($,ft)|0,u=u+Math.imul($,yt)|0,u=u+Math.imul(se,ft)|0,S=S+Math.imul(se,yt)|0;var Qe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,v=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),v=v+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Ce)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Ce)|0,v=v+Math.imul(Ze,Ee)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Ee)|0,S=S+Math.imul(Pe,qe)|0,v=v+Math.imul(_e,ft)|0,u=u+Math.imul(_e,yt)|0,u=u+Math.imul(Ae,ft)|0,S=S+Math.imul(Ae,yt)|0,v=v+Math.imul($,dt)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,dt)|0,S=S+Math.imul(se,ae)|0;var Be=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),v=v+Math.imul(He,de)|0,u=u+Math.imul(He,Ce)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Ce)|0,v=v+Math.imul(Ge,Ee)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Ee)|0,S=S+Math.imul(je,qe)|0,v=v+Math.imul(Ze,ft)|0,u=u+Math.imul(Ze,yt)|0,u=u+Math.imul(Pe,ft)|0,S=S+Math.imul(Pe,yt)|0,v=v+Math.imul(_e,dt)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(Ae,dt)|0,S=S+Math.imul(Ae,ae)|0,v=v+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var Tt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(Re,ye),u=Math.imul(Re,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),v=v+Math.imul(fe,de)|0,u=u+Math.imul(fe,Ce)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Ce)|0,v=v+Math.imul(He,Ee)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Ee)|0,S=S+Math.imul(nt,qe)|0,v=v+Math.imul(Ge,ft)|0,u=u+Math.imul(Ge,yt)|0,u=u+Math.imul(je,ft)|0,S=S+Math.imul(je,yt)|0,v=v+Math.imul(Ze,dt)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,dt)|0,S=S+Math.imul(Pe,ae)|0,v=v+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(Ae,X)|0,S=S+Math.imul(Ae,he)|0,v=v+Math.imul($,Te)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Te)|0,S=S+Math.imul(se,Ne)|0;var zt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(zt>>>26)|0,zt&=67108863,v=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),v=v+Math.imul(Re,de)|0,u=u+Math.imul(Re,Ce)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Ce)|0,v=v+Math.imul(fe,Ee)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Ee)|0,S=S+Math.imul(oe,qe)|0,v=v+Math.imul(He,ft)|0,u=u+Math.imul(He,yt)|0,u=u+Math.imul(nt,ft)|0,S=S+Math.imul(nt,yt)|0,v=v+Math.imul(Ge,dt)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,dt)|0,S=S+Math.imul(je,ae)|0,v=v+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,v=v+Math.imul(_e,Te)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(Ae,Te)|0,S=S+Math.imul(Ae,Ne)|0,v=v+Math.imul($,gt)|0,u=u+Math.imul($,xt)|0,u=u+Math.imul(se,gt)|0,S=S+Math.imul(se,xt)|0;var At=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,v=Math.imul(ct,ye),u=Math.imul(ct,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),v=v+Math.imul(et,de)|0,u=u+Math.imul(et,Ce)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Ce)|0,v=v+Math.imul(Re,Ee)|0,u=u+Math.imul(Re,qe)|0,u=u+Math.imul(Le,Ee)|0,S=S+Math.imul(Le,qe)|0,v=v+Math.imul(fe,ft)|0,u=u+Math.imul(fe,yt)|0,u=u+Math.imul(oe,ft)|0,S=S+Math.imul(oe,yt)|0,v=v+Math.imul(He,dt)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,dt)|0,S=S+Math.imul(nt,ae)|0,v=v+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,v=v+Math.imul(Ze,Te)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Te)|0,S=S+Math.imul(Pe,Ne)|0,v=v+Math.imul(_e,gt)|0,u=u+Math.imul(_e,xt)|0,u=u+Math.imul(Ae,gt)|0,S=S+Math.imul(Ae,xt)|0,v=v+Math.imul($,wt)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,wt)|0,S=S+Math.imul(se,kt)|0;var Ht=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),v=v+Math.imul(ct,de)|0,u=u+Math.imul(ct,Ce)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Ce)|0,v=v+Math.imul(et,Ee)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Ee)|0,S=S+Math.imul(Ye,qe)|0,v=v+Math.imul(Re,ft)|0,u=u+Math.imul(Re,yt)|0,u=u+Math.imul(Le,ft)|0,S=S+Math.imul(Le,yt)|0,v=v+Math.imul(fe,dt)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,dt)|0,S=S+Math.imul(oe,ae)|0,v=v+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,v=v+Math.imul(Ge,Te)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Te)|0,S=S+Math.imul(je,Ne)|0,v=v+Math.imul(Ze,gt)|0,u=u+Math.imul(Ze,xt)|0,u=u+Math.imul(Pe,gt)|0,S=S+Math.imul(Pe,xt)|0,v=v+Math.imul(_e,wt)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(Ae,wt)|0,S=S+Math.imul(Ae,kt)|0,v=v+Math.imul($,Dt)|0,u=u+Math.imul($,Ot)|0,u=u+Math.imul(se,Dt)|0,S=S+Math.imul(se,Ot)|0;var rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(rn>>>26)|0,rn&=67108863,v=Math.imul(q,de),u=Math.imul(q,Ce),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Ce),v=v+Math.imul(ct,Ee)|0,u=u+Math.imul(ct,qe)|0,u=u+Math.imul(re,Ee)|0,S=S+Math.imul(re,qe)|0,v=v+Math.imul(et,ft)|0,u=u+Math.imul(et,yt)|0,u=u+Math.imul(Ye,ft)|0,S=S+Math.imul(Ye,yt)|0,v=v+Math.imul(Re,dt)|0,u=u+Math.imul(Re,ae)|0,u=u+Math.imul(Le,dt)|0,S=S+Math.imul(Le,ae)|0,v=v+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,v=v+Math.imul(He,Te)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Te)|0,S=S+Math.imul(nt,Ne)|0,v=v+Math.imul(Ge,gt)|0,u=u+Math.imul(Ge,xt)|0,u=u+Math.imul(je,gt)|0,S=S+Math.imul(je,xt)|0,v=v+Math.imul(Ze,wt)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,wt)|0,S=S+Math.imul(Pe,kt)|0,v=v+Math.imul(_e,Dt)|0,u=u+Math.imul(_e,Ot)|0,u=u+Math.imul(Ae,Dt)|0,S=S+Math.imul(Ae,Ot)|0;var on=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(on>>>26)|0,on&=67108863,v=Math.imul(q,Ee),u=Math.imul(q,qe),u=u+Math.imul(ue,Ee)|0,S=Math.imul(ue,qe),v=v+Math.imul(ct,ft)|0,u=u+Math.imul(ct,yt)|0,u=u+Math.imul(re,ft)|0,S=S+Math.imul(re,yt)|0,v=v+Math.imul(et,dt)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,dt)|0,S=S+Math.imul(Ye,ae)|0,v=v+Math.imul(Re,X)|0,u=u+Math.imul(Re,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,v=v+Math.imul(fe,Te)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Te)|0,S=S+Math.imul(oe,Ne)|0,v=v+Math.imul(He,gt)|0,u=u+Math.imul(He,xt)|0,u=u+Math.imul(nt,gt)|0,S=S+Math.imul(nt,xt)|0,v=v+Math.imul(Ge,wt)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,wt)|0,S=S+Math.imul(je,kt)|0,v=v+Math.imul(Ze,Dt)|0,u=u+Math.imul(Ze,Ot)|0,u=u+Math.imul(Pe,Dt)|0,S=S+Math.imul(Pe,Ot)|0;var Kt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(q,ft),u=Math.imul(q,yt),u=u+Math.imul(ue,ft)|0,S=Math.imul(ue,yt),v=v+Math.imul(ct,dt)|0,u=u+Math.imul(ct,ae)|0,u=u+Math.imul(re,dt)|0,S=S+Math.imul(re,ae)|0,v=v+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,v=v+Math.imul(Re,Te)|0,u=u+Math.imul(Re,Ne)|0,u=u+Math.imul(Le,Te)|0,S=S+Math.imul(Le,Ne)|0,v=v+Math.imul(fe,gt)|0,u=u+Math.imul(fe,xt)|0,u=u+Math.imul(oe,gt)|0,S=S+Math.imul(oe,xt)|0,v=v+Math.imul(He,wt)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,wt)|0,S=S+Math.imul(nt,kt)|0,v=v+Math.imul(Ge,Dt)|0,u=u+Math.imul(Ge,Ot)|0,u=u+Math.imul(je,Dt)|0,S=S+Math.imul(je,Ot)|0;var Tn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,v=Math.imul(q,dt),u=Math.imul(q,ae),u=u+Math.imul(ue,dt)|0,S=Math.imul(ue,ae),v=v+Math.imul(ct,X)|0,u=u+Math.imul(ct,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,v=v+Math.imul(et,Te)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Te)|0,S=S+Math.imul(Ye,Ne)|0,v=v+Math.imul(Re,gt)|0,u=u+Math.imul(Re,xt)|0,u=u+Math.imul(Le,gt)|0,S=S+Math.imul(Le,xt)|0,v=v+Math.imul(fe,wt)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,wt)|0,S=S+Math.imul(oe,kt)|0,v=v+Math.imul(He,Dt)|0,u=u+Math.imul(He,Ot)|0,u=u+Math.imul(nt,Dt)|0,S=S+Math.imul(nt,Ot)|0;var Rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),v=v+Math.imul(ct,Te)|0,u=u+Math.imul(ct,Ne)|0,u=u+Math.imul(re,Te)|0,S=S+Math.imul(re,Ne)|0,v=v+Math.imul(et,gt)|0,u=u+Math.imul(et,xt)|0,u=u+Math.imul(Ye,gt)|0,S=S+Math.imul(Ye,xt)|0,v=v+Math.imul(Re,wt)|0,u=u+Math.imul(Re,kt)|0,u=u+Math.imul(Le,wt)|0,S=S+Math.imul(Le,kt)|0,v=v+Math.imul(fe,Dt)|0,u=u+Math.imul(fe,Ot)|0,u=u+Math.imul(oe,Dt)|0,S=S+Math.imul(oe,Ot)|0;var En=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(q,Te),u=Math.imul(q,Ne),u=u+Math.imul(ue,Te)|0,S=Math.imul(ue,Ne),v=v+Math.imul(ct,gt)|0,u=u+Math.imul(ct,xt)|0,u=u+Math.imul(re,gt)|0,S=S+Math.imul(re,xt)|0,v=v+Math.imul(et,wt)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,wt)|0,S=S+Math.imul(Ye,kt)|0,v=v+Math.imul(Re,Dt)|0,u=u+Math.imul(Re,Ot)|0,u=u+Math.imul(Le,Dt)|0,S=S+Math.imul(Le,Ot)|0;var un=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,v=Math.imul(q,gt),u=Math.imul(q,xt),u=u+Math.imul(ue,gt)|0,S=Math.imul(ue,xt),v=v+Math.imul(ct,wt)|0,u=u+Math.imul(ct,kt)|0,u=u+Math.imul(re,wt)|0,S=S+Math.imul(re,kt)|0,v=v+Math.imul(et,Dt)|0,u=u+Math.imul(et,Ot)|0,u=u+Math.imul(Ye,Dt)|0,S=S+Math.imul(Ye,Ot)|0;var $t=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,v=Math.imul(q,wt),u=Math.imul(q,kt),u=u+Math.imul(ue,wt)|0,S=Math.imul(ue,kt),v=v+Math.imul(ct,Dt)|0,u=u+Math.imul(ct,Ot)|0,u=u+Math.imul(re,Dt)|0,S=S+Math.imul(re,Ot)|0;var Bt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,v=Math.imul(q,Dt),u=Math.imul(q,Ot),u=u+Math.imul(ue,Dt)|0,S=Math.imul(ue,Ot);var Mn=(N+v|0)+((u&8191)<<13)|0;return N=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,L[0]=pe,L[1]=De,L[2]=$e,L[3]=Qe,L[4]=Be,L[5]=Tt,L[6]=zt,L[7]=At,L[8]=Ht,L[9]=rn,L[10]=on,L[11]=Kt,L[12]=Tn,L[13]=Rn,L[14]=En,L[15]=un,L[16]=$t,L[17]=Bt,L[18]=Mn,N!==0&&(L[19]=N,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var L=R;R=0;for(var N=M&67108863,v=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=v;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;L=L+(se/67108864|0)|0,me=me+N|0,N=me&67108863,L=L+(me>>>26)|0,R+=L>>>26,L&=67108863}p.words[T]=N,M=L,L=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,L=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=L>>>26,this.words[R]=L&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=I(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var L=0;for(T=0;T<this.length;T++){var N=this.words[T]&R,v=(this.words[T]|0)-N<<p;this.words[T]=v|L,L=N>>>26-p}L&&(this.words[T]=L,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,L=Math.min((a-T)/26,this.length),N=67108863^67108863>>>T<<T,v=M;if(R-=L,R=Math.max(0,R),v){for(var u=0;u<L;u++)v.words[u]=this.words[u];v.length=L}if(L!==0)if(this.length>L)for(this.length-=L,u=0;u<this.length;u++)this.words[u]=this.words[u+L];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&N}return v&&S!==0&&(v.words[v.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var L,N=0;for(T=0;T<a.length;T++){L=(this.words[T+M]|0)+N;var v=(a.words[T]|0)*p;L-=v&67108863,N=(L>>26)-(v/67108864|0),this.words[T+M]=L&67108863}for(;T<this.length-M;T++)L=(this.words[T+M]|0)+N,N=L>>26,this.words[T+M]=L&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,T=0;T<this.length;T++)L=-(this.words[T]|0)+N,N=L>>26,this.words[T]=L&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,L=T.words[T.length-1]|0,N=this._countBits(L);M=26-N,M!==0&&(T=T.ushln(M),R.iushln(M),L=T.words[T.length-1]|0);var v=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=v+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,v);W.negative===0&&(R=W,u&&(u.words[v]=1));for(var $=v-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/L|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,L;return this.negative!==0&&a.negative===0?(L=this.neg().divmod(a,p),p!=="mod"&&(R=L.div.neg()),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(L=this.divmod(a.neg(),p),p!=="mod"&&(R=L.div.neg()),{div:R,mod:L.mod}):(this.negative&a.negative)!==0?(L=this.neg().divmod(a.neg(),p),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:L.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),L=M.cmp(R);return L<0||T===1&&L===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=new s(0),N=new s(1),v=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++v;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(L.isOdd()||N.isOdd())&&(L.iadd(u),N.isub(S)),L.iushrn(1),N.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(L),T.isub(N)):(M.isub(p),L.isub(R),N.isub(T))}return{a:L,b:N,gcd:M.iushln(v)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var N=0,v=1;(p.words[0]&v)===0&&N<26;++N,v<<=1);if(N>0)for(p.iushrn(N);N-- >0;)R.isOdd()&&R.iadd(L),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(L),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var L=p;p=M,M=L}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,L=M;T!==0&&L<this.length;L++){var N=this.words[L]|0;N+=T,T=N>>>26,N&=67108863,this.words[L]=N}return T!==0&&(this.words[L]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var L=a.words[9];for(p.words[p.length++]=L&M,T=10;T<a.length;T++){var N=a.words[T]|0;a.words[T-10]=(N&M)<<4|L>>>22,L=N}L>>>=22,a.words[T-10]=L,L===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var L=new s(1).toRed(this),N=L.redNeg(),v=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,v).cmp(N)!==0;)u.redIAdd(N);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(L)!==0;){for(var me=$,_e=0;me.cmp(L)!==0;_e++)me=me.redSqr();n(_e<se);var Ae=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(Ae),S=Ae.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var L=R[0],N=0,v=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(L!==R[0]&&(L=this.sqr(L)),$===0&&N===0){v=0;continue}N<<=1,N|=$,v++,!(v!==M&&(T!==0||W!==0))&&(L=this.mul(L,R[N]),v=0,N=0)}u=26}return L},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,b8)})(a_)),a_.exports}var jS,lC;function T8(){if(lC)return jS;lC=1;var r=YA().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function _(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=r.from(P)),!r.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var I=0,C=0,D=0,k=P.length;D!==k&&P[D]===0;)D++,I++;for(var F=(k-D)*y+1>>>0,Q=new Uint8Array(F);D!==k;){for(var G=P[D],Y=0,ee=F-1;(G!==0||Y<C)&&ee!==-1;ee--,Y++)G+=256*Q[ee]>>>0,Q[ee]=G%c>>>0,G=G/c>>>0;if(G!==0)throw new Error("Non-zero carry");C=Y,D++}for(var te=F-C;te!==F&&Q[te]===0;)te++;for(var U=d.repeat(I);te<F;++te)U+=t.charAt(Q[te]);return U}function x(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return r.alloc(0);for(var I=0,C=0,D=0;P[I]===d;)C++,I++;for(var k=(P.length-I)*h+1>>>0,F=new Uint8Array(k);I<P.length;){var Q=P.charCodeAt(I);if(Q>255)return;var G=n[Q];if(G===255)return;for(var Y=0,ee=k-1;(G!==0||Y<D)&&ee!==-1;ee--,Y++)G+=c*F[ee]>>>0,F[ee]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");D=Y,I++}for(var te=k-D;te!==k&&F[te]===0;)te++;var U=r.allocUnsafe(C+(k-te));U.fill(0,0,C);for(var V=C;te!==k;)U[V++]=F[te++];return U}function A(P){var I=x(P);if(I)return I;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:x,decode:A}}return jS=e,jS}var qS,uC;function R8(){if(uC)return qS;uC=1;var r=T8(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return qS=r(e),qS}function Cu(r,e,t){return e<=r&&r<=t}function X1(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function C8(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var l=s&1023,c=o&1023;i.push(65536+(l<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function I8(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var N_=-1;function XA(r){this.tokens=[].slice.call(r)}XA.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():N_},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var m0=-1;function KS(r,e){if(r)throw TypeError("Decoder error");return e||65533}var P_="utf-8";function L_(r,e){if(!(this instanceof L_))return new L_(r,e);if(r=r!==void 0?String(r).toLowerCase():P_,r!==P_)throw new Error("Encoding not supported. Only utf-8 is supported");e=X1(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}L_.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=X1(t),this._streaming||(this._decoder=new N8({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new XA(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==m0);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===m0)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),I8(s)}};function k_(r,e){if(!(this instanceof k_))return new k_(r,e);if(r=r!==void 0?String(r).toLowerCase():P_,r!==P_)throw new Error("Encoding not supported. Only utf-8 is supported");e=X1(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}k_.prototype={encode:function(e,t){e=e?String(e):"",t=X1(t),this._streaming||(this._encoder=new P8(this._options)),this._streaming=!!t.stream;for(var n=[],i=new XA(C8(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==m0);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==m0;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function N8(r){var e=r.fatal,t=0,n=0,i=0,s=128,o=191;this.handler=function(l,c){if(c===N_&&i!==0)return i=0,KS(e);if(c===N_)return m0;if(i===0){if(Cu(c,0,127))return c;if(Cu(c,194,223))i=1,t=c-192;else if(Cu(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(Cu(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return KS(e);return t=t<<6*i,null}if(!Cu(c,s,o))return t=i=n=0,s=128,o=191,l.prepend(c),KS(e);if(s=128,o=191,n+=1,t+=c-128<<6*(i-n),n!==i)return null;var d=t;return t=i=n=0,d}}function P8(r){r.fatal,this.handler=function(e,t){if(t===N_)return m0;if(Cu(t,0,127))return t;var n,i;Cu(t,128,2047)?(n=1,i=192):Cu(t,2048,65535)?(n=2,i=224):Cu(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);s.push(128|o&63),n-=1}return s}}const L8=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:L_,TextEncoder:k_},Symbol.toStringTag,{value:"Module"})),k8=G1(L8);var cC;function O8(){if(cC)return Er;cC=1;var r=Er&&Er.__createBinding||(Object.create?(function(te,U,V,K){K===void 0&&(K=V),Object.defineProperty(te,K,{enumerable:!0,get:function(){return U[V]}})}):(function(te,U,V,K){K===void 0&&(K=V),te[K]=U[V]})),e=Er&&Er.__setModuleDefault||(Object.create?(function(te,U){Object.defineProperty(te,"default",{enumerable:!0,value:U})}):function(te,U){te.default=U}),t=Er&&Er.__decorate||function(te,U,V,K){var E=arguments.length,a=E<3?U:K===null?K=Object.getOwnPropertyDescriptor(U,V):K,p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(te,U,V,K);else for(var M=te.length-1;M>=0;M--)(p=te[M])&&(a=(E<3?p(a):E>3?p(U,V,a):p(U,V))||a);return E>3&&a&&Object.defineProperty(U,V,a),a},n=Er&&Er.__importStar||function(te){if(te&&te.__esModule)return te;var U={};if(te!=null)for(var V in te)V!=="default"&&Object.hasOwnProperty.call(te,V)&&r(U,te,V);return e(U,te),U},i=Er&&Er.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(Er,"__esModule",{value:!0}),Er.deserializeUnchecked=Er.deserialize=Er.serialize=Er.BinaryReader=Er.BinaryWriter=Er.BorshError=Er.baseDecode=Er.baseEncode=void 0;const s=i(A8()),o=i(R8()),l=n(k8),c=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,d=new c("utf-8",{fatal:!0});function h(te){return typeof te=="string"&&(te=qn.from(te,"utf8")),o.default.encode(qn.from(te))}Er.baseEncode=h;function y(te){return qn.from(o.default.decode(te))}Er.baseDecode=y;const _=1024;class x extends Error{constructor(U){super(U),this.fieldPath=[],this.originalMessage=U}addToFieldPath(U){this.fieldPath.splice(0,0,U),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Er.BorshError=x;class A{constructor(){this.buf=qn.alloc(_),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=qn.concat([this.buf,qn.alloc(_)]))}writeU8(U){this.maybeResize(),this.buf.writeUInt8(U,this.length),this.length+=1}writeU16(U){this.maybeResize(),this.buf.writeUInt16LE(U,this.length),this.length+=2}writeU32(U){this.maybeResize(),this.buf.writeUInt32LE(U,this.length),this.length+=4}writeU64(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",8)))}writeU128(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",16)))}writeU256(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",32)))}writeU512(U){this.maybeResize(),this.writeBuffer(qn.from(new s.default(U).toArray("le",64)))}writeBuffer(U){this.buf=qn.concat([qn.from(this.buf.subarray(0,this.length)),U,qn.alloc(_)]),this.length+=U.length}writeString(U){this.maybeResize();const V=qn.from(U,"utf8");this.writeU32(V.length),this.writeBuffer(V)}writeFixedArray(U){this.writeBuffer(qn.from(U))}writeArray(U,V){this.maybeResize(),this.writeU32(U.length);for(const K of U)this.maybeResize(),V(K)}toArray(){return this.buf.subarray(0,this.length)}}Er.BinaryWriter=A;function P(te,U,V){const K=V.value;V.value=function(...E){try{return K.apply(this,E)}catch(a){if(a instanceof RangeError){const p=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(p)>=0)throw new x("Reached the end of buffer when deserializing")}throw a}}}class I{constructor(U){this.buf=U,this.offset=0}readU8(){const U=this.buf.readUInt8(this.offset);return this.offset+=1,U}readU16(){const U=this.buf.readUInt16LE(this.offset);return this.offset+=2,U}readU32(){const U=this.buf.readUInt32LE(this.offset);return this.offset+=4,U}readU64(){const U=this.readBuffer(8);return new s.default(U,"le")}readU128(){const U=this.readBuffer(16);return new s.default(U,"le")}readU256(){const U=this.readBuffer(32);return new s.default(U,"le")}readU512(){const U=this.readBuffer(64);return new s.default(U,"le")}readBuffer(U){if(this.offset+U>this.buf.length)throw new x(`Expected buffer length ${U} isn't within bounds`);const V=this.buf.slice(this.offset,this.offset+U);return this.offset+=U,V}readString(){const U=this.readU32(),V=this.readBuffer(U);try{return d.decode(V)}catch(K){throw new x(`Error decoding UTF-8 string: ${K}`)}}readFixedArray(U){return new Uint8Array(this.readBuffer(U))}readArray(U){const V=this.readU32(),K=Array();for(let E=0;E<V;++E)K.push(U());return K}}t([P],I.prototype,"readU8",null),t([P],I.prototype,"readU16",null),t([P],I.prototype,"readU32",null),t([P],I.prototype,"readU64",null),t([P],I.prototype,"readU128",null),t([P],I.prototype,"readU256",null),t([P],I.prototype,"readU512",null),t([P],I.prototype,"readString",null),t([P],I.prototype,"readFixedArray",null),t([P],I.prototype,"readArray",null),Er.BinaryReader=I;function C(te){return te.charAt(0).toUpperCase()+te.slice(1)}function D(te,U,V,K,E){try{if(typeof K=="string")E[`write${C(K)}`](V);else if(K instanceof Array)if(typeof K[0]=="number"){if(V.length!==K[0])throw new x(`Expecting byte array of length ${K[0]}, but got ${V.length} bytes`);E.writeFixedArray(V)}else if(K.length===2&&typeof K[1]=="number"){if(V.length!==K[1])throw new x(`Expecting byte array of length ${K[1]}, but got ${V.length} bytes`);for(let a=0;a<K[1];a++)D(te,null,V[a],K[0],E)}else E.writeArray(V,a=>{D(te,U,a,K[0],E)});else if(K.kind!==void 0)switch(K.kind){case"option":{V==null?E.writeU8(0):(E.writeU8(1),D(te,U,V,K.type,E));break}case"map":{E.writeU32(V.size),V.forEach((a,p)=>{D(te,U,p,K.key,E),D(te,U,a,K.value,E)});break}default:throw new x(`FieldType ${K} unrecognized`)}else k(te,V,E)}catch(a){throw a instanceof x&&a.addToFieldPath(U),a}}function k(te,U,V){if(typeof U.borshSerialize=="function"){U.borshSerialize(V);return}const K=te.get(U.constructor);if(!K)throw new x(`Class ${U.constructor.name} is missing in schema`);if(K.kind==="struct")K.fields.map(([E,a])=>{D(te,E,U[E],a,V)});else if(K.kind==="enum"){const E=U[K.field];for(let a=0;a<K.values.length;++a){const[p,M]=K.values[a];if(p===E){V.writeU8(a),D(te,p,U[p],M,V);break}}}else throw new x(`Unexpected schema kind: ${K.kind} for ${U.constructor.name}`)}function F(te,U,V=A){const K=new V;return k(te,U,K),K.toArray()}Er.serialize=F;function Q(te,U,V,K){try{if(typeof V=="string")return K[`read${C(V)}`]();if(V instanceof Array){if(typeof V[0]=="number")return K.readFixedArray(V[0]);if(typeof V[1]=="number"){const E=[];for(let a=0;a<V[1];a++)E.push(Q(te,null,V[0],K));return E}else return K.readArray(()=>Q(te,U,V[0],K))}if(V.kind==="option")return K.readU8()?Q(te,U,V.type,K):void 0;if(V.kind==="map"){let E=new Map;const a=K.readU32();for(let p=0;p<a;p++){const M=Q(te,U,V.key,K),R=Q(te,U,V.value,K);E.set(M,R)}return E}return G(te,V,K)}catch(E){throw E instanceof x&&E.addToFieldPath(U),E}}function G(te,U,V){if(typeof U.borshDeserialize=="function")return U.borshDeserialize(V);const K=te.get(U);if(!K)throw new x(`Class ${U.name} is missing in schema`);if(K.kind==="struct"){const E={};for(const[a,p]of te.get(U).fields)E[a]=Q(te,a,p,V);return new U(E)}if(K.kind==="enum"){const E=V.readU8();if(E>=K.values.length)throw new x(`Enum index: ${E} is out of range`);const[a,p]=K.values[E],M=Q(te,a,p,V);return new U({[a]:M})}throw new x(`Unexpected schema kind: ${K.kind} for ${U.constructor.name}`)}function Y(te,U,V,K=I){const E=new K(V),a=G(te,U,E);if(E.offset<V.length)throw new x(`Unexpected ${V.length-E.offset} bytes after deserialized data`);return a}Er.deserialize=Y;function ee(te,U,V,K=I){const E=new K(V);return G(te,U,E)}return Er.deserializeUnchecked=ee,Er}var YS=O8(),at={},fC;function D8(){if(fC)return at;fC=1,Object.defineProperty(at,"__esModule",{value:!0}),at.s16=at.s8=at.nu64be=at.u48be=at.u40be=at.u32be=at.u24be=at.u16be=at.nu64=at.u48=at.u40=at.u32=at.u24=at.u16=at.u8=at.offset=at.greedy=at.Constant=at.UTF8=at.CString=at.Blob=at.Boolean=at.BitField=at.BitStructure=at.VariantLayout=at.Union=at.UnionLayoutDiscriminator=at.UnionDiscriminator=at.Structure=at.Sequence=at.DoubleBE=at.Double=at.FloatBE=at.Float=at.NearInt64BE=at.NearInt64=at.NearUInt64BE=at.NearUInt64=at.IntBE=at.Int=at.UIntBE=at.UInt=at.OffsetLayout=at.GreedyCount=at.ExternalLayout=at.bindConstructorLayout=at.nameWithProperty=at.Layout=at.uint8ArrayToBuffer=at.checkUint8Array=void 0,at.constant=at.utf8=at.cstr=at.blob=at.unionLayoutDiscriminator=at.union=at.seq=at.bits=at.struct=at.f64be=at.f64=at.f32be=at.f32=at.ns64be=at.s48be=at.s40be=at.s32be=at.s24be=at.s16be=at.ns64=at.s48=at.s40=at.s32=at.s24=void 0;const r=I0();function e(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}at.checkUint8Array=e;function t(u){return e(u),r.Buffer.from(u.buffer,u.byteOffset,u.length)}at.uint8ArrayToBuffer=t;class n{constructor(S,W){if(!Number.isInteger(S))throw new TypeError("span must be an integer");this.span=S,this.property=W}makeDestinationObject(){return{}}getSpan(S,W){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(S){const W=Object.create(this.constructor.prototype);return Object.assign(W,this),W.property=S,W}fromArray(S){}}at.Layout=n;function i(u,S){return S.property?u+"["+S.property+"]":u}at.nameWithProperty=i;function s(u,S){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(S&&S instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(S,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=S,S.boundConstructor_=u,S.makeDestinationObject=(()=>new u),Object.defineProperty(u.prototype,"encode",{value(W,$){return S.encode(this,W,$)},writable:!0}),Object.defineProperty(u,"decode",{value(W,$){return S.decode(W,$)},writable:!0})}at.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}at.ExternalLayout=o;class l extends o{constructor(S=1,W){if(!Number.isInteger(S)||0>=S)throw new TypeError("elementSpan must be a (positive) integer");super(-1,W),this.elementSpan=S}isCount(){return!0}decode(S,W=0){e(S);const $=S.length-W;return Math.floor($/this.elementSpan)}encode(S,W,$){return 0}}at.GreedyCount=l;class c extends o{constructor(S,W=0,$){if(!(S instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(W))throw new TypeError("offset must be integer or undefined");super(S.span,$||S.property),this.layout=S,this.offset=W}isCount(){return this.layout instanceof d||this.layout instanceof h}decode(S,W=0){return this.layout.decode(S,W+this.offset)}encode(S,W,$=0){return this.layout.encode(S,W,$+this.offset)}}at.OffsetLayout=c;class d extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readUIntLE(W,this.span)}encode(S,W,$=0){return t(W).writeUIntLE(S,$,this.span),this.span}}at.UInt=d;class h extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readUIntBE(W,this.span)}encode(S,W,$=0){return t(W).writeUIntBE(S,$,this.span),this.span}}at.UIntBE=h;class y extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readIntLE(W,this.span)}encode(S,W,$=0){return t(W).writeIntLE(S,$,this.span),this.span}}at.Int=y;class _ extends n{constructor(S,W){if(super(S,W),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(S,W=0){return t(S).readIntBE(W,this.span)}encode(S,W,$=0){return t(W).writeIntBE(S,$,this.span),this.span}}at.IntBE=_;const x=Math.pow(2,32);function A(u){const S=Math.floor(u/x),W=u-S*x;return{hi32:S,lo32:W}}function P(u,S){return u*x+S}class I extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readUInt32LE(W),me=$.readUInt32LE(W+4);return P(me,se)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeUInt32LE(se.lo32,$),me.writeUInt32LE(se.hi32,$+4),8}}at.NearUInt64=I;class C extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readUInt32BE(W),me=$.readUInt32BE(W+4);return P(se,me)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeUInt32BE(se.hi32,$),me.writeUInt32BE(se.lo32,$+4),8}}at.NearUInt64BE=C;class D extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readUInt32LE(W),me=$.readInt32LE(W+4);return P(me,se)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeUInt32LE(se.lo32,$),me.writeInt32LE(se.hi32,$+4),8}}at.NearInt64=D;class k extends n{constructor(S){super(8,S)}decode(S,W=0){const $=t(S),se=$.readInt32BE(W),me=$.readUInt32BE(W+4);return P(se,me)}encode(S,W,$=0){const se=A(S),me=t(W);return me.writeInt32BE(se.hi32,$),me.writeUInt32BE(se.lo32,$+4),8}}at.NearInt64BE=k;class F extends n{constructor(S){super(4,S)}decode(S,W=0){return t(S).readFloatLE(W)}encode(S,W,$=0){return t(W).writeFloatLE(S,$),4}}at.Float=F;class Q extends n{constructor(S){super(4,S)}decode(S,W=0){return t(S).readFloatBE(W)}encode(S,W,$=0){return t(W).writeFloatBE(S,$),4}}at.FloatBE=Q;class G extends n{constructor(S){super(8,S)}decode(S,W=0){return t(S).readDoubleLE(W)}encode(S,W,$=0){return t(W).writeDoubleLE(S,$),8}}at.Double=G;class Y extends n{constructor(S){super(8,S)}decode(S,W=0){return t(S).readDoubleBE(W)}encode(S,W,$=0){return t(W).writeDoubleBE(S,$),8}}at.DoubleBE=Y;class ee extends n{constructor(S,W,$){if(!(S instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(W instanceof o&&W.isCount()||Number.isInteger(W)&&0<=W))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let se=-1;!(W instanceof o)&&0<S.span&&(se=W*S.span),super(se,$),this.elementLayout=S,this.count=W}getSpan(S,W=0){if(0<=this.span)return this.span;let $=0,se=this.count;if(se instanceof o&&(se=se.decode(S,W)),0<this.elementLayout.span)$=se*this.elementLayout.span;else{let me=0;for(;me<se;)$+=this.elementLayout.getSpan(S,W+$),++me}return $}decode(S,W=0){const $=[];let se=0,me=this.count;for(me instanceof o&&(me=me.decode(S,W));se<me;)$.push(this.elementLayout.decode(S,W)),W+=this.elementLayout.getSpan(S,W),se+=1;return $}encode(S,W,$=0){const se=this.elementLayout,me=S.reduce((_e,Ae)=>_e+se.encode(Ae,W,$+_e),0);return this.count instanceof o&&this.count.encode(S.length,W,$),me}}at.Sequence=ee;class te extends n{constructor(S,W,$){if(!(Array.isArray(S)&&S.reduce((me,_e)=>me&&_e instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof W=="boolean"&&$===void 0&&($=W,W=void 0);for(const me of S)if(0>me.span&&me.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let se=-1;try{se=S.reduce((me,_e)=>me+_e.getSpan(),0)}catch{}super(se,W),this.fields=S,this.decodePrefixes=!!$}getSpan(S,W=0){if(0<=this.span)return this.span;let $=0;try{$=this.fields.reduce((se,me)=>{const _e=me.getSpan(S,W);return W+=_e,se+_e},0)}catch{throw new RangeError("indeterminate span")}return $}decode(S,W=0){e(S);const $=this.makeDestinationObject();for(const se of this.fields)if(se.property!==void 0&&($[se.property]=se.decode(S,W)),W+=se.getSpan(S,W),this.decodePrefixes&&S.length===W)break;return $}encode(S,W,$=0){const se=$;let me=0,_e=0;for(const Ae of this.fields){let _t=Ae.span;if(_e=0<_t?_t:0,Ae.property!==void 0){const Ze=S[Ae.property];Ze!==void 0&&(_e=Ae.encode(Ze,W,$),0>_t&&(_t=Ae.getSpan(W,$)))}me=$,$+=_t}return me+_e-se}fromArray(S){const W=this.makeDestinationObject();for(const $ of this.fields)$.property!==void 0&&0<S.length&&(W[$.property]=S.shift());return W}layoutFor(S){if(typeof S!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===S)return W}offsetOf(S){if(typeof S!="string")throw new TypeError("property must be string");let W=0;for(const $ of this.fields){if($.property===S)return W;0>$.span?W=-1:0<=W&&(W+=$.span)}}}at.Structure=te;class U{constructor(S){this.property=S}decode(S,W){throw new Error("UnionDiscriminator is abstract")}encode(S,W,$){throw new Error("UnionDiscriminator is abstract")}}at.UnionDiscriminator=U;class V extends U{constructor(S,W){if(!(S instanceof o&&S.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(W||S.property||"variant"),this.layout=S}decode(S,W){return this.layout.decode(S,W)}encode(S,W,$){return this.layout.encode(S,W,$)}}at.UnionLayoutDiscriminator=V;class K extends n{constructor(S,W,$){let se;if(S instanceof d||S instanceof h)se=new V(new c(S));else if(S instanceof o&&S.isCount())se=new V(S);else if(S instanceof U)se=S;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(W===void 0&&(W=null),!(W===null||W instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(W!==null){if(0>W.span)throw new Error("defaultLayout must have constant span");W.property===void 0&&(W=W.replicate("content"))}let me=-1;W&&(me=W.span,0<=me&&(S instanceof d||S instanceof h)&&(me+=se.layout.span)),super(me,$),this.discriminator=se,this.usesPrefixDiscriminator=S instanceof d||S instanceof h,this.defaultLayout=W,this.registry={};let _e=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(Ae){return _e(Ae)},this.configGetSourceVariant=function(Ae){_e=Ae.bind(this)}}getSpan(S,W=0){if(0<=this.span)return this.span;const $=this.getVariant(S,W);if(!$)throw new Error("unable to determine span for unrecognized variant");return $.getSpan(S,W)}defaultGetSourceVariant(S){if(Object.prototype.hasOwnProperty.call(S,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(S,this.defaultLayout.property))return;const W=this.registry[S[this.discriminator.property]];if(W&&(!W.layout||W.property&&Object.prototype.hasOwnProperty.call(S,W.property)))return W}else for(const W in this.registry){const $=this.registry[W];if($.property&&Object.prototype.hasOwnProperty.call(S,$.property))return $}throw new Error("unable to infer src variant")}decode(S,W=0){let $;const se=this.discriminator,me=se.decode(S,W),_e=this.registry[me];if(_e===void 0){const Ae=this.defaultLayout;let _t=0;this.usesPrefixDiscriminator&&(_t=se.layout.span),$=this.makeDestinationObject(),$[se.property]=me,$[Ae.property]=Ae.decode(S,W+_t)}else $=_e.decode(S,W);return $}encode(S,W,$=0){const se=this.getSourceVariant(S);if(se===void 0){const me=this.discriminator,_e=this.defaultLayout;let Ae=0;return this.usesPrefixDiscriminator&&(Ae=me.layout.span),me.encode(S[me.property],W,$),Ae+_e.encode(S[_e.property],W,$+Ae)}return se.encode(S,W,$)}addVariant(S,W,$){const se=new E(this,S,W,$);return this.registry[S]=se,se}getVariant(S,W=0){let $;return S instanceof Uint8Array?$=this.discriminator.decode(S,W):$=S,this.registry[$]}}at.Union=K;class E extends n{constructor(S,W,$,se){if(!(S instanceof K))throw new TypeError("union must be a Union");if(!Number.isInteger(W)||0>W)throw new TypeError("variant must be a (non-negative) integer");if(typeof $=="string"&&se===void 0&&(se=$,$=null),$){if(!($ instanceof n))throw new TypeError("layout must be a Layout");if(S.defaultLayout!==null&&0<=$.span&&$.span>S.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof se!="string")throw new TypeError("variant must have a String property")}let me=S.span;0>S.span&&(me=$?$.span:0,0<=me&&S.usesPrefixDiscriminator&&(me+=S.discriminator.layout.span)),super(me,se),this.union=S,this.variant=W,this.layout=$||null}getSpan(S,W=0){if(0<=this.span)return this.span;let $=0;this.union.usesPrefixDiscriminator&&($=this.union.discriminator.layout.span);let se=0;return this.layout&&(se=this.layout.getSpan(S,W+$)),$+se}decode(S,W=0){const $=this.makeDestinationObject();if(this!==this.union.getVariant(S,W))throw new Error("variant mismatch");let se=0;return this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout?$[this.property]=this.layout.decode(S,W+se):this.property?$[this.property]=!0:this.union.usesPrefixDiscriminator&&($[this.union.discriminator.property]=this.variant),$}encode(S,W,$=0){let se=0;if(this.union.usesPrefixDiscriminator&&(se=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(S,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,W,$);let me=se;if(this.layout&&(this.layout.encode(S[this.property],W,$+se),me+=this.layout.getSpan(W,$+se),0<=this.union.span&&me>this.union.span))throw new Error("encoded variant overruns containing union");return me}fromArray(S){if(this.layout)return this.layout.fromArray(S)}}at.VariantLayout=E;function a(u){return 0>u&&(u+=4294967296),u}class p extends n{constructor(S,W,$){if(!(S instanceof d||S instanceof h))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof W=="string"&&$===void 0&&($=W,W=!1),4<S.span)throw new RangeError("word cannot exceed 32 bits");super(S.span,$),this.word=S,this.msb=!!W,this.fields=[];let se=0;this._packedSetValue=function(me){return se=a(me),this},this._packedGetValue=function(){return se}}decode(S,W=0){const $=this.makeDestinationObject(),se=this.word.decode(S,W);this._packedSetValue(se);for(const me of this.fields)me.property!==void 0&&($[me.property]=me.decode(S));return $}encode(S,W,$=0){const se=this.word.decode(W,$);this._packedSetValue(se);for(const me of this.fields)if(me.property!==void 0){const _e=S[me.property];_e!==void 0&&me.encode(_e)}return this.word.encode(this._packedGetValue(),W,$)}addField(S,W){const $=new M(this,S,W);return this.fields.push($),$}addBoolean(S){const W=new R(this,S);return this.fields.push(W),W}fieldFor(S){if(typeof S!="string")throw new TypeError("property must be string");for(const W of this.fields)if(W.property===S)return W}}at.BitStructure=p;class M{constructor(S,W,$){if(!(S instanceof p))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(W)||0>=W)throw new TypeError("bits must be positive integer");const se=8*S.span,me=S.fields.reduce((_e,Ae)=>_e+Ae.bits,0);if(W+me>se)throw new Error("bits too long for span remainder ("+(se-me)+" of "+se+" remain)");this.container=S,this.bits=W,this.valueMask=(1<<W)-1,W===32&&(this.valueMask=4294967295),this.start=me,this.container.msb&&(this.start=se-me-W),this.wordMask=a(this.valueMask<<this.start),this.property=$}decode(S,W){const $=this.container._packedGetValue();return a($&this.wordMask)>>>this.start}encode(S){if(typeof S!="number"||!Number.isInteger(S)||S!==a(S&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const W=this.container._packedGetValue(),$=a(S<<this.start);this.container._packedSetValue(a(W&~this.wordMask)|$)}}at.BitField=M;class R extends M{constructor(S,W){super(S,1,W)}decode(S,W){return!!super.decode(S,W)}encode(S){typeof S=="boolean"&&(S=+S),super.encode(S)}}at.Boolean=R;class T extends n{constructor(S,W){if(!(S instanceof o&&S.isCount()||Number.isInteger(S)&&0<=S))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let $=-1;S instanceof o||($=S),super($,W),this.length=S}getSpan(S,W){let $=this.span;return 0>$&&($=this.length.decode(S,W)),$}decode(S,W=0){let $=this.span;return 0>$&&($=this.length.decode(S,W)),t(S).slice(W,W+$)}encode(S,W,$){let se=this.length;if(this.length instanceof o&&(se=S.length),!(S instanceof Uint8Array&&se===S.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+se+") Uint8Array as src");if($+se>W.length)throw new RangeError("encoding overruns Uint8Array");const me=t(S);return t(W).write(me.toString("hex"),$,se,"hex"),this.length instanceof o&&this.length.encode(se,W,$),se}}at.Blob=T;class L extends n{constructor(S){super(-1,S)}getSpan(S,W=0){e(S);let $=W;for(;$<S.length&&S[$]!==0;)$+=1;return 1+$-W}decode(S,W=0){const $=this.getSpan(S,W);return t(S).slice(W,W+$-1).toString("utf-8")}encode(S,W,$=0){typeof S!="string"&&(S=String(S));const se=r.Buffer.from(S,"utf8"),me=se.length;if($+me>W.length)throw new RangeError("encoding overruns Buffer");const _e=t(W);return se.copy(_e,$),_e[$+me]=0,me+1}}at.CString=L;class N extends n{constructor(S,W){if(typeof S=="string"&&W===void 0&&(W=S,S=void 0),S===void 0)S=-1;else if(!Number.isInteger(S))throw new TypeError("maxSpan must be an integer");super(-1,W),this.maxSpan=S}getSpan(S,W=0){return e(S),S.length-W}decode(S,W=0){const $=this.getSpan(S,W);if(0<=this.maxSpan&&this.maxSpan<$)throw new RangeError("text length exceeds maxSpan");return t(S).slice(W,W+$).toString("utf-8")}encode(S,W,$=0){typeof S!="string"&&(S=String(S));const se=r.Buffer.from(S,"utf8"),me=se.length;if(0<=this.maxSpan&&this.maxSpan<me)throw new RangeError("text length exceeds maxSpan");if($+me>W.length)throw new RangeError("encoding overruns Buffer");return se.copy(t(W),$),me}}at.UTF8=N;class v extends n{constructor(S,W){super(0,W),this.value=S}decode(S,W){return this.value}encode(S,W,$){return 0}}return at.Constant=v,at.greedy=((u,S)=>new l(u,S)),at.offset=((u,S,W)=>new c(u,S,W)),at.u8=(u=>new d(1,u)),at.u16=(u=>new d(2,u)),at.u24=(u=>new d(3,u)),at.u32=(u=>new d(4,u)),at.u40=(u=>new d(5,u)),at.u48=(u=>new d(6,u)),at.nu64=(u=>new I(u)),at.u16be=(u=>new h(2,u)),at.u24be=(u=>new h(3,u)),at.u32be=(u=>new h(4,u)),at.u40be=(u=>new h(5,u)),at.u48be=(u=>new h(6,u)),at.nu64be=(u=>new C(u)),at.s8=(u=>new y(1,u)),at.s16=(u=>new y(2,u)),at.s24=(u=>new y(3,u)),at.s32=(u=>new y(4,u)),at.s40=(u=>new y(5,u)),at.s48=(u=>new y(6,u)),at.ns64=(u=>new D(u)),at.s16be=(u=>new _(2,u)),at.s24be=(u=>new _(3,u)),at.s32be=(u=>new _(4,u)),at.s40be=(u=>new _(5,u)),at.s48be=(u=>new _(6,u)),at.ns64be=(u=>new k(u)),at.f32=(u=>new F(u)),at.f32be=(u=>new Q(u)),at.f64=(u=>new G(u)),at.f64be=(u=>new Y(u)),at.struct=((u,S,W)=>new te(u,S,W)),at.bits=((u,S,W)=>new p(u,S,W)),at.seq=((u,S,W)=>new ee(u,S,W)),at.union=((u,S,W)=>new K(u,S,W)),at.unionLayoutDiscriminator=((u,S)=>new V(u,S)),at.blob=((u,S)=>new T(u,S)),at.cstr=(u=>new L(u)),at.utf8=((u,S)=>new N(u,S)),at.constant=((u,S)=>new v(u,S)),at}var be=D8(),B8=8078e3,U8=8078001,F8=8078004,z8=8078005,W8=8078006,V8=8078011;function Vk(r){return Array.isArray(r)?"%5B"+r.map(Vk).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function H8([r,e]){return`${r}=${Vk(e)}`}function G8(r){const e=Object.entries(r).map(H8).join("&");return btoa(e)}function j8(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${G8(e)}'`),`${t}\``}}var o0=class extends Error{constructor(...[e,t]){let n,i;if(t){const{cause:o,...l}=t;o&&(i={cause:o}),Object.keys(l).length>0&&(n=l)}const s=j8(e,n);super(s,i);bi(this,"cause",this.cause);bi(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function q8(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function K8(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(q8(e,r));return r.write(e,t,0),t}})}function Y8(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function vp(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function X8(r,e){if(vp(r)!==vp(e))throw new o0(F8);if(vp(r)&&vp(e)&&r.fixedSize!==e.fixedSize)throw new o0(z8,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!vp(r)&&!vp(e)&&r.maxSize!==e.maxSize)throw new o0(W8,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function $8(r,e,t=0){if(e.length-t<=0)throw new o0(B8,{codecDescription:r})}function Z8(r,e,t,n=0){const i=t.length-n;if(i<e)throw new o0(U8,{bytesLength:i,codecDescription:r,expected:e})}function Q8(r,e,t,n){if(n<e||n>t)throw new o0(V8,{codecDescription:r,max:t,min:e,value:n})}function Hk(r){return(r==null?void 0:r.endian)!==1}function J8(r){return K8({fixedSize:r.size,write(e,t,n){r.range&&Q8(r.name,r.range[0],r.range[1],e);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,Hk(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function eW(r){return Y8({fixedSize:r.size,read(e,t=0){$8(r.name,e,t),Z8(r.name,r.size,e,t);const n=new DataView(tW(e,t,r.size));return[r.get(n,Hk(r.config)),t+r.size]}})}function tW(r,e,t){const n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var Gk=(r={})=>J8({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),nW=(r={})=>eW({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),rW=(r={})=>X8(Gk(r),nW(r));let iW=class extends TypeError{constructor(e,t){let n;const{message:i,explanation:s,...o}=e,{path:l}=e,c=l.length===0?i:`At path: ${l.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}};function sW(r){return My(r)&&typeof r[Symbol.iterator]=="function"}function My(r){return typeof r=="object"&&r!=null}function O_(r){return My(r)&&!Array.isArray(r)}function ja(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function oW(r){const{done:e,value:t}=r.next();return e?void 0:t}function aW(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:l,message:c=`Expected a value of type \`${o}\`${l?` with refinement \`${l}\``:""}, but received: \`${ja(n)}\``}=r;return{value:n,type:o,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*hC(r,e,t,n){sW(r)||(r=[r]);for(const i of r){const s=aW(i,e,t,n);s&&(yield s)}}function*$A(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,l={path:n,branch:i,mask:o};s&&(r=e.coercer(r,l));let c="valid";for(const d of e.validator(r,l))d.explanation=t.message,c="not_valid",yield[d,void 0];for(let[d,h,y]of e.entries(r,l)){const _=$A(h,y,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,h],coerce:s,mask:o,message:t.message});for(const x of _)x[0]?(c=x[0].refinement!=null?"not_refined":"not_valid",yield[x[0],void 0]):s&&(h=x[1],d===void 0?r=h:r instanceof Map?r.set(d,h):r instanceof Set?r.add(h):My(r)&&(h!==void 0||d in r)&&(r[d]=h))}if(c!=="not_valid")for(const d of e.refiner(r,l))d.explanation=t.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,r])}let Ll=class{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:l=function*(){}}=e;this.type=t,this.schema=n,this.entries=l,this.coercer=o,i?this.validator=(c,d)=>{const h=i(c,d);return hC(h,d,this,c)}:this.validator=()=>[],s?this.refiner=(c,d)=>{const h=s(c,d);return hC(h,d,this,c)}:this.refiner=()=>[]}assert(e,t){return jk(e,this,t)}create(e,t){return Xt(e,this,t)}is(e){return qk(e,this)}mask(e,t){return lW(e,this,t)}validate(e,t={}){return Ey(e,this,t)}};function jk(r,e,t){const n=Ey(r,e,{message:t});if(n[0])throw n[0]}function Xt(r,e,t){const n=Ey(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function lW(r,e,t){const n=Ey(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function qk(r,e){return!Ey(r,e)[0]}function Ey(r,e,t={}){const n=$A(r,e,t),i=oW(n);return i[0]?[new iW(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function od(r,e){return new Ll({type:r,schema:null,validator:e})}function uW(){return od("any",()=>!0)}function tn(r){return new Ll({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ja(e)}`}})}function Pl(){return od("boolean",r=>typeof r=="boolean")}function ZA(r){return od("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${ja(e)}`)}function Zr(r){const e=ja(r),t=typeof r;return new Ll({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${ja(n)}`}})}function cW(){return od("never",()=>!1)}function nn(r){return new Ll({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function tt(){return od("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${ja(r)}`)}function An(r){return new Ll({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Kk(r,e){return new Ll({type:"record",schema:null,*entries(t){if(My(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return O_(t)||`Expected an object, but received: ${ja(t)}`},coercer(t){return O_(t)?{...t}:t}})}function Gt(){return od("string",r=>typeof r=="string"||`Expected a string, but received: ${ja(r)}`)}function QA(r){const e=cW();return new Ll({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${ja(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Nt(r){const e=Object.keys(r);return new Ll({type:"type",schema:r,*entries(t){if(My(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return O_(t)||`Expected an object, but received: ${ja(t)}`},coercer(t){return O_(t)?{...t}:t}})}function Qs(r){const e=r.map(t=>t.type).join(" | ");return new Ll({type:"union",schema:null,coercer(t,n){for(const i of r){const[s,o]=i.validate(t,{coerce:!0,mask:n.mask});if(!s)return o}return t},validator(t,n){const i=[];for(const s of r){const[...o]=$A(t,s,n),[l]=o;if(l[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ja(t)}`,...i]}})}function N0(){return od("unknown",()=>!0)}function by(r,e,t){return new Ll({...r,coercer:(n,i)=>qk(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var Yv,fW=new Uint8Array(16);function Yk(){if(!Yv&&(Yv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Yv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yv(fW)}const hW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $1(r){return typeof r=="string"&&hW.test(r)}var fs=[];for(var XS=0;XS<256;++XS)fs.push((XS+256).toString(16).substr(1));function Z1(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(fs[r[e+0]]+fs[r[e+1]]+fs[r[e+2]]+fs[r[e+3]]+"-"+fs[r[e+4]]+fs[r[e+5]]+"-"+fs[r[e+6]]+fs[r[e+7]]+"-"+fs[r[e+8]]+fs[r[e+9]]+"-"+fs[r[e+10]]+fs[r[e+11]]+fs[r[e+12]]+fs[r[e+13]]+fs[r[e+14]]+fs[r[e+15]]).toLowerCase();if(!$1(t))throw TypeError("Stringified UUID is invalid");return t}var dC,$S,ZS=0,QS=0;function dW(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||dC,o=r.clockseq!==void 0?r.clockseq:$S;if(s==null||o==null){var l=r.random||(r.rng||Yk)();s==null&&(s=dC=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),o==null&&(o=$S=(l[6]<<8|l[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),d=r.nsecs!==void 0?r.nsecs:QS+1,h=c-ZS+(d-QS)/1e4;if(h<0&&r.clockseq===void 0&&(o=o+1&16383),(h<0||c>ZS)&&r.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ZS=c,QS=d,$S=o,c+=122192928e5;var y=((c&268435455)*1e4+d)%4294967296;i[n++]=y>>>24&255,i[n++]=y>>>16&255,i[n++]=y>>>8&255,i[n++]=y&255;var _=c/4294967296*1e4&268435455;i[n++]=_>>>8&255,i[n++]=_&255,i[n++]=_>>>24&15|16,i[n++]=_>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var x=0;x<6;++x)i[n+x]=s[x];return e||Z1(i)}function Xk(r){if(!$1(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function pW(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var mW="6ba7b810-9dad-11d1-80b4-00c04fd430c8",gW="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function $k(r,e,t){function n(i,s,o,l){if(typeof i=="string"&&(i=pW(i)),typeof s=="string"&&(s=Xk(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){l=l||0;for(var d=0;d<16;++d)o[l+d]=c[d];return o}return Z1(c)}try{n.name=r}catch{}return n.DNS=mW,n.URL=gW,n}function yW(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return vW(wW(_W(r),r.length*8))}function vW(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function Zk(r){return(r+64>>>9<<4)+14+1}function wW(r,e){r[e>>5]|=128<<e%32,r[Zk(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var l=t,c=n,d=i,h=s;t=Ms(t,n,i,s,r[o],7,-680876936),s=Ms(s,t,n,i,r[o+1],12,-389564586),i=Ms(i,s,t,n,r[o+2],17,606105819),n=Ms(n,i,s,t,r[o+3],22,-1044525330),t=Ms(t,n,i,s,r[o+4],7,-176418897),s=Ms(s,t,n,i,r[o+5],12,1200080426),i=Ms(i,s,t,n,r[o+6],17,-1473231341),n=Ms(n,i,s,t,r[o+7],22,-45705983),t=Ms(t,n,i,s,r[o+8],7,1770035416),s=Ms(s,t,n,i,r[o+9],12,-1958414417),i=Ms(i,s,t,n,r[o+10],17,-42063),n=Ms(n,i,s,t,r[o+11],22,-1990404162),t=Ms(t,n,i,s,r[o+12],7,1804603682),s=Ms(s,t,n,i,r[o+13],12,-40341101),i=Ms(i,s,t,n,r[o+14],17,-1502002290),n=Ms(n,i,s,t,r[o+15],22,1236535329),t=Es(t,n,i,s,r[o+1],5,-165796510),s=Es(s,t,n,i,r[o+6],9,-1069501632),i=Es(i,s,t,n,r[o+11],14,643717713),n=Es(n,i,s,t,r[o],20,-373897302),t=Es(t,n,i,s,r[o+5],5,-701558691),s=Es(s,t,n,i,r[o+10],9,38016083),i=Es(i,s,t,n,r[o+15],14,-660478335),n=Es(n,i,s,t,r[o+4],20,-405537848),t=Es(t,n,i,s,r[o+9],5,568446438),s=Es(s,t,n,i,r[o+14],9,-1019803690),i=Es(i,s,t,n,r[o+3],14,-187363961),n=Es(n,i,s,t,r[o+8],20,1163531501),t=Es(t,n,i,s,r[o+13],5,-1444681467),s=Es(s,t,n,i,r[o+2],9,-51403784),i=Es(i,s,t,n,r[o+7],14,1735328473),n=Es(n,i,s,t,r[o+12],20,-1926607734),t=bs(t,n,i,s,r[o+5],4,-378558),s=bs(s,t,n,i,r[o+8],11,-2022574463),i=bs(i,s,t,n,r[o+11],16,1839030562),n=bs(n,i,s,t,r[o+14],23,-35309556),t=bs(t,n,i,s,r[o+1],4,-1530992060),s=bs(s,t,n,i,r[o+4],11,1272893353),i=bs(i,s,t,n,r[o+7],16,-155497632),n=bs(n,i,s,t,r[o+10],23,-1094730640),t=bs(t,n,i,s,r[o+13],4,681279174),s=bs(s,t,n,i,r[o],11,-358537222),i=bs(i,s,t,n,r[o+3],16,-722521979),n=bs(n,i,s,t,r[o+6],23,76029189),t=bs(t,n,i,s,r[o+9],4,-640364487),s=bs(s,t,n,i,r[o+12],11,-421815835),i=bs(i,s,t,n,r[o+15],16,530742520),n=bs(n,i,s,t,r[o+2],23,-995338651),t=As(t,n,i,s,r[o],6,-198630844),s=As(s,t,n,i,r[o+7],10,1126891415),i=As(i,s,t,n,r[o+14],15,-1416354905),n=As(n,i,s,t,r[o+5],21,-57434055),t=As(t,n,i,s,r[o+12],6,1700485571),s=As(s,t,n,i,r[o+3],10,-1894986606),i=As(i,s,t,n,r[o+10],15,-1051523),n=As(n,i,s,t,r[o+1],21,-2054922799),t=As(t,n,i,s,r[o+8],6,1873313359),s=As(s,t,n,i,r[o+15],10,-30611744),i=As(i,s,t,n,r[o+6],15,-1560198380),n=As(n,i,s,t,r[o+13],21,1309151649),t=As(t,n,i,s,r[o+4],6,-145523070),s=As(s,t,n,i,r[o+11],10,-1120210379),i=As(i,s,t,n,r[o+2],15,718787259),n=As(n,i,s,t,r[o+9],21,-343485551),t=Xc(t,l),n=Xc(n,c),i=Xc(i,d),s=Xc(s,h)}return[t,n,i,s]}function _W(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Zk(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function Xc(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function xW(r,e){return r<<e|r>>>32-e}function Q1(r,e,t,n,i,s){return Xc(xW(Xc(Xc(e,r),Xc(n,s)),i),t)}function Ms(r,e,t,n,i,s,o){return Q1(e&t|~e&n,r,e,i,s,o)}function Es(r,e,t,n,i,s,o){return Q1(e&n|t&~n,r,e,i,s,o)}function bs(r,e,t,n,i,s,o){return Q1(e^t^n,r,e,i,s,o)}function As(r,e,t,n,i,s,o){return Q1(t^(e|~n),r,e,i,s,o)}var SW=$k("v3",48,yW);function MW(r,e,t){r=r||{};var n=r.random||(r.rng||Yk)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Z1(n)}function EW(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function JS(r,e){return r<<e|r>>>32-e}function bW(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),l=new Array(o),c=0;c<o;++c){for(var d=new Uint32Array(16),h=0;h<16;++h)d[h]=r[c*64+h*4]<<24|r[c*64+h*4+1]<<16|r[c*64+h*4+2]<<8|r[c*64+h*4+3];l[c]=d}l[o-1][14]=(r.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(r.length-1)*8&4294967295;for(var y=0;y<o;++y){for(var _=new Uint32Array(80),x=0;x<16;++x)_[x]=l[y][x];for(var A=16;A<80;++A)_[A]=JS(_[A-3]^_[A-8]^_[A-14]^_[A-16],1);for(var P=t[0],I=t[1],C=t[2],D=t[3],k=t[4],F=0;F<80;++F){var Q=Math.floor(F/20),G=JS(P,5)+EW(Q,I,C,D)+k+e[Q]+_[F]>>>0;k=D,D=C,C=JS(I,30)>>>0,I=P,P=G}t[0]=t[0]+P>>>0,t[1]=t[1]+I>>>0,t[2]=t[2]+C>>>0,t[3]=t[3]+D>>>0,t[4]=t[4]+k>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var AW=$k("v5",80,bW);const TW="00000000-0000-0000-0000-000000000000";function RW(r){if(!$1(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const CW=Object.freeze(Object.defineProperty({__proto__:null,NIL:TW,parse:Xk,stringify:Z1,v1:dW,v3:SW,v4:MW,v5:AW,validate:$1,version:RW},Symbol.toStringTag,{value:"Module"})),Qk=G1(CW);var eM,pC;function IW(){if(pC)return eM;pC=1;const r=Qk.v4;return eM=function(t,n,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const l={method:t};if(o===2&&(l.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");l.params=n}if(typeof i>"u"){const c=typeof s.generator=="function"?s.generator:function(){return r()};l.id=c(l,s)}else o===2&&i===null?s.notificationIdNull&&(l.id=null):l.id=i;return l},eM}var tM,mC;function NW(){if(mC)return tM;mC=1;const r=Qk.v4,e=IW(),t=function(n,i){if(!(this instanceof t))return new t(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return tM=t,t.prototype.request=function(n,i,s,o){const l=this;let c=null;const d=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&d)throw new TypeError("JSON-RPC 1.0 does not support batching");if(d||!d&&n&&typeof n=="object"&&typeof i=="function")o=i,c=n;else{typeof s=="function"&&(o=s,s=void 0);const _=typeof o=="function";try{c=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(x){if(_)return o(x);throw x}if(!_)return c}let y;try{y=JSON.stringify(c,this.options.replacer)}catch(_){return o(_)}return this.callServer(y,function(_,x){l._parseResponse(_,x,o)}),c},t.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(l){return s(l)}if(s.length===3)if(Array.isArray(o)){const l=function(d){return typeof d.error<"u"},c=function(d){return!l(d)};return s(null,o.filter(l),o.filter(c))}else return s(null,o.error,o.result);s(null,o)},tM}var PW=NW();const LW=Xa(PW);var nM={exports:{}},gC;function Jk(){return gC||(gC=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function s(c,d,h,y,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,y||c,_),A=t?t+d:d;return c._events[A]?c._events[A].fn?c._events[A]=[c._events[A],x]:c._events[A].push(x):(c._events[A]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,y;if(this._eventsCount===0)return d;for(y in h=this._events)e.call(h,y)&&d.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=t?t+d:d,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,x=y.length,A=new Array(x);_<x;_++)A[_]=y[_].fn;return A},l.prototype.listenerCount=function(d){var h=t?t+d:d,y=this._events[h];return y?y.fn?1:y.length:0},l.prototype.emit=function(d,h,y,_,x,A){var P=t?t+d:d;if(!this._events[P])return!1;var I=this._events[P],C=arguments.length,D,k;if(I.fn){switch(I.once&&this.removeListener(d,I.fn,void 0,!0),C){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,y),!0;case 4:return I.fn.call(I.context,h,y,_),!0;case 5:return I.fn.call(I.context,h,y,_,x),!0;case 6:return I.fn.call(I.context,h,y,_,x,A),!0}for(k=1,D=new Array(C-1);k<C;k++)D[k-1]=arguments[k];I.fn.apply(I.context,D)}else{var F=I.length,Q;for(k=0;k<F;k++)switch(I[k].once&&this.removeListener(d,I[k].fn,void 0,!0),C){case 1:I[k].fn.call(I[k].context);break;case 2:I[k].fn.call(I[k].context,h);break;case 3:I[k].fn.call(I[k].context,h,y);break;case 4:I[k].fn.call(I[k].context,h,y,_);break;default:if(!D)for(Q=1,D=new Array(C-1);Q<C;Q++)D[Q-1]=arguments[Q];I[k].fn.apply(I[k].context,D)}}return!0},l.prototype.on=function(d,h,y){return s(this,d,h,y,!1)},l.prototype.once=function(d,h,y){return s(this,d,h,y,!0)},l.prototype.removeListener=function(d,h,y,_){var x=t?t+d:d;if(!this._events[x])return this;if(!h)return o(this,x),this;var A=this._events[x];if(A.fn)A.fn===h&&(!_||A.once)&&(!y||A.context===y)&&o(this,x);else{for(var P=0,I=[],C=A.length;P<C;P++)(A[P].fn!==h||_&&!A[P].once||y&&A[P].context!==y)&&I.push(A[P]);I.length?this._events[x]=I.length===1?I[0]:I:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l})(nM)),nM.exports}var kW=Jk();const JA=Xa(kW);var OW=class extends JA{constructor(e,t,n){super();bi(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,n){const i=n||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function DW(r,e){return new OW(r,e)}var BW=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},UW=class extends JA{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...l}={},c,d){super();bi(this,"address");bi(this,"rpc_id");bi(this,"queue");bi(this,"options");bi(this,"autoconnect");bi(this,"ready");bi(this,"reconnect");bi(this,"reconnect_timer_id");bi(this,"reconnect_interval");bi(this,"max_reconnects");bi(this,"rest_options");bi(this,"current_reconnects");bi(this,"generate_request_id");bi(this,"socket");bi(this,"webSocketFactory");bi(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new BW,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const l=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:l};this.socket.send(this.dataPack.encode(c),i,d=>{if(d)return o(d);this.queue[l]={promise:[s,o]},n&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],o(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=mn.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,i),1))})}};const FW=BigInt(0),Dm=BigInt(1),zW=BigInt(2),WW=BigInt(7),VW=BigInt(256),HW=BigInt(113),eO=[],tO=[],nO=[];for(let r=0,e=Dm,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],eO.push(2*(5*n+t)),tO.push((r+1)*(r+2)/2%64);let i=FW;for(let s=0;s<7;s++)e=(e<<Dm^(e>>WW)*HW)%VW,e&zW&&(i^=Dm<<(Dm<<BigInt(s))-Dm);nO.push(i)}const rO=wk(nO,!0),GW=rO[0],jW=rO[1],yC=(r,e,t)=>t>32?Cz(r,e,t):Tz(r,e,t),vC=(r,e,t)=>t>32?Iz(r,e,t):Rz(r,e,t);function qW(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const l=(o+8)%10,c=(o+2)%10,d=t[c],h=t[c+1],y=yC(d,h,1)^t[l],_=vC(d,h,1)^t[l+1];for(let x=0;x<50;x+=10)r[o+x]^=y,r[o+x+1]^=_}let i=r[2],s=r[3];for(let o=0;o<24;o++){const l=tO[o],c=yC(i,s,l),d=vC(i,s,l),h=eO[o];i=r[h],s=r[h+1],r[h]=c,r[h+1]=d}for(let o=0;o<50;o+=10){for(let l=0;l<10;l++)t[l]=r[o+l];for(let l=0;l<10;l++)r[o+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=GW[n],r[1]^=jW[n]}ef(t)}class eT extends WA{constructor(e,t,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,Ug(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=yz(this.state)}clone(){return this._cloneInto()}keccak(){W2(this.state32),qW(this.state32,this.rounds),W2(this.state32),this.posOut=0,this.pos=0}update(e){d0(this),e=K1(e),Hu(e);const{blockLen:t,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let l=0;l<o;l++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){d0(this,!1),Hu(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ug(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(gk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ef(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new eT(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const KW=(r,e,t)=>VA(()=>new eT(e,r,t)),wC=KW(1,136,256/8);class iO extends WA{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,mk(e);const n=K1(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),ef(s)}update(e){return d0(this),this.iHash.update(e),this}digestInto(e){d0(this),Hu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sO=(r,e,t)=>new iO(r,e).update(t).digest();sO.create=(r,e)=>new iO(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _C=(r,e)=>(r+(r>=0?e:-e)/oO)/e;function YW(r,e,t){const[[n,i],[s,o]]=e,l=_C(o*r,t),c=_C(-i*r,t);let d=r-l*n-c*s,h=-l*i-c*o;const y=d<Ou,_=h<Ou;y&&(d=-d),_&&(h=-h);const x=xy(Math.ceil(Ek(t)/2))+a0;if(d<Ou||d>=x||h<Ou||h>=x)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:y,k1:d,k2neg:_,k2:h}}function xb(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function rM(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return $h(t.lowS,"lowS"),$h(t.prehash,"prehash"),t.format!==void 0&&xb(t.format),t}class XW extends Error{constructor(e=""){super(e)}}const Au={Err:XW,_tlv:{encode:(r,e)=>{const{Err:t}=Au;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=qv(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?qv(i.length/2|128):"";return qv(r)+s+i+e},decode(r,e){const{Err:t}=Au;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(n,n+c);if(d.length!==c)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of d)o=o<<8|h;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(n,n+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Au;if(r<Ou)throw new e("integer: negative integers are not allowed");let t=qv(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Au;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Y1(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Au,i=oi("signature",r),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:c}=n.decode(2,s),{v:d,l:h}=n.decode(2,c);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(d)}},hexFromSig(r){const{_tlv:e,_int:t}=Au,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},Ou=BigInt(0),a0=BigInt(1),oO=BigInt(2),Xv=BigInt(3),$W=BigInt(4);function Gp(r,e){const{BYTES:t}=r;let n;if(typeof e=="bigint")n=e;else{let i=oi("private key",e);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function ZW(r,e={}){const t=zk("weierstrass",r,e),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:o,n:l}=s;Sy(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const d=lO(n,i);function h(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function y(K,E,a){const{x:p,y:M}=E.toAffine(),R=n.toBytes(p);if($h(a,"isCompressed"),a){h();const T=!n.isOdd(M);return wl(aO(T),R)}else return wl(Uint8Array.of(4),R,n.toBytes(M))}function _(K){Ha(K,void 0,"Point");const{publicKey:E,publicKeyUncompressed:a}=d,p=K.length,M=K[0],R=K.subarray(1);if(p===E&&(M===2||M===3)){const T=n.fromBytes(R);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const L=P(T);let N;try{N=n.sqrt(L)}catch(S){const W=S instanceof Error?": "+S.message:"";throw new Error("bad point: is not on curve, sqrt error"+W)}h();const v=n.isOdd(N);return(M&1)===1!==v&&(N=n.neg(N)),{x:T,y:N}}else if(p===a&&M===4){const T=n.BYTES,L=n.fromBytes(R.subarray(0,T)),N=n.fromBytes(R.subarray(T,T*2));if(!I(L,N))throw new Error("bad point: is not on curve");return{x:L,y:N}}else throw new Error(`bad point: got length ${p}, expected compressed=${E} or uncompressed=${a}`)}const x=e.toBytes||y,A=e.fromBytes||_;function P(K){const E=n.sqr(K),a=n.mul(E,K);return n.add(n.add(a,n.mul(K,s.a)),s.b)}function I(K,E){const a=n.sqr(E),p=P(K);return n.eql(a,p)}if(!I(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const C=n.mul(n.pow(s.a,Xv),$W),D=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(C,D)))throw new Error("bad curve params: a or b");function k(K,E,a=!1){if(!n.isValid(E)||a&&n.is0(E))throw new Error(`bad point coordinate ${K}`);return E}function F(K){if(!(K instanceof te))throw new Error("ProjectivePoint expected")}function Q(K){if(!c||!c.basises)throw new Error("no endo");return YW(K,c.basises,i.ORDER)}const G=C_((K,E)=>{const{X:a,Y:p,Z:M}=K;if(n.eql(M,n.ONE))return{x:a,y:p};const R=K.is0();E==null&&(E=R?n.ONE:n.inv(M));const T=n.mul(a,E),L=n.mul(p,E),N=n.mul(M,E);if(R)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:T,y:L}}),Y=C_(K=>{if(K.is0()){if(e.allowInfinityPoint&&!n.is0(K.Y))return;throw new Error("bad point: ZERO")}const{x:E,y:a}=K.toAffine();if(!n.isValid(E)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!I(E,a))throw new Error("bad point: equation left != right");if(!K.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ee(K,E,a,p,M){return a=new te(n.mul(a.X,K),a.Y,a.Z),E=I_(p,E),a=I_(M,a),E.add(a)}class te{constructor(E,a,p){this.X=k("x",E),this.Y=k("y",a,!0),this.Z=k("z",p),Object.freeze(this)}static CURVE(){return s}static fromAffine(E){const{x:a,y:p}=E||{};if(!E||!n.isValid(a)||!n.isValid(p))throw new Error("invalid affine point");if(E instanceof te)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(p)?te.ZERO:new te(a,p,n.ONE)}static fromBytes(E){const a=te.fromAffine(A(Ha(E,void 0,"point")));return a.assertValidity(),a}static fromHex(E){return te.fromBytes(oi("pointHex",E))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(E=8,a=!0){return V.createCache(this,E),a||this.multiply(Xv),this}assertValidity(){Y(this)}hasEvenY(){const{y:E}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(E)}equals(E){F(E);const{X:a,Y:p,Z:M}=this,{X:R,Y:T,Z:L}=E,N=n.eql(n.mul(a,L),n.mul(R,M)),v=n.eql(n.mul(p,L),n.mul(T,M));return N&&v}negate(){return new te(this.X,n.neg(this.Y),this.Z)}double(){const{a:E,b:a}=s,p=n.mul(a,Xv),{X:M,Y:R,Z:T}=this;let L=n.ZERO,N=n.ZERO,v=n.ZERO,u=n.mul(M,M),S=n.mul(R,R),W=n.mul(T,T),$=n.mul(M,R);return $=n.add($,$),v=n.mul(M,T),v=n.add(v,v),L=n.mul(E,v),N=n.mul(p,W),N=n.add(L,N),L=n.sub(S,N),N=n.add(S,N),N=n.mul(L,N),L=n.mul($,L),v=n.mul(p,v),W=n.mul(E,W),$=n.sub(u,W),$=n.mul(E,$),$=n.add($,v),v=n.add(u,u),u=n.add(v,u),u=n.add(u,W),u=n.mul(u,$),N=n.add(N,u),W=n.mul(R,T),W=n.add(W,W),u=n.mul(W,$),L=n.sub(L,u),v=n.mul(W,S),v=n.add(v,v),v=n.add(v,v),new te(L,N,v)}add(E){F(E);const{X:a,Y:p,Z:M}=this,{X:R,Y:T,Z:L}=E;let N=n.ZERO,v=n.ZERO,u=n.ZERO;const S=s.a,W=n.mul(s.b,Xv);let $=n.mul(a,R),se=n.mul(p,T),me=n.mul(M,L),_e=n.add(a,p),Ae=n.add(R,T);_e=n.mul(_e,Ae),Ae=n.add($,se),_e=n.sub(_e,Ae),Ae=n.add(a,M);let _t=n.add(R,L);return Ae=n.mul(Ae,_t),_t=n.add($,me),Ae=n.sub(Ae,_t),_t=n.add(p,M),N=n.add(T,L),_t=n.mul(_t,N),N=n.add(se,me),_t=n.sub(_t,N),u=n.mul(S,Ae),N=n.mul(W,me),u=n.add(N,u),N=n.sub(se,u),u=n.add(se,u),v=n.mul(N,u),se=n.add($,$),se=n.add(se,$),me=n.mul(S,me),Ae=n.mul(W,Ae),se=n.add(se,me),me=n.sub($,me),me=n.mul(S,me),Ae=n.add(Ae,me),$=n.mul(se,Ae),v=n.add(v,$),$=n.mul(_t,Ae),N=n.mul(_e,N),N=n.sub(N,$),$=n.mul(_e,se),u=n.mul(_t,u),u=n.add(u,$),new te(N,v,u)}subtract(E){return this.add(E.negate())}is0(){return this.equals(te.ZERO)}multiply(E){const{endo:a}=e;if(!i.isValidNot0(E))throw new Error("invalid scalar: out of range");let p,M;const R=T=>V.cached(this,T,L=>Rh(te,L));if(a){const{k1neg:T,k1:L,k2neg:N,k2:v}=Q(E),{p:u,f:S}=R(L),{p:W,f:$}=R(v);M=S.add($),p=ee(a.beta,u,W,T,N)}else{const{p:T,f:L}=R(E);p=T,M=L}return Rh(te,[p,M])[0]}multiplyUnsafe(E){const{endo:a}=e,p=this;if(!i.isValid(E))throw new Error("invalid scalar: out of range");if(E===Ou||p.is0())return te.ZERO;if(E===a0)return p;if(V.hasCache(this))return this.multiply(E);if(a){const{k1neg:M,k1:R,k2neg:T,k2:L}=Q(E),{p1:N,p2:v}=r8(te,p,R,L);return ee(a.beta,N,v,M,T)}else return V.unsafe(p,E)}multiplyAndAddUnsafe(E,a,p){const M=this.multiplyUnsafe(a).add(E.multiplyUnsafe(p));return M.is0()?void 0:M}toAffine(E){return G(this,E)}isTorsionFree(){const{isTorsionFree:E}=e;return o===a0?!0:E?E(te,this):V.unsafe(this,l).is0()}clearCofactor(){const{clearCofactor:E}=e;return o===a0?this:E?E(te,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(E=!0){return $h(E,"isCompressed"),this.assertValidity(),x(te,this,E)}toHex(E=!0){return Vh(this.toBytes(E))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(E=!0){return this.toBytes(E)}_setWindowSize(E){this.precompute(E)}static normalizeZ(E){return Rh(te,E)}static msm(E,a){return Fk(te,i,E,a)}static fromPrivateKey(E){return te.BASE.multiply(Gp(i,E))}}te.BASE=new te(s.Gx,s.Gy,n.ONE),te.ZERO=new te(n.ZERO,n.ONE,n.ZERO),te.Fp=n,te.Fn=i;const U=i.BITS,V=new Uk(te,e.endo?Math.ceil(U/2):U);return te.BASE.precompute(8),te}function aO(r){return Uint8Array.of(r?2:3)}function lO(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function QW(r,e={}){const{Fn:t}=r,n=e.randomBytes||HA,i=Object.assign(lO(r.Fp,t),{seed:Ok(t.ORDER)});function s(x){try{return!!Gp(t,x)}catch{return!1}}function o(x,A){const{publicKey:P,publicKeyUncompressed:I}=i;try{const C=x.length;return A===!0&&C!==P||A===!1&&C!==I?!1:!!r.fromBytes(x)}catch{return!1}}function l(x=n(i.seed)){return e8(Ha(x,i.seed,"seed"),t.ORDER)}function c(x,A=!0){return r.BASE.multiply(Gp(t,x)).toBytes(A)}function d(x){const A=l(x);return{secretKey:A,publicKey:c(A)}}function h(x){if(typeof x=="bigint")return!1;if(x instanceof r)return!0;const{secretKey:A,publicKey:P,publicKeyUncompressed:I}=i;if(t.allowedLengths||A===P)return;const C=oi("key",x).length;return C===P||C===I}function y(x,A,P=!0){if(h(x)===!0)throw new Error("first arg must be private key");if(h(A)===!1)throw new Error("second arg must be public key");const I=Gp(t,x);return r.fromHex(A).multiply(I).toBytes(P)}return Object.freeze({getPublicKey:c,getSharedSecret:y,keygen:d,Point:r,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:l,isValidPrivateKey:s,randomPrivateKey:l,normPrivateKeyToScalar:x=>Gp(t,x),precompute(x=8,A=r.BASE){return A.precompute(x,!1)}},lengths:i})}function JW(r,e,t={}){mk(e),Sy(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||HA,i=t.hmac||((a,...p)=>sO(e,a,wl(...p))),{Fp:s,Fn:o}=r,{ORDER:l,BITS:c}=o,{keygen:d,getPublicKey:h,getSharedSecret:y,utils:_,lengths:x}=QW(r,t),A={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},P="compact";function I(a){const p=l>>a0;return a>p}function C(a,p){if(!o.isValidNot0(p))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return p}function D(a,p){xb(p);const M=x.signature,R=p==="compact"?M:p==="recovered"?M+1:void 0;return Ha(a,R,`${p} signature`)}class k{constructor(p,M,R){this.r=C("r",p),this.s=C("s",M),R!=null&&(this.recovery=R),Object.freeze(this)}static fromBytes(p,M=P){D(p,M);let R;if(M==="der"){const{r:v,s:u}=Au.toSig(Ha(p));return new k(v,u)}M==="recovered"&&(R=p[0],M="compact",p=p.subarray(1));const T=o.BYTES,L=p.subarray(0,T),N=p.subarray(T,T*2);return new k(o.fromBytes(L),o.fromBytes(N),R)}static fromHex(p,M){return this.fromBytes(R_(p),M)}addRecoveryBit(p){return new k(this.r,this.s,p)}recoverPublicKey(p){const M=s.ORDER,{r:R,s:T,recovery:L}=this;if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");if(l*oO<M&&L>1)throw new Error("recovery id is ambiguous for h>1 curve");const v=L===2||L===3?R+l:R;if(!s.isValid(v))throw new Error("recovery id 2 or 3 invalid");const u=s.toBytes(v),S=r.fromBytes(wl(aO((L&1)===0),u)),W=o.inv(v),$=Q(oi("msgHash",p)),se=o.create(-$*W),me=o.create(T*W),_e=r.BASE.multiplyUnsafe(se).add(S.multiplyUnsafe(me));if(_e.is0())throw new Error("point at infinify");return _e.assertValidity(),_e}hasHighS(){return I(this.s)}toBytes(p=P){if(xb(p),p==="der")return R_(Au.hexFromSig(this));const M=o.toBytes(this.r),R=o.toBytes(this.s);if(p==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return wl(Uint8Array.of(this.recovery),M,R)}return wl(M,R)}toHex(p){return Vh(this.toBytes(p))}assertValidity(){}static fromCompact(p){return k.fromBytes(oi("sig",p),"compact")}static fromDER(p){return k.fromBytes(oi("sig",p),"der")}normalizeS(){return this.hasHighS()?new k(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Vh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Vh(this.toBytes("compact"))}}const F=t.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const M=Y1(p),R=p.length*8-c;return R>0?M>>BigInt(R):M},Q=t.bits2int_modN||function(p){return o.create(F(p))},G=xy(c);function Y(a){return _b("num < 2^"+c,a,Ou,G),o.toBytes(a)}function ee(a,p){return Ha(a,void 0,"message"),p?Ha(e(a),void 0,"prehashed message"):a}function te(a,p,M){if(["recovered","canonical"].some(se=>se in M))throw new Error("sign() legacy options not supported");const{lowS:R,prehash:T,extraEntropy:L}=rM(M,A);a=ee(a,T);const N=Q(a),v=Gp(o,p),u=[Y(v),Y(N)];if(L!=null&&L!==!1){const se=L===!0?n(x.secretKey):L;u.push(oi("extraEntropy",se))}const S=wl(...u),W=N;function $(se){const me=F(se);if(!o.isValidNot0(me))return;const _e=o.inv(me),Ae=r.BASE.multiply(me).toAffine(),_t=o.create(Ae.x);if(_t===Ou)return;const Ze=o.create(_e*o.create(W+_t*v));if(Ze===Ou)return;let Pe=(Ae.x===_t?0:2)|Number(Ae.y&a0),ge=Ze;return R&&I(Ze)&&(ge=o.neg(Ze),Pe^=1),new k(_t,ge,Pe)}return{seed:S,k2sig:$}}function U(a,p,M={}){a=oi("message",a);const{seed:R,k2sig:T}=te(a,p,M);return Gz(e.outputLen,o.BYTES,i)(R,T)}function V(a){let p;const M=typeof a=="string"||_y(a),R=!M&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!M&&!R)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(R)p=new k(a.r,a.s);else if(M){try{p=k.fromBytes(oi("sig",a),"der")}catch(T){if(!(T instanceof Au.Err))throw T}if(!p)try{p=k.fromBytes(oi("sig",a),"compact")}catch{return!1}}return p||!1}function K(a,p,M,R={}){const{lowS:T,prehash:L,format:N}=rM(R,A);if(M=oi("publicKey",M),p=ee(oi("message",p),L),"strict"in R)throw new Error("options.strict was renamed to lowS");const v=N===void 0?V(a):k.fromBytes(oi("sig",a),N);if(v===!1)return!1;try{const u=r.fromBytes(M);if(T&&v.hasHighS())return!1;const{r:S,s:W}=v,$=Q(p),se=o.inv(W),me=o.create($*se),_e=o.create(S*se),Ae=r.BASE.multiplyUnsafe(me).add(u.multiplyUnsafe(_e));return Ae.is0()?!1:o.create(Ae.x)===S}catch{return!1}}function E(a,p,M={}){const{prehash:R}=rM(M,A);return p=ee(p,R),k.fromBytes(a,"recovered").recoverPublicKey(p).toBytes()}return Object.freeze({keygen:d,getPublicKey:h,getSharedSecret:y,utils:_,lengths:x,Point:r,sign:U,verify:K,recoverPublicKey:E,Signature:k,hash:e})}function eV(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=sd(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:s}}function tV(r){const{CURVE:e,curveOpts:t}=eV(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function nV(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Lk(t.Fn.ORDER,t.Fn.BITS))})}function rV(r){const{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:i}=tV(r),s=ZW(e,t),o=JW(s,n,i);return nV(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function iV(r,e){const t=n=>rV({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tT={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},sV={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},xC=BigInt(2);function oV(r){const e=tT.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),c=BigInt(88),d=r*r*r%e,h=d*d*r%e,y=si(h,t,e)*h%e,_=si(y,t,e)*h%e,x=si(_,xC,e)*d%e,A=si(x,i,e)*x%e,P=si(A,s,e)*A%e,I=si(P,l,e)*P%e,C=si(I,c,e)*I%e,D=si(C,l,e)*P%e,k=si(D,t,e)*h%e,F=si(k,o,e)*A%e,Q=si(F,n,e)*d%e,G=si(Q,xC,e);if(!Sb.eql(Sb.sqr(G),r))throw new Error("Cannot find square root");return G}const Sb=sd(tT.p,{sqrt:oV}),nT=iV({...tT,Fp:Sb,lowS:!0,endo:sV},xk),aV=C0.utils.randomPrivateKey,SC=()=>{const r=C0.utils.randomPrivateKey(),e=D_(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},D_=C0.getPublicKey;function MC(r){try{return C0.ExtendedPoint.fromHex(r),!0}catch{return!1}}const rT=(r,e)=>C0.sign(r,e.slice(0,32)),lV=C0.verify,Qn=r=>mn.isBuffer(r)?r:r instanceof Uint8Array?mn.from(r.buffer,r.byteOffset,r.byteLength):mn.from(r);let iT=class{constructor(e){Object.assign(this,e)}encode(){return mn.from(YS.serialize(vg,this))}static decode(e){return YS.deserialize(vg,this,e)}static decodeUnchecked(e){return YS.deserializeUnchecked(vg,this,e)}};class uV extends iT{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const vg=new Map;var uO;const cO=32,Al=32;function cV(r){return r._bn!==void 0}let EC=1;class Et extends iT{constructor(e){if(super({}),this._bn=void 0,cV(e))this._bn=e._bn;else{if(typeof e=="string"){const t=ds.decode(e);if(t.length!=Al)throw new Error("Invalid public key input");this._bn=new nC(t)}else this._bn=new nC(e);if(this._bn.byteLength()>Al)throw new Error("Invalid public key input")}}static unique(){const e=new Et(EC);return EC+=1,new Et(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ds.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(mn);if(e.length===Al)return e;const t=mn.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=mn.concat([e.toBuffer(),mn.from(t),n.toBuffer()]),s=oC(i);return new Et(s)}static createProgramAddressSync(e,t){let n=mn.alloc(0);e.forEach(function(s){if(s.length>cO)throw new TypeError("Max seed length exceeded");n=mn.concat([n,Qn(s)])}),n=mn.concat([n,t.toBuffer(),mn.from("ProgramDerivedAddress")]);const i=oC(n);if(MC(i))throw new Error("Invalid seeds, address must fall off the curve");return new Et(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(mn.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Et(e);return MC(t.toBytes())}}uO=Et;Et.default=new uO("11111111111111111111111111111111");vg.set(Et,{kind:"struct",fields:[["_bn","u256"]]});class fV{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Qn(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Qn(aV()),this._publicKey=Qn(D_(this._secretKey))}get publicKey(){return new Et(this._publicKey)}get secretKey(){return mn.concat([this._secretKey,this._publicKey],64)}}const hV=new Et("BPFLoader1111111111111111111111111111111111"),Zc=1232,J1=127,zg=64;class sT extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(sT.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class oT extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(oT.prototype,"name",{value:"TransactionExpiredTimeoutError"});class jp extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(jp.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Wg{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const rr=(r="publicKey")=>be.blob(32,r),dV=(r="signature")=>be.blob(64,r),Ch=(r="string")=>{const e=be.struct([be.u32("length"),be.u32("lengthPadding"),be.blob(be.offset(be.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,l)=>{const c={chars:mn.from(s,"utf8")};return n(c,o,l)},i.alloc=s=>be.u32().span+be.u32().span+mn.from(s,"utf8").length,i},pV=(r="authorized")=>be.struct([rr("staker"),rr("withdrawer")],r),mV=(r="lockup")=>be.struct([be.ns64("unixTimestamp"),be.ns64("epoch"),rr("custodian")],r),gV=(r="voteInit")=>be.struct([rr("nodePubkey"),rr("authorizedVoter"),rr("authorizedWithdrawer"),be.u8("commission")],r),yV=(r="voteAuthorizeWithSeedArgs")=>be.struct([be.u32("voteAuthorizationType"),rr("currentAuthorityDerivedKeyOwnerPubkey"),Ch("currentAuthorityDerivedKeySeed"),rr("newAuthorized")],r);function fO(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return fO({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function go(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Uo(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function vr(r,e){if(!r)throw new Error(e||"Assertion failed")}class ex{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const l=o.toBase58();let c=n.get(l);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const l of o.keys){const c=i(l.pubkey);c.isSigner||(c.isSigner=l.isSigner),c.isWritable||(c.isWritable=l.isWritable)}}return new ex(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];vr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{vr(t.length>0,"Expected at least one writable signer key");const[c]=t[0];vr(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...t.map(([c])=>new Et(c)),...n.map(([c])=>new Et(c)),...i.map(([c])=>new Et(c)),...s.map(([c])=>new Et(c))];return[o,l]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const l=new Et(s),c=e.findIndex(d=>d.equals(l));c>=0&&(vr(c<256,"Max lookup table index exceeded"),n.push(c),i.push(l),this.keyMetaMap.delete(s))}return[n,i]}}const hO="Reached end of buffer unexpectedly";function _l(r){if(r.length===0)throw new Error(hO);return r.shift()}function yo(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(hO);return r.splice(...e)}class qa{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Et(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ds.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Wg(this.staticAccountKeys)}static compile(e){const t=ex.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new Wg(i).compileInstructions(e.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:ds.encode(l.data)}));return new qa({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Uo(t,e);const n=this.instructions.map(y=>{const{accounts:_,programIdIndex:x}=y,A=Array.from(ds.decode(y.data));let P=[];Uo(P,_.length);let I=[];return Uo(I,A.length),{programIdIndex:x,keyIndicesCount:mn.from(P),keyIndices:_,dataLength:mn.from(I),data:A}});let i=[];Uo(i,n.length);let s=mn.alloc(Zc);mn.from(i).copy(s);let o=i.length;n.forEach(y=>{const x=be.struct([be.u8("programIdIndex"),be.blob(y.keyIndicesCount.length,"keyIndicesCount"),be.seq(be.u8("keyIndex"),y.keyIndices.length,"keyIndices"),be.blob(y.dataLength.length,"dataLength"),be.seq(be.u8("userdatum"),y.data.length,"data")]).encode(y,s,o);o+=x}),s=s.slice(0,o);const l=be.struct([be.blob(1,"numRequiredSignatures"),be.blob(1,"numReadonlySignedAccounts"),be.blob(1,"numReadonlyUnsignedAccounts"),be.blob(t.length,"keyCount"),be.seq(rr("key"),e,"keys"),rr("recentBlockhash")]),c={numRequiredSignatures:mn.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:mn.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:mn.from([this.header.numReadonlyUnsignedAccounts]),keyCount:mn.from(t),keys:this.accountKeys.map(y=>Qn(y.toBytes())),recentBlockhash:ds.decode(this.recentBlockhash)};let d=mn.alloc(2048);const h=l.encode(c,d);return s.copy(d,h),d.slice(0,h+s.length)}static from(e){let t=[...e];const n=_l(t);if(n!==(n&J1))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=_l(t),s=_l(t),o=go(t);let l=[];for(let _=0;_<o;_++){const x=yo(t,0,Al);l.push(new Et(mn.from(x)))}const c=yo(t,0,Al),d=go(t);let h=[];for(let _=0;_<d;_++){const x=_l(t),A=go(t),P=yo(t,0,A),I=go(t),C=yo(t,0,I),D=ds.encode(mn.from(C));h.push({programIdIndex:x,accounts:P,data:D})}const y={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:ds.encode(mn.from(c)),accountKeys:l,instructions:h};return new qa(y)}}class Zh{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Wg(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,l)=>o+l.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=ex.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const h of s){const y=t.extractTableLookup(h);if(y!==void 0){const[_,{writable:x,readonly:A}]=y;n.push(_),i.writable.push(...x),i.readonly.push(...A)}}const[o,l]=t.getMessageComponents(),d=new Wg(l,i).compileInstructions(e.instructions);return new Zh({header:o,staticAccountKeys:l,recentBlockhash:e.recentBlockhash,compiledInstructions:d,addressTableLookups:n})}serialize(){const e=Array();Uo(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Uo(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Uo(s,this.addressTableLookups.length);const o=be.struct([be.u8("prefix"),be.struct([be.u8("numRequiredSignatures"),be.u8("numReadonlySignedAccounts"),be.u8("numReadonlyUnsignedAccounts")],"header"),be.blob(e.length,"staticAccountKeysLength"),be.seq(rr(),this.staticAccountKeys.length,"staticAccountKeys"),rr("recentBlockhash"),be.blob(n.length,"instructionsLength"),be.blob(t.length,"serializedInstructions"),be.blob(s.length,"addressTableLookupsLength"),be.blob(i.length,"serializedAddressTableLookups")]),l=new Uint8Array(Zc),d=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:ds.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},l);return l.slice(0,d)}serializeInstructions(){let e=0;const t=new Uint8Array(Zc);for(const n of this.compiledInstructions){const i=Array();Uo(i,n.accountKeyIndexes.length);const s=Array();Uo(s,n.data.length);const o=be.struct([be.u8("programIdIndex"),be.blob(i.length,"encodedAccountKeyIndexesLength"),be.seq(be.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),be.blob(s.length,"encodedDataLength"),be.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Zc);for(const n of this.addressTableLookups){const i=Array();Uo(i,n.writableIndexes.length);const s=Array();Uo(s,n.readonlyIndexes.length);const o=be.struct([rr("accountKey"),be.blob(i.length,"encodedWritableIndexesLength"),be.seq(be.u8(),n.writableIndexes.length,"writableIndexes"),be.blob(s.length,"encodedReadonlyIndexesLength"),be.seq(be.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=_l(t),i=n&J1;vr(n!==i,"Expected versioned message but received legacy message");const s=i;vr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:_l(t),numReadonlySignedAccounts:_l(t),numReadonlyUnsignedAccounts:_l(t)},l=[],c=go(t);for(let A=0;A<c;A++)l.push(new Et(yo(t,0,Al)));const d=ds.encode(yo(t,0,Al)),h=go(t),y=[];for(let A=0;A<h;A++){const P=_l(t),I=go(t),C=yo(t,0,I),D=go(t),k=new Uint8Array(yo(t,0,D));y.push({programIdIndex:P,accountKeyIndexes:C,data:k})}const _=go(t),x=[];for(let A=0;A<_;A++){const P=new Et(yo(t,0,Al)),I=go(t),C=yo(t,0,I),D=go(t),k=yo(t,0,D);x.push({accountKey:P,writableIndexes:C,readonlyIndexes:k})}return new Zh({header:o,staticAccountKeys:l,recentBlockhash:d,compiledInstructions:y,addressTableLookups:x})}}const aT={deserializeMessageVersion(r){const e=r[0],t=e&J1;return t===e?"legacy":t},deserialize:r=>{const e=aT.deserializeMessageVersion(r);if(e==="legacy")return qa.from(r);if(e===0)return Zh.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Eu=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({});const vV=mn.alloc(zg).fill(0);class Ir{constructor(e){this.keys=void 0,this.programId=void 0,this.data=mn.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class cr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Ir(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let P=0;P<t.length;P++)if(t[P].programId===void 0)throw new Error(`Transaction instruction index ${P} has undefined program id`);const i=[],s=[];t.forEach(P=>{P.keys.forEach(C=>{s.push({...C})});const I=P.programId.toString();i.includes(I)||i.push(I)}),i.forEach(P=>{s.push({pubkey:new Et(P),isSigner:!1,isWritable:!1})});const o=[];s.forEach(P=>{const I=P.pubkey.toString(),C=o.findIndex(D=>D.pubkey.toString()===I);C>-1?(o[C].isWritable=o[C].isWritable||P.isWritable,o[C].isSigner=o[C].isSigner||P.isSigner):o.push(P)}),o.sort(function(P,I){if(P.isSigner!==I.isSigner)return P.isSigner?-1:1;if(P.isWritable!==I.isWritable)return P.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return P.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",C)});const l=o.findIndex(P=>P.pubkey.equals(n));if(l>-1){const[P]=o.splice(l,1);P.isSigner=!0,P.isWritable=!0,o.unshift(P)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const P of this.signatures){const I=o.findIndex(C=>C.pubkey.equals(P.publicKey));if(I>-1)o[I].isSigner||(o[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${P.publicKey.toString()}`)}let c=0,d=0,h=0;const y=[],_=[];o.forEach(({pubkey:P,isSigner:I,isWritable:C})=>{I?(y.push(P.toString()),c+=1,C||(d+=1)):(_.push(P.toString()),C||(h+=1))});const x=y.concat(_),A=t.map(P=>{const{data:I,programId:C}=P;return{programIdIndex:x.indexOf(C.toString()),accounts:P.keys.map(D=>x.indexOf(D.pubkey.toString())),data:ds.encode(I)}});return A.forEach(P=>{vr(P.programIdIndex>=0),P.accounts.forEach(I=>vr(I>=0))}),new qa({header:{numRequiredSignatures:c,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:h},accountKeys:x,recentBlockhash:e,instructions:A})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=rT(n,i.secretKey);this._addSignature(i.publicKey,Qn(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){vr(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=mn.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(n.missing||(n.missing=[])).push(s):lV(i,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];Uo(n,t.length);const i=n.length+t.length*64+e.length,s=mn.alloc(i);return vr(t.length<256),mn.from(n).copy(s,0),t.forEach(({signature:o},l)=>{o!==null&&(vr(o.length===64,"signature has invalid length"),mn.from(o).copy(s,n.length+l*64))}),e.copy(s,n.length+t.length*64),vr(s.length<=Zc,`Transaction too large: ${s.length} > ${Zc}`),s}get keys(){return vr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return vr(this.instructions.length===1),this.instructions[0].programId}get data(){return vr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=go(t);let i=[];for(let s=0;s<n;s++){const o=yo(t,0,zg);i.push(ds.encode(mn.from(o)))}return cr.populate(qa.from(t),i)}static populate(e,t=[]){const n=new cr;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==ds.encode(vV)?null:ds.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const l=e.accountKeys[o];return{pubkey:l,isSigner:n.signatures.some(c=>c.publicKey.toString()===l.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Ir({keys:s,programId:e.accountKeys[i.programIdIndex],data:ds.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class lT{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:c}=n,d=o-l;vr(d>0,"Message header is invalid");const h=e.staticAccountKeys.length-o-c;vr(h>=0,"Message header is invalid");const y=e.getAccountKeys(t),_=y.get(0);if(_===void 0)throw new Error("Failed to decompile message because no account keys were found");const x=[];for(const A of i){const P=[];for(const C of A.accountKeyIndexes){const D=y.get(C);if(D===void 0)throw new Error(`Failed to find key for account key index ${C}`);const k=C<o;let F;k?F=C<d:C<y.staticAccountKeys.length?F=C-o<h:F=C-y.staticAccountKeys.length<y.accountKeysFromLookups.writable.length,P.push({pubkey:D,isSigner:C<n.numRequiredSignatures,isWritable:F})}const I=y.get(A.programIdIndex);if(I===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);x.push(new Ir({programId:I,data:Qn(A.data),keys:P}))}return new lT({payerKey:_,instructions:x,recentBlockhash:s})}compileToLegacyMessage(){return qa.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Zh.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Vg{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)vr(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(zg));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Uo(t,this.signatures.length);const n=be.struct([be.blob(t.length,"encodedSignaturesLength"),be.seq(dV(),this.signatures.length,"signatures"),be.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=go(t);for(let o=0;o<i;o++)n.push(new Uint8Array(yo(t,0,zg)));const s=aT.deserialize(new Uint8Array(t));return new Vg(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));vr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=rT(t,i.secretKey)}}addSignature(e,t){vr(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));vr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const wV=160,_V=64,xV=wV/_V,dO=1e3/xV,yl=new Et("SysvarC1ock11111111111111111111111111111111"),SV=new Et("SysvarEpochSchedu1e111111111111111111111111"),MV=new Et("Sysvar1nstructions1111111111111111111111111"),l_=new Et("SysvarRecentB1ockHashes11111111111111111111"),Qh=new Et("SysvarRent111111111111111111111111111111111"),EV=new Et("SysvarRewards111111111111111111111111111111"),bV=new Et("SysvarS1otHashes111111111111111111111111111"),AV=new Et("SysvarS1otHistory11111111111111111111111111"),u_=new Et("SysvarStakeHistory1111111111111111111111111");class tf extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(e){case"send":l=`Transaction ${t} resulted in an error. 
${n}. `+s+o;break;case"simulate":l=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:l=`Unknown action '${(c=>c)(e)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const TV={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class xn extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function Mb(r,e,t,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await r.sendTransaction(e,t,i);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:l}=e.nonceInfo,c=l.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw s!=null?new tf({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Mh(r){return new Promise(e=>setTimeout(e,r))}function ur(r,e){const t=r.layout.span>=0?r.layout.span:fO(r,e),n=mn.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}function Sr(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${r.index}`);return t}const pO=be.nu64("lamportsPerSignature"),mO=be.struct([be.u32("version"),be.u32("state"),rr("authorizedPubkey"),rr("nonce"),be.struct([pO],"feeCalculator")]),Eb=mO.span;class tx{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=mO.decode(Qn(e),0);return new tx({authorizedPubkey:new Et(t.authorizedPubkey),nonce:new Et(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function g0(r){const e=be.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,s=rW();return i.decode=(o,l)=>{const c=t(o,l);return s.decode(c)},i.encode=(o,l,c)=>{const d=s.encode(o);return n(d,l,c)},i}class RV{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=be.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(zr))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:i}=Sr(zr.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new Et(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Sr(zr.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:i}=Sr(zr.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new Et(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Sr(zr.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:i,programId:s}=Sr(zr.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Et(t),seed:n,space:i,programId:new Et(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Sr(zr.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Et(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:i}=Sr(zr.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Et(t),seed:n,programId:new Et(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:i,space:s,programId:o}=Sr(zr.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Et(t),seed:n,lamports:i,space:s,programId:new Et(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Sr(zr.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Et(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Sr(zr.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Sr(zr.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Sr(zr.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Et(t)}}static checkProgramId(e){if(!e.equals(Ci.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const zr=Object.freeze({Create:{index:0,layout:be.struct([be.u32("instruction"),be.ns64("lamports"),be.ns64("space"),rr("programId")])},Assign:{index:1,layout:be.struct([be.u32("instruction"),rr("programId")])},Transfer:{index:2,layout:be.struct([be.u32("instruction"),g0("lamports")])},CreateWithSeed:{index:3,layout:be.struct([be.u32("instruction"),rr("base"),Ch("seed"),be.ns64("lamports"),be.ns64("space"),rr("programId")])},AdvanceNonceAccount:{index:4,layout:be.struct([be.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:be.struct([be.u32("instruction"),be.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:be.struct([be.u32("instruction"),rr("authorized")])},AuthorizeNonceAccount:{index:7,layout:be.struct([be.u32("instruction"),rr("authorized")])},Allocate:{index:8,layout:be.struct([be.u32("instruction"),be.ns64("space")])},AllocateWithSeed:{index:9,layout:be.struct([be.u32("instruction"),rr("base"),Ch("seed"),be.ns64("space"),rr("programId")])},AssignWithSeed:{index:10,layout:be.struct([be.u32("instruction"),rr("base"),Ch("seed"),rr("programId")])},TransferWithSeed:{index:11,layout:be.struct([be.u32("instruction"),g0("lamports"),Ch("seed"),rr("programId")])},UpgradeNonceAccount:{index:12,layout:be.struct([be.u32("instruction")])}});class Ci{constructor(){}static createAccount(e){const t=zr.Create,n=ur(t,{lamports:e.lamports,space:e.space,programId:Qn(e.programId.toBuffer())});return new Ir({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=zr.TransferWithSeed;t=ur(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=zr.Transfer;t=ur(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ir({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=zr.AssignWithSeed;t=ur(i,{base:Qn(e.basePubkey.toBuffer()),seed:e.seed,programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=zr.Assign;t=ur(i,{programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ir({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=zr.CreateWithSeed,n=ur(t,{base:Qn(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Qn(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ir({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new cr;"basePubkey"in e&&"seed"in e?t.add(Ci.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Eb,programId:this.programId})):t.add(Ci.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Eb,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=zr.InitializeNonceAccount,n=ur(t,{authorized:Qn(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:l_,isSigner:!1,isWritable:!1},{pubkey:Qh,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ir(i)}static nonceAdvance(e){const t=zr.AdvanceNonceAccount,n=ur(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:l_,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ir(i)}static nonceWithdraw(e){const t=zr.WithdrawNonceAccount,n=ur(t,{lamports:e.lamports});return new Ir({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:l_,isSigner:!1,isWritable:!1},{pubkey:Qh,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=zr.AuthorizeNonceAccount,n=ur(t,{authorized:Qn(e.newAuthorizedPubkey.toBuffer())});return new Ir({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=zr.AllocateWithSeed;t=ur(i,{base:Qn(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Qn(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=zr.Allocate;t=ur(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ir({keys:n,programId:this.programId,data:t})}}Ci.programId=new Et("11111111111111111111111111111111");const CV=Zc-300;let B_=class bb{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/bb.chunkSize)+1+1)}static async load(e,t,n,i,s){{const y=await e.getMinimumBalanceForRentExemption(s.length),_=await e.getAccountInfo(n.publicKey,"confirmed");let x=null;if(_!==null){if(_.executable)return console.error("Program load failed, account is already executable"),!1;_.data.length!==s.length&&(x=x||new cr,x.add(Ci.allocate({accountPubkey:n.publicKey,space:s.length}))),_.owner.equals(i)||(x=x||new cr,x.add(Ci.assign({accountPubkey:n.publicKey,programId:i}))),_.lamports<y&&(x=x||new cr,x.add(Ci.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:y-_.lamports})))}else x=new cr().add(Ci.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:y>0?y:1,space:s.length,programId:i}));x!==null&&await Mb(e,x,[t,n],{commitment:"confirmed"})}const o=be.struct([be.u32("instruction"),be.u32("offset"),be.u32("bytesLength"),be.u32("bytesLengthPadding"),be.seq(be.u8("byte"),be.offset(be.u32(),-8),"bytes")]),l=bb.chunkSize;let c=0,d=s,h=[];for(;d.length>0;){const y=d.slice(0,l),_=mn.alloc(l+16);o.encode({instruction:0,offset:c,bytes:y,bytesLength:0,bytesLengthPadding:0},_);const x=new cr().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:_});h.push(Mb(e,x,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Mh(1e3/4),c+=l,d=d.slice(l)}await Promise.all(h);{const y=be.struct([be.u32("instruction")]),_=mn.alloc(y.span);y.encode({instruction:1},_);const x=new cr().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Qh,isSigner:!1,isWritable:!1}],programId:i,data:_}),A="processed",P=await e.sendTransaction(x,[t,n],{preflightCommitment:A}),{context:I,value:C}=await e.confirmTransaction({signature:P,lastValidBlockHeight:x.lastValidBlockHeight,blockhash:x.recentBlockhash},A);if(C.err)throw new Error(`Transaction ${P} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:A})>I.slot)break}catch{}await new Promise(D=>setTimeout(D,Math.round(dO/2)))}}return!0}};B_.chunkSize=CV;const IV=new Et("BPFLoader2111111111111111111111111111111111");class NV{static getMinNumSignatures(e){return B_.getMinNumSignatures(e)}static load(e,t,n,i,s){return B_.load(e,t,n,s,i)}}function PV(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var iM,bC;function LV(){if(bC)return iM;bC=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function t(n,i){var s,o,l,c,d,h,y;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(y=r.call(n),y==="[object Array]"){for(l="[",o=n.length-1,s=0;s<o;s++)l+=t(n[s],!0)+",";return o>-1&&(l+=t(n[s],!0)),l+"]"}else if(y==="[object Object]"){for(c=e(n).sort(),o=c.length,l="",s=0;s<o;)d=c[s],h=t(n[d],!1),h!==void 0&&(l&&(l+=","),l+=JSON.stringify(d)+":"+h),s++;return"{"+l+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return iM=function(n){var i=t(n,!1);if(i!==void 0)return""+i},iM}var kV=LV(),AC=PV(kV);const Bm=32;function sM(r){let e=0;for(;r>1;)r/=2,e++;return e}function OV(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class gO{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=sM(OV(e+Bm+1))-sM(Bm)-1,n=this.getSlotsInEpoch(t),i=e-(n-Bm);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Bm:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+sM(Bm)):this.slotsPerEpoch}}var DV=globalThis.fetch;class BV extends UW{constructor(e,t,n){const i=s=>{const o=DW(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var n;const t=(n=this.underlyingSocket)==null?void 0:n.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function UV(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const TC=56;class Ab{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=UV(FV,e),n=e.length-TC;vr(n>=0,"lookup table is invalid"),vr(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=be.struct([be.seq(rr(),i,"addresses")]).decode(e.slice(TC));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Et(t.authority[0]):void 0,addresses:s.map(o=>new Et(o))}}}const FV={index:1,layout:be.struct([be.u32("typeIndex"),g0("deactivationSlot"),be.nu64("lastExtendedSlot"),be.u8("lastExtendedStartIndex"),be.u8(),be.seq(rr(),be.offset(be.u8(),-1),"authority")])},zV=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function WV(r){const e=r.match(zV);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",l=i==null?null:parseInt(i.slice(1),10),c=l==null?"":`:${l+1}`;return`${o}//${n}${c}${s}`}const ei=by(ZA(Et),Gt(),r=>new Et(r)),yO=QA([Gt(),Zr("base64")]),uT=by(ZA(mn),yO,r=>mn.from(r[0],"base64")),vO=30*1e3;function VV(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Ur(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function RC(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function wO(r){return Qs([Nt({jsonrpc:Zr("2.0"),id:Gt(),result:r}),Nt({jsonrpc:Zr("2.0"),id:Gt(),error:Nt({code:N0(),message:Gt(),data:An(uW())})})])}const HV=wO(N0());function Zn(r){return by(wO(r),HV,e=>"error"in e?e:{...e,result:Xt(e.result,r)})}function mi(r){return Zn(Nt({context:Nt({slot:tt()}),value:r}))}function nx(r){return Nt({context:Nt({slot:tt()}),value:r})}function oM(r,e){return r===0?new Zh({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Et(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ds.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new qa(e)}const GV=Nt({foundation:tt(),foundationTerm:tt(),initial:tt(),taper:tt(),terminal:tt()}),jV=Zn(tn(nn(Nt({epoch:tt(),effectiveSlot:tt(),amount:tt(),postBalance:tt(),commission:An(nn(tt()))})))),qV=tn(Nt({slot:tt(),prioritizationFee:tt()})),KV=Nt({total:tt(),validator:tt(),foundation:tt(),epoch:tt()}),YV=Nt({epoch:tt(),slotIndex:tt(),slotsInEpoch:tt(),absoluteSlot:tt(),blockHeight:An(tt()),transactionCount:An(tt())}),XV=Nt({slotsPerEpoch:tt(),leaderScheduleSlotOffset:tt(),warmup:Pl(),firstNormalEpoch:tt(),firstNormalSlot:tt()}),$V=Kk(Gt(),tn(tt())),ad=nn(Qs([Nt({}),Gt()])),ZV=Nt({err:ad}),QV=Zr("receivedSignature"),JV=Nt({"solana-core":Gt(),"feature-set":An(tt())}),eH=Nt({program:Gt(),programId:ei,parsed:N0()}),tH=Nt({programId:ei,accounts:tn(ei),data:Gt()}),CC=mi(Nt({err:nn(Qs([Nt({}),Gt()])),logs:nn(tn(Gt())),accounts:An(nn(tn(nn(Nt({executable:Pl(),owner:Gt(),lamports:tt(),data:tn(Gt()),rentEpoch:An(tt())}))))),unitsConsumed:An(tt()),returnData:An(nn(Nt({programId:Gt(),data:QA([Gt(),Zr("base64")])}))),innerInstructions:An(nn(tn(Nt({index:tt(),instructions:tn(Qs([eH,tH]))}))))})),nH=mi(Nt({byIdentity:Kk(Gt(),tn(tt())),range:Nt({firstSlot:tt(),lastSlot:tt()})}));function rH(r,e,t,n,i,s){const o=t||DV;let l;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(h,y)=>{const _=await new Promise((x,A)=>{try{n(h,y,(P,I)=>x([P,I]))}catch(P){A(P)}});return await o(..._)}),new LW(async(h,y)=>{const _={method:"POST",body:h,agent:l,headers:Object.assign({"Content-Type":"application/json"},e||{},r7)};try{let x=5,A,P=500;for(;c?A=await c(r,_):A=await o(r,_),!(A.status!==429||i===!0||(x-=1,x===0));)console.error(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${P}ms delay...`),await Mh(P),P*=2;const I=await A.text();A.ok?y(null,I):y(new Error(`${A.status} ${A.statusText}: ${I}`))}catch(x){x instanceof Error&&y(x)}},{})}function iH(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function sH(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const oH=Zn(GV),aH=Zn(KV),lH=Zn(qV),uH=Zn(YV),cH=Zn(XV),fH=Zn($V),hH=Zn(tt()),dH=mi(Nt({total:tt(),circulating:tt(),nonCirculating:tt(),nonCirculatingAccounts:tn(ei)})),Tb=Nt({amount:Gt(),uiAmount:nn(tt()),decimals:tt(),uiAmountString:An(Gt())}),pH=mi(tn(Nt({address:ei,amount:Gt(),uiAmount:nn(tt()),decimals:tt(),uiAmountString:An(Gt())}))),mH=mi(tn(Nt({pubkey:ei,account:Nt({executable:Pl(),owner:ei,lamports:tt(),data:uT,rentEpoch:tt()})}))),Rb=Nt({program:Gt(),parsed:N0(),space:tt()}),gH=mi(tn(Nt({pubkey:ei,account:Nt({executable:Pl(),owner:ei,lamports:tt(),data:Rb,rentEpoch:tt()})}))),yH=mi(tn(Nt({lamports:tt(),address:ei}))),Hg=Nt({executable:Pl(),owner:ei,lamports:tt(),data:uT,rentEpoch:tt()}),vH=Nt({pubkey:ei,account:Hg}),wH=by(Qs([ZA(mn),Rb]),Qs([yO,Rb]),r=>Array.isArray(r)?Xt(r,uT):r),Cb=Nt({executable:Pl(),owner:ei,lamports:tt(),data:wH,rentEpoch:tt()}),_H=Nt({pubkey:ei,account:Cb}),xH=Nt({state:Qs([Zr("active"),Zr("inactive"),Zr("activating"),Zr("deactivating")]),active:tt(),inactive:tt()}),SH=Zn(tn(Nt({signature:Gt(),slot:tt(),err:ad,memo:nn(Gt()),blockTime:An(nn(tt()))}))),MH=Zn(tn(Nt({signature:Gt(),slot:tt(),err:ad,memo:nn(Gt()),blockTime:An(nn(tt()))}))),EH=Nt({subscription:tt(),result:nx(Hg)}),bH=Nt({pubkey:ei,account:Hg}),AH=Nt({subscription:tt(),result:nx(bH)}),TH=Nt({parent:tt(),slot:tt(),root:tt()}),RH=Nt({subscription:tt(),result:TH}),CH=Qs([Nt({type:Qs([Zr("firstShredReceived"),Zr("completed"),Zr("optimisticConfirmation"),Zr("root")]),slot:tt(),timestamp:tt()}),Nt({type:Zr("createdBank"),parent:tt(),slot:tt(),timestamp:tt()}),Nt({type:Zr("frozen"),slot:tt(),timestamp:tt(),stats:Nt({numTransactionEntries:tt(),numSuccessfulTransactions:tt(),numFailedTransactions:tt(),maxTransactionsPerEntry:tt()})}),Nt({type:Zr("dead"),slot:tt(),timestamp:tt(),err:Gt()})]),IH=Nt({subscription:tt(),result:CH}),NH=Nt({subscription:tt(),result:nx(Qs([ZV,QV]))}),PH=Nt({subscription:tt(),result:tt()}),LH=Nt({pubkey:Gt(),gossip:nn(Gt()),tpu:nn(Gt()),rpc:nn(Gt()),version:nn(Gt())}),IC=Nt({votePubkey:Gt(),nodePubkey:Gt(),activatedStake:tt(),epochVoteAccount:Pl(),epochCredits:tn(QA([tt(),tt(),tt()])),commission:tt(),lastVote:tt(),rootSlot:nn(tt())}),kH=Zn(Nt({current:tn(IC),delinquent:tn(IC)})),OH=Qs([Zr("processed"),Zr("confirmed"),Zr("finalized")]),DH=Nt({slot:tt(),confirmations:nn(tt()),err:ad,confirmationStatus:An(OH)}),BH=mi(tn(nn(DH))),UH=Zn(tt()),_O=Nt({accountKey:ei,writableIndexes:tn(tt()),readonlyIndexes:tn(tt())}),cT=Nt({signatures:tn(Gt()),message:Nt({accountKeys:tn(Gt()),header:Nt({numRequiredSignatures:tt(),numReadonlySignedAccounts:tt(),numReadonlyUnsignedAccounts:tt()}),instructions:tn(Nt({accounts:tn(tt()),data:Gt(),programIdIndex:tt()})),recentBlockhash:Gt(),addressTableLookups:An(tn(_O))})}),xO=Nt({pubkey:ei,signer:Pl(),writable:Pl(),source:An(Qs([Zr("transaction"),Zr("lookupTable")]))}),SO=Nt({accountKeys:tn(xO),signatures:tn(Gt())}),MO=Nt({parsed:N0(),program:Gt(),programId:ei}),EO=Nt({accounts:tn(ei),data:Gt(),programId:ei}),FH=Qs([EO,MO]),zH=Qs([Nt({parsed:N0(),program:Gt(),programId:Gt()}),Nt({accounts:tn(Gt()),data:Gt(),programId:Gt()})]),bO=by(FH,zH,r=>"accounts"in r?Xt(r,EO):Xt(r,MO)),AO=Nt({signatures:tn(Gt()),message:Nt({accountKeys:tn(xO),instructions:tn(bO),recentBlockhash:Gt(),addressTableLookups:An(nn(tn(_O)))})}),U_=Nt({accountIndex:tt(),mint:Gt(),owner:An(Gt()),programId:An(Gt()),uiTokenAmount:Tb}),TO=Nt({writable:tn(ei),readonly:tn(ei)}),rx=Nt({err:ad,fee:tt(),innerInstructions:An(nn(tn(Nt({index:tt(),instructions:tn(Nt({accounts:tn(tt()),data:Gt(),programIdIndex:tt()}))})))),preBalances:tn(tt()),postBalances:tn(tt()),logMessages:An(nn(tn(Gt()))),preTokenBalances:An(nn(tn(U_))),postTokenBalances:An(nn(tn(U_))),loadedAddresses:An(TO),computeUnitsConsumed:An(tt()),costUnits:An(tt())}),fT=Nt({err:ad,fee:tt(),innerInstructions:An(nn(tn(Nt({index:tt(),instructions:tn(bO)})))),preBalances:tn(tt()),postBalances:tn(tt()),logMessages:An(nn(tn(Gt()))),preTokenBalances:An(nn(tn(U_))),postTokenBalances:An(nn(tn(U_))),loadedAddresses:An(TO),computeUnitsConsumed:An(tt()),costUnits:An(tt())}),P0=Qs([Zr(0),Zr("legacy")]),ld=Nt({pubkey:Gt(),lamports:tt(),postBalance:nn(tt()),rewardType:nn(Gt()),commission:An(nn(tt()))}),WH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),transactions:tn(Nt({transaction:cT,meta:nn(rx),version:An(P0)})),rewards:An(tn(ld)),blockTime:nn(tt()),blockHeight:nn(tt())}))),VH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),rewards:An(tn(ld)),blockTime:nn(tt()),blockHeight:nn(tt())}))),HH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),transactions:tn(Nt({transaction:SO,meta:nn(rx),version:An(P0)})),rewards:An(tn(ld)),blockTime:nn(tt()),blockHeight:nn(tt())}))),GH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),transactions:tn(Nt({transaction:AO,meta:nn(fT),version:An(P0)})),rewards:An(tn(ld)),blockTime:nn(tt()),blockHeight:nn(tt())}))),jH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),transactions:tn(Nt({transaction:SO,meta:nn(fT),version:An(P0)})),rewards:An(tn(ld)),blockTime:nn(tt()),blockHeight:nn(tt())}))),qH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),rewards:An(tn(ld)),blockTime:nn(tt()),blockHeight:nn(tt())}))),KH=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),transactions:tn(Nt({transaction:cT,meta:nn(rx)})),rewards:An(tn(ld)),blockTime:nn(tt())}))),NC=Zn(nn(Nt({blockhash:Gt(),previousBlockhash:Gt(),parentSlot:tt(),signatures:tn(Gt()),blockTime:nn(tt())}))),aM=Zn(nn(Nt({slot:tt(),meta:nn(rx),blockTime:An(nn(tt())),transaction:cT,version:An(P0)}))),$v=Zn(nn(Nt({slot:tt(),transaction:AO,meta:nn(fT),blockTime:An(nn(tt())),version:An(P0)}))),YH=mi(Nt({blockhash:Gt(),lastValidBlockHeight:tt()})),XH=mi(Pl()),$H=Nt({slot:tt(),numTransactions:tt(),numSlots:tt(),samplePeriodSecs:tt()}),ZH=Zn(tn($H)),QH=mi(nn(Nt({feeCalculator:Nt({lamportsPerSignature:tt()})}))),JH=Zn(Gt()),e7=Zn(Gt()),t7=Nt({err:ad,logs:tn(Gt()),signature:Gt()}),n7=Nt({result:nx(t7),subscription:tt()}),r7={"solana-client":"js/1.0.0-maintenance"};class RO{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const d={};return async h=>{const{commitment:y,config:_}=Ur(h),x=this._buildArgs([],y,void 0,_),A=AC(x);return d[A]=d[A]??(async()=>{try{const P=await this._rpcRequest("getBlockHeight",x),I=Xt(P,Zn(tt()));if("error"in I)throw new xn(I.error,"failed to get block height information");return I.result}finally{delete d[A]}})(),await d[A]}})();let n,i,s,o,l,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,l=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=VV(e),this._rpcWsEndpoint=n||WV(e),this._rpcClient=rH(e,i,s,o,l,c),this._rpcRequest=iH(this._rpcClient),this._rpcBatchRequest=sH(this._rpcClient),this._rpcWebSocket=new BV(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),l=Xt(o,mi(tt()));if("error"in l)throw new xn(l.error,`failed to get balance for ${e.toBase58()}`);return l.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=Xt(t,Zn(nn(tt())));if("error"in n)throw new xn(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=Xt(e,Zn(tt()));if("error"in t)throw new xn(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=Xt(e,hH);if("error"in t)throw new xn(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=Xt(n,dH);if("error"in i)throw new xn(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=Xt(i,mi(Tb));if("error"in s)throw new xn(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=Xt(i,mi(Tb));if("error"in s)throw new xn(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=Ur(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const l=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",l),d=Xt(c,mH);if("error"in d)throw new xn(d.error,`failed to get token accounts owned by account ${e.toBase58()}`);return d.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),l=Xt(o,gH);if("error"in l)throw new xn(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=Xt(i,yH);if("error"in s)throw new xn(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=Xt(i,pH);if("error"in s)throw new xn(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),l=Xt(o,mi(nn(Hg)));if("error"in l)throw new xn(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),l=Xt(o,mi(nn(Cb)));if("error"in l)throw new xn(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=Ur(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),l=await this._rpcRequest("getMultipleAccounts",o),c=Xt(l,mi(tn(nn(Cb))));if("error"in c)throw new xn(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=Ur(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"base64",i),l=await this._rpcRequest("getMultipleAccounts",o),c=Xt(l,mi(tn(nn(Hg))));if("error"in c)throw new xn(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=Ur(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),l=await this._rpcRequest("getStakeActivation",o),c=Xt(l,Zn(xH));if("error"in c)throw new xn(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=Ur(t),{encoding:s,...o}=i||{},l=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:RC(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",l),d=tn(vH),h=o.withContext===!0?Xt(c,mi(d)):Xt(c,Zn(d));if("error"in h)throw new xn(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),l=Xt(o,Zn(tn(_H)));if("error"in l)throw new xn(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async confirmTransaction(e,t){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=ds.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return vr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((c,d)=>{try{n=this.onSignature(t,(y,_)=>{n=void 0;const x={context:_,value:y};c({__type:Eu.PROCESSED,response:x})},e);const h=new Promise(y=>{n==null?y():i=this._onSubscriptionStateChange(n,_=>{_==="subscribed"&&y()})});(async()=>{if(await h,s)return;const y=await this.getSignatureStatus(t);if(s||y==null)return;const{context:_,value:x}=y;if(x!=null)if(x!=null&&x.err)d(x.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:Eu.PROCESSED,response:{context:_,value:x}})}})()}catch(h){d(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(y=>{const _=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let x=await _();if(!s){for(;x<=n;)if(await Mh(1e3),s||(x=await _(),s))return;y({__type:Eu.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),d=this.getCancellationPromise(t);let h;try{const y=await Promise.race([d,c,o]);if(y.__type===Eu.PROCESSED)h=y.response;else throw new sT(i)}finally{s=!0,l()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let l=!1;const c=new Promise(x=>{let A=s,P=null;const I=async()=>{try{const{context:C,value:D}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return P=C.slot,D==null?void 0:D.nonce}catch{return A}};(async()=>{if(A=await I(),!l)for(;;){if(s!==A){x({__type:Eu.NONCE_INVALID,slotInWhichNonceDidAdvance:P});return}if(await Mh(2e3),l||(A=await I(),l))return}})()}),{abortConfirmation:d,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),y=this.getCancellationPromise(t);let _;try{const x=await Promise.race([y,h,c]);if(x.__type===Eu.PROCESSED)_=x.response;else{let A;for(;;){const P=await this.getSignatureStatus(o);if(P==null)break;if(P.context.slot<(x.slotInWhichNonceDidAdvance??n)){await Mh(400);continue}A=P;break}if(A!=null&&A.value){const P=e||"finalized",{confirmationStatus:I}=A.value;switch(P){case"processed":case"recent":if(I!=="processed"&&I!=="confirmed"&&I!=="finalized")throw new jp(o);break;case"confirmed":case"single":case"singleGossip":if(I!=="confirmed"&&I!=="finalized")throw new jp(o);break;case"finalized":case"max":case"root":if(I!=="finalized")throw new jp(o);break;default:}_={context:A.context,value:{err:A.value.err}}}else throw new jp(o)}}finally{l=!0,d()}return _}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(c=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{d=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:Eu.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let l;try{const c=await Promise.race([o,i]);if(c.__type===Eu.PROCESSED)l=c.response;else throw new oT(t,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return l}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=Xt(e,Zn(tn(LH)));if("error"in t)throw new xn(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=Xt(n,kH);if("error"in i)throw new xn(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=Ur(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=Xt(s,Zn(tt()));if("error"in o)throw new xn(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Ur(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=Xt(s,Zn(Gt()));if("error"in o)throw new xn(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=Xt(i,Zn(tn(ei)));if("error"in s)throw new xn(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);vr(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=Xt(i,BH);if("error"in s)throw new xn(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=Ur(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=Xt(s,Zn(tt()));if("error"in o)throw new xn(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=Xt(n,oH);if("error"in i)throw new xn(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=Ur(n),o=this._buildArgs([e.map(d=>d.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),l=await this._rpcRequest("getInflationReward",o),c=Xt(l,jV);if("error"in c)throw new xn(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=Xt(e,aH);if("error"in t)throw new xn(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Ur(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=Xt(s,uH);if("error"in o)throw new xn(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=Xt(e,cH);if("error"in t)throw new xn(t.error,"failed to get epoch schedule");const n=t.result;return new gO(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=Xt(e,fH);if("error"in t)throw new xn(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=Xt(i,UH);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=Xt(t,ZH);if("error"in n)throw new xn(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=Xt(i,QH);if("error"in s)throw new xn(s.error,"failed to get fee calculator");const{context:o,value:l}=s.result;return{context:o,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(e,t){const n=Qn(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=Xt(s,mi(nn(tt())));if("error"in o)throw new xn(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(l=>l.toBase58()),n=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=Xt(i,lH);if("error"in s)throw new xn(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Ur(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=Xt(s,YH);if("error"in o)throw new xn(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),l=Xt(o,XH);if("error"in l)throw new xn(l.error,"failed to determine if the blockhash `"+e+"`is valid");return l.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=Xt(e,Zn(JV));if("error"in t)throw new xn(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=Xt(e,Zn(Gt()));if("error"in t)throw new xn(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const l=Xt(o,HH);if("error"in l)throw l.error;return l.result}case"none":{const l=Xt(o,VH);if("error"in l)throw l.error;return l.result}default:{const l=Xt(o,WH);if("error"in l)throw l.error;const{result:c}=l;return c?{...c,transactions:c.transactions.map(({transaction:d,meta:h,version:y})=>({meta:h,transaction:{...d,message:oM(y,d.message)},version:y}))}:null}}}catch(l){throw new xn(l,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const l=Xt(o,jH);if("error"in l)throw l.error;return l.result}case"none":{const l=Xt(o,qH);if("error"in l)throw l.error;return l.result}default:{const l=Xt(o,GH);if("error"in l)throw l.error;return l.result}}}catch(l){throw new xn(l,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:l,...c}=e;n=l,t=c}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=Xt(s,nH);if("error"in o)throw new xn(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),l=Xt(o,aM);if("error"in l)throw new xn(l.error,"failed to get transaction");const c=l.result;return c&&{...c,transaction:{...c.transaction,message:oM(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=Ur(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),l=Xt(o,$v);if("error"in l)throw new xn(l.error,"failed to get transaction");return l.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=Ur(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const d=Xt(c,$v);if("error"in d)throw new xn(d.error,"failed to get transactions");return d.result})}async getTransactions(e,t){const{commitment:n,config:i}=Ur(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const d=Xt(c,aM);if("error"in d)throw new xn(d.error,"failed to get transactions");const h=d.result;return h&&{...h,transaction:{...h.transaction,message:oM(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),s=Xt(i,KH);if("error"in s)throw new xn(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const l={...o,transactions:o.transactions.map(({transaction:c,meta:d})=>{const h=new qa(c.message);return{meta:d,transaction:{...c,message:h}}})};return{...l,transactions:l.transactions.map(({transaction:c,meta:d})=>({meta:d,transaction:cr.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=Xt(s,Zn(tn(tt())));if("error"in o)throw new xn(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=Xt(i,NC);if("error"in s)throw new xn(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=Xt(i,NC);if("error"in s)throw new xn(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),s=Xt(i,aM);if("error"in s)throw new xn(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const l=new qa(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:cr.populate(l,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=Xt(i,$v);if("error"in s)throw new xn(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const l=Xt(o,$v);if("error"in l)throw new xn(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=Xt(s,SH);if("error"in o)throw new xn(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=Xt(s,MH);if("error"in o)throw new xn(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new Ab({key:e,state:Ab.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=tx.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=Xt(n,JH);if("error"in i)throw new xn(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Mh(100);const n=Date.now()-this._blockhashInfo.lastFetch>=vO;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Mh(dO/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Ur(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=Xt(s,mi(tt()));if("error"in o)throw new xn(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const P=e.serialize(),I=mn.from(P).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(C.innerInstructions=t.innerInstructions);const D=[I,C],k=await this._rpcRequest("simulateTransaction",D),F=Xt(k,CC);if("error"in F)throw new Error("failed to simulate transaction: "+F.error.message);return F.result}let i;if(e instanceof cr){let A=e;i=new cr,i.feePayer=A.feePayer,i.instructions=e.instructions,i.nonceInfo=A.nonceInfo,i.signatures=A.signatures}else i=cr.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let A=this._disableBlockhashCaching;for(;;){const P=await this._blockhashWithExpiryBlockHeight(A);if(i.lastValidBlockHeight=P.lastValidBlockHeight,i.recentBlockhash=P.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const I=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(I)&&!this._blockhashInfo.transactionSignatures.includes(I)){this._blockhashInfo.simulatedSignatures.push(I);break}else A=!0}}const o=i._compile(),l=o.serialize(),d=i._serialize(l).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){const A=(Array.isArray(n)?n:o.nonProgramIds()).map(P=>P.toBase58());h.accounts={encoding:"base64",addresses:A}}s&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const y=[d,h],_=await this._rpcRequest("simulateTransaction",y),x=Xt(_,CC);if("error"in x){let A;if("data"in x.error&&(A=x.error.data.logs,A&&Array.isArray(A))){const P=`
    `,I=P+A.join(P);console.error(x.error.message,I)}throw new tf({action:"simulate",signature:"",transactionMessage:x.error.message,logs:A})}return x.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=l.lastValidBlockHeight,e.recentBlockhash=l.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Qn(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],l=await this._rpcRequest("sendTransaction",o),c=Xt(l,e7);if("error"in c){let d;throw"data"in c.error&&(d=c.error.data.logs),new tf({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:d})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const l=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=i.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:l}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(l){if(l instanceof Error&&console.error(`${o} error:`,l.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=Xt(e,EH);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=AC([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];vr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:i,config:s}=Ur(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=Xt(e,AH);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const{commitment:s,config:o}=Ur(n),l=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:RC(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=Xt(e,n7);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=Xt(e,RH);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=Xt(e,IH);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=Xt(e,NH);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,l)=>{if(o.type==="status"){t(o.result,l);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),l=this._makeSubscription({callback:(c,d)=>{t(c,d);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return l}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=Xt(e,PH);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Hh{constructor(e){this._keypair=void 0,this._keypair=e??SC()}static generate(){return new Hh(SC())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=D_(i);for(let o=0;o<32;o++)if(n[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Hh({publicKey:n,secretKey:e})}static fromSeed(e){const t=D_(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Hh({publicKey:t,secretKey:n})}get publicKey(){return new Et(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Iu=Object.freeze({CreateLookupTable:{index:0,layout:be.struct([be.u32("instruction"),g0("recentSlot"),be.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:be.struct([be.u32("instruction")])},ExtendLookupTable:{index:2,layout:be.struct([be.u32("instruction"),g0(),be.seq(rr(),be.offset(be.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:be.struct([be.u32("instruction")])},CloseLookupTable:{index:4,layout:be.struct([be.u32("instruction")])}});class i7{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=be.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Iu))if(o.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Sr(Iu.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Sr(Iu.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new Et(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(hT.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class hT{constructor(){}static createLookupTable(e){const[t,n]=Et.findProgramAddressSync([e.authority.toBuffer(),Gk().encode(e.recentSlot)],this.programId),i=Iu.CreateLookupTable,s=ur(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Ci.programId,isSigner:!1,isWritable:!1}];return[new Ir({programId:this.programId,keys:o,data:s}),t]}static freezeLookupTable(e){const t=Iu.FreezeLookupTable,n=ur(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ir({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const t=Iu.ExtendLookupTable,n=ur(t,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Ci.programId,isSigner:!1,isWritable:!1}),new Ir({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const t=Iu.DeactivateLookupTable,n=ur(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ir({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const t=Iu.CloseLookupTable,n=ur(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Ir({programId:this.programId,keys:i,data:n})}}hT.programId=new Et("AddressLookupTab1e1111111111111111111111111");class s7{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=be.u8("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(xl))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Sr(xl.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Sr(xl.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Sr(xl.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Sr(xl.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(dT.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const xl=Object.freeze({RequestUnits:{index:0,layout:be.struct([be.u8("instruction"),be.u32("units"),be.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:be.struct([be.u8("instruction"),be.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:be.struct([be.u8("instruction"),be.u32("units")])},SetComputeUnitPrice:{index:3,layout:be.struct([be.u8("instruction"),g0("microLamports")])}});class dT{constructor(){}static requestUnits(e){const t=xl.RequestUnits,n=ur(t,e);return new Ir({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=xl.RequestHeapFrame,n=ur(t,e);return new Ir({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=xl.SetComputeUnitLimit,n=ur(t,e);return new Ir({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=xl.SetComputeUnitPrice,n=ur(t,{microLamports:BigInt(e.microLamports)});return new Ir({keys:[],programId:this.programId,data:n})}}dT.programId=new Et("ComputeBudget111111111111111111111111111111");const PC=64,LC=32,kC=64,OC=be.struct([be.u8("numSignatures"),be.u8("padding"),be.u16("signatureOffset"),be.u16("signatureInstructionIndex"),be.u16("publicKeyOffset"),be.u16("publicKeyInstructionIndex"),be.u16("messageDataOffset"),be.u16("messageDataSize"),be.u16("messageInstructionIndex")]);class ix{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,instructionIndex:s}=e;vr(t.length===LC,`Public Key must be ${LC} bytes but received ${t.length} bytes`),vr(i.length===kC,`Signature must be ${kC} bytes but received ${i.length} bytes`);const o=OC.span,l=o+t.length,c=l+i.length,d=1,h=mn.alloc(c+n.length),y=s??65535;return OC.encode({numSignatures:d,padding:0,signatureOffset:l,signatureInstructionIndex:y,publicKeyOffset:o,publicKeyInstructionIndex:y,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:y},h),h.fill(t,o),h.fill(i,l),h.fill(n,c),new Ir({keys:[],programId:ix.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;vr(t.length===PC,`Private key must be ${PC} bytes but received ${t.length} bytes`);try{const s=Hh.fromSecretKey(t),o=s.publicKey.toBytes(),l=rT(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:l,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ix.programId=new Et("Ed25519SigVerify111111111111111111111111111");const o7=(r,e)=>{const t=nT.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};nT.utils.isValidPrivateKey;const a7=nT.getPublicKey,DC=32,lM=20,BC=64,l7=11,uM=be.struct([be.u8("numSignatures"),be.u16("signatureOffset"),be.u8("signatureInstructionIndex"),be.u16("ethAddressOffset"),be.u8("ethAddressInstructionIndex"),be.u16("messageDataOffset"),be.u16("messageDataSize"),be.u8("messageInstructionIndex"),be.blob(20,"ethAddress"),be.blob(64,"signature"),be.u8("recoveryId")]);class l0{constructor(){}static publicKeyToEthAddress(e){vr(e.length===BC,`Public key must be ${BC} bytes but received ${e.length} bytes`);try{return mn.from(wC(Qn(e))).slice(-lM)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:i,recoveryId:s,instructionIndex:o}=e;return l0.createInstructionWithEthAddress({ethAddress:l0.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:i,recoveryId:s,instructionIndex:o=0}=e;let l;typeof t=="string"?t.startsWith("0x")?l=mn.from(t.substr(2),"hex"):l=mn.from(t,"hex"):l=t,vr(l.length===lM,`Address must be ${lM} bytes but received ${l.length} bytes`);const c=1+l7,d=c,h=c+l.length,y=h+i.length+1,_=1,x=mn.alloc(uM.span+n.length);return uM.encode({numSignatures:_,signatureOffset:h,signatureInstructionIndex:o,ethAddressOffset:d,ethAddressInstructionIndex:o,messageDataOffset:y,messageDataSize:n.length,messageInstructionIndex:o,signature:Qn(i),ethAddress:Qn(l),recoveryId:s},x),x.fill(Qn(n),uM.span),new Ir({keys:[],programId:l0.programId,data:x})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:i}=e;vr(t.length===DC,`Private key must be ${DC} bytes but received ${t.length} bytes`);try{const s=Qn(t),o=a7(s,!1).slice(1),l=mn.from(wC(Qn(n))),[c,d]=o7(l,s);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:c,recoveryId:d,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}l0.programId=new Et("KeccakSecp256k11111111111111111111111111111");var CO;const IO=new Et("StakeConfig11111111111111111111111111111111");class NO{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class Ay{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}CO=Ay;Ay.default=new CO(0,0,Et.default);class u7{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=be.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Zi))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Sr(Zi.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new NO(new Et(t.staker),new Et(t.withdrawer)),lockup:new Ay(n.unixTimestamp,n.epoch,new Et(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Sr(Zi.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Sr(Zi.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Et(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=Sr(Zi.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Et(s),newAuthorizedPubkey:new Et(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Sr(Zi.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Sr(Zi.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Sr(Zi.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Sr(Zi.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(sx.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Zi=Object.freeze({Initialize:{index:0,layout:be.struct([be.u32("instruction"),pV(),mV()])},Authorize:{index:1,layout:be.struct([be.u32("instruction"),rr("newAuthorized"),be.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:be.struct([be.u32("instruction")])},Split:{index:3,layout:be.struct([be.u32("instruction"),be.ns64("lamports")])},Withdraw:{index:4,layout:be.struct([be.u32("instruction"),be.ns64("lamports")])},Deactivate:{index:5,layout:be.struct([be.u32("instruction")])},Merge:{index:7,layout:be.struct([be.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:be.struct([be.u32("instruction"),rr("newAuthorized"),be.u32("stakeAuthorizationType"),Ch("authoritySeed"),rr("authorityOwner")])}}),c7=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class sx{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:i}=e,s=i||Ay.default,o=Zi.Initialize,l=ur(o,{authorized:{staker:Qn(n.staker.toBuffer()),withdrawer:Qn(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:Qn(s.custodian.toBuffer())}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Qh,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new Ir(c)}static createAccountWithSeed(e){const t=new cr;t.add(Ci.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const t=new cr;t.add(Ci.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,s=Zi.Delegate,o=ur(s);return new cr().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:u_,isSigner:!1,isWritable:!1},{pubkey:IO,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,l=Zi.Authorize,c=ur(l,{newAuthorized:Qn(i.toBuffer()),stakeAuthorizationType:s.index}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:yl,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!0,isWritable:!1}),new cr().add({keys:d,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:l,custodianPubkey:c}=e,d=Zi.AuthorizeWithSeed,h=ur(d,{newAuthorized:Qn(o.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:i,authorityOwner:Qn(s.toBuffer())}),y=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:yl,isSigner:!1,isWritable:!1}];return c&&y.push({pubkey:c,isSigner:!0,isWritable:!1}),new cr().add({keys:y,programId:this.programId,data:h})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,o=Zi.Split,l=ur(o,{lamports:s});return new Ir({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static split(e,t){const n=new cr;return n.add(Ci.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:l,lamports:c}=e,d=new cr;return d.add(Ci.allocate({accountPubkey:s,basePubkey:o,seed:l,space:this.space,programId:this.programId})),t&&t>0&&d.add(Ci.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:t})),d.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,lamports:c}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,s=Zi.Merge,o=ur(s);return new cr().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:u_,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:o}=e,l=Zi.Withdraw,c=ur(l,{lamports:s}),d=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:u_,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&d.push({pubkey:o,isSigner:!0,isWritable:!1}),new cr().add({keys:d,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,i=Zi.Deactivate,s=ur(i);return new cr().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}sx.programId=new Et("Stake11111111111111111111111111111111111111");sx.space=200;class PO{constructor(e,t,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=i}}class f7{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=be.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Sl))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Sr(Sl.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new PO(new Et(t.nodePubkey),new Et(t.authorizedVoter),new Et(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Sr(Sl.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Et(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=Sr(Sl.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Et(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Et(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Sr(Sl.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(L0.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Sl=Object.freeze({InitializeAccount:{index:0,layout:be.struct([be.u32("instruction"),gV()])},Authorize:{index:1,layout:be.struct([be.u32("instruction"),rr("newAuthorized"),be.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:be.struct([be.u32("instruction"),be.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:be.struct([be.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:be.struct([be.u32("instruction"),yV()])}}),h7=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class L0{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:i}=e,s=Sl.InitializeAccount,o=ur(s,{voteInit:{nodePubkey:Qn(i.nodePubkey.toBuffer()),authorizedVoter:Qn(i.authorizedVoter.toBuffer()),authorizedWithdrawer:Qn(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),l={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Qh,isSigner:!1,isWritable:!1},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ir(l)}static createAccount(e){const t=new cr;return t.add(Ci.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=Sl.Authorize,l=ur(o,{newAuthorized:Qn(i.toBuffer()),voteAuthorizationType:s.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new cr().add({keys:c,programId:this.programId,data:l})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:l}=e,c=Sl.AuthorizeWithSeed,d=ur(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Qn(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:Qn(s.toBuffer()),voteAuthorizationType:o.index}}),h=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:yl,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new cr().add({keys:h,programId:this.programId,data:d})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,o=Sl.Withdraw,l=ur(o,{lamports:i}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new cr().add({keys:c,programId:this.programId,data:l})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return L0.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:i}=e,s=Sl.UpdateValidatorIdentity,o=ur(s),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new cr().add({keys:l,programId:this.programId,data:o})}}L0.programId=new Et("Vote111111111111111111111111111111111111111");L0.space=3762;const LO=new Et("Va1idator1nfo111111111111111111111111111111"),d7=Nt({name:Gt(),website:An(Gt()),details:An(Gt()),iconUrl:An(Gt()),keybaseUsername:An(Gt())});class pT{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(go(t)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new Et(yo(t,0,Al)),l=_l(t)===1;i.push({publicKey:o,isSigner:l})}if(i[0].publicKey.equals(LO)&&i[1].isSigner){const s=Ch().decode(mn.from(t)),o=JSON.parse(s);return jk(o,d7),new pT(i[1].publicKey,o)}return null}}const p7=new Et("Vote111111111111111111111111111111111111111"),m7=be.struct([rr("nodePubkey"),rr("authorizedWithdrawer"),be.u8("commission"),be.nu64(),be.seq(be.struct([be.nu64("slot"),be.u32("confirmationCount")]),be.offset(be.u32(),-8),"votes"),be.u8("rootSlotValid"),be.nu64("rootSlot"),be.nu64(),be.seq(be.struct([be.nu64("epoch"),rr("authorizedVoter")]),be.offset(be.u32(),-8),"authorizedVoters"),be.struct([be.seq(be.struct([rr("authorizedPubkey"),be.nu64("epochOfLastAuthorizedSwitch"),be.nu64("targetEpoch")]),32,"buf"),be.nu64("idx"),be.u8("isEmpty")],"priorVoters"),be.nu64(),be.seq(be.struct([be.nu64("epoch"),be.nu64("credits"),be.nu64("prevCredits")]),be.offset(be.u32(),-8),"epochCredits"),be.struct([be.nu64("slot"),be.nu64("timestamp")],"lastTimestamp")]);class mT{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=m7.decode(Qn(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new mT({nodePubkey:new Et(n.nodePubkey),authorizedWithdrawer:new Et(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(g7),priorVoters:y7(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function g7({authorizedVoter:r,epoch:e}){return{epoch:e,authorizedVoter:new Et(r)}}function UC({authorizedPubkey:r,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new Et(r),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function y7({buf:r,idx:e,isEmpty:t}){return t?[]:[...r.slice(e+1).map(UC),...r.slice(0,e).map(UC)]}const FC={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function kO(r,e){const t=e===!1?"http":"https";if(!r)return FC[t].devnet;const n=FC[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}async function v7(r,e,t,n){let i,s;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,s=n):s=t;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},l=await r.sendRawTransaction(e,o),c=s&&s.commitment,h=(await(i?r.confirmTransaction(i,c):r.confirmTransaction(l,c))).value;if(h.err)throw l!=null?new tf({action:o!=null&&o.skipPreflight?"send":"simulate",signature:l,transactionMessage:`Status: (${JSON.stringify(h)})`}):new Error(`Raw transaction ${l} failed (${JSON.stringify(h)})`);return l}const w7=1e9,_7=Object.freeze(Object.defineProperty({__proto__:null,Account:fV,AddressLookupTableAccount:Ab,AddressLookupTableInstruction:i7,AddressLookupTableProgram:hT,Authorized:NO,BLOCKHASH_CACHE_TIMEOUT_MS:vO,BPF_LOADER_DEPRECATED_PROGRAM_ID:hV,BPF_LOADER_PROGRAM_ID:IV,BpfLoader:NV,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:xl,ComputeBudgetInstruction:s7,ComputeBudgetProgram:dT,Connection:RO,Ed25519Program:ix,Enum:uV,EpochSchedule:gO,FeeCalculatorLayout:pO,Keypair:Hh,LAMPORTS_PER_SOL:w7,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Iu,Loader:B_,Lockup:Ay,MAX_SEED_LENGTH:cO,Message:qa,MessageAccountKeys:Wg,MessageV0:Zh,NONCE_ACCOUNT_LENGTH:Eb,NonceAccount:tx,PACKET_DATA_SIZE:Zc,PUBLIC_KEY_LENGTH:Al,PublicKey:Et,SIGNATURE_LENGTH_IN_BYTES:zg,SOLANA_SCHEMA:vg,STAKE_CONFIG_ID:IO,STAKE_INSTRUCTION_LAYOUTS:Zi,SYSTEM_INSTRUCTION_LAYOUTS:zr,SYSVAR_CLOCK_PUBKEY:yl,SYSVAR_EPOCH_SCHEDULE_PUBKEY:SV,SYSVAR_INSTRUCTIONS_PUBKEY:MV,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:l_,SYSVAR_RENT_PUBKEY:Qh,SYSVAR_REWARDS_PUBKEY:EV,SYSVAR_SLOT_HASHES_PUBKEY:bV,SYSVAR_SLOT_HISTORY_PUBKEY:AV,SYSVAR_STAKE_HISTORY_PUBKEY:u_,Secp256k1Program:l0,SendTransactionError:tf,SolanaJSONRPCError:xn,SolanaJSONRPCErrorCode:TV,StakeAuthorizationLayout:c7,StakeInstruction:u7,StakeProgram:sx,Struct:iT,SystemInstruction:RV,SystemProgram:Ci,Transaction:cr,TransactionExpiredBlockheightExceededError:sT,TransactionExpiredNonceInvalidError:jp,TransactionExpiredTimeoutError:oT,TransactionInstruction:Ir,TransactionMessage:lT,TransactionStatus:Eu,VALIDATOR_INFO_KEY:LO,VERSION_PREFIX_MASK:J1,VOTE_PROGRAM_ID:p7,ValidatorInfo:pT,VersionedMessage:aT,VersionedTransaction:Vg,VoteAccount:mT,VoteAuthorizationLayout:h7,VoteInit:PO,VoteInstruction:f7,VoteProgram:L0,clusterApiUrl:kO,sendAndConfirmRawTransaction:v7,sendAndConfirmTransaction:Mb},Symbol.toStringTag,{value:"Module"})),OO=Se.createContext({});function DO(){return Se.useContext(OO)}const x7=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=Se.useMemo(()=>new RO(e,t),[e,t]);return Ft.createElement(OO.Provider,{value:{connection:n}},r)};class ts extends Error{constructor(e,t){super(e),this.error=t}}class Gg extends ts{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class S7 extends ts{constructor(){super(...arguments),this.name="WalletLoadError"}}class qp extends ts{constructor(){super(...arguments),this.name="WalletConfigError"}}class F_ extends ts{constructor(){super(...arguments),this.name="WalletConnectionError"}}class gT extends ts{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class yT extends ts{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Ih extends ts{constructor(){super(...arguments),this.name="WalletAccountError"}}class jg extends ts{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Ni extends ts{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class $c extends ts{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Ml extends ts{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class vT extends ts{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class zC extends ts{constructor(){super(...arguments),this.name="WalletSignInError"}}var wr;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(wr||(wr={}));class BO extends JA{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const i=this.publicKey;if(!i)throw new Ni;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function UO(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const s of e)s()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function Ib(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function Du(r){return"version"in r}class M7 extends BO{async sendTransaction(e,t,n={}){let i=!0;try{if(Du(e)){if(!this.supportedTransactionVersions)throw new $c("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new $c(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,n)}catch(s){throw s instanceof Ml?(i=!1,s):new $c(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const l=e.serialize();return await t.sendRawTransaction(l,o)}catch(s){throw s instanceof Ml?(i=!1,s):new $c(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(Du(n)){if(!this.supportedTransactionVersions)throw new Ml("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Ml(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class FO extends M7{}const Nu="solana:signAndSendTransaction",cM="solana:signIn",Wp="solana:signMessage",Qi="solana:signTransaction",wT="standard:connect",Nb="standard:disconnect",_T="standard:events";function E7(r){return wT in r.features&&_T in r.features&&(Nu in r.features||Qi in r.features)}var Pb;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(Pb||(Pb={}));class WC extends ts{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const b7=[],ox={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Fa("call","select")},connect(){return Promise.reject(Fa("call","connect"))},disconnect(){return Promise.reject(Fa("call","disconnect"))},sendTransaction(){return Promise.reject(Fa("call","sendTransaction"))},signTransaction(){return Promise.reject(Fa("call","signTransaction"))},signAllTransactions(){return Promise.reject(Fa("call","signAllTransactions"))},signMessage(){return Promise.reject(Fa("call","signMessage"))},signIn(){return Promise.reject(Fa("call","signIn"))}};Object.defineProperty(ox,"wallets",{get(){return Fa("read","wallets"),b7}});Object.defineProperty(ox,"wallet",{get(){return Fa("read","wallet"),null}});Object.defineProperty(ox,"publicKey",{get(){return Fa("read","publicKey"),null}});function Fa(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const zO=Se.createContext(ox);function xT(){return Se.useContext(zO)}function A7(r,e){const t=Se.useState(()=>{try{const s=localStorage.getItem(r);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),n=t[0],i=Se.useRef(!0);return Se.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,r]),t}var hl={},Jf={},Ks={},er={},VC;function ST(){if(VC)return er;VC=1,Object.defineProperty(er,"__esModule",{value:!0}),er.WalletWindowClosedError=er.WalletWindowBlockedError=er.WalletTimeoutError=er.WalletSignInError=er.WalletSignMessageError=er.WalletSignTransactionError=er.WalletSendTransactionError=er.WalletNotConnectedError=er.WalletKeypairError=er.WalletPublicKeyError=er.WalletAccountError=er.WalletDisconnectionError=er.WalletDisconnectedError=er.WalletConnectionError=er.WalletConfigError=er.WalletLoadError=er.WalletNotReadyError=er.WalletError=void 0;class r extends Error{constructor(k,F){super(k),this.error=F}}er.WalletError=r;class e extends r{constructor(){super(...arguments),this.name="WalletNotReadyError"}}er.WalletNotReadyError=e;class t extends r{constructor(){super(...arguments),this.name="WalletLoadError"}}er.WalletLoadError=t;class n extends r{constructor(){super(...arguments),this.name="WalletConfigError"}}er.WalletConfigError=n;class i extends r{constructor(){super(...arguments),this.name="WalletConnectionError"}}er.WalletConnectionError=i;class s extends r{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}er.WalletDisconnectedError=s;class o extends r{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}er.WalletDisconnectionError=o;class l extends r{constructor(){super(...arguments),this.name="WalletAccountError"}}er.WalletAccountError=l;class c extends r{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}er.WalletPublicKeyError=c;class d extends r{constructor(){super(...arguments),this.name="WalletKeypairError"}}er.WalletKeypairError=d;class h extends r{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}er.WalletNotConnectedError=h;class y extends r{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}er.WalletSendTransactionError=y;class _ extends r{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}er.WalletSignTransactionError=_;class x extends r{constructor(){super(...arguments),this.name="WalletSignMessageError"}}er.WalletSignMessageError=x;class A extends r{constructor(){super(...arguments),this.name="WalletSignInError"}}er.WalletSignInError=A;class P extends r{constructor(){super(...arguments),this.name="WalletTimeoutError"}}er.WalletTimeoutError=P;class I extends r{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}er.WalletWindowBlockedError=I;class C extends r{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}return er.WalletWindowClosedError=C,er}var HC;function WO(){if(HC)return Ks;HC=1;var r=Ks&&Ks.__awaiter||function(c,d,h,y){function _(x){return x instanceof h?x:new h(function(A){A(x)})}return new(h||(h=Promise))(function(x,A){function P(D){try{C(y.next(D))}catch(k){A(k)}}function I(D){try{C(y.throw(D))}catch(k){A(k)}}function C(D){D.done?x(D.value):_(D.value).then(P,I)}C((y=y.apply(c,d||[])).next())})},e=Ks&&Ks.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.BaseWalletAdapter=Ks.WalletReadyState=Ks.EventEmitter=void 0,Ks.scopePollingDetectionStrategy=o,Ks.isIosAndRedirectable=l;const t=e(Jk());Ks.EventEmitter=t.default;const n=ST();var i;(function(c){c.Installed="Installed",c.NotDetected="NotDetected",c.Loadable="Loadable",c.Unsupported="Unsupported"})(i||(Ks.WalletReadyState=i={}));class s extends t.default{get connected(){return!!this.publicKey}autoConnect(){return r(this,void 0,void 0,function*(){yield this.connect()})}prepareTransaction(d,h){return r(this,arguments,void 0,function*(y,_,x={}){const A=this.publicKey;if(!A)throw new n.WalletNotConnectedError;return y.feePayer=y.feePayer||A,y.recentBlockhash=y.recentBlockhash||(yield _.getLatestBlockhash({commitment:x.preflightCommitment,minContextSlot:x.minContextSlot})).blockhash,y})}}Ks.BaseWalletAdapter=s;function o(c){if(typeof window>"u"||typeof document>"u")return;const d=[];function h(){if(c())for(const x of d)x()}const y=setInterval(h,1e3);d.push(()=>clearInterval(y)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",h,{once:!0}),d.push(()=>document.removeEventListener("DOMContentLoaded",h))),document.readyState!=="complete"&&(window.addEventListener("load",h,{once:!0}),d.push(()=>window.removeEventListener("load",h))),h()}function l(){if(!navigator)return!1;const c=navigator.userAgent.toLowerCase(),d=c.includes("iphone")||c.includes("ipad"),h=c.includes("safari");return d&&h}return Ks}var Lo={},Zv={},GC;function VO(){if(GC)return Zv;GC=1,Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.isVersionedTransaction=r;function r(e){return"version"in e}return Zv}var jC;function T7(){if(jC)return Lo;jC=1;var r=Lo&&Lo.__awaiter||function(c,d,h,y){function _(x){return x instanceof h?x:new h(function(A){A(x)})}return new(h||(h=Promise))(function(x,A){function P(D){try{C(y.next(D))}catch(k){A(k)}}function I(D){try{C(y.throw(D))}catch(k){A(k)}}function C(D){D.done?x(D.value):_(D.value).then(P,I)}C((y=y.apply(c,d||[])).next())})},e=Lo&&Lo.__rest||function(c,d){var h={};for(var y in c)Object.prototype.hasOwnProperty.call(c,y)&&d.indexOf(y)<0&&(h[y]=c[y]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,y=Object.getOwnPropertySymbols(c);_<y.length;_++)d.indexOf(y[_])<0&&Object.prototype.propertyIsEnumerable.call(c,y[_])&&(h[y[_]]=c[y[_]]);return h};Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.BaseSignInMessageSignerWalletAdapter=Lo.BaseMessageSignerWalletAdapter=Lo.BaseSignerWalletAdapter=void 0;const t=WO(),n=ST(),i=VO();class s extends t.BaseWalletAdapter{sendTransaction(d,h){return r(this,arguments,void 0,function*(y,_,x={}){let A=!0;try{if((0,i.isVersionedTransaction)(y)){if(!this.supportedTransactionVersions)throw new n.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(y.version))throw new n.WalletSendTransactionError(`Sending transaction version ${y.version} isn't supported by this wallet`);try{y=yield this.signTransaction(y);const P=y.serialize();return yield _.sendRawTransaction(P,x)}catch(P){throw P instanceof n.WalletSignTransactionError?(A=!1,P):new n.WalletSendTransactionError(P==null?void 0:P.message,P)}}else try{const{signers:P}=x,I=e(x,["signers"]);y=yield this.prepareTransaction(y,_,I),P!=null&&P.length&&y.partialSign(...P),y=yield this.signTransaction(y);const C=y.serialize();return yield _.sendRawTransaction(C,I)}catch(P){throw P instanceof n.WalletSignTransactionError?(A=!1,P):new n.WalletSendTransactionError(P==null?void 0:P.message,P)}}catch(P){throw A&&this.emit("error",P),P}})}signAllTransactions(d){return r(this,void 0,void 0,function*(){for(const y of d)if((0,i.isVersionedTransaction)(y)){if(!this.supportedTransactionVersions)throw new n.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(y.version))throw new n.WalletSignTransactionError(`Signing transaction version ${y.version} isn't supported by this wallet`)}const h=[];for(const y of d)h.push(yield this.signTransaction(y));return h})}}Lo.BaseSignerWalletAdapter=s;class o extends s{}Lo.BaseMessageSignerWalletAdapter=o;class l extends o{}return Lo.BaseSignInMessageSignerWalletAdapter=l,Lo}var Qv={},eh={},Um={},qC;function R7(){return qC||(qC=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.SolanaSignAndSendTransaction=void 0,Um.SolanaSignAndSendTransaction="solana:signAndSendTransaction"),Um}var Fm={},KC;function C7(){return KC||(KC=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.SolanaSignIn=void 0,Fm.SolanaSignIn="solana:signIn"),Fm}var zm={},YC;function I7(){return YC||(YC=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.SolanaSignMessage=void 0,zm.SolanaSignMessage="solana:signMessage"),zm}var Wm={},XC;function N7(){return XC||(XC=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.SolanaSignTransaction=void 0,Wm.SolanaSignTransaction="solana:signTransaction"),Wm}var Vm={},$C;function P7(){return $C||($C=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.SignAndSendAllTransactions=void 0,Vm.SignAndSendAllTransactions="solana:signAndSendAllTransactions"),Vm}var ZC;function MT(){return ZC||(ZC=1,(function(r){var e=eh&&eh.__createBinding||(Object.create?(function(n,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,l)}):(function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]})),t=eh&&eh.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(R7(),r),t(C7(),r),t(I7(),r),t(N7(),r),t(P7(),r)})(eh)),eh}var th={},fM={},QC;function L7(){return QC||(QC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Connect=r.StandardConnect=void 0,r.StandardConnect="standard:connect",r.Connect=r.StandardConnect})(fM)),fM}var hM={},JC;function k7(){return JC||(JC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Disconnect=r.StandardDisconnect=void 0,r.StandardDisconnect="standard:disconnect",r.Disconnect=r.StandardDisconnect})(hM)),hM}var dM={},eI;function O7(){return eI||(eI=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Events=r.StandardEvents=void 0,r.StandardEvents="standard:events",r.Events=r.StandardEvents})(dM)),dM}var tI;function HO(){return tI||(tI=1,(function(r){var e=th&&th.__createBinding||(Object.create?(function(n,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,l)}):(function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]})),t=th&&th.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(L7(),r),t(k7(),r),t(O7(),r)})(th)),th}var nI;function D7(){if(nI)return Qv;nI=1,Object.defineProperty(Qv,"__esModule",{value:!0}),Qv.isWalletAdapterCompatibleStandardWallet=t;const r=MT(),e=HO();function t(n){return e.StandardConnect in n.features&&e.StandardEvents in n.features&&(r.SolanaSignAndSendTransaction in n.features||r.SolanaSignTransaction in n.features)}return Qv}var Hm={},rI;function B7(){if(rI)return Hm;rI=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.WalletAdapterNetwork=void 0;var r;return(function(e){e.Mainnet="mainnet-beta",e.Testnet="testnet",e.Devnet="devnet"})(r||(Hm.WalletAdapterNetwork=r={})),Hm}var iI;function U7(){return iI||(iI=1,(function(r){var e=Jf&&Jf.__createBinding||(Object.create?(function(n,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,l)}):(function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]})),t=Jf&&Jf.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(WO(),r),t(ST(),r),t(T7(),r),t(D7(),r),t(VO(),r),t(B7(),r)})(Jf)),Jf}const GO=G1(_7);var ka={},wp={},pM,sI;function F7(){return sI||(sI=1,pM=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),pM}var mM={},kc={},oI;function ud(){if(oI)return kc;oI=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return kc.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},kc.getSymbolTotalCodewords=function(n){return e[n]},kc.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},kc.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},kc.isKanjiModeEnabled=function(){return typeof r<"u"},kc.toSJIS=function(n){return r(n)},kc}var gM={},aI;function ET(){return aI||(aI=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return e(n)}catch{return i}}})(gM)),gM}var yM,lI;function z7(){if(lI)return yM;lI=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},yM=r,yM}var vM,uI;function W7(){if(uI)return vM;uI=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,i){const s=e*this.size+t;this.data[s]=n,i&&(this.reservedBit[s]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},vM=r,vM}var wM={},cI;function V7(){return cI||(cI=1,(function(r){const e=ud().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,l=[s-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},r.getPositions=function(n){const i=[],s=r.getRowColCoords(n),o=s.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([s[l],s[c]]);return i}})(wM)),wM}var _M={},fI;function H7(){if(fI)return _M;fI=1;const r=ud().getSymbolSize,e=7;return _M.getPositions=function(n){const i=r(n);return[[0,0],[i-e,0],[0,i-e]]},_M}var xM={},hI;function G7(){return hI||(hI=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const s=i.size;let o=0,l=0,c=0,d=null,h=null;for(let y=0;y<s;y++){l=c=0,d=h=null;for(let _=0;_<s;_++){let x=i.get(y,_);x===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=x,l=1),x=i.get(_,y),x===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=x,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},r.getPenaltyN2=function(i){const s=i.size;let o=0;for(let l=0;l<s-1;l++)for(let c=0;c<s-1;c++){const d=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},r.getPenaltyN3=function(i){const s=i.size;let o=0,l=0,c=0;for(let d=0;d<s;d++){l=c=0;for(let h=0;h<s;h++)l=l<<1&2047|i.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},r.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(n,i,s){switch(n){case r.Patterns.PATTERN000:return(i+s)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return s%3===0;case r.Patterns.PATTERN011:return(i+s)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case r.Patterns.PATTERN101:return i*s%2+i*s%3===0;case r.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case r.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,s){const o=s.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)s.isReserved(c,l)||s.xor(c,l,t(i,c,l))},r.getBestMask=function(i,s){const o=Object.keys(r.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){s(d),r.applyMask(d,i);const h=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(d,i),h<c&&(c=h,l=d)}return l}})(xM)),xM}var Jv={},dI;function jO(){if(dI)return Jv;dI=1;const r=ET(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Jv.getBlocksCount=function(i,s){switch(s){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},Jv.getTotalCodewordsCount=function(i,s){switch(s){case r.L:return t[(i-1)*4+0];case r.M:return t[(i-1)*4+1];case r.Q:return t[(i-1)*4+2];case r.H:return t[(i-1)*4+3];default:return}},Jv}var SM={},Gm={},pI;function j7(){if(pI)return Gm;pI=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let n=1;for(let i=0;i<255;i++)r[i]=n,e[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)r[i]=r[i-255]})(),Gm.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},Gm.exp=function(n){return r[n]},Gm.mul=function(n,i){return n===0||i===0?0:r[e[n]+e[i]]},Gm}var mI;function q7(){return mI||(mI=1,(function(r){const e=j7();r.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)s[o+l]^=e.mul(n[o],i[l]);return s},r.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=r.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(SM)),SM}var MM,gI;function K7(){if(gI)return MM;gI=1;const r=q7();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const s=r.mod(i,this.genPoly),o=this.degree-s.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(s,o),l}return s},MM=e,MM}var EM={},bM={},AM={},yI;function qO(){return yI||(yI=1,AM.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),AM}var dl={},vI;function KO(){if(vI)return dl;vI=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;dl.KANJI=new RegExp(t,"g"),dl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),dl.BYTE=new RegExp(n,"g"),dl.NUMERIC=new RegExp(r,"g"),dl.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),s=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return dl.testKanji=function(c){return i.test(c)},dl.testNumeric=function(c){return s.test(c)},dl.testAlphanumeric=function(c){return o.test(c)},dl}var wI;function cd(){return wI||(wI=1,(function(r){const e=qO(),t=KO();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},r.getBestModeForData=function(s){return t.testNumeric(s)?r.NUMERIC:t.testAlphanumeric(s)?r.ALPHANUMERIC:t.testKanji(s)?r.KANJI:r.BYTE},r.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},r.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(s,o){if(r.isValid(s))return s;try{return n(s)}catch{return o}}})(bM)),bM}var _I;function Y7(){return _I||(_I=1,(function(r){const e=ud(),t=jO(),n=ET(),i=cd(),s=qO(),o=7973,l=e.getBCHDigit(o);function c(_,x,A){for(let P=1;P<=40;P++)if(x<=r.getCapacity(P,A,_))return P}function d(_,x){return i.getCharCountIndicator(_,x)+4}function h(_,x){let A=0;return _.forEach(function(P){const I=d(P.mode,x);A+=I+P.getBitsLength()}),A}function y(_,x){for(let A=1;A<=40;A++)if(h(_,A)<=r.getCapacity(A,x,i.MIXED))return A}r.from=function(x,A){return s.isValid(x)?parseInt(x,10):A},r.getCapacity=function(x,A,P){if(!s.isValid(x))throw new Error("Invalid QR Code version");typeof P>"u"&&(P=i.BYTE);const I=e.getSymbolTotalCodewords(x),C=t.getTotalCodewordsCount(x,A),D=(I-C)*8;if(P===i.MIXED)return D;const k=D-d(P,x);switch(P){case i.NUMERIC:return Math.floor(k/10*3);case i.ALPHANUMERIC:return Math.floor(k/11*2);case i.KANJI:return Math.floor(k/13);case i.BYTE:default:return Math.floor(k/8)}},r.getBestVersionForData=function(x,A){let P;const I=n.from(A,n.M);if(Array.isArray(x)){if(x.length>1)return y(x,I);if(x.length===0)return 1;P=x[0]}else P=x;return c(P.mode,P.getLength(),I)},r.getEncodedBits=function(x){if(!s.isValid(x)||x<7)throw new Error("Invalid QR Code version");let A=x<<12;for(;e.getBCHDigit(A)-l>=0;)A^=o<<e.getBCHDigit(A)-l;return x<<12|A}})(EM)),EM}var TM={},xI;function X7(){if(xI)return TM;xI=1;const r=ud(),e=1335,t=21522,n=r.getBCHDigit(e);return TM.getEncodedBits=function(s,o){const l=s.bit<<3|o;let c=l<<10;for(;r.getBCHDigit(c)-n>=0;)c^=e<<r.getBCHDigit(c)-n;return(l<<10|c)^t},TM}var RM={},CM,SI;function $7(){if(SI)return CM;SI=1;const r=cd();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let i,s,o;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),o=parseInt(s,10),n.put(o,10);const l=this.data.length-i;l>0&&(s=this.data.substr(i),o=parseInt(s,10),n.put(o,l*3+1))},CM=e,CM}var IM,MI;function Z7(){if(MI)return IM;MI=1;const r=cd(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let o=e.indexOf(this.data[s])*45;o+=e.indexOf(this.data[s+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[s]),6)},IM=t,IM}var NM,EI;function Q7(){if(EI)return NM;EI=1;const r=cd();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,i=this.data.length;n<i;n++)t.put(this.data[n],8)},NM=e,NM}var PM,bI;function J7(){if(bI)return PM;bI=1;const r=cd(),e=ud();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let s=e.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),n.put(s,13)}},PM=t,PM}var LM={exports:{}},AI;function e9(){return AI||(AI=1,(function(r){var e={single_source_shortest_paths:function(t,n,i){var s={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,d,h,y,_,x,A,P,I;!l.empty();){c=l.pop(),d=c.value,y=c.cost,_=t[d]||{};for(h in _)_.hasOwnProperty(h)&&(x=_[h],A=y+x,P=o[h],I=typeof o[h]>"u",(I||P>A)&&(o[h]=A,l.push(h,A),s[h]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var C=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(C)}return s},extract_shortest_path_from_predecessor_list:function(t,n){for(var i=[],s=n;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,n,i){var s=e.single_source_shortest_paths(t,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,i={},s;t=t||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var i={value:t,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(LM)),LM.exports}var TI;function t9(){return TI||(TI=1,(function(r){const e=cd(),t=$7(),n=Z7(),i=Q7(),s=J7(),o=KO(),l=ud(),c=e9();function d(C){return unescape(encodeURIComponent(C)).length}function h(C,D,k){const F=[];let Q;for(;(Q=C.exec(k))!==null;)F.push({data:Q[0],index:Q.index,mode:D,length:Q[0].length});return F}function y(C){const D=h(o.NUMERIC,e.NUMERIC,C),k=h(o.ALPHANUMERIC,e.ALPHANUMERIC,C);let F,Q;return l.isKanjiModeEnabled()?(F=h(o.BYTE,e.BYTE,C),Q=h(o.KANJI,e.KANJI,C)):(F=h(o.BYTE_KANJI,e.BYTE,C),Q=[]),D.concat(k,F,Q).sort(function(Y,ee){return Y.index-ee.index}).map(function(Y){return{data:Y.data,mode:Y.mode,length:Y.length}})}function _(C,D){switch(D){case e.NUMERIC:return t.getBitsLength(C);case e.ALPHANUMERIC:return n.getBitsLength(C);case e.KANJI:return s.getBitsLength(C);case e.BYTE:return i.getBitsLength(C)}}function x(C){return C.reduce(function(D,k){const F=D.length-1>=0?D[D.length-1]:null;return F&&F.mode===k.mode?(D[D.length-1].data+=k.data,D):(D.push(k),D)},[])}function A(C){const D=[];for(let k=0;k<C.length;k++){const F=C[k];switch(F.mode){case e.NUMERIC:D.push([F,{data:F.data,mode:e.ALPHANUMERIC,length:F.length},{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.ALPHANUMERIC:D.push([F,{data:F.data,mode:e.BYTE,length:F.length}]);break;case e.KANJI:D.push([F,{data:F.data,mode:e.BYTE,length:d(F.data)}]);break;case e.BYTE:D.push([{data:F.data,mode:e.BYTE,length:d(F.data)}])}}return D}function P(C,D){const k={},F={start:{}};let Q=["start"];for(let G=0;G<C.length;G++){const Y=C[G],ee=[];for(let te=0;te<Y.length;te++){const U=Y[te],V=""+G+te;ee.push(V),k[V]={node:U,lastCount:0},F[V]={};for(let K=0;K<Q.length;K++){const E=Q[K];k[E]&&k[E].node.mode===U.mode?(F[E][V]=_(k[E].lastCount+U.length,U.mode)-_(k[E].lastCount,U.mode),k[E].lastCount+=U.length):(k[E]&&(k[E].lastCount=U.length),F[E][V]=_(U.length,U.mode)+4+e.getCharCountIndicator(U.mode,D))}}Q=ee}for(let G=0;G<Q.length;G++)F[Q[G]].end=0;return{map:F,table:k}}function I(C,D){let k;const F=e.getBestModeForData(C);if(k=e.from(D,F),k!==e.BYTE&&k.bit<F.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(k)+`.
 Suggested mode is: `+e.toString(F));switch(k===e.KANJI&&!l.isKanjiModeEnabled()&&(k=e.BYTE),k){case e.NUMERIC:return new t(C);case e.ALPHANUMERIC:return new n(C);case e.KANJI:return new s(C);case e.BYTE:return new i(C)}}r.fromArray=function(D){return D.reduce(function(k,F){return typeof F=="string"?k.push(I(F,null)):F.data&&k.push(I(F.data,F.mode)),k},[])},r.fromString=function(D,k){const F=y(D,l.isKanjiModeEnabled()),Q=A(F),G=P(Q,k),Y=c.find_path(G.map,"start","end"),ee=[];for(let te=1;te<Y.length-1;te++)ee.push(G.table[Y[te]].node);return r.fromArray(x(ee))},r.rawSplit=function(D){return r.fromArray(y(D,l.isKanjiModeEnabled()))}})(RM)),RM}var RI;function n9(){if(RI)return mM;RI=1;const r=ud(),e=ET(),t=z7(),n=W7(),i=V7(),s=H7(),o=G7(),l=jO(),c=K7(),d=Y7(),h=X7(),y=cd(),_=t9();function x(G,Y){const ee=G.size,te=s.getPositions(Y);for(let U=0;U<te.length;U++){const V=te[U][0],K=te[U][1];for(let E=-1;E<=7;E++)if(!(V+E<=-1||ee<=V+E))for(let a=-1;a<=7;a++)K+a<=-1||ee<=K+a||(E>=0&&E<=6&&(a===0||a===6)||a>=0&&a<=6&&(E===0||E===6)||E>=2&&E<=4&&a>=2&&a<=4?G.set(V+E,K+a,!0,!0):G.set(V+E,K+a,!1,!0))}}function A(G){const Y=G.size;for(let ee=8;ee<Y-8;ee++){const te=ee%2===0;G.set(ee,6,te,!0),G.set(6,ee,te,!0)}}function P(G,Y){const ee=i.getPositions(Y);for(let te=0;te<ee.length;te++){const U=ee[te][0],V=ee[te][1];for(let K=-2;K<=2;K++)for(let E=-2;E<=2;E++)K===-2||K===2||E===-2||E===2||K===0&&E===0?G.set(U+K,V+E,!0,!0):G.set(U+K,V+E,!1,!0)}}function I(G,Y){const ee=G.size,te=d.getEncodedBits(Y);let U,V,K;for(let E=0;E<18;E++)U=Math.floor(E/3),V=E%3+ee-8-3,K=(te>>E&1)===1,G.set(U,V,K,!0),G.set(V,U,K,!0)}function C(G,Y,ee){const te=G.size,U=h.getEncodedBits(Y,ee);let V,K;for(V=0;V<15;V++)K=(U>>V&1)===1,V<6?G.set(V,8,K,!0):V<8?G.set(V+1,8,K,!0):G.set(te-15+V,8,K,!0),V<8?G.set(8,te-V-1,K,!0):V<9?G.set(8,15-V-1+1,K,!0):G.set(8,15-V-1,K,!0);G.set(te-8,8,1,!0)}function D(G,Y){const ee=G.size;let te=-1,U=ee-1,V=7,K=0;for(let E=ee-1;E>0;E-=2)for(E===6&&E--;;){for(let a=0;a<2;a++)if(!G.isReserved(U,E-a)){let p=!1;K<Y.length&&(p=(Y[K]>>>V&1)===1),G.set(U,E-a,p),V--,V===-1&&(K++,V=7)}if(U+=te,U<0||ee<=U){U-=te,te=-te;break}}}function k(G,Y,ee){const te=new t;ee.forEach(function(a){te.put(a.mode.bit,4),te.put(a.getLength(),y.getCharCountIndicator(a.mode,G)),a.write(te)});const U=r.getSymbolTotalCodewords(G),V=l.getTotalCodewordsCount(G,Y),K=(U-V)*8;for(te.getLengthInBits()+4<=K&&te.put(0,4);te.getLengthInBits()%8!==0;)te.putBit(0);const E=(K-te.getLengthInBits())/8;for(let a=0;a<E;a++)te.put(a%2?17:236,8);return F(te,G,Y)}function F(G,Y,ee){const te=r.getSymbolTotalCodewords(Y),U=l.getTotalCodewordsCount(Y,ee),V=te-U,K=l.getBlocksCount(Y,ee),E=te%K,a=K-E,p=Math.floor(te/K),M=Math.floor(V/K),R=M+1,T=p-M,L=new c(T);let N=0;const v=new Array(K),u=new Array(K);let S=0;const W=new Uint8Array(G.buffer);for(let Ae=0;Ae<K;Ae++){const _t=Ae<a?M:R;v[Ae]=W.slice(N,N+_t),u[Ae]=L.encode(v[Ae]),N+=_t,S=Math.max(S,_t)}const $=new Uint8Array(te);let se=0,me,_e;for(me=0;me<S;me++)for(_e=0;_e<K;_e++)me<v[_e].length&&($[se++]=v[_e][me]);for(me=0;me<T;me++)for(_e=0;_e<K;_e++)$[se++]=u[_e][me];return $}function Q(G,Y,ee,te){let U;if(Array.isArray(G))U=_.fromArray(G);else if(typeof G=="string"){let p=Y;if(!p){const M=_.rawSplit(G);p=d.getBestVersionForData(M,ee)}U=_.fromString(G,p||40)}else throw new Error("Invalid data");const V=d.getBestVersionForData(U,ee);if(!V)throw new Error("The amount of data is too big to be stored in a QR Code");if(!Y)Y=V;else if(Y<V)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+V+`.
`);const K=k(Y,ee,U),E=r.getSymbolSize(Y),a=new n(E);return x(a,Y),A(a),P(a,Y),C(a,ee,0),Y>=7&&I(a,Y),D(a,K),isNaN(te)&&(te=o.getBestMask(a,C.bind(null,a,ee))),o.applyMask(te,a),C(a,ee,te),{modules:a,version:Y,errorCorrectionLevel:ee,maskPattern:te,segments:U}}return mM.create=function(Y,ee){if(typeof Y>"u"||Y==="")throw new Error("No input text");let te=e.M,U,V;return typeof ee<"u"&&(te=e.from(ee.errorCorrectionLevel,e.M),U=d.from(ee.version),V=o.from(ee.maskPattern),ee.toSJISFunc&&r.setToSJISFunction(ee.toSJISFunc)),Q(Y,U,te,V)},mM}var kM={},OM={},CI;function YO(){return CI||(CI=1,(function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const s=r.getScale(n,i);return Math.floor((n+i.margin*2)*s)},r.qrToImageData=function(n,i,s){const o=i.modules.size,l=i.modules.data,c=r.getScale(o,s),d=Math.floor((o+s.margin*2)*c),h=s.margin*c,y=[s.color.light,s.color.dark];for(let _=0;_<d;_++)for(let x=0;x<d;x++){let A=(_*d+x)*4,P=s.color.light;if(_>=h&&x>=h&&_<d-h&&x<d-h){const I=Math.floor((_-h)/c),C=Math.floor((x-h)/c);P=y[l[I*o+C]?1:0]}n[A++]=P.r,n[A++]=P.g,n[A++]=P.b,n[A]=P.a}}})(OM)),OM}var II;function r9(){return II||(II=1,(function(r){const e=YO();function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(s,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),y=d.getContext("2d"),_=y.createImageData(h,h);return e.qrToImageData(_.data,s,c),t(y,d,h),y.putImageData(_,0,0),d},r.renderToDataURL=function(s,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=r.render(s,o,c),h=c.type||"image/png",y=c.rendererOpts||{};return d.toDataURL(h,y.quality)}})(kM)),kM}var DM={},NI;function i9(){if(NI)return DM;NI=1;const r=YO();function e(i,s){const o=i.a/255,l=s+'="'+i.hex+'"';return o<1?l+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function t(i,s,o){let l=i+s;return typeof o<"u"&&(l+=" "+o),l}function n(i,s,o){let l="",c=0,d=!1,h=0;for(let y=0;y<i.length;y++){const _=Math.floor(y%s),x=Math.floor(y/s);!_&&!d&&(d=!0),i[y]?(h++,y>0&&_>0&&i[y-1]||(l+=d?t("M",_+o,.5+x+o):t("m",c,0),c=0,d=!1),_+1<s&&i[y+1]||(l+=t("h",h),h=0)):c++}return l}return DM.render=function(s,o,l){const c=r.getOptions(o),d=s.modules.size,h=s.modules.data,y=d+c.margin*2,_=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+y+"v"+y+'H0z"/>':"",x="<path "+e(c.color.dark,"stroke")+' d="'+n(h,d,c.margin)+'"/>',A='viewBox="0 0 '+y+" "+y+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+A+' shape-rendering="crispEdges">'+_+x+`</svg>
`;return typeof l=="function"&&l(null,I),I},DM}var PI;function s9(){if(PI)return wp;PI=1;const r=F7(),e=n9(),t=r9(),n=i9();function i(s,o,l,c,d){const h=[].slice.call(arguments,1),y=h.length,_=typeof h[y-1]=="function";if(!_&&!r())throw new Error("Callback required as last argument");if(_){if(y<2)throw new Error("Too few arguments provided");y===2?(d=l,l=o,o=c=void 0):y===3&&(o.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=l,l=o,o=void 0))}else{if(y<1)throw new Error("Too few arguments provided");return y===1?(l=o,o=c=void 0):y===2&&!o.getContext&&(c=l,l=o,o=void 0),new Promise(function(x,A){try{const P=e.create(l,c);x(s(P,o,c))}catch(P){A(P)}})}try{const x=e.create(l,c);d(null,s(x,o,c))}catch(x){d(x)}}return wp.create=e.create,wp.toCanvas=i.bind(null,t.render),wp.toDataURL=i.bind(null,t.renderToDataURL),wp.toString=i.bind(null,function(s,o,l){return n.render(s,l)}),wp}function BM(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Lb="solana:mainnet",XO="solana:devnet",$O="solana:testnet",o9="solana:localnet",a9="https://api.mainnet-beta.solana.com";function l9(r){return r.includes(a9)?Lb:/\bdevnet\b/i.test(r)?XO:/\btestnet\b/i.test(r)?$O:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?o9:Lb}function u9(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const Fo={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class zo extends Error{constructor(...e){const[t,n,i]=e;super(n),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}const c9={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class ax extends Error{constructor(...e){const[t,n,i,s]=e;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function Ar(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(h){try{d(n.next(h))}catch(y){o(y)}}function c(h){try{d(n.throw(h))}catch(y){o(y)}}function d(h){h.done?s(h.value):i(h.value).then(l,c)}d((n=n.apply(r,[])).next())})}function f9(r){return window.btoa(r)}function kb(r,e){const t=window.btoa(String.fromCharCode.call(null,...r));return e?t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):t}function h9(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function c_(r,e){return Ar(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+n.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),i})}function d9(r){return u9(r)}function p9(r){return f9(d9(r))}const ZO="solana:signTransactions",Ob="solana:cloneAuthorization",m9="solana:signInWithSolana";function QO(r,e){return new Proxy({},{get(t,n){return n==="then"?null:(t[n]==null&&(t[n]=function(i){return Ar(this,void 0,void 0,function*(){const{method:s,params:o}=g9(n,i,r),l=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!l.sign_in_result&&(l.sign_in_result=yield v9(o.sign_in_payload,l,e)),y9(n,l,r)})}),t[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function g9(r,e,t){let n=e,i=r.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:s}=n;if(t==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=n.cluster}n.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}n.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=n;if(s)switch(t){case"legacy":{i="reauthorize",n={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:n}}function y9(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const i=[ZO];return n.supports_clone_authorization===!0&&i.push(Ob),Object.assign(Object.assign({},n),{features:i})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(Ob)})}}}return e}function v9(r,e,t){var n;return Ar(this,void 0,void 0,function*(){const i=(n=r.domain)!==null&&n!==void 0?n:window.location.host,s=e.accounts[0].address,o=p9(Object.assign(Object.assign({},r),{domain:i,address:s})),l=yield t("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:l.signed_payloads[0].slice(o.length)}})}const Bu=4;function w9(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Bu);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const Db=12,bT=65;function _9(r,e,t){return Ar(this,void 0,void 0,function*(){const n=w9(e),i=new Uint8Array(Db);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(eD(n,i),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function JO(r,e){return Ar(this,void 0,void 0,function*(){const t=r.slice(0,Bu),n=r.slice(Bu,Bu+Db),i=r.slice(Bu+Db),s=yield crypto.subtle.decrypt(eD(t,n),e,i);return x9().decode(s)})}function eD(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let UM;function x9(){return UM===void 0&&(UM=new TextDecoder("utf-8")),UM}function tD(){return Ar(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function f_(){return Ar(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function nD(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function S9(){return rD(49152+Math.floor(Math.random()*16384))}function rD(r){if(r<49152||r>65535)throw new zo(Fo.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function iD(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const M9="solana-wallet";function LI(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function sD(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new zo(Fo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${M9}:/`));const n=r.startsWith("/")?r:[...LI(t.pathname),...LI(r)].join("/");return new URL(n,t)}function E9(r,e,t,n=["v1"]){return Ar(this,void 0,void 0,function*(){const i=rD(e),s=yield crypto.subtle.exportKey("raw",r),o=nD(s),l=sD("v1/associate/local",t);return l.searchParams.set("association",iD(o)),l.searchParams.set("port",`${i}`),n.forEach(c=>{l.searchParams.set("v",c)}),l})}function b9(r,e,t,n,i=["v1"]){return Ar(this,void 0,void 0,function*(){const s=yield crypto.subtle.exportKey("raw",r),o=nD(s),l=sD("v1/associate/remote",n);return l.searchParams.set("association",iD(o)),l.searchParams.set("reflector",`${e}`),l.searchParams.set("id",`${kb(t,!0)}`),i.forEach(c=>{l.searchParams.set("v",c)}),l})}function oD(r,e){return Ar(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return _9(t,n,e)})}function aD(r,e){return Ar(this,void 0,void 0,function*(){const t=yield JO(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new ax(n.id,n.error.code,n.error.message);return n})}function lD(r,e,t){return Ar(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,bT),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function uD(r,e){return Ar(this,void 0,void 0,function*(){const t=yield JO(r,e),n=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new zo(Fo.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}const z_={Firefox:0,Other:1};function A9(){return navigator.userAgent.indexOf("Firefox/")!==-1?z_.Firefox:z_.Other}function T9(){return new Promise((r,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const i=setTimeout(()=>{t(),e()},3e3)})}let jm=null;function R9(r){jm==null&&(jm=document.createElement("iframe"),jm.style.display="none",document.body.appendChild(jm)),jm.contentWindow.location.href=r.toString()}function C9(r){return Ar(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=A9();switch(e){case z_.Firefox:R9(r);break;case z_.Other:{const t=T9();window.location.assign(r),yield t;break}default:}}catch{throw new zo(Fo.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function I9(r,e){return Ar(this,void 0,void 0,function*(){const t=S9(),n=yield E9(r,t,e);return yield C9(n),t})}const W_={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},cD="com.solana.mobilewalletadapter.v1",kI="com.solana.mobilewalletadapter.v1.base64";function fD(){if(typeof window>"u"||window.isSecureContext!==!0)throw new zo(Fo.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function hD(r){let e;try{e=new URL(r)}catch{throw new zo(Fo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new zo(Fo.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function V_(r){return new DataView(r).getUint32(0,!1)}function N9(r){var e=new Uint8Array(r),t=r.byteLength,n=10,i=0,s=0,o;do{if(s>=t||s>n)throw new RangeError("Failed to decode varint");o=e[s++],i|=(o&127)<<7*s}while(o>=128);return{value:i,offset:s}}function P9(r){let{value:e,offset:t}=N9(r);return new Uint8Array(r.slice(t,t+e))}function L9(r,e){return Ar(this,void 0,void 0,function*(){fD();const t=yield tD(),i=`ws://localhost:${yield I9(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const h=[...W_.retryDelayScheduleMs];return()=>h.length>1?h.shift():h[0]})();let l=1,c=0,d={__type:"disconnected"};return new Promise((h,y)=>{let _;const x={},A=()=>Ar(this,void 0,void 0,function*(){if(d.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);return}_.removeEventListener("open",A);const{associationKeypair:Q}=d,G=yield f_();_.send(yield c_(G.publicKey,Q.privateKey)),d={__type:"hello_req_sent",associationPublicKey:Q.publicKey,ecdhPrivateKey:G.privateKey}}),P=Q=>{Q.wasClean?d={__type:"disconnected"}:y(new zo(Fo.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Q.code}: ${Q.reason}).`,{closeEvent:Q})),D()},I=Q=>Ar(this,void 0,void 0,function*(){D(),Date.now()-s>=W_.timeoutMs?y(new zo(Fo.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(G=>{const Y=o();k=window.setTimeout(G,Y)}),F())}),C=Q=>Ar(this,void 0,void 0,function*(){const G=yield Q.data.arrayBuffer();switch(d.__type){case"connecting":if(G.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const Y=yield f_();_.send(yield c_(Y.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:Y.privateKey};break;case"connected":try{const ee=G.slice(0,Bu),te=V_(ee);if(te!==c+1)throw new Error("Encrypted message has invalid sequence number");c=te;const U=yield aD(G,d.sharedSecret),V=x[U.id];delete x[U.id],V.resolve(U.result)}catch(ee){if(ee instanceof ax){const te=x[ee.jsonRpcMessageId];delete x[ee.jsonRpcMessageId],te.reject(ee)}else throw ee}break;case"hello_req_sent":{if(G.byteLength===0){const K=yield f_();_.send(yield c_(K.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:K.privateKey};break}const ee=yield lD(G,d.associationPublicKey,d.ecdhPrivateKey),te=G.slice(bT),U=te.byteLength!==0?yield Ar(this,void 0,void 0,function*(){const K=te.slice(0,Bu),E=V_(K);if(E!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=E,uD(te,ee)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:ee,sessionProperties:U};const V=QO(U.protocol_version,(K,E)=>Ar(this,void 0,void 0,function*(){const a=l++;return _.send(yield oD({id:a,jsonrpc:"2.0",method:K,params:E??{}},ee)),new Promise((p,M)=>{x[a]={resolve(R){switch(K){case"authorize":case"reauthorize":{const{wallet_uri_base:T}=R;if(T!=null)try{hD(T)}catch(L){M(L);return}break}}p(R)},reject:M}})}));try{h(yield r(V))}catch(K){y(K)}finally{D(),_.close()}break}}});let D,k;const F=()=>{D&&D(),d={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),_=new WebSocket(i,[cD]),_.addEventListener("open",A),_.addEventListener("close",P),_.addEventListener("error",I),_.addEventListener("message",C),D=()=>{window.clearTimeout(k),_.removeEventListener("open",A),_.removeEventListener("close",P),_.removeEventListener("error",I),_.removeEventListener("message",C)}};F()})})}function k9(r){return Ar(this,void 0,void 0,function*(){fD();const e=yield tD(),t=`wss://${r==null?void 0:r.remoteHostAuthority}/reflect`;let n;const i=(()=>{const P=[...W_.retryDelayScheduleMs];return()=>P.length>1?P.shift():P[0]})();let s=1,o=0,l,c={__type:"disconnected"},d,h,y=P=>Ar(this,void 0,void 0,function*(){if(l=="base64"){const I=yield P.data;return h9(I).buffer}else return yield P.data.arrayBuffer()});const _=yield new Promise((P,I)=>{const C=()=>Ar(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}d.protocol.includes(kI)?l="base64":l="binary",d.removeEventListener("open",C)}),D=Y=>{Y.wasClean?c={__type:"disconnected"}:I(new zo(Fo.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Y.code}: ${Y.reason}).`,{closeEvent:Y})),h()},k=Y=>Ar(this,void 0,void 0,function*(){h(),Date.now()-n>=W_.timeoutMs?I(new zo(Fo.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${t}.`)):(yield new Promise(ee=>{const te=i();Q=window.setTimeout(ee,te)}),G())}),F=Y=>Ar(this,void 0,void 0,function*(){const ee=yield y(Y);if(c.__type==="connecting"){if(ee.byteLength==0)throw new Error("Encountered unexpected message while connecting");const te=P9(ee);c={__type:"reflector_id_received",reflectorId:te};const U=yield b9(e.publicKey,r.remoteHostAuthority,te,r==null?void 0:r.baseUri);d.removeEventListener("message",F),P(U)}});let Q;const G=()=>{h&&h(),c={__type:"connecting",associationKeypair:e},n===void 0&&(n=Date.now()),d=new WebSocket(t,[cD,kI]),d.addEventListener("open",C),d.addEventListener("close",D),d.addEventListener("error",k),d.addEventListener("message",F),h=()=>{window.clearTimeout(Q),d.removeEventListener("open",C),d.removeEventListener("close",D),d.removeEventListener("error",k),d.removeEventListener("message",F)}};G()});let x=!1,A;return{associationUrl:_,close:()=>{d.close(),A()},wallet:new Promise((P,I)=>{const C={},D=k=>Ar(this,void 0,void 0,function*(){const F=yield y(k);switch(c.__type){case"reflector_id_received":if(F.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const Q=yield f_(),G=yield c_(Q.publicKey,e.privateKey);l=="base64"?d.send(kb(G)):d.send(G),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:Q.privateKey};break;case"connected":try{const Y=F.slice(0,Bu),ee=V_(Y);if(ee!==o+1)throw new Error("Encrypted message has invalid sequence number");o=ee;const te=yield aD(F,c.sharedSecret),U=C[te.id];delete C[te.id],U.resolve(te.result)}catch(Y){if(Y instanceof ax){const ee=C[Y.jsonRpcMessageId];delete C[Y.jsonRpcMessageId],ee.reject(Y)}else throw Y}break;case"hello_req_sent":{const Y=yield lD(F,c.associationPublicKey,c.ecdhPrivateKey),ee=F.slice(bT),te=ee.byteLength!==0?yield Ar(this,void 0,void 0,function*(){const V=ee.slice(0,Bu),K=V_(V);if(K!==o+1)throw new Error("Encrypted message has invalid sequence number");return o=K,uD(ee,Y)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:Y,sessionProperties:te};const U=QO(te.protocol_version,(V,K)=>Ar(this,void 0,void 0,function*(){const E=s++,a=yield oD({id:E,jsonrpc:"2.0",method:V,params:K??{}},Y);return l=="base64"?d.send(kb(a)):d.send(a),new Promise((p,M)=>{C[E]={resolve(R){switch(V){case"authorize":case"reauthorize":{const{wallet_uri_base:T}=R;if(T!=null)try{hD(T)}catch(L){M(L);return}break}}p(R)},reject:M}})}));x=!0;try{P(U)}catch(V){I(V)}break}}});d.addEventListener("message",D),A=()=>{d.removeEventListener("message",D),h(),x||I(new zo(Fo.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}const O9=Object.freeze(Object.defineProperty({__proto__:null,SolanaCloneAuthorization:Ob,SolanaMobileWalletAdapterError:zo,SolanaMobileWalletAdapterErrorCode:Fo,SolanaMobileWalletAdapterProtocolError:ax,SolanaMobileWalletAdapterProtocolErrorCode:c9,SolanaSignInWithSolana:m9,SolanaSignTransactions:ZO,startRemoteScenario:k9,transact:L9},Symbol.toStringTag,{value:"Module"})),D9=G1(O9);var FM,OI;function B9(){if(OI)return FM;OI=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var l=e.length,c=e.charAt(0),d=Math.log(l)/Math.log(256),h=Math.log(256)/Math.log(l);function y(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var P=0,I=0,C=0,D=A.length;C!==D&&A[C]===0;)C++,P++;for(var k=(D-C)*h+1>>>0,F=new Uint8Array(k);C!==D;){for(var Q=A[C],G=0,Y=k-1;(Q!==0||G<I)&&Y!==-1;Y--,G++)Q+=256*F[Y]>>>0,F[Y]=Q%l>>>0,Q=Q/l>>>0;if(Q!==0)throw new Error("Non-zero carry");I=G,C++}for(var ee=k-I;ee!==k&&F[ee]===0;)ee++;for(var te=c.repeat(P);ee<k;++ee)te+=e.charAt(F[ee]);return te}function _(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;for(var P=0,I=0,C=0;A[P]===c;)I++,P++;for(var D=(A.length-P)*d+1>>>0,k=new Uint8Array(D);A[P];){var F=A.charCodeAt(P);if(F>255)return;var Q=t[F];if(Q===255)return;for(var G=0,Y=D-1;(Q!==0||G<C)&&Y!==-1;Y--,G++)Q+=l*k[Y]>>>0,k[Y]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");C=G,P++}for(var ee=D-C;ee!==D&&k[ee]===0;)ee++;for(var te=new Uint8Array(I+(D-ee)),U=I;ee!==D;)te[U++]=k[ee++];return te}function x(A){var P=_(A);if(P)return P;throw new Error("Non-base"+l+" character")}return{encode:y,decodeUnsafe:_,decode:x}}return FM=r,FM}var zM,DI;function U9(){return DI||(DI=1,zM=B9()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),zM}var WM={},BI;function F9(){return BI||(BI=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.SOLANA_CHAINS=r.SOLANA_LOCALNET_CHAIN=r.SOLANA_TESTNET_CHAIN=r.SOLANA_DEVNET_CHAIN=r.SOLANA_MAINNET_CHAIN=void 0,r.isSolanaChain=e,r.SOLANA_MAINNET_CHAIN="solana:mainnet",r.SOLANA_DEVNET_CHAIN="solana:devnet",r.SOLANA_TESTNET_CHAIN="solana:testnet",r.SOLANA_LOCALNET_CHAIN="solana:localnet",r.SOLANA_CHAINS=[r.SOLANA_MAINNET_CHAIN,r.SOLANA_DEVNET_CHAIN,r.SOLANA_TESTNET_CHAIN,r.SOLANA_LOCALNET_CHAIN];function e(t){return r.SOLANA_CHAINS.includes(t)}})(WM)),WM}var UI;function z9(){if(UI)return ka;UI=1,Object.defineProperty(ka,"__esModule",{value:!0});var r=MT(),e=s9(),t=D9,n=HO(),i=U9(),s=F9();function o(Yt){return Yt&&typeof Yt=="object"&&"default"in Yt?Yt:{default:Yt}}var l=o(e),c=o(i);function d(Yt,mt,Ve,Fe){function St(Ut){return Ut instanceof Ve?Ut:new Ve(function(jt){jt(Ut)})}return new(Ve||(Ve=Promise))(function(Ut,jt){function cn(Cn){try{Wn(Fe.next(Cn))}catch(eo){jt(eo)}}function zn(Cn){try{Wn(Fe.throw(Cn))}catch(eo){jt(eo)}}function Wn(Cn){Cn.done?Ut(Cn.value):St(Cn.value).then(cn,zn)}Wn((Fe=Fe.apply(Yt,[])).next())})}function h(Yt,mt,Ve,Fe){if(Ve==="a"&&!Fe)throw new TypeError("Private accessor was defined without a getter");if(typeof mt=="function"?Yt!==mt||!Fe:!mt.has(Yt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Ve==="m"?Fe:Ve==="a"?Fe.call(Yt):Fe?Fe.value:mt.get(Yt)}function y(Yt,mt,Ve,Fe,St){if(typeof mt=="function"?Yt!==mt||!0:!mt.has(Yt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return mt.set(Yt,Ve),Ve}var _,x,A,P,I,C,D,k;const F=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,Q=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,G=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class Y{constructor(){_.add(this),x.set(this,null),A.set(this,{}),P.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),h(this,_,"m",C).call(this),h(this,x,"f")&&(h(this,x,"f").style.display="flex")},this.close=(mt=void 0)=>{var Ve;console.debug("Modal close"),h(this,_,"m",D).call(this),h(this,x,"f")&&(h(this,x,"f").style.display="none"),(Ve=h(this,A,"f").close)===null||Ve===void 0||Ve.forEach(Fe=>Fe(mt))},k.set(this,mt=>{mt.key==="Escape"&&this.close(mt)}),this.init=this.init.bind(this),y(this,x,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return d(this,void 0,void 0,function*(){console.log("Injecting modal"),h(this,_,"m",I).call(this)})}addEventListener(mt,Ve){var Fe;return!((Fe=h(this,A,"f")[mt])===null||Fe===void 0)&&Fe.push(Ve)||(h(this,A,"f")[mt]=[Ve]),()=>this.removeEventListener(mt,Ve)}removeEventListener(mt,Ve){var Fe;h(this,A,"f")[mt]=(Fe=h(this,A,"f")[mt])===null||Fe===void 0?void 0:Fe.filter(St=>Ve!==St)}}x=new WeakMap,A=new WeakMap,P=new WeakMap,k=new WeakMap,_=new WeakSet,I=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){h(this,x,"f")||y(this,x,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}y(this,x,document.createElement("div")),h(this,x,"f").id="mobile-wallet-adapter-embedded-root-ui",h(this,x,"f").innerHTML=F,h(this,x,"f").style.display="none";const mt=h(this,x,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");mt&&(mt.innerHTML=this.contentHtml);const Ve=document.createElement("style");Ve.id="mobile-wallet-adapter-embedded-modal-styles",Ve.textContent=Q+this.contentStyles;const Fe=document.createElement("div");Fe.innerHTML=G,this.dom=Fe.attachShadow({mode:"closed"}),this.dom.appendChild(Ve),this.dom.appendChild(h(this,x,"f")),document.body.appendChild(Fe)},C=function(){if(!h(this,x,"f")||h(this,P,"f"))return;[...h(this,x,"f").querySelectorAll("[data-modal-close]")].forEach(Ve=>Ve==null?void 0:Ve.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",h(this,k,"f")),y(this,P,!0)},D=function(){if(!h(this,P,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",h(this,k,"f")),!h(this,x,"f")))return;[...h(this,x,"f").querySelectorAll("[data-modal-close]")].forEach(Ve=>Ve==null?void 0:Ve.removeEventListener("click",this.close)),y(this,P,!1)};class ee extends Y{constructor(){super(...arguments),this.contentStyles=U,this.contentHtml=te}initWithQR(mt){const Ve=Object.create(null,{init:{get:()=>super.init}});return d(this,void 0,void 0,function*(){Ve.init.call(this),this.populateQRCode(mt)})}populateQRCode(mt){var Ve;return d(this,void 0,void 0,function*(){const Fe=(Ve=this.dom)===null||Ve===void 0?void 0:Ve.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(Fe){const St=yield l.default.toCanvas(mt,{width:200,margin:0});Fe.firstElementChild!==null?Fe.replaceChild(St,Fe.firstElementChild):Fe.appendChild(St)}else console.error("QRCode Container not found")})}}const te=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,U=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,V="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function K(Yt){return window.btoa(String.fromCharCode.call(null,...Yt))}function E(Yt){return new Uint8Array(window.atob(Yt).split("").map(mt=>mt.charCodeAt(0)))}var a,p,M,R,T,L,N,v,u,S,W,$,se,me,_e,Ae,_t,Ze,Pe,ge,Ge,je,vt,He,nt,Pt,fe,oe,Oe,Re,Le,ot,et,Ye,bt,ct,re,j,q,ue,we,ye,le,Xe,de,Ce,Ue,Ee,qe,Ct,ft,yt,Sn,dt,ae,J,X,he,Ie,Te,Ne,dn,gt,xt,Dn,wt,kt,Pr,Dt,Ot;const pe="Mobile Wallet Adapter",De=64,$e=[r.SolanaSignAndSendTransaction,r.SolanaSignTransaction,r.SolanaSignMessage,r.SolanaSignIn];class Qe{constructor(mt){a.add(this),p.set(this,{}),M.set(this,"1.0.0"),R.set(this,pe),T.set(this,"https://solanamobile.com/wallets"),L.set(this,V),N.set(this,void 0),v.set(this,void 0),u.set(this,void 0),S.set(this,!1),W.set(this,0),$.set(this,[]),se.set(this,void 0),me.set(this,void 0),_e.set(this,void 0),Ae.set(this,(Ve,Fe)=>{var St;return!((St=h(this,p,"f")[Ve])===null||St===void 0)&&St.push(Fe)||(h(this,p,"f")[Ve]=[Fe]),()=>h(this,a,"m",Ze).call(this,Ve,Fe)}),Pe.set(this,({silent:Ve}={})=>d(this,void 0,void 0,function*(){if(h(this,S,"f")||this.connected)return{accounts:this.accounts};y(this,S,!0);try{if(Ve){const Fe=yield h(this,u,"f").get();if(Fe)yield h(this,je,"f").call(this,Fe.capabilities),yield h(this,Ge,"f").call(this,Fe);else return{accounts:this.accounts}}else yield h(this,ge,"f").call(this)}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}finally{y(this,S,!1)}return{accounts:this.accounts}})),ge.set(this,Ve=>d(this,void 0,void 0,function*(){try{const Fe=yield h(this,u,"f").get();if(Fe)return h(this,Ge,"f").call(this,Fe),Fe;const St=yield h(this,se,"f").select(h(this,$,"f"));return yield h(this,nt,"f").call(this,Ut=>d(this,void 0,void 0,function*(){const[jt,cn]=yield Promise.all([Ut.getCapabilities(),Ut.authorize({chain:St,identity:h(this,N,"f"),sign_in_payload:Ve})]),zn=h(this,fe,"f").call(this,cn.accounts),Wn=Object.assign(Object.assign({},cn),{accounts:zn,chain:St,capabilities:jt});return Promise.all([h(this,je,"f").call(this,jt),h(this,u,"f").set(Wn),h(this,Ge,"f").call(this,Wn)]),Wn}))}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}})),Ge.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const St=h(this,v,"f")==null||((Fe=h(this,v,"f"))===null||Fe===void 0?void 0:Fe.accounts.length)!==Ve.accounts.length||h(this,v,"f").accounts.some((Ut,jt)=>Ut.address!==Ve.accounts[jt].address);y(this,v,Ve),St&&h(this,a,"m",_t).call(this,"change",{accounts:this.accounts})})),je.set(this,Ve=>d(this,void 0,void 0,function*(){const Fe=Ve.features.includes("solana:signTransactions"),St=Ve.supports_sign_and_send_transactions,Ut=r.SolanaSignAndSendTransaction in this.features!==St||r.SolanaSignTransaction in this.features!==Fe;y(this,me,Object.assign(Object.assign({},(St||!St&&!Fe)&&{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:h(this,Re,"f")}}),Fe&&{[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:h(this,Le,"f")}})),Ut&&h(this,a,"m",_t).call(this,"change",{features:this.features})})),vt.set(this,(Ve,Fe,St)=>d(this,void 0,void 0,function*(){var Ut,jt;try{const[cn,zn]=yield Promise.all([(jt=(Ut=h(this,v,"f"))===null||Ut===void 0?void 0:Ut.capabilities)!==null&&jt!==void 0?jt:yield Ve.getCapabilities(),Ve.authorize({auth_token:Fe,identity:h(this,N,"f"),chain:St})]),Wn=h(this,fe,"f").call(this,zn.accounts),Cn=Object.assign(Object.assign({},zn),{accounts:Wn,chain:St,capabilities:cn});Promise.all([h(this,u,"f").set(Cn),h(this,Ge,"f").call(this,Cn)])}catch(cn){throw h(this,He,"f").call(this),new Error(cn instanceof Error&&cn.message||"Unknown error")}})),He.set(this,()=>d(this,void 0,void 0,function*(){var Ve;h(this,u,"f").clear(),y(this,S,!1),y(this,W,(Ve=h(this,W,"f"),Ve++,Ve)),y(this,v,void 0),h(this,a,"m",_t).call(this,"change",{accounts:this.accounts})})),nt.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const St=(Fe=h(this,v,"f"))===null||Fe===void 0?void 0:Fe.wallet_uri_base,Ut=St?{baseUri:St}:void 0,jt=h(this,W,"f");try{return yield t.transact(Ve,Ut)}catch(cn){throw h(this,W,"f")!==jt&&(yield new Promise(()=>{})),cn instanceof Error&&cn.name==="SolanaMobileWalletAdapterError"&&cn.code==="ERROR_WALLET_NOT_FOUND"&&(yield h(this,_e,"f").call(this,this)),cn}})),Pt.set(this,()=>{if(!h(this,v,"f"))throw new Error("Wallet not connected");return{authToken:h(this,v,"f").auth_token,chain:h(this,v,"f").chain}}),fe.set(this,Ve=>Ve.map(Fe=>{var St,Ut;const jt=E(Fe.address);return{address:c.default.encode(jt),publicKey:jt,label:Fe.label,icon:Fe.icon,chains:(St=Fe.chains)!==null&&St!==void 0?St:h(this,$,"f"),features:(Ut=Fe.features)!==null&&Ut!==void 0?Ut:$e}})),oe.set(this,Ve=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:St}=h(this,Pt,"f").call(this);try{const Ut=Ve.map(jt=>K(jt));return yield h(this,nt,"f").call(this,jt=>d(this,void 0,void 0,function*(){return yield h(this,vt,"f").call(this,jt,Fe,St),(yield jt.signTransactions({payloads:Ut})).signed_payloads.map(E)}))}catch(Ut){throw new Error(Ut instanceof Error&&Ut.message||"Unknown error")}})),Oe.set(this,(Ve,Fe)=>d(this,void 0,void 0,function*(){const{authToken:St,chain:Ut}=h(this,Pt,"f").call(this);try{return yield h(this,nt,"f").call(this,jt=>d(this,void 0,void 0,function*(){const[cn,zn]=yield Promise.all([jt.getCapabilities(),h(this,vt,"f").call(this,jt,St,Ut)]);if(cn.supports_sign_and_send_transactions){const Wn=K(Ve);return(yield jt.signAndSendTransactions(Object.assign(Object.assign({},Fe),{payloads:[Wn]}))).signatures.map(E)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(jt){throw new Error(jt instanceof Error&&jt.message||"Unknown error")}})),Re.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];for(const St of Ve){const Ut=yield h(this,Oe,"f").call(this,St.transaction,St.options);Fe.push({signature:Ut})}return Fe})),Le.set(this,(...Ve)=>d(this,void 0,void 0,function*(){return(yield h(this,oe,"f").call(this,Ve.map(({transaction:Fe})=>Fe))).map(Fe=>({signedTransaction:Fe}))})),ot.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:St}=h(this,Pt,"f").call(this),Ut=Ve.map(({account:cn})=>K(cn.publicKey)),jt=Ve.map(({message:cn})=>K(cn));try{return yield h(this,nt,"f").call(this,cn=>d(this,void 0,void 0,function*(){return yield h(this,vt,"f").call(this,cn,Fe,St),(yield cn.signMessages({addresses:Ut,payloads:jt})).signed_payloads.map(E).map(Wn=>({signedMessage:Wn,signature:Wn.slice(-De)}))}))}catch(cn){throw new Error(cn instanceof Error&&cn.message||"Unknown error")}})),et.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];if(Ve.length>1)for(const St of Ve)Fe.push(yield h(this,Ye,"f").call(this,St));else return[yield h(this,Ye,"f").call(this,Ve[0])];return Fe})),Ye.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe,St,Ut;y(this,S,!0);try{const jt=yield h(this,ge,"f").call(this,Object.assign(Object.assign({},Ve),{domain:(Fe=Ve==null?void 0:Ve.domain)!==null&&Fe!==void 0?Fe:window.location.host}));if(!jt.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const cn=jt.sign_in_result.address,zn=jt.accounts.find(Wn=>Wn.address==cn);return{account:Object.assign(Object.assign({},zn??{address:c.default.encode(E(cn))}),{publicKey:E(cn),chains:(St=zn==null?void 0:zn.chains)!==null&&St!==void 0?St:h(this,$,"f"),features:(Ut=zn==null?void 0:zn.features)!==null&&Ut!==void 0?Ut:jt.capabilities.features}),signedMessage:E(jt.sign_in_result.signed_message),signature:E(jt.sign_in_result.signature)}}catch(jt){throw new Error(jt instanceof Error&&jt.message||"Unknown error")}finally{y(this,S,!1)}})),y(this,u,mt.authorizationCache),y(this,N,mt.appIdentity),y(this,$,mt.chains),y(this,se,mt.chainSelector),y(this,_e,mt.onWalletNotFound),y(this,me,{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:h(this,Re,"f")},[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:h(this,Le,"f")}})}get version(){return h(this,M,"f")}get name(){return h(this,R,"f")}get url(){return h(this,T,"f")}get icon(){return h(this,L,"f")}get chains(){return h(this,$,"f")}get features(){return Object.assign({[n.StandardConnect]:{version:"1.0.0",connect:h(this,Pe,"f")},[n.StandardDisconnect]:{version:"1.0.0",disconnect:h(this,He,"f")},[n.StandardEvents]:{version:"1.0.0",on:h(this,Ae,"f")},[r.SolanaSignMessage]:{version:"1.0.0",signMessage:h(this,ot,"f")},[r.SolanaSignIn]:{version:"1.0.0",signIn:h(this,et,"f")}},h(this,me,"f"))}get accounts(){var mt,Ve;return(Ve=(mt=h(this,v,"f"))===null||mt===void 0?void 0:mt.accounts)!==null&&Ve!==void 0?Ve:[]}get connected(){return!!h(this,v,"f")}get isAuthorized(){return!!h(this,v,"f")}get currentAuthorization(){return h(this,v,"f")}get cachedAuthorizationResult(){return h(this,u,"f").get()}}p=new WeakMap,M=new WeakMap,R=new WeakMap,T=new WeakMap,L=new WeakMap,N=new WeakMap,v=new WeakMap,u=new WeakMap,S=new WeakMap,W=new WeakMap,$=new WeakMap,se=new WeakMap,me=new WeakMap,_e=new WeakMap,Ae=new WeakMap,Pe=new WeakMap,ge=new WeakMap,Ge=new WeakMap,je=new WeakMap,vt=new WeakMap,He=new WeakMap,nt=new WeakMap,Pt=new WeakMap,fe=new WeakMap,oe=new WeakMap,Oe=new WeakMap,Re=new WeakMap,Le=new WeakMap,ot=new WeakMap,et=new WeakMap,Ye=new WeakMap,a=new WeakSet,_t=function(mt,...Ve){var Fe;(Fe=h(this,p,"f")[mt])===null||Fe===void 0||Fe.forEach(St=>St.apply(null,Ve))},Ze=function(mt,Ve){var Fe;h(this,p,"f")[mt]=(Fe=h(this,p,"f")[mt])===null||Fe===void 0?void 0:Fe.filter(St=>Ve!==St)};class Be{constructor(mt){bt.add(this),ct.set(this,{}),re.set(this,"1.0.0"),j.set(this,pe),q.set(this,"https://solanamobile.com/wallets"),ue.set(this,V),we.set(this,void 0),ye.set(this,void 0),le.set(this,void 0),Xe.set(this,!1),de.set(this,0),Ce.set(this,[]),Ue.set(this,void 0),Ee.set(this,void 0),qe.set(this,void 0),Ct.set(this,void 0),ft.set(this,void 0),yt.set(this,(Ve,Fe)=>{var St;return!((St=h(this,ct,"f")[Ve])===null||St===void 0)&&St.push(Fe)||(h(this,ct,"f")[Ve]=[Fe]),()=>h(this,bt,"m",dt).call(this,Ve,Fe)}),ae.set(this,({silent:Ve}={})=>d(this,void 0,void 0,function*(){if(h(this,Xe,"f")||this.connected)return{accounts:this.accounts};y(this,Xe,!0);try{yield h(this,J,"f").call(this)}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}finally{y(this,Xe,!1)}return{accounts:this.accounts}})),J.set(this,Ve=>d(this,void 0,void 0,function*(){try{const Fe=yield h(this,le,"f").get();if(Fe)return h(this,X,"f").call(this,Fe),Fe;h(this,ft,"f")&&y(this,ft,void 0,"f");const St=yield h(this,Ue,"f").select(h(this,Ce,"f"));return yield h(this,Ne,"f").call(this,Ut=>d(this,void 0,void 0,function*(){const[jt,cn]=yield Promise.all([Ut.getCapabilities(),Ut.authorize({chain:St,identity:h(this,we,"f"),sign_in_payload:Ve})]),zn=h(this,gt,"f").call(this,cn.accounts),Wn=Object.assign(Object.assign({},cn),{accounts:zn,chain:St,capabilities:jt});return Promise.all([h(this,he,"f").call(this,jt),h(this,le,"f").set(Wn),h(this,X,"f").call(this,Wn)]),Wn}))}catch(Fe){throw new Error(Fe instanceof Error&&Fe.message||"Unknown error")}})),X.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const St=h(this,ye,"f")==null||((Fe=h(this,ye,"f"))===null||Fe===void 0?void 0:Fe.accounts.length)!==Ve.accounts.length||h(this,ye,"f").accounts.some((Ut,jt)=>Ut.address!==Ve.accounts[jt].address);y(this,ye,Ve),St&&h(this,bt,"m",Sn).call(this,"change",{accounts:this.accounts})})),he.set(this,Ve=>d(this,void 0,void 0,function*(){const Fe=Ve.features.includes("solana:signTransactions"),St=Ve.supports_sign_and_send_transactions||Ve.features.includes("solana:signAndSendTransaction"),Ut=r.SolanaSignAndSendTransaction in this.features!==St||r.SolanaSignTransaction in this.features!==Fe;y(this,Ee,Object.assign(Object.assign({},St&&{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:Ve.supported_transaction_versions,signAndSendTransaction:h(this,wt,"f")}}),Fe&&{[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:Ve.supported_transaction_versions,signTransaction:h(this,kt,"f")}})),Ut&&h(this,bt,"m",Sn).call(this,"change",{features:this.features})})),Ie.set(this,(Ve,Fe,St)=>d(this,void 0,void 0,function*(){var Ut,jt;try{const[cn,zn]=yield Promise.all([(jt=(Ut=h(this,ye,"f"))===null||Ut===void 0?void 0:Ut.capabilities)!==null&&jt!==void 0?jt:yield Ve.getCapabilities(),Ve.authorize({auth_token:Fe,identity:h(this,we,"f"),chain:St})]),Wn=h(this,gt,"f").call(this,zn.accounts),Cn=Object.assign(Object.assign({},zn),{accounts:Wn,chain:St,capabilities:cn});Promise.all([h(this,le,"f").set(Cn),h(this,X,"f").call(this,Cn)])}catch(cn){throw h(this,Te,"f").call(this),new Error(cn instanceof Error&&cn.message||"Unknown error")}})),Te.set(this,()=>d(this,void 0,void 0,function*(){var Ve,Fe;(Ve=h(this,ft,"f"))===null||Ve===void 0||Ve.close(),h(this,le,"f").clear(),y(this,Xe,!1),y(this,de,(Fe=h(this,de,"f"),Fe++,Fe)),y(this,ye,void 0),y(this,ft,void 0),h(this,bt,"m",Sn).call(this,"change",{accounts:this.accounts})})),Ne.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe;const St=(Fe=h(this,ye,"f"))===null||Fe===void 0?void 0:Fe.wallet_uri_base,jt=Object.assign(Object.assign({},St?{baseUri:St}:void 0),{remoteHostAuthority:h(this,Ct,"f")}),cn=h(this,de,"f"),zn=new ee;if(h(this,ft,"f"))return Ve(h(this,ft,"f").wallet);try{const{associationUrl:Wn,close:Cn,wallet:eo}=yield t.startRemoteScenario(jt),Dl=zn.addEventListener("close",pf=>{pf&&Cn()});return zn.initWithQR(Wn.toString()),zn.open(),y(this,ft,{close:Cn,wallet:yield eo},"f"),Dl(),zn.close(),yield Ve(h(this,ft,"f").wallet)}catch(Wn){throw zn.close(),h(this,de,"f")!==cn&&(yield new Promise(()=>{})),Wn instanceof Error&&Wn.name==="SolanaMobileWalletAdapterError"&&Wn.code==="ERROR_WALLET_NOT_FOUND"&&(yield h(this,qe,"f").call(this,this)),Wn}})),dn.set(this,()=>{if(!h(this,ye,"f"))throw new Error("Wallet not connected");return{authToken:h(this,ye,"f").auth_token,chain:h(this,ye,"f").chain}}),gt.set(this,Ve=>Ve.map(Fe=>{var St,Ut;const jt=E(Fe.address);return{address:c.default.encode(jt),publicKey:jt,label:Fe.label,icon:Fe.icon,chains:(St=Fe.chains)!==null&&St!==void 0?St:h(this,Ce,"f"),features:(Ut=Fe.features)!==null&&Ut!==void 0?Ut:$e}})),xt.set(this,Ve=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:St}=h(this,dn,"f").call(this);try{return yield h(this,Ne,"f").call(this,Ut=>d(this,void 0,void 0,function*(){return yield h(this,Ie,"f").call(this,Ut,Fe,St),(yield Ut.signTransactions({payloads:Ve.map(K)})).signed_payloads.map(E)}))}catch(Ut){throw new Error(Ut instanceof Error&&Ut.message||"Unknown error")}})),Dn.set(this,(Ve,Fe)=>d(this,void 0,void 0,function*(){const{authToken:St,chain:Ut}=h(this,dn,"f").call(this);try{return yield h(this,Ne,"f").call(this,jt=>d(this,void 0,void 0,function*(){const[cn,zn]=yield Promise.all([jt.getCapabilities(),h(this,Ie,"f").call(this,jt,St,Ut)]);if(cn.supports_sign_and_send_transactions)return(yield jt.signAndSendTransactions(Object.assign(Object.assign({},Fe),{payloads:[K(Ve)]}))).signatures.map(E)[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(jt){throw new Error(jt instanceof Error&&jt.message||"Unknown error")}})),wt.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];for(const St of Ve){const Ut=yield h(this,Dn,"f").call(this,St.transaction,St.options);Fe.push({signature:Ut})}return Fe})),kt.set(this,(...Ve)=>d(this,void 0,void 0,function*(){return(yield h(this,xt,"f").call(this,Ve.map(({transaction:Fe})=>Fe))).map(Fe=>({signedTransaction:Fe}))})),Pr.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const{authToken:Fe,chain:St}=h(this,dn,"f").call(this),Ut=Ve.map(({account:cn})=>K(cn.publicKey)),jt=Ve.map(({message:cn})=>K(cn));try{return yield h(this,Ne,"f").call(this,cn=>d(this,void 0,void 0,function*(){return yield h(this,Ie,"f").call(this,cn,Fe,St),(yield cn.signMessages({addresses:Ut,payloads:jt})).signed_payloads.map(E).map(Wn=>({signedMessage:Wn,signature:Wn.slice(-De)}))}))}catch(cn){throw new Error(cn instanceof Error&&cn.message||"Unknown error")}})),Dt.set(this,(...Ve)=>d(this,void 0,void 0,function*(){const Fe=[];if(Ve.length>1)for(const St of Ve)Fe.push(yield h(this,Ot,"f").call(this,St));else return[yield h(this,Ot,"f").call(this,Ve[0])];return Fe})),Ot.set(this,Ve=>d(this,void 0,void 0,function*(){var Fe,St,Ut;y(this,Xe,!0);try{const jt=yield h(this,J,"f").call(this,Object.assign(Object.assign({},Ve),{domain:(Fe=Ve==null?void 0:Ve.domain)!==null&&Fe!==void 0?Fe:window.location.host}));if(!jt.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const cn=jt.sign_in_result.address,zn=jt.accounts.find(Wn=>Wn.address==cn);return{account:Object.assign(Object.assign({},zn??{address:c.default.encode(E(cn))}),{publicKey:E(cn),chains:(St=zn==null?void 0:zn.chains)!==null&&St!==void 0?St:h(this,Ce,"f"),features:(Ut=zn==null?void 0:zn.features)!==null&&Ut!==void 0?Ut:jt.capabilities.features}),signedMessage:E(jt.sign_in_result.signed_message),signature:E(jt.sign_in_result.signature)}}catch(jt){throw new Error(jt instanceof Error&&jt.message||"Unknown error")}finally{y(this,Xe,!1)}})),y(this,le,mt.authorizationCache),y(this,we,mt.appIdentity),y(this,Ce,mt.chains),y(this,Ue,mt.chainSelector),y(this,Ct,mt.remoteHostAuthority),y(this,qe,mt.onWalletNotFound),y(this,Ee,{[r.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:h(this,wt,"f")},[r.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:h(this,kt,"f")}})}get version(){return h(this,re,"f")}get name(){return h(this,j,"f")}get url(){return h(this,q,"f")}get icon(){return h(this,ue,"f")}get chains(){return h(this,Ce,"f")}get features(){return Object.assign({[n.StandardConnect]:{version:"1.0.0",connect:h(this,ae,"f")},[n.StandardDisconnect]:{version:"1.0.0",disconnect:h(this,Te,"f")},[n.StandardEvents]:{version:"1.0.0",on:h(this,yt,"f")},[r.SolanaSignMessage]:{version:"1.0.0",signMessage:h(this,Pr,"f")},[r.SolanaSignIn]:{version:"1.0.0",signIn:h(this,Dt,"f")}},h(this,Ee,"f"))}get accounts(){var mt,Ve;return(Ve=(mt=h(this,ye,"f"))===null||mt===void 0?void 0:mt.accounts)!==null&&Ve!==void 0?Ve:[]}get connected(){return!!h(this,ft,"f")&&!!h(this,ye,"f")}get isAuthorized(){return!!h(this,ye,"f")}get currentAuthorization(){return h(this,ye,"f")}get cachedAuthorizationResult(){return h(this,le,"f").get()}}ct=new WeakMap,re=new WeakMap,j=new WeakMap,q=new WeakMap,ue=new WeakMap,we=new WeakMap,ye=new WeakMap,le=new WeakMap,Xe=new WeakMap,de=new WeakMap,Ce=new WeakMap,Ue=new WeakMap,Ee=new WeakMap,qe=new WeakMap,Ct=new WeakMap,ft=new WeakMap,yt=new WeakMap,ae=new WeakMap,J=new WeakMap,X=new WeakMap,he=new WeakMap,Ie=new WeakMap,Te=new WeakMap,Ne=new WeakMap,dn=new WeakMap,gt=new WeakMap,xt=new WeakMap,Dn=new WeakMap,wt=new WeakMap,kt=new WeakMap,Pr=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,bt=new WeakSet,Sn=function(mt,...Ve){var Fe;(Fe=h(this,ct,"f")[mt])===null||Fe===void 0||Fe.forEach(St=>St.apply(null,Ve))},dt=function(mt,Ve){var Fe;h(this,ct,"f")[mt]=(Fe=h(this,ct,"f")[mt])===null||Fe===void 0?void 0:Fe.filter(St=>Ve!==St)};var Tt=function(Yt,mt,Ve,Fe,St){if(Fe==="m")throw new TypeError("Private method is not writable");if(Fe==="a"&&!St)throw new TypeError("Private accessor was defined without a setter");if(typeof mt=="function"?Yt!==mt||!St:!mt.has(Yt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Fe==="a"?St.call(Yt,Ve):St?St.value=Ve:mt.set(Yt,Ve),Ve},zt=function(Yt,mt,Ve,Fe){if(Ve==="a"&&!Fe)throw new TypeError("Private accessor was defined without a getter");if(typeof mt=="function"?Yt!==mt||!Fe:!mt.has(Yt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Ve==="m"?Fe:Ve==="a"?Fe.call(Yt):Fe?Fe.value:mt.get(Yt)},At;function Ht(Yt){const mt=({register:Ve})=>Ve(Yt);try{window.dispatchEvent(new rn(mt))}catch(Ve){console.error(`wallet-standard:register-wallet event could not be dispatched
`,Ve)}try{window.addEventListener("wallet-standard:app-ready",({detail:Ve})=>mt(Ve))}catch(Ve){console.error(`wallet-standard:app-ready event listener could not be added
`,Ve)}}class rn extends Event{constructor(mt){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),At.set(this,void 0),Tt(this,At,mt,"f")}get detail(){return zt(this,At,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}At=new WeakMap;function on(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function Kt(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Tn(Yt){on()?Ht(new Qe(Yt)):Kt()&&Yt.remoteHostAuthority!==void 0&&Ht(new Be(Object.assign(Object.assign({},Yt),{remoteHostAuthority:Yt.remoteHostAuthority})))}const Rn="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",En="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class un extends Y{constructor(){super(...arguments),this.contentStyles=Bt,this.contentHtml=$t}initWithError(mt){super.init(),this.populateError(mt)}populateError(mt){var Ve,Fe;const St=(Ve=this.dom)===null||Ve===void 0?void 0:Ve.getElementById("mobile-wallet-adapter-error-message"),Ut=(Fe=this.dom)===null||Fe===void 0?void 0:Fe.getElementById("mobile-wallet-adapter-error-action");if(St){if(mt.name==="SolanaMobileWalletAdapterError")switch(mt.code){case"ERROR_WALLET_NOT_FOUND":St.innerHTML=Rn,Ut&&Ut.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":St.innerHTML=En,Ut&&(Ut.style.display="none");return}St.innerHTML=`An unexpected error occurred: ${mt.message}`}else console.log("Failed to locate error dialog element")}}const $t=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Bt=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Mn(){return d(this,void 0,void 0,function*(){if(typeof window<"u"){const Yt=window.navigator.userAgent.toLowerCase(),mt=new un;Yt.includes("wv")?mt.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):mt.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),mt.open()}})}function On(){return()=>d(this,void 0,void 0,function*(){Mn()})}const Wr="SolanaMobileWalletAdapterDefaultAuthorizationCache";function vi(){let Yt;try{Yt=window.localStorage}catch{}return{clear(){return d(this,void 0,void 0,function*(){if(Yt)try{Yt.removeItem(Wr)}catch{}})},get(){return d(this,void 0,void 0,function*(){if(Yt)try{const mt=JSON.parse(Yt.getItem(Wr));if(mt&&mt.accounts){const Ve=mt.accounts.map(Fe=>Object.assign(Object.assign({},Fe),{publicKey:"publicKey"in Fe?new Uint8Array(Object.values(Fe.publicKey)):c.default.decode(Fe.address)}));return Object.assign(Object.assign({},mt),{accounts:Ve})}else return mt||void 0}catch{}})},set(mt){return d(this,void 0,void 0,function*(){if(Yt)try{Yt.setItem(Wr,JSON.stringify(mt))}catch{}})}}}function sr(){return{select(Yt){return d(this,void 0,void 0,function*(){return Yt.length===1?Yt[0]:Yt.includes(s.SOLANA_MAINNET_CHAIN)?s.SOLANA_MAINNET_CHAIN:Yt[0]})}}}return ka.LocalSolanaMobileWalletAdapterWallet=Qe,ka.RemoteSolanaMobileWalletAdapterWallet=Be,ka.SolanaMobileWalletAdapterWalletName=pe,ka.createDefaultAuthorizationCache=vi,ka.createDefaultChainSelector=sr,ka.createDefaultWalletNotFoundHandler=On,ka.defaultErrorModalWalletNotFoundHandler=Mn,ka.registerMwa=Tn,ka}var FI;function W9(){if(FI)return hl;FI=1,Object.defineProperty(hl,"__esModule",{value:!0});var r=U7(),e=GO,t=MT(),n=z9();function i(v,u,S,W){function $(se){return se instanceof S?se:new S(function(me){me(se)})}return new(S||(S=Promise))(function(se,me){function _e(Ze){try{_t(W.next(Ze))}catch(Pe){me(Pe)}}function Ae(Ze){try{_t(W.throw(Ze))}catch(Pe){me(Pe)}}function _t(Ze){Ze.done?se(Ze.value):$(Ze.value).then(_e,Ae)}_t((W=W.apply(v,[])).next())})}function s(v,u,S,W){if(S==="a"&&!W)throw new TypeError("Private accessor was defined without a getter");if(typeof u=="function"?v!==u||!W:!u.has(v))throw new TypeError("Cannot read private member from an object whose class did not declare it");return S==="m"?W:S==="a"?W.call(v):W?W.value:u.get(v)}function o(v,u,S,W,$){if(typeof u=="function"?v!==u||!0:!u.has(v))throw new TypeError("Cannot write private member to an object whose class did not declare it");return u.set(v,S),S}const l="standard:connect",c="standard:disconnect",d="standard:events";function h(v){return window.btoa(String.fromCharCode.call(null,...v))}function y(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var _,x,A,P,I,C,D,k,F,Q,G,Y,ee;const te="Mobile Wallet Adapter",U=64;function V(v){return"version"in v}function K(v){switch(v){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return v}}class E extends r.BaseSignInMessageSignerWalletAdapter{constructor(u,S){super(),_.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),x.set(this,void 0),A.set(this,!1),P.set(this,y()?r.WalletReadyState.Loadable:r.WalletReadyState.Unsupported),I.set(this,void 0),C.set(this,void 0),D.set(this,void 0),k.set(this,W=>i(this,void 0,void 0,function*(){if(W.accounts&&W.accounts.length>0){s(this,_,"m",Q).call(this);const $=yield s(this,I,"f").call(this,W.accounts);$!==s(this,C,"f")&&(o(this,C,$),o(this,D,void 0),this.emit("connect",this.publicKey))}})),o(this,I,W=>i(this,void 0,void 0,function*(){var $;const se=yield S.addressSelector.select(W.map(({publicKey:me})=>h(me)));return($=W.find(({publicKey:me})=>h(me)===se))!==null&&$!==void 0?$:W[0]})),o(this,x,u),s(this,x,"f").features[d].on("change",s(this,k,"f")),this.name=s(this,x,"f").name,this.icon=s(this,x,"f").icon,this.url=s(this,x,"f").url}get publicKey(){var u;if(!s(this,D,"f")&&s(this,C,"f"))try{o(this,D,new e.PublicKey(s(this,C,"f").publicKey),"f")}catch(S){throw new r.WalletPublicKeyError(S instanceof Error&&(S==null?void 0:S.message)||"Unknown error",S)}return(u=s(this,D,"f"))!==null&&u!==void 0?u:null}get connected(){return s(this,x,"f").connected}get connecting(){return s(this,A,"f")}get readyState(){return s(this,P,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return i(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return i(this,void 0,void 0,function*(){s(this,_,"m",F).call(this,!0)})}connect(){return i(this,void 0,void 0,function*(){s(this,_,"m",F).call(this)})}performAuthorization(u){return i(this,void 0,void 0,function*(){try{const S=yield s(this,x,"f").cachedAuthorizationResult;return S?(yield s(this,x,"f").features[l].connect({silent:!0}),S):(u?yield s(this,x,"f").features[t.SolanaSignIn].signIn(u):yield s(this,x,"f").features[l].connect(),yield yield s(this,x,"f").cachedAuthorizationResult)}catch(S){throw new r.WalletConnectionError(S instanceof Error&&S.message||"Unknown error",S)}})}disconnect(){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){o(this,A,!1),o(this,D,void 0),o(this,C,void 0),yield s(this,x,"f").features[c].disconnect(),this.emit("disconnect")}))})}signIn(u){return i(this,void 0,void 0,function*(){return s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){var S;if(s(this,P,"f")!==r.WalletReadyState.Installed&&s(this,P,"f")!==r.WalletReadyState.Loadable)throw new r.WalletNotReadyError;o(this,A,!0);try{const W=yield s(this,x,"f").features[t.SolanaSignIn].signIn(Object.assign(Object.assign({},u),{domain:(S=u==null?void 0:u.domain)!==null&&S!==void 0?S:window.location.host}));if(W.length>0)return W[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(W){throw new r.WalletConnectionError(W instanceof Error&&W.message||"Unknown error",W)}finally{o(this,A,!1)}}))})}signMessage(u){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){const S=s(this,_,"m",G).call(this);try{return(yield s(this,x,"f").features[t.SolanaSignMessage].signMessage({account:S,message:u}))[0].signature}catch(W){throw new r.WalletSignMessageError(W==null?void 0:W.message,W)}}))})}sendTransaction(u,S,W){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){const $=s(this,_,"m",G).call(this);try{let se=function(){let me;switch(S.commitment){case"confirmed":case"finalized":case"processed":me=S.commitment;break;default:me="finalized"}let _e;switch(W==null?void 0:W.preflightCommitment){case"confirmed":case"finalized":case"processed":_e=W.preflightCommitment;break;case void 0:_e=me;break;default:_e="finalized"}return(_e==="finalized"?2:_e==="confirmed"?1:0)<(me==="finalized"?2:me==="confirmed"?1:0)?_e:me};if(t.SolanaSignAndSendTransaction in s(this,x,"f").features){const me=K(s(this,x,"f").currentAuthorization.chain),[_e]=(yield s(this,x,"f").features[t.SolanaSignAndSendTransaction].signAndSendTransaction({account:$,transaction:u.serialize(),chain:me,options:W?{skipPreflight:W.skipPreflight,maxRetries:W.maxRetries}:void 0})).map((Ae=>h(Ae.signature)));return _e}else{const[me]=yield s(this,_,"m",Y).call(this,[u]);if(V(me))return yield S.sendTransaction(me);{const _e=me.serialize();return yield S.sendRawTransaction(_e,Object.assign(Object.assign({},W),{preflightCommitment:se()}))}}}catch(se){throw new r.WalletSendTransactionError(se==null?void 0:se.message,se)}}))})}signTransaction(u){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){const[S]=yield s(this,_,"m",Y).call(this,[u]);return S}))})}signAllTransactions(u){return i(this,void 0,void 0,function*(){return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){return yield s(this,_,"m",Y).call(this,u)}))})}}x=new WeakMap,A=new WeakMap,P=new WeakMap,I=new WeakMap,C=new WeakMap,D=new WeakMap,k=new WeakMap,_=new WeakSet,F=function(u=!1){return i(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield s(this,_,"m",ee).call(this,()=>i(this,void 0,void 0,function*(){if(s(this,P,"f")!==r.WalletReadyState.Installed&&s(this,P,"f")!==r.WalletReadyState.Loadable)throw new r.WalletNotReadyError;o(this,A,!0);try{yield s(this,x,"f").features[l].connect({silent:u})}catch(S){throw new r.WalletConnectionError(S instanceof Error&&S.message||"Unknown error",S)}finally{o(this,A,!1)}}))})},Q=function(){s(this,P,"f")!==r.WalletReadyState.Installed&&this.emit("readyStateChange",o(this,P,r.WalletReadyState.Installed))},G=function(){if(!s(this,x,"f").isAuthorized||!s(this,C,"f"))throw new r.WalletNotConnectedError;return s(this,C,"f")},Y=function(u){return i(this,void 0,void 0,function*(){const S=s(this,_,"m",G).call(this);try{if(t.SolanaSignTransaction in s(this,x,"f").features)return s(this,x,"f").features[t.SolanaSignTransaction].signTransaction(...u.map(W=>({account:S,transaction:W.serialize()}))).then(W=>W.map($=>{const se=$.signedTransaction,_e=se[0]*U+1;return e.VersionedMessage.deserializeMessageVersion(se.slice(_e,se.length))==="legacy"?e.Transaction.from(se):e.VersionedTransaction.deserialize(se)}));throw new Error("Connected wallet does not support signing transactions")}catch(W){throw new r.WalletSignTransactionError(W==null?void 0:W.message,W)}})},ee=function(u){return i(this,void 0,void 0,function*(){try{return yield u()}catch(S){throw this.emit("error",S),S}})};class a extends E{constructor(u){var S;const W=K((S=u.chain)!==null&&S!==void 0?S:u.cluster);super(new n.LocalSolanaMobileWalletAdapterWallet({appIdentity:u.appIdentity,authorizationCache:{set:u.authorizationResultCache.set,get:()=>i(this,void 0,void 0,function*(){return yield u.authorizationResultCache.get()}),clear:u.authorizationResultCache.clear},chains:[W],chainSelector:n.createDefaultChainSelector(),onWalletNotFound:()=>i(this,void 0,void 0,function*(){u.onWalletNotFound(this)})}),{addressSelector:u.addressSelector,chain:W})}}class p extends E{constructor(u){const S=K(u.chain);super(new n.RemoteSolanaMobileWalletAdapterWallet({appIdentity:u.appIdentity,authorizationCache:{set:u.authorizationResultCache.set,get:()=>i(this,void 0,void 0,function*(){return yield u.authorizationResultCache.get()}),clear:u.authorizationResultCache.clear},chains:[S],chainSelector:n.createDefaultChainSelector(),remoteHostAuthority:u.remoteHostAuthority,onWalletNotFound:()=>i(this,void 0,void 0,function*(){u.onWalletNotFound(this)})}),{addressSelector:u.addressSelector,chain:S})}}class M extends a{}function R(){return{select(v){return i(this,void 0,void 0,function*(){return v[0]})}}}function T(){return n.createDefaultAuthorizationCache()}function L(v){return i(this,void 0,void 0,function*(){return n.defaultErrorModalWalletNotFoundHandler()})}function N(){return L}return hl.LocalSolanaMobileWalletAdapter=a,hl.RemoteSolanaMobileWalletAdapter=p,hl.SolanaMobileWalletAdapter=M,hl.SolanaMobileWalletAdapterWalletName=te,hl.createDefaultAddressSelector=R,hl.createDefaultAuthorizationResultCache=T,hl.createDefaultWalletNotFoundHandler=N,hl}var Gc=W9(),V9=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},H9=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},h_;function G9(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new j9(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class j9 extends Event{get detail(){return V9(this,h_,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),h_.set(this,void 0),H9(this,h_,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}h_=new WeakMap;function q9(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function K9(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<r.length;d++){const h=r.charAt(d),y=h.charCodeAt(0);if(e[y]!==255)throw new TypeError(h+" is ambiguous");e[y]=d}const t=r.length,n=r.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let h=0,y=0,_=0;const x=d.length;for(;_!==x&&d[_]===0;)_++,h++;const A=(x-_)*s+1>>>0,P=new Uint8Array(A);for(;_!==x;){let D=d[_],k=0;for(let F=A-1;(D!==0||k<y)&&F!==-1;F--,k++)D+=256*P[F]>>>0,P[F]=D%t>>>0,D=D/t>>>0;if(D!==0)throw new Error("Non-zero carry");y=k,_++}let I=A-y;for(;I!==A&&P[I]===0;)I++;let C=n.repeat(h);for(;I<A;++I)C+=r.charAt(P[I]);return C}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let h=0,y=0,_=0;for(;d[h]===n;)y++,h++;const x=(d.length-h)*i+1>>>0,A=new Uint8Array(x);for(;h<d.length;){const D=d.charCodeAt(h);if(D>255)return;let k=e[D];if(k===255)return;let F=0;for(let Q=x-1;(k!==0||F<_)&&Q!==-1;Q--,F++)k+=t*A[Q]>>>0,A[Q]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");_=F,h++}let P=x-_;for(;P!==x&&A[P]===0;)P++;const I=new Uint8Array(y+(x-P));let C=y;for(;P!==x;)I[C++]=A[P++];return I}function c(d){const h=l(d);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:c}}var Y9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const X9=K9(Y9);var _n=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ti=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},hs,mo,Nh,Ph,gh,hg,H_,gr,G_,Bb,d_,Ub,wg,Fb,zI,WI,VI,HI;class $9 extends BO{get name(){return _n(this,gr,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _n(this,gr,"f").icon}get readyState(){return _n(this,G_,"f")}get publicKey(){return _n(this,Nh,"f")}get connecting(){return _n(this,Ph,"f")}get supportedTransactionVersions(){return _n(this,H_,"f")}get wallet(){return _n(this,gr,"f")}get standard(){return!0}constructor({wallet:e}){super(),hs.add(this),mo.set(this,void 0),Nh.set(this,void 0),Ph.set(this,void 0),gh.set(this,void 0),hg.set(this,void 0),H_.set(this,void 0),gr.set(this,void 0),G_.set(this,typeof window>"u"||typeof document>"u"?wr.Unsupported:wr.Installed),Fb.set(this,t=>{if("accounts"in t){const n=_n(this,gr,"f").accounts[0];_n(this,mo,"f")&&!_n(this,gh,"f")&&n!==_n(this,mo,"f")&&(n?_n(this,hs,"m",d_).call(this,n):(this.emit("error",new gT),_n(this,hs,"m",Ub).call(this)))}"features"in t&&_n(this,hs,"m",wg).call(this)}),Ti(this,gr,e,"f"),Ti(this,mo,null,"f"),Ti(this,Nh,null,"f"),Ti(this,Ph,!1,"f"),Ti(this,gh,!1,"f"),Ti(this,hg,_n(this,gr,"f").features[_T].on("change",_n(this,Fb,"f")),"f"),_n(this,hs,"m",wg).call(this)}destroy(){Ti(this,mo,null,"f"),Ti(this,Nh,null,"f"),Ti(this,Ph,!1,"f"),Ti(this,gh,!1,"f");const e=_n(this,hg,"f");e&&(Ti(this,hg,null,"f"),e())}async autoConnect(){return _n(this,hs,"m",Bb).call(this,{silent:!0})}async connect(){return _n(this,hs,"m",Bb).call(this)}async disconnect(){if(Nb in _n(this,gr,"f").features)try{Ti(this,gh,!0,"f"),await _n(this,gr,"f").features[Nb].disconnect()}catch(e){this.emit("error",new yT(e==null?void 0:e.message,e))}finally{Ti(this,gh,!1,"f")}_n(this,hs,"m",Ub).call(this)}async sendTransaction(e,t,n={}){try{const i=_n(this,mo,"f");if(!i)throw new Ni;let s;if(Nu in _n(this,gr,"f").features)if(i.features.includes(Nu))s=Nu;else if(Qi in _n(this,gr,"f").features&&i.features.includes(Qi))s=Qi;else throw new Ih;else if(Qi in _n(this,gr,"f").features){if(!i.features.includes(Qi))throw new Ih;s=Qi}else throw new qp;const o=l9(t.rpcEndpoint);if(!i.chains.includes(o))throw new $c;try{const{signers:l,...c}=n;let d;if(Du(e)?(l!=null&&l.length&&e.sign(l),d=e.serialize()):(e=await this.prepareTransaction(e,t,c),l!=null&&l.length&&e.partialSign(...l),d=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Nu){const[h]=await _n(this,gr,"f").features[Nu].signAndSendTransaction({account:i,chain:o,transaction:d,options:{preflightCommitment:BM(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return X9.encode(h.signature)}else{const[h]=await _n(this,gr,"f").features[Qi].signTransaction({account:i,chain:o,transaction:d,options:{preflightCommitment:BM(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(h.signedTransaction,{...c,preflightCommitment:BM(c.preflightCommitment||t.commitment)})}}catch(l){throw l instanceof ts?l:new $c(l==null?void 0:l.message,l)}}catch(i){throw this.emit("error",i),i}}}mo=new WeakMap,Nh=new WeakMap,Ph=new WeakMap,gh=new WeakMap,hg=new WeakMap,H_=new WeakMap,gr=new WeakMap,G_=new WeakMap,Fb=new WeakMap,hs=new WeakSet,Bb=async function(e){try{if(this.connected||this.connecting)return;if(_n(this,G_,"f")!==wr.Installed)throw new Gg;if(Ti(this,Ph,!0,"f"),!_n(this,gr,"f").accounts.length)try{await _n(this,gr,"f").features[wT].connect(e)}catch(n){throw new F_(n==null?void 0:n.message,n)}const t=_n(this,gr,"f").accounts[0];if(!t)throw new Ih;_n(this,hs,"m",d_).call(this,t)}catch(t){throw this.emit("error",t),t}finally{Ti(this,Ph,!1,"f")}},d_=function(e){let t;try{t=new Et(e.address)}catch(n){throw new jg(n==null?void 0:n.message,n)}Ti(this,mo,e,"f"),Ti(this,Nh,t,"f"),_n(this,hs,"m",wg).call(this),this.emit("connect",t)},Ub=function(){Ti(this,mo,null,"f"),Ti(this,Nh,null,"f"),_n(this,hs,"m",wg).call(this),this.emit("disconnect")},wg=function(){var t,n;const e=Nu in _n(this,gr,"f").features?_n(this,gr,"f").features[Nu].supportedTransactionVersions:_n(this,gr,"f").features[Qi].supportedTransactionVersions;Ti(this,H_,q9(e,["legacy"])?null:new Set(e),"f"),Qi in _n(this,gr,"f").features&&((t=_n(this,mo,"f"))!=null&&t.features.includes(Qi))?(this.signTransaction=_n(this,hs,"m",zI),this.signAllTransactions=_n(this,hs,"m",WI)):(delete this.signTransaction,delete this.signAllTransactions),Wp in _n(this,gr,"f").features&&((n=_n(this,mo,"f"))!=null&&n.features.includes(Wp))?this.signMessage=_n(this,hs,"m",VI):delete this.signMessage,cM in _n(this,gr,"f").features?this.signIn=_n(this,hs,"m",HI):delete this.signIn},zI=async function(e){try{const t=_n(this,mo,"f");if(!t)throw new Ni;if(!(Qi in _n(this,gr,"f").features))throw new qp;if(!t.features.includes(Qi))throw new Ih;try{const i=(await _n(this,gr,"f").features[Qi].signTransaction({account:t,transaction:Du(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Du(e)?Vg.deserialize(i):cr.from(i)}catch(n){throw n instanceof ts?n:new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},WI=async function(e){try{const t=_n(this,mo,"f");if(!t)throw new Ni;if(!(Qi in _n(this,gr,"f").features))throw new qp;if(!t.features.includes(Qi))throw new Ih;try{const n=await _n(this,gr,"f").features[Qi].signTransaction(...e.map(i=>({account:t,transaction:Du(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return Du(i)?Vg.deserialize(o):cr.from(o)})}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},VI=async function(e){try{const t=_n(this,mo,"f");if(!t)throw new Ni;if(!(Wp in _n(this,gr,"f").features))throw new qp;if(!t.features.includes(Wp))throw new Ih;try{return(await _n(this,gr,"f").features[Wp].signMessage({account:t,message:e}))[0].signature}catch(n){throw new vT(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}},HI=async function(e={}){try{if(!(cM in _n(this,gr,"f").features))throw new qp;let t;try{[t]=await _n(this,gr,"f").features[cM].signIn(e)}catch(n){throw new zC(n==null?void 0:n.message,n)}if(!t)throw new zC;return _n(this,hs,"m",d_).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const Z9=E7;var Q9=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},J9=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},p_;let Bo;const lx=new Set;function eG(r){_g=void 0,lx.add(r)}function tG(r){_g=void 0,lx.delete(r)}const Kp={};function nG(){if(Bo||(Bo=Object.freeze({register:GI,get:rG,on:iG}),typeof window>"u"))return Bo;const r=Object.freeze({register:GI});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new sG(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Bo}function GI(...r){var e;return r=r.filter(t=>!lx.has(t)),r.length?(r.forEach(t=>eG(t)),(e=Kp.register)==null||e.forEach(t=>zb(()=>t(...r))),function(){var n;r.forEach(i=>tG(i)),(n=Kp.unregister)==null||n.forEach(i=>zb(()=>i(...r)))}):()=>{}}let _g;function rG(){return _g||(_g=[...lx]),_g}function iG(r,e){var t;return(t=Kp[r])!=null&&t.push(e)||(Kp[r]=[e]),function(){var i;Kp[r]=(i=Kp[r])==null?void 0:i.filter(s=>e!==s)}}function zb(r){try{r()}catch(e){console.error(e)}}class sG extends Event{get detail(){return Q9(this,p_,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),p_.set(this,void 0),J9(this,p_,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}p_=new WeakMap;function oG(){if(Bo||(Bo=nG(),typeof window>"u"))return Bo;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),Bo;const{register:e}=Bo,t=(...n)=>n.forEach(i=>zb(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Bo}return t(...r),Bo}function aG(r){const e=jI(()=>new Set),{get:t,on:n}=jI(()=>oG()),[i,s]=Se.useState(()=>qI(t()));Se.useEffect(()=>{const l=[n("register",(...c)=>s(d=>[...d,...qI(c)])),n("unregister",(...c)=>s(d=>d.filter(h=>c.some(y=>y===h.wallet))))];return()=>l.forEach(c=>c())},[n]);const o=lG(i);return Se.useEffect(()=>{if(!o)return;const l=new Set(i);new Set(o.filter(d=>!l.has(d))).forEach(d=>d.destroy())},[o,i]),Se.useEffect(()=>()=>i.forEach(l=>l.destroy()),[]),Se.useMemo(()=>[...i,...r.filter(({name:l})=>i.some(c=>c.name===l)?(e.has(l)||(e.add(l),console.warn(`${l} was registered as a Standard Wallet. The Wallet Adapter for ${l} can be removed from your app.`)),!1):!0)],[i,r,e])}function jI(r){const e=Se.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function lG(r){const e=Se.useRef(void 0);return Se.useEffect(()=>{e.current=r}),e.current}function qI(r){return r.filter(Z9).map(e=>new $9({wallet:e}))}var u0;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(u0||(u0={}));function uG(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function cG({adapters:r,userAgentString:e}){return r.some(t=>t.name!==Gc.SolanaMobileWalletAdapterWalletName&&t.readyState===wr.Installed)?u0.DESKTOP_WEB:e&&/android/i.test(e)&&!uG(e)?u0.MOBILE_WEB:u0.DESKTOP_WEB}function fG(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function hG({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:l}){const c=Se.useRef(!1),[d,h]=Se.useState(!1),y=Se.useRef(!1),[_,x]=Se.useState(!1),[A,P]=Se.useState(()=>(t==null?void 0:t.publicKey)??null),[I,C]=Se.useState(()=>(t==null?void 0:t.connected)??!1),D=Se.useRef(o);Se.useEffect(()=>(D.current=o,()=>{D.current=void 0}),[o]);const k=Se.useRef((p,M)=>(n.current||(D.current?D.current(p,M):(console.error(p,M),p instanceof Gg&&typeof window<"u"&&M&&window.open(M.url,"_blank"))),p)),[F,Q]=Se.useState(()=>e.map(p=>({adapter:p,readyState:p.readyState})).filter(({readyState:p})=>p!==wr.Unsupported));Se.useEffect(()=>{Q(M=>e.map((R,T)=>{const L=M[T];return L&&L.adapter===R&&L.readyState===R.readyState?L:{adapter:R,readyState:R.readyState}}).filter(({readyState:R})=>R!==wr.Unsupported));function p(M){Q(R=>{const T=R.findIndex(({adapter:N})=>N===this);if(T===-1)return R;const{adapter:L}=R[T];return[...R.slice(0,T),{adapter:L,readyState:M},...R.slice(T+1)].filter(({readyState:N})=>N!==wr.Unsupported)})}return e.forEach(M=>M.on("readyStateChange",p,M)),()=>{e.forEach(M=>M.off("readyStateChange",p,M))}},[t,e]);const G=Se.useMemo(()=>F.find(p=>p.adapter===t)??null,[t,F]);Se.useEffect(()=>{if(!t)return;const p=T=>{P(T),c.current=!1,h(!1),C(!0),y.current=!1,x(!1)},M=()=>{n.current||(P(null),c.current=!1,h(!1),C(!1),y.current=!1,x(!1))},R=T=>{k.current(T,t)};return t.on("connect",p),t.on("disconnect",M),t.on("error",R),()=>{t.off("connect",p),t.off("disconnect",M),t.off("error",R),M()}},[t,n]);const Y=Se.useRef(!1);Se.useEffect(()=>()=>{Y.current=!1},[t]),Se.useEffect(()=>{Y.current||c.current||I||!i||!((G==null?void 0:G.readyState)===wr.Installed||(G==null?void 0:G.readyState)===wr.Loadable)||(c.current=!0,h(!0),Y.current=!0,(async function(){try{await i()}catch{s()}finally{h(!1),c.current=!1}})())},[I,i,s,G]);const ee=Se.useCallback(async(p,M,R)=>{if(!t)throw k.current(new WC);if(!I)throw k.current(new Ni,t);return await t.sendTransaction(p,M,R)},[t,I]),te=Se.useMemo(()=>t&&"signTransaction"in t?async p=>{if(!I)throw k.current(new Ni,t);return await t.signTransaction(p)}:void 0,[t,I]),U=Se.useMemo(()=>t&&"signAllTransactions"in t?async p=>{if(!I)throw k.current(new Ni,t);return await t.signAllTransactions(p)}:void 0,[t,I]),V=Se.useMemo(()=>t&&"signMessage"in t?async p=>{if(!I)throw k.current(new Ni,t);return await t.signMessage(p)}:void 0,[t,I]),K=Se.useMemo(()=>t&&"signIn"in t?async p=>await t.signIn(p):void 0,[t]),E=Se.useCallback(async()=>{if(c.current||y.current||G!=null&&G.adapter.connected)return;if(!G)throw k.current(new WC);const{adapter:p,readyState:M}=G;if(!(M===wr.Installed||M===wr.Loadable))throw k.current(new Gg,p);c.current=!0,h(!0);try{await p.connect()}catch(R){throw s(),R}finally{h(!1),c.current=!1}},[s,G]),a=Se.useCallback(async()=>{if(!y.current&&t){y.current=!0,x(!0);try{await t.disconnect()}finally{x(!1),y.current=!1}}},[t]);return Ft.createElement(zO.Provider,{value:{autoConnect:!!i,wallets:F,wallet:G,publicKey:A,connected:I,connecting:d,disconnecting:_,select:l,connect:E,disconnect:a,sendTransaction:ee,signTransaction:te,signAllTransactions:U,signMessage:V,signIn:K}},r)}let VM;function dG(){var r;return VM===void 0&&(VM=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),VM}function KI(r){const e=dG();return cG({adapters:r,userAgentString:e})===u0.MOBILE_WEB}function pG(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function mG({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:i}){const{connection:s}=DO(),o=aG(e),l=Se.useMemo(()=>{if(!KI(o))return null;const D=o.find(k=>k.name===Gc.SolanaMobileWalletAdapterWalletName);return D||new Gc.SolanaMobileWalletAdapter({addressSelector:Gc.createDefaultAddressSelector(),appIdentity:{uri:pG()},authorizationResultCache:Gc.createDefaultAuthorizationResultCache(),cluster:fG(s==null?void 0:s.rpcEndpoint),onWalletNotFound:Gc.createDefaultWalletNotFoundHandler()})},[o,s==null?void 0:s.rpcEndpoint]),c=Se.useMemo(()=>l==null||o.indexOf(l)!==-1?o:[l,...o],[o,l]),[d,h]=A7(n,null),y=Se.useMemo(()=>c.find(D=>D.name===d)??null,[c,d]),_=Se.useCallback(D=>{d!==D&&(y&&y.name!==Gc.SolanaMobileWalletAdapterWalletName&&y.disconnect(),h(D))},[y,h,d]);Se.useEffect(()=>{if(!y)return;function D(){P.current||h(null)}return y.on("disconnect",D),()=>{y.off("disconnect",D)}},[y,o,h,d]);const x=Se.useRef(!1),A=Se.useMemo(()=>{if(!(!t||!y))return async()=>{(t===!0||await t(y))&&(x.current?await y.connect():await y.autoConnect())}},[t,y]),P=Se.useRef(!1);Se.useEffect(()=>{if(d===Gc.SolanaMobileWalletAdapterWalletName&&KI(o)){P.current=!1;return}function D(){P.current=!0}return window.addEventListener("beforeunload",D),()=>{window.removeEventListener("beforeunload",D)}},[o,d]);const I=Se.useCallback(()=>{y&&_(null)},[y,_]),C=Se.useCallback(D=>{x.current=!0,_(D)},[_]);return Ft.createElement(hG,{wallets:c,adapter:y,isUnloadingRef:P,onAutoConnectRequest:A,onConnectError:I,onError:i,onSelectWallet:C},r)}const dD={setVisible(r){console.error(pD("call","setVisible"))},visible:!1};Object.defineProperty(dD,"visible",{get(){return console.error(pD("read","visible")),!1}});function pD(r,e){return`You have tried to  ${r} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const mD=Se.createContext(dD);function gD(){return Se.useContext(mD)}function gG({onSelectWallet:r}){const{connect:e,connected:t,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:l,wallet:c,wallets:d}=xT();let h;n?h="connecting":t?h="connected":s?h="disconnecting":c?h="has-wallet":h="no-wallet";const y=Se.useCallback(()=>{e().catch(()=>{})},[e]),_=Se.useCallback(()=>{i().catch(()=>{})},[i]),x=Se.useCallback(()=>{r({onSelectWallet:l,wallets:d})},[r,l,d]);return{buttonState:h,onConnect:h==="has-wallet"?y:void 0,onDisconnect:h!=="disconnecting"&&h!=="no-wallet"?_:void 0,onSelectWallet:x,publicKey:o??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const yD=r=>Ft.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&Ft.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&Ft.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),vD=({wallet:r,...e})=>r&&Ft.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...e});function yG({walletIcon:r,walletName:e,...t}){return Ft.createElement(yD,{...t,className:"wallet-adapter-button-trigger",startIcon:r&&e?Ft.createElement(vD,{wallet:{adapter:{icon:r,name:e}}}):void 0})}function vG({children:r,labels:e,...t}){const{setVisible:n}=gD(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:l,walletIcon:c,walletName:d}=gG({onSelectWallet(){n(!0)}}),[h,y]=Se.useState(!1),[_,x]=Se.useState(!1),A=Se.useRef(null);Se.useEffect(()=>{const I=C=>{const D=A.current;!D||D.contains(C.target)||x(!1)};return document.addEventListener("mousedown",I),document.addEventListener("touchstart",I),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("touchstart",I)}},[]);const P=Se.useMemo(()=>{if(r)return r;if(l){const I=l.toBase58();return I.slice(0,4)+".."+I.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,r,e,l]);return Ft.createElement("div",{className:"wallet-adapter-dropdown"},Ft.createElement(yG,{...t,"aria-expanded":_,style:{pointerEvents:_?"none":"auto",...t.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":x(!0);break}},walletIcon:c,walletName:d},P),Ft.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${_&&"wallet-adapter-dropdown-list-active"}`,ref:A,role:"menu"},l?Ft.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(l.toBase58()),y(!0),setTimeout(()=>y(!1),400)},role:"menuitem"},h?e.copied:e["copy-address"]):null,Ft.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),x(!1)},role:"menuitem"},e["change-wallet"]),o?Ft.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),x(!1)},role:"menuitem"},e.disconnect):null))}var wG=dk();const YI=({id:r,children:e,expanded:t=!1})=>{const n=Se.useRef(null),i=Se.useRef(!0),s="height 250ms ease-out",o=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},l=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return Se.useLayoutEffect(()=>{t?o():l()},[t]),Se.useLayoutEffect(()=>{const c=n.current;if(!c)return;function d(){c&&(c.style.overflow=t?"initial":"hidden",t&&(c.style.height="auto"))}function h(y){c&&y.target===c&&y.propertyName==="height"&&d()}return i.current&&(d(),i.current=!1),c.addEventListener("transitionend",h),()=>c.removeEventListener("transitionend",h)},[t]),Ft.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},HM=({handleClick:r,tabIndex:e,wallet:t})=>Ft.createElement("li",null,Ft.createElement(yD,{onClick:r,startIcon:Ft.createElement(vD,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===wr.Installed&&Ft.createElement("span",null,"Detected"))),_G=()=>Ft.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ft.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),Ft.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),Ft.createElement("g",{clipPath:"url(#clip0_880_5115)"},Ft.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),Ft.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),Ft.createElement("defs",null,Ft.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Ft.createElement("stop",{stopColor:"#9945FF"}),Ft.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ft.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ft.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ft.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ft.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ft.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Ft.createElement("stop",{stopColor:"#9945FF"}),Ft.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ft.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ft.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ft.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ft.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ft.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},Ft.createElement("stop",{stopColor:"#9945FF"}),Ft.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ft.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ft.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ft.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ft.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ft.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},Ft.createElement("stop",{stopColor:"#9945FF"}),Ft.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ft.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ft.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ft.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ft.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ft.createElement("clipPath",{id:"clip0_880_5115"},Ft.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),xG=({className:r="",container:e="body"})=>{const t=Se.useRef(null),{wallets:n,select:i}=xT(),{setVisible:s}=gD(),[o,l]=Se.useState(!1),[c,d]=Se.useState(!1),[h,y]=Se.useState(null),[_,x]=Se.useMemo(()=>{const k=[],F=[];for(const Q of n)Q.readyState===wr.Installed?k.push(Q):F.push(Q);return k.length?[k,F]:[F,[]]},[n]),A=Se.useCallback(()=>{d(!1),setTimeout(()=>s(!1),150)},[s]),P=Se.useCallback(k=>{k.preventDefault(),A()},[A]),I=Se.useCallback((k,F)=>{i(F),P(k)},[i,P]),C=Se.useCallback(()=>l(!o),[o]),D=Se.useCallback(k=>{const F=t.current;if(!F)return;const Q=F.querySelectorAll("button"),G=Q[0],Y=Q[Q.length-1];k.shiftKey?document.activeElement===G&&(Y.focus(),k.preventDefault()):document.activeElement===Y&&(G.focus(),k.preventDefault())},[t]);return Se.useLayoutEffect(()=>{const k=Q=>{Q.key==="Escape"?A():Q.key==="Tab"&&D(Q)},{overflow:F}=window.getComputedStyle(document.body);return setTimeout(()=>d(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",k,!1),()=>{document.body.style.overflow=F,window.removeEventListener("keydown",k,!1)}},[A,D]),Se.useLayoutEffect(()=>y(document.querySelector(e)),[e]),h&&wG.createPortal(Ft.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${r}`,ref:t,role:"dialog"},Ft.createElement("div",{className:"wallet-adapter-modal-container"},Ft.createElement("div",{className:"wallet-adapter-modal-wrapper"},Ft.createElement("button",{onClick:P,className:"wallet-adapter-modal-button-close"},Ft.createElement("svg",{width:"14",height:"14"},Ft.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),_.length?Ft.createElement(Ft.Fragment,null,Ft.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),Ft.createElement("ul",{className:"wallet-adapter-modal-list"},_.map(k=>Ft.createElement(HM,{key:k.adapter.name,handleClick:F=>I(F,k.adapter.name),wallet:k})),x.length?Ft.createElement(YI,{expanded:o,id:"wallet-adapter-modal-collapse"},x.map(k=>Ft.createElement(HM,{key:k.adapter.name,handleClick:F=>I(F,k.adapter.name),tabIndex:o?0:-1,wallet:k}))):null),x.length?Ft.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:C,tabIndex:0},Ft.createElement("span",null,o?"Less ":"More ","options"),Ft.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Ft.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):Ft.createElement(Ft.Fragment,null,Ft.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),Ft.createElement("div",{className:"wallet-adapter-modal-middle"},Ft.createElement(_G,null)),x.length?Ft.createElement(Ft.Fragment,null,Ft.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:C,tabIndex:0},Ft.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),Ft.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Ft.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),Ft.createElement(YI,{expanded:o,id:"wallet-adapter-modal-collapse"},Ft.createElement("ul",{className:"wallet-adapter-modal-list"},x.map(k=>Ft.createElement(HM,{key:k.adapter.name,handleClick:F=>I(F,k.adapter.name),tabIndex:o?0:-1,wallet:k}))))):null))),Ft.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:P})),h)},SG=({children:r,...e})=>{const[t,n]=Se.useState(!1);return Ft.createElement(mD.Provider,{value:{visible:t,setVisible:n}},r,t&&Ft.createElement(xG,{...e}))},MG={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function EG(r){return Ft.createElement(vG,{...r,labels:MG})}const bG="modulepreload",AG=function(r){return"/"+r},XI={},wD=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(t.map(d=>{if(d=AG(d),d in XI)return;XI[d]=!0;const h=d.endsWith(".css"),y=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":bG,h||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),h)return new Promise((x,A)=>{_.addEventListener("load",x),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},TG="Phantom";class RG extends FO{constructor(e={}){super(),this.name=TG,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?wr.Unsupported:wr.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new gT),this.emit("disconnect"))},this._accountChanged=t=>{const n=this._publicKey;if(n){try{t=new Et(t.toBytes())}catch(i){this.emit("error",new jg(i==null?void 0:i.message,i));return}n.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==wr.Unsupported&&(Ib()?(this._readyState=wr.Loadable,this.emit("readyStateChange",this._readyState)):UO(()=>{var t,n,i;return(n=(t=window.phantom)==null?void 0:t.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=wr.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===wr.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===wr.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==wr.Installed)throw new Gg;this._connecting=!0;const t=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!t.isConnected)try{await t.connect()}catch(i){throw new F_(i==null?void 0:i.message,i)}if(!t.publicKey)throw new Ih;let n;try{n=new Et(t.publicKey.toBytes())}catch(i){throw new jg(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=n,this.emit("connect",n)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new yT(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,n={}){try{const i=this._wallet;if(!i)throw new Ni;try{const{signers:s,...o}=n;Du(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:l}=await i.signAndSendTransaction(e,o);return l}catch(s){throw s instanceof ts?s:new $c(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Ni;try{return await t.signTransaction(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Ni;try{return await t.signAllTransactions(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Ni;try{const{signature:n}=await t.signMessage(e);return n}catch(n){throw new vT(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}}const CG="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var br=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},IG=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},m_,Lh,Wb,Vb,Hb,Is,Gb,_D,xD,jb,qb,Kb,Yb,Xb;class NG{constructor(){m_.add(this),Lh.set(this,{}),Wb.set(this,"1.0.0"),Vb.set(this,"MetaMask"),Hb.set(this,CG),Is.set(this,null),Gb.set(this,(e,t)=>{var n;return(n=br(this,Lh,"f")[e])!=null&&n.push(t)||(br(this,Lh,"f")[e]=[t]),()=>br(this,m_,"m",xD).call(this,e,t)}),jb.set(this,async()=>{if(!br(this,Is,"f")){let e;try{e=(await wD(async()=>{const{default:t}=await import("./index-D1XF90PW.js");return{default:t}},[])).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}IG(this,Is,new e,"f"),br(this,Is,"f").on("standard_change",t=>br(this,m_,"m",_D).call(this,"change",t))}return this.accounts.length||await br(this,Is,"f").connect(),{accounts:this.accounts}}),qb.set(this,async()=>{br(this,Is,"f")&&await br(this,Is,"f").disconnect()}),Kb.set(this,async(...e)=>{if(!br(this,Is,"f"))throw new Ni;return await br(this,Is,"f").standardSignAndSendTransaction(...e)}),Yb.set(this,async(...e)=>{if(!br(this,Is,"f"))throw new Ni;return await br(this,Is,"f").standardSignTransaction(...e)}),Xb.set(this,async(...e)=>{if(!br(this,Is,"f"))throw new Ni;return await br(this,Is,"f").standardSignMessage(...e)})}get version(){return br(this,Wb,"f")}get name(){return br(this,Vb,"f")}get icon(){return br(this,Hb,"f")}get chains(){return[Lb,XO,$O]}get features(){return{[wT]:{version:"1.0.0",connect:br(this,jb,"f")},[Nb]:{version:"1.0.0",disconnect:br(this,qb,"f")},[_T]:{version:"1.0.0",on:br(this,Gb,"f")},[Nu]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:br(this,Kb,"f")},[Qi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:br(this,Yb,"f")},[Wp]:{version:"1.0.0",signMessage:br(this,Xb,"f")}}}get accounts(){return br(this,Is,"f")?br(this,Is,"f").standardAccounts:[]}}Lh=new WeakMap,Wb=new WeakMap,Vb=new WeakMap,Hb=new WeakMap,Is=new WeakMap,Gb=new WeakMap,jb=new WeakMap,qb=new WeakMap,Kb=new WeakMap,Yb=new WeakMap,Xb=new WeakMap,m_=new WeakSet,_D=function(e,...t){var n;(n=br(this,Lh,"f")[e])==null||n.forEach(i=>i.apply(null,t))},xD=function(e,t){var n;br(this,Lh,"f")[e]=(n=br(this,Lh,"f")[e])==null?void 0:n.filter(i=>t!==i)};let $I=!1;function PG(){$I||(G9(new NG),$I=!0)}async function LG(){const r="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:r,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function t(n){var s,o;const i=n.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===r?(window.removeEventListener("message",t),i.data.data.error||PG()):e())}window.addEventListener("message",t),window.setTimeout(()=>window.removeEventListener("message",t),5e3),e()}const kG="Solflare";class OG extends FO{constructor(e={}){super(),this.name=kG,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?wr.Unsupported:wr.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new gT),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const n=this._publicKey;if(n){try{t=new Et(t.toBytes())}catch(i){this.emit("error",new jg(i==null?void 0:i.message,i));return}n.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==wr.Unsupported&&(UO(()=>{var t;return(t=window.solflare)!=null&&t.isSolflare||window.SolflareApp?(this._readyState=wr.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),LG())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===wr.Loadable&&Ib()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==wr.Loadable&&this._readyState!==wr.Installed)throw new Gg;if(this.readyState===wr.Loadable&&Ib()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await wD(async()=>{const{default:i}=await import("./index-CwYNKY41.js");return{default:i}},[])).default}catch(i){throw new S7(i==null?void 0:i.message,i)}let t;try{t=new e({network:this._config.network})}catch(i){throw new qp(i==null?void 0:i.message,i)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(i){throw new F_(i==null?void 0:i.message,i)}if(!t.publicKey)throw new F_;let n;try{n=new Et(t.publicKey.toBytes())}catch(i){throw new jg(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new yT(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,n={}){try{const i=this._wallet;if(!i)throw new Ni;try{const{signers:s,...o}=n;return Du(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof ts?s:new $c(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Ni;try{return await t.signTransaction(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Ni;try{return await t.signAllTransactions(e)||e}catch(n){throw new Ml(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Ni;try{return await t.signMessage(e,"utf8")}catch(n){throw new vT(n==null?void 0:n.message,n)}}catch(t){throw this.emit("error",t),t}}}const ZI=globalThis||void 0||self;var yi={},ml,gl;function $b(){throw new Error("setTimeout has not been defined")}function Zb(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ml=setTimeout:ml=$b}catch{ml=$b}try{typeof clearTimeout=="function"?gl=clearTimeout:gl=Zb}catch{gl=Zb}})();function SD(r){if(ml===setTimeout)return setTimeout(r,0);if((ml===$b||!ml)&&setTimeout)return ml=setTimeout,setTimeout(r,0);try{return ml(r,0)}catch{try{return ml.call(null,r,0)}catch{return ml.call(this,r,0)}}}function DG(r){if(gl===clearTimeout)return clearTimeout(r);if((gl===Zb||!gl)&&clearTimeout)return gl=clearTimeout,clearTimeout(r);try{return gl(r)}catch{try{return gl.call(null,r)}catch{return gl.call(this,r)}}}var Uu=[],c0=!1,kh,g_=-1;function BG(){!c0||!kh||(c0=!1,kh.length?Uu=kh.concat(Uu):g_=-1,Uu.length&&MD())}function MD(){if(!c0){var r=SD(BG);c0=!0;for(var e=Uu.length;e;){for(kh=Uu,Uu=[];++g_<e;)kh&&kh[g_].run();g_=-1,e=Uu.length}kh=null,c0=!1,DG(r)}}yi.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Uu.push(new ED(r,e)),Uu.length===1&&!c0&&SD(MD)};function ED(r,e){this.fun=r,this.array=e}ED.prototype.run=function(){this.fun.apply(null,this.array)};yi.title="browser";yi.browser=!0;yi.env={};yi.argv=[];yi.version="";yi.versions={};function Zu(){}yi.on=Zu;yi.addListener=Zu;yi.once=Zu;yi.off=Zu;yi.removeListener=Zu;yi.removeAllListeners=Zu;yi.emit=Zu;yi.prependListener=Zu;yi.prependOnceListener=Zu;yi.listeners=function(r){return[]};yi.binding=function(r){throw new Error("process.binding is not supported")};yi.cwd=function(){return"/"};yi.chdir=function(r){throw new Error("process.chdir is not supported")};yi.umask=function(){return 0};const AT=Se.createContext({});function Ty(r){const e=Se.useRef(null);return e.current===null&&(e.current=r()),e.current}const ux=Se.createContext(null),Ry=Se.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class UG extends Se.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function FG({children:r,isPresent:e}){const t=Se.useId(),n=Se.useRef(null),i=Se.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Se.useContext(Ry);return Se.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(e||!n.current||!o||!l)return;n.current.dataset.motionPopId=t;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),lt.jsx(UG,{isPresent:e,childRef:n,sizeRef:i,children:Se.cloneElement(r,{ref:n})})}const zG=({children:r,initial:e,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=Ty(WG),c=Se.useId(),d=Se.useCallback(y=>{l.set(y,!0);for(const _ of l.values())if(!_)return;n&&n()},[l,n]),h=Se.useMemo(()=>({id:c,initial:e,isPresent:t,custom:i,onExitComplete:d,register:y=>(l.set(y,!1),()=>l.delete(y))}),s?[Math.random(),d]:[t,d]);return Se.useMemo(()=>{l.forEach((y,_)=>l.set(_,!1))},[t]),Se.useEffect(()=>{!t&&!l.size&&n&&n()},[t]),o==="popLayout"&&(r=lt.jsx(FG,{isPresent:t,children:r})),lt.jsx(ux.Provider,{value:h,children:r})};function WG(){return new Map}function bD(r=!0){const e=Se.useContext(ux);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=Se.useId();Se.useEffect(()=>{r&&i(s)},[r]);const o=Se.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,o]:[!0]}const ew=r=>r.key||"";function QI(r){const e=[];return Se.Children.forEach(r,t=>{Se.isValidElement(t)&&e.push(t)}),e}const TT=typeof window<"u",cx=TT?Se.useLayoutEffect:Se.useEffect,Qb=({children:r,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[l,c]=bD(o),d=Se.useMemo(()=>QI(r),[r]),h=o&&!l?[]:d.map(ew),y=Se.useRef(!0),_=Se.useRef(d),x=Ty(()=>new Map),[A,P]=Se.useState(d),[I,C]=Se.useState(d);cx(()=>{y.current=!1,_.current=d;for(let F=0;F<I.length;F++){const Q=ew(I[F]);h.includes(Q)?x.delete(Q):x.get(Q)!==!0&&x.set(Q,!1)}},[I,h.length,h.join("-")]);const D=[];if(d!==A){let F=[...d];for(let Q=0;Q<I.length;Q++){const G=I[Q],Y=ew(G);h.includes(Y)||(F.splice(Q,0,G),D.push(G))}s==="wait"&&D.length&&(F=D),C(QI(F)),P(d);return}const{forceRender:k}=Se.useContext(AT);return lt.jsx(lt.Fragment,{children:I.map(F=>{const Q=ew(F),G=o&&!l?!1:d===I||h.includes(Q),Y=()=>{if(x.has(Q))x.set(Q,!0);else return;let ee=!0;x.forEach(te=>{te||(ee=!1)}),ee&&(k==null||k(),C(_.current),o&&(c==null||c()),n&&n())};return lt.jsx(zG,{isPresent:G,initial:!y.current||t?void 0:!1,custom:G?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:G?void 0:Y,children:F},Q)})})},Wo=r=>r;let AD=Wo;function RT(r){let e;return()=>(e===void 0&&(e=r()),e)}const y0=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n},zu=r=>r*1e3,Wu=r=>r/1e3,VG={useManualTiming:!1};function HG(r){let e=new Set,t=new Set,n=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){s.has(d)&&(c.schedule(d),r()),d(o)}const c={schedule:(d,h=!1,y=!1)=>{const x=y&&n?e:t;return h&&s.add(d),x.has(d)||x.add(d),d},cancel:d=>{t.delete(d),s.delete(d)},process:d=>{if(o=d,n){i=!0;return}n=!0,[e,t]=[t,e],e.forEach(l),e.clear(),n=!1,i&&(i=!1,c.process(d))}};return c}const tw=["read","resolveKeyframes","update","preRender","render","postRender"],GG=40;function TD(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=tw.reduce((C,D)=>(C[D]=HG(s),C),{}),{read:l,resolveKeyframes:c,update:d,preRender:h,render:y,postRender:_}=o,x=()=>{const C=performance.now();t=!1,i.delta=n?1e3/60:Math.max(Math.min(C-i.timestamp,GG),1),i.timestamp=C,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),y.process(i),_.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(x))},A=()=>{t=!0,n=!0,i.isProcessing||r(x)};return{schedule:tw.reduce((C,D)=>{const k=o[D];return C[D]=(F,Q=!1,G=!1)=>(t||A(),k.schedule(F,Q,G)),C},{}),cancel:C=>{for(let D=0;D<tw.length;D++)o[tw[D]].cancel(C)},state:i,steps:o}}const{schedule:Or,cancel:Gu,state:$i,steps:GM}=TD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wo,!0),RD=Se.createContext({strict:!1}),JI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},v0={};for(const r in JI)v0[r]={isEnabled:e=>JI[r].some(t=>!!e[t])};function jG(r){for(const e in r)v0[e]={...v0[e],...r[e]}}const qG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function j_(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||qG.has(r)}let CD=r=>!j_(r);function KG(r){r&&(CD=e=>e.startsWith("on")?!j_(e):r(e))}try{KG(require("@emotion/is-prop-valid").default)}catch{}function YG(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(CD(i)||t===!0&&j_(i)||!e&&!j_(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function XG(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...n)=>r(...n);return new Proxy(t,{get:(n,i)=>i==="create"?r:(e.has(i)||e.set(i,r(i)),e.get(i))})}const fx=Se.createContext({});function qg(r){return typeof r=="string"||Array.isArray(r)}function hx(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const CT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],IT=["initial",...CT];function dx(r){return hx(r.animate)||IT.some(e=>qg(r[e]))}function ID(r){return!!(dx(r)||r.variants)}function $G(r,e){if(dx(r)){const{initial:t,animate:n}=r;return{initial:t===!1||qg(t)?t:void 0,animate:qg(n)?n:void 0}}return r.inherit!==!1?e:{}}function ZG(r){const{initial:e,animate:t}=$G(r,Se.useContext(fx));return Se.useMemo(()=>({initial:e,animate:t}),[e3(e),e3(t)])}function e3(r){return Array.isArray(r)?r.join(" "):r}const QG=Symbol.for("motionComponentSymbol");function Yp(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function JG(r,e,t){return Se.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Yp(t)&&(t.current=n))},[e])}const NT=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ej="framerAppearId",ND="data-"+NT(ej),{schedule:PT}=TD(queueMicrotask,!1),PD=Se.createContext({});function tj(r,e,t,n,i){var s,o;const{visualElement:l}=Se.useContext(fx),c=Se.useContext(RD),d=Se.useContext(ux),h=Se.useContext(Ry).reducedMotion,y=Se.useRef(null);n=n||c.renderer,!y.current&&n&&(y.current=n(r,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const _=y.current,x=Se.useContext(PD);_&&!_.projection&&i&&(_.type==="html"||_.type==="svg")&&nj(y.current,t,i,x);const A=Se.useRef(!1);Se.useInsertionEffect(()=>{_&&A.current&&_.update(t,d)});const P=t[ND],I=Se.useRef(!!P&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,P))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,P)));return cx(()=>{_&&(A.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),PT.render(_.render),I.current&&_.animationState&&_.animationState.animateChanges())}),Se.useEffect(()=>{_&&(!I.current&&_.animationState&&_.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)===null||C===void 0||C.call(window,P)}),I.current=!1))}),_}function nj(r,e,t,n){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:LD(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Yp(l),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:d})}function LD(r){if(r)return r.options.allowProjection!==!1?r.projection:LD(r.parent)}function rj({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:i}){var s,o;r&&jG(r);function l(d,h){let y;const _={...Se.useContext(Ry),...d,layoutId:ij(d)},{isStatic:x}=_,A=ZG(d),P=n(d,x);if(!x&&TT){sj();const I=oj(_);y=I.MeasureLayout,A.visualElement=tj(i,P,_,e,I.ProjectionNode)}return lt.jsxs(fx.Provider,{value:A,children:[y&&A.visualElement?lt.jsx(y,{visualElement:A.visualElement,..._}):null,t(i,d,JG(P,A.visualElement,h),P,x,A.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const c=Se.forwardRef(l);return c[QG]=i,c}function ij({layoutId:r}){const e=Se.useContext(AT).id;return e&&r!==void 0?e+"-"+r:r}function sj(r,e){Se.useContext(RD).strict}function oj(r){const{drag:e,layout:t}=v0;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const aj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LT(r){return typeof r!="string"||r.includes("-")?!1:!!(aj.indexOf(r)>-1||/[A-Z]/u.test(r))}function t3(r){const e=[{},{}];return r==null||r.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function kT(r,e,t,n){if(typeof e=="function"){const[i,s]=t3(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=t3(n);e=e(t!==void 0?t:r.custom,i,s)}return e}const Jb=r=>Array.isArray(r),lj=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),uj=r=>Jb(r)?r[r.length-1]||0:r,Ji=r=>!!(r&&r.getVelocity);function y_(r){const e=Ji(r)?r.get():r;return lj(e)?e.toValue():e}function cj({scrapeMotionValuesFromProps:r,createRenderState:e,onUpdate:t},n,i,s){const o={latestValues:fj(n,i,s,r),renderState:e()};return t&&(o.onMount=l=>t({props:n,current:l,...o}),o.onUpdate=l=>t(l)),o}const kD=r=>(e,t)=>{const n=Se.useContext(fx),i=Se.useContext(ux),s=()=>cj(r,e,n,i);return t?s():Ty(s)};function fj(r,e,t,n){const i={},s=n(r,{});for(const _ in s)i[_]=y_(s[_]);let{initial:o,animate:l}=r;const c=dx(r),d=ID(r);e&&d&&!c&&r.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const y=h?l:o;if(y&&typeof y!="boolean"&&!hx(y)){const _=Array.isArray(y)?y:[y];for(let x=0;x<_.length;x++){const A=kT(r,_[x]);if(A){const{transitionEnd:P,transition:I,...C}=A;for(const D in C){let k=C[D];if(Array.isArray(k)){const F=h?k.length-1:0;k=k[F]}k!==null&&(i[D]=k)}for(const D in P)i[D]=P[D]}}}return i}const k0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fd=new Set(k0),OD=r=>e=>typeof e=="string"&&e.startsWith(r),DD=OD("--"),hj=OD("var(--"),OT=r=>hj(r)?dj.test(r.split("/*")[0].trim()):!1,dj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,BD=(r,e)=>e&&typeof r=="number"?e.transform(r):r,ju=(r,e,t)=>t>e?e:t<r?r:t,O0={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Kg={...O0,transform:r=>ju(0,1,r)},nw={...O0,default:1},Cy=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),jc=Cy("deg"),Tl=Cy("%"),kn=Cy("px"),pj=Cy("vh"),mj=Cy("vw"),n3={...Tl,parse:r=>Tl.parse(r)/100,transform:r=>Tl.transform(r*100)},gj={borderWidth:kn,borderTopWidth:kn,borderRightWidth:kn,borderBottomWidth:kn,borderLeftWidth:kn,borderRadius:kn,radius:kn,borderTopLeftRadius:kn,borderTopRightRadius:kn,borderBottomRightRadius:kn,borderBottomLeftRadius:kn,width:kn,maxWidth:kn,height:kn,maxHeight:kn,top:kn,right:kn,bottom:kn,left:kn,padding:kn,paddingTop:kn,paddingRight:kn,paddingBottom:kn,paddingLeft:kn,margin:kn,marginTop:kn,marginRight:kn,marginBottom:kn,marginLeft:kn,backgroundPositionX:kn,backgroundPositionY:kn},yj={rotate:jc,rotateX:jc,rotateY:jc,rotateZ:jc,scale:nw,scaleX:nw,scaleY:nw,scaleZ:nw,skew:jc,skewX:jc,skewY:jc,distance:kn,translateX:kn,translateY:kn,translateZ:kn,x:kn,y:kn,z:kn,perspective:kn,transformPerspective:kn,opacity:Kg,originX:n3,originY:n3,originZ:kn},r3={...O0,transform:Math.round},DT={...gj,...yj,zIndex:r3,size:kn,fillOpacity:Kg,strokeOpacity:Kg,numOctaves:r3},vj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wj=k0.length;function _j(r,e,t){let n="",i=!0;for(let s=0;s<wj;s++){const o=k0[s],l=r[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const d=BD(l,DT[o]);if(!c){i=!1;const h=vj[o]||o;n+=`${h}(${d}) `}t&&(e[o]=d)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function BT(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let o=!1,l=!1;for(const c in e){const d=e[c];if(fd.has(c)){o=!0;continue}else if(DD(c)){i[c]=d;continue}else{const h=BD(d,DT[c]);c.startsWith("origin")?(l=!0,s[c]=h):n[c]=h}}if(e.transform||(o||t?n.transform=_j(e,r.transform,t):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;n.transformOrigin=`${c} ${d} ${h}`}}const xj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Sj={offset:"strokeDashoffset",array:"strokeDasharray"};function Mj(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?xj:Sj;r[s.offset]=kn.transform(-n);const o=kn.transform(e),l=kn.transform(t);r[s.array]=`${o} ${l}`}function i3(r,e,t){return typeof r=="string"?r:kn.transform(e+t*r)}function Ej(r,e,t){const n=i3(e,r.x,r.width),i=i3(t,r.y,r.height);return`${n} ${i}`}function UT(r,{attrX:e,attrY:t,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},h,y){if(BT(r,d,y),h){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:_,style:x,dimensions:A}=r;_.transform&&(A&&(x.transform=_.transform),delete _.transform),A&&(i!==void 0||s!==void 0||x.transform)&&(x.transformOrigin=Ej(A,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),n!==void 0&&(_.scale=n),o!==void 0&&Mj(_,o,l,c,!1)}const FT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),UD=()=>({...FT(),attrs:{}}),zT=r=>typeof r=="string"&&r.toLowerCase()==="svg";function FD(r,{style:e,vars:t},n,i){Object.assign(r.style,e,i&&i.getProjectionStyles(n));for(const s in t)r.style.setProperty(s,t[s])}const zD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function WD(r,e,t,n){FD(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(zD.has(i)?i:NT(i),e.attrs[i])}const q_={};function bj(r){Object.assign(q_,r)}function VD(r,{layout:e,layoutId:t}){return fd.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!q_[r]||r==="opacity")}function WT(r,e,t){var n;const{style:i}=r,s={};for(const o in i)(Ji(i[o])||e.style&&Ji(e.style[o])||VD(o,r)||((n=t==null?void 0:t.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function HD(r,e,t){const n=WT(r,e,t);for(const i in r)if(Ji(r[i])||Ji(e[i])){const s=k0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}function Aj(r,e){try{e.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const s3=["x","y","width","height","cx","cy","r"],Tj={useVisualState:kD({scrapeMotionValuesFromProps:HD,createRenderState:UD,onUpdate:({props:r,prevProps:e,current:t,renderState:n,latestValues:i})=>{if(!t)return;let s=!!r.drag;if(!s){for(const l in i)if(fd.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<s3.length;l++){const c=s3[l];r[c]!==e[c]&&(o=!0)}o&&Or.read(()=>{Aj(t,n),Or.render(()=>{UT(n,i,zT(t.tagName),r.transformTemplate),WD(t,n)})})}})},Rj={useVisualState:kD({scrapeMotionValuesFromProps:WT,createRenderState:FT})};function GD(r,e,t){for(const n in e)!Ji(e[n])&&!VD(n,t)&&(r[n]=e[n])}function Cj({transformTemplate:r},e){return Se.useMemo(()=>{const t=FT();return BT(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Ij(r,e){const t=r.style||{},n={};return GD(n,t,r),Object.assign(n,Cj(r,e)),n}function Nj(r,e){const t={},n=Ij(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}function Pj(r,e,t,n){const i=Se.useMemo(()=>{const s=UD();return UT(s,e,zT(n),r.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};GD(s,r.style,r),i.style={...s,...i.style}}return i}function Lj(r=!1){return(t,n,i,{latestValues:s},o)=>{const c=(LT(t)?Pj:Nj)(n,s,o,t),d=YG(n,typeof t=="string",r),h=t!==Se.Fragment?{...d,...c,ref:i}:{},{children:y}=n,_=Se.useMemo(()=>Ji(y)?y.get():y,[y]);return Se.createElement(t,{...h,children:_})}}function kj(r,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...LT(n)?Tj:Rj,preloadedFeatures:r,useRender:Lj(i),createVisualElement:e,Component:n};return rj(o)}}function jD(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}function px(r,e,t){const n=r.getProps();return kT(n,e,t!==void 0?t:n.custom,r)}const Oj=RT(()=>window.ScrollTimeline!==void 0);class Dj{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map(i=>{if(Oj()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Bj extends Dj{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function VT(r,e){return r?r[e]||r.default||r:void 0}const eA=2e4;function qD(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<eA;)e+=t,n=r.next(e);return e>=eA?1/0:e}function HT(r){return typeof r=="function"}function o3(r,e){r.timeline=e,r.onfinish=null}const GT=r=>Array.isArray(r)&&typeof r[0]=="number",Uj={linearEasing:void 0};function Fj(r,e){const t=RT(r);return()=>{var n;return(n=Uj[e])!==null&&n!==void 0?n:t()}}const K_=Fj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),KD=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=r(y0(0,i-1,s))+", ";return`linear(${n.substring(0,n.length-2)})`};function YD(r){return!!(typeof r=="function"&&K_()||!r||typeof r=="string"&&(r in tA||K_())||GT(r)||Array.isArray(r)&&r.every(YD))}const dg=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,tA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dg([0,.65,.55,1]),circOut:dg([.55,0,1,.45]),backIn:dg([.31,.01,.66,-.59]),backOut:dg([.33,1.53,.69,.99])};function XD(r,e){if(r)return typeof r=="function"&&K_()?KD(r,e):GT(r)?dg(r):Array.isArray(r)?r.map(t=>XD(t,e)||tA.easeOut):tA[r]}const Ua={x:!1,y:!1};function $D(){return Ua.x||Ua.y}function zj(r,e,t){var n;if(r instanceof Element)return[r];if(typeof r=="string"){let i=document;const s=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(r);return s?Array.from(s):[]}return Array.from(r)}function ZD(r,e){const t=zj(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function a3(r){return e=>{e.pointerType==="touch"||$D()||r(e)}}function Wj(r,e,t={}){const[n,i,s]=ZD(r,t),o=a3(l=>{const{target:c}=l,d=e(l);if(typeof d!="function"||!c)return;const h=a3(y=>{d(y),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,i)});return n.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const QD=(r,e)=>e?r===e?!0:QD(r,e.parentElement):!1,jT=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,Vj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Hj(r){return Vj.has(r.tagName)||r.tabIndex!==-1}const pg=new WeakSet;function l3(r){return e=>{e.key==="Enter"&&r(e)}}function jM(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Gj=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=l3(()=>{if(pg.has(t))return;jM(t,"down");const i=l3(()=>{jM(t,"up")}),s=()=>jM(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function u3(r){return jT(r)&&!$D()}function jj(r,e,t={}){const[n,i,s]=ZD(r,t),o=l=>{const c=l.currentTarget;if(!u3(l)||pg.has(c))return;pg.add(c);const d=e(l),h=(x,A)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),!(!u3(x)||!pg.has(c))&&(pg.delete(c),typeof d=="function"&&d(x,{success:A}))},y=x=>{h(x,t.useGlobalTarget||QD(c,x.target))},_=x=>{h(x,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",_,i)};return n.forEach(l=>{!Hj(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(t.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",d=>Gj(d,i),i)}),s}function qj(r){return r==="x"||r==="y"?Ua[r]?null:(Ua[r]=!0,()=>{Ua[r]=!1}):Ua.x||Ua.y?null:(Ua.x=Ua.y=!0,()=>{Ua.x=Ua.y=!1})}const JD=new Set(["width","height","top","left","right","bottom",...k0]);let v_;function Kj(){v_=void 0}const Rl={now:()=>(v_===void 0&&Rl.set($i.isProcessing||VG.useManualTiming?$i.timestamp:performance.now()),v_),set:r=>{v_=r,queueMicrotask(Kj)}};function qT(r,e){r.indexOf(e)===-1&&r.push(e)}function KT(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}class YT{constructor(){this.subscriptions=[]}add(e){return qT(this.subscriptions,e),()=>KT(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function e4(r,e){return e?r*(1e3/e):0}const c3=30,Yj=r=>!isNaN(parseFloat(r)),xg={current:void 0};class Xj{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const s=Rl.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Rl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Yj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new YT);const n=this.events[e].add(t);return e==="change"?()=>{n(),Or.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return xg.current&&xg.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Rl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>c3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,c3);return e4(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function w0(r,e){return new Xj(r,e)}function $j(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,w0(t))}function Zj(r,e){const t=px(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const o in s){const l=uj(s[o]);$j(r,o,l)}}function Qj(r){return!!(Ji(r)&&r.add)}function nA(r,e){const t=r.getValue("willChange");if(Qj(t))return t.add(e)}function t4(r){return r.props[ND]}const n4=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,Jj=1e-7,eq=12;function tq(r,e,t,n,i){let s,o,l=0;do o=e+(t-e)/2,s=n4(o,n,i)-r,s>0?t=o:e=o;while(Math.abs(s)>Jj&&++l<eq);return o}function Iy(r,e,t,n){if(r===e&&t===n)return Wo;const i=s=>tq(s,0,1,r,t);return s=>s===0||s===1?s:n4(i(s),e,n)}const r4=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,i4=r=>e=>1-r(1-e),s4=Iy(.33,1.53,.69,.99),XT=i4(s4),o4=r4(XT),a4=r=>(r*=2)<1?.5*XT(r):.5*(2-Math.pow(2,-10*(r-1))),$T=r=>1-Math.sin(Math.acos(r)),l4=i4($T),u4=r4($T),c4=r=>/^0[^.\s]+$/u.test(r);function nq(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||c4(r):!0}const Sg=r=>Math.round(r*1e5)/1e5,ZT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rq(r){return r==null}const iq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,QT=(r,e)=>t=>!!(typeof t=="string"&&iq.test(t)&&t.startsWith(r)||e&&!rq(t)&&Object.prototype.hasOwnProperty.call(t,e)),f4=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,o,l]=n.match(ZT);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},sq=r=>ju(0,255,r),qM={...O0,transform:r=>Math.round(sq(r))},Oh={test:QT("rgb","red"),parse:f4("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+qM.transform(r)+", "+qM.transform(e)+", "+qM.transform(t)+", "+Sg(Kg.transform(n))+")"};function oq(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const rA={test:QT("#"),parse:oq,transform:Oh.transform},Xp={test:QT("hsl","hue"),parse:f4("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+Tl.transform(Sg(e))+", "+Tl.transform(Sg(t))+", "+Sg(Kg.transform(n))+")"},Ns={test:r=>Oh.test(r)||rA.test(r)||Xp.test(r),parse:r=>Oh.test(r)?Oh.parse(r):Xp.test(r)?Xp.parse(r):rA.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Oh.transform(r):Xp.transform(r)},aq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lq(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(ZT))===null||e===void 0?void 0:e.length)||0)+(((t=r.match(aq))===null||t===void 0?void 0:t.length)||0)>0}const h4="number",d4="color",uq="var",cq="var(",f3="${}",fq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yg(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(fq,c=>(Ns.test(c)?(n.color.push(s),i.push(d4),t.push(Ns.parse(c))):c.startsWith(cq)?(n.var.push(s),i.push(uq),t.push(c)):(n.number.push(s),i.push(h4),t.push(parseFloat(c))),++s,f3)).split(f3);return{values:t,split:l,indexes:n,types:i}}function p4(r){return Yg(r).values}function m4(r){const{split:e,types:t}=Yg(r),n=e.length;return i=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],i[o]!==void 0){const l=t[o];l===h4?s+=Sg(i[o]):l===d4?s+=Ns.transform(i[o]):s+=i[o]}return s}}const hq=r=>typeof r=="number"?0:r;function dq(r){const e=p4(r);return m4(r)(e.map(hq))}const nf={test:lq,parse:p4,createTransformer:m4,getAnimatableNone:dq},pq=new Set(["brightness","contrast","saturate","opacity"]);function mq(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(ZT)||[];if(!n)return r;const i=t.replace(n,"");let s=pq.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const gq=/\b([a-z-]*)\(.*?\)/gu,iA={...nf,getAnimatableNone:r=>{const e=r.match(gq);return e?e.map(mq).join(" "):r}},yq={...DT,color:Ns,backgroundColor:Ns,outlineColor:Ns,fill:Ns,stroke:Ns,borderColor:Ns,borderTopColor:Ns,borderRightColor:Ns,borderBottomColor:Ns,borderLeftColor:Ns,filter:iA,WebkitFilter:iA},JT=r=>yq[r];function g4(r,e){let t=JT(r);return t!==iA&&(t=nf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const vq=new Set(["auto","none","0"]);function wq(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!vq.has(s)&&Yg(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=g4(t,i)}const h3=r=>r===O0||r===kn,d3=(r,e)=>parseFloat(r.split(", ")[e]),p3=(r,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return d3(i[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?d3(s[1],r):0}},_q=new Set(["x","y","z"]),xq=k0.filter(r=>!_q.has(r));function Sq(r){const e=[];return xq.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const _0={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:p3(4,13),y:p3(5,14)};_0.translateX=_0.x;_0.translateY=_0.y;const Gh=new Set;let sA=!1,oA=!1;function y4(){if(oA){const r=Array.from(Gh).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=Sq(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,o])=>{var l;(l=n.getValue(s))===null||l===void 0||l.set(o)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}oA=!1,sA=!1,Gh.forEach(r=>r.complete()),Gh.clear()}function v4(){Gh.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(oA=!0)})}function Mq(){v4(),y4()}class eR{constructor(e,t,n,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Gh.add(this),sA||(sA=!0,Or.read(v4),Or.resolveKeyframes(y4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&t){const c=n.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Gh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Gh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const w4=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),Eq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bq(r){const e=Eq.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function _4(r,e,t=1){const[n,i]=bq(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return w4(o)?parseFloat(o):o}return OT(i)?_4(i,e,t+1):i}const x4=r=>e=>e.test(r),Aq={test:r=>r==="auto",parse:r=>r},S4=[O0,kn,Tl,jc,mj,pj,Aq],m3=r=>S4.find(x4(r));class M4 extends eR{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),OT(d))){const h=_4(d,t.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!JD.has(n)||e.length!==2)return;const[i,s]=e,o=m3(i),l=m3(s);if(o!==l)if(h3(o)&&h3(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)nq(e[i])&&n.push(i);n.length&&wq(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_0[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=_0[n](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const g3=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(nf.test(r)||r==="0")&&!r.startsWith("url("));function Tq(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function Rq(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],o=g3(i,e),l=g3(s,e);return!o||!l?!1:Tq(r)||(t==="spring"||HT(t))&&n}const Cq=r=>r!==null;function mx(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(Cq),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||n===void 0?i[s]:n}const Iq=40;class E4{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Rl.now(),this.options={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Iq?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Mq(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Rl.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:s,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!Rq(e,n,i,s))if(o)this.options.duration=0;else{c&&c(mx(e,this.options,t)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Qr=(r,e,t)=>r+(e-r)*t;function KM(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function Nq({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;i=KM(c,l,r+1/3),s=KM(c,l,r),o=KM(c,l,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function Y_(r,e){return t=>t>0?e:r}const YM=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},Pq=[rA,Oh,Xp],Lq=r=>Pq.find(e=>e.test(r));function y3(r){const e=Lq(r);if(!e)return!1;let t=e.parse(r);return e===Xp&&(t=Nq(t)),t}const v3=(r,e)=>{const t=y3(r),n=y3(e);if(!t||!n)return Y_(r,e);const i={...t};return s=>(i.red=YM(t.red,n.red,s),i.green=YM(t.green,n.green,s),i.blue=YM(t.blue,n.blue,s),i.alpha=Qr(t.alpha,n.alpha,s),Oh.transform(i))},kq=(r,e)=>t=>e(r(t)),Ny=(...r)=>r.reduce(kq),aA=new Set(["none","hidden"]);function Oq(r,e){return aA.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function Dq(r,e){return t=>Qr(r,e,t)}function tR(r){return typeof r=="number"?Dq:typeof r=="string"?OT(r)?Y_:Ns.test(r)?v3:Fq:Array.isArray(r)?b4:typeof r=="object"?Ns.test(r)?v3:Bq:Y_}function b4(r,e){const t=[...r],n=t.length,i=r.map((s,o)=>tR(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=i[o](s);return t}}function Bq(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=tR(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function Uq(r,e){var t;const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=r.indexes[o][i[o]],c=(t=r.values[l])!==null&&t!==void 0?t:0;n[s]=c,i[o]++}return n}const Fq=(r,e)=>{const t=nf.createTransformer(e),n=Yg(r),i=Yg(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?aA.has(r)&&!i.values.length||aA.has(e)&&!n.values.length?Oq(r,e):Ny(b4(Uq(n,i),i.values),t):Y_(r,e)};function A4(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Qr(r,e,t):tR(r)(r,e)}const zq=5;function T4(r,e,t){const n=Math.max(e-zq,0);return e4(t-r(n),e-n)}const ai={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},XM=.001;function Wq({duration:r=ai.duration,bounce:e=ai.bounce,velocity:t=ai.velocity,mass:n=ai.mass}){let i,s,o=1-e;o=ju(ai.minDamping,ai.maxDamping,o),r=ju(ai.minDuration,ai.maxDuration,Wu(r)),o<1?(i=d=>{const h=d*o,y=h*r,_=h-t,x=lA(d,o),A=Math.exp(-y);return XM-_/x*A},s=d=>{const y=d*o*r,_=y*t+t,x=Math.pow(o,2)*Math.pow(d,2)*r,A=Math.exp(-y),P=lA(Math.pow(d,2),o);return(-i(d)+XM>0?-1:1)*((_-x)*A)/P}):(i=d=>{const h=Math.exp(-d*r),y=(d-t)*r+1;return-XM+h*y},s=d=>{const h=Math.exp(-d*r),y=(t-d)*(r*r);return h*y});const l=5/r,c=Hq(i,s,l);if(r=zu(r),isNaN(c))return{stiffness:ai.stiffness,damping:ai.damping,duration:r};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:o*2*Math.sqrt(n*d),duration:r}}}const Vq=12;function Hq(r,e,t){let n=t;for(let i=1;i<Vq;i++)n=n-r(n)/e(n);return n}function lA(r,e){return r*Math.sqrt(1-e*e)}const Gq=["duration","bounce"],jq=["stiffness","damping","mass"];function w3(r,e){return e.some(t=>r[t]!==void 0)}function qq(r){let e={velocity:ai.velocity,stiffness:ai.stiffness,damping:ai.damping,mass:ai.mass,isResolvedFromDuration:!1,...r};if(!w3(r,jq)&&w3(r,Gq))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*ju(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:ai.mass,stiffness:i,damping:s}}else{const t=Wq(r);e={...e,...t,mass:ai.mass},e.isResolvedFromDuration=!0}return e}function R4(r=ai.visualDuration,e=ai.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:y,velocity:_,isResolvedFromDuration:x}=qq({...t,velocity:-Wu(t.velocity||0)}),A=_||0,P=d/(2*Math.sqrt(c*h)),I=o-s,C=Wu(Math.sqrt(c/h)),D=Math.abs(I)<5;n||(n=D?ai.restSpeed.granular:ai.restSpeed.default),i||(i=D?ai.restDelta.granular:ai.restDelta.default);let k;if(P<1){const Q=lA(C,P);k=G=>{const Y=Math.exp(-P*C*G);return o-Y*((A+P*C*I)/Q*Math.sin(Q*G)+I*Math.cos(Q*G))}}else if(P===1)k=Q=>o-Math.exp(-C*Q)*(I+(A+C*I)*Q);else{const Q=C*Math.sqrt(P*P-1);k=G=>{const Y=Math.exp(-P*C*G),ee=Math.min(Q*G,300);return o-Y*((A+P*C*I)*Math.sinh(ee)+Q*I*Math.cosh(ee))/Q}}const F={calculatedDuration:x&&y||null,next:Q=>{const G=k(Q);if(x)l.done=Q>=y;else{let Y=0;P<1&&(Y=Q===0?zu(A):T4(k,Q,G));const ee=Math.abs(Y)<=n,te=Math.abs(o-G)<=i;l.done=ee&&te}return l.value=l.done?o:G,l},toString:()=>{const Q=Math.min(qD(F),eA),G=KD(Y=>F.next(Q*Y).value,Q,30);return Q+"ms "+G}};return F}function _3({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const y=r[0],_={done:!1,value:y},x=ee=>l!==void 0&&ee<l||c!==void 0&&ee>c,A=ee=>l===void 0?c:c===void 0||Math.abs(l-ee)<Math.abs(c-ee)?l:c;let P=t*e;const I=y+P,C=o===void 0?I:o(I);C!==I&&(P=C-y);const D=ee=>-P*Math.exp(-ee/n),k=ee=>C+D(ee),F=ee=>{const te=D(ee),U=k(ee);_.done=Math.abs(te)<=d,_.value=_.done?C:U};let Q,G;const Y=ee=>{x(_.value)&&(Q=ee,G=R4({keyframes:[_.value,A(_.value)],velocity:T4(k,ee,_.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return Y(0),{calculatedDuration:null,next:ee=>{let te=!1;return!G&&Q===void 0&&(te=!0,F(ee),Y(ee)),Q!==void 0&&ee>=Q?G.next(ee-Q):(!te&&F(ee),_)}}}const Kq=Iy(.42,0,1,1),Yq=Iy(0,0,.58,1),C4=Iy(.42,0,.58,1),Xq=r=>Array.isArray(r)&&typeof r[0]!="number",$q={linear:Wo,easeIn:Kq,easeInOut:C4,easeOut:Yq,circIn:$T,circInOut:u4,circOut:l4,backIn:XT,backInOut:o4,backOut:s4,anticipate:a4},x3=r=>{if(GT(r)){AD(r.length===4);const[e,t,n,i]=r;return Iy(e,t,n,i)}else if(typeof r=="string")return $q[r];return r};function Zq(r,e,t){const n=[],i=t||A4,s=r.length-1;for(let o=0;o<s;o++){let l=i(r[o],r[o+1]);if(e){const c=Array.isArray(e)?e[o]||Wo:e;l=Ny(c,l)}n.push(l)}return n}function I4(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(AD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const l=Zq(e,n,i),c=l.length,d=h=>{if(o&&h<r[0])return e[0];let y=0;if(c>1)for(;y<r.length-2&&!(h<r[y+1]);y++);const _=y0(r[y],r[y+1],h);return l[y](_)};return t?h=>d(ju(r[0],r[s-1],h)):d}function Qq(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=y0(0,e,n);r.push(Qr(t,1,i))}}function Jq(r){const e=[0];return Qq(e,r.length-1),e}function eK(r,e){return r.map(t=>t*e)}function tK(r,e){return r.map(()=>e||C4).splice(0,r.length-1)}function X_({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=Xq(n)?n.map(x3):x3(n),s={done:!1,value:e[0]},o=eK(t&&t.length===e.length?t:Jq(e),r),l=I4(o,e,{ease:Array.isArray(i)?i:tK(e,i)});return{calculatedDuration:r,next:c=>(s.value=l(c),s.done=c>=r,s)}}const nK=r=>{const e=({timestamp:t})=>r(t);return{start:()=>Or.update(e,!0),stop:()=>Gu(e),now:()=>$i.isProcessing?$i.timestamp:Rl.now()}},rK={decay:_3,inertia:_3,tween:X_,keyframes:X_,spring:R4},iK=r=>r/100;class gx extends E4{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:n,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||eR,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(s,l,t,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,l=HT(t)?t:rK[t]||X_;let c,d;l!==X_&&typeof e[0]!="number"&&(c=Ny(iK,A4(e[0],e[1])),e=[0,100]);const h=l({...this.options,keyframes:e});s==="mirror"&&(d=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=qD(h));const{calculatedDuration:y}=h,_=y+i,x=_*(n+1)-i;return{generator:h,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:y,resolvedDuration:_,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:ee}=this.options;return{done:!0,value:ee[ee.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:h,resolvedDuration:y}=n;if(this.startTime===null)return s.next(0);const{delay:_,repeat:x,repeatType:A,repeatDelay:P,onUpdate:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const C=this.currentTime-_*(this.speed>=0?1:-1),D=this.speed>=0?C<0:C>h;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let k=this.currentTime,F=s;if(x){const ee=Math.min(this.currentTime,h)/y;let te=Math.floor(ee),U=ee%1;!U&&ee>=1&&(U=1),U===1&&te--,te=Math.min(te,x+1),!!(te%2)&&(A==="reverse"?(U=1-U,P&&(U-=P/y)):A==="mirror"&&(F=o)),k=ju(0,1,U)*y}const Q=D?{done:!1,value:c[0]}:F.next(k);l&&(Q.value=l(Q.value));let{done:G}=Q;!D&&d!==null&&(G=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const Y=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return Y&&i!==void 0&&(Q.value=mx(c,this.options,i)),I&&I(Q.value),Y&&this.finish(),Q}get duration(){const{resolved:e}=this;return e?Wu(e.calculatedDuration):0}get time(){return Wu(this.currentTime)}set time(e){e=zu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Wu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=nK,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}function sK(r){return new gx(r)}const oK=new Set(["opacity","clipPath","filter","transform"]);function aK(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[e]:t};c&&(d.offset=c);const h=XD(l,i);return Array.isArray(h)&&(d.easing=h),r.animate(d,{delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const lK=RT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$_=10,uK=2e4;function cK(r){return HT(r.type)||r.type==="spring"||!YD(r.ease)}function fK(r,e){const t=new gx({...e,keyframes:r,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:r[0]};const i=[];let s=0;for(;!n.done&&s<uK;)n=t.sample(s),i.push(n.value),s+=$_;return{times:void 0,keyframes:i,duration:s-$_,ease:"linear"}}const N4={anticipate:a4,backInOut:o4,circInOut:u4};function hK(r){return r in N4}class S3 extends E4{constructor(e){super(e);const{name:t,motionValue:n,element:i,keyframes:s}=this.options;this.resolver=new M4(s,(o,l)=>this.onKeyframesResolved(o,l),t,n,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:i,ease:s,type:o,motionValue:l,name:c,startTime:d}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&K_()&&hK(s)&&(s=N4[s]),cK(this.options)){const{onComplete:y,onUpdate:_,motionValue:x,element:A,...P}=this.options,I=fK(e,P);e=I.keyframes,e.length===1&&(e[1]=e[0]),n=I.duration,i=I.times,s=I.ease,o="keyframes"}const h=aK(l.owner.current,c,e,{...this.options,duration:n,times:i,ease:s});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(o3(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:y}=this.options;l.set(mx(e,this.options,t)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:n,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Wu(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Wu(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=zu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Wo;const{animation:n}=t;o3(n,e)}return Wo}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:s,ease:o,times:l}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:h,onComplete:y,element:_,...x}=this.options,A=new gx({...x,keyframes:n,duration:i,type:s,ease:o,times:l,isGenerator:!0}),P=zu(this.time);d.setWithVelocity(A.sample(P-$_).value,A.sample(P).value,$_)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:s,damping:o,type:l}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=t.owner.getProps();return lK()&&n&&oK.has(n)&&!c&&!d&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}}const dK={type:"spring",stiffness:500,damping:25,restSpeed:10},pK=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),mK={type:"keyframes",duration:.8},gK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yK=(r,{keyframes:e})=>e.length>2?mK:fd.has(r)?r.startsWith("scale")?pK(e[1]):dK:gK;function vK({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const nR=(r,e,t,n={},i,s)=>o=>{const l=VT(n,r)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-zu(c);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:_=>{e.set(_),l.onUpdate&&l.onUpdate(_)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:r,motionValue:e,element:s?void 0:i};vK(l)||(h={...h,...yK(r,h)}),h.duration&&(h.duration=zu(h.duration)),h.repeatDelay&&(h.repeatDelay=zu(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let y=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(y=!0)),y&&!s&&e.get()!==void 0){const _=mx(h.keyframes,l);if(_!==void 0)return Or.update(()=>{h.onUpdate(_),h.onComplete()}),new Bj([])}return!s&&S3.supports(h)?new S3(h):new gx(h)};function wK({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function P4(r,e,{delay:t=0,transitionOverride:n,type:i}={}){var s;let{transition:o=r.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(o=n);const d=[],h=i&&r.animationState&&r.animationState.getState()[i];for(const y in c){const _=r.getValue(y,(s=r.latestValues[y])!==null&&s!==void 0?s:null),x=c[y];if(x===void 0||h&&wK(h,y))continue;const A={delay:t,...VT(o||{},y)};let P=!1;if(window.MotionHandoffAnimation){const C=t4(r);if(C){const D=window.MotionHandoffAnimation(C,y,Or);D!==null&&(A.startTime=D,P=!0)}}nA(r,y),_.start(nR(y,_,x,r.shouldReduceMotion&&JD.has(y)?{type:!1}:A,r,P));const I=_.animation;I&&d.push(I)}return l&&Promise.all(d).then(()=>{Or.update(()=>{l&&Zj(r,l)})}),d}function uA(r,e,t={}){var n;const i=px(r,e,t.type==="exit"?(n=r.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=r.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(P4(r,i,t)):()=>Promise.resolve(),l=r.variantChildren&&r.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:y,staggerDirection:_}=s;return _K(r,e,h+d,y,_,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(t.delay)])}function _K(r,e,t=0,n=0,i=1,s){const o=[],l=(r.variantChildren.size-1)*n,c=i===1?(d=0)=>d*n:(d=0)=>l-d*n;return Array.from(r.variantChildren).sort(xK).forEach((d,h)=>{d.notify("AnimationStart",e),o.push(uA(d,e,{...s,delay:t+c(h)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function xK(r,e){return r.sortNodePosition(e)}function SK(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>uA(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=uA(r,e,t);else{const i=typeof e=="function"?px(r,e,t.custom):e;n=Promise.all(P4(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}const MK=IT.length;function L4(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?L4(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<MK;t++){const n=IT[t],i=r.props[n];(qg(i)||i===!1)&&(e[n]=i)}return e}const EK=[...CT].reverse(),bK=CT.length;function AK(r){return e=>Promise.all(e.map(({animation:t,options:n})=>SK(r,t,n)))}function TK(r){let e=AK(r),t=M3(),n=!0;const i=c=>(d,h)=>{var y;const _=px(r,h,c==="exit"?(y=r.presenceContext)===null||y===void 0?void 0:y.custom:void 0);if(_){const{transition:x,transitionEnd:A,...P}=_;d={...d,...P,...A}}return d};function s(c){e=c(r)}function o(c){const{props:d}=r,h=L4(r.parent)||{},y=[],_=new Set;let x={},A=1/0;for(let I=0;I<bK;I++){const C=EK[I],D=t[C],k=d[C]!==void 0?d[C]:h[C],F=qg(k),Q=C===c?D.isActive:null;Q===!1&&(A=I);let G=k===h[C]&&k!==d[C]&&F;if(G&&n&&r.manuallyAnimateOnMount&&(G=!1),D.protectedKeys={...x},!D.isActive&&Q===null||!k&&!D.prevProp||hx(k)||typeof k=="boolean")continue;const Y=RK(D.prevProp,k);let ee=Y||C===c&&D.isActive&&!G&&F||I>A&&F,te=!1;const U=Array.isArray(k)?k:[k];let V=U.reduce(i(C),{});Q===!1&&(V={});const{prevResolvedValues:K={}}=D,E={...K,...V},a=R=>{ee=!0,_.has(R)&&(te=!0,_.delete(R)),D.needsAnimating[R]=!0;const T=r.getValue(R);T&&(T.liveStyle=!1)};for(const R in E){const T=V[R],L=K[R];if(x.hasOwnProperty(R))continue;let N=!1;Jb(T)&&Jb(L)?N=!jD(T,L):N=T!==L,N?T!=null?a(R):_.add(R):T!==void 0&&_.has(R)?a(R):D.protectedKeys[R]=!0}D.prevProp=k,D.prevResolvedValues=V,D.isActive&&(x={...x,...V}),n&&r.blockInitialAnimation&&(ee=!1),ee&&(!(G&&Y)||te)&&y.push(...U.map(R=>({animation:R,options:{type:C}})))}if(_.size){const I={};_.forEach(C=>{const D=r.getBaseTarget(C),k=r.getValue(C);k&&(k.liveStyle=!0),I[C]=D??null}),y.push({animation:I})}let P=!!y.length;return n&&(d.initial===!1||d.initial===d.animate)&&!r.manuallyAnimateOnMount&&(P=!1),n=!1,P?e(y):Promise.resolve()}function l(c,d){var h;if(t[c].isActive===d)return Promise.resolve();(h=r.variantChildren)===null||h===void 0||h.forEach(_=>{var x;return(x=_.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),t[c].isActive=d;const y=o(c);for(const _ in t)t[_].protectedKeys={};return y}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=M3(),n=!0}}}function RK(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!jD(e,r):!1}function nh(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function M3(){return{animate:nh(!0),whileInView:nh(),whileHover:nh(),whileTap:nh(),whileDrag:nh(),whileFocus:nh(),exit:nh()}}class af{constructor(e){this.isMounted=!1,this.node=e}update(){}}class CK extends af{constructor(e){super(e),e.animationState||(e.animationState=TK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let IK=0;class NK extends af{constructor(){super(...arguments),this.id=IK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const PK={animation:{Feature:CK},exit:{Feature:NK}};function Xg(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function Py(r){return{point:{x:r.pageX,y:r.pageY}}}const LK=r=>e=>jT(e)&&r(e,Py(e));function Mg(r,e,t,n){return Xg(r,e,LK(t),n)}const E3=(r,e)=>Math.abs(r-e);function kK(r,e){const t=E3(r.x,e.x),n=E3(r.y,e.y);return Math.sqrt(t**2+n**2)}class k4{constructor(e,t,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=ZM(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,x=kK(y.offset,{x:0,y:0})>=3;if(!_&&!x)return;const{point:A}=y,{timestamp:P}=$i;this.history.push({...A,timestamp:P});const{onStart:I,onMove:C}=this.handlers;_||(I&&I(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,y)},this.handlePointerMove=(y,_)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=$M(_,this.transformPagePoint),Or.update(this.updatePoint,!0)},this.handlePointerUp=(y,_)=>{this.end();const{onEnd:x,onSessionEnd:A,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=ZM(y.type==="pointercancel"?this.lastMoveEventInfo:$M(_,this.transformPagePoint),this.history);this.startEvent&&x&&x(y,I),A&&A(y,I)},!jT(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const o=Py(e),l=$M(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=$i;this.history=[{...c,timestamp:d}];const{onSessionStart:h}=t;h&&h(e,ZM(l,this.history)),this.removeListeners=Ny(Mg(this.contextWindow,"pointermove",this.handlePointerMove),Mg(this.contextWindow,"pointerup",this.handlePointerUp),Mg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Gu(this.updatePoint)}}function $M(r,e){return e?{point:e(r.point)}:r}function b3(r,e){return{x:r.x-e.x,y:r.y-e.y}}function ZM({point:r},e){return{point:r,delta:b3(r,O4(e)),offset:b3(r,OK(e)),velocity:DK(e,.1)}}function OK(r){return r[0]}function O4(r){return r[r.length-1]}function DK(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=O4(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>zu(e)));)t--;if(!n)return{x:0,y:0};const s=Wu(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const D4=1e-4,BK=1-D4,UK=1+D4,B4=.01,FK=0-B4,zK=0+B4;function Ho(r){return r.max-r.min}function WK(r,e,t){return Math.abs(r-e)<=t}function A3(r,e,t,n=.5){r.origin=n,r.originPoint=Qr(e.min,e.max,r.origin),r.scale=Ho(t)/Ho(e),r.translate=Qr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=BK&&r.scale<=UK||isNaN(r.scale))&&(r.scale=1),(r.translate>=FK&&r.translate<=zK||isNaN(r.translate))&&(r.translate=0)}function Eg(r,e,t,n){A3(r.x,e.x,t.x,n?n.originX:void 0),A3(r.y,e.y,t.y,n?n.originY:void 0)}function T3(r,e,t){r.min=t.min+e.min,r.max=r.min+Ho(e)}function VK(r,e,t){T3(r.x,e.x,t.x),T3(r.y,e.y,t.y)}function R3(r,e,t){r.min=e.min-t.min,r.max=r.min+Ho(e)}function bg(r,e,t){R3(r.x,e.x,t.x),R3(r.y,e.y,t.y)}function HK(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Qr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Qr(t,r,n.max):Math.min(r,t)),r}function C3(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function GK(r,{top:e,left:t,bottom:n,right:i}){return{x:C3(r.x,t,i),y:C3(r.y,e,n)}}function I3(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function jK(r,e){return{x:I3(r.x,e.x),y:I3(r.y,e.y)}}function qK(r,e){let t=.5;const n=Ho(r),i=Ho(e);return i>n?t=y0(e.min,e.max-n,r.min):n>i&&(t=y0(r.min,r.max-i,e.min)),ju(0,1,t)}function KK(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const cA=.35;function YK(r=cA){return r===!1?r=0:r===!0&&(r=cA),{x:N3(r,"left","right"),y:N3(r,"top","bottom")}}function N3(r,e,t){return{min:P3(r,e),max:P3(r,t)}}function P3(r,e){return typeof r=="number"?r:r[e]||0}const L3=()=>({translate:0,scale:1,origin:0,originPoint:0}),$p=()=>({x:L3(),y:L3()}),k3=()=>({min:0,max:0}),pi=()=>({x:k3(),y:k3()});function sa(r){return[r("x"),r("y")]}function U4({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function XK({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function $K(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function QM(r){return r===void 0||r===1}function fA({scale:r,scaleX:e,scaleY:t}){return!QM(r)||!QM(e)||!QM(t)}function yh(r){return fA(r)||F4(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function F4(r){return O3(r.x)||O3(r.y)}function O3(r){return r&&r!=="0%"}function Z_(r,e,t){const n=r-t,i=e*n;return t+i}function D3(r,e,t,n,i){return i!==void 0&&(r=Z_(r,i,n)),Z_(r,t,n)+e}function hA(r,e=0,t=1,n,i){r.min=D3(r.min,e,t,n,i),r.max=D3(r.max,e,t,n,i)}function z4(r,{x:e,y:t}){hA(r.x,e.translate,e.scale,e.originPoint),hA(r.y,t.translate,t.scale,t.originPoint)}const B3=.999999999999,U3=1.0000000000001;function ZK(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=t[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Qp(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,z4(r,o)),n&&yh(s.latestValues)&&Qp(r,s.latestValues))}e.x<U3&&e.x>B3&&(e.x=1),e.y<U3&&e.y>B3&&(e.y=1)}function Zp(r,e){r.min=r.min+e,r.max=r.max+e}function F3(r,e,t,n,i=.5){const s=Qr(r.min,r.max,i);hA(r,e,t,s,n)}function Qp(r,e){F3(r.x,e.x,e.scaleX,e.scale,e.originX),F3(r.y,e.y,e.scaleY,e.scale,e.originY)}function W4(r,e){return U4($K(r.getBoundingClientRect(),e))}function QK(r,e,t){const n=W4(r,t),{scroll:i}=e;return i&&(Zp(n.x,i.offset.x),Zp(n.y,i.offset.y)),n}const V4=({current:r})=>r?r.ownerDocument.defaultView:null,JK=new WeakMap;class eY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pi(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Py(h).point)},s=(h,y)=>{const{drag:_,dragPropagation:x,onDragStart:A}=this.getProps();if(_&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=qj(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sa(I=>{let C=this.getAxisMotionValue(I).get()||0;if(Tl.test(C)){const{projection:D}=this.visualElement;if(D&&D.layout){const k=D.layout.layoutBox[I];k&&(C=Ho(k)*(parseFloat(C)/100))}}this.originPoint[I]=C}),A&&Or.postRender(()=>A(h,y)),nA(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},o=(h,y)=>{const{dragPropagation:_,dragDirectionLock:x,onDirectionLock:A,onDrag:P}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:I}=y;if(x&&this.currentDirection===null){this.currentDirection=tY(I),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",y.point,I),this.updateAxis("y",y.point,I),this.visualElement.render(),P&&P(h,y)},l=(h,y)=>this.stop(h,y),c=()=>sa(h=>{var y;return this.getAnimationState(h)==="paused"&&((y=this.getAxisMotionValue(h).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new k4(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:V4(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Or.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!rw(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=HK(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Yp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=GK(i.layoutBox,t):this.constraints=!1,this.elastic=YK(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&sa(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=KK(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Yp(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=QK(n,i.root,this.visualElement.getTransformPagePoint());let o=jK(i.layout.layoutBox,s);if(t){const l=t(XK(o));this.hasMutatedConstraints=!!l,l&&(o=U4(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=sa(h=>{if(!rw(h,t,this.currentDirection))return;let y=c&&c[h]||{};o&&(y={min:0,max:0});const _=i?200:1e6,x=i?40:1e7,A={type:"inertia",velocity:n?e[h]:0,bounceStiffness:_,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...s,...y};return this.startAxisValueAnimation(h,A)});return Promise.all(d).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return nA(this.visualElement,e),n.start(nR(e,n,0,t,this.visualElement,!1))}stopAnimation(){sa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){sa(t=>{const{drag:n}=this.getProps();if(!rw(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[t];s.set(e[t]-Qr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Yp(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sa(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=qK({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),sa(o=>{if(!rw(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Qr(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;JK.set(this.visualElement,this);const e=this.visualElement.current,t=Mg(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Yp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Or.read(n);const o=Xg(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(sa(h=>{const y=this.getAxisMotionValue(h);y&&(this.originPoint[h]+=c[h].translate,y.set(y.get()+c[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=cA,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function rw(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function tY(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class nY extends af{constructor(e){super(e),this.removeGroupControls=Wo,this.removeListeners=Wo,this.controls=new eY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wo}unmount(){this.removeGroupControls(),this.removeListeners()}}const z3=r=>(e,t)=>{r&&Or.postRender(()=>r(e,t))};class rY extends af{constructor(){super(...arguments),this.removePointerDownListener=Wo}onPointerDown(e){this.session=new k4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:z3(e),onStart:z3(t),onMove:n,onEnd:(s,o)=>{delete this.session,i&&Or.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Mg(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const w_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function W3(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const qm={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(kn.test(r))r=parseFloat(r);else return r;const t=W3(r,e.target.x),n=W3(r,e.target.y);return`${t}% ${n}%`}},iY={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=nf.parse(r);if(i.length>5)return n;const s=nf.createTransformer(r),o=typeof i[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=Qr(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};class sY extends Se.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;bj(oY),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),w_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Or.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),PT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function H4(r){const[e,t]=bD(),n=Se.useContext(AT);return lt.jsx(sY,{...r,layoutGroup:n,switchLayoutGroup:Se.useContext(PD),isPresent:e,safeToRemove:t})}const oY={borderRadius:{...qm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qm,borderTopRightRadius:qm,borderBottomLeftRadius:qm,borderBottomRightRadius:qm,boxShadow:iY};function aY(r,e,t){const n=Ji(r)?r:w0(r);return n.start(nR("",n,e,t)),n.animation}function lY(r){return r instanceof SVGElement&&r.tagName!=="svg"}const uY=(r,e)=>r.depth-e.depth;class cY{constructor(){this.children=[],this.isDirty=!1}add(e){qT(this.children,e),this.isDirty=!0}remove(e){KT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(uY),this.isDirty=!1,this.children.forEach(e)}}function fY(r,e){const t=Rl.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(Gu(n),r(s-e))};return Or.read(n,!0),()=>Gu(n)}const G4=["TopLeft","TopRight","BottomLeft","BottomRight"],hY=G4.length,V3=r=>typeof r=="string"?parseFloat(r):r,H3=r=>typeof r=="number"||kn.test(r);function dY(r,e,t,n,i,s){i?(r.opacity=Qr(0,t.opacity!==void 0?t.opacity:1,pY(n)),r.opacityExit=Qr(e.opacity!==void 0?e.opacity:1,0,mY(n))):s&&(r.opacity=Qr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<hY;o++){const l=`border${G4[o]}Radius`;let c=G3(e,l),d=G3(t,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||H3(c)===H3(d)?(r[l]=Math.max(Qr(V3(c),V3(d),n),0),(Tl.test(d)||Tl.test(c))&&(r[l]+="%")):r[l]=d}(e.rotate||t.rotate)&&(r.rotate=Qr(e.rotate||0,t.rotate||0,n))}function G3(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const pY=j4(0,.5,l4),mY=j4(.5,.95,Wo);function j4(r,e,t){return n=>n<r?0:n>e?1:t(y0(r,e,n))}function j3(r,e){r.min=e.min,r.max=e.max}function ra(r,e){j3(r.x,e.x),j3(r.y,e.y)}function q3(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function K3(r,e,t,n,i){return r-=e,r=Z_(r,1/t,n),i!==void 0&&(r=Z_(r,1/i,n)),r}function gY(r,e=0,t=1,n=.5,i,s=r,o=r){if(Tl.test(e)&&(e=parseFloat(e),e=Qr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Qr(s.min,s.max,n);r===s&&(l-=e),r.min=K3(r.min,e,t,l,i),r.max=K3(r.max,e,t,l,i)}function Y3(r,e,[t,n,i],s,o){gY(r,e[t],e[n],e[i],e.scale,s,o)}const yY=["x","scaleX","originX"],vY=["y","scaleY","originY"];function X3(r,e,t,n){Y3(r.x,e,yY,t?t.x:void 0,n?n.x:void 0),Y3(r.y,e,vY,t?t.y:void 0,n?n.y:void 0)}function $3(r){return r.translate===0&&r.scale===1}function q4(r){return $3(r.x)&&$3(r.y)}function Z3(r,e){return r.min===e.min&&r.max===e.max}function wY(r,e){return Z3(r.x,e.x)&&Z3(r.y,e.y)}function Q3(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function K4(r,e){return Q3(r.x,e.x)&&Q3(r.y,e.y)}function J3(r){return Ho(r.x)/Ho(r.y)}function eN(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class _Y{constructor(){this.members=[]}add(e){qT(this.members,e),e.scheduleRender()}remove(e){if(KT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xY(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(n=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:h,rotateX:y,rotateY:_,skewX:x,skewY:A}=t;d&&(n=`perspective(${d}px) ${n}`),h&&(n+=`rotate(${h}deg) `),y&&(n+=`rotateX(${y}deg) `),_&&(n+=`rotateY(${_}deg) `),x&&(n+=`skewX(${x}deg) `),A&&(n+=`skewY(${A}deg) `)}const l=r.x.scale*e.x,c=r.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const vh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},mg=typeof window<"u"&&window.MotionDebug!==void 0,JM=["","X","Y","Z"],SY={visibility:"hidden"},tN=1e3;let MY=0;function eE(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function Y4(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=t4(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Or,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&Y4(n)}function X4({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=MY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,mg&&(vh.totalNodes=vh.resolvedTargetDeltas=vh.recalculatedProjection=0),this.nodes.forEach(AY),this.nodes.forEach(NY),this.nodes.forEach(PY),this.nodes.forEach(TY),mg&&window.MotionDebug.record(vh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new cY)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new YT),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lY(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),r){let y;const _=()=>this.root.updateBlockedByResize=!1;r(o,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=fY(_,250),w_.hasAnimatedSinceResize&&(w_.hasAnimatedSinceResize=!1,this.nodes.forEach(rN))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:_,hasRelativeTargetChanged:x,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const P=this.options.transition||h.getDefaultTransition()||BY,{onLayoutAnimationStart:I,onLayoutAnimationComplete:C}=h.getProps(),D=!this.targetLayout||!K4(this.targetLayout,A)||x,k=!_&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||_&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,k);const F={...VT(P,"layout"),onPlay:I,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else _||rN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Gu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(LY),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Y4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const y=this.path[h];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nN);return}this.isUpdating||this.nodes.forEach(CY),this.isUpdating=!1,this.nodes.forEach(IY),this.nodes.forEach(EY),this.nodes.forEach(bY),this.clearAllSnapshots();const l=Rl.now();$i.delta=ju(0,1e3/60,l-$i.timestamp),$i.timestamp=l,$i.isProcessing=!0,GM.update.process($i),GM.preRender.process($i),GM.render.process($i),$i.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,PT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(RY),this.sharedNodes.forEach(kY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Or.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Or.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!q4(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&(l||yh(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),UY(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return pi();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(FY))){const{scroll:h}=this.root;h&&(Zp(c.x,h.offset.x),Zp(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=pi();if(ra(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:y,options:_}=h;h!==this.root&&y&&_.layoutScroll&&(y.wasRoot&&ra(c,o),Zp(c.x,y.offset.x),Zp(c.y,y.offset.y))}return c}applyTransform(o,l=!1){const c=pi();ra(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Qp(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),yh(h.latestValues)&&Qp(c,h.latestValues)}return yh(this.latestValues)&&Qp(c,this.latestValues),c}removeTransform(o){const l=pi();ra(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!yh(d.latestValues))continue;fA(d.latestValues)&&d.updateSnapshot();const h=pi(),y=d.measurePageBox();ra(h,y),X3(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return yh(this.latestValues)&&X3(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$i.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:_}=this.options;if(!(!this.layout||!(y||_))){if(this.resolvedRelativeTargetAt=$i.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pi(),this.relativeTargetOrigin=pi(),bg(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pi(),this.targetWithTransforms=pi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ra(this.target,this.layout.layoutBox),z4(this.target,this.targetDelta)):ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pi(),this.relativeTargetOrigin=pi(),bg(this.relativeTargetOrigin,this.target,x.target),ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mg&&vh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||fA(this.parent.latestValues)||F4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===$i.timestamp&&(d=!1),d)return;const{layout:h,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||y))return;ra(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,x=this.treeScale.y;ZK(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=pi());const{target:A}=l;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(q3(this.prevProjectionDelta.x,this.projectionDelta.x),q3(this.prevProjectionDelta.y,this.projectionDelta.y)),Eg(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==x||!eN(this.projectionDelta.x,this.prevProjectionDelta.x)||!eN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A)),mg&&vh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$p(),this.projectionDelta=$p(),this.projectionDeltaWithTransform=$p()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},y=$p();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const _=pi(),x=c?c.source:void 0,A=this.layout?this.layout.source:void 0,P=x!==A,I=this.getStack(),C=!I||I.members.length<=1,D=!!(P&&!C&&this.options.crossfade===!0&&!this.path.some(DY));this.animationProgress=0;let k;this.mixTargetDelta=F=>{const Q=F/1e3;iN(y.x,o.x,Q),iN(y.y,o.y,Q),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bg(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OY(this.relativeTarget,this.relativeTargetOrigin,_,Q),k&&wY(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=pi()),ra(k,this.relativeTarget)),P&&(this.animationValues=h,dY(h,d,this.latestValues,Q,D,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Gu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Or.update(()=>{w_.hasAnimatedSinceResize=!0,this.currentAnimation=aY(0,tN,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&$4(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||pi();const y=Ho(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+y;const _=Ho(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+_}ra(l,c),Qp(l,h),Eg(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new _Y),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&eE("z",o,d,this.animationValues);for(let h=0;h<JM.length;h++)eE(`rotate${JM[h]}`,o,d,this.animationValues),eE(`skew${JM[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return SY;const d={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=y_(o==null?void 0:o.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none",d;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const P={};return this.options.layoutId&&(P.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,P.pointerEvents=y_(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!yh(this.latestValues)&&(P.transform=h?h({},""):"none",this.hasProjected=!1),P}const _=y.animationValues||y.latestValues;this.applyTransformsToTarget(),d.transform=xY(this.projectionDeltaWithTransform,this.treeScale,_),h&&(d.transform=h(_,d.transform));const{x,y:A}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${A.origin*100}% 0`,y.animationValues?d.opacity=y===this?(c=(l=_.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:d.opacity=y===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const P in q_){if(_[P]===void 0)continue;const{correct:I,applyTo:C}=q_[P],D=d.transform==="none"?_[P]:I(_[P],y);if(C){const k=C.length;for(let F=0;F<k;F++)d[C[F]]=D}else d[P]=D}return this.options.layoutId&&(d.pointerEvents=y===this?y_(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(nN),this.root.sharedNodes.clear()}}}function EY(r){r.updateLayout()}function bY(r){var e;const t=((e=r.resumeFrom)===null||e===void 0?void 0:e.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,o=t.source!==r.layout.source;s==="size"?sa(y=>{const _=o?t.measuredBox[y]:t.layoutBox[y],x=Ho(_);_.min=n[y].min,_.max=_.min+x}):$4(s,t.layoutBox,n)&&sa(y=>{const _=o?t.measuredBox[y]:t.layoutBox[y],x=Ho(n[y]);_.max=_.min+x,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[y].max=r.relativeTarget[y].min+x)});const l=$p();Eg(l,n,t.layoutBox);const c=$p();o?Eg(c,r.applyTransform(i,!0),t.measuredBox):Eg(c,n,t.layoutBox);const d=!q4(l);let h=!1;if(!r.resumeFrom){const y=r.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:_,layout:x}=y;if(_&&x){const A=pi();bg(A,t.layoutBox,_.layoutBox);const P=pi();bg(P,n,x.layoutBox),K4(A,P)||(h=!0),y.options.layoutRoot&&(r.relativeTarget=P,r.relativeTargetOrigin=A,r.relativeParent=y)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:h})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function AY(r){mg&&vh.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function TY(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function RY(r){r.clearSnapshot()}function nN(r){r.clearMeasurements()}function CY(r){r.isLayoutDirty=!1}function IY(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function rN(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function NY(r){r.resolveTargetDelta()}function PY(r){r.calcProjection()}function LY(r){r.resetSkewAndRotation()}function kY(r){r.removeLeadSnapshot()}function iN(r,e,t){r.translate=Qr(e.translate,0,t),r.scale=Qr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function sN(r,e,t,n){r.min=Qr(e.min,t.min,n),r.max=Qr(e.max,t.max,n)}function OY(r,e,t,n){sN(r.x,e.x,t.x,n),sN(r.y,e.y,t.y,n)}function DY(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const BY={duration:.45,ease:[.4,0,.1,1]},oN=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),aN=oN("applewebkit/")&&!oN("chrome/")?Math.round:Wo;function lN(r){r.min=aN(r.min),r.max=aN(r.max)}function UY(r){lN(r.x),lN(r.y)}function $4(r,e,t){return r==="position"||r==="preserve-aspect"&&!WK(J3(e),J3(t),.2)}function FY(r){var e;return r!==r.root&&((e=r.scroll)===null||e===void 0?void 0:e.wasRoot)}const zY=X4({attachResizeListener:(r,e)=>Xg(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tE={current:void 0},Z4=X4({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!tE.current){const r=new zY({});r.mount(window),r.setOptions({layoutScroll:!0}),tE.current=r}return tE.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),WY={pan:{Feature:rY},drag:{Feature:nY,ProjectionNode:Z4,MeasureLayout:H4}};function uN(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Or.postRender(()=>s(e,Py(e)))}class VY extends af{mount(){const{current:e}=this.node;e&&(this.unmount=Wj(e,t=>(uN(this.node,t,"Start"),n=>uN(this.node,n,"End"))))}unmount(){}}class HY extends af{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ny(Xg(this.node.current,"focus",()=>this.onFocus()),Xg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cN(r,e,t){const{props:n}=r;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Or.postRender(()=>s(e,Py(e)))}class GY extends af{mount(){const{current:e}=this.node;e&&(this.unmount=jj(e,t=>(cN(this.node,t,"Start"),(n,{success:i})=>cN(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dA=new WeakMap,nE=new WeakMap,jY=r=>{const e=dA.get(r.target);e&&e(r)},qY=r=>{r.forEach(jY)};function KY({root:r,...e}){const t=r||document;nE.has(t)||nE.set(t,{});const n=nE.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(qY,{root:r,...e})),n[i]}function YY(r,e,t){const n=KY(e);return dA.set(r,t),n.observe(r),()=>{dA.delete(r),n.unobserve(r)}}const XY={some:0,all:1};class $Y extends af{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:XY[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:y}=this.node.getProps(),_=d?h:y;_&&_(c)};return YY(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(ZY(e,t))&&this.startObserver()}unmount(){}}function ZY({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const QY={inView:{Feature:$Y},tap:{Feature:GY},focus:{Feature:HY},hover:{Feature:VY}},JY={layout:{ProjectionNode:Z4,MeasureLayout:H4}},pA={current:null},Q4={current:!1};function eX(){if(Q4.current=!0,!!TT)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>pA.current=r.matches;r.addListener(e),e()}else pA.current=!1}const tX=[...S4,Ns,nf],nX=r=>tX.find(x4(r)),fN=new WeakMap;function rX(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Ji(i))r.addValue(n,i);else if(Ji(s))r.addValue(n,w0(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const o=r.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=r.getStaticValue(n);r.addValue(n,w0(o!==void 0?o:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const hN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iX{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Rl.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Or.render(this.render,!1,!0))};const{latestValues:c,renderState:d,onUpdate:h}=o;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=dx(t),this.isVariantNode=ID(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in _){const A=_[x];c[x]!==void 0&&Ji(A)&&A.set(c[x],!1)}}mount(e){this.current=e,fN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),Q4.current||eX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fN.delete(this.current),this.projection&&this.projection.unmount(),Gu(this.notifyUpdate),Gu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=fd.has(e),i=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Or.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in v0){const t=v0[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<hN.length;n++){const i=hN[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=rX(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=w0(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(w4(i)||c4(i))?i=parseFloat(i):!nX(i)&&nf.test(t)&&(i=g4(e,t)),this.setBaseTarget(e,Ji(i)?i.get():i)),Ji(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=kT(this.props,n,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ji(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new YT),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class J4 extends iX{constructor(){super(...arguments),this.KeyframeResolver=M4}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ji(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function sX(r){return window.getComputedStyle(r)}class oX extends J4{constructor(){super(...arguments),this.type="html",this.renderInstance=FD}readValueFromInstance(e,t){if(fd.has(t)){const n=JT(t);return n&&n.default||0}else{const n=sX(e),i=(DD(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return W4(e,t)}build(e,t,n){BT(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return WT(e,t,n)}}class aX extends J4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fd.has(t)){const n=JT(t);return n&&n.default||0}return t=zD.has(t)?t:NT(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return HD(e,t,n)}build(e,t,n){UT(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,i){WD(e,t,n,i)}mount(e){this.isSVGTag=zT(e.tagName),super.mount(e)}}const lX=(r,e)=>LT(r)?new aX(e):new oX(e,{allowProjection:r!==Se.Fragment}),uX=kj({...PK,...QY,...WY,...JY},lX),tr=XG(uX);function x0(r){const e=Ty(()=>w0(r)),{isStatic:t}=Se.useContext(Ry);if(t){const[,n]=Se.useState(r);Se.useEffect(()=>e.on("change",n),[])}return e}function eB(r,e){const t=x0(e()),n=()=>t.set(e());return n(),cx(()=>{const i=()=>Or.preRender(n,!1,!0),s=r.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Gu(n)}}),t}function dN(r){return typeof r=="number"?r:parseFloat(r)}function Q_(r,e={}){const{isStatic:t}=Se.useContext(Ry),n=Se.useRef(null),i=x0(Ji(r)?dN(r.get()):r),s=Se.useRef(i.get()),o=Se.useRef(()=>{}),l=()=>{const d=n.current;d&&d.time===0&&d.sample($i.delta),c(),n.current=sK({keyframes:[i.get(),s.current],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:o.current})},c=()=>{n.current&&n.current.stop()};return Se.useInsertionEffect(()=>i.attach((d,h)=>t?h(d):(s.current=d,o.current=h,Or.update(l),i.get()),c),[JSON.stringify(e)]),cx(()=>{if(Ji(r))return r.on("change",d=>i.set(dN(d)))},[i]),i}const cX=r=>r&&typeof r=="object"&&r.mix,fX=r=>cX(r)?r.mix:void 0;function hX(...r){const e=!Array.isArray(r[0]),t=e?0:-1,n=r[0+t],i=r[1+t],s=r[2+t],o=r[3+t],l=I4(i,s,{mixer:fX(s[0]),...o});return e?l(n):l}function dX(r){xg.current=[],r();const e=eB(xg.current,r);return xg.current=void 0,e}function J_(r,e,t,n){if(typeof r=="function")return dX(r);const i=typeof e=="function"?e:hX(e,t,n);return Array.isArray(r)?pN(r,i):pN([r],([s])=>i(s))}function pN(r,e){const t=Ty(()=>[]);return eB(r,()=>{t.length=0;const n=r.length;for(let i=0;i<n;i++)t[i]=r[i].get();return e(t)})}function pX({feature:r,index:e,isHovered:t,onHover:n,onLeave:i}){const s=Se.useRef(null),o=x0(0),l=x0(0),c=Q_(o,{stiffness:300,damping:30}),d=Q_(l,{stiffness:300,damping:30}),h=J_(d,[-.5,.5],["12deg","-12deg"]),y=J_(c,[-.5,.5],["-12deg","12deg"]),_=A=>{if(!s.current)return;const P=s.current.getBoundingClientRect(),I=(A.clientX-P.left)/P.width-.5,C=(A.clientY-P.top)/P.height-.5;o.set(I),l.set(C)},x=()=>{o.set(0),l.set(0),i()};return lt.jsxs(tr.div,{ref:s,className:`feature-card ${t?"hovered":""}`,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:e*.1,duration:.6},onMouseMove:_,onMouseEnter:n,onMouseLeave:x,style:{rotateX:h,rotateY:y,transformStyle:"preserve-3d"},children:[lt.jsxs(tr.div,{className:"feature-content",style:{transform:"translateZ(50px)"},children:[lt.jsx(tr.div,{className:"feature-icon",animate:t?{scale:1.2,rotate:360}:{scale:1,rotate:0},transition:{duration:.5},children:r.icon}),lt.jsx("h3",{className:"feature-title",children:r.title}),lt.jsx("p",{className:"feature-description",children:r.description})]}),lt.jsx(tr.div,{className:"feature-shine",style:{background:`radial-gradient(circle at ${(o.get()+.5)*100}% ${(l.get()+.5)*100}%, rgba(255,255,255,0.2) 0%, transparent 50%)`,opacity:t?1:0}}),lt.jsx(tr.div,{className:"feature-glow",animate:{opacity:t?.6:0}})]})}function mX({onGetStarted:r}){const[e,t]=Se.useState(null),n=[{icon:"🎨",title:"Beautiful 3D Graphics",description:"Stunning animated spheres and particle effects powered by Three.js"},{icon:"⚡",title:"Lightning Fast",description:"Built on Solana for instant transactions and low fees"},{icon:"🔒",title:"Secure & Reliable",description:"Powered by Anchor framework with battle-tested security"},{icon:"💎",title:"Metaplex Standard",description:"Full NFT standard compliance with metadata and royalties"},{icon:"🌈",title:"Smooth Animations",description:"Buttery smooth interactions with Framer Motion"},{icon:"📱",title:"Fully Responsive",description:"Perfect experience on desktop, tablet, and mobile"}],i=[{value:"< 1s",label:"Transaction Time"},{value:"$0.00025",label:"Average Fee"},{value:"100%",label:"Uptime"},{value:"∞",label:"Possibilities"}];return lt.jsxs("div",{className:"landing-page",children:[lt.jsxs(tr.section,{className:"hero",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[lt.jsxs(tr.div,{className:"hero-content",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.8},children:[lt.jsx(tr.div,{className:"hero-badge",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},children:"✨ Powered by Solana"}),lt.jsxs(tr.h1,{className:"hero-title",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.8},children:["Mint NFTs with",lt.jsx("br",{}),lt.jsx("span",{className:"gradient-text",children:"Stunning 3D Graphics"})]}),lt.jsxs(tr.p,{className:"hero-subtitle",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8,duration:.8},children:["Create, mint, and manage your NFT collection with the most beautiful",lt.jsx("br",{}),"minting experience on Solana. No coding required."]}),lt.jsxs(tr.div,{className:"hero-buttons",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.8},children:[lt.jsxs(tr.button,{className:"btn-primary",onClick:r,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:["Start Minting",lt.jsx("span",{className:"btn-arrow",children:"→"})]}),lt.jsx(tr.button,{className:"btn-secondary",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>window.open("https://docs.solana.com/","_blank"),children:"Learn More"})]}),lt.jsx(tr.div,{className:"hero-stats",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.2,duration:.8},children:i.map((s,o)=>lt.jsxs(tr.div,{className:"stat-item",initial:{scale:0},animate:{scale:1},transition:{delay:1.3+o*.1,type:"spring"},children:[lt.jsx("div",{className:"stat-value",children:s.value}),lt.jsx("div",{className:"stat-label",children:s.label})]},o))})]}),lt.jsxs("div",{className:"hero-bg",children:[lt.jsx(tr.div,{className:"hero-circle hero-circle-1",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),lt.jsx(tr.div,{className:"hero-circle hero-circle-2",animate:{scale:[1,1.3,1],rotate:[360,180,0]},transition:{duration:25,repeat:1/0,ease:"linear"}}),lt.jsx(tr.div,{className:"hero-circle hero-circle-3",animate:{scale:[1,1.1,1],rotate:[0,90,180]},transition:{duration:15,repeat:1/0,ease:"linear"}})]})]}),lt.jsxs("section",{className:"features",children:[lt.jsxs(tr.div,{className:"section-header",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[lt.jsx("h2",{className:"section-title",children:"Why Choose Us?"}),lt.jsx("p",{className:"section-subtitle",children:"Everything you need to create amazing NFTs"})]}),lt.jsx("div",{className:"features-grid",children:n.map((s,o)=>lt.jsx(pX,{feature:s,index:o,isHovered:e===o,onHover:()=>t(o),onLeave:()=>t(null)},o))})]}),lt.jsx(tr.section,{className:"cta",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.8},children:lt.jsxs("div",{className:"cta-content",children:[lt.jsx(tr.h2,{className:"cta-title",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{delay:.2,duration:.6},children:"Ready to Create Your NFT?"}),lt.jsx(tr.p,{className:"cta-subtitle",initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{delay:.4,duration:.6},children:"Join thousands of creators minting on Solana"}),lt.jsxs(tr.button,{className:"btn-cta",onClick:r,initial:{y:20,opacity:0},whileInView:{y:0,opacity:1},viewport:{once:!0},transition:{delay:.6,duration:.6},whileHover:{scale:1.05,boxShadow:"0 20px 60px rgba(102, 126, 234, 0.6)"},whileTap:{scale:.95},children:["Get Started Now",lt.jsx("span",{className:"btn-sparkle",children:"✨"})]})]})}),lt.jsx("footer",{className:"landing-footer",children:lt.jsxs(tr.div,{className:"footer-content",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},children:[lt.jsx("p",{children:"Built with ❤️ on Solana"}),lt.jsxs("div",{className:"footer-links",children:[lt.jsx("a",{href:"https://solana.com",target:"_blank",rel:"noopener noreferrer",children:"Solana"}),lt.jsx("span",{children:"•"}),lt.jsx("a",{href:"https://www.anchor-lang.com",target:"_blank",rel:"noopener noreferrer",children:"Anchor"}),lt.jsx("span",{children:"•"}),lt.jsx("a",{href:"https://docs.metaplex.com",target:"_blank",rel:"noopener noreferrer",children:"Metaplex"})]})]})})]})}var __={exports:{}},gX=__.exports,mN;function yX(){return mN||(mN=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=I0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,L,N=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)L=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)L=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,L=0,N;if(M==="be")for(R=a.length-1;R>=p;R-=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8;else{var v=a.length-p;for(R=v%2===0?p+1:p;R<a.length;R+=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,L=Math.min(E.length,p),N=a;N<L;N++){var v=E.charCodeAt(N)-48;R*=M,v>=49?T=v-49+10:v>=17?T=v-17+10:T=v,n(v>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var L=a.length-M,N=L%R,v=Math.min(L,L-N)+M,u=0,S=M;S<v;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(N!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<N;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{s.prototype.inspect=y}else s.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,L=0;L<this.length;L++){var N=this.words[L],v=((N<<R|T)&16777215).toString(16);T=N>>>24-R&16777215,R+=2,R>=26&&(R-=26,L--),T!==0||L!==this.length-1?M=_[6-v.length]+v+M:M=v+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var P=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var L=P(a,T),N=p==="le"?"LE":"BE";return this["_toArrayLike"+N](L,R),L},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M++]=N&255,M<a.length&&(a[M++]=N>>8&255),M<a.length&&(a[M++]=N>>16&255),L===6?(M<a.length&&(a[M++]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M--]=N&255,M>=0&&(a[M--]=N>>8&255),M>=0&&(a[M--]=N>>16&255),L===6?(M>=0&&(a[M--]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function I(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,L=0;L<R.length;L++)p=(M.words[L]|0)+(R.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;for(;T!==0&&L<M.length;L++)p=(M.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;L<M.length;L++)this.words[L]=M.words[L];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var L=0,N=0;N<T.length;N++)p=(R.words[N]|0)-(T.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;for(;L!==0&&N<R.length;N++)p=(R.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;if(L===0&&N<R.length&&R!==this)for(;N<R.length;N++)this.words[N]=R.words[N];return this.length=Math.max(this.length,N),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,L=R*T,N=L&67108863,v=L/67108864|0;p.words[0]=N;for(var u=1;u<M;u++){for(var S=v>>>26,W=v&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,L=R*T+W,S+=L/67108864|0,W=L&67108863}p.words[u]=W|0,v=S|0}return v!==0?p.words[u]=v|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,L=M.words,N=0,v,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,Ae=me>>>13,_t=R[2]|0,Ze=_t&8191,Pe=_t>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,vt=R[4]|0,He=vt&8191,nt=vt>>>13,Pt=R[5]|0,fe=Pt&8191,oe=Pt>>>13,Oe=R[6]|0,Re=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,bt=R[8]|0,ct=bt&8191,re=bt>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,we=T[0]|0,ye=we&8191,le=we>>>13,Xe=T[1]|0,de=Xe&8191,Ce=Xe>>>13,Ue=T[2]|0,Ee=Ue&8191,qe=Ue>>>13,Ct=T[3]|0,ft=Ct&8191,yt=Ct>>>13,Sn=T[4]|0,dt=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Te=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,gt=dn&8191,xt=dn>>>13,Dn=T[8]|0,wt=Dn&8191,kt=Dn>>>13,Pr=T[9]|0,Dt=Pr&8191,Ot=Pr>>>13;M.negative=a.negative^p.negative,M.length=19,v=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,v=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(Ae,ye)|0,S=Math.imul(Ae,le),v=v+Math.imul($,de)|0,u=u+Math.imul($,Ce)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Ce)|0;var De=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),v=v+Math.imul(_e,de)|0,u=u+Math.imul(_e,Ce)|0,u=u+Math.imul(Ae,de)|0,S=S+Math.imul(Ae,Ce)|0,v=v+Math.imul($,Ee)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Ee)|0,S=S+Math.imul(se,qe)|0;var $e=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,v=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),v=v+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Ce)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Ce)|0,v=v+Math.imul(_e,Ee)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(Ae,Ee)|0,S=S+Math.imul(Ae,qe)|0,v=v+Math.imul($,ft)|0,u=u+Math.imul($,yt)|0,u=u+Math.imul(se,ft)|0,S=S+Math.imul(se,yt)|0;var Qe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,v=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),v=v+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Ce)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Ce)|0,v=v+Math.imul(Ze,Ee)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Ee)|0,S=S+Math.imul(Pe,qe)|0,v=v+Math.imul(_e,ft)|0,u=u+Math.imul(_e,yt)|0,u=u+Math.imul(Ae,ft)|0,S=S+Math.imul(Ae,yt)|0,v=v+Math.imul($,dt)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,dt)|0,S=S+Math.imul(se,ae)|0;var Be=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),v=v+Math.imul(He,de)|0,u=u+Math.imul(He,Ce)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Ce)|0,v=v+Math.imul(Ge,Ee)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Ee)|0,S=S+Math.imul(je,qe)|0,v=v+Math.imul(Ze,ft)|0,u=u+Math.imul(Ze,yt)|0,u=u+Math.imul(Pe,ft)|0,S=S+Math.imul(Pe,yt)|0,v=v+Math.imul(_e,dt)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(Ae,dt)|0,S=S+Math.imul(Ae,ae)|0,v=v+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var Tt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(Re,ye),u=Math.imul(Re,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),v=v+Math.imul(fe,de)|0,u=u+Math.imul(fe,Ce)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Ce)|0,v=v+Math.imul(He,Ee)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Ee)|0,S=S+Math.imul(nt,qe)|0,v=v+Math.imul(Ge,ft)|0,u=u+Math.imul(Ge,yt)|0,u=u+Math.imul(je,ft)|0,S=S+Math.imul(je,yt)|0,v=v+Math.imul(Ze,dt)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,dt)|0,S=S+Math.imul(Pe,ae)|0,v=v+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(Ae,X)|0,S=S+Math.imul(Ae,he)|0,v=v+Math.imul($,Te)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Te)|0,S=S+Math.imul(se,Ne)|0;var zt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(zt>>>26)|0,zt&=67108863,v=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),v=v+Math.imul(Re,de)|0,u=u+Math.imul(Re,Ce)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Ce)|0,v=v+Math.imul(fe,Ee)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Ee)|0,S=S+Math.imul(oe,qe)|0,v=v+Math.imul(He,ft)|0,u=u+Math.imul(He,yt)|0,u=u+Math.imul(nt,ft)|0,S=S+Math.imul(nt,yt)|0,v=v+Math.imul(Ge,dt)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,dt)|0,S=S+Math.imul(je,ae)|0,v=v+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,v=v+Math.imul(_e,Te)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(Ae,Te)|0,S=S+Math.imul(Ae,Ne)|0,v=v+Math.imul($,gt)|0,u=u+Math.imul($,xt)|0,u=u+Math.imul(se,gt)|0,S=S+Math.imul(se,xt)|0;var At=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,v=Math.imul(ct,ye),u=Math.imul(ct,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),v=v+Math.imul(et,de)|0,u=u+Math.imul(et,Ce)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Ce)|0,v=v+Math.imul(Re,Ee)|0,u=u+Math.imul(Re,qe)|0,u=u+Math.imul(Le,Ee)|0,S=S+Math.imul(Le,qe)|0,v=v+Math.imul(fe,ft)|0,u=u+Math.imul(fe,yt)|0,u=u+Math.imul(oe,ft)|0,S=S+Math.imul(oe,yt)|0,v=v+Math.imul(He,dt)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,dt)|0,S=S+Math.imul(nt,ae)|0,v=v+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,v=v+Math.imul(Ze,Te)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Te)|0,S=S+Math.imul(Pe,Ne)|0,v=v+Math.imul(_e,gt)|0,u=u+Math.imul(_e,xt)|0,u=u+Math.imul(Ae,gt)|0,S=S+Math.imul(Ae,xt)|0,v=v+Math.imul($,wt)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,wt)|0,S=S+Math.imul(se,kt)|0;var Ht=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),v=v+Math.imul(ct,de)|0,u=u+Math.imul(ct,Ce)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Ce)|0,v=v+Math.imul(et,Ee)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Ee)|0,S=S+Math.imul(Ye,qe)|0,v=v+Math.imul(Re,ft)|0,u=u+Math.imul(Re,yt)|0,u=u+Math.imul(Le,ft)|0,S=S+Math.imul(Le,yt)|0,v=v+Math.imul(fe,dt)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,dt)|0,S=S+Math.imul(oe,ae)|0,v=v+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,v=v+Math.imul(Ge,Te)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Te)|0,S=S+Math.imul(je,Ne)|0,v=v+Math.imul(Ze,gt)|0,u=u+Math.imul(Ze,xt)|0,u=u+Math.imul(Pe,gt)|0,S=S+Math.imul(Pe,xt)|0,v=v+Math.imul(_e,wt)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(Ae,wt)|0,S=S+Math.imul(Ae,kt)|0,v=v+Math.imul($,Dt)|0,u=u+Math.imul($,Ot)|0,u=u+Math.imul(se,Dt)|0,S=S+Math.imul(se,Ot)|0;var rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(rn>>>26)|0,rn&=67108863,v=Math.imul(q,de),u=Math.imul(q,Ce),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Ce),v=v+Math.imul(ct,Ee)|0,u=u+Math.imul(ct,qe)|0,u=u+Math.imul(re,Ee)|0,S=S+Math.imul(re,qe)|0,v=v+Math.imul(et,ft)|0,u=u+Math.imul(et,yt)|0,u=u+Math.imul(Ye,ft)|0,S=S+Math.imul(Ye,yt)|0,v=v+Math.imul(Re,dt)|0,u=u+Math.imul(Re,ae)|0,u=u+Math.imul(Le,dt)|0,S=S+Math.imul(Le,ae)|0,v=v+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,v=v+Math.imul(He,Te)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Te)|0,S=S+Math.imul(nt,Ne)|0,v=v+Math.imul(Ge,gt)|0,u=u+Math.imul(Ge,xt)|0,u=u+Math.imul(je,gt)|0,S=S+Math.imul(je,xt)|0,v=v+Math.imul(Ze,wt)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,wt)|0,S=S+Math.imul(Pe,kt)|0,v=v+Math.imul(_e,Dt)|0,u=u+Math.imul(_e,Ot)|0,u=u+Math.imul(Ae,Dt)|0,S=S+Math.imul(Ae,Ot)|0;var on=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(on>>>26)|0,on&=67108863,v=Math.imul(q,Ee),u=Math.imul(q,qe),u=u+Math.imul(ue,Ee)|0,S=Math.imul(ue,qe),v=v+Math.imul(ct,ft)|0,u=u+Math.imul(ct,yt)|0,u=u+Math.imul(re,ft)|0,S=S+Math.imul(re,yt)|0,v=v+Math.imul(et,dt)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,dt)|0,S=S+Math.imul(Ye,ae)|0,v=v+Math.imul(Re,X)|0,u=u+Math.imul(Re,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,v=v+Math.imul(fe,Te)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Te)|0,S=S+Math.imul(oe,Ne)|0,v=v+Math.imul(He,gt)|0,u=u+Math.imul(He,xt)|0,u=u+Math.imul(nt,gt)|0,S=S+Math.imul(nt,xt)|0,v=v+Math.imul(Ge,wt)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,wt)|0,S=S+Math.imul(je,kt)|0,v=v+Math.imul(Ze,Dt)|0,u=u+Math.imul(Ze,Ot)|0,u=u+Math.imul(Pe,Dt)|0,S=S+Math.imul(Pe,Ot)|0;var Kt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(q,ft),u=Math.imul(q,yt),u=u+Math.imul(ue,ft)|0,S=Math.imul(ue,yt),v=v+Math.imul(ct,dt)|0,u=u+Math.imul(ct,ae)|0,u=u+Math.imul(re,dt)|0,S=S+Math.imul(re,ae)|0,v=v+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,v=v+Math.imul(Re,Te)|0,u=u+Math.imul(Re,Ne)|0,u=u+Math.imul(Le,Te)|0,S=S+Math.imul(Le,Ne)|0,v=v+Math.imul(fe,gt)|0,u=u+Math.imul(fe,xt)|0,u=u+Math.imul(oe,gt)|0,S=S+Math.imul(oe,xt)|0,v=v+Math.imul(He,wt)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,wt)|0,S=S+Math.imul(nt,kt)|0,v=v+Math.imul(Ge,Dt)|0,u=u+Math.imul(Ge,Ot)|0,u=u+Math.imul(je,Dt)|0,S=S+Math.imul(je,Ot)|0;var Tn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,v=Math.imul(q,dt),u=Math.imul(q,ae),u=u+Math.imul(ue,dt)|0,S=Math.imul(ue,ae),v=v+Math.imul(ct,X)|0,u=u+Math.imul(ct,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,v=v+Math.imul(et,Te)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Te)|0,S=S+Math.imul(Ye,Ne)|0,v=v+Math.imul(Re,gt)|0,u=u+Math.imul(Re,xt)|0,u=u+Math.imul(Le,gt)|0,S=S+Math.imul(Le,xt)|0,v=v+Math.imul(fe,wt)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,wt)|0,S=S+Math.imul(oe,kt)|0,v=v+Math.imul(He,Dt)|0,u=u+Math.imul(He,Ot)|0,u=u+Math.imul(nt,Dt)|0,S=S+Math.imul(nt,Ot)|0;var Rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),v=v+Math.imul(ct,Te)|0,u=u+Math.imul(ct,Ne)|0,u=u+Math.imul(re,Te)|0,S=S+Math.imul(re,Ne)|0,v=v+Math.imul(et,gt)|0,u=u+Math.imul(et,xt)|0,u=u+Math.imul(Ye,gt)|0,S=S+Math.imul(Ye,xt)|0,v=v+Math.imul(Re,wt)|0,u=u+Math.imul(Re,kt)|0,u=u+Math.imul(Le,wt)|0,S=S+Math.imul(Le,kt)|0,v=v+Math.imul(fe,Dt)|0,u=u+Math.imul(fe,Ot)|0,u=u+Math.imul(oe,Dt)|0,S=S+Math.imul(oe,Ot)|0;var En=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(q,Te),u=Math.imul(q,Ne),u=u+Math.imul(ue,Te)|0,S=Math.imul(ue,Ne),v=v+Math.imul(ct,gt)|0,u=u+Math.imul(ct,xt)|0,u=u+Math.imul(re,gt)|0,S=S+Math.imul(re,xt)|0,v=v+Math.imul(et,wt)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,wt)|0,S=S+Math.imul(Ye,kt)|0,v=v+Math.imul(Re,Dt)|0,u=u+Math.imul(Re,Ot)|0,u=u+Math.imul(Le,Dt)|0,S=S+Math.imul(Le,Ot)|0;var un=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,v=Math.imul(q,gt),u=Math.imul(q,xt),u=u+Math.imul(ue,gt)|0,S=Math.imul(ue,xt),v=v+Math.imul(ct,wt)|0,u=u+Math.imul(ct,kt)|0,u=u+Math.imul(re,wt)|0,S=S+Math.imul(re,kt)|0,v=v+Math.imul(et,Dt)|0,u=u+Math.imul(et,Ot)|0,u=u+Math.imul(Ye,Dt)|0,S=S+Math.imul(Ye,Ot)|0;var $t=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,v=Math.imul(q,wt),u=Math.imul(q,kt),u=u+Math.imul(ue,wt)|0,S=Math.imul(ue,kt),v=v+Math.imul(ct,Dt)|0,u=u+Math.imul(ct,Ot)|0,u=u+Math.imul(re,Dt)|0,S=S+Math.imul(re,Ot)|0;var Bt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,v=Math.imul(q,Dt),u=Math.imul(q,Ot),u=u+Math.imul(ue,Dt)|0,S=Math.imul(ue,Ot);var Mn=(N+v|0)+((u&8191)<<13)|0;return N=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,L[0]=pe,L[1]=De,L[2]=$e,L[3]=Qe,L[4]=Be,L[5]=Tt,L[6]=zt,L[7]=At,L[8]=Ht,L[9]=rn,L[10]=on,L[11]=Kt,L[12]=Tn,L[13]=Rn,L[14]=En,L[15]=un,L[16]=$t,L[17]=Bt,L[18]=Mn,N!==0&&(L[19]=N,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var L=R;R=0;for(var N=M&67108863,v=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=v;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;L=L+(se/67108864|0)|0,me=me+N|0,N=me&67108863,L=L+(me>>>26)|0,R+=L>>>26,L&=67108863}p.words[T]=N,M=L,L=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,L=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=L>>>26,this.words[R]=L&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=I(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var L=0;for(T=0;T<this.length;T++){var N=this.words[T]&R,v=(this.words[T]|0)-N<<p;this.words[T]=v|L,L=N>>>26-p}L&&(this.words[T]=L,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,L=Math.min((a-T)/26,this.length),N=67108863^67108863>>>T<<T,v=M;if(R-=L,R=Math.max(0,R),v){for(var u=0;u<L;u++)v.words[u]=this.words[u];v.length=L}if(L!==0)if(this.length>L)for(this.length-=L,u=0;u<this.length;u++)this.words[u]=this.words[u+L];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&N}return v&&S!==0&&(v.words[v.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var L,N=0;for(T=0;T<a.length;T++){L=(this.words[T+M]|0)+N;var v=(a.words[T]|0)*p;L-=v&67108863,N=(L>>26)-(v/67108864|0),this.words[T+M]=L&67108863}for(;T<this.length-M;T++)L=(this.words[T+M]|0)+N,N=L>>26,this.words[T+M]=L&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,T=0;T<this.length;T++)L=-(this.words[T]|0)+N,N=L>>26,this.words[T]=L&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,L=T.words[T.length-1]|0,N=this._countBits(L);M=26-N,M!==0&&(T=T.ushln(M),R.iushln(M),L=T.words[T.length-1]|0);var v=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=v+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,v);W.negative===0&&(R=W,u&&(u.words[v]=1));for(var $=v-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/L|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,L;return this.negative!==0&&a.negative===0?(L=this.neg().divmod(a,p),p!=="mod"&&(R=L.div.neg()),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(L=this.divmod(a.neg(),p),p!=="mod"&&(R=L.div.neg()),{div:R,mod:L.mod}):(this.negative&a.negative)!==0?(L=this.neg().divmod(a.neg(),p),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:L.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),L=M.cmp(R);return L<0||T===1&&L===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=new s(0),N=new s(1),v=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++v;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(L.isOdd()||N.isOdd())&&(L.iadd(u),N.isub(S)),L.iushrn(1),N.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(L),T.isub(N)):(M.isub(p),L.isub(R),N.isub(T))}return{a:L,b:N,gcd:M.iushln(v)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var N=0,v=1;(p.words[0]&v)===0&&N<26;++N,v<<=1);if(N>0)for(p.iushrn(N);N-- >0;)R.isOdd()&&R.iadd(L),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(L),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var L=p;p=M,M=L}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,L=M;T!==0&&L<this.length;L++){var N=this.words[L]|0;N+=T,T=N>>>26,N&=67108863,this.words[L]=N}return T!==0&&(this.words[L]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var L=a.words[9];for(p.words[p.length++]=L&M,T=10;T<a.length;T++){var N=a.words[T]|0;a.words[T-10]=(N&M)<<4|L>>>22,L=N}L>>>=22,a.words[T-10]=L,L===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var L=new s(1).toRed(this),N=L.redNeg(),v=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,v).cmp(N)!==0;)u.redIAdd(N);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(L)!==0;){for(var me=$,_e=0;me.cmp(L)!==0;_e++)me=me.redSqr();n(_e<se);var Ae=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(Ae),S=Ae.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var L=R[0],N=0,v=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(L!==R[0]&&(L=this.sqr(L)),$===0&&N===0){v=0;continue}N<<=1,N|=$,v++,!(v!==M&&(T!==0||W!==0))&&(L=this.mul(L,R[N]),v=0,N=0)}u=26}return L},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,gX)})(__)),__.exports}var vX=yX();const Eh=Xa(vX);var rE,gN;function wX(){if(gN)return rE;gN=1;var r=YA().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),h=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function _(P){if((Array.isArray(P)||P instanceof Uint8Array)&&(P=r.from(P)),!r.isBuffer(P))throw new TypeError("Expected Buffer");if(P.length===0)return"";for(var I=0,C=0,D=0,k=P.length;D!==k&&P[D]===0;)D++,I++;for(var F=(k-D)*y+1>>>0,Q=new Uint8Array(F);D!==k;){for(var G=P[D],Y=0,ee=F-1;(G!==0||Y<C)&&ee!==-1;ee--,Y++)G+=256*Q[ee]>>>0,Q[ee]=G%c>>>0,G=G/c>>>0;if(G!==0)throw new Error("Non-zero carry");C=Y,D++}for(var te=F-C;te!==F&&Q[te]===0;)te++;for(var U=d.repeat(I);te<F;++te)U+=t.charAt(Q[te]);return U}function x(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return r.alloc(0);for(var I=0,C=0,D=0;P[I]===d;)C++,I++;for(var k=(P.length-I)*h+1>>>0,F=new Uint8Array(k);I<P.length;){var Q=P.charCodeAt(I);if(Q>255)return;var G=n[Q];if(G===255)return;for(var Y=0,ee=k-1;(G!==0||Y<D)&&ee!==-1;ee--,Y++)G+=c*F[ee]>>>0,F[ee]=G%256>>>0,G=G/256>>>0;if(G!==0)throw new Error("Non-zero carry");D=Y,I++}for(var te=k-D;te!==k&&F[te]===0;)te++;var U=r.allocUnsafe(C+(k-te));U.fill(0,0,C);for(var V=C;te!==k;)U[V++]=F[te++];return U}function A(P){var I=x(P);if(I)return I;throw new Error("Non-base"+c+" character")}return{encode:_,decodeUnsafe:x,decode:A}}return rE=e,rE}var iE,yN;function _X(){if(yN)return iE;yN=1;var r=wX(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return iE=r(e),iE}var xX=_X();const rR=Xa(xX);var iw={exports:{}},vN;function SX(){if(vN)return iw.exports;vN=1;const r=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,s=new RegExp("^"+i.source),o=new RegExp(i.source+n.source,"gu"),l=new RegExp("\\d+"+n.source,"gu"),c=(_,x,A)=>{let P=!1,I=!1,C=!1;for(let D=0;D<_.length;D++){const k=_[D];P&&r.test(k)?(_=_.slice(0,D)+"-"+_.slice(D),P=!1,C=I,I=!0,D++):I&&C&&e.test(k)?(_=_.slice(0,D-1)+"-"+_.slice(D-1),C=I,I=!1,P=!0):(P=x(k)===k&&A(k)!==k,C=I,I=A(k)===k&&x(k)!==k)}return _},d=(_,x)=>(t.lastIndex=0,_.replace(t,A=>x(A))),h=(_,x)=>(o.lastIndex=0,l.lastIndex=0,_.replace(o,(A,P)=>x(P)).replace(l,A=>x(A))),y=(_,x)=>{if(!(typeof _=="string"||Array.isArray(_)))throw new TypeError("Expected the input to be `string | string[]`");if(x={pascalCase:!1,preserveConsecutiveUppercase:!1,...x},Array.isArray(_)?_=_.map(C=>C.trim()).filter(C=>C.length).join("-"):_=_.trim(),_.length===0)return"";const A=x.locale===!1?C=>C.toLowerCase():C=>C.toLocaleLowerCase(x.locale),P=x.locale===!1?C=>C.toUpperCase():C=>C.toLocaleUpperCase(x.locale);return _.length===1?x.pascalCase?P(_):A(_):(_!==A(_)&&(_=c(_,A,P)),_=_.replace(s,""),x.preserveConsecutiveUppercase?_=d(_,A):_=A(_),x.pascalCase&&(_=P(_.charAt(0))+_.slice(1)),h(_,P))};return iw.exports=y,iw.exports.default=y,iw.exports}var MX=SX();const EX=Xa(MX);var Km={},ln={},wN;function _N(){if(wN)return ln;wN=1;class r{constructor(N,v){if(!Number.isInteger(N))throw new TypeError("span must be an integer");this.span=N,this.property=v}makeDestinationObject(){return{}}decode(N,v){throw new Error("Layout is abstract")}encode(N,v,u){throw new Error("Layout is abstract")}getSpan(N,v){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(N){const v=Object.create(this.constructor.prototype);return Object.assign(v,this),v.property=N,v}fromArray(N){}}ln.Layout=r;function e(L,N){return N.property?L+"["+N.property+"]":L}ln.nameWithProperty=e;function t(L,N){if(typeof L!="function")throw new TypeError("Class must be constructor");if(L.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(N&&N instanceof r))throw new TypeError("layout must be a Layout");if(N.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");L.layout_=N,N.boundConstructor_=L,N.makeDestinationObject=(()=>new L),Object.defineProperty(L.prototype,"encode",{value:function(v,u){return N.encode(this,v,u)},writable:!0}),Object.defineProperty(L,"decode",{value:function(v,u){return N.decode(v,u)},writable:!0})}ln.bindConstructorLayout=t;class n extends r{isCount(){throw new Error("ExternalLayout is abstract")}}class i extends n{constructor(N,v){if(N===void 0&&(N=1),!Number.isInteger(N)||0>=N)throw new TypeError("elementSpan must be a (positive) integer");super(-1,v),this.elementSpan=N}isCount(){return!0}decode(N,v){v===void 0&&(v=0);const u=N.length-v;return Math.floor(u/this.elementSpan)}encode(N,v,u){return 0}}class s extends n{constructor(N,v,u){if(!(N instanceof r))throw new TypeError("layout must be a Layout");if(v===void 0)v=0;else if(!Number.isInteger(v))throw new TypeError("offset must be integer or undefined");super(N.span,u||N.property),this.layout=N,this.offset=v}isCount(){return this.layout instanceof o||this.layout instanceof l}decode(N,v){return v===void 0&&(v=0),this.layout.decode(N,v+this.offset)}encode(N,v,u){return u===void 0&&(u=0),this.layout.encode(N,v,u+this.offset)}}class o extends r{constructor(N,v){if(super(N,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,v){return v===void 0&&(v=0),N.readUIntLE(v,this.span)}encode(N,v,u){return u===void 0&&(u=0),v.writeUIntLE(N,u,this.span),this.span}}class l extends r{constructor(N,v){if(super(N,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,v){return v===void 0&&(v=0),N.readUIntBE(v,this.span)}encode(N,v,u){return u===void 0&&(u=0),v.writeUIntBE(N,u,this.span),this.span}}class c extends r{constructor(N,v){if(super(N,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,v){return v===void 0&&(v=0),N.readIntLE(v,this.span)}encode(N,v,u){return u===void 0&&(u=0),v.writeIntLE(N,u,this.span),this.span}}class d extends r{constructor(N,v){if(super(N,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,v){return v===void 0&&(v=0),N.readIntBE(v,this.span)}encode(N,v,u){return u===void 0&&(u=0),v.writeIntBE(N,u,this.span),this.span}}const h=Math.pow(2,32);function y(L){const N=Math.floor(L/h),v=L-N*h;return{hi32:N,lo32:v}}function _(L,N){return L*h+N}class x extends r{constructor(N){super(8,N)}decode(N,v){v===void 0&&(v=0);const u=N.readUInt32LE(v),S=N.readUInt32LE(v+4);return _(S,u)}encode(N,v,u){u===void 0&&(u=0);const S=y(N);return v.writeUInt32LE(S.lo32,u),v.writeUInt32LE(S.hi32,u+4),8}}class A extends r{constructor(N){super(8,N)}decode(N,v){v===void 0&&(v=0);const u=N.readUInt32BE(v),S=N.readUInt32BE(v+4);return _(u,S)}encode(N,v,u){u===void 0&&(u=0);const S=y(N);return v.writeUInt32BE(S.hi32,u),v.writeUInt32BE(S.lo32,u+4),8}}class P extends r{constructor(N){super(8,N)}decode(N,v){v===void 0&&(v=0);const u=N.readUInt32LE(v),S=N.readInt32LE(v+4);return _(S,u)}encode(N,v,u){u===void 0&&(u=0);const S=y(N);return v.writeUInt32LE(S.lo32,u),v.writeInt32LE(S.hi32,u+4),8}}class I extends r{constructor(N){super(8,N)}decode(N,v){v===void 0&&(v=0);const u=N.readInt32BE(v),S=N.readUInt32BE(v+4);return _(u,S)}encode(N,v,u){u===void 0&&(u=0);const S=y(N);return v.writeInt32BE(S.hi32,u),v.writeUInt32BE(S.lo32,u+4),8}}class C extends r{constructor(N){super(4,N)}decode(N,v){return v===void 0&&(v=0),N.readFloatLE(v)}encode(N,v,u){return u===void 0&&(u=0),v.writeFloatLE(N,u),4}}class D extends r{constructor(N){super(4,N)}decode(N,v){return v===void 0&&(v=0),N.readFloatBE(v)}encode(N,v,u){return u===void 0&&(u=0),v.writeFloatBE(N,u),4}}class k extends r{constructor(N){super(8,N)}decode(N,v){return v===void 0&&(v=0),N.readDoubleLE(v)}encode(N,v,u){return u===void 0&&(u=0),v.writeDoubleLE(N,u),8}}class F extends r{constructor(N){super(8,N)}decode(N,v){return v===void 0&&(v=0),N.readDoubleBE(v)}encode(N,v,u){return u===void 0&&(u=0),v.writeDoubleBE(N,u),8}}class Q extends r{constructor(N,v,u){if(!(N instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(v instanceof n&&v.isCount()||Number.isInteger(v)&&0<=v))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let S=-1;!(v instanceof n)&&0<N.span&&(S=v*N.span),super(S,u),this.elementLayout=N,this.count=v}getSpan(N,v){if(0<=this.span)return this.span;v===void 0&&(v=0);let u=0,S=this.count;if(S instanceof n&&(S=S.decode(N,v)),0<this.elementLayout.span)u=S*this.elementLayout.span;else{let W=0;for(;W<S;)u+=this.elementLayout.getSpan(N,v+u),++W}return u}decode(N,v){v===void 0&&(v=0);const u=[];let S=0,W=this.count;for(W instanceof n&&(W=W.decode(N,v));S<W;)u.push(this.elementLayout.decode(N,v)),v+=this.elementLayout.getSpan(N,v),S+=1;return u}encode(N,v,u){u===void 0&&(u=0);const S=this.elementLayout,W=N.reduce(($,se)=>$+S.encode(se,v,u+$),0);return this.count instanceof n&&this.count.encode(N.length,v,u),W}}class G extends r{constructor(N,v,u){if(!(Array.isArray(N)&&N.reduce((W,$)=>W&&$ instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof v=="boolean"&&u===void 0&&(u=v,v=void 0);for(const W of N)if(0>W.span&&W.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let S=-1;try{S=N.reduce((W,$)=>W+$.getSpan(),0)}catch{}super(S,v),this.fields=N,this.decodePrefixes=!!u}getSpan(N,v){if(0<=this.span)return this.span;v===void 0&&(v=0);let u=0;try{u=this.fields.reduce((S,W)=>{const $=W.getSpan(N,v);return v+=$,S+$},0)}catch{throw new RangeError("indeterminate span")}return u}decode(N,v){v===void 0&&(v=0);const u=this.makeDestinationObject();for(const S of this.fields)if(S.property!==void 0&&(u[S.property]=S.decode(N,v)),v+=S.getSpan(N,v),this.decodePrefixes&&N.length===v)break;return u}encode(N,v,u){u===void 0&&(u=0);const S=u;let W=0,$=0;for(const se of this.fields){let me=se.span;if($=0<me?me:0,se.property!==void 0){const _e=N[se.property];_e!==void 0&&($=se.encode(_e,v,u),0>me&&(me=se.getSpan(v,u)))}W=u,u+=me}return W+$-S}fromArray(N){const v=this.makeDestinationObject();for(const u of this.fields)u.property!==void 0&&0<N.length&&(v[u.property]=N.shift());return v}layoutFor(N){if(typeof N!="string")throw new TypeError("property must be string");for(const v of this.fields)if(v.property===N)return v}offsetOf(N){if(typeof N!="string")throw new TypeError("property must be string");let v=0;for(const u of this.fields){if(u.property===N)return v;0>u.span?v=-1:0<=v&&(v+=u.span)}}}class Y{constructor(N){this.property=N}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class ee extends Y{constructor(N,v){if(!(N instanceof n&&N.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(v||N.property||"variant"),this.layout=N}decode(N,v){return this.layout.decode(N,v)}encode(N,v,u){return this.layout.encode(N,v,u)}}class te extends r{constructor(N,v,u){const S=N instanceof o||N instanceof l;if(S)N=new ee(new s(N));else if(N instanceof n&&N.isCount())N=new ee(N);else if(!(N instanceof Y))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(v===void 0&&(v=null),!(v===null||v instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(v!==null){if(0>v.span)throw new Error("defaultLayout must have constant span");v.property===void 0&&(v=v.replicate("content"))}let W=-1;v&&(W=v.span,0<=W&&S&&(W+=N.layout.span)),super(W,u),this.discriminator=N,this.usesPrefixDiscriminator=S,this.defaultLayout=v,this.registry={};let $=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(se){return $(se)},this.configGetSourceVariant=function(se){$=se.bind(this)}}getSpan(N,v){if(0<=this.span)return this.span;v===void 0&&(v=0);const u=this.getVariant(N,v);if(!u)throw new Error("unable to determine span for unrecognized variant");return u.getSpan(N,v)}defaultGetSourceVariant(N){if(N.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&N.hasOwnProperty(this.defaultLayout.property))return;const v=this.registry[N[this.discriminator.property]];if(v&&(!v.layout||N.hasOwnProperty(v.property)))return v}else for(const v in this.registry){const u=this.registry[v];if(N.hasOwnProperty(u.property))return u}throw new Error("unable to infer src variant")}decode(N,v){v===void 0&&(v=0);let u;const S=this.discriminator,W=S.decode(N,v);let $=this.registry[W];if($===void 0){let se=0;$=this.defaultLayout,this.usesPrefixDiscriminator&&(se=S.layout.span),u=this.makeDestinationObject(),u[S.property]=W,u[$.property]=this.defaultLayout.decode(N,v+se)}else u=$.decode(N,v);return u}encode(N,v,u){u===void 0&&(u=0);const S=this.getSourceVariant(N);if(S===void 0){const W=this.discriminator,$=this.defaultLayout;let se=0;return this.usesPrefixDiscriminator&&(se=W.layout.span),W.encode(N[W.property],v,u),se+$.encode(N[$.property],v,u+se)}return S.encode(N,v,u)}addVariant(N,v,u){const S=new U(this,N,v,u);return this.registry[N]=S,S}getVariant(N,v){let u=N;return qn.isBuffer(N)&&(v===void 0&&(v=0),u=this.discriminator.decode(N,v)),this.registry[u]}}class U extends r{constructor(N,v,u,S){if(!(N instanceof te))throw new TypeError("union must be a Union");if(!Number.isInteger(v)||0>v)throw new TypeError("variant must be a (non-negative) integer");if(typeof u=="string"&&S===void 0&&(S=u,u=null),u){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(N.defaultLayout!==null&&0<=u.span&&u.span>N.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof S!="string")throw new TypeError("variant must have a String property")}let W=N.span;0>N.span&&(W=u?u.span:0,0<=W&&N.usesPrefixDiscriminator&&(W+=N.discriminator.layout.span)),super(W,S),this.union=N,this.variant=v,this.layout=u||null}getSpan(N,v){if(0<=this.span)return this.span;v===void 0&&(v=0);let u=0;return this.union.usesPrefixDiscriminator&&(u=this.union.discriminator.layout.span),u+this.layout.getSpan(N,v+u)}decode(N,v){const u=this.makeDestinationObject();if(v===void 0&&(v=0),this!==this.union.getVariant(N,v))throw new Error("variant mismatch");let S=0;return this.union.usesPrefixDiscriminator&&(S=this.union.discriminator.layout.span),this.layout?u[this.property]=this.layout.decode(N,v+S):this.property?u[this.property]=!0:this.union.usesPrefixDiscriminator&&(u[this.union.discriminator.property]=this.variant),u}encode(N,v,u){u===void 0&&(u=0);let S=0;if(this.union.usesPrefixDiscriminator&&(S=this.union.discriminator.layout.span),this.layout&&!N.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,v,u);let W=S;if(this.layout&&(this.layout.encode(N[this.property],v,u+S),W+=this.layout.getSpan(v,u+S),0<=this.union.span&&W>this.union.span))throw new Error("encoded variant overruns containing union");return W}fromArray(N){if(this.layout)return this.layout.fromArray(N)}}function V(L){return 0>L&&(L+=4294967296),L}class K extends r{constructor(N,v,u){if(!(N instanceof o||N instanceof l))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof v=="string"&&u===void 0&&(u=v,v=void 0),4<N.span)throw new RangeError("word cannot exceed 32 bits");super(N.span,u),this.word=N,this.msb=!!v,this.fields=[];let S=0;this._packedSetValue=function(W){return S=V(W),this},this._packedGetValue=function(){return S}}decode(N,v){const u=this.makeDestinationObject();v===void 0&&(v=0);const S=this.word.decode(N,v);this._packedSetValue(S);for(const W of this.fields)W.property!==void 0&&(u[W.property]=W.decode(S));return u}encode(N,v,u){u===void 0&&(u=0);const S=this.word.decode(v,u);this._packedSetValue(S);for(const W of this.fields)if(W.property!==void 0){const $=N[W.property];$!==void 0&&W.encode($)}return this.word.encode(this._packedGetValue(),v,u)}addField(N,v){const u=new E(this,N,v);return this.fields.push(u),u}addBoolean(N){const v=new a(this,N);return this.fields.push(v),v}fieldFor(N){if(typeof N!="string")throw new TypeError("property must be string");for(const v of this.fields)if(v.property===N)return v}}class E{constructor(N,v,u){if(!(N instanceof K))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(v)||0>=v)throw new TypeError("bits must be positive integer");const S=8*N.span,W=N.fields.reduce(($,se)=>$+se.bits,0);if(v+W>S)throw new Error("bits too long for span remainder ("+(S-W)+" of "+S+" remain)");this.container=N,this.bits=v,this.valueMask=(1<<v)-1,v===32&&(this.valueMask=4294967295),this.start=W,this.container.msb&&(this.start=S-W-v),this.wordMask=V(this.valueMask<<this.start),this.property=u}decode(){const N=this.container._packedGetValue();return V(N&this.wordMask)>>>this.start}encode(N){if(!Number.isInteger(N)||N!==V(N&this.valueMask))throw new TypeError(e("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const v=this.container._packedGetValue(),u=V(N<<this.start);this.container._packedSetValue(V(v&~this.wordMask)|u)}}class a extends E{constructor(N,v){super(N,1,v)}decode(N,v){return!!E.prototype.decode.call(this,N,v)}encode(N){return typeof N=="boolean"&&(N=+N),E.prototype.encode.call(this,N)}}class p extends r{constructor(N,v){if(!(N instanceof n&&N.isCount()||Number.isInteger(N)&&0<=N))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let u=-1;N instanceof n||(u=N),super(u,v),this.length=N}getSpan(N,v){let u=this.span;return 0>u&&(u=this.length.decode(N,v)),u}decode(N,v){v===void 0&&(v=0);let u=this.span;return 0>u&&(u=this.length.decode(N,v)),N.slice(v,v+u)}encode(N,v,u){let S=this.length;if(this.length instanceof n&&(S=N.length),!(qn.isBuffer(N)&&S===N.length))throw new TypeError(e("Blob.encode",this)+" requires (length "+S+") Buffer as src");if(u+S>v.length)throw new RangeError("encoding overruns Buffer");return v.write(N.toString("hex"),u,S,"hex"),this.length instanceof n&&this.length.encode(S,v,u),S}}class M extends r{constructor(N){super(-1,N)}getSpan(N,v){if(!qn.isBuffer(N))throw new TypeError("b must be a Buffer");v===void 0&&(v=0);let u=v;for(;u<N.length&&N[u]!==0;)u+=1;return 1+u-v}decode(N,v,u){v===void 0&&(v=0);let S=this.getSpan(N,v);return N.slice(v,v+S-1).toString("utf-8")}encode(N,v,u){u===void 0&&(u=0),typeof N!="string"&&(N=N.toString());const S=new qn(N,"utf8"),W=S.length;if(u+W>v.length)throw new RangeError("encoding overruns Buffer");return S.copy(v,u),v[u+W]=0,W+1}}class R extends r{constructor(N,v){if(typeof N=="string"&&v===void 0&&(v=N,N=void 0),N===void 0)N=-1;else if(!Number.isInteger(N))throw new TypeError("maxSpan must be an integer");super(-1,v),this.maxSpan=N}getSpan(N,v){if(!qn.isBuffer(N))throw new TypeError("b must be a Buffer");return v===void 0&&(v=0),N.length-v}decode(N,v,u){v===void 0&&(v=0);let S=this.getSpan(N,v);if(0<=this.maxSpan&&this.maxSpan<S)throw new RangeError("text length exceeds maxSpan");return N.slice(v,v+S).toString("utf-8")}encode(N,v,u){u===void 0&&(u=0),typeof N!="string"&&(N=N.toString());const S=new qn(N,"utf8"),W=S.length;if(0<=this.maxSpan&&this.maxSpan<W)throw new RangeError("text length exceeds maxSpan");if(u+W>v.length)throw new RangeError("encoding overruns Buffer");return S.copy(v,u),W}}class T extends r{constructor(N,v){super(0,v),this.value=N}decode(N,v,u){return this.value}encode(N,v,u){return 0}}return ln.ExternalLayout=n,ln.GreedyCount=i,ln.OffsetLayout=s,ln.UInt=o,ln.UIntBE=l,ln.Int=c,ln.IntBE=d,ln.Float=C,ln.FloatBE=D,ln.Double=k,ln.DoubleBE=F,ln.Sequence=Q,ln.Structure=G,ln.UnionDiscriminator=Y,ln.UnionLayoutDiscriminator=ee,ln.Union=te,ln.VariantLayout=U,ln.BitStructure=K,ln.BitField=E,ln.Boolean=a,ln.Blob=p,ln.CString=M,ln.UTF8=R,ln.Constant=T,ln.greedy=((L,N)=>new i(L,N)),ln.offset=((L,N,v)=>new s(L,N,v)),ln.u8=(L=>new o(1,L)),ln.u16=(L=>new o(2,L)),ln.u24=(L=>new o(3,L)),ln.u32=(L=>new o(4,L)),ln.u40=(L=>new o(5,L)),ln.u48=(L=>new o(6,L)),ln.nu64=(L=>new x(L)),ln.u16be=(L=>new l(2,L)),ln.u24be=(L=>new l(3,L)),ln.u32be=(L=>new l(4,L)),ln.u40be=(L=>new l(5,L)),ln.u48be=(L=>new l(6,L)),ln.nu64be=(L=>new A(L)),ln.s8=(L=>new c(1,L)),ln.s16=(L=>new c(2,L)),ln.s24=(L=>new c(3,L)),ln.s32=(L=>new c(4,L)),ln.s40=(L=>new c(5,L)),ln.s48=(L=>new c(6,L)),ln.ns64=(L=>new P(L)),ln.s16be=(L=>new d(2,L)),ln.s24be=(L=>new d(3,L)),ln.s32be=(L=>new d(4,L)),ln.s40be=(L=>new d(5,L)),ln.s48be=(L=>new d(6,L)),ln.ns64be=(L=>new I(L)),ln.f32=(L=>new C(L)),ln.f32be=(L=>new D(L)),ln.f64=(L=>new k(L)),ln.f64be=(L=>new F(L)),ln.struct=((L,N,v)=>new G(L,N,v)),ln.bits=((L,N,v)=>new K(L,N,v)),ln.seq=((L,N,v)=>new Q(L,N,v)),ln.union=((L,N,v)=>new te(L,N,v)),ln.unionLayoutDiscriminator=((L,N)=>new ee(L,N)),ln.blob=((L,N)=>new p(L,N)),ln.cstr=(L=>new M(L)),ln.utf8=((L,N)=>new R(L,N)),ln.const=((L,N)=>new T(L,N)),ln}var x_={exports:{}},bX=x_.exports,xN;function AX(){return xN||(xN=1,(function(r){(function(e,t){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function i(E,a){E.super_=a;var p=function(){};p.prototype=a.prototype,E.prototype=new p,E.prototype.constructor=E}function s(E,a,p){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(p=a,a=10),this._init(E||0,a||10,p||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=I0().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,p){return a.cmp(p)>0?a:p},s.min=function(a,p){return a.cmp(p)<0?a:p},s.prototype._init=function(a,p,M){if(typeof a=="number")return this._initNumber(a,p,M);if(typeof a=="object")return this._initArray(a,p,M);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),a=a.toString().replace(/\s+/g,"");var R=0;a[0]==="-"&&(R++,this.negative=1),R<a.length&&(p===16?this._parseHex(a,R,M):(this._parseBase(a,p,R),M==="le"&&this._initArray(this.toArray(),p,M)))},s.prototype._initNumber=function(a,p,M){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),p,M)},s.prototype._initArray=function(a,p,M){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,L,N=0;if(M==="be")for(R=a.length-1,T=0;R>=0;R-=3)L=a[R]|a[R-1]<<8|a[R-2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);else if(M==="le")for(R=0,T=0;R<a.length;R+=3)L=a[R]|a[R+1]<<8|a[R+2]<<16,this.words[T]|=L<<N&67108863,this.words[T+1]=L>>>26-N&67108863,N+=24,N>=26&&(N-=26,T++);return this._strip()};function l(E,a){var p=E.charCodeAt(a);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+E)}function c(E,a,p){var M=l(E,p);return p-1>=a&&(M|=l(E,p-1)<<4),M}s.prototype._parseHex=function(a,p,M){this.length=Math.ceil((a.length-p)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,L=0,N;if(M==="be")for(R=a.length-1;R>=p;R-=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8;else{var v=a.length-p;for(R=v%2===0?p+1:p;R<a.length;R+=2)N=c(a,p,R)<<T,this.words[L]|=N&67108863,T>=18?(T-=18,L+=1,this.words[L]|=N>>>26):T+=8}this._strip()};function d(E,a,p,M){for(var R=0,T=0,L=Math.min(E.length,p),N=a;N<L;N++){var v=E.charCodeAt(N)-48;R*=M,v>=49?T=v-49+10:v>=17?T=v-17+10:T=v,n(v>=0&&T<M,"Invalid character"),R+=T}return R}s.prototype._parseBase=function(a,p,M){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=p)R++;R--,T=T/p|0;for(var L=a.length-M,N=L%R,v=Math.min(L,L-N)+M,u=0,S=M;S<v;S+=R)u=d(a,S,S+R,p),this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(N!==0){var W=1;for(u=d(a,S,a.length,p),S=0;S<N;S++)W*=p;this.imuln(W),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var p=0;p<this.length;p++)a.words[p]=this.words[p];a.length=this.length,a.negative=this.negative,a.red=this.red};function h(E,a){E.words=a.words,E.length=a.length,E.negative=a.negative,E.red=a.red}if(s.prototype._move=function(a){h(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=y}catch{s.prototype.inspect=y}else s.prototype.inspect=y;function y(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,p){a=a||10,p=p|0||1;var M;if(a===16||a==="hex"){M="";for(var R=0,T=0,L=0;L<this.length;L++){var N=this.words[L],v=((N<<R|T)&16777215).toString(16);T=N>>>24-R&16777215,R+=2,R>=26&&(R-=26,L--),T!==0||L!==this.length-1?M=_[6-v.length]+v+M:M=v+M}for(T!==0&&(M=T.toString(16)+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(a===(a|0)&&a>=2&&a<=36){var u=x[a],S=A[a];M="";var W=this.clone();for(W.negative=0;!W.isZero();){var $=W.modrn(S).toString(a);W=W.idivn(S),W.isZero()?M=$+M:M=_[u-$.length]+$+M}for(this.isZero()&&(M="0"+M);M.length%p!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,p){return this.toArrayLike(o,a,p)}),s.prototype.toArray=function(a,p){return this.toArrayLike(Array,a,p)};var P=function(a,p){return a.allocUnsafe?a.allocUnsafe(p):new a(p)};s.prototype.toArrayLike=function(a,p,M){this._strip();var R=this.byteLength(),T=M||Math.max(1,R);n(R<=T,"byte array longer than desired length"),n(T>0,"Requested array length <= 0");var L=P(a,T),N=p==="le"?"LE":"BE";return this["_toArrayLike"+N](L,R),L},s.prototype._toArrayLikeLE=function(a,p){for(var M=0,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M++]=N&255,M<a.length&&(a[M++]=N>>8&255),M<a.length&&(a[M++]=N>>16&255),L===6?(M<a.length&&(a[M++]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M<a.length)for(a[M++]=R;M<a.length;)a[M++]=0},s.prototype._toArrayLikeBE=function(a,p){for(var M=a.length-1,R=0,T=0,L=0;T<this.length;T++){var N=this.words[T]<<L|R;a[M--]=N&255,M>=0&&(a[M--]=N>>8&255),M>=0&&(a[M--]=N>>16&255),L===6?(M>=0&&(a[M--]=N>>24&255),R=0,L=0):(R=N>>>24,L+=2)}if(M>=0)for(a[M--]=R;M>=0;)a[M--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var p=a,M=0;return p>=4096&&(M+=13,p>>>=13),p>=64&&(M+=7,p>>>=7),p>=8&&(M+=4,p>>>=4),p>=2&&(M+=2,p>>>=2),M+p},s.prototype._zeroBits=function(a){if(a===0)return 26;var p=a,M=0;return(p&8191)===0&&(M+=13,p>>>=13),(p&127)===0&&(M+=7,p>>>=7),(p&15)===0&&(M+=4,p>>>=4),(p&3)===0&&(M+=2,p>>>=2),(p&1)===0&&M++,M},s.prototype.bitLength=function(){var a=this.words[this.length-1],p=this._countBits(a);return(this.length-1)*26+p};function I(E){for(var a=new Array(E.bitLength()),p=0;p<a.length;p++){var M=p/26|0,R=p%26;a[p]=E.words[M]>>>R&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,p=0;p<this.length;p++){var M=this._zeroBits(this.words[p]);if(a+=M,M!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var p=0;p<a.length;p++)this.words[p]=this.words[p]|a.words[p];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var p;this.length>a.length?p=a:p=this;for(var M=0;M<p.length;M++)this.words[M]=this.words[M]&a.words[M];return this.length=p.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var p,M;this.length>a.length?(p=this,M=a):(p=a,M=this);for(var R=0;R<M.length;R++)this.words[R]=p.words[R]^M.words[R];if(this!==p)for(;R<p.length;R++)this.words[R]=p.words[R];return this.length=p.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var p=Math.ceil(a/26)|0,M=a%26;this._expand(p),M>0&&p--;for(var R=0;R<p;R++)this.words[R]=~this.words[R]&67108863;return M>0&&(this.words[R]=~this.words[R]&67108863>>26-M),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,p){n(typeof a=="number"&&a>=0);var M=a/26|0,R=a%26;return this._expand(M+1),p?this.words[M]=this.words[M]|1<<R:this.words[M]=this.words[M]&~(1<<R),this._strip()},s.prototype.iadd=function(a){var p;if(this.negative!==0&&a.negative===0)return this.negative=0,p=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,p=this.isub(a),a.negative=1,p._normSign();var M,R;this.length>a.length?(M=this,R=a):(M=a,R=this);for(var T=0,L=0;L<R.length;L++)p=(M.words[L]|0)+(R.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;for(;T!==0&&L<M.length;L++)p=(M.words[L]|0)+T,this.words[L]=p&67108863,T=p>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;L<M.length;L++)this.words[L]=M.words[L];return this},s.prototype.add=function(a){var p;return a.negative!==0&&this.negative===0?(a.negative=0,p=this.sub(a),a.negative^=1,p):a.negative===0&&this.negative!==0?(this.negative=0,p=a.sub(this),this.negative=1,p):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var p=this.iadd(a);return a.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var M=this.cmp(a);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;M>0?(R=this,T=a):(R=a,T=this);for(var L=0,N=0;N<T.length;N++)p=(R.words[N]|0)-(T.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;for(;L!==0&&N<R.length;N++)p=(R.words[N]|0)+L,L=p>>26,this.words[N]=p&67108863;if(L===0&&N<R.length&&R!==this)for(;N<R.length;N++)this.words[N]=R.words[N];return this.length=Math.max(this.length,N),R!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function C(E,a,p){p.negative=a.negative^E.negative;var M=E.length+a.length|0;p.length=M,M=M-1|0;var R=E.words[0]|0,T=a.words[0]|0,L=R*T,N=L&67108863,v=L/67108864|0;p.words[0]=N;for(var u=1;u<M;u++){for(var S=v>>>26,W=v&67108863,$=Math.min(u,a.length-1),se=Math.max(0,u-E.length+1);se<=$;se++){var me=u-se|0;R=E.words[me]|0,T=a.words[se]|0,L=R*T+W,S+=L/67108864|0,W=L&67108863}p.words[u]=W|0,v=S|0}return v!==0?p.words[u]=v|0:p.length--,p._strip()}var D=function(a,p,M){var R=a.words,T=p.words,L=M.words,N=0,v,u,S,W=R[0]|0,$=W&8191,se=W>>>13,me=R[1]|0,_e=me&8191,Ae=me>>>13,_t=R[2]|0,Ze=_t&8191,Pe=_t>>>13,ge=R[3]|0,Ge=ge&8191,je=ge>>>13,vt=R[4]|0,He=vt&8191,nt=vt>>>13,Pt=R[5]|0,fe=Pt&8191,oe=Pt>>>13,Oe=R[6]|0,Re=Oe&8191,Le=Oe>>>13,ot=R[7]|0,et=ot&8191,Ye=ot>>>13,bt=R[8]|0,ct=bt&8191,re=bt>>>13,j=R[9]|0,q=j&8191,ue=j>>>13,we=T[0]|0,ye=we&8191,le=we>>>13,Xe=T[1]|0,de=Xe&8191,Ce=Xe>>>13,Ue=T[2]|0,Ee=Ue&8191,qe=Ue>>>13,Ct=T[3]|0,ft=Ct&8191,yt=Ct>>>13,Sn=T[4]|0,dt=Sn&8191,ae=Sn>>>13,J=T[5]|0,X=J&8191,he=J>>>13,Ie=T[6]|0,Te=Ie&8191,Ne=Ie>>>13,dn=T[7]|0,gt=dn&8191,xt=dn>>>13,Dn=T[8]|0,wt=Dn&8191,kt=Dn>>>13,Pr=T[9]|0,Dt=Pr&8191,Ot=Pr>>>13;M.negative=a.negative^p.negative,M.length=19,v=Math.imul($,ye),u=Math.imul($,le),u=u+Math.imul(se,ye)|0,S=Math.imul(se,le);var pe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(pe>>>26)|0,pe&=67108863,v=Math.imul(_e,ye),u=Math.imul(_e,le),u=u+Math.imul(Ae,ye)|0,S=Math.imul(Ae,le),v=v+Math.imul($,de)|0,u=u+Math.imul($,Ce)|0,u=u+Math.imul(se,de)|0,S=S+Math.imul(se,Ce)|0;var De=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(De>>>26)|0,De&=67108863,v=Math.imul(Ze,ye),u=Math.imul(Ze,le),u=u+Math.imul(Pe,ye)|0,S=Math.imul(Pe,le),v=v+Math.imul(_e,de)|0,u=u+Math.imul(_e,Ce)|0,u=u+Math.imul(Ae,de)|0,S=S+Math.imul(Ae,Ce)|0,v=v+Math.imul($,Ee)|0,u=u+Math.imul($,qe)|0,u=u+Math.imul(se,Ee)|0,S=S+Math.imul(se,qe)|0;var $e=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($e>>>26)|0,$e&=67108863,v=Math.imul(Ge,ye),u=Math.imul(Ge,le),u=u+Math.imul(je,ye)|0,S=Math.imul(je,le),v=v+Math.imul(Ze,de)|0,u=u+Math.imul(Ze,Ce)|0,u=u+Math.imul(Pe,de)|0,S=S+Math.imul(Pe,Ce)|0,v=v+Math.imul(_e,Ee)|0,u=u+Math.imul(_e,qe)|0,u=u+Math.imul(Ae,Ee)|0,S=S+Math.imul(Ae,qe)|0,v=v+Math.imul($,ft)|0,u=u+Math.imul($,yt)|0,u=u+Math.imul(se,ft)|0,S=S+Math.imul(se,yt)|0;var Qe=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,v=Math.imul(He,ye),u=Math.imul(He,le),u=u+Math.imul(nt,ye)|0,S=Math.imul(nt,le),v=v+Math.imul(Ge,de)|0,u=u+Math.imul(Ge,Ce)|0,u=u+Math.imul(je,de)|0,S=S+Math.imul(je,Ce)|0,v=v+Math.imul(Ze,Ee)|0,u=u+Math.imul(Ze,qe)|0,u=u+Math.imul(Pe,Ee)|0,S=S+Math.imul(Pe,qe)|0,v=v+Math.imul(_e,ft)|0,u=u+Math.imul(_e,yt)|0,u=u+Math.imul(Ae,ft)|0,S=S+Math.imul(Ae,yt)|0,v=v+Math.imul($,dt)|0,u=u+Math.imul($,ae)|0,u=u+Math.imul(se,dt)|0,S=S+Math.imul(se,ae)|0;var Be=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,v=Math.imul(fe,ye),u=Math.imul(fe,le),u=u+Math.imul(oe,ye)|0,S=Math.imul(oe,le),v=v+Math.imul(He,de)|0,u=u+Math.imul(He,Ce)|0,u=u+Math.imul(nt,de)|0,S=S+Math.imul(nt,Ce)|0,v=v+Math.imul(Ge,Ee)|0,u=u+Math.imul(Ge,qe)|0,u=u+Math.imul(je,Ee)|0,S=S+Math.imul(je,qe)|0,v=v+Math.imul(Ze,ft)|0,u=u+Math.imul(Ze,yt)|0,u=u+Math.imul(Pe,ft)|0,S=S+Math.imul(Pe,yt)|0,v=v+Math.imul(_e,dt)|0,u=u+Math.imul(_e,ae)|0,u=u+Math.imul(Ae,dt)|0,S=S+Math.imul(Ae,ae)|0,v=v+Math.imul($,X)|0,u=u+Math.imul($,he)|0,u=u+Math.imul(se,X)|0,S=S+Math.imul(se,he)|0;var Tt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(Re,ye),u=Math.imul(Re,le),u=u+Math.imul(Le,ye)|0,S=Math.imul(Le,le),v=v+Math.imul(fe,de)|0,u=u+Math.imul(fe,Ce)|0,u=u+Math.imul(oe,de)|0,S=S+Math.imul(oe,Ce)|0,v=v+Math.imul(He,Ee)|0,u=u+Math.imul(He,qe)|0,u=u+Math.imul(nt,Ee)|0,S=S+Math.imul(nt,qe)|0,v=v+Math.imul(Ge,ft)|0,u=u+Math.imul(Ge,yt)|0,u=u+Math.imul(je,ft)|0,S=S+Math.imul(je,yt)|0,v=v+Math.imul(Ze,dt)|0,u=u+Math.imul(Ze,ae)|0,u=u+Math.imul(Pe,dt)|0,S=S+Math.imul(Pe,ae)|0,v=v+Math.imul(_e,X)|0,u=u+Math.imul(_e,he)|0,u=u+Math.imul(Ae,X)|0,S=S+Math.imul(Ae,he)|0,v=v+Math.imul($,Te)|0,u=u+Math.imul($,Ne)|0,u=u+Math.imul(se,Te)|0,S=S+Math.imul(se,Ne)|0;var zt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(zt>>>26)|0,zt&=67108863,v=Math.imul(et,ye),u=Math.imul(et,le),u=u+Math.imul(Ye,ye)|0,S=Math.imul(Ye,le),v=v+Math.imul(Re,de)|0,u=u+Math.imul(Re,Ce)|0,u=u+Math.imul(Le,de)|0,S=S+Math.imul(Le,Ce)|0,v=v+Math.imul(fe,Ee)|0,u=u+Math.imul(fe,qe)|0,u=u+Math.imul(oe,Ee)|0,S=S+Math.imul(oe,qe)|0,v=v+Math.imul(He,ft)|0,u=u+Math.imul(He,yt)|0,u=u+Math.imul(nt,ft)|0,S=S+Math.imul(nt,yt)|0,v=v+Math.imul(Ge,dt)|0,u=u+Math.imul(Ge,ae)|0,u=u+Math.imul(je,dt)|0,S=S+Math.imul(je,ae)|0,v=v+Math.imul(Ze,X)|0,u=u+Math.imul(Ze,he)|0,u=u+Math.imul(Pe,X)|0,S=S+Math.imul(Pe,he)|0,v=v+Math.imul(_e,Te)|0,u=u+Math.imul(_e,Ne)|0,u=u+Math.imul(Ae,Te)|0,S=S+Math.imul(Ae,Ne)|0,v=v+Math.imul($,gt)|0,u=u+Math.imul($,xt)|0,u=u+Math.imul(se,gt)|0,S=S+Math.imul(se,xt)|0;var At=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(At>>>26)|0,At&=67108863,v=Math.imul(ct,ye),u=Math.imul(ct,le),u=u+Math.imul(re,ye)|0,S=Math.imul(re,le),v=v+Math.imul(et,de)|0,u=u+Math.imul(et,Ce)|0,u=u+Math.imul(Ye,de)|0,S=S+Math.imul(Ye,Ce)|0,v=v+Math.imul(Re,Ee)|0,u=u+Math.imul(Re,qe)|0,u=u+Math.imul(Le,Ee)|0,S=S+Math.imul(Le,qe)|0,v=v+Math.imul(fe,ft)|0,u=u+Math.imul(fe,yt)|0,u=u+Math.imul(oe,ft)|0,S=S+Math.imul(oe,yt)|0,v=v+Math.imul(He,dt)|0,u=u+Math.imul(He,ae)|0,u=u+Math.imul(nt,dt)|0,S=S+Math.imul(nt,ae)|0,v=v+Math.imul(Ge,X)|0,u=u+Math.imul(Ge,he)|0,u=u+Math.imul(je,X)|0,S=S+Math.imul(je,he)|0,v=v+Math.imul(Ze,Te)|0,u=u+Math.imul(Ze,Ne)|0,u=u+Math.imul(Pe,Te)|0,S=S+Math.imul(Pe,Ne)|0,v=v+Math.imul(_e,gt)|0,u=u+Math.imul(_e,xt)|0,u=u+Math.imul(Ae,gt)|0,S=S+Math.imul(Ae,xt)|0,v=v+Math.imul($,wt)|0,u=u+Math.imul($,kt)|0,u=u+Math.imul(se,wt)|0,S=S+Math.imul(se,kt)|0;var Ht=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(q,ye),u=Math.imul(q,le),u=u+Math.imul(ue,ye)|0,S=Math.imul(ue,le),v=v+Math.imul(ct,de)|0,u=u+Math.imul(ct,Ce)|0,u=u+Math.imul(re,de)|0,S=S+Math.imul(re,Ce)|0,v=v+Math.imul(et,Ee)|0,u=u+Math.imul(et,qe)|0,u=u+Math.imul(Ye,Ee)|0,S=S+Math.imul(Ye,qe)|0,v=v+Math.imul(Re,ft)|0,u=u+Math.imul(Re,yt)|0,u=u+Math.imul(Le,ft)|0,S=S+Math.imul(Le,yt)|0,v=v+Math.imul(fe,dt)|0,u=u+Math.imul(fe,ae)|0,u=u+Math.imul(oe,dt)|0,S=S+Math.imul(oe,ae)|0,v=v+Math.imul(He,X)|0,u=u+Math.imul(He,he)|0,u=u+Math.imul(nt,X)|0,S=S+Math.imul(nt,he)|0,v=v+Math.imul(Ge,Te)|0,u=u+Math.imul(Ge,Ne)|0,u=u+Math.imul(je,Te)|0,S=S+Math.imul(je,Ne)|0,v=v+Math.imul(Ze,gt)|0,u=u+Math.imul(Ze,xt)|0,u=u+Math.imul(Pe,gt)|0,S=S+Math.imul(Pe,xt)|0,v=v+Math.imul(_e,wt)|0,u=u+Math.imul(_e,kt)|0,u=u+Math.imul(Ae,wt)|0,S=S+Math.imul(Ae,kt)|0,v=v+Math.imul($,Dt)|0,u=u+Math.imul($,Ot)|0,u=u+Math.imul(se,Dt)|0,S=S+Math.imul(se,Ot)|0;var rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(rn>>>26)|0,rn&=67108863,v=Math.imul(q,de),u=Math.imul(q,Ce),u=u+Math.imul(ue,de)|0,S=Math.imul(ue,Ce),v=v+Math.imul(ct,Ee)|0,u=u+Math.imul(ct,qe)|0,u=u+Math.imul(re,Ee)|0,S=S+Math.imul(re,qe)|0,v=v+Math.imul(et,ft)|0,u=u+Math.imul(et,yt)|0,u=u+Math.imul(Ye,ft)|0,S=S+Math.imul(Ye,yt)|0,v=v+Math.imul(Re,dt)|0,u=u+Math.imul(Re,ae)|0,u=u+Math.imul(Le,dt)|0,S=S+Math.imul(Le,ae)|0,v=v+Math.imul(fe,X)|0,u=u+Math.imul(fe,he)|0,u=u+Math.imul(oe,X)|0,S=S+Math.imul(oe,he)|0,v=v+Math.imul(He,Te)|0,u=u+Math.imul(He,Ne)|0,u=u+Math.imul(nt,Te)|0,S=S+Math.imul(nt,Ne)|0,v=v+Math.imul(Ge,gt)|0,u=u+Math.imul(Ge,xt)|0,u=u+Math.imul(je,gt)|0,S=S+Math.imul(je,xt)|0,v=v+Math.imul(Ze,wt)|0,u=u+Math.imul(Ze,kt)|0,u=u+Math.imul(Pe,wt)|0,S=S+Math.imul(Pe,kt)|0,v=v+Math.imul(_e,Dt)|0,u=u+Math.imul(_e,Ot)|0,u=u+Math.imul(Ae,Dt)|0,S=S+Math.imul(Ae,Ot)|0;var on=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(on>>>26)|0,on&=67108863,v=Math.imul(q,Ee),u=Math.imul(q,qe),u=u+Math.imul(ue,Ee)|0,S=Math.imul(ue,qe),v=v+Math.imul(ct,ft)|0,u=u+Math.imul(ct,yt)|0,u=u+Math.imul(re,ft)|0,S=S+Math.imul(re,yt)|0,v=v+Math.imul(et,dt)|0,u=u+Math.imul(et,ae)|0,u=u+Math.imul(Ye,dt)|0,S=S+Math.imul(Ye,ae)|0,v=v+Math.imul(Re,X)|0,u=u+Math.imul(Re,he)|0,u=u+Math.imul(Le,X)|0,S=S+Math.imul(Le,he)|0,v=v+Math.imul(fe,Te)|0,u=u+Math.imul(fe,Ne)|0,u=u+Math.imul(oe,Te)|0,S=S+Math.imul(oe,Ne)|0,v=v+Math.imul(He,gt)|0,u=u+Math.imul(He,xt)|0,u=u+Math.imul(nt,gt)|0,S=S+Math.imul(nt,xt)|0,v=v+Math.imul(Ge,wt)|0,u=u+Math.imul(Ge,kt)|0,u=u+Math.imul(je,wt)|0,S=S+Math.imul(je,kt)|0,v=v+Math.imul(Ze,Dt)|0,u=u+Math.imul(Ze,Ot)|0,u=u+Math.imul(Pe,Dt)|0,S=S+Math.imul(Pe,Ot)|0;var Kt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(q,ft),u=Math.imul(q,yt),u=u+Math.imul(ue,ft)|0,S=Math.imul(ue,yt),v=v+Math.imul(ct,dt)|0,u=u+Math.imul(ct,ae)|0,u=u+Math.imul(re,dt)|0,S=S+Math.imul(re,ae)|0,v=v+Math.imul(et,X)|0,u=u+Math.imul(et,he)|0,u=u+Math.imul(Ye,X)|0,S=S+Math.imul(Ye,he)|0,v=v+Math.imul(Re,Te)|0,u=u+Math.imul(Re,Ne)|0,u=u+Math.imul(Le,Te)|0,S=S+Math.imul(Le,Ne)|0,v=v+Math.imul(fe,gt)|0,u=u+Math.imul(fe,xt)|0,u=u+Math.imul(oe,gt)|0,S=S+Math.imul(oe,xt)|0,v=v+Math.imul(He,wt)|0,u=u+Math.imul(He,kt)|0,u=u+Math.imul(nt,wt)|0,S=S+Math.imul(nt,kt)|0,v=v+Math.imul(Ge,Dt)|0,u=u+Math.imul(Ge,Ot)|0,u=u+Math.imul(je,Dt)|0,S=S+Math.imul(je,Ot)|0;var Tn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,v=Math.imul(q,dt),u=Math.imul(q,ae),u=u+Math.imul(ue,dt)|0,S=Math.imul(ue,ae),v=v+Math.imul(ct,X)|0,u=u+Math.imul(ct,he)|0,u=u+Math.imul(re,X)|0,S=S+Math.imul(re,he)|0,v=v+Math.imul(et,Te)|0,u=u+Math.imul(et,Ne)|0,u=u+Math.imul(Ye,Te)|0,S=S+Math.imul(Ye,Ne)|0,v=v+Math.imul(Re,gt)|0,u=u+Math.imul(Re,xt)|0,u=u+Math.imul(Le,gt)|0,S=S+Math.imul(Le,xt)|0,v=v+Math.imul(fe,wt)|0,u=u+Math.imul(fe,kt)|0,u=u+Math.imul(oe,wt)|0,S=S+Math.imul(oe,kt)|0,v=v+Math.imul(He,Dt)|0,u=u+Math.imul(He,Ot)|0,u=u+Math.imul(nt,Dt)|0,S=S+Math.imul(nt,Ot)|0;var Rn=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,v=Math.imul(q,X),u=Math.imul(q,he),u=u+Math.imul(ue,X)|0,S=Math.imul(ue,he),v=v+Math.imul(ct,Te)|0,u=u+Math.imul(ct,Ne)|0,u=u+Math.imul(re,Te)|0,S=S+Math.imul(re,Ne)|0,v=v+Math.imul(et,gt)|0,u=u+Math.imul(et,xt)|0,u=u+Math.imul(Ye,gt)|0,S=S+Math.imul(Ye,xt)|0,v=v+Math.imul(Re,wt)|0,u=u+Math.imul(Re,kt)|0,u=u+Math.imul(Le,wt)|0,S=S+Math.imul(Le,kt)|0,v=v+Math.imul(fe,Dt)|0,u=u+Math.imul(fe,Ot)|0,u=u+Math.imul(oe,Dt)|0,S=S+Math.imul(oe,Ot)|0;var En=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(En>>>26)|0,En&=67108863,v=Math.imul(q,Te),u=Math.imul(q,Ne),u=u+Math.imul(ue,Te)|0,S=Math.imul(ue,Ne),v=v+Math.imul(ct,gt)|0,u=u+Math.imul(ct,xt)|0,u=u+Math.imul(re,gt)|0,S=S+Math.imul(re,xt)|0,v=v+Math.imul(et,wt)|0,u=u+Math.imul(et,kt)|0,u=u+Math.imul(Ye,wt)|0,S=S+Math.imul(Ye,kt)|0,v=v+Math.imul(Re,Dt)|0,u=u+Math.imul(Re,Ot)|0,u=u+Math.imul(Le,Dt)|0,S=S+Math.imul(Le,Ot)|0;var un=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(un>>>26)|0,un&=67108863,v=Math.imul(q,gt),u=Math.imul(q,xt),u=u+Math.imul(ue,gt)|0,S=Math.imul(ue,xt),v=v+Math.imul(ct,wt)|0,u=u+Math.imul(ct,kt)|0,u=u+Math.imul(re,wt)|0,S=S+Math.imul(re,kt)|0,v=v+Math.imul(et,Dt)|0,u=u+Math.imul(et,Ot)|0,u=u+Math.imul(Ye,Dt)|0,S=S+Math.imul(Ye,Ot)|0;var $t=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+($t>>>26)|0,$t&=67108863,v=Math.imul(q,wt),u=Math.imul(q,kt),u=u+Math.imul(ue,wt)|0,S=Math.imul(ue,kt),v=v+Math.imul(ct,Dt)|0,u=u+Math.imul(ct,Ot)|0,u=u+Math.imul(re,Dt)|0,S=S+Math.imul(re,Ot)|0;var Bt=(N+v|0)+((u&8191)<<13)|0;N=(S+(u>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,v=Math.imul(q,Dt),u=Math.imul(q,Ot),u=u+Math.imul(ue,Dt)|0,S=Math.imul(ue,Ot);var Mn=(N+v|0)+((u&8191)<<13)|0;return N=(S+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,L[0]=pe,L[1]=De,L[2]=$e,L[3]=Qe,L[4]=Be,L[5]=Tt,L[6]=zt,L[7]=At,L[8]=Ht,L[9]=rn,L[10]=on,L[11]=Kt,L[12]=Tn,L[13]=Rn,L[14]=En,L[15]=un,L[16]=$t,L[17]=Bt,L[18]=Mn,N!==0&&(L[19]=N,M.length++),M};Math.imul||(D=C);function k(E,a,p){p.negative=a.negative^E.negative,p.length=E.length+a.length;for(var M=0,R=0,T=0;T<p.length-1;T++){var L=R;R=0;for(var N=M&67108863,v=Math.min(T,a.length-1),u=Math.max(0,T-E.length+1);u<=v;u++){var S=T-u,W=E.words[S]|0,$=a.words[u]|0,se=W*$,me=se&67108863;L=L+(se/67108864|0)|0,me=me+N|0,N=me&67108863,L=L+(me>>>26)|0,R+=L>>>26,L&=67108863}p.words[T]=N,M=L,L=R}return M!==0?p.words[T]=M:p.length--,p._strip()}function F(E,a,p){return k(E,a,p)}s.prototype.mulTo=function(a,p){var M,R=this.length+a.length;return this.length===10&&a.length===10?M=D(this,a,p):R<63?M=C(this,a,p):R<1024?M=k(this,a,p):M=F(this,a,p),M},s.prototype.mul=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),this.mulTo(a,p)},s.prototype.mulf=function(a){var p=new s(null);return p.words=new Array(this.length+a.length),F(this,a,p)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var p=a<0;p&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var M=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*a,L=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=L>>>26,this.words[R]=L&67108863}return M!==0&&(this.words[R]=M,this.length++),this.length=a===0?1:this.length,p?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var p=I(a);if(p.length===0)return new s(1);for(var M=this,R=0;R<p.length&&p[R]===0;R++,M=M.sqr());if(++R<p.length)for(var T=M.sqr();R<p.length;R++,T=T.sqr())p[R]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=67108863>>>26-p<<26-p,T;if(p!==0){var L=0;for(T=0;T<this.length;T++){var N=this.words[T]&R,v=(this.words[T]|0)-N<<p;this.words[T]=v|L,L=N>>>26-p}L&&(this.words[T]=L,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,p,M){n(typeof a=="number"&&a>=0);var R;p?R=(p-p%26)/26:R=0;var T=a%26,L=Math.min((a-T)/26,this.length),N=67108863^67108863>>>T<<T,v=M;if(R-=L,R=Math.max(0,R),v){for(var u=0;u<L;u++)v.words[u]=this.words[u];v.length=L}if(L!==0)if(this.length>L)for(this.length-=L,u=0;u<this.length;u++)this.words[u]=this.words[u+L];else this.words[0]=0,this.length=1;var S=0;for(u=this.length-1;u>=0&&(S!==0||u>=R);u--){var W=this.words[u]|0;this.words[u]=S<<26-T|W>>>T,S=W&N}return v&&S!==0&&(v.words[v.length++]=S),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,p,M){return n(this.negative===0),this.iushrn(a,p,M)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return!1;var T=this.words[M];return!!(T&R)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var p=a%26,M=(a-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(p!==0&&M++,this.length=Math.min(M,this.length),p!==0){var R=67108863^67108863>>>p<<p;this.words[this.length-1]&=R}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,p,M){var R=a.length+M,T;this._expand(R);var L,N=0;for(T=0;T<a.length;T++){L=(this.words[T+M]|0)+N;var v=(a.words[T]|0)*p;L-=v&67108863,N=(L>>26)-(v/67108864|0),this.words[T+M]=L&67108863}for(;T<this.length-M;T++)L=(this.words[T+M]|0)+N,N=L>>26,this.words[T+M]=L&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,T=0;T<this.length;T++)L=-(this.words[T]|0)+N,N=L>>26,this.words[T]=L&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,p){var M=this.length-a.length,R=this.clone(),T=a,L=T.words[T.length-1]|0,N=this._countBits(L);M=26-N,M!==0&&(T=T.ushln(M),R.iushln(M),L=T.words[T.length-1]|0);var v=R.length-T.length,u;if(p!=="mod"){u=new s(null),u.length=v+1,u.words=new Array(u.length);for(var S=0;S<u.length;S++)u.words[S]=0}var W=R.clone()._ishlnsubmul(T,1,v);W.negative===0&&(R=W,u&&(u.words[v]=1));for(var $=v-1;$>=0;$--){var se=(R.words[T.length+$]|0)*67108864+(R.words[T.length+$-1]|0);for(se=Math.min(se/L|0,67108863),R._ishlnsubmul(T,se,$);R.negative!==0;)se--,R.negative=0,R._ishlnsubmul(T,1,$),R.isZero()||(R.negative^=1);u&&(u.words[$]=se)}return u&&u._strip(),R._strip(),p!=="div"&&M!==0&&R.iushrn(M),{div:u||null,mod:R}},s.prototype.divmod=function(a,p,M){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var R,T,L;return this.negative!==0&&a.negative===0?(L=this.neg().divmod(a,p),p!=="mod"&&(R=L.div.neg()),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.iadd(a)),{div:R,mod:T}):this.negative===0&&a.negative!==0?(L=this.divmod(a.neg(),p),p!=="mod"&&(R=L.div.neg()),{div:R,mod:L.mod}):(this.negative&a.negative)!==0?(L=this.neg().divmod(a.neg(),p),p!=="div"&&(T=L.mod.neg(),M&&T.negative!==0&&T.isub(a)),{div:L.div,mod:T}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?p==="div"?{div:this.divn(a.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,p)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var p=this.divmod(a);if(p.mod.isZero())return p.div;var M=p.div.negative!==0?p.mod.isub(a):p.mod,R=a.ushrn(1),T=a.andln(1),L=M.cmp(R);return L<0||T===1&&L===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=(1<<26)%a,R=0,T=this.length-1;T>=0;T--)R=(M*R+(this.words[T]|0))%a;return p?-R:R},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var p=a<0;p&&(a=-a),n(a<=67108863);for(var M=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+M*67108864;this.words[R]=T/a|0,M=T%a}return this._strip(),p?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=new s(0),N=new s(1),v=0;p.isEven()&&M.isEven();)p.iushrn(1),M.iushrn(1),++v;for(var u=M.clone(),S=p.clone();!p.isZero();){for(var W=0,$=1;(p.words[0]&$)===0&&W<26;++W,$<<=1);if(W>0)for(p.iushrn(W);W-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(u),T.isub(S)),R.iushrn(1),T.iushrn(1);for(var se=0,me=1;(M.words[0]&me)===0&&se<26;++se,me<<=1);if(se>0)for(M.iushrn(se);se-- >0;)(L.isOdd()||N.isOdd())&&(L.iadd(u),N.isub(S)),L.iushrn(1),N.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(L),T.isub(N)):(M.isub(p),L.isub(R),N.isub(T))}return{a:L,b:N,gcd:M.iushln(v)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var p=this,M=a.clone();p.negative!==0?p=p.umod(a):p=p.clone();for(var R=new s(1),T=new s(0),L=M.clone();p.cmpn(1)>0&&M.cmpn(1)>0;){for(var N=0,v=1;(p.words[0]&v)===0&&N<26;++N,v<<=1);if(N>0)for(p.iushrn(N);N-- >0;)R.isOdd()&&R.iadd(L),R.iushrn(1);for(var u=0,S=1;(M.words[0]&S)===0&&u<26;++u,S<<=1);if(u>0)for(M.iushrn(u);u-- >0;)T.isOdd()&&T.iadd(L),T.iushrn(1);p.cmp(M)>=0?(p.isub(M),R.isub(T)):(M.isub(p),T.isub(R))}var W;return p.cmpn(1)===0?W=R:W=T,W.cmpn(0)<0&&W.iadd(a),W},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var p=this.clone(),M=a.clone();p.negative=0,M.negative=0;for(var R=0;p.isEven()&&M.isEven();R++)p.iushrn(1),M.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=p.cmp(M);if(T<0){var L=p;p=M,M=L}else if(T===0||M.cmpn(1)===0)break;p.isub(M)}while(!0);return M.iushln(R)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var p=a%26,M=(a-p)/26,R=1<<p;if(this.length<=M)return this._expand(M+1),this.words[M]|=R,this;for(var T=R,L=M;T!==0&&L<this.length;L++){var N=this.words[L]|0;N+=T,T=N>>>26,N&=67108863,this.words[L]=N}return T!==0&&(this.words[L]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var p=a<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var M;if(this.length>1)M=1;else{p&&(a=-a),n(a<=67108863,"Number is too big");var R=this.words[0]|0;M=R===a?0:R<a?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var p=this.ucmp(a);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var p=0,M=this.length-1;M>=0;M--){var R=this.words[M]|0,T=a.words[M]|0;if(R!==T){R<T?p=-1:R>T&&(p=1);break}}return p},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new V(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var p=a,M;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),M=p.bitLength();while(M>this.n);var R=M<this.n?-1:p.ucmp(this.p);return R===0?(p.words[0]=0,p.length=1):R>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},G.prototype.split=function(a,p){a.iushrn(this.n,0,p)},G.prototype.imulK=function(a){return a.imul(this.k)};function Y(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(Y,G),Y.prototype.split=function(a,p){for(var M=4194303,R=Math.min(a.length,9),T=0;T<R;T++)p.words[T]=a.words[T];if(p.length=R,a.length<=9){a.words[0]=0,a.length=1;return}var L=a.words[9];for(p.words[p.length++]=L&M,T=10;T<a.length;T++){var N=a.words[T]|0;a.words[T-10]=(N&M)<<4|L>>>22,L=N}L>>>=22,a.words[T-10]=L,L===0&&a.length>10?a.length-=10:a.length-=9},Y.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var p=0,M=0;M<a.length;M++){var R=a.words[M]|0;p+=R*977,a.words[M]=p&67108863,p=R*64+(p/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ee(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(ee,G);function te(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(te,G);function U(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(U,G),U.prototype.imulK=function(a){for(var p=0,M=0;M<a.length;M++){var R=(a.words[M]|0)*19+p,T=R&67108863;R>>>=26,a.words[M]=T,p=R}return p!==0&&(a.words[a.length++]=p),a},s._prime=function(a){if(Q[a])return Q[a];var p;if(a==="k256")p=new Y;else if(a==="p224")p=new ee;else if(a==="p192")p=new te;else if(a==="p25519")p=new U;else throw new Error("Unknown prime "+a);return Q[a]=p,p};function V(E){if(typeof E=="string"){var a=s._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}V.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,p){n((a.negative|p.negative)===0,"red works only with positives"),n(a.red&&a.red===p.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(h(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,p){this._verify2(a,p);var M=a.add(p);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},V.prototype.iadd=function(a,p){this._verify2(a,p);var M=a.iadd(p);return M.cmp(this.m)>=0&&M.isub(this.m),M},V.prototype.sub=function(a,p){this._verify2(a,p);var M=a.sub(p);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},V.prototype.isub=function(a,p){this._verify2(a,p);var M=a.isub(p);return M.cmpn(0)<0&&M.iadd(this.m),M},V.prototype.shl=function(a,p){return this._verify1(a),this.imod(a.ushln(p))},V.prototype.imul=function(a,p){return this._verify2(a,p),this.imod(a.imul(p))},V.prototype.mul=function(a,p){return this._verify2(a,p),this.imod(a.mul(p))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(a,M)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);n(!R.isZero());var L=new s(1).toRed(this),N=L.redNeg(),v=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,v).cmp(N)!==0;)u.redIAdd(N);for(var S=this.pow(u,R),W=this.pow(a,R.addn(1).iushrn(1)),$=this.pow(a,R),se=T;$.cmp(L)!==0;){for(var me=$,_e=0;me.cmp(L)!==0;_e++)me=me.redSqr();n(_e<se);var Ae=this.pow(S,new s(1).iushln(se-_e-1));W=W.redMul(Ae),S=Ae.redSqr(),$=$.redMul(S),se=_e}return W},V.prototype.invm=function(a){var p=a._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},V.prototype.pow=function(a,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return a.clone();var M=4,R=new Array(1<<M);R[0]=new s(1).toRed(this),R[1]=a;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],a);var L=R[0],N=0,v=0,u=p.bitLength()%26;for(u===0&&(u=26),T=p.length-1;T>=0;T--){for(var S=p.words[T],W=u-1;W>=0;W--){var $=S>>W&1;if(L!==R[0]&&(L=this.sqr(L)),$===0&&N===0){v=0;continue}N<<=1,N|=$,v++,!(v!==M&&(T!==0||W!==0))&&(L=this.mul(L,R[N]),v=0,N=0)}u=26}return L},V.prototype.convertTo=function(a){var p=a.umod(this.m);return p===a?p.clone():p},V.prototype.convertFrom=function(a){var p=a.clone();return p.red=null,p},s.mont=function(a){return new K(a)};function K(E){V.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(K,V),K.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},K.prototype.convertFrom=function(a){var p=this.imod(a.mul(this.rinv));return p.red=null,p},K.prototype.imul=function(a,p){if(a.isZero()||p.isZero())return a.words[0]=0,a.length=1,a;var M=a.imul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.mul=function(a,p){if(a.isZero()||p.isZero())return new s(0)._forceRed(this);var M=a.mul(p),R=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(R).iushrn(this.shift),L=T;return T.cmp(this.m)>=0?L=T.isub(this.m):T.cmpn(0)<0&&(L=T.iadd(this.m)),L._forceRed(this)},K.prototype.invm=function(a){var p=this.imod(a._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,bX)})(x_)),x_.exports}var SN;function TX(){return SN||(SN=1,(function(r){var e=Km&&Km.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(r,"__esModule",{value:!0}),r.struct=r.f64=r.f32=r.i32=r.u32=r.i16=r.u16=r.i8=r.u8=void 0,r.u64=l,r.i64=c,r.u128=d,r.i128=h,r.u256=y,r.i256=_,r.publicKey=A,r.option=I,r.bool=C,r.vec=F,r.tagged=Q,r.vecU8=G,r.str=Y,r.rustEnum=ee,r.array=te,r.map=V;const t=_N(),n=GO,i=e(AX());var s=_N();Object.defineProperty(r,"u8",{enumerable:!0,get:function(){return s.u8}}),Object.defineProperty(r,"i8",{enumerable:!0,get:function(){return s.s8}}),Object.defineProperty(r,"u16",{enumerable:!0,get:function(){return s.u16}}),Object.defineProperty(r,"i16",{enumerable:!0,get:function(){return s.s16}}),Object.defineProperty(r,"u32",{enumerable:!0,get:function(){return s.u32}}),Object.defineProperty(r,"i32",{enumerable:!0,get:function(){return s.s32}}),Object.defineProperty(r,"f32",{enumerable:!0,get:function(){return s.f32}}),Object.defineProperty(r,"f64",{enumerable:!0,get:function(){return s.f64}}),Object.defineProperty(r,"struct",{enumerable:!0,get:function(){return s.struct}});class o extends t.Layout{constructor(E,a,p){super(E,p),this.blob=(0,t.blob)(E),this.signed=a}decode(E,a=0){const p=new i.default(this.blob.decode(E,a),10,"le");return this.signed?p.fromTwos(this.span*8).clone():p}encode(E,a,p=0){return this.signed&&(E=E.toTwos(this.span*8)),this.blob.encode(E.toArrayLike(qn,"le",this.span),a,p)}}function l(K){return new o(8,!1,K)}function c(K){return new o(8,!0,K)}function d(K){return new o(16,!1,K)}function h(K){return new o(16,!0,K)}function y(K){return new o(32,!1,K)}function _(K){return new o(32,!0,K)}class x extends t.Layout{constructor(E,a,p,M){super(E.span,M),this.layout=E,this.decoder=a,this.encoder=p}decode(E,a){return this.decoder(this.layout.decode(E,a))}encode(E,a,p){return this.layout.encode(this.encoder(E),a,p)}getSpan(E,a){return this.layout.getSpan(E,a)}}function A(K){return new x((0,t.blob)(32),E=>new n.PublicKey(E),E=>E.toBuffer(),K)}class P extends t.Layout{constructor(E,a){super(-1,a),this.layout=E,this.discriminator=(0,t.u8)()}encode(E,a,p=0){return E==null?this.discriminator.encode(0,a,p):(this.discriminator.encode(1,a,p),this.layout.encode(E,a,p+1)+1)}decode(E,a=0){const p=this.discriminator.decode(E,a);if(p===0)return null;if(p===1)return this.layout.decode(E,a+1);throw new Error("Invalid option "+this.property)}getSpan(E,a=0){const p=this.discriminator.decode(E,a);if(p===0)return 1;if(p===1)return this.layout.getSpan(E,a+1)+1;throw new Error("Invalid option "+this.property)}}function I(K,E){return new P(K,E)}function C(K){return new x((0,t.u8)(),D,k,K)}function D(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function k(K){return K?1:0}function F(K,E){const a=(0,t.u32)("length"),p=(0,t.struct)([a,(0,t.seq)(K,(0,t.offset)(a,-a.span),"values")]);return new x(p,({values:M})=>M,M=>({values:M}),E)}function Q(K,E,a){const p=(0,t.struct)([l("tag"),E.replicate("data")]);function M({tag:R,data:T}){if(!R.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+R.toString("hex"));return T}return new x(p,M,R=>({tag:K,data:R}),a)}function G(K){const E=(0,t.u32)("length"),a=(0,t.struct)([E,(0,t.blob)((0,t.offset)(E,-E.span),"data")]);return new x(a,({data:p})=>p,p=>({data:p}),K)}function Y(K){return new x(G(),E=>E.toString("utf-8"),E=>qn.from(E,"utf-8"),K)}function ee(K,E,a){const p=(0,t.union)(a??(0,t.u8)(),E);return K.forEach((M,R)=>p.addVariant(R,M,M.property)),p}function te(K,E,a){const p=(0,t.struct)([(0,t.seq)(K,E,"values")]);return new x(p,({values:M})=>M,M=>({values:M}),a)}class U extends t.Layout{constructor(E,a,p){super(E.span+a.span,p),this.keyLayout=E,this.valueLayout=a}decode(E,a){a=a||0;const p=this.keyLayout.decode(E,a),M=this.valueLayout.decode(E,a+this.keyLayout.getSpan(E,a));return[p,M]}encode(E,a,p){p=p||0;const M=this.keyLayout.encode(E[0],a,p),R=this.valueLayout.encode(E[1],a,p+M);return M+R}getSpan(E,a){return this.keyLayout.getSpan(E,a)+this.valueLayout.getSpan(E,a)}}function V(K,E,a){const p=(0,t.u32)("length"),M=(0,t.struct)([p,(0,t.seq)(new U(K,E),(0,t.offset)(p,-p.span),"values")]);return new x(M,({values:R})=>new Map(R),R=>({values:Array.from(R.entries())}),a)}})(Km)),Km}var $n=TX();function D0(r){let e=r.length;for(;--e>=0;)r[e]=0}const RX=3,CX=258,tB=29,IX=256,NX=IX+1+tB,nB=30,PX=512,LX=new Array((NX+2)*2);D0(LX);const kX=new Array(nB*2);D0(kX);const OX=new Array(PX);D0(OX);const DX=new Array(CX-RX+1);D0(DX);const BX=new Array(tB);D0(BX);const UX=new Array(nB);D0(UX);const FX=(r,e,t,n)=>{let i=r&65535|0,s=r>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[n++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var mA=FX;const zX=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},WX=new Uint32Array(zX()),VX=(r,e,t,n)=>{const i=WX,s=n+t;r^=-1;for(let o=n;o<s;o++)r=r>>>8^i[(r^e[o])&255];return r^-1};var pl=VX,gA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},rB={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const HX=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var GX=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)HX(t,n)&&(r[n]=t[n])}}return r},jX=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,s=r.length;n<s;n++){let o=r[n];t.set(o,i),i+=o.length}return t},iB={assign:GX,flattenChunks:jX};let sB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sB=!1}const $g=new Uint8Array(256);for(let r=0;r<256;r++)$g[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;$g[254]=$g[254]=1;var qX=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,s,o=r.length,l=0;for(i=0;i<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(l),s=0,i=0;s<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const KX=(r,e)=>{if(e<65534&&r.subarray&&sB)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var YX=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const s=new Array(t*2);for(i=0,n=0;n<t;){let o=r[n++];if(o<128){s[i++]=o;continue}let l=$g[o];if(l>4){s[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<t;)o=o<<6|r[n++]&63,l--;if(l>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return KX(s,i)},XX=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+$g[r[t]]>e?t:e},yA={string2buf:qX,buf2string:YX,utf8border:XX};function $X(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZX=$X;const sw=16209,QX=16191;var JX=function(e,t){let n,i,s,o,l,c,d,h,y,_,x,A,P,I,C,D,k,F,Q,G,Y,ee,te,U;const V=e.state;n=e.next_in,te=e.input,i=n+(e.avail_in-5),s=e.next_out,U=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),c=V.dmax,d=V.wsize,h=V.whave,y=V.wnext,_=V.window,x=V.hold,A=V.bits,P=V.lencode,I=V.distcode,C=(1<<V.lenbits)-1,D=(1<<V.distbits)-1;e:do{A<15&&(x+=te[n++]<<A,A+=8,x+=te[n++]<<A,A+=8),k=P[x&C];t:for(;;){if(F=k>>>24,x>>>=F,A-=F,F=k>>>16&255,F===0)U[s++]=k&65535;else if(F&16){Q=k&65535,F&=15,F&&(A<F&&(x+=te[n++]<<A,A+=8),Q+=x&(1<<F)-1,x>>>=F,A-=F),A<15&&(x+=te[n++]<<A,A+=8,x+=te[n++]<<A,A+=8),k=I[x&D];n:for(;;){if(F=k>>>24,x>>>=F,A-=F,F=k>>>16&255,F&16){if(G=k&65535,F&=15,A<F&&(x+=te[n++]<<A,A+=8,A<F&&(x+=te[n++]<<A,A+=8)),G+=x&(1<<F)-1,G>c){e.msg="invalid distance too far back",V.mode=sw;break e}if(x>>>=F,A-=F,F=s-o,G>F){if(F=G-F,F>h&&V.sane){e.msg="invalid distance too far back",V.mode=sw;break e}if(Y=0,ee=_,y===0){if(Y+=d-F,F<Q){Q-=F;do U[s++]=_[Y++];while(--F);Y=s-G,ee=U}}else if(y<F){if(Y+=d+y-F,F-=y,F<Q){Q-=F;do U[s++]=_[Y++];while(--F);if(Y=0,y<Q){F=y,Q-=F;do U[s++]=_[Y++];while(--F);Y=s-G,ee=U}}}else if(Y+=y-F,F<Q){Q-=F;do U[s++]=_[Y++];while(--F);Y=s-G,ee=U}for(;Q>2;)U[s++]=ee[Y++],U[s++]=ee[Y++],U[s++]=ee[Y++],Q-=3;Q&&(U[s++]=ee[Y++],Q>1&&(U[s++]=ee[Y++]))}else{Y=s-G;do U[s++]=U[Y++],U[s++]=U[Y++],U[s++]=U[Y++],Q-=3;while(Q>2);Q&&(U[s++]=U[Y++],Q>1&&(U[s++]=U[Y++]))}}else if((F&64)===0){k=I[(k&65535)+(x&(1<<F)-1)];continue n}else{e.msg="invalid distance code",V.mode=sw;break e}break}}else if((F&64)===0){k=P[(k&65535)+(x&(1<<F)-1)];continue t}else if(F&32){V.mode=QX;break e}else{e.msg="invalid literal/length code",V.mode=sw;break e}break}}while(n<i&&s<l);Q=A>>3,n-=Q,A-=Q<<3,x&=(1<<A)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<l?257+(l-s):257-(s-l),V.hold=x,V.bits=A};const _p=15,MN=852,EN=592,bN=0,sE=1,AN=2,e$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),t$=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),n$=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),r$=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),i$=(r,e,t,n,i,s,o,l)=>{const c=l.bits;let d=0,h=0,y=0,_=0,x=0,A=0,P=0,I=0,C=0,D=0,k,F,Q,G,Y,ee=null,te;const U=new Uint16Array(_p+1),V=new Uint16Array(_p+1);let K=null,E,a,p;for(d=0;d<=_p;d++)U[d]=0;for(h=0;h<n;h++)U[e[t+h]]++;for(x=c,_=_p;_>=1&&U[_]===0;_--);if(x>_&&(x=_),_===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,l.bits=1,0;for(y=1;y<_&&U[y]===0;y++);for(x<y&&(x=y),I=1,d=1;d<=_p;d++)if(I<<=1,I-=U[d],I<0)return-1;if(I>0&&(r===bN||_!==1))return-1;for(V[1]=0,d=1;d<_p;d++)V[d+1]=V[d]+U[d];for(h=0;h<n;h++)e[t+h]!==0&&(o[V[e[t+h]]++]=h);if(r===bN?(ee=K=o,te=20):r===sE?(ee=e$,K=t$,te=257):(ee=n$,K=r$,te=0),D=0,h=0,d=y,Y=s,A=x,P=0,Q=-1,C=1<<x,G=C-1,r===sE&&C>MN||r===AN&&C>EN)return 1;for(;;){E=d-P,o[h]+1<te?(a=0,p=o[h]):o[h]>=te?(a=K[o[h]-te],p=ee[o[h]-te]):(a=96,p=0),k=1<<d-P,F=1<<A,y=F;do F-=k,i[Y+(D>>P)+F]=E<<24|a<<16|p|0;while(F!==0);for(k=1<<d-1;D&k;)k>>=1;if(k!==0?(D&=k-1,D+=k):D=0,h++,--U[d]===0){if(d===_)break;d=e[t+o[h]]}if(d>x&&(D&G)!==Q){for(P===0&&(P=x),Y+=y,A=d-P,I=1<<A;A+P<_&&(I-=U[A+P],!(I<=0));)A++,I<<=1;if(C+=1<<A,r===sE&&C>MN||r===AN&&C>EN)return 1;Q=D&G,i[Q]=x<<24|A<<16|Y-s|0}}return D!==0&&(i[Y+D]=d-P<<24|64<<16|0),l.bits=x,0};var Ag=i$;const s$=0,oB=1,aB=2,{Z_FINISH:TN,Z_BLOCK:o$,Z_TREES:ow,Z_OK:Jh,Z_STREAM_END:a$,Z_NEED_DICT:l$,Z_STREAM_ERROR:ua,Z_DATA_ERROR:lB,Z_MEM_ERROR:uB,Z_BUF_ERROR:u$,Z_DEFLATED:RN}=rB,yx=16180,CN=16181,IN=16182,NN=16183,PN=16184,LN=16185,kN=16186,ON=16187,DN=16188,BN=16189,e1=16190,yu=16191,oE=16192,UN=16193,aE=16194,FN=16195,zN=16196,WN=16197,VN=16198,aw=16199,lw=16200,HN=16201,GN=16202,jN=16203,qN=16204,KN=16205,lE=16206,YN=16207,XN=16208,Yr=16209,cB=16210,fB=16211,c$=852,f$=592,h$=15,d$=h$,$N=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function p$(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const hd=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<yx||e.mode>fB?1:0},hB=r=>{if(hd(r))return ua;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=yx,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(c$),e.distcode=e.distdyn=new Int32Array(f$),e.sane=1,e.back=-1,Jh},dB=r=>{if(hd(r))return ua;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,hB(r)},pB=(r,e)=>{let t;if(hd(r))return ua;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ua:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,dB(r))},mB=(r,e)=>{if(!r)return ua;const t=new p$;r.state=t,t.strm=r,t.window=null,t.mode=yx;const n=pB(r,e);return n!==Jh&&(r.state=null),n},m$=r=>mB(r,d$);let ZN=!0,uE,cE;const g$=r=>{if(ZN){uE=new Int32Array(512),cE=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Ag(oB,r.lens,0,288,uE,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Ag(aB,r.lens,0,32,cE,0,r.work,{bits:5}),ZN=!1}r.lencode=uE,r.lenbits=9,r.distcode=cE,r.distbits=5},gB=(r,e,t,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(t-n,t-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},y$=(r,e)=>{let t,n,i,s,o,l,c,d,h,y,_,x,A,P,I=0,C,D,k,F,Q,G,Y,ee;const te=new Uint8Array(4);let U,V;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(hd(r)||!r.output||!r.input&&r.avail_in!==0)return ua;t=r.state,t.mode===yu&&(t.mode=oE),o=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,l=r.avail_in,d=t.hold,h=t.bits,y=l,_=c,ee=Jh;e:for(;;)switch(t.mode){case yx:if(t.wrap===0){t.mode=oE;break}for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,te[0]=d&255,te[1]=d>>>8&255,t.check=pl(t.check,te,2,0),d=0,h=0,t.mode=CN;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=Yr;break}if((d&15)!==RN){r.msg="unknown compression method",t.mode=Yr;break}if(d>>>=4,h-=4,Y=(d&15)+8,t.wbits===0&&(t.wbits=Y),Y>15||Y>t.wbits){r.msg="invalid window size",t.mode=Yr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?BN:yu,d=0,h=0;break;case CN:for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.flags=d,(t.flags&255)!==RN){r.msg="unknown compression method",t.mode=Yr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Yr;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,t.check=pl(t.check,te,2,0)),d=0,h=0,t.mode=IN;case IN:for(;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,te[2]=d>>>16&255,te[3]=d>>>24&255,t.check=pl(t.check,te,4,0)),d=0,h=0,t.mode=NN;case NN:for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,t.check=pl(t.check,te,2,0)),d=0,h=0,t.mode=PN;case PN:if(t.flags&1024){for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(te[0]=d&255,te[1]=d>>>8&255,t.check=pl(t.check,te,2,0)),d=0,h=0}else t.head&&(t.head.extra=null);t.mode=LN;case LN:if(t.flags&1024&&(x=t.length,x>l&&(x=l),x&&(t.head&&(Y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+x),Y)),t.flags&512&&t.wrap&4&&(t.check=pl(t.check,n,x,s)),l-=x,s+=x,t.length-=x),t.length))break e;t.length=0,t.mode=kN;case kN:if(t.flags&2048){if(l===0)break e;x=0;do Y=n[s+x++],t.head&&Y&&t.length<65536&&(t.head.name+=String.fromCharCode(Y));while(Y&&x<l);if(t.flags&512&&t.wrap&4&&(t.check=pl(t.check,n,x,s)),l-=x,s+=x,Y)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ON;case ON:if(t.flags&4096){if(l===0)break e;x=0;do Y=n[s+x++],t.head&&Y&&t.length<65536&&(t.head.comment+=String.fromCharCode(Y));while(Y&&x<l);if(t.flags&512&&t.wrap&4&&(t.check=pl(t.check,n,x,s)),l-=x,s+=x,Y)break e}else t.head&&(t.head.comment=null);t.mode=DN;case DN:if(t.flags&512){for(;h<16;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Yr;break}d=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=yu;break;case BN:for(;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}r.adler=t.check=$N(d),d=0,h=0,t.mode=e1;case e1:if(t.havedict===0)return r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=d,t.bits=h,l$;r.adler=t.check=1,t.mode=yu;case yu:if(e===o$||e===ow)break e;case oE:if(t.last){d>>>=h&7,h-=h&7,t.mode=lE;break}for(;h<3;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}switch(t.last=d&1,d>>>=1,h-=1,d&3){case 0:t.mode=UN;break;case 1:if(g$(t),t.mode=aw,e===ow){d>>>=2,h-=2;break e}break;case 2:t.mode=zN;break;case 3:r.msg="invalid block type",t.mode=Yr}d>>>=2,h-=2;break;case UN:for(d>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Yr;break}if(t.length=d&65535,d=0,h=0,t.mode=aE,e===ow)break e;case aE:t.mode=FN;case FN:if(x=t.length,x){if(x>l&&(x=l),x>c&&(x=c),x===0)break e;i.set(n.subarray(s,s+x),o),l-=x,s+=x,c-=x,o+=x,t.length-=x;break}t.mode=yu;break;case zN:for(;h<14;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.nlen=(d&31)+257,d>>>=5,h-=5,t.ndist=(d&31)+1,d>>>=5,h-=5,t.ncode=(d&15)+4,d>>>=4,h-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Yr;break}t.have=0,t.mode=WN;case WN:for(;t.have<t.ncode;){for(;h<3;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.lens[K[t.have++]]=d&7,d>>>=3,h-=3}for(;t.have<19;)t.lens[K[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,U={bits:t.lenbits},ee=Ag(s$,t.lens,0,19,t.lencode,0,t.work,U),t.lenbits=U.bits,ee){r.msg="invalid code lengths set",t.mode=Yr;break}t.have=0,t.mode=VN;case VN:for(;t.have<t.nlen+t.ndist;){for(;I=t.lencode[d&(1<<t.lenbits)-1],C=I>>>24,D=I>>>16&255,k=I&65535,!(C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(k<16)d>>>=C,h-=C,t.lens[t.have++]=k;else{if(k===16){for(V=C+2;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(d>>>=C,h-=C,t.have===0){r.msg="invalid bit length repeat",t.mode=Yr;break}Y=t.lens[t.have-1],x=3+(d&3),d>>>=2,h-=2}else if(k===17){for(V=C+3;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=C,h-=C,Y=0,x=3+(d&7),d>>>=3,h-=3}else{for(V=C+7;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=C,h-=C,Y=0,x=11+(d&127),d>>>=7,h-=7}if(t.have+x>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Yr;break}for(;x--;)t.lens[t.have++]=Y}}if(t.mode===Yr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Yr;break}if(t.lenbits=9,U={bits:t.lenbits},ee=Ag(oB,t.lens,0,t.nlen,t.lencode,0,t.work,U),t.lenbits=U.bits,ee){r.msg="invalid literal/lengths set",t.mode=Yr;break}if(t.distbits=6,t.distcode=t.distdyn,U={bits:t.distbits},ee=Ag(aB,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,U),t.distbits=U.bits,ee){r.msg="invalid distances set",t.mode=Yr;break}if(t.mode=aw,e===ow)break e;case aw:t.mode=lw;case lw:if(l>=6&&c>=258){r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=d,t.bits=h,JX(r,_),o=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,l=r.avail_in,d=t.hold,h=t.bits,t.mode===yu&&(t.back=-1);break}for(t.back=0;I=t.lencode[d&(1<<t.lenbits)-1],C=I>>>24,D=I>>>16&255,k=I&65535,!(C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(D&&(D&240)===0){for(F=C,Q=D,G=k;I=t.lencode[G+((d&(1<<F+Q)-1)>>F)],C=I>>>24,D=I>>>16&255,k=I&65535,!(F+C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=F,h-=F,t.back+=F}if(d>>>=C,h-=C,t.back+=C,t.length=k,D===0){t.mode=KN;break}if(D&32){t.back=-1,t.mode=yu;break}if(D&64){r.msg="invalid literal/length code",t.mode=Yr;break}t.extra=D&15,t.mode=HN;case HN:if(t.extra){for(V=t.extra;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=GN;case GN:for(;I=t.distcode[d&(1<<t.distbits)-1],C=I>>>24,D=I>>>16&255,k=I&65535,!(C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if((D&240)===0){for(F=C,Q=D,G=k;I=t.distcode[G+((d&(1<<F+Q)-1)>>F)],C=I>>>24,D=I>>>16&255,k=I&65535,!(F+C<=h);){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}d>>>=F,h-=F,t.back+=F}if(d>>>=C,h-=C,t.back+=C,D&64){r.msg="invalid distance code",t.mode=Yr;break}t.offset=k,t.extra=D&15,t.mode=jN;case jN:if(t.extra){for(V=t.extra;h<V;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Yr;break}t.mode=qN;case qN:if(c===0)break e;if(x=_-c,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Yr;break}x>t.wnext?(x-=t.wnext,A=t.wsize-x):A=t.wnext-x,x>t.length&&(x=t.length),P=t.window}else P=i,A=o-t.offset,x=t.length;x>c&&(x=c),c-=x,t.length-=x;do i[o++]=P[A++];while(--x);t.length===0&&(t.mode=lw);break;case KN:if(c===0)break e;i[o++]=t.length,c--,t.mode=lw;break;case lE:if(t.wrap){for(;h<32;){if(l===0)break e;l--,d|=n[s++]<<h,h+=8}if(_-=c,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?pl(t.check,i,_,o-_):mA(t.check,i,_,o-_)),_=c,t.wrap&4&&(t.flags?d:$N(d))!==t.check){r.msg="incorrect data check",t.mode=Yr;break}d=0,h=0}t.mode=YN;case YN:if(t.wrap&&t.flags){for(;h<32;){if(l===0)break e;l--,d+=n[s++]<<h,h+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Yr;break}d=0,h=0}t.mode=XN;case XN:ee=a$;break e;case Yr:ee=lB;break e;case cB:return uB;case fB:default:return ua}return r.next_out=o,r.avail_out=c,r.next_in=s,r.avail_in=l,t.hold=d,t.bits=h,(t.wsize||_!==r.avail_out&&t.mode<Yr&&(t.mode<lE||e!==TN))&&gB(r,r.output,r.next_out,_-r.avail_out),y-=r.avail_in,_-=r.avail_out,r.total_in+=y,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?pl(t.check,i,_,r.next_out-_):mA(t.check,i,_,r.next_out-_)),r.data_type=t.bits+(t.last?64:0)+(t.mode===yu?128:0)+(t.mode===aw||t.mode===aE?256:0),(y===0&&_===0||e===TN)&&ee===Jh&&(ee=u$),ee},v$=r=>{if(hd(r))return ua;let e=r.state;return e.window&&(e.window=null),r.state=null,Jh},w$=(r,e)=>{if(hd(r))return ua;const t=r.state;return(t.wrap&2)===0?ua:(t.head=e,e.done=!1,Jh)},_$=(r,e)=>{const t=e.length;let n,i,s;return hd(r)||(n=r.state,n.wrap!==0&&n.mode!==e1)?ua:n.mode===e1&&(i=1,i=mA(i,e,t,0),i!==n.check)?lB:(s=gB(r,e,t,t),s?(n.mode=cB,uB):(n.havedict=1,Jh))};var x$=dB,S$=pB,M$=hB,E$=m$,b$=mB,A$=y$,T$=v$,R$=w$,C$=_$,I$="pako inflate (from Nodeca project)",Tu={inflateReset:x$,inflateReset2:S$,inflateResetKeep:M$,inflateInit:E$,inflateInit2:b$,inflate:A$,inflateEnd:T$,inflateGetHeader:R$,inflateSetDictionary:C$,inflateInfo:I$};function N$(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var P$=N$;const yB=Object.prototype.toString,{Z_NO_FLUSH:L$,Z_FINISH:k$,Z_OK:Zg,Z_STREAM_END:fE,Z_NEED_DICT:hE,Z_STREAM_ERROR:O$,Z_DATA_ERROR:QN,Z_MEM_ERROR:D$}=rB;function vx(r){this.options=iB.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZX,this.strm.avail_out=0;let t=Tu.inflateInit2(this.strm,e.windowBits);if(t!==Zg)throw new Error(gA[t]);if(this.header=new P$,Tu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=yA.string2buf(e.dictionary):yB.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Tu.inflateSetDictionary(this.strm,e.dictionary),t!==Zg)))throw new Error(gA[t])}vx.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?k$:L$,yB.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Tu.inflate(t,o),s===hE&&i&&(s=Tu.inflateSetDictionary(t,i),s===Zg?s=Tu.inflate(t,o):s===QN&&(s=hE));t.avail_in>0&&s===fE&&t.state.wrap>0&&r[t.next_in]!==0;)Tu.inflateReset(t),s=Tu.inflate(t,o);switch(s){case O$:case QN:case hE:case D$:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||s===fE))if(this.options.to==="string"){let c=yA.utf8border(t.output,t.next_out),d=t.next_out-c,h=yA.buf2string(t.output,c);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(c,c+d),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Zg&&l===0)){if(s===fE)return s=Tu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};vx.prototype.onData=function(r){this.chunks.push(r)};vx.prototype.onEnd=function(r){r===Zg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iB.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function B$(r,e){const t=new vx(e);if(t.push(r),t.err)throw t.msg||gA[t.err];return t.result}var U$=B$,F$={inflate:U$};const{inflate:z$}=F$;var W$=z$,dE={exports:{}},JN;function V$(){return JN||(JN=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function s(c,d,h,y,_){if(typeof h!="function")throw new TypeError("The listener must be a function");var x=new i(h,y||c,_),A=t?t+d:d;return c._events[A]?c._events[A].fn?c._events[A]=[c._events[A],x]:c._events[A].push(x):(c._events[A]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,y;if(this._eventsCount===0)return d;for(y in h=this._events)e.call(h,y)&&d.push(t?y.slice(1):y);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=t?t+d:d,y=this._events[h];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,x=y.length,A=new Array(x);_<x;_++)A[_]=y[_].fn;return A},l.prototype.listenerCount=function(d){var h=t?t+d:d,y=this._events[h];return y?y.fn?1:y.length:0},l.prototype.emit=function(d,h,y,_,x,A){var P=t?t+d:d;if(!this._events[P])return!1;var I=this._events[P],C=arguments.length,D,k;if(I.fn){switch(I.once&&this.removeListener(d,I.fn,void 0,!0),C){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,h),!0;case 3:return I.fn.call(I.context,h,y),!0;case 4:return I.fn.call(I.context,h,y,_),!0;case 5:return I.fn.call(I.context,h,y,_,x),!0;case 6:return I.fn.call(I.context,h,y,_,x,A),!0}for(k=1,D=new Array(C-1);k<C;k++)D[k-1]=arguments[k];I.fn.apply(I.context,D)}else{var F=I.length,Q;for(k=0;k<F;k++)switch(I[k].once&&this.removeListener(d,I[k].fn,void 0,!0),C){case 1:I[k].fn.call(I[k].context);break;case 2:I[k].fn.call(I[k].context,h);break;case 3:I[k].fn.call(I[k].context,h,y);break;case 4:I[k].fn.call(I[k].context,h,y,_);break;default:if(!D)for(Q=1,D=new Array(C-1);Q<C;Q++)D[Q-1]=arguments[Q];I[k].fn.apply(I[k].context,D)}}return!0},l.prototype.on=function(d,h,y){return s(this,d,h,y,!1)},l.prototype.once=function(d,h,y){return s(this,d,h,y,!0)},l.prototype.removeListener=function(d,h,y,_){var x=t?t+d:d;if(!this._events[x])return this;if(!h)return o(this,x),this;var A=this._events[x];if(A.fn)A.fn===h&&(!_||A.once)&&(!y||A.context===y)&&o(this,x);else{for(var P=0,I=[],C=A.length;P<C;P++)(A[P].fn!==h||_&&!A[P].once||y&&A[P].context!==y)&&I.push(A[P]);I.length?this._events[x]=I.length===1?I[0]:I:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l})(dE)),dE.exports}var H$=V$();const G$=Xa(H$);function j$(r,e){return Array.apply(0,new Array(Math.ceil(r.length/e))).map((t,n)=>r.slice(n*e,(n+1)*e))}const rh=r=>"version"in r;function q$(r){return new TextDecoder("utf-8").decode(r)}function eP(r){return rR.encode(r)}function vB(r){return mn.from(r,"base64")}function Kc(r){return"accounts"in r}async function K$(r){const e=(await Et.findProgramAddress([],r))[0];return await Et.createWithSeed(e,Y$(),r)}function Y$(){return"anchor:idl"}const X$=$n.struct([$n.publicKey("authority"),$n.vecU8("data")]);function $$(r){return X$.decode(r)}function Z$(r){const e=["name","path","account","relations","generic"],t=s=>s.split(".").map(EX).join("."),n=s=>{for(const o in s){const l=s[o];e.includes(o)?s[o]=Array.isArray(l)?l.map(t):t(l):typeof l=="object"&&n(l)}},i=structuredClone(r);return n(i),i}function Jp(r,e,t,n){return r!=null&&r.length?r[0].name?t(r):n(r):e()}function Q$(r){const e=new Map;return r.errors&&r.errors.forEach(t=>{var n;let i=(n=t.msg)!==null&&n!==void 0?n:t.name;e.set(t.code,i)}),e}function J$(r,...e){if(r.args.length!=e.length)throw new Error("Invalid argument length");const t={};let n=0;return r.args.forEach(i=>{t[i.name]=e[n],n+=1}),t}function wB(r,e={}){r.forEach(t=>{if(Kc(t))wB(t.accounts,e[t.name]);else if(!e[t.name])throw new Error(`Account \`${t.name}\` not provided.`)})}function Ga(r){return r instanceof Et?r:new Et(r)}class eZ extends TypeError{constructor(e,t){let n;const{message:i,...s}=e,{path:o}=e,l=o.length===0?i:"At path: "+o.join(".")+" -- "+i;super(l),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>{var c;return(c=n)!=null?c:n=[e,...t()]}}}function tZ(r){return f0(r)&&typeof r[Symbol.iterator]=="function"}function f0(r){return typeof r=="object"&&r!=null}function rf(r){return typeof r=="string"?JSON.stringify(r):""+r}function nZ(r){const{done:e,value:t}=r.next();return e?void 0:t}function rZ(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:l,message:c="Expected a value of type `"+o+"`"+(l?" with refinement `"+l+"`":"")+", but received: `"+rf(n)+"`"}=r;return{value:n,type:o,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*tP(r,e,t,n){tZ(r)||(r=[r]);for(const i of r){const s=rZ(i,e,t,n);s&&(yield s)}}function*iR(r,e,t){t===void 0&&(t={});const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,l={path:n,branch:i};if(s&&(r=e.coercer(r,l),o&&e.type!=="type"&&f0(e.schema)&&f0(r)&&!Array.isArray(r)))for(const d in r)e.schema[d]===void 0&&delete r[d];let c=!0;for(const d of e.validator(r,l))c=!1,yield[d,void 0];for(let[d,h,y]of e.entries(r,l)){const _=iR(h,y,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,h],coerce:s,mask:o});for(const x of _)x[0]?(c=!1,yield[x[0],void 0]):s&&(h=x[1],d===void 0?r=h:r instanceof Map?r.set(d,h):r instanceof Set?r.add(h):f0(r)&&(r[d]=h))}if(c)for(const d of e.refiner(r,l))c=!1,yield[d,void 0];c&&(yield[void 0,r])}class lf{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:l=function*(){}}=e;this.type=t,this.schema=n,this.entries=l,this.coercer=o,i?this.validator=(c,d)=>{const h=i(c,d);return tP(h,d,this,c)}:this.validator=()=>[],s?this.refiner=(c,d)=>{const h=s(c,d);return tP(h,d,this,c)}:this.refiner=()=>[]}assert(e){return iZ(e,this)}create(e){return sR(e,this)}is(e){return _B(e,this)}mask(e){return sZ(e,this)}validate(e,t){return t===void 0&&(t={}),Ly(e,this,t)}}function iZ(r,e){const t=Ly(r,e);if(t[0])throw t[0]}function sR(r,e){const t=Ly(r,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function sZ(r,e){const t=Ly(r,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function _B(r,e){return!Ly(r,e)[0]}function Ly(r,e,t){t===void 0&&(t={});const n=iR(r,e,t),i=nZ(n);return i[0]?[new eZ(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function ky(r,e){return new lf({type:r,schema:null,validator:e})}function oZ(){return ky("any",()=>!0)}function pE(r){return new lf({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+rf(e)}})}function aZ(){return ky("boolean",r=>typeof r=="boolean")}function nP(r){const e=rf(r);return new lf({type:"literal",schema:r,validator(t){return t===r||"Expected the literal `"+e+"`, but received: "+rf(t)}})}function uw(r){return new lf({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function S_(){return ky("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+rf(r))}function M_(r){return new lf({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Dh(){return ky("string",r=>typeof r=="string"||"Expected a string, but received: "+rf(r))}function Qc(r){const e=Object.keys(r);return new lf({type:"type",schema:r,*entries(t){if(f0(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return f0(t)||"Expected an object, but received: "+rf(t)}})}function xB(r){const e=r.map(t=>t.type).join(" | ");return new lf({type:"union",schema:null,coercer(t,n){return(r.find(s=>{const[o]=s.validate(t,{coerce:!0});return!o})||oR()).coercer(t,n)},validator(t,n){const i=[];for(const s of r){const[...o]=iR(t,s,n),[l]=o;if(l[0])for(const[c]of o)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+rf(t),...i]}})}function oR(){return ky("unknown",()=>!0)}function lZ(r,e,t){return new lf({...r,coercer:(n,i)=>_B(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}const rP=99;async function uZ(r,e,t){if(e.length<=rP)return await iP(r,e,t);{const n=j$(e,rP);return(await Promise.all(n.map(s=>iP(r,s,t)))).flat()}}async function iP(r,e,t){const n=t??r.commitment,{value:i,context:s}=await r.getMultipleAccountsInfoAndContext(e,n);return i.map((l,c)=>l===null?null:{publicKey:e[c],account:l,context:s})}async function cZ(r,e,t,n,i){var s;t&&t.length>0&&e.sign(...t);const o=e._compile(),l=o.serialize(),d=e._serialize(l).toString("base64"),h={encoding:"base64",commitment:n??r.commitment};if(i){const A=(Array.isArray(i)?i:o.nonProgramIds()).map(P=>P.toBase58());h.accounts={encoding:"base64",addresses:A}}t&&t.length>0&&(h.sigVerify=!0);const y=[d,h],_=await r._rpcRequest("simulateTransaction",y),x=sR(_,pZ);if("error"in x){let A;if("data"in x.error&&(A=(s=x.error.data)===null||s===void 0?void 0:s.logs,A&&Array.isArray(A))){const P=`
    `,I=P+A.join(P);console.error(x.error.message,I)}throw new tf("failed to simulate transaction: "+x.error.message,A)}return x.result}function fZ(r){return lZ(SB(r),hZ,e=>"error"in e?e:{...e,result:sR(e.result,r)})}const hZ=SB(oR());function SB(r){return xB([Qc({jsonrpc:nP("2.0"),id:Dh(),result:r}),Qc({jsonrpc:nP("2.0"),id:Dh(),error:Qc({code:oR(),message:Dh(),data:M_(oZ())})})])}function dZ(r){return fZ(Qc({context:Qc({slot:S_()}),value:r}))}const pZ=dZ(Qc({err:uw(xB([Qc({}),Dh()])),logs:uw(pE(Dh())),accounts:M_(uw(pE(uw(Qc({executable:aZ(),owner:Dh(),lamports:S_(),data:pE(Dh()),rentEpoch:M_(S_())}))))),unitsConsumed:M_(S_())}));class Qg{constructor(e,t,n=Qg.defaultOptions()){this.connection=e,this.wallet=t,this.opts=n,this.publicKey=t==null?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t=Qg.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var i,s,o,l;if(n===void 0&&(n=this.opts),rh(e))t&&e.sign(t);else if(e.feePayer=(i=e.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,t)for(const d of t)e.partialSign(d);e=await this.wallet.signTransaction(e);const c=e.serialize();try{return await sP(this.connection,c,n)}catch(d){if(d instanceof vA){const h=eP(rh(e)?((s=e.signatures)===null||s===void 0?void 0:s[0])||new Uint8Array:(o=e.signature)!==null&&o!==void 0?o:new Uint8Array),y=rh(e)?0:void 0,_=await this.connection.getTransaction(h,{commitment:"confirmed",maxSupportedTransactionVersion:y});if(_){const x=(l=_.meta)===null||l===void 0?void 0:l.logMessages;throw x?new tf(d.message,x):d}else throw d}else throw d}}async sendAll(e,t){var n,i,s;t===void 0&&(t=this.opts);const o=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let l=e.map(h=>{var y,_;if(rh(h.tx)){let x=h.tx;return h.signers&&x.sign(h.signers),x}else{let x=h.tx,A=(y=h.signers)!==null&&y!==void 0?y:[];return x.feePayer=(_=x.feePayer)!==null&&_!==void 0?_:this.wallet.publicKey,x.recentBlockhash=o,A.forEach(P=>{x.partialSign(P)}),x}});const c=await this.wallet.signAllTransactions(l),d=[];for(let h=0;h<l.length;h+=1){const y=c[h],_=y.serialize();try{d.push(await sP(this.connection,_,t))}catch(x){if(x instanceof vA){const A=eP(rh(y)?((n=y.signatures)===null||n===void 0?void 0:n[0])||new Uint8Array:(i=y.signature)!==null&&i!==void 0?i:new Uint8Array),P=rh(y)?0:void 0,I=await this.connection.getTransaction(A,{commitment:"confirmed",maxSupportedTransactionVersion:P});if(I){const C=(s=I.meta)===null||s===void 0?void 0:s.logMessages;throw C?new tf(x.message,C):x}else throw x}else throw x}}return d}async simulate(e,t,n,i){let s=(await this.connection.getLatestBlockhash(n??this.connection.commitment)).blockhash,o;if(rh(e)?(t&&t.length>0&&(e.sign(t),e=await this.wallet.signTransaction(e)),o=await this.connection.simulateTransaction(e,{commitment:n})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=s,t&&t.length>0&&(e=await this.wallet.signTransaction(e)),o=await cZ(this.connection,e,t,n,i)),o.value.err)throw new mZ(o.value);return o.value}}class mZ extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function sP(r,e,t){const n=t?{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment,maxRetries:t.maxRetries,minContextSlot:t.minContextSlot}:{};let i;const s=Date.now();for(;Date.now()-s<6e4;)try{const o=await r.sendRawTransaction(e,n);if(t!=null&&t.blockhash)if(n.maxRetries===0){const l=AbortSignal.timeout(15e3);i=(await r.confirmTransaction({abortSignal:l,signature:o,...t.blockhash},t&&t.commitment)).value}else i=(await r.confirmTransaction({signature:o,...t.blockhash},t&&t.commitment)).value;else i=(await r.confirmTransaction(o,t&&t.commitment)).value;if(i.err)throw new vA(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}catch(o){if(o.name==="TimeoutError")continue;throw o}throw Error("Transaction failed to confirm in 60s")}class vA extends Error{constructor(e){super(e)}}function wA(){return Qg.local()}var gZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ZI<"u"?ZI:typeof self<"u"?self:{},it={};Object.defineProperty(it,"__esModule",{value:!0});var MB=it.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=wU=it.ANCHOR_ERROR__REQUIRE_VIOLATED=vU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=yU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=gU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=mU=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=pU=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=dU=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=hU=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=fU=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=cU=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=uU=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=lU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=aU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=oU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=sU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=iU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=rU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=nU=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=tU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=eU=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=JB=it.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=QB=it.ANCHOR_ERROR__CONSTRAINT_SPACE=ZB=it.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=$B=it.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=XB=it.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=YB=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=KB=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=qB=it.ANCHOR_ERROR__CONSTRAINT_ZERO=jB=it.ANCHOR_ERROR__CONSTRAINT_ADDRESS=GB=it.ANCHOR_ERROR__CONSTRAINT_CLOSE=HB=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=VB=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=WB=it.ANCHOR_ERROR__CONSTRAINT_STATE=zB=it.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=FB=it.ANCHOR_ERROR__CONSTRAINT_SEEDS=UB=it.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=BB=it.ANCHOR_ERROR__CONSTRAINT_OWNER=DB=it.ANCHOR_ERROR__CONSTRAINT_RAW=OB=it.ANCHOR_ERROR__CONSTRAINT_SIGNER=kB=it.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=LB=it.ANCHOR_ERROR__CONSTRAINT_MUT=PB=it.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=NB=it.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=IB=it.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=CB=it.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=RB=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=TB=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=AB=it.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=bB=it.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,EB=it.ANCHOR_ERROR__DEPRECATED=jU=it.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=GU=it.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=HU=it.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=VU=it.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=WU=it.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=zU=it.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=FU=it.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=UU=it.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=BU=it.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=DU=it.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=OU=it.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=kU=it.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=LU=it.ANCHOR_ERROR__INVALID_PROGRAM_ID=PU=it.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=NU=it.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=IU=it.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=CU=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=RU=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=TU=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=AU=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=bU=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=EU=it.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=MU=it.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=SU=it.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=xU=it.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=_U=it.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,bB=it.ANCHOR_ERROR__INSTRUCTION_MISSING=100,AB=it.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,TB=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,RB=it.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,CB=it.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,IB=it.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,NB=it.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,PB=it.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,LB=it.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,kB=it.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,OB=it.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,DB=it.ANCHOR_ERROR__CONSTRAINT_RAW=2003,BB=it.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,UB=it.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,FB=it.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,zB=it.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,WB=it.ANCHOR_ERROR__CONSTRAINT_STATE=2008,VB=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,HB=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,GB=it.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,jB=it.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,qB=it.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,KB=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,YB=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,XB=it.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,$B=it.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,ZB=it.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,QB=it.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,JB=it.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,eU=it.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,tU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,nU=it.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,rU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,iU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,sU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,oU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,aU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,lU=it.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,uU=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,cU=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,fU=it.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,hU=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,dU=it.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,pU=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,mU=it.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,gU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,yU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,vU=it.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,wU=it.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;MB=it.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var _U=it.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,xU=it.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,SU=it.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,MU=it.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,EU=it.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,bU=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,AU=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,TU=it.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,RU=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,CU=it.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,IU=it.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,NU=it.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,PU=it.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,LU=it.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,kU=it.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,OU=it.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,DU=it.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,BU=it.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,UU=it.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,FU=it.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,zU=it.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,WU=it.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,VU=it.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,HU=it.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,GU=it.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,jU=it.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;EB=it.ANCHOR_ERROR__DEPRECATED=5e3;const yZ=new Map;function qU(r){return yZ.get(r)!==void 0}class qc extends Error{constructor(e){super(e),this.name="IdlError"}}class Oy{constructor(e){this.stack=e}static parse(e){var t;const n=/^Program (\w*) invoke/,i=/^Program \w* success/,s=[];for(let o=0;o<e.length;o++){if(i.exec(e[o])){s.pop();continue}const l=(t=n.exec(e[o]))===null||t===void 0?void 0:t[1];l&&s.push(new Et(l))}return new Oy(s)}}class Tg extends Error{constructor(e,t,n,i,s,o){super(n.join(`
`).replace("Program log: ","")),this.errorLogs=n,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:o,origin:s},this._programErrorStack=Oy.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(_=>_.startsWith("Program log: AnchorError"));if(t===-1)return null;const n=e[t],i=[n];let s;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const _=/^Program log: (.*)$/,x=_.exec(e[t+2])[1],A=_.exec(e[t+4])[1];s=[new Et(x),new Et(A)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const _=/^Program log: (Left|Right): (.*)$/,x=_.exec(e[t+1])[2],A=_.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),s=[x,A]}}const l=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),d=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),y=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(l){const[_,x,A]=l.slice(1,4),P={code:_,number:parseInt(x)};return new Tg(P,A,i,e,void 0,s)}else if(d){const[_,x,A,P,I]=d.slice(1,6),C={code:A,number:parseInt(P)},D={file:_,line:parseInt(x)};return new Tg(C,I,i,e,D,s)}else if(y){const[_,x,A,P]=y.slice(1,5),I=_,C={code:x,number:parseInt(A)};return new Tg(C,P,i,e,I,s)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class t1 extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=Oy.parse(n))}static parse(e,t){const n=e.toString();let i;if(n.includes("custom program error:")){let l=n.split("custom program error: ");if(l.length!==2)return null;i=l[1]}else{const l=n.match(/"Custom":([0-9]+)}/g);if(!l||l.length>1)return null;i=l[0].match(/([0-9]+)/g)[0]}let s;try{s=parseInt(i)}catch{return null}let o=t.get(s);return o!==void 0?new t1(s,o,e.logs):(o=vZ.get(s),o!==void 0?new t1(s,o,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function KU(r,e){qU("debug-logs")&&console.log("Translating error:",r);const t=Tg.parse(r.logs);if(t)return t;const n=t1.parse(r,e);if(n)return n;if(r.logs){const i={get:function(s,o){return o==="programErrorStack"?s.programErrorStack.stack:o==="program"?s.programErrorStack.stack[r.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return r.programErrorStack=Oy.parse(r.logs),new Proxy(r,i)}return r}const Zt={InstructionMissing:bB,InstructionFallbackNotFound:AB,InstructionDidNotDeserialize:TB,InstructionDidNotSerialize:RB,IdlInstructionStub:CB,IdlInstructionInvalidProgram:IB,IdlAccountNotEmpty:NB,EventInstructionStub:PB,ConstraintMut:LB,ConstraintHasOne:kB,ConstraintSigner:OB,ConstraintRaw:DB,ConstraintOwner:BB,ConstraintRentExempt:UB,ConstraintSeeds:FB,ConstraintExecutable:zB,ConstraintState:WB,ConstraintAssociated:VB,ConstraintAssociatedInit:HB,ConstraintClose:GB,ConstraintAddress:jB,ConstraintZero:qB,ConstraintTokenMint:KB,ConstraintTokenOwner:YB,ConstraintMintMintAuthority:XB,ConstraintMintFreezeAuthority:$B,ConstraintMintDecimals:ZB,ConstraintSpace:QB,ConstraintAccountIsNone:JB,ConstraintTokenTokenProgram:eU,ConstraintMintTokenProgram:tU,ConstraintAssociatedTokenTokenProgram:nU,ConstraintMintGroupPointerExtension:rU,ConstraintMintGroupPointerExtensionAuthority:iU,ConstraintMintGroupPointerExtensionGroupAddress:sU,ConstraintMintGroupMemberPointerExtension:oU,ConstraintMintGroupMemberPointerExtensionAuthority:aU,ConstraintMintGroupMemberPointerExtensionMemberAddress:lU,ConstraintMintMetadataPointerExtension:uU,ConstraintMintMetadataPointerExtensionAuthority:cU,ConstraintMintMetadataPointerExtensionMetadataAddress:fU,ConstraintMintCloseAuthorityExtension:hU,ConstraintMintCloseAuthorityExtensionAuthority:dU,ConstraintMintPermanentDelegateExtension:pU,ConstraintMintPermanentDelegateExtensionDelegate:mU,ConstraintMintTransferHookExtension:gU,ConstraintMintTransferHookExtensionAuthority:yU,ConstraintMintTransferHookExtensionProgramId:vU,RequireViolated:wU,RequireEqViolated:MB,RequireKeysEqViolated:_U,RequireNeqViolated:xU,RequireKeysNeqViolated:SU,RequireGtViolated:MU,RequireGteViolated:EU,AccountDiscriminatorAlreadySet:bU,AccountDiscriminatorNotFound:AU,AccountDiscriminatorMismatch:TU,AccountDidNotDeserialize:RU,AccountDidNotSerialize:CU,AccountNotEnoughKeys:IU,AccountNotMutable:NU,AccountOwnedByWrongProgram:PU,InvalidProgramId:LU,InvalidProgramExecutable:kU,AccountNotSigner:OU,AccountNotSystemOwned:DU,AccountNotInitialized:BU,AccountNotProgramData:UU,AccountNotAssociatedTokenAccount:FU,AccountSysvarMismatch:zU,AccountReallocExceedsLimit:WU,AccountDuplicateReallocs:VU,DeclaredProgramIdMismatch:HU,TryingToInitPayerAsProgramAccount:GU,InvalidNumericConversion:jU,Deprecated:EB},vZ=new Map([[Zt.InstructionMissing,"Instruction discriminator not provided"],[Zt.InstructionFallbackNotFound,"Fallback functions are not supported"],[Zt.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[Zt.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[Zt.IdlInstructionStub,"The program was compiled without idl instructions"],[Zt.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[Zt.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[Zt.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[Zt.ConstraintMut,"A mut constraint was violated"],[Zt.ConstraintHasOne,"A has one constraint was violated"],[Zt.ConstraintSigner,"A signer constraint was violated"],[Zt.ConstraintRaw,"A raw constraint was violated"],[Zt.ConstraintOwner,"An owner constraint was violated"],[Zt.ConstraintRentExempt,"A rent exemption constraint was violated"],[Zt.ConstraintSeeds,"A seeds constraint was violated"],[Zt.ConstraintExecutable,"An executable constraint was violated"],[Zt.ConstraintState,"Deprecated Error, feel free to replace with something else"],[Zt.ConstraintAssociated,"An associated constraint was violated"],[Zt.ConstraintAssociatedInit,"An associated init constraint was violated"],[Zt.ConstraintClose,"A close constraint was violated"],[Zt.ConstraintAddress,"An address constraint was violated"],[Zt.ConstraintZero,"Expected zero account discriminant"],[Zt.ConstraintTokenMint,"A token mint constraint was violated"],[Zt.ConstraintTokenOwner,"A token owner constraint was violated"],[Zt.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[Zt.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[Zt.ConstraintMintDecimals,"A mint decimals constraint was violated"],[Zt.ConstraintSpace,"A space constraint was violated"],[Zt.ConstraintAccountIsNone,"A required account for the constraint is None"],[Zt.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[Zt.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[Zt.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[Zt.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[Zt.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[Zt.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[Zt.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[Zt.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[Zt.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[Zt.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[Zt.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[Zt.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[Zt.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[Zt.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[Zt.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[Zt.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[Zt.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[Zt.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[Zt.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[Zt.RequireViolated,"A require expression was violated"],[Zt.RequireEqViolated,"A require_eq expression was violated"],[Zt.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[Zt.RequireNeqViolated,"A require_neq expression was violated"],[Zt.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[Zt.RequireGtViolated,"A require_gt expression was violated"],[Zt.RequireGteViolated,"A require_gte expression was violated"],[Zt.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[Zt.AccountDiscriminatorNotFound,"No discriminator was found on the account"],[Zt.AccountDiscriminatorMismatch,"Account discriminator did not match what was expected"],[Zt.AccountDidNotDeserialize,"Failed to deserialize the account"],[Zt.AccountDidNotSerialize,"Failed to serialize the account"],[Zt.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[Zt.AccountNotMutable,"The given account is not mutable"],[Zt.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[Zt.InvalidProgramId,"Program ID was not as expected"],[Zt.InvalidProgramExecutable,"Program account is not executable"],[Zt.AccountNotSigner,"The given account did not sign"],[Zt.AccountNotSystemOwned,"The given account is not owned by the system program"],[Zt.AccountNotInitialized,"The program expected this account to be already initialized"],[Zt.AccountNotProgramData,"The given account is not a program data account"],[Zt.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[Zt.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[Zt.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[Zt.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[Zt.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[Zt.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[Zt.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[Zt.Deprecated,"The API being used is deprecated and should no longer be used"]]);class lr{static fieldLayout(e,t=[],n){const i=e.name;switch(e.type){case"bool":return $n.bool(i);case"u8":return $n.u8(i);case"i8":return $n.i8(i);case"u16":return $n.u16(i);case"i16":return $n.i16(i);case"u32":return $n.u32(i);case"i32":return $n.i32(i);case"f32":return $n.f32(i);case"u64":return $n.u64(i);case"i64":return $n.i64(i);case"f64":return $n.f64(i);case"u128":return $n.u128(i);case"i128":return $n.i128(i);case"u256":return $n.u256(i);case"i256":return $n.i256(i);case"bytes":return $n.vecU8(i);case"string":return $n.str(i);case"pubkey":return $n.publicKey(i);default:{if("option"in e.type)return $n.option(lr.fieldLayout({type:e.type.option},t,n),i);if("vec"in e.type)return $n.vec(lr.fieldLayout({type:e.type.vec},t,n),i);if("array"in e.type){let[s,o]=e.type.array;return o=lr.resolveArrayLen(o,n),$n.array(lr.fieldLayout({type:s},t,n),o,i)}if("defined"in e.type){if(!t)throw new qc("User defined types not provided");const s=e.type.defined.name,o=t.find(l=>l.name===s);if(!o)throw new qc(`Type not found: ${e.name}`);return lr.typeDefLayout({typeDef:o,types:t,genericArgs:n??e.type.defined.generics,name:i})}if("generic"in e.type){const s=n==null?void 0:n.at(0);if((s==null?void 0:s.kind)!=="type")throw new qc(`Invalid generic field: ${e.name}`);return lr.fieldLayout({...e,type:s.type},t)}throw new qc(`Not yet implemented: ${JSON.stringify(e.type)}`)}}}static typeDefLayout({typeDef:e,types:t,name:n,genericArgs:i}){switch(e.type.kind){case"struct":{const s=Jp(e.type.fields,()=>[],o=>o.map(l=>{const c=i&&lr.resolveGenericArgs({type:l.type,typeDef:e,genericArgs:i});return lr.fieldLayout(l,t,c)}),o=>o.map((l,c)=>{const d=i&&lr.resolveGenericArgs({type:l,typeDef:e,genericArgs:i});return lr.fieldLayout({name:c.toString(),type:l},t,d)}));return $n.struct(s,n)}case"enum":{const s=e.type.variants.map(o=>{const l=Jp(o.fields,()=>[],c=>c.map(d=>{const h=i&&lr.resolveGenericArgs({type:d.type,typeDef:e,genericArgs:i});return lr.fieldLayout(d,t,h)}),c=>c.map((d,h)=>{const y=i&&lr.resolveGenericArgs({type:d,typeDef:e,genericArgs:i});return lr.fieldLayout({name:h.toString(),type:d},t,y)}));return $n.struct(l,o.name)});return n!==void 0?$n.rustEnum(s).replicate(n):$n.rustEnum(s,n)}case"type":return lr.fieldLayout({type:e.type.alias,name:n},t)}}static typeSize(e,t,n){var i;switch(e){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in e)return 1+lr.typeSize(e.option,t,n);if("coption"in e)return 4+lr.typeSize(e.coption,t,n);if("vec"in e)return 1;if("array"in e){let[s,o]=e.array;return o=lr.resolveArrayLen(o,n),lr.typeSize(s,t,n)*o}if("defined"in e){const s=(i=t.types)===null||i===void 0?void 0:i.find(l=>l.name===e.defined.name);if(!s)throw new qc(`Type not found: ${JSON.stringify(e)}`);const o=l=>{const c=n??e.defined.generics,d=c&&lr.resolveGenericArgs({type:l,typeDef:s,genericArgs:c});return lr.typeSize(l,t,d)};switch(s.type.kind){case"struct":return Jp(s.type.fields,()=>[0],l=>l.map(c=>o(c.type)),l=>l.map(c=>o(c))).reduce((l,c)=>l+c,0);case"enum":{const l=s.type.variants.map(c=>Jp(c.fields,()=>[0],d=>d.map(h=>o(h.type)),d=>d.map(h=>o(h))).reduce((d,h)=>d+h,0));return Math.max(...l)+1}case"type":return lr.typeSize(s.type.alias,t,n)}}if("generic"in e){const s=n==null?void 0:n.at(0);if((s==null?void 0:s.kind)!=="type")throw new qc(`Invalid generic: ${e.generic}`);return lr.typeSize(s.type,t,n)}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}static resolveArrayLen(e,t){if(typeof e=="number")return e;if(t){const n=t.find(i=>i.kind==="const");(n==null?void 0:n.kind)==="const"&&(e=+n.value)}if(typeof e!="number")throw new qc("Generic array length did not resolve");return e}static resolveGenericArgs({type:e,typeDef:t,genericArgs:n,isDefined:i}){if(typeof e!="object")return null;for(const s in t.generics){const o=t.generics[s];if("generic"in e&&o.name===e.generic)return[n[s]];if("option"in e){const l=lr.resolveGenericArgs({type:e.option,typeDef:t,genericArgs:n,isDefined:i});if(!l||!i)return l;if(l[0].kind==="type")return[{kind:"type",type:{option:l[0].type}}]}if("vec"in e){const l=lr.resolveGenericArgs({type:e.vec,typeDef:t,genericArgs:n,isDefined:i});if(!l||!i)return l;if(l[0].kind==="type")return[{kind:"type",type:{vec:l[0].type}}]}if("array"in e){const[l,c]=e.array,d=typeof c=="object",h=lr.resolveGenericArgs({type:l,typeDef:t,genericArgs:n,isDefined:i})||[];if(d){const y=t.generics.findIndex(_=>_.name===c.generic);y!==-1&&h.push(n[y])}if(h.length>0){if(!i)return h;if(h[0].kind==="type"&&h[1].kind==="const")return[{kind:"type",type:{array:[h[0].type,+h[1].value]}}]}if(d&&o.name===c.generic){const y=n[s];return i?[{kind:"type",type:{array:[l,+y.value]}}]:[y]}return null}if("defined"in e)return e.defined.generics?e.defined.generics.flatMap(l=>{switch(l.kind){case"type":return lr.resolveGenericArgs({type:l.type,typeDef:t,genericArgs:n,isDefined:!0});case"const":return[l]}}).filter(l=>l!==null):null}return null}}class wZ{constructor(e){this.idl=e;const t=e.instructions.map(n=>{const i=n.name,s=n.args.map(l=>lr.fieldLayout(l,e.types)),o=$n.struct(s,i);return[i,{discriminator:n.discriminator,layout:o}]});this.ixLayouts=new Map(t)}encode(e,t){const n=mn.alloc(1e3),i=this.ixLayouts.get(e);if(!i)throw new Error(`Unknown method: ${e}`);const s=i.layout.encode(t,n),o=n.slice(0,s);return mn.concat([mn.from(i.discriminator),o])}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?mn.from(e,"hex"):rR.decode(e));for(const[n,i]of this.ixLayouts){const s=e.subarray(0,i.discriminator.length);if(s.equals(mn.from(i.discriminator)))return{name:n,data:i.layout.decode(e.subarray(s.length))}}return null}format(e,t){return Do.format(e,t,this.idl)}}class Do{static format(e,t,n){const i=n.instructions.find(c=>e.name===c.name);if(!i)return console.error("Invalid instruction given"),null;const s=i.args.map(c=>({name:c.name,type:Do.formatIdlType(c.type),data:Do.formatIdlData(c,e.data[c.name],n.types)})),o=Do.flattenIdlAccounts(i.accounts),l=t.map((c,d)=>d<o.length?{name:o[d].name,...c}:{name:void 0,...c});return{args:s,accounts:l}}static formatIdlType(e){if(typeof e=="string")return e;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("coption"in e)return`COption<${this.formatIdlType(e.coption)}>`;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;if("defined"in e){const t=e.defined.name;if(e.defined.generics){const n=e.defined.generics.map(i=>{switch(i.kind){case"type":return Do.formatIdlType(i.type);case"const":return i.value}}).join(", ");return`${t}<${n}>`}return t}throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if(typeof e.type=="string")return t.toString();if("vec"in e.type)return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i,n)).join(", ")+"]";if("option"in e.type)return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if("defined"in e.type){if(!n)throw new Error("User defined types not provided");const i=e.type.defined.name,s=n.find(o=>o.name===i);if(!s)throw new Error(`Type not found: ${i}`);return Do.formatIdlDataDefined(s,t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){switch(e.type.kind){case"struct":return"{ "+Jp(e.type.fields,()=>"",i=>Object.entries(t).map(([s,o])=>{const l=i.find(c=>c.name===s);if(!l)throw new Error(`Field not found: ${s}`);return s+": "+Do.formatIdlData(l,o,n)}).join(", "),i=>Object.entries(t).map(([s,o])=>s+": "+Do.formatIdlData({name:"",type:i[s]},o,n)).join(", "))+" }";case"enum":{const i=Object.keys(t)[0],s=e.type.variants.find(l=>l.name===i);if(!s)throw new Error(`Unable to find variant: ${i}`);const o=t[i];return Jp(s.fields,()=>i,l=>{const c=Object.keys(o).map(d=>{const h=o[d],y=l.find(_=>_.name===d);if(!y)throw new Error(`Field not found: ${d}`);return d+": "+Do.formatIdlData(y,h,n)}).join(", ");return`${i} { ${c} }`},l=>{const c=Object.entries(o).map(([d,h])=>d+": "+Do.formatIdlData({name:"",type:l[d]},h,n)).join(", ");return`${i} { ${c} }`})}case"type":return Do.formatIdlType(e.type.alias)}}static flattenIdlAccounts(e,t){return e.map(n=>{const i=_Z(n.name);if(n.hasOwnProperty("accounts")){const s=t?`${t} > ${i}`:i;return Do.flattenIdlAccounts(n.accounts,s)}else return{...n,name:t?`${t} > ${i}`:i}}).flat()}}function _Z(r){const e=r.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}class xZ{constructor(e){if(this.idl=e,!e.accounts){this.accountLayouts=new Map;return}const t=e.types;if(!t)throw new Error("Accounts require `idl.types`");const n=e.accounts.map(i=>{const s=t.find(o=>o.name===i.name);if(!s)throw new Error(`Account not found: ${i.name}`);return[i.name,{discriminator:i.discriminator,layout:lr.typeDefLayout({typeDef:s,types:t})}]});this.accountLayouts=new Map(n)}async encode(e,t){const n=mn.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const s=i.layout.encode(t,n),o=n.slice(0,s),l=this.accountDiscriminator(e);return mn.concat([l,o])}decode(e,t){const n=this.accountDiscriminator(e);if(n.compare(t.slice(0,n.length)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){for(const[t,n]of this.accountLayouts)if(e.subarray(0,n.discriminator.length).equals(mn.from(n.discriminator)))return this.decodeUnchecked(t,e);throw new Error("Account not found")}decodeUnchecked(e,t){const n=this.accountDiscriminator(e),i=t.subarray(n.length),s=this.accountLayouts.get(e);if(!s)throw new Error(`Unknown account: ${e}`);return s.layout.decode(i)}memcmp(e,t){const n=this.accountDiscriminator(e);return{offset:0,bytes:rR.encode(t?mn.concat([n,t]):n)}}size(e){return this.accountDiscriminator(e).length+lr.typeSize({defined:{name:e}},this.idl)}accountDiscriminator(e){var t;const n=(t=this.idl.accounts)===null||t===void 0?void 0:t.find(i=>i.name===e);if(!n)throw new Error(`Account not found: ${e}`);return mn.from(n.discriminator)}}class SZ{constructor(e){if(!e.events){this.layouts=new Map;return}const t=e.types;if(!t)throw new Error("Events require `idl.types`");const n=e.events.map(i=>{const s=t.find(o=>o.name===i.name);if(!s)throw new Error(`Event not found: ${i.name}`);return[i.name,{discriminator:i.discriminator,layout:lr.typeDefLayout({typeDef:s,types:t})}]});this.layouts=new Map(n)}decode(e){let t;try{t=vB(e)}catch{return null}for(const[n,i]of this.layouts){const s=t.subarray(0,i.discriminator.length);if(s.equals(mn.from(i.discriminator)))return{name:n,data:i.layout.decode(t.subarray(s.length))}}return null}}class MZ{constructor(e){const t=e.types;if(!t){this.typeLayouts=new Map;return}const n=t.filter(i=>!i.generics).map(i=>[i.name,lr.typeDefLayout({typeDef:i,types:t})]);this.typeLayouts=new Map(n)}encode(e,t){const n=mn.alloc(1e3),i=this.typeLayouts.get(e);if(!i)throw new Error(`Unknown type: ${e}`);const s=i.encode(t,n);return n.slice(0,s)}decode(e,t){const n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);return n.decode(t)}}class YU{constructor(e){this.instruction=new wZ(e),this.accounts=new xZ(e),this.events=new SZ(e),this.types=new MZ(e)}}class xo{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var wx=xo;function EZ(r,e){return e.property?r+"["+e.property+"]":r}class Bh extends xo{isCount(){throw new Error("ExternalLayout is abstract")}}class XU extends Bh{constructor(e,t,n){if(!(e instanceof xo))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof _x||this.layout instanceof $U}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class _x extends xo{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class $U extends xo{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const _A=Math.pow(2,32);function ZU(r){const e=Math.floor(r/_A),t=r-e*_A;return{hi32:e,lo32:t}}function QU(r,e){return r*_A+e}class bZ extends xo{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return QU(i,n)}encode(e,t,n){n===void 0&&(n=0);const i=ZU(e);return t.writeUInt32LE(i.lo32,n),t.writeUInt32LE(i.hi32,n+4),8}}class AZ extends xo{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),i=e.readInt32LE(t+4);return QU(i,n)}encode(e,t,n){n===void 0&&(n=0);const i=ZU(e);return t.writeUInt32LE(i.lo32,n),t.writeInt32LE(i.hi32,n+4),8}}class TZ extends xo{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof xo,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const i=n;let s=0,o=0;for(const l of this.fields){let c=l.span;if(o=0<c?c:0,l.property!==void 0){const d=e[l.property];d!==void 0&&(o=l.encode(d,t,n),0>c&&(c=l.getSpan(t,n)))}s=n,n+=c}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class JU{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class oP extends JU{constructor(e,t){if(!(e instanceof Bh&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class e6 extends xo{constructor(e,t,n){const i=e instanceof _x||e instanceof $U;if(i)e=new oP(new XU(e));else if(e instanceof Bh&&e.isCount())e=new oP(e);else if(!(e instanceof JU))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof xo))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&i&&(s+=e.layout.span)),super(s,n),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return o(l)},this.configGetSourceVariant=function(l){o=l.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const i=this.discriminator,s=i.decode(e,t);let o=this.registry[s];if(o===void 0){let l=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(l=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[o.property]=this.defaultLayout.decode(e,t+l)}else n=o.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let l=0;return this.usesPrefixDiscriminator&&(l=s.layout.span),s.encode(e[s.property],t,n),l+o.encode(e[o.property],t,n+l)}return i.encode(e,t,n)}addVariant(e,t,n){const i=new RZ(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t){let n=e;return qn.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class RZ extends xo{constructor(e,t,n,i){if(!(e instanceof e6))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof xo))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=n?n.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),s+=this.layout.getSpan(t,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class CZ extends xo{constructor(e,t){if(!(e instanceof Bh&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Bh||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof Bh&&(i=e.length),!(qn.isBuffer(e)&&i===e.length))throw new TypeError(EZ("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,i,"hex"),this.length instanceof Bh&&this.length.encode(i,t,n),i}}var IZ=((r,e,t)=>new XU(r,e,t)),NZ=(r=>new _x(1,r)),Pu=(r=>new _x(4,r)),PZ=(r=>new bZ(r)),qu=(r=>new AZ(r)),zi=((r,e,t)=>new TZ(r,e,t)),t6=((r,e,t)=>new e6(r,e,t)),Dy=((r,e)=>new CZ(r,e));class LZ extends wx{constructor(e){super(-1,e),this.property=e,this.layout=zi([Pu("length"),Pu("lengthPadding"),Dy(IZ(Pu(),-8),"chars")],this.property)}encode(e,t,n=0){if(e==null)return this.layout.span;const i={chars:qn.from(e,"utf8")};return this.layout.encode(i,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return Pu().span+Pu().span+new Eh(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function xx(r){return new LZ(r)}function ca(r){return Dy(32,r)}const qo=t6(Pu("instruction"));qo.addVariant(0,zi([qu("lamports"),qu("space"),ca("owner")]),"createAccount");qo.addVariant(1,zi([ca("owner")]),"assign");qo.addVariant(2,zi([qu("lamports")]),"transfer");qo.addVariant(3,zi([ca("base"),xx("seed"),qu("lamports"),qu("space"),ca("owner")]),"createAccountWithSeed");qo.addVariant(4,zi([ca("authorized")]),"advanceNonceAccount");qo.addVariant(5,zi([qu("lamports")]),"withdrawNonceAccount");qo.addVariant(6,zi([ca("authorized")]),"initializeNonceAccount");qo.addVariant(7,zi([ca("authorized")]),"authorizeNonceAccount");qo.addVariant(8,zi([qu("space")]),"allocate");qo.addVariant(9,zi([ca("base"),xx("seed"),qu("space"),ca("owner")]),"allocateWithSeed");qo.addVariant(10,zi([ca("base"),xx("seed"),ca("owner")]),"assignWithSeed");qo.addVariant(11,zi([qu("lamports"),xx("seed"),ca("owner")]),"transferWithSeed");Math.max(...Object.values(qo.registry).map(r=>r.span));class kZ extends wx{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function aP(r){return new kZ(Dy(32),e=>new Et(e),e=>e.toBuffer(),r)}zi([Pu("version"),Pu("state"),aP("authorizedPubkey"),aP("nonce"),zi([PZ("lamportsPerSignature")],"feeCalculator")]);new Et("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Et("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var lP={exports:{}};(function(r,e){var t=typeof self<"u"?self:gZ,n=(function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s})();(function(s){(function(o){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function c(a){return a&&DataView.prototype.isPrototypeOf(a)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(a){return a&&d.indexOf(Object.prototype.toString.call(a))>-1};function y(a){if(typeof a!="string"&&(a=String(a)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function _(a){return typeof a!="string"&&(a=String(a)),a}function x(a){var p={next:function(){var M=a.shift();return{done:M===void 0,value:M}}};return l.iterable&&(p[Symbol.iterator]=function(){return p}),p}function A(a){this.map={},a instanceof A?a.forEach(function(p,M){this.append(M,p)},this):Array.isArray(a)?a.forEach(function(p){this.append(p[0],p[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(p){this.append(p,a[p])},this)}A.prototype.append=function(a,p){a=y(a),p=_(p);var M=this.map[a];this.map[a]=M?M+", "+p:p},A.prototype.delete=function(a){delete this.map[y(a)]},A.prototype.get=function(a){return a=y(a),this.has(a)?this.map[a]:null},A.prototype.has=function(a){return this.map.hasOwnProperty(y(a))},A.prototype.set=function(a,p){this.map[y(a)]=_(p)},A.prototype.forEach=function(a,p){for(var M in this.map)this.map.hasOwnProperty(M)&&a.call(p,this.map[M],M,this)},A.prototype.keys=function(){var a=[];return this.forEach(function(p,M){a.push(M)}),x(a)},A.prototype.values=function(){var a=[];return this.forEach(function(p){a.push(p)}),x(a)},A.prototype.entries=function(){var a=[];return this.forEach(function(p,M){a.push([M,p])}),x(a)},l.iterable&&(A.prototype[Symbol.iterator]=A.prototype.entries);function P(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function I(a){return new Promise(function(p,M){a.onload=function(){p(a.result)},a.onerror=function(){M(a.error)}})}function C(a){var p=new FileReader,M=I(p);return p.readAsArrayBuffer(a),M}function D(a){var p=new FileReader,M=I(p);return p.readAsText(a),M}function k(a){for(var p=new Uint8Array(a),M=new Array(p.length),R=0;R<p.length;R++)M[R]=String.fromCharCode(p[R]);return M.join("")}function F(a){if(a.slice)return a.slice(0);var p=new Uint8Array(a.byteLength);return p.set(new Uint8Array(a)),p.buffer}function Q(){return this.bodyUsed=!1,this._initBody=function(a){this._bodyInit=a,a?typeof a=="string"?this._bodyText=a:l.blob&&Blob.prototype.isPrototypeOf(a)?this._bodyBlob=a:l.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():l.arrayBuffer&&l.blob&&c(a)?(this._bodyArrayBuffer=F(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||h(a))?this._bodyArrayBuffer=F(a):this._bodyText=a=Object.prototype.toString.call(a):this._bodyText="",this.headers.get("content-type")||(typeof a=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var a=P(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?P(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var a=P(this);if(a)return a;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}var G=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Y(a){var p=a.toUpperCase();return G.indexOf(p)>-1?p:a}function ee(a,p){p=p||{};var M=p.body;if(a instanceof ee){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,p.headers||(this.headers=new A(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,!M&&a._bodyInit!=null&&(M=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new A(p.headers)),this.method=Y(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(M)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})};function te(a){var p=new FormData;return a.trim().split("&").forEach(function(M){if(M){var R=M.split("="),T=R.shift().replace(/\+/g," "),L=R.join("=").replace(/\+/g," ");p.append(decodeURIComponent(T),decodeURIComponent(L))}}),p}function U(a){var p=new A,M=a.replace(/\r?\n[\t ]+/g," ");return M.split(/\r?\n/).forEach(function(R){var T=R.split(":"),L=T.shift().trim();if(L){var N=T.join(":").trim();p.append(L,N)}}),p}Q.call(ee.prototype);function V(a,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new A(p.headers),this.url=p.url||"",this._initBody(a)}Q.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new A(this.headers),url:this.url})},V.error=function(){var a=new V(null,{status:0,statusText:""});return a.type="error",a};var K=[301,302,303,307,308];V.redirect=function(a,p){if(K.indexOf(p)===-1)throw new RangeError("Invalid status code");return new V(null,{status:p,headers:{location:a}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(p,M){this.message=p,this.name=M;var R=Error(p);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function E(a,p){return new Promise(function(M,R){var T=new ee(a,p);if(T.signal&&T.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function N(){L.abort()}L.onload=function(){var v={status:L.status,statusText:L.statusText,headers:U(L.getAllResponseHeaders()||"")};v.url="responseURL"in L?L.responseURL:v.headers.get("X-Request-URL");var u="response"in L?L.response:L.responseText;M(new V(u,v))},L.onerror=function(){R(new TypeError("Network request failed"))},L.ontimeout=function(){R(new TypeError("Network request failed"))},L.onabort=function(){R(new o.DOMException("Aborted","AbortError"))},L.open(T.method,T.url,!0),T.credentials==="include"?L.withCredentials=!0:T.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&l.blob&&(L.responseType="blob"),T.headers.forEach(function(v,u){L.setRequestHeader(u,v)}),T.signal&&(T.signal.addEventListener("abort",N),L.onreadystatechange=function(){L.readyState===4&&T.signal.removeEventListener("abort",N)}),L.send(typeof T._bodyInit>"u"?null:T._bodyInit)})}return E.polyfill=!0,s.fetch||(s.fetch=E,s.Headers=A,s.Request=ee,s.Response=V),o.Headers=A,o.Request=ee,o.Response=V,o.fetch=E,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(lP,lP.exports);$n.rustEnum([$n.struct([],"uninitialized"),$n.struct([$n.option($n.publicKey(),"authorityAddress")],"buffer"),$n.struct([$n.publicKey("programdataAddress")],"program"),$n.struct([$n.u64("slot"),$n.option($n.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,$n.u32());const xA="Program log: ",n6="Program data: ",OZ=xA.length,DZ=n6.length;class BZ{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new r6(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t,n){var i;let s=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,((i=this._eventListeners.get(e))!==null&&i!==void 0?i:[]).concat(s)),this._eventCallbacks.set(s,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(o,l)=>{if(!o.err)for(const c of this._eventParser.parseLogs(o.logs)){const d=this._eventListeners.get(c.name);d&&d.forEach(h=>{const y=this._eventCallbacks.get(h);if(y){const[,_]=y;_(c.data,l.slot,o.signature)}})}},n)),s}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let i=this._eventListeners.get(n);if(!i)throw new Error(`Event listeners don't exist for ${n}!`);if(this._eventCallbacks.delete(e),i=i.filter(s=>s!==e),this._eventListeners.set(n,i),i.length===0&&this._eventListeners.delete(n),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class r6{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const n=new FZ(e),i=new UZ;let s=n.next();for(;s!==null;){let[o,l,c]=this.handleLog(i,s,t);o&&(yield o),l&&i.push(l),c&&i.pop(),s=n.next()}}handleLog(e,t,n){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,n):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(xA)||e.startsWith(n6)){const n=e.startsWith(xA)?e.slice(OZ):e.slice(DZ),i=this.coder.events.decode(n);if(t&&i===null)throw new Error(`Unable to decode event ${n}`);return[i,null,!1]}else return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class UZ{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class FZ{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}function Sx(r,e){var t,n;let i={};const s=r.args?r.args.length:0;if(e.length>s){if(e.length!==s+1)throw new Error(`provided too many arguments ${e} to instruction ${r==null?void 0:r.name} expecting: ${(n=(t=r.args)===null||t===void 0?void 0:t.map(o=>o.name))!==null&&n!==void 0?n:[]}`);i=e.pop()}return[e,i]}class n1{static build(e,t,n){if(e.name==="_inner")throw new qc("the _inner name is reserved");const i=(...s)=>{const[o,l]=Sx(e,[...s]);wB(e.accounts,l.accounts),zZ(e,...s);const c=i.accounts(l.accounts);return l.remainingAccounts!==void 0&&c.push(...l.remainingAccounts),qU("debug-logs")&&console.log("Outgoing account metas:",c),new Ir({keys:c,programId:n,data:t(e.name,J$(e,...o))})};return i.accounts=s=>n1.accountsArray(s,e.accounts,n,e.name),i}static accountsArray(e,t,n,i){return e?t.map(s=>{if(Kc(s)){const h=e[s.name];return n1.accountsArray(h,s.accounts,n,i).flat()}let o;try{o=Ga(e[s.name])}catch{throw new Error(`Wrong input type for account "${s.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}const l=s.optional&&o.equals(n),c=!!(s.writable&&!l),d=!!(s.signer&&!l);return{pubkey:o,isWritable:c,isSigner:d}}).flat():[]}}function zZ(r,...e){}class WZ{static build(e,t){return(...i)=>{var s,o,l;const[,c]=Sx(e,[...i]),d=new cr;if(c.preInstructions&&c.instructions)throw new Error("instructions is deprecated, use preInstructions");return(s=c.preInstructions)===null||s===void 0||s.forEach(h=>d.add(h)),(o=c.instructions)===null||o===void 0||o.forEach(h=>d.add(h)),d.add(t(...i)),(l=c.postInstructions)===null||l===void 0||l.forEach(h=>d.add(h)),d}}}class VZ{static build(e,t,n,i){return async(...o)=>{var l;const c=t(...o),[,d]=Sx(e,[...o]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(c,(l=d.signers)!==null&&l!==void 0?l:[],d.options)}catch(h){throw KU(h,n)}}}}class HZ{static build(e,t,n,i){var s;return((s=e.accounts)!==null&&s!==void 0?s:[]).reduce((o,l)=>(o[l.name]=new GZ(e,l,n,i,t),o),{})}}class GZ{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(e,t,n,i,s){this._idlAccount=t,this._programId=n,this._provider=i??wA(),this._coder=s??new YU(e),this._size=this._coder.accounts.size(t.name)}async fetchNullable(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);return n}async fetchNullableAndContext(e,t){const n=await this.getAccountInfoAndContext(e,t),{value:i,context:s}=n;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:s}}async fetch(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);if(n===null)throw new Error(`Account does not exist or has no data ${e.toString()}`);return n}async fetchAndContext(e,t){const{data:n,context:i}=await this.fetchNullableAndContext(e,t);if(n===null)throw new Error(`Account does not exist ${e.toString()}`);return{data:n,context:i}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map(i=>i?i.data:null)}async fetchMultipleAndContext(e,t){return(await uZ(this._provider.connection,e.map(i=>Ga(i)),t)).map(i=>{if(i==null)return null;const{account:s,context:o}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,s.data),context:o}})}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof qn?e:void 0),n=[];return(t==null?void 0:t.offset)!=null&&(t==null?void 0:t.bytes)!=null&&n.push({memcmp:{offset:t.offset,bytes:t.bytes}}),(t==null?void 0:t.dataSize)!=null&&n.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...n,...Array.isArray(e)?e:[]]})).map(({pubkey:s,account:o})=>({publicKey:s,account:this._coder.accounts.decode(this._idlAccount.name,o.data)}))}subscribe(e,t){const n=Ym.get(e.toString());if(n)return n.ee;const i=new G$;e=Ga(e);const s=this._provider.connection.onAccountChange(e,o=>{const l=this._coder.accounts.decode(this._idlAccount.name,o.data);i.emit("change",l)},t);return Ym.set(e.toString(),{ee:i,listener:s}),i}async unsubscribe(e){let t=Ym.get(e.toString());if(!t){console.warn("Address is not subscribed");return}Ym&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{Ym.delete(e.toString())}).catch(console.error)}async createInstruction(e,t){const n=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return Ci.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:t??n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??n),programId:this._programId})}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Ga(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(Ga(e),t)}}const Ym=new Map;class jZ{static build(e,t,n,i,s,o,l){return async(...d)=>{var h;const y=t(...d),[,_]=Sx(e,[...d]);let x;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{x=await i.simulate(y,_.signers,(h=_.options)===null||h===void 0?void 0:h.commitment)}catch(I){throw KU(I,n)}if(x===void 0)throw new Error("Unable to simulate transaction");const A=x.logs;if(!A)throw new Error("Simulated logs not found");const P=[];if(l.events){let I=new r6(o,s);for(const C of I.parseLogs(A))P.push(C)}return{events:P,raw:A}}}}function mE(r){return new i6(Dy(8),e=>aR.fromBuffer(e),e=>e.toBuffer(),r)}function cw(r){return new i6(Dy(32),e=>new Et(e),e=>e.toBuffer(),r)}function gE(r,e){return new qZ(r,e)}class i6 extends wx{constructor(e,t,n,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class qZ extends wx{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=Pu()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class aR extends Eh{toBuffer(){const e=super.toArray().reverse(),t=qn.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=qn.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new aR([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}const KZ=zi([cw("mint"),cw("owner"),mE("amount"),gE(cw(),"delegate"),(r=>{const e=t6(NZ("discriminator"),null,r);return e.addVariant(0,zi([]),"uninitialized"),e.addVariant(1,zi([]),"initialized"),e.addVariant(2,zi([]),"frozen"),e})("state"),gE(mE(),"isNative"),mE("delegatedAmount"),gE(cw(),"closeAuthority")]);function YZ(r){return KZ.decode(r)}class XZ{constructor(e,t,n,i,s,o,l,c){this._args=e,this._accounts=t,this._provider=n,this._programId=i,this._idlIx=s,this._idlTypes=l,this._customResolver=c,this._accountStore=new $Z(n,o,i)}args(e){this._args=e}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let e=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(e++,e===16){const t=o=>Kc(o)?o.accounts.some(t):!!(o.address||o.pda||o.relations),n=(o,l=[],c=[])=>{for(const d of o)Kc(d)?c.push(...n(d.accounts,[...l,d.name])):c.push([...l,d.name]);return c},i=this._idlIx.accounts.filter(t),s=n(i).filter(o=>!this.get(o)).map(o=>o.reduce((l,c)=>l+"."+c)).map(o=>`\`${o}\``).join(", ");throw new Error(["Reached maximum depth for account resolution.",`Unresolved accounts: ${s}`].join(" "))}}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce((n,i)=>n&&n[i],this._accounts);if(t&&t.toBase58)return t}set(e,t){let n=this._accounts;e.forEach((i,s)=>{var o;s===e.length-1&&(n[i]=t),n[i]=(o=n[i])!==null&&o!==void 0?o:{},n=n[i]})}resolveOptionalsHelper(e,t){const n={};for(const i of t){const s=i.name,o=e[s];o!==void 0&&(s6(o)?Kc(i)?n[s]=this.resolveOptionalsHelper(o,i.accounts):n[s]=o6(o):o!==null?n[s]=Ga(o):i.optional&&(n[s]=this._programId))}return n}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveEventCpi(e,t=[]){for(const n in e){const i=e[n];Kc(i)&&this.resolveEventCpi(i.accounts,[...t,i.name]);const s=+n+1;if(s===e.length)return;const o=e[n].name,l=e[s].name;if(o==="eventAuthority"&&l==="program"){const c=[...t,o],d=[...t,l];this.get(c)||this.set(c,Et.findProgramAddressSync([qn.from("__event_authority")],this._programId)[0]),this.get(d)||this.set(d,this._programId);return}}}resolveConst(e,t=[]){for(const n of e){const i=n.name;if(Kc(n))this.resolveConst(n.accounts,[...t,i]);else{const s=n;if((s.signer||s.address)&&!this.get([...t,i])){if(s.signer){if(!this._provider.publicKey)throw new Error("This function requires the `Provider` interface implementor to have a `publicKey` field.");this.set([...t,i],this._provider.publicKey)}s.address&&this.set([...t,i],Ga(s.address))}}}}async resolvePdasAndRelations(e,t=[]){let n=0;for(const i of e){const s=i.name;if(Kc(i))n+=await this.resolvePdasAndRelations(i.accounts,[...t,s]);else{const o=i;if((o.pda||o.relations)&&!this.get([...t,s])){n++;try{if(o.pda){const l=await Promise.all(o.pda.seeds.map(h=>this.toBuffer(h,t)));if(l.some(h=>!h))continue;const c=await this.parseProgramId(o,t),[d]=Et.findProgramAddressSync(l,c);this.set([...t,s],d)}}catch{}try{if(o.relations){const l=this.get([...t,o.relations[0]]);if(l){const c=await this._accountStore.fetchAccount({publicKey:l});this.set([...t,s],c[s])}}}catch{}}}}return n}async parseProgramId(e,t=[]){var n;if(!(!((n=e.pda)===null||n===void 0)&&n.program))return this._programId;const i=await this.toBuffer(e.pda.program,t);if(!i)throw new Error(`Program seed not resolved: ${e.name}`);return new Et(i)}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed: ${e}`)}}toBufferConst(e){return this.toBufferValue("bytes",e.value)}async toBufferArg(e){const[t,...n]=e.path.split("."),i=this._idlIx.args.findIndex(l=>l.name===t);if(i===-1)throw new Error(`Unable to find argument for seed: ${t}`);const s=n.reduce((l,c)=>(l??{})[c],this._args[i]);if(s===void 0)return;const o=this.getType(this._idlIx.args[i].type,n);return this.toBufferValue(o,s)}async toBufferAccount(e,t=[]){const[n,...i]=e.path.split("."),s=this.get([...t,n]);if(!s)return;if(!i.length)return this.toBufferValue("pubkey",s);if(!e.account)throw new Error(`Seed account is required in order to resolve type: ${e.path}`);let l=await this._accountStore.fetchAccount({publicKey:s,name:e.account}),c=i;for(;c.length>0;)l=l[c[0]],c=c.slice(1);if(l===void 0)return;const d=this.getType({defined:{name:e.account}},i);return this.toBufferValue(d,l)}toBufferValue(e,t){switch(e){case"u8":case"i8":return qn.from([t]);case"u16":case"i16":return new Eh(t).toArrayLike(qn,"le",2);case"u32":case"i32":return new Eh(t).toArrayLike(qn,"le",4);case"u64":case"i64":return new Eh(t).toArrayLike(qn,"le",8);case"u128":case"i128":return new Eh(t).toArrayLike(qn,"le",16);case"u256":case"i256":return new Eh(t).toArrayLike(qn,"le",32);case"string":return qn.from(t);case"pubkey":return t.toBuffer();case"bytes":return qn.from(t);default:if(e!=null&&e.array)return qn.from(t);throw new Error(`Unexpected seed type: ${e}`)}}getType(e,t=[]){var n;const i=(n=e==null?void 0:e.defined)===null||n===void 0?void 0:n.name;if(i){if(i==="tokenAccount")switch(t.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${t}`)}const s=this._idlTypes.find(h=>h.name===i);if(!s)throw new Error(`Type not found: ${i}`);const[o,...l]=t,d=s.type.fields.find(h=>h.name===o);if(!d)throw new Error(`Field not found: ${o}`);return this.getType(d.type,l)}return e}}class $Z{constructor(e,t,n){this._provider=e,this._cache=new Map,this._idls={},this._idls[n.toBase58()]=t}async fetchAccount({publicKey:e,name:t}){const n=e.toBase58();if(!this._cache.has(n)){const i=await this._provider.connection.getAccountInfo(e);if(i===null)throw new Error(`Account not found: ${n}`);if(t==="tokenAccount"){const s=YZ(i.data);this._cache.set(n,s)}else{const s=await this.getAccountsNs(i.owner);if(s){const o=Object.values(s)[0];if(o){const l=o.coder.accounts.decodeAny(i.data);this._cache.set(n,l)}}}}return this._cache.get(n)}async getAccountsNs(e){const t=e.toBase58();if(!this._idls[t]){const n=await S0.fetchIdl(e,this._provider);if(n){const i=new S0(n,this._provider);this._idls[t]=i.account}}return this._idls[t]}}class ZZ{static build(e,t,n,i,s,o,l,c,d,h,y){return(..._)=>new QZ(_,i,s,o,l,c,e,t,n,d,h,y)}}function s6(r){return typeof r=="object"&&r!==null&&!("_bn"in r)}function o6(r,e){const t={};for(const n in r){const i=r[n];if(i===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");t[n]=s6(i)?o6(i):Ga(i)}return t}class QZ{constructor(e,t,n,i,s,o,l,c,d,h,y,_){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=i,this._simulateFn=s,this._viewFn=o,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new XZ(e,this._accounts,l,c,d,h,y,_)}args(e){this._args=e,this._accountsResolver.args(e)}accounts(e){return this.accountsPartial(e)}accountsPartial(e){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e,t=!1){return t?this._preInstructions=e.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async simulate(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error(["Method does not support views.","The instruction should return a value, and its accounts must be read-only"].join(" "));return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpc(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{signature:await this.rpc(e),pubkeys:await this.pubkeys()}}async prepare(){return{instruction:await this.instruction(),signers:this._signers,pubkeys:await this.pubkeys()}}}class JZ{static build(e,t,n,i){const s=t.accounts.find(c=>c.writable),o=!!t.returns;return s||!o?void 0:async(...c)=>{let d=await n(...c);const h=`Program return: ${e} `;let y=d.raw.find(P=>P.startsWith(h));if(!y)throw new Error("View expected return log");let _=vB(y.slice(h.length)),x=t.returns;if(!x)throw new Error("View expected return type");return lr.fieldLayout({type:x},i.types).decode(_)}}}class eQ{static build(e,t,n,i,s){const o={},l={},c={},d={},h={},y={},_=Q$(e),x=e.accounts?HZ.build(e,t,n,i):{};return e.instructions.forEach(A=>{const P=n1.build(A,(G,Y)=>t.instruction.encode(G,Y),n),I=WZ.build(A,P),C=VZ.build(A,I,_,i),D=jZ.build(A,I,_,i,t,n,e),k=JZ.build(n,A,D,e),F=ZZ.build(i,n,A,P,I,C,D,k,x,e.types||[],s==null?void 0:s(A)),Q=A.name;l[Q]=P,c[Q]=I,o[Q]=C,d[Q]=D,h[Q]=F,k&&(y[Q]=k)}),[o,l,c,x,d,h,y]}}class S0{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t=wA(),n,i){this._idl=Z$(e),this._rawIdl=e,this._provider=t,this._programId=Ga(e.address),this._coder=n??new YU(this._idl),this._events=new BZ(this._programId,t,this._coder);const[s,o,l,c,d,h,y]=eQ.build(this._idl,this._coder,this._programId,t,i);this.rpc=s,this.instruction=o,this.transaction=l,this.account=c,this.simulate=d,this.methods=h,this.views=y}static async at(e,t){const n=Ga(e),i=await S0.fetchIdl(n,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new S0(i,t)}static async fetchIdl(e,t){t=t??wA();const n=Ga(e),i=await K$(n),s=await t.connection.getAccountInfo(i);if(!s)return null;let o=$$(s.data.slice(8));const l=W$(o.data);return JSON.parse(q$(l))}addEventListener(e,t,n){return this._events.addEventListener(e,t,n)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new Et("11111111111111111111111111111111");const uP=new Et("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Et("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const cP=new Et("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Et("So11111111111111111111111111111111111111112");new Et("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");function tQ({children:r,className:e=""}){const t=Se.useRef(null),[n,i]=Se.useState(!1),s=x0(0),o=x0(0),l=Q_(s,{stiffness:300,damping:30}),c=Q_(o,{stiffness:300,damping:30}),d=J_(c,[-.5,.5],["15deg","-15deg"]),h=J_(l,[-.5,.5],["-15deg","15deg"]),y=x=>{if(!t.current)return;const A=t.current.getBoundingClientRect(),P=A.width,I=A.height,C=x.clientX-A.left,D=x.clientY-A.top,k=C/P-.5,F=D/I-.5;s.set(k),o.set(F)},_=()=>{s.set(0),o.set(0),i(!1)};return lt.jsxs(tr.div,{ref:t,onMouseMove:y,onMouseEnter:()=>i(!0),onMouseLeave:_,style:{rotateX:d,rotateY:h,transformStyle:"preserve-3d"},className:`card-3d ${e}`,animate:{scale:n?1.05:1},transition:{type:"spring",stiffness:300,damping:20},children:[lt.jsx(tr.div,{className:"card-3d-content",style:{transform:"translateZ(50px)",transformStyle:"preserve-3d"},children:r}),lt.jsx(tr.div,{className:"card-3d-shine",style:{background:`radial-gradient(circle at ${(s.get()+.5)*100}% ${(o.get()+.5)*100}%, rgba(255,255,255,0.3) 0%, transparent 50%)`,opacity:n?1:0}}),lt.jsx(tr.div,{className:"card-3d-glow",animate:{opacity:n?.6:0}})]})}const nQ="FQuod36e7YC62xJPhpwJvBZMzsVPn36bYL2pjHMWNT2y",rQ={name:"nft",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},iQ=[{name:"mint_nft",discriminator:[211,57,6,167,15,219,35,251],accounts:[{name:"payer",writable:!0,signer:!0},{name:"mint",writable:!0,signer:!0},{name:"token_account",writable:!0,pda:{seeds:[{kind:"account",path:"payer"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"metadata",writable:!0},{name:"master_edition",writable:!0},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"token_metadata_program",address:"metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"rent",address:"SysvarRent111111111111111111111111111111111"}],args:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"uri",type:"string"}]}],sQ={address:nQ,metadata:rQ,instructions:iQ},Xm=new Et("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function oQ(){const{connection:r}=DO(),e=xT(),[t,n]=Se.useState(""),[i,s]=Se.useState(""),[o,l]=Se.useState(""),[c,d]=Se.useState(null),[h,y]=Se.useState(!1);Se.useEffect(()=>{const A=document.querySelector(".stars");if(A&&A.children.length===0)for(let P=0;P<100;P++){const I=document.createElement("div");I.className="star",I.style.left=`${Math.random()*100}%`,I.style.top=`${Math.random()*100}%`,I.style.animationDelay=`${Math.random()*3}s`,A.appendChild(I)}},[]);const _=()=>{if(!e.publicKey||!e.signTransaction)throw new Error("Wallet not connected");return new Qg(r,e,{commitment:"confirmed"})},x=async A=>{if(A.preventDefault(),!e.publicKey){d({type:"error",message:"Please connect your wallet first"});return}if(!t||!i||!o){d({type:"error",message:"Please fill in all fields"});return}y(!0),d({type:"info",message:"Minting your NFT..."});try{const P=_(),I=new S0(sQ,P),C=Hh.generate(),[D]=Et.findProgramAddressSync([qn.from("metadata"),Xm.toBuffer(),C.publicKey.toBuffer()],Xm),[k]=Et.findProgramAddressSync([qn.from("metadata"),Xm.toBuffer(),C.publicKey.toBuffer(),qn.from("edition")],Xm),[F]=Et.findProgramAddressSync([e.publicKey.toBuffer(),uP.toBuffer(),C.publicKey.toBuffer()],cP),Q=await I.methods.mintNft(t,i,o).accounts({payer:e.publicKey,mint:C.publicKey,tokenAccount:F,metadata:D,masterEdition:k,tokenProgram:uP,associatedTokenProgram:cP,tokenMetadataProgram:Xm,systemProgram:Ci.programId,rent:Qh}).signers([C]).rpc();d({type:"success",message:lt.jsxs("div",{children:["NFT minted successfully!",lt.jsx("br",{}),lt.jsx("a",{href:`https://explorer.solana.com/tx/${Q}?cluster=devnet`,target:"_blank",rel:"noopener noreferrer",className:"explorer-link",children:"View on Solana Explorer"}),lt.jsx("br",{}),"Mint: ",C.publicKey.toString()]})}),n(""),s(""),l("")}catch(P){console.error("Error minting NFT:",P),d({type:"error",message:`Failed to mint NFT: ${P.message||"Unknown error"}`})}finally{y(!1)}};return lt.jsxs(lt.Fragment,{children:[lt.jsxs("div",{className:"floating-shapes",children:[lt.jsx("div",{className:"shape shape-1"}),lt.jsx("div",{className:"shape shape-2"}),lt.jsx("div",{className:"shape shape-3"})]}),lt.jsx(tr.div,{className:"container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:lt.jsxs(tQ,{className:"card",children:[lt.jsx(tr.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},children:"🎨 NFT Minter"}),lt.jsx(tr.p,{className:"subtitle",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},children:"Create your own Solana NFT with style"}),lt.jsx(tr.div,{className:"wallet-section",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.4},children:lt.jsx(EG,{})}),lt.jsx(Qb,{children:e.publicKey&&lt.jsxs(tr.form,{onSubmit:x,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:[lt.jsxs(tr.div,{className:"form-group",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.7},children:[lt.jsx("label",{htmlFor:"name",children:"NFT Name"}),lt.jsx("input",{id:"name",type:"text",value:t,onChange:A=>n(A.target.value),placeholder:"My Awesome NFT",maxLength:32})]}),lt.jsxs(tr.div,{className:"form-group",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.8},children:[lt.jsx("label",{htmlFor:"symbol",children:"Symbol"}),lt.jsx("input",{id:"symbol",type:"text",value:i,onChange:A=>s(A.target.value),placeholder:"MNFT",maxLength:10})]}),lt.jsxs(tr.div,{className:"form-group",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.9},children:[lt.jsx("label",{htmlFor:"uri",children:"Metadata URI"}),lt.jsx("textarea",{id:"uri",value:o,onChange:A=>l(A.target.value),placeholder:"https://arweave.net/..."})]}),lt.jsx(tr.button,{type:"submit",className:"mint-button",disabled:h,whileHover:{scale:1.02},whileTap:{scale:.98},initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1},children:h?lt.jsx(tr.span,{animate:{opacity:[1,.5,1]},transition:{repeat:1/0,duration:1.5},children:"Minting..."}):"Mint NFT"})]})}),lt.jsx(Qb,{children:c&&lt.jsx(tr.div,{className:`status ${c.type}`,initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:c.message})})]})})]})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const By="169",wh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_h={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a6=0,SA=1,l6=2,aQ=3,u6=0,Mx=1,Rg=2,za=3,Ku=0,Ls=1,Va=2,Vu=0,jh=1,Jg=2,MA=3,EA=4,c6=5,Yc=100,f6=101,h6=102,d6=103,p6=104,m6=200,g6=201,y6=202,v6=203,r1=204,i1=205,w6=206,_6=207,x6=208,S6=209,M6=210,E6=211,b6=212,A6=213,T6=214,s1=0,o1=1,a1=2,ed=3,l1=4,u1=5,c1=6,f1=7,Uy=0,R6=1,C6=2,Cl=0,I6=1,N6=2,P6=3,lR=4,L6=5,k6=6,O6=7,bA="attached",D6="detached",Ex=300,Yu=301,sf=302,ey=303,ty=304,B0=306,ny=1e3,la=1001,ry=1002,es=1003,uR=1004,lQ=1004,e0=1005,uQ=1005,Ii=1006,Cg=1007,cQ=1007,El=1008,fQ=1008,Ka=1009,cR=1010,fR=1011,M0=1012,bx=1013,Xu=1014,_o=1015,U0=1016,Ax=1017,Tx=1018,td=1020,hR=35902,dR=1021,pR=1022,Ps=1023,mR=1024,gR=1025,qh=1026,nd=1027,Rx=1028,Fy=1029,yR=1030,Cx=1031,hQ=1032,Ix=1033,Ig=33776,Ng=33777,Pg=33778,Lg=33779,h1=35840,d1=35841,p1=35842,m1=35843,g1=36196,y1=37492,v1=37496,w1=37808,_1=37809,x1=37810,S1=37811,M1=37812,E1=37813,b1=37814,A1=37815,T1=37816,R1=37817,C1=37818,I1=37819,N1=37820,P1=37821,kg=36492,L1=36494,k1=36495,vR=36283,O1=36284,D1=36285,B1=36286,B6=2200,U6=2201,F6=2202,iy=2300,U1=2301,E_=2302,Uh=2400,Fh=2401,sy=2402,Nx=2500,wR=2501,dQ=0,pQ=1,mQ=2,z6=3200,W6=3201,gQ=3202,yQ=3203,uf=0,V6=1,Lu="",aa="srgb",Qu="srgb-linear",Px="display-p3",zy="display-p3-linear",oy="linear",Fr="srgb",ay="rec709",ly="p3",vQ=0,xh=7680,wQ=7681,_Q=7682,xQ=7683,SQ=34055,MQ=34056,EQ=5386,bQ=512,AQ=513,TQ=514,RQ=515,CQ=516,IQ=517,NQ=518,AA=519,H6=512,G6=513,j6=514,_R=515,q6=516,K6=517,Y6=518,X6=519,uy=35044,PQ=35048,LQ=35040,kQ=35045,OQ=35049,DQ=35041,BQ=35046,UQ=35050,FQ=35042,zQ="100",TA="300 es",bl=2e3,cy=2001;let kl=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Ts=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fP=1234567;const Kh=Math.PI/180,E0=180/Math.PI;function Vo(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ts[r&255]+Ts[r>>8&255]+Ts[r>>16&255]+Ts[r>>24&255]+"-"+Ts[e&255]+Ts[e>>8&255]+"-"+Ts[e>>16&15|64]+Ts[e>>24&255]+"-"+Ts[t&63|128]+Ts[t>>8&255]+"-"+Ts[t>>16&255]+Ts[t>>24&255]+Ts[n&255]+Ts[n>>8&255]+Ts[n>>16&255]+Ts[n>>24&255]).toLowerCase()}function li(r,e,t){return Math.max(e,Math.min(t,r))}function xR(r,e){return(r%e+e)%e}function WQ(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function VQ(r,e,t){return r!==e?(t-r)/(e-r):0}function Og(r,e,t){return(1-t)*r+t*e}function HQ(r,e,t,n){return Og(r,e,1-Math.exp(-t*n))}function GQ(r,e=1){return e-Math.abs(xR(r,e*2)-e)}function jQ(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function qQ(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function KQ(r,e){return r+Math.floor(Math.random()*(e-r+1))}function YQ(r,e){return r+Math.random()*(e-r)}function XQ(r){return r*(.5-Math.random())}function $Q(r){r!==void 0&&(fP=r);let e=fP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ZQ(r){return r*Kh}function QQ(r){return r*E0}function JQ(r){return(r&r-1)===0&&r!==0}function eJ(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function tJ(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function nJ(r,e,t,n,i){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),d=s((e+n)/2),h=o((e+n)/2),y=s((e-n)/2),_=o((e-n)/2),x=s((n-e)/2),A=o((n-e)/2);switch(i){case"XYX":r.set(l*h,c*y,c*_,l*d);break;case"YZY":r.set(c*_,l*h,c*y,l*d);break;case"ZXZ":r.set(c*y,c*_,l*h,l*d);break;case"XZX":r.set(l*h,c*A,c*x,l*d);break;case"YXY":r.set(c*x,l*h,c*A,l*d);break;case"ZYZ":r.set(c*A,c*x,l*h,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function $s(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function Kn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const SR={DEG2RAD:Kh,RAD2DEG:E0,generateUUID:Vo,clamp:li,euclideanModulo:xR,mapLinear:WQ,inverseLerp:VQ,lerp:Og,damp:HQ,pingpong:GQ,smoothstep:jQ,smootherstep:qQ,randInt:KQ,randFloat:YQ,randFloatSpread:XQ,seededRandom:$Q,degToRad:ZQ,radToDeg:QQ,isPowerOfTwo:JQ,ceilPowerOfTwo:eJ,floorPowerOfTwo:tJ,setQuaternionFromProperEuler:nJ,normalize:Kn,denormalize:$s};class Mt{constructor(e=0,t=0){Mt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(li(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jn{constructor(e,t,n,i,s,o,l,c,d){jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,c,d)}set(e,t,n,i,s,o,l,c,d){const h=this.elements;return h[0]=e,h[1]=i,h[2]=l,h[3]=t,h[4]=s,h[5]=c,h[6]=n,h[7]=o,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[3],c=n[6],d=n[1],h=n[4],y=n[7],_=n[2],x=n[5],A=n[8],P=i[0],I=i[3],C=i[6],D=i[1],k=i[4],F=i[7],Q=i[2],G=i[5],Y=i[8];return s[0]=o*P+l*D+c*Q,s[3]=o*I+l*k+c*G,s[6]=o*C+l*F+c*Y,s[1]=d*P+h*D+y*Q,s[4]=d*I+h*k+y*G,s[7]=d*C+h*F+y*Y,s[2]=_*P+x*D+A*Q,s[5]=_*I+x*k+A*G,s[8]=_*C+x*F+A*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8];return t*o*h-t*l*d-n*s*h+n*l*c+i*s*d-i*o*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=h*o-l*d,_=l*c-h*s,x=d*s-o*c,A=t*y+n*_+i*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const P=1/A;return e[0]=y*P,e[1]=(i*d-h*n)*P,e[2]=(l*n-i*o)*P,e[3]=_*P,e[4]=(h*t-i*c)*P,e[5]=(i*s-l*t)*P,e[6]=x*P,e[7]=(n*c-d*t)*P,e[8]=(o*t-n*s)*P,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,l){const c=Math.cos(s),d=Math.sin(s);return this.set(n*c,n*d,-n*(c*o+d*l)+o+e,-i*d,i*c,-i*(-d*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(yE.makeScale(e,t)),this}rotate(e){return this.premultiply(yE.makeRotation(-e)),this}translate(e,t){return this.premultiply(yE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const yE=new jn;function $6(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const rJ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function t0(r,e){return new rJ[r](e)}function fy(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Z6(){const r=fy("canvas");return r.style.display="block",r}const hP={};function b_(r){r in hP||(hP[r]=!0,console.warn(r))}function iJ(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function sJ(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function oJ(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const dP=new jn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),pP=new jn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),$m={[Qu]:{transfer:oy,primaries:ay,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r,fromReference:r=>r},[aa]:{transfer:Fr,primaries:ay,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[zy]:{transfer:oy,primaries:ly,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.applyMatrix3(pP),fromReference:r=>r.applyMatrix3(dP)},[Px]:{transfer:Fr,primaries:ly,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.convertSRGBToLinear().applyMatrix3(pP),fromReference:r=>r.applyMatrix3(dP).convertLinearToSRGB()}},aJ=new Set([Qu,zy]),yr={enabled:!0,_workingColorSpace:Qu,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!aJ.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=$m[e].toReference,i=$m[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return $m[r].primaries},getTransfer:function(r){return r===Lu?oy:$m[r].transfer},getLuminanceCoefficients:function(r,e=this._workingColorSpace){return r.fromArray($m[e].luminanceCoefficients)}};function h0(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function vE(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let xp;class Q6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{xp===void 0&&(xp=fy("canvas")),xp.width=e.width,xp.height=e.height;const n=xp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=xp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=fy("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=h0(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(h0(t[n]/255)*255):t[n]=h0(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lJ=0;class zh{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lJ++}),this.uuid=Vo(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?s.push(wE(i[o].image)):s.push(wE(i[o]))}else s=wE(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function wE(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Q6.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uJ=0;class ui extends kl{constructor(e=ui.DEFAULT_IMAGE,t=ui.DEFAULT_MAPPING,n=la,i=la,s=Ii,o=El,l=Ps,c=Ka,d=ui.DEFAULT_ANISOTROPY,h=Lu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uJ++}),this.uuid=Vo(),this.name="",this.source=new zh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Mt(0,0),this.repeat=new Mt(1,1),this.center=new Mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ex)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ny:e.x=e.x-Math.floor(e.x);break;case la:e.x=e.x<0?0:1;break;case ry:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ny:e.y=e.y-Math.floor(e.y);break;case la:e.y=e.y<0?0:1;break;case ry:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ui.DEFAULT_IMAGE=null;ui.DEFAULT_MAPPING=Ex;ui.DEFAULT_ANISOTROPY=1;class fr{constructor(e=0,t=0,n=0,i=1){fr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const c=e.elements,d=c[0],h=c[4],y=c[8],_=c[1],x=c[5],A=c[9],P=c[2],I=c[6],C=c[10];if(Math.abs(h-_)<.01&&Math.abs(y-P)<.01&&Math.abs(A-I)<.01){if(Math.abs(h+_)<.1&&Math.abs(y+P)<.1&&Math.abs(A+I)<.1&&Math.abs(d+x+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const k=(d+1)/2,F=(x+1)/2,Q=(C+1)/2,G=(h+_)/4,Y=(y+P)/4,ee=(A+I)/4;return k>F&&k>Q?k<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(k),i=G/n,s=Y/n):F>Q?F<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(F),n=G/i,s=ee/i):Q<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(Q),n=Y/s,i=ee/s),this.set(n,i,s,t),this}let D=Math.sqrt((I-A)*(I-A)+(y-P)*(y-P)+(_-h)*(_-h));return Math.abs(D)<.001&&(D=1),this.x=(I-A)/D,this.y=(y-P)/D,this.z=(_-h)/D,this.w=Math.acos((d+x+C-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class J6 extends kl{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new fr(0,0,e,t),this.scissorTest=!1,this.viewport=new fr(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ii,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new ui(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new zh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ya extends J6{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Lx extends ui{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=es,this.minFilter=es,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cJ extends Ya{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Lx(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class MR extends ui{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=es,this.minFilter=es,this.wrapR=la,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fJ extends Ya{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new MR(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ks{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,l){let c=n[i+0],d=n[i+1],h=n[i+2],y=n[i+3];const _=s[o+0],x=s[o+1],A=s[o+2],P=s[o+3];if(l===0){e[t+0]=c,e[t+1]=d,e[t+2]=h,e[t+3]=y;return}if(l===1){e[t+0]=_,e[t+1]=x,e[t+2]=A,e[t+3]=P;return}if(y!==P||c!==_||d!==x||h!==A){let I=1-l;const C=c*_+d*x+h*A+y*P,D=C>=0?1:-1,k=1-C*C;if(k>Number.EPSILON){const Q=Math.sqrt(k),G=Math.atan2(Q,C*D);I=Math.sin(I*G)/Q,l=Math.sin(l*G)/Q}const F=l*D;if(c=c*I+_*F,d=d*I+x*F,h=h*I+A*F,y=y*I+P*F,I===1-l){const Q=1/Math.sqrt(c*c+d*d+h*h+y*y);c*=Q,d*=Q,h*=Q,y*=Q}}e[t]=c,e[t+1]=d,e[t+2]=h,e[t+3]=y}static multiplyQuaternionsFlat(e,t,n,i,s,o){const l=n[i],c=n[i+1],d=n[i+2],h=n[i+3],y=s[o],_=s[o+1],x=s[o+2],A=s[o+3];return e[t]=l*A+h*y+c*x-d*_,e[t+1]=c*A+h*_+d*y-l*x,e[t+2]=d*A+h*x+l*_-c*y,e[t+3]=h*A-l*y-c*_-d*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,d=l(n/2),h=l(i/2),y=l(s/2),_=c(n/2),x=c(i/2),A=c(s/2);switch(o){case"XYZ":this._x=_*h*y+d*x*A,this._y=d*x*y-_*h*A,this._z=d*h*A+_*x*y,this._w=d*h*y-_*x*A;break;case"YXZ":this._x=_*h*y+d*x*A,this._y=d*x*y-_*h*A,this._z=d*h*A-_*x*y,this._w=d*h*y+_*x*A;break;case"ZXY":this._x=_*h*y-d*x*A,this._y=d*x*y+_*h*A,this._z=d*h*A+_*x*y,this._w=d*h*y-_*x*A;break;case"ZYX":this._x=_*h*y-d*x*A,this._y=d*x*y+_*h*A,this._z=d*h*A-_*x*y,this._w=d*h*y+_*x*A;break;case"YZX":this._x=_*h*y+d*x*A,this._y=d*x*y+_*h*A,this._z=d*h*A-_*x*y,this._w=d*h*y-_*x*A;break;case"XZY":this._x=_*h*y-d*x*A,this._y=d*x*y-_*h*A,this._z=d*h*A+_*x*y,this._w=d*h*y+_*x*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],l=t[5],c=t[9],d=t[2],h=t[6],y=t[10],_=n+l+y;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(h-c)*x,this._y=(s-d)*x,this._z=(o-i)*x}else if(n>l&&n>y){const x=2*Math.sqrt(1+n-l-y);this._w=(h-c)/x,this._x=.25*x,this._y=(i+o)/x,this._z=(s+d)/x}else if(l>y){const x=2*Math.sqrt(1+l-n-y);this._w=(s-d)/x,this._x=(i+o)/x,this._y=.25*x,this._z=(c+h)/x}else{const x=2*Math.sqrt(1+y-n-l);this._w=(o-i)/x,this._x=(s+d)/x,this._y=(c+h)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(li(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,l=t._x,c=t._y,d=t._z,h=t._w;return this._x=n*h+o*l+i*d-s*c,this._y=i*h+o*c+s*l-n*d,this._z=s*h+o*d+n*c-i*l,this._w=o*h-n*l-i*c-s*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const x=1-t;return this._w=x*o+t*this._w,this._x=x*n+t*this._x,this._y=x*i+t*this._y,this._z=x*s+t*this._z,this.normalize(),this}const d=Math.sqrt(c),h=Math.atan2(d,l),y=Math.sin((1-t)*h)/d,_=Math.sin(t*h)/d;return this._w=o*y+this._w*_,this._x=n*y+this._x*_,this._y=i*y+this._y*_,this._z=s*y+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ve{constructor(e=0,t=0,n=0){ve.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mP.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,l=e.z,c=e.w,d=2*(o*i-l*n),h=2*(l*t-s*i),y=2*(s*n-o*t);return this.x=t+c*d+o*y-l*h,this.y=n+c*h+l*d-s*y,this.z=i+c*y+s*h-o*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=i*c-s*l,this.y=s*o-n*c,this.z=n*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return _E.copy(this).projectOnVector(e),this.sub(_E)}reflect(e){return this.sub(_E.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(li(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _E=new ve,mP=new ks;class Zs{constructor(e=new ve(1/0,1/0,1/0),t=new ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Oa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Oa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Oa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,Oa):Oa.fromBufferAttribute(s,o),Oa.applyMatrix4(e.matrixWorld),this.expandByPoint(Oa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),fw.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),fw.copy(n.boundingBox)),fw.applyMatrix4(e.matrixWorld),this.union(fw)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Oa),Oa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Zm),hw.subVectors(this.max,Zm),Sp.subVectors(e.a,Zm),Mp.subVectors(e.b,Zm),Ep.subVectors(e.c,Zm),Oc.subVectors(Mp,Sp),Dc.subVectors(Ep,Mp),ih.subVectors(Sp,Ep);let t=[0,-Oc.z,Oc.y,0,-Dc.z,Dc.y,0,-ih.z,ih.y,Oc.z,0,-Oc.x,Dc.z,0,-Dc.x,ih.z,0,-ih.x,-Oc.y,Oc.x,0,-Dc.y,Dc.x,0,-ih.y,ih.x,0];return!xE(t,Sp,Mp,Ep,hw)||(t=[1,0,0,0,1,0,0,0,1],!xE(t,Sp,Mp,Ep,hw))?!1:(dw.crossVectors(Oc,Dc),t=[dw.x,dw.y,dw.z],xE(t,Sp,Mp,Ep,hw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Oa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Oa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vu=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],Oa=new ve,fw=new Zs,Sp=new ve,Mp=new ve,Ep=new ve,Oc=new ve,Dc=new ve,ih=new ve,Zm=new ve,hw=new ve,dw=new ve,sh=new ve;function xE(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){sh.fromArray(r,s);const l=i.x*Math.abs(sh.x)+i.y*Math.abs(sh.y)+i.z*Math.abs(sh.z),c=e.dot(sh),d=t.dot(sh),h=n.dot(sh);if(Math.max(-Math.max(c,d,h),Math.min(c,d,h))>l)return!1}return!0}const hJ=new Zs,Qm=new ve,SE=new ve;let Os=class{constructor(e=new ve,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):hJ.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qm.subVectors(e,this.center);const t=Qm.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Qm,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(SE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qm.copy(e.center).add(SE)),this.expandByPoint(Qm.copy(e.center).sub(SE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const wu=new ve,ME=new ve,pw=new ve,Bc=new ve,EE=new ve,mw=new ve,bE=new ve;class dd{constructor(e=new ve,t=new ve(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,wu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=wu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(wu.copy(this.origin).addScaledVector(this.direction,t),wu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){ME.copy(e).add(t).multiplyScalar(.5),pw.copy(t).sub(e).normalize(),Bc.copy(this.origin).sub(ME);const s=e.distanceTo(t)*.5,o=-this.direction.dot(pw),l=Bc.dot(this.direction),c=-Bc.dot(pw),d=Bc.lengthSq(),h=Math.abs(1-o*o);let y,_,x,A;if(h>0)if(y=o*c-l,_=o*l-c,A=s*h,y>=0)if(_>=-A)if(_<=A){const P=1/h;y*=P,_*=P,x=y*(y+o*_+2*l)+_*(o*y+_+2*c)+d}else _=s,y=Math.max(0,-(o*_+l)),x=-y*y+_*(_+2*c)+d;else _=-s,y=Math.max(0,-(o*_+l)),x=-y*y+_*(_+2*c)+d;else _<=-A?(y=Math.max(0,-(-o*s+l)),_=y>0?-s:Math.min(Math.max(-s,-c),s),x=-y*y+_*(_+2*c)+d):_<=A?(y=0,_=Math.min(Math.max(-s,-c),s),x=_*(_+2*c)+d):(y=Math.max(0,-(o*s+l)),_=y>0?s:Math.min(Math.max(-s,-c),s),x=-y*y+_*(_+2*c)+d);else _=o>0?-s:s,y=Math.max(0,-(o*_+l)),x=-y*y+_*(_+2*c)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,y),i&&i.copy(ME).addScaledVector(pw,_),x}intersectSphere(e,t){wu.subVectors(e.center,this.origin);const n=wu.dot(this.direction),i=wu.dot(wu)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),l=n-o,c=n+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,l,c;const d=1/this.direction.x,h=1/this.direction.y,y=1/this.direction.z,_=this.origin;return d>=0?(n=(e.min.x-_.x)*d,i=(e.max.x-_.x)*d):(n=(e.max.x-_.x)*d,i=(e.min.x-_.x)*d),h>=0?(s=(e.min.y-_.y)*h,o=(e.max.y-_.y)*h):(s=(e.max.y-_.y)*h,o=(e.min.y-_.y)*h),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),y>=0?(l=(e.min.z-_.z)*y,c=(e.max.z-_.z)*y):(l=(e.max.z-_.z)*y,c=(e.min.z-_.z)*y),n>c||l>i)||((l>n||n!==n)&&(n=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,wu)!==null}intersectTriangle(e,t,n,i,s){EE.subVectors(t,e),mw.subVectors(n,e),bE.crossVectors(EE,mw);let o=this.direction.dot(bE),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Bc.subVectors(this.origin,e);const c=l*this.direction.dot(mw.crossVectors(Bc,mw));if(c<0)return null;const d=l*this.direction.dot(EE.cross(Bc));if(d<0||c+d>o)return null;const h=-l*Bc.dot(bE);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ln{constructor(e,t,n,i,s,o,l,c,d,h,y,_,x,A,P,I){Ln.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,c,d,h,y,_,x,A,P,I)}set(e,t,n,i,s,o,l,c,d,h,y,_,x,A,P,I){const C=this.elements;return C[0]=e,C[4]=t,C[8]=n,C[12]=i,C[1]=s,C[5]=o,C[9]=l,C[13]=c,C[2]=d,C[6]=h,C[10]=y,C[14]=_,C[3]=x,C[7]=A,C[11]=P,C[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ln().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/bp.setFromMatrixColumn(e,0).length(),s=1/bp.setFromMatrixColumn(e,1).length(),o=1/bp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),c=Math.cos(i),d=Math.sin(i),h=Math.cos(s),y=Math.sin(s);if(e.order==="XYZ"){const _=o*h,x=o*y,A=l*h,P=l*y;t[0]=c*h,t[4]=-c*y,t[8]=d,t[1]=x+A*d,t[5]=_-P*d,t[9]=-l*c,t[2]=P-_*d,t[6]=A+x*d,t[10]=o*c}else if(e.order==="YXZ"){const _=c*h,x=c*y,A=d*h,P=d*y;t[0]=_+P*l,t[4]=A*l-x,t[8]=o*d,t[1]=o*y,t[5]=o*h,t[9]=-l,t[2]=x*l-A,t[6]=P+_*l,t[10]=o*c}else if(e.order==="ZXY"){const _=c*h,x=c*y,A=d*h,P=d*y;t[0]=_-P*l,t[4]=-o*y,t[8]=A+x*l,t[1]=x+A*l,t[5]=o*h,t[9]=P-_*l,t[2]=-o*d,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const _=o*h,x=o*y,A=l*h,P=l*y;t[0]=c*h,t[4]=A*d-x,t[8]=_*d+P,t[1]=c*y,t[5]=P*d+_,t[9]=x*d-A,t[2]=-d,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const _=o*c,x=o*d,A=l*c,P=l*d;t[0]=c*h,t[4]=P-_*y,t[8]=A*y+x,t[1]=y,t[5]=o*h,t[9]=-l*h,t[2]=-d*h,t[6]=x*y+A,t[10]=_-P*y}else if(e.order==="XZY"){const _=o*c,x=o*d,A=l*c,P=l*d;t[0]=c*h,t[4]=-y,t[8]=d*h,t[1]=_*y+P,t[5]=o*h,t[9]=x*y-A,t[2]=A*y-x,t[6]=l*h,t[10]=P*y+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dJ,e,pJ)}lookAt(e,t,n){const i=this.elements;return ko.subVectors(e,t),ko.lengthSq()===0&&(ko.z=1),ko.normalize(),Uc.crossVectors(n,ko),Uc.lengthSq()===0&&(Math.abs(n.z)===1?ko.x+=1e-4:ko.z+=1e-4,ko.normalize(),Uc.crossVectors(n,ko)),Uc.normalize(),gw.crossVectors(ko,Uc),i[0]=Uc.x,i[4]=gw.x,i[8]=ko.x,i[1]=Uc.y,i[5]=gw.y,i[9]=ko.y,i[2]=Uc.z,i[6]=gw.z,i[10]=ko.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[4],c=n[8],d=n[12],h=n[1],y=n[5],_=n[9],x=n[13],A=n[2],P=n[6],I=n[10],C=n[14],D=n[3],k=n[7],F=n[11],Q=n[15],G=i[0],Y=i[4],ee=i[8],te=i[12],U=i[1],V=i[5],K=i[9],E=i[13],a=i[2],p=i[6],M=i[10],R=i[14],T=i[3],L=i[7],N=i[11],v=i[15];return s[0]=o*G+l*U+c*a+d*T,s[4]=o*Y+l*V+c*p+d*L,s[8]=o*ee+l*K+c*M+d*N,s[12]=o*te+l*E+c*R+d*v,s[1]=h*G+y*U+_*a+x*T,s[5]=h*Y+y*V+_*p+x*L,s[9]=h*ee+y*K+_*M+x*N,s[13]=h*te+y*E+_*R+x*v,s[2]=A*G+P*U+I*a+C*T,s[6]=A*Y+P*V+I*p+C*L,s[10]=A*ee+P*K+I*M+C*N,s[14]=A*te+P*E+I*R+C*v,s[3]=D*G+k*U+F*a+Q*T,s[7]=D*Y+k*V+F*p+Q*L,s[11]=D*ee+k*K+F*M+Q*N,s[15]=D*te+k*E+F*R+Q*v,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],l=e[5],c=e[9],d=e[13],h=e[2],y=e[6],_=e[10],x=e[14],A=e[3],P=e[7],I=e[11],C=e[15];return A*(+s*c*y-i*d*y-s*l*_+n*d*_+i*l*x-n*c*x)+P*(+t*c*x-t*d*_+s*o*_-i*o*x+i*d*h-s*c*h)+I*(+t*d*y-t*l*x-s*o*y+n*o*x+s*l*h-n*d*h)+C*(-i*l*h-t*c*y+t*l*_+i*o*y-n*o*_+n*c*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],d=e[7],h=e[8],y=e[9],_=e[10],x=e[11],A=e[12],P=e[13],I=e[14],C=e[15],D=y*I*d-P*_*d+P*c*x-l*I*x-y*c*C+l*_*C,k=A*_*d-h*I*d-A*c*x+o*I*x+h*c*C-o*_*C,F=h*P*d-A*y*d+A*l*x-o*P*x-h*l*C+o*y*C,Q=A*y*c-h*P*c-A*l*_+o*P*_+h*l*I-o*y*I,G=t*D+n*k+i*F+s*Q;if(G===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Y=1/G;return e[0]=D*Y,e[1]=(P*_*s-y*I*s-P*i*x+n*I*x+y*i*C-n*_*C)*Y,e[2]=(l*I*s-P*c*s+P*i*d-n*I*d-l*i*C+n*c*C)*Y,e[3]=(y*c*s-l*_*s-y*i*d+n*_*d+l*i*x-n*c*x)*Y,e[4]=k*Y,e[5]=(h*I*s-A*_*s+A*i*x-t*I*x-h*i*C+t*_*C)*Y,e[6]=(A*c*s-o*I*s-A*i*d+t*I*d+o*i*C-t*c*C)*Y,e[7]=(o*_*s-h*c*s+h*i*d-t*_*d-o*i*x+t*c*x)*Y,e[8]=F*Y,e[9]=(A*y*s-h*P*s-A*n*x+t*P*x+h*n*C-t*y*C)*Y,e[10]=(o*P*s-A*l*s+A*n*d-t*P*d-o*n*C+t*l*C)*Y,e[11]=(h*l*s-o*y*s-h*n*d+t*y*d+o*n*x-t*l*x)*Y,e[12]=Q*Y,e[13]=(h*P*i-A*y*i+A*n*_-t*P*_-h*n*I+t*y*I)*Y,e[14]=(A*l*i-o*P*i-A*n*c+t*P*c+o*n*I-t*l*I)*Y,e[15]=(o*y*i-h*l*i+h*n*c-t*y*c-o*n*_+t*l*_)*Y,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,l=e.y,c=e.z,d=s*o,h=s*l;return this.set(d*o+n,d*l-i*c,d*c+i*l,0,d*l+i*c,h*l+n,h*c-i*o,0,d*c-i*l,h*c+i*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,d=s+s,h=o+o,y=l+l,_=s*d,x=s*h,A=s*y,P=o*h,I=o*y,C=l*y,D=c*d,k=c*h,F=c*y,Q=n.x,G=n.y,Y=n.z;return i[0]=(1-(P+C))*Q,i[1]=(x+F)*Q,i[2]=(A-k)*Q,i[3]=0,i[4]=(x-F)*G,i[5]=(1-(_+C))*G,i[6]=(I+D)*G,i[7]=0,i[8]=(A+k)*Y,i[9]=(I-D)*Y,i[10]=(1-(_+P))*Y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=bp.set(i[0],i[1],i[2]).length();const o=bp.set(i[4],i[5],i[6]).length(),l=bp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Da.copy(this);const d=1/s,h=1/o,y=1/l;return Da.elements[0]*=d,Da.elements[1]*=d,Da.elements[2]*=d,Da.elements[4]*=h,Da.elements[5]*=h,Da.elements[6]*=h,Da.elements[8]*=y,Da.elements[9]*=y,Da.elements[10]*=y,t.setFromRotationMatrix(Da),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,i,s,o,l=bl){const c=this.elements,d=2*s/(t-e),h=2*s/(n-i),y=(t+e)/(t-e),_=(n+i)/(n-i);let x,A;if(l===bl)x=-(o+s)/(o-s),A=-2*o*s/(o-s);else if(l===cy)x=-o/(o-s),A=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=d,c[4]=0,c[8]=y,c[12]=0,c[1]=0,c[5]=h,c[9]=_,c[13]=0,c[2]=0,c[6]=0,c[10]=x,c[14]=A,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,i,s,o,l=bl){const c=this.elements,d=1/(t-e),h=1/(n-i),y=1/(o-s),_=(t+e)*d,x=(n+i)*h;let A,P;if(l===bl)A=(o+s)*y,P=-2*y;else if(l===cy)A=s*y,P=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-_,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-x,c[2]=0,c[6]=0,c[10]=P,c[14]=-A,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const bp=new ve,Da=new Ln,dJ=new ve(0,0,0),pJ=new ve(1,1,1),Uc=new ve,gw=new ve,ko=new ve,gP=new Ln,yP=new ks;class Go{constructor(e=0,t=0,n=0,i=Go.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],l=i[8],c=i[1],d=i[5],h=i[9],y=i[2],_=i[6],x=i[10];switch(t){case"XYZ":this._y=Math.asin(li(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,x),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(_,d),this._z=0);break;case"YXZ":this._x=Math.asin(-li(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,x),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-y,s),this._z=0);break;case"ZXY":this._x=Math.asin(li(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-y,x),this._z=Math.atan2(-o,d)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-li(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,d));break;case"YZX":this._z=Math.asin(li(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-y,s)):(this._x=0,this._y=Math.atan2(l,x));break;case"XZY":this._z=Math.asin(-li(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(_,d),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,x),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return gP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gP,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return yP.setFromEuler(this),this.setFromQuaternion(yP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Go.DEFAULT_ORDER="XYZ";class Yh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mJ=0;const vP=new ve,Ap=new ks,_u=new Ln,yw=new ve,Jm=new ve,gJ=new ve,yJ=new ks,wP=new ve(1,0,0),_P=new ve(0,1,0),xP=new ve(0,0,1),SP={type:"added"},vJ={type:"removed"},Tp={type:"childadded",child:null},AE={type:"childremoved",child:null};class pr extends kl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mJ++}),this.uuid=Vo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pr.DEFAULT_UP.clone();const e=new ve,t=new Go,n=new ks,i=new ve(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ln},normalMatrix:{value:new jn}}),this.matrix=new Ln,this.matrixWorld=new Ln,this.matrixAutoUpdate=pr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=pr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Yh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ap.setFromAxisAngle(e,t),this.quaternion.multiply(Ap),this}rotateOnWorldAxis(e,t){return Ap.setFromAxisAngle(e,t),this.quaternion.premultiply(Ap),this}rotateX(e){return this.rotateOnAxis(wP,e)}rotateY(e){return this.rotateOnAxis(_P,e)}rotateZ(e){return this.rotateOnAxis(xP,e)}translateOnAxis(e,t){return vP.copy(e).applyQuaternion(this.quaternion),this.position.add(vP.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(wP,e)}translateY(e){return this.translateOnAxis(_P,e)}translateZ(e){return this.translateOnAxis(xP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_u.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?yw.copy(e):yw.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Jm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_u.lookAt(Jm,yw,this.up):_u.lookAt(yw,Jm,this.up),this.quaternion.setFromRotationMatrix(_u),i&&(_u.extractRotation(i.matrixWorld),Ap.setFromRotationMatrix(_u),this.quaternion.premultiply(Ap.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(SP),Tp.child=e,this.dispatchEvent(Tp),Tp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vJ),AE.child=e,this.dispatchEvent(AE),AE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_u.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_u.multiply(e.parent.matrixWorld)),e.applyMatrix4(_u),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(SP),Tp.child=e,this.dispatchEvent(Tp),Tp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jm,e,gJ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jm,yJ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let d=0,h=c.length;d<h;d++){const y=c[d];s(e.shapes,y)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(s(e.materials,this.material[c]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];i.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),d=o(e.textures),h=o(e.images),y=o(e.shapes),_=o(e.skeletons),x=o(e.animations),A=o(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),d.length>0&&(n.textures=d),h.length>0&&(n.images=h),y.length>0&&(n.shapes=y),_.length>0&&(n.skeletons=_),x.length>0&&(n.animations=x),A.length>0&&(n.nodes=A)}return n.object=i,n;function o(l){const c=[];for(const d in l){const h=l[d];delete h.metadata,c.push(h)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}pr.DEFAULT_UP=new ve(0,1,0);pr.DEFAULT_MATRIX_AUTO_UPDATE=!0;pr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ba=new ve,xu=new ve,TE=new ve,Su=new ve,Rp=new ve,Cp=new ve,MP=new ve,RE=new ve,CE=new ve,IE=new ve,NE=new fr,PE=new fr,LE=new fr;class vo{constructor(e=new ve,t=new ve,n=new ve){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Ba.subVectors(e,t),i.cross(Ba);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Ba.subVectors(i,t),xu.subVectors(n,t),TE.subVectors(e,t);const o=Ba.dot(Ba),l=Ba.dot(xu),c=Ba.dot(TE),d=xu.dot(xu),h=xu.dot(TE),y=o*d-l*l;if(y===0)return s.set(0,0,0),null;const _=1/y,x=(d*c-l*h)*_,A=(o*h-l*c)*_;return s.set(1-x-A,A,x)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Su)===null?!1:Su.x>=0&&Su.y>=0&&Su.x+Su.y<=1}static getInterpolation(e,t,n,i,s,o,l,c){return this.getBarycoord(e,t,n,i,Su)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Su.x),c.addScaledVector(o,Su.y),c.addScaledVector(l,Su.z),c)}static getInterpolatedAttribute(e,t,n,i,s,o){return NE.setScalar(0),PE.setScalar(0),LE.setScalar(0),NE.fromBufferAttribute(e,t),PE.fromBufferAttribute(e,n),LE.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(NE,s.x),o.addScaledVector(PE,s.y),o.addScaledVector(LE,s.z),o}static isFrontFacing(e,t,n,i){return Ba.subVectors(n,t),xu.subVectors(e,t),Ba.cross(xu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ba.subVectors(this.c,this.b),xu.subVectors(this.a,this.b),Ba.cross(xu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return vo.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return vo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,l;Rp.subVectors(i,n),Cp.subVectors(s,n),RE.subVectors(e,n);const c=Rp.dot(RE),d=Cp.dot(RE);if(c<=0&&d<=0)return t.copy(n);CE.subVectors(e,i);const h=Rp.dot(CE),y=Cp.dot(CE);if(h>=0&&y<=h)return t.copy(i);const _=c*y-h*d;if(_<=0&&c>=0&&h<=0)return o=c/(c-h),t.copy(n).addScaledVector(Rp,o);IE.subVectors(e,s);const x=Rp.dot(IE),A=Cp.dot(IE);if(A>=0&&x<=A)return t.copy(s);const P=x*d-c*A;if(P<=0&&d>=0&&A<=0)return l=d/(d-A),t.copy(n).addScaledVector(Cp,l);const I=h*A-x*y;if(I<=0&&y-h>=0&&x-A>=0)return MP.subVectors(s,i),l=(y-h)/(y-h+(x-A)),t.copy(i).addScaledVector(MP,l);const C=1/(I+P+_);return o=P*C,l=_*C,t.copy(n).addScaledVector(Rp,o).addScaledVector(Cp,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const e5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fc={h:0,s:0,l:0},vw={h:0,s:0,l:0};function kE(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class en{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=aa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,yr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=yr.workingColorSpace){return this.r=e,this.g=t,this.b=n,yr.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=yr.workingColorSpace){if(e=xR(e,1),t=li(t,0,1),n=li(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=kE(o,s,e+1/3),this.g=kE(o,s,e),this.b=kE(o,s,e-1/3)}return yr.toWorkingColorSpace(this,i),this}setStyle(e,t=aa){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],l=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=aa){const n=e5[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=h0(e.r),this.g=h0(e.g),this.b=h0(e.b),this}copyLinearToSRGB(e){return this.r=vE(e.r),this.g=vE(e.g),this.b=vE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=aa){return yr.fromWorkingColorSpace(Rs.copy(this),e),Math.round(li(Rs.r*255,0,255))*65536+Math.round(li(Rs.g*255,0,255))*256+Math.round(li(Rs.b*255,0,255))}getHexString(e=aa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=yr.workingColorSpace){yr.fromWorkingColorSpace(Rs.copy(this),t);const n=Rs.r,i=Rs.g,s=Rs.b,o=Math.max(n,i,s),l=Math.min(n,i,s);let c,d;const h=(l+o)/2;if(l===o)c=0,d=0;else{const y=o-l;switch(d=h<=.5?y/(o+l):y/(2-o-l),o){case n:c=(i-s)/y+(i<s?6:0);break;case i:c=(s-n)/y+2;break;case s:c=(n-i)/y+4;break}c/=6}return e.h=c,e.s=d,e.l=h,e}getRGB(e,t=yr.workingColorSpace){return yr.fromWorkingColorSpace(Rs.copy(this),t),e.r=Rs.r,e.g=Rs.g,e.b=Rs.b,e}getStyle(e=aa){yr.fromWorkingColorSpace(Rs.copy(this),e);const t=Rs.r,n=Rs.g,i=Rs.b;return e!==aa?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(Fc),this.setHSL(Fc.h+e,Fc.s+t,Fc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Fc),e.getHSL(vw);const n=Og(Fc.h,vw.h,t),i=Og(Fc.s,vw.s,t),s=Og(Fc.l,vw.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Rs=new en;en.NAMES=e5;let wJ=0;class Ds extends kl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wJ++}),this.uuid=Vo(),this.name="",this.type="Material",this.blending=jh,this.side=Ku,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=r1,this.blendDst=i1,this.blendEquation=Yc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new en(0,0,0),this.blendAlpha=0,this.depthFunc=ed,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=xh,this.stencilZFail=xh,this.stencilZPass=xh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==jh&&(n.blending=this.blending),this.side!==Ku&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==r1&&(n.blendSrc=this.blendSrc),this.blendDst!==i1&&(n.blendDst=this.blendDst),this.blendEquation!==Yc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==ed&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AA&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==xh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==xh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==xh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class cf extends Ds{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new en(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.combine=Uy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ku=_J();function _J(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const d=c-127;d<-27?(n[c]=0,n[c|256]=32768,i[c]=24,i[c|256]=24):d<-14?(n[c]=1024>>-d-14,n[c|256]=1024>>-d-14|32768,i[c]=-d-1,i[c|256]=-d-1):d<=15?(n[c]=d+15<<10,n[c|256]=d+15<<10|32768,i[c]=13,i[c|256]=13):d<128?(n[c]=31744,n[c|256]=64512,i[c]=24,i[c|256]=24):(n[c]=31744,n[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let d=c<<13,h=0;for(;(d&8388608)===0;)d<<=1,h-=8388608;d&=-8388609,h+=947912704,s[c]=d|h}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:l}}function po(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=li(r,-65504,65504),ku.floatView[0]=r;const e=ku.uint32View[0],t=e>>23&511;return ku.baseTable[t]+((e&8388607)>>ku.shiftTable[t])}function gg(r){const e=r>>10;return ku.uint32View[0]=ku.mantissaTable[ku.offsetTable[e]+(r&1023)]+ku.exponentTable[e],ku.floatView[0]}const xJ={toHalfFloat:po,fromHalfFloat:gg},Ai=new ve,ww=new Mt;class Nr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=uy,this.updateRanges=[],this.gpuType=_o,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)ww.fromBufferAttribute(this,t),ww.applyMatrix3(e),this.setXY(t,ww.x,ww.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix3(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix4(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ai.fromBufferAttribute(this,t),Ai.applyNormalMatrix(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ai.fromBufferAttribute(this,t),Ai.transformDirection(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=$s(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Kn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$s(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$s(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$s(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array),s=Kn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uy&&(e.usage=this.usage),e}}class SJ extends Nr{constructor(e,t,n){super(new Int8Array(e),t,n)}}class MJ extends Nr{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class EJ extends Nr{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class bJ extends Nr{constructor(e,t,n){super(new Int16Array(e),t,n)}}class ER extends Nr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class AJ extends Nr{constructor(e,t,n){super(new Int32Array(e),t,n)}}class bR extends Nr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class TJ extends Nr{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=gg(this.array[e*this.itemSize]);return this.normalized&&(t=$s(t,this.array)),t}setX(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize]=po(t),this}getY(e){let t=gg(this.array[e*this.itemSize+1]);return this.normalized&&(t=$s(t,this.array)),t}setY(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+1]=po(t),this}getZ(e){let t=gg(this.array[e*this.itemSize+2]);return this.normalized&&(t=$s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+2]=po(t),this}getW(e){let t=gg(this.array[e*this.itemSize+3]);return this.normalized&&(t=$s(t,this.array)),t}setW(e,t){return this.normalized&&(t=Kn(t,this.array)),this.array[e*this.itemSize+3]=po(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array)),this.array[e+0]=po(t),this.array[e+1]=po(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array)),this.array[e+0]=po(t),this.array[e+1]=po(n),this.array[e+2]=po(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array),s=Kn(s,this.array)),this.array[e+0]=po(t),this.array[e+1]=po(n),this.array[e+2]=po(i),this.array[e+3]=po(s),this}}class vn extends Nr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let RJ=0;const ia=new Ln,OE=new pr,Ip=new ve,Oo=new Zs,eg=new Zs,Yi=new ve;class Jn extends kl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:RJ++}),this.uuid=Vo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($6(e)?bR:ER)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new jn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ia.makeRotationFromQuaternion(e),this.applyMatrix4(ia),this}rotateX(e){return ia.makeRotationX(e),this.applyMatrix4(ia),this}rotateY(e){return ia.makeRotationY(e),this.applyMatrix4(ia),this}rotateZ(e){return ia.makeRotationZ(e),this.applyMatrix4(ia),this}translate(e,t,n){return ia.makeTranslation(e,t,n),this.applyMatrix4(ia),this}scale(e,t,n){return ia.makeScale(e,t,n),this.applyMatrix4(ia),this}lookAt(e){return OE.lookAt(e),OE.updateMatrix(),this.applyMatrix4(OE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ip).negate(),this.translate(Ip.x,Ip.y,Ip.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new vn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Oo.setFromBufferAttribute(s),this.morphTargetsRelative?(Yi.addVectors(this.boundingBox.min,Oo.min),this.boundingBox.expandByPoint(Yi),Yi.addVectors(this.boundingBox.max,Oo.max),this.boundingBox.expandByPoint(Yi)):(this.boundingBox.expandByPoint(Oo.min),this.boundingBox.expandByPoint(Oo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Os);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ve,1/0);return}if(e){const n=this.boundingSphere.center;if(Oo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];eg.setFromBufferAttribute(l),this.morphTargetsRelative?(Yi.addVectors(Oo.min,eg.min),Oo.expandByPoint(Yi),Yi.addVectors(Oo.max,eg.max),Oo.expandByPoint(Yi)):(Oo.expandByPoint(eg.min),Oo.expandByPoint(eg.max))}Oo.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)Yi.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Yi));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let d=0,h=l.count;d<h;d++)Yi.fromBufferAttribute(l,d),c&&(Ip.fromBufferAttribute(e,d),Yi.add(Ip)),i=Math.max(i,n.distanceToSquared(Yi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Nr(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let ee=0;ee<n.count;ee++)l[ee]=new ve,c[ee]=new ve;const d=new ve,h=new ve,y=new ve,_=new Mt,x=new Mt,A=new Mt,P=new ve,I=new ve;function C(ee,te,U){d.fromBufferAttribute(n,ee),h.fromBufferAttribute(n,te),y.fromBufferAttribute(n,U),_.fromBufferAttribute(s,ee),x.fromBufferAttribute(s,te),A.fromBufferAttribute(s,U),h.sub(d),y.sub(d),x.sub(_),A.sub(_);const V=1/(x.x*A.y-A.x*x.y);isFinite(V)&&(P.copy(h).multiplyScalar(A.y).addScaledVector(y,-x.y).multiplyScalar(V),I.copy(y).multiplyScalar(x.x).addScaledVector(h,-A.x).multiplyScalar(V),l[ee].add(P),l[te].add(P),l[U].add(P),c[ee].add(I),c[te].add(I),c[U].add(I))}let D=this.groups;D.length===0&&(D=[{start:0,count:e.count}]);for(let ee=0,te=D.length;ee<te;++ee){const U=D[ee],V=U.start,K=U.count;for(let E=V,a=V+K;E<a;E+=3)C(e.getX(E+0),e.getX(E+1),e.getX(E+2))}const k=new ve,F=new ve,Q=new ve,G=new ve;function Y(ee){Q.fromBufferAttribute(i,ee),G.copy(Q);const te=l[ee];k.copy(te),k.sub(Q.multiplyScalar(Q.dot(te))).normalize(),F.crossVectors(G,te);const V=F.dot(c[ee])<0?-1:1;o.setXYZW(ee,k.x,k.y,k.z,V)}for(let ee=0,te=D.length;ee<te;++ee){const U=D[ee],V=U.start,K=U.count;for(let E=V,a=V+K;E<a;E+=3)Y(e.getX(E+0)),Y(e.getX(E+1)),Y(e.getX(E+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Nr(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let _=0,x=n.count;_<x;_++)n.setXYZ(_,0,0,0);const i=new ve,s=new ve,o=new ve,l=new ve,c=new ve,d=new ve,h=new ve,y=new ve;if(e)for(let _=0,x=e.count;_<x;_+=3){const A=e.getX(_+0),P=e.getX(_+1),I=e.getX(_+2);i.fromBufferAttribute(t,A),s.fromBufferAttribute(t,P),o.fromBufferAttribute(t,I),h.subVectors(o,s),y.subVectors(i,s),h.cross(y),l.fromBufferAttribute(n,A),c.fromBufferAttribute(n,P),d.fromBufferAttribute(n,I),l.add(h),c.add(h),d.add(h),n.setXYZ(A,l.x,l.y,l.z),n.setXYZ(P,c.x,c.y,c.z),n.setXYZ(I,d.x,d.y,d.z)}else for(let _=0,x=t.count;_<x;_+=3)i.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),o.fromBufferAttribute(t,_+2),h.subVectors(o,s),y.subVectors(i,s),h.cross(y),n.setXYZ(_+0,h.x,h.y,h.z),n.setXYZ(_+1,h.x,h.y,h.z),n.setXYZ(_+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Yi.fromBufferAttribute(e,t),Yi.normalize(),e.setXYZ(t,Yi.x,Yi.y,Yi.z)}toNonIndexed(){function e(l,c){const d=l.array,h=l.itemSize,y=l.normalized,_=new d.constructor(c.length*h);let x=0,A=0;for(let P=0,I=c.length;P<I;P++){l.isInterleavedBufferAttribute?x=c[P]*l.data.stride+l.offset:x=c[P]*h;for(let C=0;C<h;C++)_[A++]=d[x++]}return new Nr(_,h,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jn,n=this.index.array,i=this.attributes;for(const l in i){const c=i[l],d=e(c,n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const c=[],d=s[l];for(let h=0,y=d.length;h<y;h++){const _=d[h],x=e(_,n);c.push(x)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const d=o[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const d in c)c[d]!==void 0&&(e[d]=c[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const d=n[c];e.data.attributes[c]=d.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const d=this.morphAttributes[c],h=[];for(let y=0,_=d.length;y<_;y++){const x=d[y];h.push(x.toJSON(e.data))}h.length>0&&(i[c]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const d in i){const h=i[d];this.setAttribute(d,h.clone(t))}const s=e.morphAttributes;for(const d in s){const h=[],y=s[d];for(let _=0,x=y.length;_<x;_++)h.push(y[_].clone(t));this.morphAttributes[d]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let d=0,h=o.length;d<h;d++){const y=o[d];this.addGroup(y.start,y.count,y.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const EP=new Ln,oh=new dd,_w=new Os,bP=new ve,xw=new ve,Sw=new ve,Mw=new ve,DE=new ve,Ew=new ve,AP=new ve,bw=new ve;class Pi extends pr{constructor(e=new Jn,t=new cf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){Ew.set(0,0,0);for(let c=0,d=s.length;c<d;c++){const h=l[c],y=s[c];h!==0&&(DE.fromBufferAttribute(y,e),o?Ew.addScaledVector(DE,h):Ew.addScaledVector(DE.sub(t),h))}t.add(Ew)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_w.copy(n.boundingSphere),_w.applyMatrix4(s),oh.copy(e.ray).recast(e.near),!(_w.containsPoint(oh.origin)===!1&&(oh.intersectSphere(_w,bP)===null||oh.origin.distanceToSquared(bP)>(e.far-e.near)**2))&&(EP.copy(s).invert(),oh.copy(e.ray).applyMatrix4(EP),!(n.boundingBox!==null&&oh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,oh)))}_computeIntersections(e,t,n){let i;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,d=s.attributes.uv,h=s.attributes.uv1,y=s.attributes.normal,_=s.groups,x=s.drawRange;if(l!==null)if(Array.isArray(o))for(let A=0,P=_.length;A<P;A++){const I=_[A],C=o[I.materialIndex],D=Math.max(I.start,x.start),k=Math.min(l.count,Math.min(I.start+I.count,x.start+x.count));for(let F=D,Q=k;F<Q;F+=3){const G=l.getX(F),Y=l.getX(F+1),ee=l.getX(F+2);i=Aw(this,C,e,n,d,h,y,G,Y,ee),i&&(i.faceIndex=Math.floor(F/3),i.face.materialIndex=I.materialIndex,t.push(i))}}else{const A=Math.max(0,x.start),P=Math.min(l.count,x.start+x.count);for(let I=A,C=P;I<C;I+=3){const D=l.getX(I),k=l.getX(I+1),F=l.getX(I+2);i=Aw(this,o,e,n,d,h,y,D,k,F),i&&(i.faceIndex=Math.floor(I/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let A=0,P=_.length;A<P;A++){const I=_[A],C=o[I.materialIndex],D=Math.max(I.start,x.start),k=Math.min(c.count,Math.min(I.start+I.count,x.start+x.count));for(let F=D,Q=k;F<Q;F+=3){const G=F,Y=F+1,ee=F+2;i=Aw(this,C,e,n,d,h,y,G,Y,ee),i&&(i.faceIndex=Math.floor(F/3),i.face.materialIndex=I.materialIndex,t.push(i))}}else{const A=Math.max(0,x.start),P=Math.min(c.count,x.start+x.count);for(let I=A,C=P;I<C;I+=3){const D=I,k=I+1,F=I+2;i=Aw(this,o,e,n,d,h,y,D,k,F),i&&(i.faceIndex=Math.floor(I/3),t.push(i))}}}}function CJ(r,e,t,n,i,s,o,l){let c;if(e.side===Ls?c=n.intersectTriangle(o,s,i,!0,l):c=n.intersectTriangle(i,s,o,e.side===Ku,l),c===null)return null;bw.copy(l),bw.applyMatrix4(r.matrixWorld);const d=t.ray.origin.distanceTo(bw);return d<t.near||d>t.far?null:{distance:d,point:bw.clone(),object:r}}function Aw(r,e,t,n,i,s,o,l,c,d){r.getVertexPosition(l,xw),r.getVertexPosition(c,Sw),r.getVertexPosition(d,Mw);const h=CJ(r,e,t,n,xw,Sw,Mw,AP);if(h){const y=new ve;vo.getBarycoord(AP,xw,Sw,Mw,y),i&&(h.uv=vo.getInterpolatedAttribute(i,l,c,d,y,new Mt)),s&&(h.uv1=vo.getInterpolatedAttribute(s,l,c,d,y,new Mt)),o&&(h.normal=vo.getInterpolatedAttribute(o,l,c,d,y,new ve),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const _={a:l,b:c,c:d,normal:new ve,materialIndex:0};vo.getNormal(xw,Sw,Mw,_.normal),h.face=_,h.barycoord=y}return h}class pd extends Jn{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const l=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],d=[],h=[],y=[];let _=0,x=0;A("z","y","x",-1,-1,n,t,e,o,s,0),A("z","y","x",1,-1,n,t,-e,o,s,1),A("x","z","y",1,1,e,n,t,i,o,2),A("x","z","y",1,-1,e,n,-t,i,o,3),A("x","y","z",1,-1,e,t,n,i,s,4),A("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new vn(d,3)),this.setAttribute("normal",new vn(h,3)),this.setAttribute("uv",new vn(y,2));function A(P,I,C,D,k,F,Q,G,Y,ee,te){const U=F/Y,V=Q/ee,K=F/2,E=Q/2,a=G/2,p=Y+1,M=ee+1;let R=0,T=0;const L=new ve;for(let N=0;N<M;N++){const v=N*V-E;for(let u=0;u<p;u++){const S=u*U-K;L[P]=S*D,L[I]=v*k,L[C]=a,d.push(L.x,L.y,L.z),L[P]=0,L[I]=0,L[C]=G>0?1:-1,h.push(L.x,L.y,L.z),y.push(u/Y),y.push(1-N/ee),R+=1}}for(let N=0;N<ee;N++)for(let v=0;v<Y;v++){const u=_+v+p*N,S=_+v+p*(N+1),W=_+(v+1)+p*(N+1),$=_+(v+1)+p*N;c.push(u,S,$),c.push(S,W,$),T+=6}l.addGroup(x,T,te),x+=T,_+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function b0(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Xs(r){const e={};for(let t=0;t<r.length;t++){const n=b0(r[t]);for(const i in n)e[i]=n[i]}return e}function IJ(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function t5(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:yr.workingColorSpace}const n5={clone:b0,merge:Xs};var NJ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,PJ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jo extends Ds{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=NJ,this.fragmentShader=PJ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=b0(e.uniforms),this.uniformsGroups=IJ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Wy extends pr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ln,this.projectionMatrix=new Ln,this.projectionMatrixInverse=new Ln,this.coordinateSystem=bl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zc=new ve,TP=new Mt,RP=new Mt;class gi extends Wy{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=E0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Kh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return E0*2*Math.atan(Math.tan(Kh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){zc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(zc.x,zc.y).multiplyScalar(-e/zc.z),zc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(zc.x,zc.y).multiplyScalar(-e/zc.z)}getViewSize(e,t){return this.getViewBounds(e,TP,RP),t.subVectors(RP,TP)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Kh*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,d=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*n/d,i*=o.width/c,n*=o.height/d}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Np=-90,Pp=1;class r5 extends pr{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new gi(Np,Pp,e,t);i.layers=this.layers,this.add(i);const s=new gi(Np,Pp,e,t);s.layers=this.layers,this.add(s);const o=new gi(Np,Pp,e,t);o.layers=this.layers,this.add(o);const l=new gi(Np,Pp,e,t);l.layers=this.layers,this.add(l);const c=new gi(Np,Pp,e,t);c.layers=this.layers,this.add(c);const d=new gi(Np,Pp,e,t);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,o,l,c]=t;for(const d of t)this.remove(d);if(e===bl)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===cy)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const d of t)this.add(d),d.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,c,d,h]=this.children,y=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;const P=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,l),e.setRenderTarget(n,3,i),e.render(t,c),e.setRenderTarget(n,4,i),e.render(t,d),n.texture.generateMipmaps=P,e.setRenderTarget(n,5,i),e.render(t,h),e.setRenderTarget(y,_,x),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}class Vy extends ui{constructor(e,t,n,i,s,o,l,c,d,h){e=e!==void 0?e:[],t=t!==void 0?t:Yu,super(e,t,n,i,s,o,l,c,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class i5 extends Ya{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Vy(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ii}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new pd(5,5,5),s=new jo({name:"CubemapFromEquirect",uniforms:b0(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ls,blending:Vu});s.uniforms.tEquirect.value=t;const o=new Pi(i,s),l=t.minFilter;return t.minFilter===El&&(t.minFilter=Ii),new r5(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const BE=new ve,LJ=new ve,kJ=new jn;class Ru{constructor(e=new ve(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=BE.subVectors(n,t).cross(LJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(BE),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||kJ.getNormalMatrix(e),i=this.coplanarPoint(BE).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ah=new Os,Tw=new ve;class Hy{constructor(e=new Ru,t=new Ru,n=new Ru,i=new Ru,s=new Ru,o=new Ru){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=bl){const n=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],c=i[3],d=i[4],h=i[5],y=i[6],_=i[7],x=i[8],A=i[9],P=i[10],I=i[11],C=i[12],D=i[13],k=i[14],F=i[15];if(n[0].setComponents(c-s,_-d,I-x,F-C).normalize(),n[1].setComponents(c+s,_+d,I+x,F+C).normalize(),n[2].setComponents(c+o,_+h,I+A,F+D).normalize(),n[3].setComponents(c-o,_-h,I-A,F-D).normalize(),n[4].setComponents(c-l,_-y,I-P,F-k).normalize(),t===bl)n[5].setComponents(c+l,_+y,I+P,F+k).normalize();else if(t===cy)n[5].setComponents(l,y,P,k).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ah.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ah.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ah)}intersectsSprite(e){return ah.center.set(0,0,0),ah.radius=.7071067811865476,ah.applyMatrix4(e.matrixWorld),this.intersectsSphere(ah)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Tw.x=i.normal.x>0?e.max.x:e.min.x,Tw.y=i.normal.y>0?e.max.y:e.min.y,Tw.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Tw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function s5(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function OJ(r){const e=new WeakMap;function t(l,c){const d=l.array,h=l.usage,y=d.byteLength,_=r.createBuffer();r.bindBuffer(c,_),r.bufferData(c,d,h),l.onUploadCallback();let x;if(d instanceof Float32Array)x=r.FLOAT;else if(d instanceof Uint16Array)l.isFloat16BufferAttribute?x=r.HALF_FLOAT:x=r.UNSIGNED_SHORT;else if(d instanceof Int16Array)x=r.SHORT;else if(d instanceof Uint32Array)x=r.UNSIGNED_INT;else if(d instanceof Int32Array)x=r.INT;else if(d instanceof Int8Array)x=r.BYTE;else if(d instanceof Uint8Array)x=r.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)x=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:_,type:x,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version,size:y}}function n(l,c,d){const h=c.array,y=c.updateRanges;if(r.bindBuffer(d,l),y.length===0)r.bufferSubData(d,0,h);else{y.sort((x,A)=>x.start-A.start);let _=0;for(let x=1;x<y.length;x++){const A=y[_],P=y[x];P.start<=A.start+A.count+1?A.count=Math.max(A.count,P.start+P.count-A.start):(++_,y[_]=P)}y.length=_+1;for(let x=0,A=y.length;x<A;x++){const P=y[x];r.bufferSubData(d,P.start*h.BYTES_PER_ELEMENT,h,P.start,P.count)}c.clearUpdateRanges()}c.onUploadCallback()}function i(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(r.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const h=e.get(l);(!h||h.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const d=e.get(l);if(d===void 0)e.set(l,t(l,c));else if(d.version<l.version){if(d.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(d.buffer,l,c),d.version=l.version}}return{get:i,remove:s,update:o}}class F0 extends Jn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,l=Math.floor(n),c=Math.floor(i),d=l+1,h=c+1,y=e/l,_=t/c,x=[],A=[],P=[],I=[];for(let C=0;C<h;C++){const D=C*_-o;for(let k=0;k<d;k++){const F=k*y-s;A.push(F,-D,0),P.push(0,0,1),I.push(k/l),I.push(1-C/c)}}for(let C=0;C<c;C++)for(let D=0;D<l;D++){const k=D+d*C,F=D+d*(C+1),Q=D+1+d*(C+1),G=D+1+d*C;x.push(k,F,G),x.push(F,Q,G)}this.setIndex(x),this.setAttribute("position",new vn(A,3)),this.setAttribute("normal",new vn(P,3)),this.setAttribute("uv",new vn(I,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F0(e.width,e.height,e.widthSegments,e.heightSegments)}}var DJ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,BJ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,UJ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,FJ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zJ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,WJ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,VJ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,HJ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,GJ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,jJ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qJ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,KJ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,YJ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,XJ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$J=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ZJ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,QJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,JJ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,eee=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tee=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,nee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ree=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,iee=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,see=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,oee=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,aee=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,lee=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uee=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,cee=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,fee=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,hee="gl_FragColor = linearToOutputTexel( gl_FragColor );",dee=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,pee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,mee=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,gee=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yee=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,vee=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wee=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,_ee=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,xee=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,See=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Mee=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Eee=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bee=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Aee=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Tee=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ree=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Cee=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Iee=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Nee=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Pee=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Lee=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,kee=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Oee=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Dee=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Bee=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Uee=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Fee=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zee=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Wee=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Vee=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Hee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Gee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,jee=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Kee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Yee=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Xee=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$ee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Zee=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Qee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Jee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ete=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,tte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,rte=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ite=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,ste=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ote=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ate=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,lte=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ute=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,cte=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,fte=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,hte=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dte=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,pte=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,mte=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,gte=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,yte=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,vte=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wte=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,_te=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,xte=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ste=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Mte=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ete=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bte=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Ate=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Tte=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Rte=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Cte=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Ite=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Nte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Pte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Lte=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,kte=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ote=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Dte=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ute=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Fte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Wte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Vte=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Hte=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Gte=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,jte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qte=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yte=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xte=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$te=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ene=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tne=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,nne=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,rne=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ine=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sne=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,one=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ane=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lne=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,une=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,cne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fne=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hne=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,dne=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,pne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xn={alphahash_fragment:DJ,alphahash_pars_fragment:BJ,alphamap_fragment:UJ,alphamap_pars_fragment:FJ,alphatest_fragment:zJ,alphatest_pars_fragment:WJ,aomap_fragment:VJ,aomap_pars_fragment:HJ,batching_pars_vertex:GJ,batching_vertex:jJ,begin_vertex:qJ,beginnormal_vertex:KJ,bsdfs:YJ,iridescence_fragment:XJ,bumpmap_pars_fragment:$J,clipping_planes_fragment:ZJ,clipping_planes_pars_fragment:QJ,clipping_planes_pars_vertex:JJ,clipping_planes_vertex:eee,color_fragment:tee,color_pars_fragment:nee,color_pars_vertex:ree,color_vertex:iee,common:see,cube_uv_reflection_fragment:oee,defaultnormal_vertex:aee,displacementmap_pars_vertex:lee,displacementmap_vertex:uee,emissivemap_fragment:cee,emissivemap_pars_fragment:fee,colorspace_fragment:hee,colorspace_pars_fragment:dee,envmap_fragment:pee,envmap_common_pars_fragment:mee,envmap_pars_fragment:gee,envmap_pars_vertex:yee,envmap_physical_pars_fragment:Ree,envmap_vertex:vee,fog_vertex:wee,fog_pars_vertex:_ee,fog_fragment:xee,fog_pars_fragment:See,gradientmap_pars_fragment:Mee,lightmap_pars_fragment:Eee,lights_lambert_fragment:bee,lights_lambert_pars_fragment:Aee,lights_pars_begin:Tee,lights_toon_fragment:Cee,lights_toon_pars_fragment:Iee,lights_phong_fragment:Nee,lights_phong_pars_fragment:Pee,lights_physical_fragment:Lee,lights_physical_pars_fragment:kee,lights_fragment_begin:Oee,lights_fragment_maps:Dee,lights_fragment_end:Bee,logdepthbuf_fragment:Uee,logdepthbuf_pars_fragment:Fee,logdepthbuf_pars_vertex:zee,logdepthbuf_vertex:Wee,map_fragment:Vee,map_pars_fragment:Hee,map_particle_fragment:Gee,map_particle_pars_fragment:jee,metalnessmap_fragment:qee,metalnessmap_pars_fragment:Kee,morphinstance_vertex:Yee,morphcolor_vertex:Xee,morphnormal_vertex:$ee,morphtarget_pars_vertex:Zee,morphtarget_vertex:Qee,normal_fragment_begin:Jee,normal_fragment_maps:ete,normal_pars_fragment:tte,normal_pars_vertex:nte,normal_vertex:rte,normalmap_pars_fragment:ite,clearcoat_normal_fragment_begin:ste,clearcoat_normal_fragment_maps:ote,clearcoat_pars_fragment:ate,iridescence_pars_fragment:lte,opaque_fragment:ute,packing:cte,premultiplied_alpha_fragment:fte,project_vertex:hte,dithering_fragment:dte,dithering_pars_fragment:pte,roughnessmap_fragment:mte,roughnessmap_pars_fragment:gte,shadowmap_pars_fragment:yte,shadowmap_pars_vertex:vte,shadowmap_vertex:wte,shadowmask_pars_fragment:_te,skinbase_vertex:xte,skinning_pars_vertex:Ste,skinning_vertex:Mte,skinnormal_vertex:Ete,specularmap_fragment:bte,specularmap_pars_fragment:Ate,tonemapping_fragment:Tte,tonemapping_pars_fragment:Rte,transmission_fragment:Cte,transmission_pars_fragment:Ite,uv_pars_fragment:Nte,uv_pars_vertex:Pte,uv_vertex:Lte,worldpos_vertex:kte,background_vert:Ote,background_frag:Dte,backgroundCube_vert:Bte,backgroundCube_frag:Ute,cube_vert:Fte,cube_frag:zte,depth_vert:Wte,depth_frag:Vte,distanceRGBA_vert:Hte,distanceRGBA_frag:Gte,equirect_vert:jte,equirect_frag:qte,linedashed_vert:Kte,linedashed_frag:Yte,meshbasic_vert:Xte,meshbasic_frag:$te,meshlambert_vert:Zte,meshlambert_frag:Qte,meshmatcap_vert:Jte,meshmatcap_frag:ene,meshnormal_vert:tne,meshnormal_frag:nne,meshphong_vert:rne,meshphong_frag:ine,meshphysical_vert:sne,meshphysical_frag:one,meshtoon_vert:ane,meshtoon_frag:lne,points_vert:une,points_frag:cne,shadow_vert:fne,shadow_frag:hne,sprite_vert:dne,sprite_frag:pne},Jt={common:{diffuse:{value:new en(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jn}},envmap:{envMap:{value:null},envMapRotation:{value:new jn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jn},normalScale:{value:new Mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new en(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new en(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0},uvTransform:{value:new jn}},sprite:{diffuse:{value:new en(16777215)},opacity:{value:1},center:{value:new Mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}}},Wa={basic:{uniforms:Xs([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.fog]),vertexShader:Xn.meshbasic_vert,fragmentShader:Xn.meshbasic_frag},lambert:{uniforms:Xs([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new en(0)}}]),vertexShader:Xn.meshlambert_vert,fragmentShader:Xn.meshlambert_frag},phong:{uniforms:Xs([Jt.common,Jt.specularmap,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,Jt.lights,{emissive:{value:new en(0)},specular:{value:new en(1118481)},shininess:{value:30}}]),vertexShader:Xn.meshphong_vert,fragmentShader:Xn.meshphong_frag},standard:{uniforms:Xs([Jt.common,Jt.envmap,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.roughnessmap,Jt.metalnessmap,Jt.fog,Jt.lights,{emissive:{value:new en(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag},toon:{uniforms:Xs([Jt.common,Jt.aomap,Jt.lightmap,Jt.emissivemap,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.gradientmap,Jt.fog,Jt.lights,{emissive:{value:new en(0)}}]),vertexShader:Xn.meshtoon_vert,fragmentShader:Xn.meshtoon_frag},matcap:{uniforms:Xs([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,Jt.fog,{matcap:{value:null}}]),vertexShader:Xn.meshmatcap_vert,fragmentShader:Xn.meshmatcap_frag},points:{uniforms:Xs([Jt.points,Jt.fog]),vertexShader:Xn.points_vert,fragmentShader:Xn.points_frag},dashed:{uniforms:Xs([Jt.common,Jt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xn.linedashed_vert,fragmentShader:Xn.linedashed_frag},depth:{uniforms:Xs([Jt.common,Jt.displacementmap]),vertexShader:Xn.depth_vert,fragmentShader:Xn.depth_frag},normal:{uniforms:Xs([Jt.common,Jt.bumpmap,Jt.normalmap,Jt.displacementmap,{opacity:{value:1}}]),vertexShader:Xn.meshnormal_vert,fragmentShader:Xn.meshnormal_frag},sprite:{uniforms:Xs([Jt.sprite,Jt.fog]),vertexShader:Xn.sprite_vert,fragmentShader:Xn.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xn.background_vert,fragmentShader:Xn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jn}},vertexShader:Xn.backgroundCube_vert,fragmentShader:Xn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xn.cube_vert,fragmentShader:Xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xn.equirect_vert,fragmentShader:Xn.equirect_frag},distanceRGBA:{uniforms:Xs([Jt.common,Jt.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xn.distanceRGBA_vert,fragmentShader:Xn.distanceRGBA_frag},shadow:{uniforms:Xs([Jt.lights,Jt.fog,{color:{value:new en(0)},opacity:{value:1}}]),vertexShader:Xn.shadow_vert,fragmentShader:Xn.shadow_frag}};Wa.physical={uniforms:Xs([Wa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jn},clearcoatNormalScale:{value:new Mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jn},sheen:{value:0},sheenColor:{value:new en(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jn},transmissionSamplerSize:{value:new Mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jn},attenuationDistance:{value:0},attenuationColor:{value:new en(0)},specularColor:{value:new en(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jn},anisotropyVector:{value:new Mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jn}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag};const Rw={r:0,b:0,g:0},lh=new Go,mne=new Ln;function gne(r,e,t,n,i,s,o){const l=new en(0);let c=s===!0?0:1,d,h,y=null,_=0,x=null;function A(D){let k=D.isScene===!0?D.background:null;return k&&k.isTexture&&(k=(D.backgroundBlurriness>0?t:e).get(k)),k}function P(D){let k=!1;const F=A(D);F===null?C(l,c):F&&F.isColor&&(C(F,1),k=!0);const Q=r.xr.getEnvironmentBlendMode();Q==="additive"?n.buffers.color.setClear(0,0,0,1,o):Q==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(r.autoClear||k)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function I(D,k){const F=A(k);F&&(F.isCubeTexture||F.mapping===B0)?(h===void 0&&(h=new Pi(new pd(1,1,1),new jo({name:"BackgroundCubeMaterial",uniforms:b0(Wa.backgroundCube.uniforms),vertexShader:Wa.backgroundCube.vertexShader,fragmentShader:Wa.backgroundCube.fragmentShader,side:Ls,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(Q,G,Y){this.matrixWorld.copyPosition(Y.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),lh.copy(k.backgroundRotation),lh.x*=-1,lh.y*=-1,lh.z*=-1,F.isCubeTexture&&F.isRenderTargetTexture===!1&&(lh.y*=-1,lh.z*=-1),h.material.uniforms.envMap.value=F,h.material.uniforms.flipEnvMap.value=F.isCubeTexture&&F.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(mne.makeRotationFromEuler(lh)),h.material.toneMapped=yr.getTransfer(F.colorSpace)!==Fr,(y!==F||_!==F.version||x!==r.toneMapping)&&(h.material.needsUpdate=!0,y=F,_=F.version,x=r.toneMapping),h.layers.enableAll(),D.unshift(h,h.geometry,h.material,0,0,null)):F&&F.isTexture&&(d===void 0&&(d=new Pi(new F0(2,2),new jo({name:"BackgroundMaterial",uniforms:b0(Wa.background.uniforms),vertexShader:Wa.background.vertexShader,fragmentShader:Wa.background.fragmentShader,side:Ku,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(d)),d.material.uniforms.t2D.value=F,d.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,d.material.toneMapped=yr.getTransfer(F.colorSpace)!==Fr,F.matrixAutoUpdate===!0&&F.updateMatrix(),d.material.uniforms.uvTransform.value.copy(F.matrix),(y!==F||_!==F.version||x!==r.toneMapping)&&(d.material.needsUpdate=!0,y=F,_=F.version,x=r.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null))}function C(D,k){D.getRGB(Rw,t5(r)),n.buffers.color.setClear(Rw.r,Rw.g,Rw.b,k,o)}return{getClearColor:function(){return l},setClearColor:function(D,k=1){l.set(D),c=k,C(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(D){c=D,C(l,c)},render:P,addToRenderList:I}}function yne(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=_(null);let s=i,o=!1;function l(U,V,K,E,a){let p=!1;const M=y(E,K,V);s!==M&&(s=M,d(s.object)),p=x(U,E,K,a),p&&A(U,E,K,a),a!==null&&e.update(a,r.ELEMENT_ARRAY_BUFFER),(p||o)&&(o=!1,F(U,V,K,E),a!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(a).buffer))}function c(){return r.createVertexArray()}function d(U){return r.bindVertexArray(U)}function h(U){return r.deleteVertexArray(U)}function y(U,V,K){const E=K.wireframe===!0;let a=n[U.id];a===void 0&&(a={},n[U.id]=a);let p=a[V.id];p===void 0&&(p={},a[V.id]=p);let M=p[E];return M===void 0&&(M=_(c()),p[E]=M),M}function _(U){const V=[],K=[],E=[];for(let a=0;a<t;a++)V[a]=0,K[a]=0,E[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:V,enabledAttributes:K,attributeDivisors:E,object:U,attributes:{},index:null}}function x(U,V,K,E){const a=s.attributes,p=V.attributes;let M=0;const R=K.getAttributes();for(const T in R)if(R[T].location>=0){const N=a[T];let v=p[T];if(v===void 0&&(T==="instanceMatrix"&&U.instanceMatrix&&(v=U.instanceMatrix),T==="instanceColor"&&U.instanceColor&&(v=U.instanceColor)),N===void 0||N.attribute!==v||v&&N.data!==v.data)return!0;M++}return s.attributesNum!==M||s.index!==E}function A(U,V,K,E){const a={},p=V.attributes;let M=0;const R=K.getAttributes();for(const T in R)if(R[T].location>=0){let N=p[T];N===void 0&&(T==="instanceMatrix"&&U.instanceMatrix&&(N=U.instanceMatrix),T==="instanceColor"&&U.instanceColor&&(N=U.instanceColor));const v={};v.attribute=N,N&&N.data&&(v.data=N.data),a[T]=v,M++}s.attributes=a,s.attributesNum=M,s.index=E}function P(){const U=s.newAttributes;for(let V=0,K=U.length;V<K;V++)U[V]=0}function I(U){C(U,0)}function C(U,V){const K=s.newAttributes,E=s.enabledAttributes,a=s.attributeDivisors;K[U]=1,E[U]===0&&(r.enableVertexAttribArray(U),E[U]=1),a[U]!==V&&(r.vertexAttribDivisor(U,V),a[U]=V)}function D(){const U=s.newAttributes,V=s.enabledAttributes;for(let K=0,E=V.length;K<E;K++)V[K]!==U[K]&&(r.disableVertexAttribArray(K),V[K]=0)}function k(U,V,K,E,a,p,M){M===!0?r.vertexAttribIPointer(U,V,K,a,p):r.vertexAttribPointer(U,V,K,E,a,p)}function F(U,V,K,E){P();const a=E.attributes,p=K.getAttributes(),M=V.defaultAttributeValues;for(const R in p){const T=p[R];if(T.location>=0){let L=a[R];if(L===void 0&&(R==="instanceMatrix"&&U.instanceMatrix&&(L=U.instanceMatrix),R==="instanceColor"&&U.instanceColor&&(L=U.instanceColor)),L!==void 0){const N=L.normalized,v=L.itemSize,u=e.get(L);if(u===void 0)continue;const S=u.buffer,W=u.type,$=u.bytesPerElement,se=W===r.INT||W===r.UNSIGNED_INT||L.gpuType===bx;if(L.isInterleavedBufferAttribute){const me=L.data,_e=me.stride,Ae=L.offset;if(me.isInstancedInterleavedBuffer){for(let _t=0;_t<T.locationSize;_t++)C(T.location+_t,me.meshPerAttribute);U.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let _t=0;_t<T.locationSize;_t++)I(T.location+_t);r.bindBuffer(r.ARRAY_BUFFER,S);for(let _t=0;_t<T.locationSize;_t++)k(T.location+_t,v/T.locationSize,W,N,_e*$,(Ae+v/T.locationSize*_t)*$,se)}else{if(L.isInstancedBufferAttribute){for(let me=0;me<T.locationSize;me++)C(T.location+me,L.meshPerAttribute);U.isInstancedMesh!==!0&&E._maxInstanceCount===void 0&&(E._maxInstanceCount=L.meshPerAttribute*L.count)}else for(let me=0;me<T.locationSize;me++)I(T.location+me);r.bindBuffer(r.ARRAY_BUFFER,S);for(let me=0;me<T.locationSize;me++)k(T.location+me,v/T.locationSize,W,N,v*$,v/T.locationSize*me*$,se)}}else if(M!==void 0){const N=M[R];if(N!==void 0)switch(N.length){case 2:r.vertexAttrib2fv(T.location,N);break;case 3:r.vertexAttrib3fv(T.location,N);break;case 4:r.vertexAttrib4fv(T.location,N);break;default:r.vertexAttrib1fv(T.location,N)}}}}D()}function Q(){ee();for(const U in n){const V=n[U];for(const K in V){const E=V[K];for(const a in E)h(E[a].object),delete E[a];delete V[K]}delete n[U]}}function G(U){if(n[U.id]===void 0)return;const V=n[U.id];for(const K in V){const E=V[K];for(const a in E)h(E[a].object),delete E[a];delete V[K]}delete n[U.id]}function Y(U){for(const V in n){const K=n[V];if(K[U.id]===void 0)continue;const E=K[U.id];for(const a in E)h(E[a].object),delete E[a];delete K[U.id]}}function ee(){te(),o=!0,s!==i&&(s=i,d(s.object))}function te(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:l,reset:ee,resetDefaultState:te,dispose:Q,releaseStatesOfGeometry:G,releaseStatesOfProgram:Y,initAttributes:P,enableAttribute:I,disableUnusedAttributes:D}}function vne(r,e,t){let n;function i(d){n=d}function s(d,h){r.drawArrays(n,d,h),t.update(h,n,1)}function o(d,h,y){y!==0&&(r.drawArraysInstanced(n,d,h,y),t.update(h,n,y))}function l(d,h,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,h,0,y);let x=0;for(let A=0;A<y;A++)x+=h[A];t.update(x,n,1)}function c(d,h,y,_){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let A=0;A<d.length;A++)o(d[A],h[A],_[A]);else{x.multiDrawArraysInstancedWEBGL(n,d,0,h,0,_,0,y);let A=0;for(let P=0;P<y;P++)A+=h[P];for(let P=0;P<_.length;P++)t.update(A,n,_[P])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function wne(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const Y=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(Y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(Y){return!(Y!==Ps&&n.convert(Y)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(Y){const ee=Y===U0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(Y!==Ka&&n.convert(Y)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&Y!==_o&&!ee)}function c(Y){if(Y==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";Y="mediump"}return Y==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=t.precision!==void 0?t.precision:"highp";const h=c(d);h!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",h,"instead."),d=h);const y=t.logarithmicDepthBuffer===!0,_=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(_===!0){const Y=e.get("EXT_clip_control");Y.clipControlEXT(Y.LOWER_LEFT_EXT,Y.ZERO_TO_ONE_EXT)}const x=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),A=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),P=r.getParameter(r.MAX_TEXTURE_SIZE),I=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),C=r.getParameter(r.MAX_VERTEX_ATTRIBS),D=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),k=r.getParameter(r.MAX_VARYING_VECTORS),F=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),Q=A>0,G=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:d,logarithmicDepthBuffer:y,reverseDepthBuffer:_,maxTextures:x,maxVertexTextures:A,maxTextureSize:P,maxCubemapSize:I,maxAttributes:C,maxVertexUniforms:D,maxVaryings:k,maxFragmentUniforms:F,vertexTextures:Q,maxSamples:G}}function _ne(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new Ru,l=new jn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(y,_){const x=y.length!==0||_||n!==0||i;return i=_,n=y.length,x},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(y,_){t=h(y,_,0)},this.setState=function(y,_,x){const A=y.clippingPlanes,P=y.clipIntersection,I=y.clipShadows,C=r.get(y);if(!i||A===null||A.length===0||s&&!I)s?h(null):d();else{const D=s?0:n,k=D*4;let F=C.clippingState||null;c.value=F,F=h(A,_,k,x);for(let Q=0;Q!==k;++Q)F[Q]=t[Q];C.clippingState=F,this.numIntersection=P?this.numPlanes:0,this.numPlanes+=D}};function d(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(y,_,x,A){const P=y!==null?y.length:0;let I=null;if(P!==0){if(I=c.value,A!==!0||I===null){const C=x+P*4,D=_.matrixWorldInverse;l.getNormalMatrix(D),(I===null||I.length<C)&&(I=new Float32Array(C));for(let k=0,F=x;k!==P;++k,F+=4)o.copy(y[k]).applyMatrix4(D,l),o.normal.toArray(I,F),I[F+3]=o.constant}c.value=I,c.needsUpdate=!0}return e.numPlanes=P,e.numIntersection=0,I}}function xne(r){let e=new WeakMap;function t(o,l){return l===ey?o.mapping=Yu:l===ty&&(o.mapping=sf),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===ey||l===ty)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const d=new i5(c.height);return d.fromEquirectangularTexture(r,o),e.set(o,d),o.addEventListener("dispose",i),t(d.texture,o.mapping)}else return null}}return o}function i(o){const l=o.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Jc extends Wy{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,o=s+d*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const n0=4,CP=[.125,.215,.35,.446,.526,.582],bh=20,UE=new Jc,IP=new en;let FE=null,zE=0,WE=0,VE=!1;const Sh=(1+Math.sqrt(5))/2,Lp=1/Sh,NP=[new ve(-Sh,Lp,0),new ve(Sh,Lp,0),new ve(-Lp,0,Sh),new ve(Lp,0,Sh),new ve(0,Sh,-Lp),new ve(0,Sh,Lp),new ve(-1,1,-1),new ve(1,1,-1),new ve(-1,1,1),new ve(1,1,1)];class RA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){FE=this._renderer.getRenderTarget(),zE=this._renderer.getActiveCubeFace(),WE=this._renderer.getActiveMipmapLevel(),VE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=kP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=LP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(FE,zE,WE),this._renderer.xr.enabled=VE,e.scissorTest=!1,Cw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yu||e.mapping===sf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),FE=this._renderer.getRenderTarget(),zE=this._renderer.getActiveCubeFace(),WE=this._renderer.getActiveMipmapLevel(),VE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ii,minFilter:Ii,generateMipmaps:!1,type:U0,format:Ps,colorSpace:Qu,depthBuffer:!1},i=PP(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=PP(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Sne(s)),this._blurMaterial=Mne(s,e,t)}return i}_compileMaterial(e){const t=new Pi(this._lodPlanes[0],e);this._renderer.compile(t,UE)}_sceneToCubeUV(e,t,n,i){const l=new gi(90,1,t,n),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,y=h.autoClear,_=h.toneMapping;h.getClearColor(IP),h.toneMapping=Cl,h.autoClear=!1;const x=new cf({name:"PMREM.Background",side:Ls,depthWrite:!1,depthTest:!1}),A=new Pi(new pd,x);let P=!1;const I=e.background;I?I.isColor&&(x.color.copy(I),e.background=null,P=!0):(x.color.copy(IP),P=!0);for(let C=0;C<6;C++){const D=C%3;D===0?(l.up.set(0,c[C],0),l.lookAt(d[C],0,0)):D===1?(l.up.set(0,0,c[C]),l.lookAt(0,d[C],0)):(l.up.set(0,c[C],0),l.lookAt(0,0,d[C]));const k=this._cubeSize;Cw(i,D*k,C>2?k:0,k,k),h.setRenderTarget(i),P&&h.render(A,l),h.render(e,l)}A.geometry.dispose(),A.material.dispose(),h.toneMapping=_,h.autoClear=y,e.background=I}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Yu||e.mapping===sf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=kP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=LP());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Pi(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;Cw(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,UE)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=NP[(i-s-1)%NP.length];this._blur(e,s-1,s,o,l)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,l){const c=this._renderer,d=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,y=new Pi(this._lodPlanes[i],d),_=d.uniforms,x=this._sizeLods[n]-1,A=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*bh-1),P=s/A,I=isFinite(s)?1+Math.floor(h*P):bh;I>bh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${I} samples when the maximum is set to ${bh}`);const C=[];let D=0;for(let Y=0;Y<bh;++Y){const ee=Y/P,te=Math.exp(-ee*ee/2);C.push(te),Y===0?D+=te:Y<I&&(D+=2*te)}for(let Y=0;Y<C.length;Y++)C[Y]=C[Y]/D;_.envMap.value=e.texture,_.samples.value=I,_.weights.value=C,_.latitudinal.value=o==="latitudinal",l&&(_.poleAxis.value=l);const{_lodMax:k}=this;_.dTheta.value=A,_.mipInt.value=k-n;const F=this._sizeLods[i],Q=3*F*(i>k-n0?i-k+n0:0),G=4*(this._cubeSize-F);Cw(t,Q,G,3*F,2*F),c.setRenderTarget(t),c.render(y,UE)}}function Sne(r){const e=[],t=[],n=[];let i=r;const s=r-n0+1+CP.length;for(let o=0;o<s;o++){const l=Math.pow(2,i);t.push(l);let c=1/l;o>r-n0?c=CP[o-r+n0-1]:o===0&&(c=0),n.push(c);const d=1/(l-2),h=-d,y=1+d,_=[h,h,y,h,y,y,h,h,y,y,h,y],x=6,A=6,P=3,I=2,C=1,D=new Float32Array(P*A*x),k=new Float32Array(I*A*x),F=new Float32Array(C*A*x);for(let G=0;G<x;G++){const Y=G%3*2/3-1,ee=G>2?0:-1,te=[Y,ee,0,Y+2/3,ee,0,Y+2/3,ee+1,0,Y,ee,0,Y+2/3,ee+1,0,Y,ee+1,0];D.set(te,P*A*G),k.set(_,I*A*G);const U=[G,G,G,G,G,G];F.set(U,C*A*G)}const Q=new Jn;Q.setAttribute("position",new Nr(D,P)),Q.setAttribute("uv",new Nr(k,I)),Q.setAttribute("faceIndex",new Nr(F,C)),e.push(Q),i>n0&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function PP(r,e,t){const n=new Ya(r,e,t);return n.texture.mapping=B0,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Cw(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function Mne(r,e,t){const n=new Float32Array(bh),i=new ve(0,1,0);return new jo({name:"SphericalGaussianBlur",defines:{n:bh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:AR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function LP(){return new jo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function kP(){return new jo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AR(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vu,depthTest:!1,depthWrite:!1})}function AR(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ene(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const c=l.mapping,d=c===ey||c===ty,h=c===Yu||c===sf;if(d||h){let y=e.get(l);const _=y!==void 0?y.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==_)return t===null&&(t=new RA(r)),y=d?t.fromEquirectangular(l,y):t.fromCubemap(l,y),y.texture.pmremVersion=l.pmremVersion,e.set(l,y),y.texture;if(y!==void 0)return y.texture;{const x=l.image;return d&&x&&x.height>0||h&&x&&i(x)?(t===null&&(t=new RA(r)),y=d?t.fromEquirectangular(l):t.fromCubemap(l),y.texture.pmremVersion=l.pmremVersion,e.set(l,y),l.addEventListener("dispose",s),y.texture):null}}}return l}function i(l){let c=0;const d=6;for(let h=0;h<d;h++)l[h]!==void 0&&c++;return c===d}function s(l){const c=l.target;c.removeEventListener("dispose",s);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function bne(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&b_("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function Ane(r,e,t,n){const i={},s=new WeakMap;function o(y){const _=y.target;_.index!==null&&e.remove(_.index);for(const A in _.attributes)e.remove(_.attributes[A]);for(const A in _.morphAttributes){const P=_.morphAttributes[A];for(let I=0,C=P.length;I<C;I++)e.remove(P[I])}_.removeEventListener("dispose",o),delete i[_.id];const x=s.get(_);x&&(e.remove(x),s.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function l(y,_){return i[_.id]===!0||(_.addEventListener("dispose",o),i[_.id]=!0,t.memory.geometries++),_}function c(y){const _=y.attributes;for(const A in _)e.update(_[A],r.ARRAY_BUFFER);const x=y.morphAttributes;for(const A in x){const P=x[A];for(let I=0,C=P.length;I<C;I++)e.update(P[I],r.ARRAY_BUFFER)}}function d(y){const _=[],x=y.index,A=y.attributes.position;let P=0;if(x!==null){const D=x.array;P=x.version;for(let k=0,F=D.length;k<F;k+=3){const Q=D[k+0],G=D[k+1],Y=D[k+2];_.push(Q,G,G,Y,Y,Q)}}else if(A!==void 0){const D=A.array;P=A.version;for(let k=0,F=D.length/3-1;k<F;k+=3){const Q=k+0,G=k+1,Y=k+2;_.push(Q,G,G,Y,Y,Q)}}else return;const I=new($6(_)?bR:ER)(_,1);I.version=P;const C=s.get(y);C&&e.remove(C),s.set(y,I)}function h(y){const _=s.get(y);if(_){const x=y.index;x!==null&&_.version<x.version&&d(y)}else d(y);return s.get(y)}return{get:l,update:c,getWireframeAttribute:h}}function Tne(r,e,t){let n;function i(_){n=_}let s,o;function l(_){s=_.type,o=_.bytesPerElement}function c(_,x){r.drawElements(n,x,s,_*o),t.update(x,n,1)}function d(_,x,A){A!==0&&(r.drawElementsInstanced(n,x,s,_*o,A),t.update(x,n,A))}function h(_,x,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,x,0,s,_,0,A);let I=0;for(let C=0;C<A;C++)I+=x[C];t.update(I,n,1)}function y(_,x,A,P){if(A===0)return;const I=e.get("WEBGL_multi_draw");if(I===null)for(let C=0;C<_.length;C++)d(_[C]/o,x[C],P[C]);else{I.multiDrawElementsInstancedWEBGL(n,x,0,s,_,0,P,0,A);let C=0;for(let D=0;D<A;D++)C+=x[D];for(let D=0;D<P.length;D++)t.update(C,n,P[D])}}this.setMode=i,this.setIndex=l,this.render=c,this.renderInstances=d,this.renderMultiDraw=h,this.renderMultiDrawInstances=y}function Rne(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=l*(s/3);break;case r.LINES:t.lines+=l*(s/2);break;case r.LINE_STRIP:t.lines+=l*(s-1);break;case r.LINE_LOOP:t.lines+=l*s;break;case r.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function Cne(r,e,t){const n=new WeakMap,i=new fr;function s(o,l,c){const d=o.morphTargetInfluences,h=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,y=h!==void 0?h.length:0;let _=n.get(l);if(_===void 0||_.count!==y){let te=function(){Y.dispose(),n.delete(l),l.removeEventListener("dispose",te)};_!==void 0&&_.texture.dispose();const x=l.morphAttributes.position!==void 0,A=l.morphAttributes.normal!==void 0,P=l.morphAttributes.color!==void 0,I=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let k=0;x===!0&&(k=1),A===!0&&(k=2),P===!0&&(k=3);let F=l.attributes.position.count*k,Q=1;F>e.maxTextureSize&&(Q=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const G=new Float32Array(F*Q*4*y),Y=new Lx(G,F,Q,y);Y.type=_o,Y.needsUpdate=!0;const ee=k*4;for(let U=0;U<y;U++){const V=I[U],K=C[U],E=D[U],a=F*Q*4*U;for(let p=0;p<V.count;p++){const M=p*ee;x===!0&&(i.fromBufferAttribute(V,p),G[a+M+0]=i.x,G[a+M+1]=i.y,G[a+M+2]=i.z,G[a+M+3]=0),A===!0&&(i.fromBufferAttribute(K,p),G[a+M+4]=i.x,G[a+M+5]=i.y,G[a+M+6]=i.z,G[a+M+7]=0),P===!0&&(i.fromBufferAttribute(E,p),G[a+M+8]=i.x,G[a+M+9]=i.y,G[a+M+10]=i.z,G[a+M+11]=E.itemSize===4?i.w:1)}}_={count:y,texture:Y,size:new Mt(F,Q)},n.set(l,_),l.addEventListener("dispose",te)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(r,"morphTexture",o.morphTexture,t);else{let x=0;for(let P=0;P<d.length;P++)x+=d[P];const A=l.morphTargetsRelative?1:1-x;c.getUniforms().setValue(r,"morphTargetBaseInfluence",A),c.getUniforms().setValue(r,"morphTargetInfluences",d)}c.getUniforms().setValue(r,"morphTargetsTexture",_.texture,t),c.getUniforms().setValue(r,"morphTargetsTextureSize",_.size)}return{update:s}}function Ine(r,e,t,n){let i=new WeakMap;function s(c){const d=n.render.frame,h=c.geometry,y=e.get(c,h);if(i.get(y)!==d&&(e.update(y),i.set(y,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),i.get(c)!==d&&(t.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,r.ARRAY_BUFFER),i.set(c,d))),c.isSkinnedMesh){const _=c.skeleton;i.get(_)!==d&&(_.update(),i.set(_,d))}return y}function o(){i=new WeakMap}function l(c){const d=c.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:s,dispose:o}}class TR extends ui{constructor(e,t,n,i,s,o,l,c,d,h=qh){if(h!==qh&&h!==nd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===qh&&(n=Xu),n===void 0&&h===nd&&(n=td),super(null,i,s,o,l,c,h,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:es,this.minFilter=c!==void 0?c:es,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const o5=new ui,OP=new TR(1,1),a5=new Lx,l5=new MR,u5=new Vy,DP=[],BP=[],UP=new Float32Array(16),FP=new Float32Array(9),zP=new Float32Array(4);function z0(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=DP[i];if(s===void 0&&(s=new Float32Array(i),DP[i]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,r[o].toArray(s,l)}return s}function Wi(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Vi(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function kx(r,e){let t=BP[e];t===void 0&&(t=new Int32Array(e),BP[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function Nne(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function Pne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wi(t,e))return;r.uniform2fv(this.addr,e),Vi(t,e)}}function Lne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Wi(t,e))return;r.uniform3fv(this.addr,e),Vi(t,e)}}function kne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wi(t,e))return;r.uniform4fv(this.addr,e),Vi(t,e)}}function One(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Wi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Vi(t,e)}else{if(Wi(t,n))return;zP.set(n),r.uniformMatrix2fv(this.addr,!1,zP),Vi(t,n)}}function Dne(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Wi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Vi(t,e)}else{if(Wi(t,n))return;FP.set(n),r.uniformMatrix3fv(this.addr,!1,FP),Vi(t,n)}}function Bne(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Wi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Vi(t,e)}else{if(Wi(t,n))return;UP.set(n),r.uniformMatrix4fv(this.addr,!1,UP),Vi(t,n)}}function Une(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function Fne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wi(t,e))return;r.uniform2iv(this.addr,e),Vi(t,e)}}function zne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wi(t,e))return;r.uniform3iv(this.addr,e),Vi(t,e)}}function Wne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wi(t,e))return;r.uniform4iv(this.addr,e),Vi(t,e)}}function Vne(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function Hne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wi(t,e))return;r.uniform2uiv(this.addr,e),Vi(t,e)}}function Gne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wi(t,e))return;r.uniform3uiv(this.addr,e),Vi(t,e)}}function jne(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wi(t,e))return;r.uniform4uiv(this.addr,e),Vi(t,e)}}function qne(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?(OP.compareFunction=_R,s=OP):s=o5,t.setTexture2D(e||s,i)}function Kne(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||l5,i)}function Yne(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||u5,i)}function Xne(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||a5,i)}function $ne(r){switch(r){case 5126:return Nne;case 35664:return Pne;case 35665:return Lne;case 35666:return kne;case 35674:return One;case 35675:return Dne;case 35676:return Bne;case 5124:case 35670:return Une;case 35667:case 35671:return Fne;case 35668:case 35672:return zne;case 35669:case 35673:return Wne;case 5125:return Vne;case 36294:return Hne;case 36295:return Gne;case 36296:return jne;case 35678:case 36198:case 36298:case 36306:case 35682:return qne;case 35679:case 36299:case 36307:return Kne;case 35680:case 36300:case 36308:case 36293:return Yne;case 36289:case 36303:case 36311:case 36292:return Xne}}function Zne(r,e){r.uniform1fv(this.addr,e)}function Qne(r,e){const t=z0(e,this.size,2);r.uniform2fv(this.addr,t)}function Jne(r,e){const t=z0(e,this.size,3);r.uniform3fv(this.addr,t)}function ere(r,e){const t=z0(e,this.size,4);r.uniform4fv(this.addr,t)}function tre(r,e){const t=z0(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function nre(r,e){const t=z0(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function rre(r,e){const t=z0(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function ire(r,e){r.uniform1iv(this.addr,e)}function sre(r,e){r.uniform2iv(this.addr,e)}function ore(r,e){r.uniform3iv(this.addr,e)}function are(r,e){r.uniform4iv(this.addr,e)}function lre(r,e){r.uniform1uiv(this.addr,e)}function ure(r,e){r.uniform2uiv(this.addr,e)}function cre(r,e){r.uniform3uiv(this.addr,e)}function fre(r,e){r.uniform4uiv(this.addr,e)}function hre(r,e,t){const n=this.cache,i=e.length,s=kx(t,i);Wi(n,s)||(r.uniform1iv(this.addr,s),Vi(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||o5,s[o])}function dre(r,e,t){const n=this.cache,i=e.length,s=kx(t,i);Wi(n,s)||(r.uniform1iv(this.addr,s),Vi(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||l5,s[o])}function pre(r,e,t){const n=this.cache,i=e.length,s=kx(t,i);Wi(n,s)||(r.uniform1iv(this.addr,s),Vi(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||u5,s[o])}function mre(r,e,t){const n=this.cache,i=e.length,s=kx(t,i);Wi(n,s)||(r.uniform1iv(this.addr,s),Vi(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||a5,s[o])}function gre(r){switch(r){case 5126:return Zne;case 35664:return Qne;case 35665:return Jne;case 35666:return ere;case 35674:return tre;case 35675:return nre;case 35676:return rre;case 5124:case 35670:return ire;case 35667:case 35671:return sre;case 35668:case 35672:return ore;case 35669:case 35673:return are;case 5125:return lre;case 36294:return ure;case 36295:return cre;case 36296:return fre;case 35678:case 36198:case 36298:case 36306:case 35682:return hre;case 35679:case 36299:case 36307:return dre;case 35680:case 36300:case 36308:case 36293:return pre;case 36289:case 36303:case 36311:case 36292:return mre}}class yre{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=$ne(t.type)}}class vre{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=gre(t.type)}}class wre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const l=i[s];l.setValue(e,t[l.id],n)}}}const HE=/(\w+)(\])?(\[|\.)?/g;function WP(r,e){r.seq.push(e),r.map[e.id]=e}function _re(r,e,t){const n=r.name,i=n.length;for(HE.lastIndex=0;;){const s=HE.exec(n),o=HE.lastIndex;let l=s[1];const c=s[2]==="]",d=s[3];if(c&&(l=l|0),d===void 0||d==="["&&o+2===i){WP(t,d===void 0?new yre(l,r,e):new vre(l,r,e));break}else{let y=t.map[l];y===void 0&&(y=new wre(l),WP(t,y)),t=y}}}class A_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);_re(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function VP(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const xre=37297;let Sre=0;function Mre(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}function Ere(r){const e=yr.getPrimaries(yr.workingColorSpace),t=yr.getPrimaries(r);let n;switch(e===t?n="":e===ly&&t===ay?n="LinearDisplayP3ToLinearSRGB":e===ay&&t===ly&&(n="LinearSRGBToLinearDisplayP3"),r){case Qu:case zy:return[n,"LinearTransferOETF"];case aa:case Px:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function HP(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Mre(r.getShaderSource(e),o)}else return i}function bre(r,e){const t=Ere(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Are(r,e){let t;switch(e){case I6:t="Linear";break;case N6:t="Reinhard";break;case P6:t="Cineon";break;case lR:t="ACESFilmic";break;case k6:t="AgX";break;case O6:t="Neutral";break;case L6:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Iw=new ve;function Tre(){yr.getLuminanceCoefficients(Iw);const r=Iw.x.toFixed(4),e=Iw.y.toFixed(4),t=Iw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Rre(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(yg).join(`
`)}function Cre(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function Ire(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let l=1;s.type===r.FLOAT_MAT2&&(l=2),s.type===r.FLOAT_MAT3&&(l=3),s.type===r.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:l}}return t}function yg(r){return r!==""}function GP(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jP(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Nre=/^[ \t]*#include +<([\w\d./]+)>/gm;function CA(r){return r.replace(Nre,Lre)}const Pre=new Map;function Lre(r,e){let t=Xn[e];if(t===void 0){const n=Pre.get(e);if(n!==void 0)t=Xn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return CA(t)}const kre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qP(r){return r.replace(kre,Ore)}function Ore(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function KP(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Dre(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Mx?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Rg?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===za&&(e="SHADOWMAP_TYPE_VSM"),e}function Bre(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Yu:case sf:e="ENVMAP_TYPE_CUBE";break;case B0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ure(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case sf:e="ENVMAP_MODE_REFRACTION";break}return e}function Fre(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Uy:e="ENVMAP_BLENDING_MULTIPLY";break;case R6:e="ENVMAP_BLENDING_MIX";break;case C6:e="ENVMAP_BLENDING_ADD";break}return e}function zre(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function Wre(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=Dre(t),d=Bre(t),h=Ure(t),y=Fre(t),_=zre(t),x=Rre(t),A=Cre(s),P=i.createProgram();let I,C,D=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(I=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(yg).join(`
`),I.length>0&&(I+=`
`),C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A].filter(yg).join(`
`),C.length>0&&(C+=`
`)):(I=[KP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(yg).join(`
`),C=[KP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,A,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+h:"",t.envMap?"#define "+y:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Cl?"#define TONE_MAPPING":"",t.toneMapping!==Cl?Xn.tonemapping_pars_fragment:"",t.toneMapping!==Cl?Are("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xn.colorspace_pars_fragment,bre("linearToOutputTexel",t.outputColorSpace),Tre(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(yg).join(`
`)),o=CA(o),o=GP(o,t),o=jP(o,t),l=CA(l),l=GP(l,t),l=jP(l,t),o=qP(o),l=qP(l),t.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,I=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+I,C=["#define varying in",t.glslVersion===TA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===TA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const k=D+I+o,F=D+C+l,Q=VP(i,i.VERTEX_SHADER,k),G=VP(i,i.FRAGMENT_SHADER,F);i.attachShader(P,Q),i.attachShader(P,G),t.index0AttributeName!==void 0?i.bindAttribLocation(P,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(P,0,"position"),i.linkProgram(P);function Y(V){if(r.debug.checkShaderErrors){const K=i.getProgramInfoLog(P).trim(),E=i.getShaderInfoLog(Q).trim(),a=i.getShaderInfoLog(G).trim();let p=!0,M=!0;if(i.getProgramParameter(P,i.LINK_STATUS)===!1)if(p=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,P,Q,G);else{const R=HP(i,Q,"vertex"),T=HP(i,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(P,i.VALIDATE_STATUS)+`

Material Name: `+V.name+`
Material Type: `+V.type+`

Program Info Log: `+K+`
`+R+`
`+T)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(E===""||a==="")&&(M=!1);M&&(V.diagnostics={runnable:p,programLog:K,vertexShader:{log:E,prefix:I},fragmentShader:{log:a,prefix:C}})}i.deleteShader(Q),i.deleteShader(G),ee=new A_(i,P),te=Ire(i,P)}let ee;this.getUniforms=function(){return ee===void 0&&Y(this),ee};let te;this.getAttributes=function(){return te===void 0&&Y(this),te};let U=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return U===!1&&(U=i.getProgramParameter(P,xre)),U},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(P),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Sre++,this.cacheKey=e,this.usedTimes=1,this.program=P,this.vertexShader=Q,this.fragmentShader=G,this}let Vre=0;class Hre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Gre(e),t.set(e,n)),n}}class Gre{constructor(e){this.id=Vre++,this.code=e,this.usedTimes=0}}function jre(r,e,t,n,i,s,o){const l=new Yh,c=new Hre,d=new Set,h=[],y=i.logarithmicDepthBuffer,_=i.reverseDepthBuffer,x=i.vertexTextures;let A=i.precision;const P={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function I(U){return d.add(U),U===0?"uv":`uv${U}`}function C(U,V,K,E,a){const p=E.fog,M=a.geometry,R=U.isMeshStandardMaterial?E.environment:null,T=(U.isMeshStandardMaterial?t:e).get(U.envMap||R),L=T&&T.mapping===B0?T.image.height:null,N=P[U.type];U.precision!==null&&(A=i.getMaxPrecision(U.precision),A!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",A,"instead."));const v=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,u=v!==void 0?v.length:0;let S=0;M.morphAttributes.position!==void 0&&(S=1),M.morphAttributes.normal!==void 0&&(S=2),M.morphAttributes.color!==void 0&&(S=3);let W,$,se,me;if(N){const ae=Wa[N];W=ae.vertexShader,$=ae.fragmentShader}else W=U.vertexShader,$=U.fragmentShader,c.update(U),se=c.getVertexShaderID(U),me=c.getFragmentShaderID(U);const _e=r.getRenderTarget(),Ae=a.isInstancedMesh===!0,_t=a.isBatchedMesh===!0,Ze=!!U.map,Pe=!!U.matcap,ge=!!T,Ge=!!U.aoMap,je=!!U.lightMap,vt=!!U.bumpMap,He=!!U.normalMap,nt=!!U.displacementMap,Pt=!!U.emissiveMap,fe=!!U.metalnessMap,oe=!!U.roughnessMap,Oe=U.anisotropy>0,Re=U.clearcoat>0,Le=U.dispersion>0,ot=U.iridescence>0,et=U.sheen>0,Ye=U.transmission>0,bt=Oe&&!!U.anisotropyMap,ct=Re&&!!U.clearcoatMap,re=Re&&!!U.clearcoatNormalMap,j=Re&&!!U.clearcoatRoughnessMap,q=ot&&!!U.iridescenceMap,ue=ot&&!!U.iridescenceThicknessMap,we=et&&!!U.sheenColorMap,ye=et&&!!U.sheenRoughnessMap,le=!!U.specularMap,Xe=!!U.specularColorMap,de=!!U.specularIntensityMap,Ce=Ye&&!!U.transmissionMap,Ue=Ye&&!!U.thicknessMap,Ee=!!U.gradientMap,qe=!!U.alphaMap,Ct=U.alphaTest>0,ft=!!U.alphaHash,yt=!!U.extensions;let Sn=Cl;U.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(Sn=r.toneMapping);const dt={shaderID:N,shaderType:U.type,shaderName:U.name,vertexShader:W,fragmentShader:$,defines:U.defines,customVertexShaderID:se,customFragmentShaderID:me,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:A,batching:_t,batchingColor:_t&&a._colorsTexture!==null,instancing:Ae,instancingColor:Ae&&a.instanceColor!==null,instancingMorph:Ae&&a.morphTexture!==null,supportsVertexTextures:x,outputColorSpace:_e===null?r.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:Qu,alphaToCoverage:!!U.alphaToCoverage,map:Ze,matcap:Pe,envMap:ge,envMapMode:ge&&T.mapping,envMapCubeUVHeight:L,aoMap:Ge,lightMap:je,bumpMap:vt,normalMap:He,displacementMap:x&&nt,emissiveMap:Pt,normalMapObjectSpace:He&&U.normalMapType===V6,normalMapTangentSpace:He&&U.normalMapType===uf,metalnessMap:fe,roughnessMap:oe,anisotropy:Oe,anisotropyMap:bt,clearcoat:Re,clearcoatMap:ct,clearcoatNormalMap:re,clearcoatRoughnessMap:j,dispersion:Le,iridescence:ot,iridescenceMap:q,iridescenceThicknessMap:ue,sheen:et,sheenColorMap:we,sheenRoughnessMap:ye,specularMap:le,specularColorMap:Xe,specularIntensityMap:de,transmission:Ye,transmissionMap:Ce,thicknessMap:Ue,gradientMap:Ee,opaque:U.transparent===!1&&U.blending===jh&&U.alphaToCoverage===!1,alphaMap:qe,alphaTest:Ct,alphaHash:ft,combine:U.combine,mapUv:Ze&&I(U.map.channel),aoMapUv:Ge&&I(U.aoMap.channel),lightMapUv:je&&I(U.lightMap.channel),bumpMapUv:vt&&I(U.bumpMap.channel),normalMapUv:He&&I(U.normalMap.channel),displacementMapUv:nt&&I(U.displacementMap.channel),emissiveMapUv:Pt&&I(U.emissiveMap.channel),metalnessMapUv:fe&&I(U.metalnessMap.channel),roughnessMapUv:oe&&I(U.roughnessMap.channel),anisotropyMapUv:bt&&I(U.anisotropyMap.channel),clearcoatMapUv:ct&&I(U.clearcoatMap.channel),clearcoatNormalMapUv:re&&I(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:j&&I(U.clearcoatRoughnessMap.channel),iridescenceMapUv:q&&I(U.iridescenceMap.channel),iridescenceThicknessMapUv:ue&&I(U.iridescenceThicknessMap.channel),sheenColorMapUv:we&&I(U.sheenColorMap.channel),sheenRoughnessMapUv:ye&&I(U.sheenRoughnessMap.channel),specularMapUv:le&&I(U.specularMap.channel),specularColorMapUv:Xe&&I(U.specularColorMap.channel),specularIntensityMapUv:de&&I(U.specularIntensityMap.channel),transmissionMapUv:Ce&&I(U.transmissionMap.channel),thicknessMapUv:Ue&&I(U.thicknessMap.channel),alphaMapUv:qe&&I(U.alphaMap.channel),vertexTangents:!!M.attributes.tangent&&(He||Oe),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!M.attributes.color&&M.attributes.color.itemSize===4,pointsUvs:a.isPoints===!0&&!!M.attributes.uv&&(Ze||qe),fog:!!p,useFog:U.fog===!0,fogExp2:!!p&&p.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:y,reverseDepthBuffer:_,skinning:a.isSkinnedMesh===!0,morphTargets:M.morphAttributes.position!==void 0,morphNormals:M.morphAttributes.normal!==void 0,morphColors:M.morphAttributes.color!==void 0,morphTargetsCount:u,morphTextureStride:S,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:r.shadowMap.enabled&&K.length>0,shadowMapType:r.shadowMap.type,toneMapping:Sn,decodeVideoTexture:Ze&&U.map.isVideoTexture===!0&&yr.getTransfer(U.map.colorSpace)===Fr,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Va,flipSided:U.side===Ls,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:yt&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(yt&&U.extensions.multiDraw===!0||_t)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return dt.vertexUv1s=d.has(1),dt.vertexUv2s=d.has(2),dt.vertexUv3s=d.has(3),d.clear(),dt}function D(U){const V=[];if(U.shaderID?V.push(U.shaderID):(V.push(U.customVertexShaderID),V.push(U.customFragmentShaderID)),U.defines!==void 0)for(const K in U.defines)V.push(K),V.push(U.defines[K]);return U.isRawShaderMaterial===!1&&(k(V,U),F(V,U),V.push(r.outputColorSpace)),V.push(U.customProgramCacheKey),V.join()}function k(U,V){U.push(V.precision),U.push(V.outputColorSpace),U.push(V.envMapMode),U.push(V.envMapCubeUVHeight),U.push(V.mapUv),U.push(V.alphaMapUv),U.push(V.lightMapUv),U.push(V.aoMapUv),U.push(V.bumpMapUv),U.push(V.normalMapUv),U.push(V.displacementMapUv),U.push(V.emissiveMapUv),U.push(V.metalnessMapUv),U.push(V.roughnessMapUv),U.push(V.anisotropyMapUv),U.push(V.clearcoatMapUv),U.push(V.clearcoatNormalMapUv),U.push(V.clearcoatRoughnessMapUv),U.push(V.iridescenceMapUv),U.push(V.iridescenceThicknessMapUv),U.push(V.sheenColorMapUv),U.push(V.sheenRoughnessMapUv),U.push(V.specularMapUv),U.push(V.specularColorMapUv),U.push(V.specularIntensityMapUv),U.push(V.transmissionMapUv),U.push(V.thicknessMapUv),U.push(V.combine),U.push(V.fogExp2),U.push(V.sizeAttenuation),U.push(V.morphTargetsCount),U.push(V.morphAttributeCount),U.push(V.numDirLights),U.push(V.numPointLights),U.push(V.numSpotLights),U.push(V.numSpotLightMaps),U.push(V.numHemiLights),U.push(V.numRectAreaLights),U.push(V.numDirLightShadows),U.push(V.numPointLightShadows),U.push(V.numSpotLightShadows),U.push(V.numSpotLightShadowsWithMaps),U.push(V.numLightProbes),U.push(V.shadowMapType),U.push(V.toneMapping),U.push(V.numClippingPlanes),U.push(V.numClipIntersection),U.push(V.depthPacking)}function F(U,V){l.disableAll(),V.supportsVertexTextures&&l.enable(0),V.instancing&&l.enable(1),V.instancingColor&&l.enable(2),V.instancingMorph&&l.enable(3),V.matcap&&l.enable(4),V.envMap&&l.enable(5),V.normalMapObjectSpace&&l.enable(6),V.normalMapTangentSpace&&l.enable(7),V.clearcoat&&l.enable(8),V.iridescence&&l.enable(9),V.alphaTest&&l.enable(10),V.vertexColors&&l.enable(11),V.vertexAlphas&&l.enable(12),V.vertexUv1s&&l.enable(13),V.vertexUv2s&&l.enable(14),V.vertexUv3s&&l.enable(15),V.vertexTangents&&l.enable(16),V.anisotropy&&l.enable(17),V.alphaHash&&l.enable(18),V.batching&&l.enable(19),V.dispersion&&l.enable(20),V.batchingColor&&l.enable(21),U.push(l.mask),l.disableAll(),V.fog&&l.enable(0),V.useFog&&l.enable(1),V.flatShading&&l.enable(2),V.logarithmicDepthBuffer&&l.enable(3),V.reverseDepthBuffer&&l.enable(4),V.skinning&&l.enable(5),V.morphTargets&&l.enable(6),V.morphNormals&&l.enable(7),V.morphColors&&l.enable(8),V.premultipliedAlpha&&l.enable(9),V.shadowMapEnabled&&l.enable(10),V.doubleSided&&l.enable(11),V.flipSided&&l.enable(12),V.useDepthPacking&&l.enable(13),V.dithering&&l.enable(14),V.transmission&&l.enable(15),V.sheen&&l.enable(16),V.opaque&&l.enable(17),V.pointsUvs&&l.enable(18),V.decodeVideoTexture&&l.enable(19),V.alphaToCoverage&&l.enable(20),U.push(l.mask)}function Q(U){const V=P[U.type];let K;if(V){const E=Wa[V];K=n5.clone(E.uniforms)}else K=U.uniforms;return K}function G(U,V){let K;for(let E=0,a=h.length;E<a;E++){const p=h[E];if(p.cacheKey===V){K=p,++K.usedTimes;break}}return K===void 0&&(K=new Wre(r,V,U,s),h.push(K)),K}function Y(U){if(--U.usedTimes===0){const V=h.indexOf(U);h[V]=h[h.length-1],h.pop(),U.destroy()}}function ee(U){c.remove(U)}function te(){c.dispose()}return{getParameters:C,getProgramCacheKey:D,getUniforms:Q,acquireProgram:G,releaseProgram:Y,releaseShaderCache:ee,programs:h,dispose:te}}function qre(){let r=new WeakMap;function e(o){return r.has(o)}function t(o){let l=r.get(o);return l===void 0&&(l={},r.set(o,l)),l}function n(o){r.delete(o)}function i(o,l,c){r.get(o)[l]=c}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function Kre(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function YP(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function XP(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(y,_,x,A,P,I){let C=r[e];return C===void 0?(C={id:y.id,object:y,geometry:_,material:x,groupOrder:A,renderOrder:y.renderOrder,z:P,group:I},r[e]=C):(C.id=y.id,C.object=y,C.geometry=_,C.material=x,C.groupOrder=A,C.renderOrder=y.renderOrder,C.z=P,C.group=I),e++,C}function l(y,_,x,A,P,I){const C=o(y,_,x,A,P,I);x.transmission>0?n.push(C):x.transparent===!0?i.push(C):t.push(C)}function c(y,_,x,A,P,I){const C=o(y,_,x,A,P,I);x.transmission>0?n.unshift(C):x.transparent===!0?i.unshift(C):t.unshift(C)}function d(y,_){t.length>1&&t.sort(y||Kre),n.length>1&&n.sort(_||YP),i.length>1&&i.sort(_||YP)}function h(){for(let y=e,_=r.length;y<_;y++){const x=r[y];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:l,unshift:c,finish:h,sort:d}}function Yre(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new XP,r.set(n,[o])):i>=s.length?(o=new XP,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function Xre(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ve,color:new en};break;case"SpotLight":t={position:new ve,direction:new ve,color:new en,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ve,color:new en,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ve,skyColor:new en,groundColor:new en};break;case"RectAreaLight":t={color:new en,position:new ve,halfWidth:new ve,halfHeight:new ve};break}return r[e.id]=t,t}}}function $re(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Zre=0;function Qre(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Jre(r){const e=new Xre,t=$re(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new ve);const i=new ve,s=new Ln,o=new Ln;function l(d){let h=0,y=0,_=0;for(let te=0;te<9;te++)n.probe[te].set(0,0,0);let x=0,A=0,P=0,I=0,C=0,D=0,k=0,F=0,Q=0,G=0,Y=0;d.sort(Qre);for(let te=0,U=d.length;te<U;te++){const V=d[te],K=V.color,E=V.intensity,a=V.distance,p=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)h+=K.r*E,y+=K.g*E,_+=K.b*E;else if(V.isLightProbe){for(let M=0;M<9;M++)n.probe[M].addScaledVector(V.sh.coefficients[M],E);Y++}else if(V.isDirectionalLight){const M=e.get(V);if(M.color.copy(V.color).multiplyScalar(V.intensity),V.castShadow){const R=V.shadow,T=t.get(V);T.shadowIntensity=R.intensity,T.shadowBias=R.bias,T.shadowNormalBias=R.normalBias,T.shadowRadius=R.radius,T.shadowMapSize=R.mapSize,n.directionalShadow[x]=T,n.directionalShadowMap[x]=p,n.directionalShadowMatrix[x]=V.shadow.matrix,D++}n.directional[x]=M,x++}else if(V.isSpotLight){const M=e.get(V);M.position.setFromMatrixPosition(V.matrixWorld),M.color.copy(K).multiplyScalar(E),M.distance=a,M.coneCos=Math.cos(V.angle),M.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),M.decay=V.decay,n.spot[P]=M;const R=V.shadow;if(V.map&&(n.spotLightMap[Q]=V.map,Q++,R.updateMatrices(V),V.castShadow&&G++),n.spotLightMatrix[P]=R.matrix,V.castShadow){const T=t.get(V);T.shadowIntensity=R.intensity,T.shadowBias=R.bias,T.shadowNormalBias=R.normalBias,T.shadowRadius=R.radius,T.shadowMapSize=R.mapSize,n.spotShadow[P]=T,n.spotShadowMap[P]=p,F++}P++}else if(V.isRectAreaLight){const M=e.get(V);M.color.copy(K).multiplyScalar(E),M.halfWidth.set(V.width*.5,0,0),M.halfHeight.set(0,V.height*.5,0),n.rectArea[I]=M,I++}else if(V.isPointLight){const M=e.get(V);if(M.color.copy(V.color).multiplyScalar(V.intensity),M.distance=V.distance,M.decay=V.decay,V.castShadow){const R=V.shadow,T=t.get(V);T.shadowIntensity=R.intensity,T.shadowBias=R.bias,T.shadowNormalBias=R.normalBias,T.shadowRadius=R.radius,T.shadowMapSize=R.mapSize,T.shadowCameraNear=R.camera.near,T.shadowCameraFar=R.camera.far,n.pointShadow[A]=T,n.pointShadowMap[A]=p,n.pointShadowMatrix[A]=V.shadow.matrix,k++}n.point[A]=M,A++}else if(V.isHemisphereLight){const M=e.get(V);M.skyColor.copy(V.color).multiplyScalar(E),M.groundColor.copy(V.groundColor).multiplyScalar(E),n.hemi[C]=M,C++}}I>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Jt.LTC_FLOAT_1,n.rectAreaLTC2=Jt.LTC_FLOAT_2):(n.rectAreaLTC1=Jt.LTC_HALF_1,n.rectAreaLTC2=Jt.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=y,n.ambient[2]=_;const ee=n.hash;(ee.directionalLength!==x||ee.pointLength!==A||ee.spotLength!==P||ee.rectAreaLength!==I||ee.hemiLength!==C||ee.numDirectionalShadows!==D||ee.numPointShadows!==k||ee.numSpotShadows!==F||ee.numSpotMaps!==Q||ee.numLightProbes!==Y)&&(n.directional.length=x,n.spot.length=P,n.rectArea.length=I,n.point.length=A,n.hemi.length=C,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=k,n.pointShadowMap.length=k,n.spotShadow.length=F,n.spotShadowMap.length=F,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=k,n.spotLightMatrix.length=F+Q-G,n.spotLightMap.length=Q,n.numSpotLightShadowsWithMaps=G,n.numLightProbes=Y,ee.directionalLength=x,ee.pointLength=A,ee.spotLength=P,ee.rectAreaLength=I,ee.hemiLength=C,ee.numDirectionalShadows=D,ee.numPointShadows=k,ee.numSpotShadows=F,ee.numSpotMaps=Q,ee.numLightProbes=Y,n.version=Zre++)}function c(d,h){let y=0,_=0,x=0,A=0,P=0;const I=h.matrixWorldInverse;for(let C=0,D=d.length;C<D;C++){const k=d[C];if(k.isDirectionalLight){const F=n.directional[y];F.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),F.direction.sub(i),F.direction.transformDirection(I),y++}else if(k.isSpotLight){const F=n.spot[x];F.position.setFromMatrixPosition(k.matrixWorld),F.position.applyMatrix4(I),F.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),F.direction.sub(i),F.direction.transformDirection(I),x++}else if(k.isRectAreaLight){const F=n.rectArea[A];F.position.setFromMatrixPosition(k.matrixWorld),F.position.applyMatrix4(I),o.identity(),s.copy(k.matrixWorld),s.premultiply(I),o.extractRotation(s),F.halfWidth.set(k.width*.5,0,0),F.halfHeight.set(0,k.height*.5,0),F.halfWidth.applyMatrix4(o),F.halfHeight.applyMatrix4(o),A++}else if(k.isPointLight){const F=n.point[_];F.position.setFromMatrixPosition(k.matrixWorld),F.position.applyMatrix4(I),_++}else if(k.isHemisphereLight){const F=n.hemi[P];F.direction.setFromMatrixPosition(k.matrixWorld),F.direction.transformDirection(I),P++}}}return{setup:l,setupView:c,state:n}}function $P(r){const e=new Jre(r),t=[],n=[];function i(h){d.camera=h,t.length=0,n.length=0}function s(h){t.push(h)}function o(h){n.push(h)}function l(){e.setup(t)}function c(h){e.setupView(t,h)}const d={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:d,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function eie(r){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let l;return o===void 0?(l=new $P(r),e.set(i,[l])):s>=o.length?(l=new $P(r),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}class RR extends Ds{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=z6,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CR extends Ds{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const tie=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,nie=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function rie(r,e,t){let n=new Hy;const i=new Mt,s=new Mt,o=new fr,l=new RR({depthPacking:W6}),c=new CR,d={},h=t.maxTextureSize,y={[Ku]:Ls,[Ls]:Ku,[Va]:Va},_=new jo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Mt},radius:{value:4}},vertexShader:tie,fragmentShader:nie}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const A=new Jn;A.setAttribute("position",new Nr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const P=new Pi(A,_),I=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Mx;let C=this.type;this.render=function(G,Y,ee){if(I.enabled===!1||I.autoUpdate===!1&&I.needsUpdate===!1||G.length===0)return;const te=r.getRenderTarget(),U=r.getActiveCubeFace(),V=r.getActiveMipmapLevel(),K=r.state;K.setBlending(Vu),K.buffers.color.setClear(1,1,1,1),K.buffers.depth.setTest(!0),K.setScissorTest(!1);const E=C!==za&&this.type===za,a=C===za&&this.type!==za;for(let p=0,M=G.length;p<M;p++){const R=G[p],T=R.shadow;if(T===void 0){console.warn("THREE.WebGLShadowMap:",R,"has no shadow.");continue}if(T.autoUpdate===!1&&T.needsUpdate===!1)continue;i.copy(T.mapSize);const L=T.getFrameExtents();if(i.multiply(L),s.copy(T.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/L.x),i.x=s.x*L.x,T.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/L.y),i.y=s.y*L.y,T.mapSize.y=s.y)),T.map===null||E===!0||a===!0){const v=this.type!==za?{minFilter:es,magFilter:es}:{};T.map!==null&&T.map.dispose(),T.map=new Ya(i.x,i.y,v),T.map.texture.name=R.name+".shadowMap",T.camera.updateProjectionMatrix()}r.setRenderTarget(T.map),r.clear();const N=T.getViewportCount();for(let v=0;v<N;v++){const u=T.getViewport(v);o.set(s.x*u.x,s.y*u.y,s.x*u.z,s.y*u.w),K.viewport(o),T.updateMatrices(R,v),n=T.getFrustum(),F(Y,ee,T.camera,R,this.type)}T.isPointLightShadow!==!0&&this.type===za&&D(T,ee),T.needsUpdate=!1}C=this.type,I.needsUpdate=!1,r.setRenderTarget(te,U,V)};function D(G,Y){const ee=e.update(P);_.defines.VSM_SAMPLES!==G.blurSamples&&(_.defines.VSM_SAMPLES=G.blurSamples,x.defines.VSM_SAMPLES=G.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),G.mapPass===null&&(G.mapPass=new Ya(i.x,i.y)),_.uniforms.shadow_pass.value=G.map.texture,_.uniforms.resolution.value=G.mapSize,_.uniforms.radius.value=G.radius,r.setRenderTarget(G.mapPass),r.clear(),r.renderBufferDirect(Y,null,ee,_,P,null),x.uniforms.shadow_pass.value=G.mapPass.texture,x.uniforms.resolution.value=G.mapSize,x.uniforms.radius.value=G.radius,r.setRenderTarget(G.map),r.clear(),r.renderBufferDirect(Y,null,ee,x,P,null)}function k(G,Y,ee,te){let U=null;const V=ee.isPointLight===!0?G.customDistanceMaterial:G.customDepthMaterial;if(V!==void 0)U=V;else if(U=ee.isPointLight===!0?c:l,r.localClippingEnabled&&Y.clipShadows===!0&&Array.isArray(Y.clippingPlanes)&&Y.clippingPlanes.length!==0||Y.displacementMap&&Y.displacementScale!==0||Y.alphaMap&&Y.alphaTest>0||Y.map&&Y.alphaTest>0){const K=U.uuid,E=Y.uuid;let a=d[K];a===void 0&&(a={},d[K]=a);let p=a[E];p===void 0&&(p=U.clone(),a[E]=p,Y.addEventListener("dispose",Q)),U=p}if(U.visible=Y.visible,U.wireframe=Y.wireframe,te===za?U.side=Y.shadowSide!==null?Y.shadowSide:Y.side:U.side=Y.shadowSide!==null?Y.shadowSide:y[Y.side],U.alphaMap=Y.alphaMap,U.alphaTest=Y.alphaTest,U.map=Y.map,U.clipShadows=Y.clipShadows,U.clippingPlanes=Y.clippingPlanes,U.clipIntersection=Y.clipIntersection,U.displacementMap=Y.displacementMap,U.displacementScale=Y.displacementScale,U.displacementBias=Y.displacementBias,U.wireframeLinewidth=Y.wireframeLinewidth,U.linewidth=Y.linewidth,ee.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const K=r.properties.get(U);K.light=ee}return U}function F(G,Y,ee,te,U){if(G.visible===!1)return;if(G.layers.test(Y.layers)&&(G.isMesh||G.isLine||G.isPoints)&&(G.castShadow||G.receiveShadow&&U===za)&&(!G.frustumCulled||n.intersectsObject(G))){G.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,G.matrixWorld);const E=e.update(G),a=G.material;if(Array.isArray(a)){const p=E.groups;for(let M=0,R=p.length;M<R;M++){const T=p[M],L=a[T.materialIndex];if(L&&L.visible){const N=k(G,L,te,U);G.onBeforeShadow(r,G,Y,ee,E,N,T),r.renderBufferDirect(ee,null,E,N,G,T),G.onAfterShadow(r,G,Y,ee,E,N,T)}}}else if(a.visible){const p=k(G,a,te,U);G.onBeforeShadow(r,G,Y,ee,E,p,null),r.renderBufferDirect(ee,null,E,p,G,null),G.onAfterShadow(r,G,Y,ee,E,p,null)}}const K=G.children;for(let E=0,a=K.length;E<a;E++)F(K[E],Y,ee,te,U)}function Q(G){G.target.removeEventListener("dispose",Q);for(const ee in d){const te=d[ee],U=G.target.uuid;U in te&&(te[U].dispose(),delete te[U])}}}const iie={[s1]:o1,[a1]:c1,[l1]:f1,[ed]:u1,[o1]:s1,[c1]:a1,[f1]:l1,[u1]:ed};function sie(r){function e(){let de=!1;const Ce=new fr;let Ue=null;const Ee=new fr(0,0,0,0);return{setMask:function(qe){Ue!==qe&&!de&&(r.colorMask(qe,qe,qe,qe),Ue=qe)},setLocked:function(qe){de=qe},setClear:function(qe,Ct,ft,yt,Sn){Sn===!0&&(qe*=yt,Ct*=yt,ft*=yt),Ce.set(qe,Ct,ft,yt),Ee.equals(Ce)===!1&&(r.clearColor(qe,Ct,ft,yt),Ee.copy(Ce))},reset:function(){de=!1,Ue=null,Ee.set(-1,0,0,0)}}}function t(){let de=!1,Ce=!1,Ue=null,Ee=null,qe=null;return{setReversed:function(Ct){Ce=Ct},setTest:function(Ct){Ct?se(r.DEPTH_TEST):me(r.DEPTH_TEST)},setMask:function(Ct){Ue!==Ct&&!de&&(r.depthMask(Ct),Ue=Ct)},setFunc:function(Ct){if(Ce&&(Ct=iie[Ct]),Ee!==Ct){switch(Ct){case s1:r.depthFunc(r.NEVER);break;case o1:r.depthFunc(r.ALWAYS);break;case a1:r.depthFunc(r.LESS);break;case ed:r.depthFunc(r.LEQUAL);break;case l1:r.depthFunc(r.EQUAL);break;case u1:r.depthFunc(r.GEQUAL);break;case c1:r.depthFunc(r.GREATER);break;case f1:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Ee=Ct}},setLocked:function(Ct){de=Ct},setClear:function(Ct){qe!==Ct&&(r.clearDepth(Ct),qe=Ct)},reset:function(){de=!1,Ue=null,Ee=null,qe=null}}}function n(){let de=!1,Ce=null,Ue=null,Ee=null,qe=null,Ct=null,ft=null,yt=null,Sn=null;return{setTest:function(dt){de||(dt?se(r.STENCIL_TEST):me(r.STENCIL_TEST))},setMask:function(dt){Ce!==dt&&!de&&(r.stencilMask(dt),Ce=dt)},setFunc:function(dt,ae,J){(Ue!==dt||Ee!==ae||qe!==J)&&(r.stencilFunc(dt,ae,J),Ue=dt,Ee=ae,qe=J)},setOp:function(dt,ae,J){(Ct!==dt||ft!==ae||yt!==J)&&(r.stencilOp(dt,ae,J),Ct=dt,ft=ae,yt=J)},setLocked:function(dt){de=dt},setClear:function(dt){Sn!==dt&&(r.clearStencil(dt),Sn=dt)},reset:function(){de=!1,Ce=null,Ue=null,Ee=null,qe=null,Ct=null,ft=null,yt=null,Sn=null}}}const i=new e,s=new t,o=new n,l=new WeakMap,c=new WeakMap;let d={},h={},y=new WeakMap,_=[],x=null,A=!1,P=null,I=null,C=null,D=null,k=null,F=null,Q=null,G=new en(0,0,0),Y=0,ee=!1,te=null,U=null,V=null,K=null,E=null;const a=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let p=!1,M=0;const R=r.getParameter(r.VERSION);R.indexOf("WebGL")!==-1?(M=parseFloat(/^WebGL (\d)/.exec(R)[1]),p=M>=1):R.indexOf("OpenGL ES")!==-1&&(M=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),p=M>=2);let T=null,L={};const N=r.getParameter(r.SCISSOR_BOX),v=r.getParameter(r.VIEWPORT),u=new fr().fromArray(N),S=new fr().fromArray(v);function W(de,Ce,Ue,Ee){const qe=new Uint8Array(4),Ct=r.createTexture();r.bindTexture(de,Ct),r.texParameteri(de,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(de,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let ft=0;ft<Ue;ft++)de===r.TEXTURE_3D||de===r.TEXTURE_2D_ARRAY?r.texImage3D(Ce,0,r.RGBA,1,1,Ee,0,r.RGBA,r.UNSIGNED_BYTE,qe):r.texImage2D(Ce+ft,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,qe);return Ct}const $={};$[r.TEXTURE_2D]=W(r.TEXTURE_2D,r.TEXTURE_2D,1),$[r.TEXTURE_CUBE_MAP]=W(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),$[r.TEXTURE_2D_ARRAY]=W(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),$[r.TEXTURE_3D]=W(r.TEXTURE_3D,r.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),se(r.DEPTH_TEST),s.setFunc(ed),je(!1),vt(SA),se(r.CULL_FACE),ge(Vu);function se(de){d[de]!==!0&&(r.enable(de),d[de]=!0)}function me(de){d[de]!==!1&&(r.disable(de),d[de]=!1)}function _e(de,Ce){return h[de]!==Ce?(r.bindFramebuffer(de,Ce),h[de]=Ce,de===r.DRAW_FRAMEBUFFER&&(h[r.FRAMEBUFFER]=Ce),de===r.FRAMEBUFFER&&(h[r.DRAW_FRAMEBUFFER]=Ce),!0):!1}function Ae(de,Ce){let Ue=_,Ee=!1;if(de){Ue=y.get(Ce),Ue===void 0&&(Ue=[],y.set(Ce,Ue));const qe=de.textures;if(Ue.length!==qe.length||Ue[0]!==r.COLOR_ATTACHMENT0){for(let Ct=0,ft=qe.length;Ct<ft;Ct++)Ue[Ct]=r.COLOR_ATTACHMENT0+Ct;Ue.length=qe.length,Ee=!0}}else Ue[0]!==r.BACK&&(Ue[0]=r.BACK,Ee=!0);Ee&&r.drawBuffers(Ue)}function _t(de){return x!==de?(r.useProgram(de),x=de,!0):!1}const Ze={[Yc]:r.FUNC_ADD,[f6]:r.FUNC_SUBTRACT,[h6]:r.FUNC_REVERSE_SUBTRACT};Ze[d6]=r.MIN,Ze[p6]=r.MAX;const Pe={[m6]:r.ZERO,[g6]:r.ONE,[y6]:r.SRC_COLOR,[r1]:r.SRC_ALPHA,[M6]:r.SRC_ALPHA_SATURATE,[x6]:r.DST_COLOR,[w6]:r.DST_ALPHA,[v6]:r.ONE_MINUS_SRC_COLOR,[i1]:r.ONE_MINUS_SRC_ALPHA,[S6]:r.ONE_MINUS_DST_COLOR,[_6]:r.ONE_MINUS_DST_ALPHA,[E6]:r.CONSTANT_COLOR,[b6]:r.ONE_MINUS_CONSTANT_COLOR,[A6]:r.CONSTANT_ALPHA,[T6]:r.ONE_MINUS_CONSTANT_ALPHA};function ge(de,Ce,Ue,Ee,qe,Ct,ft,yt,Sn,dt){if(de===Vu){A===!0&&(me(r.BLEND),A=!1);return}if(A===!1&&(se(r.BLEND),A=!0),de!==c6){if(de!==P||dt!==ee){if((I!==Yc||k!==Yc)&&(r.blendEquation(r.FUNC_ADD),I=Yc,k=Yc),dt)switch(de){case jh:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Jg:r.blendFunc(r.ONE,r.ONE);break;case MA:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case EA:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case jh:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Jg:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case MA:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case EA:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}C=null,D=null,F=null,Q=null,G.set(0,0,0),Y=0,P=de,ee=dt}return}qe=qe||Ce,Ct=Ct||Ue,ft=ft||Ee,(Ce!==I||qe!==k)&&(r.blendEquationSeparate(Ze[Ce],Ze[qe]),I=Ce,k=qe),(Ue!==C||Ee!==D||Ct!==F||ft!==Q)&&(r.blendFuncSeparate(Pe[Ue],Pe[Ee],Pe[Ct],Pe[ft]),C=Ue,D=Ee,F=Ct,Q=ft),(yt.equals(G)===!1||Sn!==Y)&&(r.blendColor(yt.r,yt.g,yt.b,Sn),G.copy(yt),Y=Sn),P=de,ee=!1}function Ge(de,Ce){de.side===Va?me(r.CULL_FACE):se(r.CULL_FACE);let Ue=de.side===Ls;Ce&&(Ue=!Ue),je(Ue),de.blending===jh&&de.transparent===!1?ge(Vu):ge(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),s.setFunc(de.depthFunc),s.setTest(de.depthTest),s.setMask(de.depthWrite),i.setMask(de.colorWrite);const Ee=de.stencilWrite;o.setTest(Ee),Ee&&(o.setMask(de.stencilWriteMask),o.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),o.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),nt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?se(r.SAMPLE_ALPHA_TO_COVERAGE):me(r.SAMPLE_ALPHA_TO_COVERAGE)}function je(de){te!==de&&(de?r.frontFace(r.CW):r.frontFace(r.CCW),te=de)}function vt(de){de!==a6?(se(r.CULL_FACE),de!==U&&(de===SA?r.cullFace(r.BACK):de===l6?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):me(r.CULL_FACE),U=de}function He(de){de!==V&&(p&&r.lineWidth(de),V=de)}function nt(de,Ce,Ue){de?(se(r.POLYGON_OFFSET_FILL),(K!==Ce||E!==Ue)&&(r.polygonOffset(Ce,Ue),K=Ce,E=Ue)):me(r.POLYGON_OFFSET_FILL)}function Pt(de){de?se(r.SCISSOR_TEST):me(r.SCISSOR_TEST)}function fe(de){de===void 0&&(de=r.TEXTURE0+a-1),T!==de&&(r.activeTexture(de),T=de)}function oe(de,Ce,Ue){Ue===void 0&&(T===null?Ue=r.TEXTURE0+a-1:Ue=T);let Ee=L[Ue];Ee===void 0&&(Ee={type:void 0,texture:void 0},L[Ue]=Ee),(Ee.type!==de||Ee.texture!==Ce)&&(T!==Ue&&(r.activeTexture(Ue),T=Ue),r.bindTexture(de,Ce||$[de]),Ee.type=de,Ee.texture=Ce)}function Oe(){const de=L[T];de!==void 0&&de.type!==void 0&&(r.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Re(){try{r.compressedTexImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Le(){try{r.compressedTexImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ot(){try{r.texSubImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function et(){try{r.texSubImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ye(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function bt(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ct(){try{r.texStorage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function re(){try{r.texStorage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function j(){try{r.texImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function q(){try{r.texImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ue(de){u.equals(de)===!1&&(r.scissor(de.x,de.y,de.z,de.w),u.copy(de))}function we(de){S.equals(de)===!1&&(r.viewport(de.x,de.y,de.z,de.w),S.copy(de))}function ye(de,Ce){let Ue=c.get(Ce);Ue===void 0&&(Ue=new WeakMap,c.set(Ce,Ue));let Ee=Ue.get(de);Ee===void 0&&(Ee=r.getUniformBlockIndex(Ce,de.name),Ue.set(de,Ee))}function le(de,Ce){const Ee=c.get(Ce).get(de);l.get(Ce)!==Ee&&(r.uniformBlockBinding(Ce,Ee,de.__bindingPointIndex),l.set(Ce,Ee))}function Xe(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),d={},T=null,L={},h={},y=new WeakMap,_=[],x=null,A=!1,P=null,I=null,C=null,D=null,k=null,F=null,Q=null,G=new en(0,0,0),Y=0,ee=!1,te=null,U=null,V=null,K=null,E=null,u.set(0,0,r.canvas.width,r.canvas.height),S.set(0,0,r.canvas.width,r.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:se,disable:me,bindFramebuffer:_e,drawBuffers:Ae,useProgram:_t,setBlending:ge,setMaterial:Ge,setFlipSided:je,setCullFace:vt,setLineWidth:He,setPolygonOffset:nt,setScissorTest:Pt,activeTexture:fe,bindTexture:oe,unbindTexture:Oe,compressedTexImage2D:Re,compressedTexImage3D:Le,texImage2D:j,texImage3D:q,updateUBOMapping:ye,uniformBlockBinding:le,texStorage2D:ct,texStorage3D:re,texSubImage2D:ot,texSubImage3D:et,compressedTexSubImage2D:Ye,compressedTexSubImage3D:bt,scissor:ue,viewport:we,reset:Xe}}function oie(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function aie(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function lie(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function IA(r,e,t,n){const i=uie(n);switch(t){case dR:return r*e;case mR:return r*e;case gR:return r*e*2;case Rx:return r*e/i.components*i.byteLength;case Fy:return r*e/i.components*i.byteLength;case yR:return r*e*2/i.components*i.byteLength;case Cx:return r*e*2/i.components*i.byteLength;case pR:return r*e*3/i.components*i.byteLength;case Ps:return r*e*4/i.components*i.byteLength;case Ix:return r*e*4/i.components*i.byteLength;case Ig:case Ng:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case Pg:case Lg:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case d1:case m1:return Math.max(r,16)*Math.max(e,8)/4;case h1:case p1:return Math.max(r,8)*Math.max(e,8)/2;case g1:case y1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case v1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case w1:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case _1:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case x1:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case S1:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case M1:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case E1:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case b1:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case A1:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case T1:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case R1:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case C1:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case I1:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case N1:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case P1:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case kg:case L1:case k1:return Math.ceil(r/4)*Math.ceil(e/4)*16;case vR:case O1:return Math.ceil(r/4)*Math.ceil(e/4)*8;case D1:case B1:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function uie(r){switch(r){case Ka:case cR:return{byteLength:1,components:1};case M0:case fR:case U0:return{byteLength:2,components:1};case Ax:case Tx:return{byteLength:2,components:4};case Xu:case bx:case _o:return{byteLength:4,components:1};case hR:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}const cie={contain:oie,cover:aie,fill:lie,getByteLength:IA};function fie(r,e,t,n,i,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new Mt,h=new WeakMap;let y;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(fe,oe){return x?new OffscreenCanvas(fe,oe):fy("canvas")}function P(fe,oe,Oe){let Re=1;const Le=Pt(fe);if((Le.width>Oe||Le.height>Oe)&&(Re=Oe/Math.max(Le.width,Le.height)),Re<1)if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap||typeof VideoFrame<"u"&&fe instanceof VideoFrame){const ot=Math.floor(Re*Le.width),et=Math.floor(Re*Le.height);y===void 0&&(y=A(ot,et));const Ye=oe?A(ot,et):y;return Ye.width=ot,Ye.height=et,Ye.getContext("2d").drawImage(fe,0,0,ot,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Le.width+"x"+Le.height+") to ("+ot+"x"+et+")."),Ye}else return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Le.width+"x"+Le.height+")."),fe;return fe}function I(fe){return fe.generateMipmaps&&fe.minFilter!==es&&fe.minFilter!==Ii}function C(fe){r.generateMipmap(fe)}function D(fe,oe,Oe,Re,Le=!1){if(fe!==null){if(r[fe]!==void 0)return r[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let ot=oe;if(oe===r.RED&&(Oe===r.FLOAT&&(ot=r.R32F),Oe===r.HALF_FLOAT&&(ot=r.R16F),Oe===r.UNSIGNED_BYTE&&(ot=r.R8)),oe===r.RED_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.R8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.R16UI),Oe===r.UNSIGNED_INT&&(ot=r.R32UI),Oe===r.BYTE&&(ot=r.R8I),Oe===r.SHORT&&(ot=r.R16I),Oe===r.INT&&(ot=r.R32I)),oe===r.RG&&(Oe===r.FLOAT&&(ot=r.RG32F),Oe===r.HALF_FLOAT&&(ot=r.RG16F),Oe===r.UNSIGNED_BYTE&&(ot=r.RG8)),oe===r.RG_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.RG8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.RG16UI),Oe===r.UNSIGNED_INT&&(ot=r.RG32UI),Oe===r.BYTE&&(ot=r.RG8I),Oe===r.SHORT&&(ot=r.RG16I),Oe===r.INT&&(ot=r.RG32I)),oe===r.RGB_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.RGB8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.RGB16UI),Oe===r.UNSIGNED_INT&&(ot=r.RGB32UI),Oe===r.BYTE&&(ot=r.RGB8I),Oe===r.SHORT&&(ot=r.RGB16I),Oe===r.INT&&(ot=r.RGB32I)),oe===r.RGBA_INTEGER&&(Oe===r.UNSIGNED_BYTE&&(ot=r.RGBA8UI),Oe===r.UNSIGNED_SHORT&&(ot=r.RGBA16UI),Oe===r.UNSIGNED_INT&&(ot=r.RGBA32UI),Oe===r.BYTE&&(ot=r.RGBA8I),Oe===r.SHORT&&(ot=r.RGBA16I),Oe===r.INT&&(ot=r.RGBA32I)),oe===r.RGB&&Oe===r.UNSIGNED_INT_5_9_9_9_REV&&(ot=r.RGB9_E5),oe===r.RGBA){const et=Le?oy:yr.getTransfer(Re);Oe===r.FLOAT&&(ot=r.RGBA32F),Oe===r.HALF_FLOAT&&(ot=r.RGBA16F),Oe===r.UNSIGNED_BYTE&&(ot=et===Fr?r.SRGB8_ALPHA8:r.RGBA8),Oe===r.UNSIGNED_SHORT_4_4_4_4&&(ot=r.RGBA4),Oe===r.UNSIGNED_SHORT_5_5_5_1&&(ot=r.RGB5_A1)}return(ot===r.R16F||ot===r.R32F||ot===r.RG16F||ot===r.RG32F||ot===r.RGBA16F||ot===r.RGBA32F)&&e.get("EXT_color_buffer_float"),ot}function k(fe,oe){let Oe;return fe?oe===null||oe===Xu||oe===td?Oe=r.DEPTH24_STENCIL8:oe===_o?Oe=r.DEPTH32F_STENCIL8:oe===M0&&(Oe=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):oe===null||oe===Xu||oe===td?Oe=r.DEPTH_COMPONENT24:oe===_o?Oe=r.DEPTH_COMPONENT32F:oe===M0&&(Oe=r.DEPTH_COMPONENT16),Oe}function F(fe,oe){return I(fe)===!0||fe.isFramebufferTexture&&fe.minFilter!==es&&fe.minFilter!==Ii?Math.log2(Math.max(oe.width,oe.height))+1:fe.mipmaps!==void 0&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?oe.mipmaps.length:1}function Q(fe){const oe=fe.target;oe.removeEventListener("dispose",Q),Y(oe),oe.isVideoTexture&&h.delete(oe)}function G(fe){const oe=fe.target;oe.removeEventListener("dispose",G),te(oe)}function Y(fe){const oe=n.get(fe);if(oe.__webglInit===void 0)return;const Oe=fe.source,Re=_.get(Oe);if(Re){const Le=Re[oe.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&ee(fe),Object.keys(Re).length===0&&_.delete(Oe)}n.remove(fe)}function ee(fe){const oe=n.get(fe);r.deleteTexture(oe.__webglTexture);const Oe=fe.source,Re=_.get(Oe);delete Re[oe.__cacheKey],o.memory.textures--}function te(fe){const oe=n.get(fe);if(fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let Re=0;Re<6;Re++){if(Array.isArray(oe.__webglFramebuffer[Re]))for(let Le=0;Le<oe.__webglFramebuffer[Re].length;Le++)r.deleteFramebuffer(oe.__webglFramebuffer[Re][Le]);else r.deleteFramebuffer(oe.__webglFramebuffer[Re]);oe.__webglDepthbuffer&&r.deleteRenderbuffer(oe.__webglDepthbuffer[Re])}else{if(Array.isArray(oe.__webglFramebuffer))for(let Re=0;Re<oe.__webglFramebuffer.length;Re++)r.deleteFramebuffer(oe.__webglFramebuffer[Re]);else r.deleteFramebuffer(oe.__webglFramebuffer);if(oe.__webglDepthbuffer&&r.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&r.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Re=0;Re<oe.__webglColorRenderbuffer.length;Re++)oe.__webglColorRenderbuffer[Re]&&r.deleteRenderbuffer(oe.__webglColorRenderbuffer[Re]);oe.__webglDepthRenderbuffer&&r.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}const Oe=fe.textures;for(let Re=0,Le=Oe.length;Re<Le;Re++){const ot=n.get(Oe[Re]);ot.__webglTexture&&(r.deleteTexture(ot.__webglTexture),o.memory.textures--),n.remove(Oe[Re])}n.remove(fe)}let U=0;function V(){U=0}function K(){const fe=U;return fe>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+i.maxTextures),U+=1,fe}function E(fe){const oe=[];return oe.push(fe.wrapS),oe.push(fe.wrapT),oe.push(fe.wrapR||0),oe.push(fe.magFilter),oe.push(fe.minFilter),oe.push(fe.anisotropy),oe.push(fe.internalFormat),oe.push(fe.format),oe.push(fe.type),oe.push(fe.generateMipmaps),oe.push(fe.premultiplyAlpha),oe.push(fe.flipY),oe.push(fe.unpackAlignment),oe.push(fe.colorSpace),oe.join()}function a(fe,oe){const Oe=n.get(fe);if(fe.isVideoTexture&&He(fe),fe.isRenderTargetTexture===!1&&fe.version>0&&Oe.__version!==fe.version){const Re=fe.image;if(Re===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Re.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{S(Oe,fe,oe);return}}t.bindTexture(r.TEXTURE_2D,Oe.__webglTexture,r.TEXTURE0+oe)}function p(fe,oe){const Oe=n.get(fe);if(fe.version>0&&Oe.__version!==fe.version){S(Oe,fe,oe);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Oe.__webglTexture,r.TEXTURE0+oe)}function M(fe,oe){const Oe=n.get(fe);if(fe.version>0&&Oe.__version!==fe.version){S(Oe,fe,oe);return}t.bindTexture(r.TEXTURE_3D,Oe.__webglTexture,r.TEXTURE0+oe)}function R(fe,oe){const Oe=n.get(fe);if(fe.version>0&&Oe.__version!==fe.version){W(Oe,fe,oe);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Oe.__webglTexture,r.TEXTURE0+oe)}const T={[ny]:r.REPEAT,[la]:r.CLAMP_TO_EDGE,[ry]:r.MIRRORED_REPEAT},L={[es]:r.NEAREST,[uR]:r.NEAREST_MIPMAP_NEAREST,[e0]:r.NEAREST_MIPMAP_LINEAR,[Ii]:r.LINEAR,[Cg]:r.LINEAR_MIPMAP_NEAREST,[El]:r.LINEAR_MIPMAP_LINEAR},N={[H6]:r.NEVER,[X6]:r.ALWAYS,[G6]:r.LESS,[_R]:r.LEQUAL,[j6]:r.EQUAL,[Y6]:r.GEQUAL,[q6]:r.GREATER,[K6]:r.NOTEQUAL};function v(fe,oe){if(oe.type===_o&&e.has("OES_texture_float_linear")===!1&&(oe.magFilter===Ii||oe.magFilter===Cg||oe.magFilter===e0||oe.magFilter===El||oe.minFilter===Ii||oe.minFilter===Cg||oe.minFilter===e0||oe.minFilter===El)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(fe,r.TEXTURE_WRAP_S,T[oe.wrapS]),r.texParameteri(fe,r.TEXTURE_WRAP_T,T[oe.wrapT]),(fe===r.TEXTURE_3D||fe===r.TEXTURE_2D_ARRAY)&&r.texParameteri(fe,r.TEXTURE_WRAP_R,T[oe.wrapR]),r.texParameteri(fe,r.TEXTURE_MAG_FILTER,L[oe.magFilter]),r.texParameteri(fe,r.TEXTURE_MIN_FILTER,L[oe.minFilter]),oe.compareFunction&&(r.texParameteri(fe,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(fe,r.TEXTURE_COMPARE_FUNC,N[oe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(oe.magFilter===es||oe.minFilter!==e0&&oe.minFilter!==El||oe.type===_o&&e.has("OES_texture_float_linear")===!1)return;if(oe.anisotropy>1||n.get(oe).__currentAnisotropy){const Oe=e.get("EXT_texture_filter_anisotropic");r.texParameterf(fe,Oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(oe.anisotropy,i.getMaxAnisotropy())),n.get(oe).__currentAnisotropy=oe.anisotropy}}}function u(fe,oe){let Oe=!1;fe.__webglInit===void 0&&(fe.__webglInit=!0,oe.addEventListener("dispose",Q));const Re=oe.source;let Le=_.get(Re);Le===void 0&&(Le={},_.set(Re,Le));const ot=E(oe);if(ot!==fe.__cacheKey){Le[ot]===void 0&&(Le[ot]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,Oe=!0),Le[ot].usedTimes++;const et=Le[fe.__cacheKey];et!==void 0&&(Le[fe.__cacheKey].usedTimes--,et.usedTimes===0&&ee(oe)),fe.__cacheKey=ot,fe.__webglTexture=Le[ot].texture}return Oe}function S(fe,oe,Oe){let Re=r.TEXTURE_2D;(oe.isDataArrayTexture||oe.isCompressedArrayTexture)&&(Re=r.TEXTURE_2D_ARRAY),oe.isData3DTexture&&(Re=r.TEXTURE_3D);const Le=u(fe,oe),ot=oe.source;t.bindTexture(Re,fe.__webglTexture,r.TEXTURE0+Oe);const et=n.get(ot);if(ot.version!==et.__version||Le===!0){t.activeTexture(r.TEXTURE0+Oe);const Ye=yr.getPrimaries(yr.workingColorSpace),bt=oe.colorSpace===Lu?null:yr.getPrimaries(oe.colorSpace),ct=oe.colorSpace===Lu||Ye===bt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,oe.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,oe.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);let re=P(oe.image,!1,i.maxTextureSize);re=nt(oe,re);const j=s.convert(oe.format,oe.colorSpace),q=s.convert(oe.type);let ue=D(oe.internalFormat,j,q,oe.colorSpace,oe.isVideoTexture);v(Re,oe);let we;const ye=oe.mipmaps,le=oe.isVideoTexture!==!0,Xe=et.__version===void 0||Le===!0,de=ot.dataReady,Ce=F(oe,re);if(oe.isDepthTexture)ue=k(oe.format===nd,oe.type),Xe&&(le?t.texStorage2D(r.TEXTURE_2D,1,ue,re.width,re.height):t.texImage2D(r.TEXTURE_2D,0,ue,re.width,re.height,0,j,q,null));else if(oe.isDataTexture)if(ye.length>0){le&&Xe&&t.texStorage2D(r.TEXTURE_2D,Ce,ue,ye[0].width,ye[0].height);for(let Ue=0,Ee=ye.length;Ue<Ee;Ue++)we=ye[Ue],le?de&&t.texSubImage2D(r.TEXTURE_2D,Ue,0,0,we.width,we.height,j,q,we.data):t.texImage2D(r.TEXTURE_2D,Ue,ue,we.width,we.height,0,j,q,we.data);oe.generateMipmaps=!1}else le?(Xe&&t.texStorage2D(r.TEXTURE_2D,Ce,ue,re.width,re.height),de&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,re.width,re.height,j,q,re.data)):t.texImage2D(r.TEXTURE_2D,0,ue,re.width,re.height,0,j,q,re.data);else if(oe.isCompressedTexture)if(oe.isCompressedArrayTexture){le&&Xe&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ce,ue,ye[0].width,ye[0].height,re.depth);for(let Ue=0,Ee=ye.length;Ue<Ee;Ue++)if(we=ye[Ue],oe.format!==Ps)if(j!==null)if(le){if(de)if(oe.layerUpdates.size>0){const qe=IA(we.width,we.height,oe.format,oe.type);for(const Ct of oe.layerUpdates){const ft=we.data.subarray(Ct*qe/we.data.BYTES_PER_ELEMENT,(Ct+1)*qe/we.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,Ct,we.width,we.height,1,j,ft,0,0)}oe.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,we.width,we.height,re.depth,j,we.data,0,0)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ue,ue,we.width,we.height,re.depth,0,we.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else le?de&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ue,0,0,0,we.width,we.height,re.depth,j,q,we.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ue,ue,we.width,we.height,re.depth,0,j,q,we.data)}else{le&&Xe&&t.texStorage2D(r.TEXTURE_2D,Ce,ue,ye[0].width,ye[0].height);for(let Ue=0,Ee=ye.length;Ue<Ee;Ue++)we=ye[Ue],oe.format!==Ps?j!==null?le?de&&t.compressedTexSubImage2D(r.TEXTURE_2D,Ue,0,0,we.width,we.height,j,we.data):t.compressedTexImage2D(r.TEXTURE_2D,Ue,ue,we.width,we.height,0,we.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?de&&t.texSubImage2D(r.TEXTURE_2D,Ue,0,0,we.width,we.height,j,q,we.data):t.texImage2D(r.TEXTURE_2D,Ue,ue,we.width,we.height,0,j,q,we.data)}else if(oe.isDataArrayTexture)if(le){if(Xe&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Ce,ue,re.width,re.height,re.depth),de)if(oe.layerUpdates.size>0){const Ue=IA(re.width,re.height,oe.format,oe.type);for(const Ee of oe.layerUpdates){const qe=re.data.subarray(Ee*Ue/re.data.BYTES_PER_ELEMENT,(Ee+1)*Ue/re.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Ee,re.width,re.height,1,j,q,qe)}oe.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,re.width,re.height,re.depth,j,q,re.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,ue,re.width,re.height,re.depth,0,j,q,re.data);else if(oe.isData3DTexture)le?(Xe&&t.texStorage3D(r.TEXTURE_3D,Ce,ue,re.width,re.height,re.depth),de&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,re.width,re.height,re.depth,j,q,re.data)):t.texImage3D(r.TEXTURE_3D,0,ue,re.width,re.height,re.depth,0,j,q,re.data);else if(oe.isFramebufferTexture){if(Xe)if(le)t.texStorage2D(r.TEXTURE_2D,Ce,ue,re.width,re.height);else{let Ue=re.width,Ee=re.height;for(let qe=0;qe<Ce;qe++)t.texImage2D(r.TEXTURE_2D,qe,ue,Ue,Ee,0,j,q,null),Ue>>=1,Ee>>=1}}else if(ye.length>0){if(le&&Xe){const Ue=Pt(ye[0]);t.texStorage2D(r.TEXTURE_2D,Ce,ue,Ue.width,Ue.height)}for(let Ue=0,Ee=ye.length;Ue<Ee;Ue++)we=ye[Ue],le?de&&t.texSubImage2D(r.TEXTURE_2D,Ue,0,0,j,q,we):t.texImage2D(r.TEXTURE_2D,Ue,ue,j,q,we);oe.generateMipmaps=!1}else if(le){if(Xe){const Ue=Pt(re);t.texStorage2D(r.TEXTURE_2D,Ce,ue,Ue.width,Ue.height)}de&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,j,q,re)}else t.texImage2D(r.TEXTURE_2D,0,ue,j,q,re);I(oe)&&C(Re),et.__version=ot.version,oe.onUpdate&&oe.onUpdate(oe)}fe.__version=oe.version}function W(fe,oe,Oe){if(oe.image.length!==6)return;const Re=u(fe,oe),Le=oe.source;t.bindTexture(r.TEXTURE_CUBE_MAP,fe.__webglTexture,r.TEXTURE0+Oe);const ot=n.get(Le);if(Le.version!==ot.__version||Re===!0){t.activeTexture(r.TEXTURE0+Oe);const et=yr.getPrimaries(yr.workingColorSpace),Ye=oe.colorSpace===Lu?null:yr.getPrimaries(oe.colorSpace),bt=oe.colorSpace===Lu||et===Ye?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,oe.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,oe.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);const ct=oe.isCompressedTexture||oe.image[0].isCompressedTexture,re=oe.image[0]&&oe.image[0].isDataTexture,j=[];for(let Ee=0;Ee<6;Ee++)!ct&&!re?j[Ee]=P(oe.image[Ee],!0,i.maxCubemapSize):j[Ee]=re?oe.image[Ee].image:oe.image[Ee],j[Ee]=nt(oe,j[Ee]);const q=j[0],ue=s.convert(oe.format,oe.colorSpace),we=s.convert(oe.type),ye=D(oe.internalFormat,ue,we,oe.colorSpace),le=oe.isVideoTexture!==!0,Xe=ot.__version===void 0||Re===!0,de=Le.dataReady;let Ce=F(oe,q);v(r.TEXTURE_CUBE_MAP,oe);let Ue;if(ct){le&&Xe&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Ce,ye,q.width,q.height);for(let Ee=0;Ee<6;Ee++){Ue=j[Ee].mipmaps;for(let qe=0;qe<Ue.length;qe++){const Ct=Ue[qe];oe.format!==Ps?ue!==null?le?de&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe,0,0,Ct.width,Ct.height,ue,Ct.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe,ye,Ct.width,Ct.height,0,Ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe,0,0,Ct.width,Ct.height,ue,we,Ct.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe,ye,Ct.width,Ct.height,0,ue,we,Ct.data)}}}else{if(Ue=oe.mipmaps,le&&Xe){Ue.length>0&&Ce++;const Ee=Pt(j[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Ce,ye,Ee.width,Ee.height)}for(let Ee=0;Ee<6;Ee++)if(re){le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,j[Ee].width,j[Ee].height,ue,we,j[Ee].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,ye,j[Ee].width,j[Ee].height,0,ue,we,j[Ee].data);for(let qe=0;qe<Ue.length;qe++){const ft=Ue[qe].image[Ee].image;le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe+1,0,0,ft.width,ft.height,ue,we,ft.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe+1,ye,ft.width,ft.height,0,ue,we,ft.data)}}else{le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,ue,we,j[Ee]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,ye,ue,we,j[Ee]);for(let qe=0;qe<Ue.length;qe++){const Ct=Ue[qe];le?de&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe+1,0,0,ue,we,Ct.image[Ee]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,qe+1,ye,ue,we,Ct.image[Ee])}}}I(oe)&&C(r.TEXTURE_CUBE_MAP),ot.__version=Le.version,oe.onUpdate&&oe.onUpdate(oe)}fe.__version=oe.version}function $(fe,oe,Oe,Re,Le,ot){const et=s.convert(Oe.format,Oe.colorSpace),Ye=s.convert(Oe.type),bt=D(Oe.internalFormat,et,Ye,Oe.colorSpace);if(!n.get(oe).__hasExternalTextures){const re=Math.max(1,oe.width>>ot),j=Math.max(1,oe.height>>ot);Le===r.TEXTURE_3D||Le===r.TEXTURE_2D_ARRAY?t.texImage3D(Le,ot,bt,re,j,oe.depth,0,et,Ye,null):t.texImage2D(Le,ot,bt,re,j,0,et,Ye,null)}t.bindFramebuffer(r.FRAMEBUFFER,fe),vt(oe)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Re,Le,n.get(Oe).__webglTexture,0,je(oe)):(Le===r.TEXTURE_2D||Le>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Le<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Re,Le,n.get(Oe).__webglTexture,ot),t.bindFramebuffer(r.FRAMEBUFFER,null)}function se(fe,oe,Oe){if(r.bindRenderbuffer(r.RENDERBUFFER,fe),oe.depthBuffer){const Re=oe.depthTexture,Le=Re&&Re.isDepthTexture?Re.type:null,ot=k(oe.stencilBuffer,Le),et=oe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ye=je(oe);vt(oe)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ye,ot,oe.width,oe.height):Oe?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ye,ot,oe.width,oe.height):r.renderbufferStorage(r.RENDERBUFFER,ot,oe.width,oe.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,et,r.RENDERBUFFER,fe)}else{const Re=oe.textures;for(let Le=0;Le<Re.length;Le++){const ot=Re[Le],et=s.convert(ot.format,ot.colorSpace),Ye=s.convert(ot.type),bt=D(ot.internalFormat,et,Ye,ot.colorSpace),ct=je(oe);Oe&&vt(oe)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ct,bt,oe.width,oe.height):vt(oe)?l.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ct,bt,oe.width,oe.height):r.renderbufferStorage(r.RENDERBUFFER,bt,oe.width,oe.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function me(fe,oe){if(oe&&oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,fe),!(oe.depthTexture&&oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(oe.depthTexture).__webglTexture||oe.depthTexture.image.width!==oe.width||oe.depthTexture.image.height!==oe.height)&&(oe.depthTexture.image.width=oe.width,oe.depthTexture.image.height=oe.height,oe.depthTexture.needsUpdate=!0),a(oe.depthTexture,0);const Re=n.get(oe.depthTexture).__webglTexture,Le=je(oe);if(oe.depthTexture.format===qh)vt(oe)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Re,0,Le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Re,0);else if(oe.depthTexture.format===nd)vt(oe)?l.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Re,0,Le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function _e(fe){const oe=n.get(fe),Oe=fe.isWebGLCubeRenderTarget===!0;if(oe.__boundDepthTexture!==fe.depthTexture){const Re=fe.depthTexture;if(oe.__depthDisposeCallback&&oe.__depthDisposeCallback(),Re){const Le=()=>{delete oe.__boundDepthTexture,delete oe.__depthDisposeCallback,Re.removeEventListener("dispose",Le)};Re.addEventListener("dispose",Le),oe.__depthDisposeCallback=Le}oe.__boundDepthTexture=Re}if(fe.depthTexture&&!oe.__autoAllocateDepthBuffer){if(Oe)throw new Error("target.depthTexture not supported in Cube render targets");me(oe.__webglFramebuffer,fe)}else if(Oe){oe.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)if(t.bindFramebuffer(r.FRAMEBUFFER,oe.__webglFramebuffer[Re]),oe.__webglDepthbuffer[Re]===void 0)oe.__webglDepthbuffer[Re]=r.createRenderbuffer(),se(oe.__webglDepthbuffer[Re],fe,!1);else{const Le=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,ot=oe.__webglDepthbuffer[Re];r.bindRenderbuffer(r.RENDERBUFFER,ot),r.framebufferRenderbuffer(r.FRAMEBUFFER,Le,r.RENDERBUFFER,ot)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,oe.__webglFramebuffer),oe.__webglDepthbuffer===void 0)oe.__webglDepthbuffer=r.createRenderbuffer(),se(oe.__webglDepthbuffer,fe,!1);else{const Re=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Le=oe.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Le),r.framebufferRenderbuffer(r.FRAMEBUFFER,Re,r.RENDERBUFFER,Le)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function Ae(fe,oe,Oe){const Re=n.get(fe);oe!==void 0&&$(Re.__webglFramebuffer,fe,fe.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Oe!==void 0&&_e(fe)}function _t(fe){const oe=fe.texture,Oe=n.get(fe),Re=n.get(oe);fe.addEventListener("dispose",G);const Le=fe.textures,ot=fe.isWebGLCubeRenderTarget===!0,et=Le.length>1;if(et||(Re.__webglTexture===void 0&&(Re.__webglTexture=r.createTexture()),Re.__version=oe.version,o.memory.textures++),ot){Oe.__webglFramebuffer=[];for(let Ye=0;Ye<6;Ye++)if(oe.mipmaps&&oe.mipmaps.length>0){Oe.__webglFramebuffer[Ye]=[];for(let bt=0;bt<oe.mipmaps.length;bt++)Oe.__webglFramebuffer[Ye][bt]=r.createFramebuffer()}else Oe.__webglFramebuffer[Ye]=r.createFramebuffer()}else{if(oe.mipmaps&&oe.mipmaps.length>0){Oe.__webglFramebuffer=[];for(let Ye=0;Ye<oe.mipmaps.length;Ye++)Oe.__webglFramebuffer[Ye]=r.createFramebuffer()}else Oe.__webglFramebuffer=r.createFramebuffer();if(et)for(let Ye=0,bt=Le.length;Ye<bt;Ye++){const ct=n.get(Le[Ye]);ct.__webglTexture===void 0&&(ct.__webglTexture=r.createTexture(),o.memory.textures++)}if(fe.samples>0&&vt(fe)===!1){Oe.__webglMultisampledFramebuffer=r.createFramebuffer(),Oe.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Oe.__webglMultisampledFramebuffer);for(let Ye=0;Ye<Le.length;Ye++){const bt=Le[Ye];Oe.__webglColorRenderbuffer[Ye]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Oe.__webglColorRenderbuffer[Ye]);const ct=s.convert(bt.format,bt.colorSpace),re=s.convert(bt.type),j=D(bt.internalFormat,ct,re,bt.colorSpace,fe.isXRRenderTarget===!0),q=je(fe);r.renderbufferStorageMultisample(r.RENDERBUFFER,q,j,fe.width,fe.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ye,r.RENDERBUFFER,Oe.__webglColorRenderbuffer[Ye])}r.bindRenderbuffer(r.RENDERBUFFER,null),fe.depthBuffer&&(Oe.__webglDepthRenderbuffer=r.createRenderbuffer(),se(Oe.__webglDepthRenderbuffer,fe,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(ot){t.bindTexture(r.TEXTURE_CUBE_MAP,Re.__webglTexture),v(r.TEXTURE_CUBE_MAP,oe);for(let Ye=0;Ye<6;Ye++)if(oe.mipmaps&&oe.mipmaps.length>0)for(let bt=0;bt<oe.mipmaps.length;bt++)$(Oe.__webglFramebuffer[Ye][bt],fe,oe,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,bt);else $(Oe.__webglFramebuffer[Ye],fe,oe,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0);I(oe)&&C(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(et){for(let Ye=0,bt=Le.length;Ye<bt;Ye++){const ct=Le[Ye],re=n.get(ct);t.bindTexture(r.TEXTURE_2D,re.__webglTexture),v(r.TEXTURE_2D,ct),$(Oe.__webglFramebuffer,fe,ct,r.COLOR_ATTACHMENT0+Ye,r.TEXTURE_2D,0),I(ct)&&C(r.TEXTURE_2D)}t.unbindTexture()}else{let Ye=r.TEXTURE_2D;if((fe.isWebGL3DRenderTarget||fe.isWebGLArrayRenderTarget)&&(Ye=fe.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Ye,Re.__webglTexture),v(Ye,oe),oe.mipmaps&&oe.mipmaps.length>0)for(let bt=0;bt<oe.mipmaps.length;bt++)$(Oe.__webglFramebuffer[bt],fe,oe,r.COLOR_ATTACHMENT0,Ye,bt);else $(Oe.__webglFramebuffer,fe,oe,r.COLOR_ATTACHMENT0,Ye,0);I(oe)&&C(Ye),t.unbindTexture()}fe.depthBuffer&&_e(fe)}function Ze(fe){const oe=fe.textures;for(let Oe=0,Re=oe.length;Oe<Re;Oe++){const Le=oe[Oe];if(I(Le)){const ot=fe.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,et=n.get(Le).__webglTexture;t.bindTexture(ot,et),C(ot),t.unbindTexture()}}}const Pe=[],ge=[];function Ge(fe){if(fe.samples>0){if(vt(fe)===!1){const oe=fe.textures,Oe=fe.width,Re=fe.height;let Le=r.COLOR_BUFFER_BIT;const ot=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,et=n.get(fe),Ye=oe.length>1;if(Ye)for(let bt=0;bt<oe.length;bt++)t.bindFramebuffer(r.FRAMEBUFFER,et.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+bt,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,et.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+bt,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let bt=0;bt<oe.length;bt++){if(fe.resolveDepthBuffer&&(fe.depthBuffer&&(Le|=r.DEPTH_BUFFER_BIT),fe.stencilBuffer&&fe.resolveStencilBuffer&&(Le|=r.STENCIL_BUFFER_BIT)),Ye){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,et.__webglColorRenderbuffer[bt]);const ct=n.get(oe[bt]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ct,0)}r.blitFramebuffer(0,0,Oe,Re,0,0,Oe,Re,Le,r.NEAREST),c===!0&&(Pe.length=0,ge.length=0,Pe.push(r.COLOR_ATTACHMENT0+bt),fe.depthBuffer&&fe.resolveDepthBuffer===!1&&(Pe.push(ot),ge.push(ot),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,ge)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Pe))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Ye)for(let bt=0;bt<oe.length;bt++){t.bindFramebuffer(r.FRAMEBUFFER,et.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+bt,r.RENDERBUFFER,et.__webglColorRenderbuffer[bt]);const ct=n.get(oe[bt]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,et.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+bt,r.TEXTURE_2D,ct,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(fe.depthBuffer&&fe.resolveDepthBuffer===!1&&c){const oe=fe.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[oe])}}}function je(fe){return Math.min(i.maxSamples,fe.samples)}function vt(fe){const oe=n.get(fe);return fe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&oe.__useRenderToTexture!==!1}function He(fe){const oe=o.render.frame;h.get(fe)!==oe&&(h.set(fe,oe),fe.update())}function nt(fe,oe){const Oe=fe.colorSpace,Re=fe.format,Le=fe.type;return fe.isCompressedTexture===!0||fe.isVideoTexture===!0||Oe!==Qu&&Oe!==Lu&&(yr.getTransfer(Oe)===Fr?(Re!==Ps||Le!==Ka)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Oe)),oe}function Pt(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement?(d.width=fe.naturalWidth||fe.width,d.height=fe.naturalHeight||fe.height):typeof VideoFrame<"u"&&fe instanceof VideoFrame?(d.width=fe.displayWidth,d.height=fe.displayHeight):(d.width=fe.width,d.height=fe.height),d}this.allocateTextureUnit=K,this.resetTextureUnits=V,this.setTexture2D=a,this.setTexture2DArray=p,this.setTexture3D=M,this.setTextureCube=R,this.rebindTextures=Ae,this.setupRenderTarget=_t,this.updateRenderTargetMipmap=Ze,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=$,this.useMultisampledRTT=vt}function c5(r,e){function t(n,i=Lu){let s;const o=yr.getTransfer(i);if(n===Ka)return r.UNSIGNED_BYTE;if(n===Ax)return r.UNSIGNED_SHORT_4_4_4_4;if(n===Tx)return r.UNSIGNED_SHORT_5_5_5_1;if(n===hR)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===cR)return r.BYTE;if(n===fR)return r.SHORT;if(n===M0)return r.UNSIGNED_SHORT;if(n===bx)return r.INT;if(n===Xu)return r.UNSIGNED_INT;if(n===_o)return r.FLOAT;if(n===U0)return r.HALF_FLOAT;if(n===dR)return r.ALPHA;if(n===pR)return r.RGB;if(n===Ps)return r.RGBA;if(n===mR)return r.LUMINANCE;if(n===gR)return r.LUMINANCE_ALPHA;if(n===qh)return r.DEPTH_COMPONENT;if(n===nd)return r.DEPTH_STENCIL;if(n===Rx)return r.RED;if(n===Fy)return r.RED_INTEGER;if(n===yR)return r.RG;if(n===Cx)return r.RG_INTEGER;if(n===Ix)return r.RGBA_INTEGER;if(n===Ig||n===Ng||n===Pg||n===Lg)if(o===Fr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Ig)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ng)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Pg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Lg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Ig)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ng)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Pg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Lg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===h1||n===d1||n===p1||n===m1)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===h1)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===d1)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===p1)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===m1)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===g1||n===y1||n===v1)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===g1||n===y1)return o===Fr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===v1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===w1||n===_1||n===x1||n===S1||n===M1||n===E1||n===b1||n===A1||n===T1||n===R1||n===C1||n===I1||n===N1||n===P1)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===w1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===_1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===x1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===S1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===M1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===E1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===b1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===A1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===T1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===R1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===C1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===I1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===N1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===P1)return o===Fr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===kg||n===L1||n===k1)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===kg)return o===Fr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===L1)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===k1)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===vR||n===O1||n===D1||n===B1)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===kg)return s.COMPRESSED_RED_RGTC1_EXT;if(n===O1)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===D1)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===B1)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===td?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}class f5 extends gi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class r0 extends pr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const hie={type:"move"};class GE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new r0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new r0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new r0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const l=this._targetRay,c=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){o=!0;for(const P of e.hand.values()){const I=t.getJointPose(P,n),C=this._getHandJoint(d,P);I!==null&&(C.matrix.fromArray(I.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,C.jointRadius=I.radius),C.visible=I!==null}const h=d.joints["index-finger-tip"],y=d.joints["thumb-tip"],_=h.position.distanceTo(y.position),x=.02,A=.005;d.inputState.pinching&&_>x+A?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&_<=x-A&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(hie)))}return l!==null&&(l.visible=i!==null),c!==null&&(c.visible=s!==null),d!==null&&(d.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new r0;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const die=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,pie=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class mie{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new ui,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new jo({vertexShader:die,fragmentShader:pie,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Pi(new F0(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gie extends kl{constructor(e,t){super();const n=this;let i=null,s=1,o=null,l="local-floor",c=1,d=null,h=null,y=null,_=null,x=null,A=null;const P=new mie,I=t.getContextAttributes();let C=null,D=null;const k=[],F=[],Q=new Mt;let G=null;const Y=new gi;Y.layers.enable(1),Y.viewport=new fr;const ee=new gi;ee.layers.enable(2),ee.viewport=new fr;const te=[Y,ee],U=new f5;U.layers.enable(1),U.layers.enable(2);let V=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(W){let $=k[W];return $===void 0&&($=new GE,k[W]=$),$.getTargetRaySpace()},this.getControllerGrip=function(W){let $=k[W];return $===void 0&&($=new GE,k[W]=$),$.getGripSpace()},this.getHand=function(W){let $=k[W];return $===void 0&&($=new GE,k[W]=$),$.getHandSpace()};function E(W){const $=F.indexOf(W.inputSource);if($===-1)return;const se=k[$];se!==void 0&&(se.update(W.inputSource,W.frame,d||o),se.dispatchEvent({type:W.type,data:W.inputSource}))}function a(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",a),i.removeEventListener("inputsourceschange",p);for(let W=0;W<k.length;W++){const $=F[W];$!==null&&(F[W]=null,k[W].disconnect($))}V=null,K=null,P.reset(),e.setRenderTarget(C),x=null,_=null,y=null,i=null,D=null,S.stop(),n.isPresenting=!1,e.setPixelRatio(G),e.setSize(Q.width,Q.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(W){s=W,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(W){l=W,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||o},this.setReferenceSpace=function(W){d=W},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return y},this.getFrame=function(){return A},this.getSession=function(){return i},this.setSession=async function(W){if(i=W,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",a),i.addEventListener("inputsourceschange",p),I.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(Q),i.renderState.layers===void 0){const $={antialias:I.antialias,alpha:!0,depth:I.depth,stencil:I.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(i,t,$),i.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),D=new Ya(x.framebufferWidth,x.framebufferHeight,{format:Ps,type:Ka,colorSpace:e.outputColorSpace,stencilBuffer:I.stencil})}else{let $=null,se=null,me=null;I.depth&&(me=I.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,$=I.stencil?nd:qh,se=I.stencil?td:Xu);const _e={colorFormat:t.RGBA8,depthFormat:me,scaleFactor:s};y=new XRWebGLBinding(i,t),_=y.createProjectionLayer(_e),i.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),D=new Ya(_.textureWidth,_.textureHeight,{format:Ps,type:Ka,depthTexture:new TR(_.textureWidth,_.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:I.stencil,colorSpace:e.outputColorSpace,samples:I.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(c),d=null,o=await i.requestReferenceSpace(l),S.setContext(i),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return P.getDepthTexture()};function p(W){for(let $=0;$<W.removed.length;$++){const se=W.removed[$],me=F.indexOf(se);me>=0&&(F[me]=null,k[me].disconnect(se))}for(let $=0;$<W.added.length;$++){const se=W.added[$];let me=F.indexOf(se);if(me===-1){for(let Ae=0;Ae<k.length;Ae++)if(Ae>=F.length){F.push(se),me=Ae;break}else if(F[Ae]===null){F[Ae]=se,me=Ae;break}if(me===-1)break}const _e=k[me];_e&&_e.connect(se)}}const M=new ve,R=new ve;function T(W,$,se){M.setFromMatrixPosition($.matrixWorld),R.setFromMatrixPosition(se.matrixWorld);const me=M.distanceTo(R),_e=$.projectionMatrix.elements,Ae=se.projectionMatrix.elements,_t=_e[14]/(_e[10]-1),Ze=_e[14]/(_e[10]+1),Pe=(_e[9]+1)/_e[5],ge=(_e[9]-1)/_e[5],Ge=(_e[8]-1)/_e[0],je=(Ae[8]+1)/Ae[0],vt=_t*Ge,He=_t*je,nt=me/(-Ge+je),Pt=nt*-Ge;if($.matrixWorld.decompose(W.position,W.quaternion,W.scale),W.translateX(Pt),W.translateZ(nt),W.matrixWorld.compose(W.position,W.quaternion,W.scale),W.matrixWorldInverse.copy(W.matrixWorld).invert(),_e[10]===-1)W.projectionMatrix.copy($.projectionMatrix),W.projectionMatrixInverse.copy($.projectionMatrixInverse);else{const fe=_t+nt,oe=Ze+nt,Oe=vt-Pt,Re=He+(me-Pt),Le=Pe*Ze/oe*fe,ot=ge*Ze/oe*fe;W.projectionMatrix.makePerspective(Oe,Re,Le,ot,fe,oe),W.projectionMatrixInverse.copy(W.projectionMatrix).invert()}}function L(W,$){$===null?W.matrixWorld.copy(W.matrix):W.matrixWorld.multiplyMatrices($.matrixWorld,W.matrix),W.matrixWorldInverse.copy(W.matrixWorld).invert()}this.updateCamera=function(W){if(i===null)return;let $=W.near,se=W.far;P.texture!==null&&(P.depthNear>0&&($=P.depthNear),P.depthFar>0&&(se=P.depthFar)),U.near=ee.near=Y.near=$,U.far=ee.far=Y.far=se,(V!==U.near||K!==U.far)&&(i.updateRenderState({depthNear:U.near,depthFar:U.far}),V=U.near,K=U.far);const me=W.parent,_e=U.cameras;L(U,me);for(let Ae=0;Ae<_e.length;Ae++)L(_e[Ae],me);_e.length===2?T(U,Y,ee):U.projectionMatrix.copy(Y.projectionMatrix),N(W,U,me)};function N(W,$,se){se===null?W.matrix.copy($.matrixWorld):(W.matrix.copy(se.matrixWorld),W.matrix.invert(),W.matrix.multiply($.matrixWorld)),W.matrix.decompose(W.position,W.quaternion,W.scale),W.updateMatrixWorld(!0),W.projectionMatrix.copy($.projectionMatrix),W.projectionMatrixInverse.copy($.projectionMatrixInverse),W.isPerspectiveCamera&&(W.fov=E0*2*Math.atan(1/W.projectionMatrix.elements[5]),W.zoom=1)}this.getCamera=function(){return U},this.getFoveation=function(){if(!(_===null&&x===null))return c},this.setFoveation=function(W){c=W,_!==null&&(_.fixedFoveation=W),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=W)},this.hasDepthSensing=function(){return P.texture!==null},this.getDepthSensingMesh=function(){return P.getMesh(U)};let v=null;function u(W,$){if(h=$.getViewerPose(d||o),A=$,h!==null){const se=h.views;x!==null&&(e.setRenderTargetFramebuffer(D,x.framebuffer),e.setRenderTarget(D));let me=!1;se.length!==U.cameras.length&&(U.cameras.length=0,me=!0);for(let Ae=0;Ae<se.length;Ae++){const _t=se[Ae];let Ze=null;if(x!==null)Ze=x.getViewport(_t);else{const ge=y.getViewSubImage(_,_t);Ze=ge.viewport,Ae===0&&(e.setRenderTargetTextures(D,ge.colorTexture,_.ignoreDepthValues?void 0:ge.depthStencilTexture),e.setRenderTarget(D))}let Pe=te[Ae];Pe===void 0&&(Pe=new gi,Pe.layers.enable(Ae),Pe.viewport=new fr,te[Ae]=Pe),Pe.matrix.fromArray(_t.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(_t.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),Ae===0&&(U.matrix.copy(Pe.matrix),U.matrix.decompose(U.position,U.quaternion,U.scale)),me===!0&&U.cameras.push(Pe)}const _e=i.enabledFeatures;if(_e&&_e.includes("depth-sensing")){const Ae=y.getDepthInformation(se[0]);Ae&&Ae.isValid&&Ae.texture&&P.init(e,Ae,i.renderState)}}for(let se=0;se<k.length;se++){const me=F[se],_e=k[se];me!==null&&_e!==void 0&&_e.update(me,$,d||o)}v&&v(W,$),$.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:$}),A=null}const S=new s5;S.setAnimationLoop(u),this.setAnimationLoop=function(W){v=W},this.dispose=function(){}}}const uh=new Go,yie=new Ln;function vie(r,e){function t(I,C){I.matrixAutoUpdate===!0&&I.updateMatrix(),C.value.copy(I.matrix)}function n(I,C){C.color.getRGB(I.fogColor.value,t5(r)),C.isFog?(I.fogNear.value=C.near,I.fogFar.value=C.far):C.isFogExp2&&(I.fogDensity.value=C.density)}function i(I,C,D,k,F){C.isMeshBasicMaterial||C.isMeshLambertMaterial?s(I,C):C.isMeshToonMaterial?(s(I,C),y(I,C)):C.isMeshPhongMaterial?(s(I,C),h(I,C)):C.isMeshStandardMaterial?(s(I,C),_(I,C),C.isMeshPhysicalMaterial&&x(I,C,F)):C.isMeshMatcapMaterial?(s(I,C),A(I,C)):C.isMeshDepthMaterial?s(I,C):C.isMeshDistanceMaterial?(s(I,C),P(I,C)):C.isMeshNormalMaterial?s(I,C):C.isLineBasicMaterial?(o(I,C),C.isLineDashedMaterial&&l(I,C)):C.isPointsMaterial?c(I,C,D,k):C.isSpriteMaterial?d(I,C):C.isShadowMaterial?(I.color.value.copy(C.color),I.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}function s(I,C){I.opacity.value=C.opacity,C.color&&I.diffuse.value.copy(C.color),C.emissive&&I.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity),C.map&&(I.map.value=C.map,t(C.map,I.mapTransform)),C.alphaMap&&(I.alphaMap.value=C.alphaMap,t(C.alphaMap,I.alphaMapTransform)),C.bumpMap&&(I.bumpMap.value=C.bumpMap,t(C.bumpMap,I.bumpMapTransform),I.bumpScale.value=C.bumpScale,C.side===Ls&&(I.bumpScale.value*=-1)),C.normalMap&&(I.normalMap.value=C.normalMap,t(C.normalMap,I.normalMapTransform),I.normalScale.value.copy(C.normalScale),C.side===Ls&&I.normalScale.value.negate()),C.displacementMap&&(I.displacementMap.value=C.displacementMap,t(C.displacementMap,I.displacementMapTransform),I.displacementScale.value=C.displacementScale,I.displacementBias.value=C.displacementBias),C.emissiveMap&&(I.emissiveMap.value=C.emissiveMap,t(C.emissiveMap,I.emissiveMapTransform)),C.specularMap&&(I.specularMap.value=C.specularMap,t(C.specularMap,I.specularMapTransform)),C.alphaTest>0&&(I.alphaTest.value=C.alphaTest);const D=e.get(C),k=D.envMap,F=D.envMapRotation;k&&(I.envMap.value=k,uh.copy(F),uh.x*=-1,uh.y*=-1,uh.z*=-1,k.isCubeTexture&&k.isRenderTargetTexture===!1&&(uh.y*=-1,uh.z*=-1),I.envMapRotation.value.setFromMatrix4(yie.makeRotationFromEuler(uh)),I.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,I.reflectivity.value=C.reflectivity,I.ior.value=C.ior,I.refractionRatio.value=C.refractionRatio),C.lightMap&&(I.lightMap.value=C.lightMap,I.lightMapIntensity.value=C.lightMapIntensity,t(C.lightMap,I.lightMapTransform)),C.aoMap&&(I.aoMap.value=C.aoMap,I.aoMapIntensity.value=C.aoMapIntensity,t(C.aoMap,I.aoMapTransform))}function o(I,C){I.diffuse.value.copy(C.color),I.opacity.value=C.opacity,C.map&&(I.map.value=C.map,t(C.map,I.mapTransform))}function l(I,C){I.dashSize.value=C.dashSize,I.totalSize.value=C.dashSize+C.gapSize,I.scale.value=C.scale}function c(I,C,D,k){I.diffuse.value.copy(C.color),I.opacity.value=C.opacity,I.size.value=C.size*D,I.scale.value=k*.5,C.map&&(I.map.value=C.map,t(C.map,I.uvTransform)),C.alphaMap&&(I.alphaMap.value=C.alphaMap,t(C.alphaMap,I.alphaMapTransform)),C.alphaTest>0&&(I.alphaTest.value=C.alphaTest)}function d(I,C){I.diffuse.value.copy(C.color),I.opacity.value=C.opacity,I.rotation.value=C.rotation,C.map&&(I.map.value=C.map,t(C.map,I.mapTransform)),C.alphaMap&&(I.alphaMap.value=C.alphaMap,t(C.alphaMap,I.alphaMapTransform)),C.alphaTest>0&&(I.alphaTest.value=C.alphaTest)}function h(I,C){I.specular.value.copy(C.specular),I.shininess.value=Math.max(C.shininess,1e-4)}function y(I,C){C.gradientMap&&(I.gradientMap.value=C.gradientMap)}function _(I,C){I.metalness.value=C.metalness,C.metalnessMap&&(I.metalnessMap.value=C.metalnessMap,t(C.metalnessMap,I.metalnessMapTransform)),I.roughness.value=C.roughness,C.roughnessMap&&(I.roughnessMap.value=C.roughnessMap,t(C.roughnessMap,I.roughnessMapTransform)),C.envMap&&(I.envMapIntensity.value=C.envMapIntensity)}function x(I,C,D){I.ior.value=C.ior,C.sheen>0&&(I.sheenColor.value.copy(C.sheenColor).multiplyScalar(C.sheen),I.sheenRoughness.value=C.sheenRoughness,C.sheenColorMap&&(I.sheenColorMap.value=C.sheenColorMap,t(C.sheenColorMap,I.sheenColorMapTransform)),C.sheenRoughnessMap&&(I.sheenRoughnessMap.value=C.sheenRoughnessMap,t(C.sheenRoughnessMap,I.sheenRoughnessMapTransform))),C.clearcoat>0&&(I.clearcoat.value=C.clearcoat,I.clearcoatRoughness.value=C.clearcoatRoughness,C.clearcoatMap&&(I.clearcoatMap.value=C.clearcoatMap,t(C.clearcoatMap,I.clearcoatMapTransform)),C.clearcoatRoughnessMap&&(I.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap,t(C.clearcoatRoughnessMap,I.clearcoatRoughnessMapTransform)),C.clearcoatNormalMap&&(I.clearcoatNormalMap.value=C.clearcoatNormalMap,t(C.clearcoatNormalMap,I.clearcoatNormalMapTransform),I.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),C.side===Ls&&I.clearcoatNormalScale.value.negate())),C.dispersion>0&&(I.dispersion.value=C.dispersion),C.iridescence>0&&(I.iridescence.value=C.iridescence,I.iridescenceIOR.value=C.iridescenceIOR,I.iridescenceThicknessMinimum.value=C.iridescenceThicknessRange[0],I.iridescenceThicknessMaximum.value=C.iridescenceThicknessRange[1],C.iridescenceMap&&(I.iridescenceMap.value=C.iridescenceMap,t(C.iridescenceMap,I.iridescenceMapTransform)),C.iridescenceThicknessMap&&(I.iridescenceThicknessMap.value=C.iridescenceThicknessMap,t(C.iridescenceThicknessMap,I.iridescenceThicknessMapTransform))),C.transmission>0&&(I.transmission.value=C.transmission,I.transmissionSamplerMap.value=D.texture,I.transmissionSamplerSize.value.set(D.width,D.height),C.transmissionMap&&(I.transmissionMap.value=C.transmissionMap,t(C.transmissionMap,I.transmissionMapTransform)),I.thickness.value=C.thickness,C.thicknessMap&&(I.thicknessMap.value=C.thicknessMap,t(C.thicknessMap,I.thicknessMapTransform)),I.attenuationDistance.value=C.attenuationDistance,I.attenuationColor.value.copy(C.attenuationColor)),C.anisotropy>0&&(I.anisotropyVector.value.set(C.anisotropy*Math.cos(C.anisotropyRotation),C.anisotropy*Math.sin(C.anisotropyRotation)),C.anisotropyMap&&(I.anisotropyMap.value=C.anisotropyMap,t(C.anisotropyMap,I.anisotropyMapTransform))),I.specularIntensity.value=C.specularIntensity,I.specularColor.value.copy(C.specularColor),C.specularColorMap&&(I.specularColorMap.value=C.specularColorMap,t(C.specularColorMap,I.specularColorMapTransform)),C.specularIntensityMap&&(I.specularIntensityMap.value=C.specularIntensityMap,t(C.specularIntensityMap,I.specularIntensityMapTransform))}function A(I,C){C.matcap&&(I.matcap.value=C.matcap)}function P(I,C){const D=e.get(C).light;I.referencePosition.value.setFromMatrixPosition(D.matrixWorld),I.nearDistance.value=D.shadow.camera.near,I.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function wie(r,e,t,n){let i={},s={},o=[];const l=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function c(D,k){const F=k.program;n.uniformBlockBinding(D,F)}function d(D,k){let F=i[D.id];F===void 0&&(A(D),F=h(D),i[D.id]=F,D.addEventListener("dispose",I));const Q=k.program;n.updateUBOMapping(D,Q);const G=e.render.frame;s[D.id]!==G&&(_(D),s[D.id]=G)}function h(D){const k=y();D.__bindingPointIndex=k;const F=r.createBuffer(),Q=D.__size,G=D.usage;return r.bindBuffer(r.UNIFORM_BUFFER,F),r.bufferData(r.UNIFORM_BUFFER,Q,G),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,k,F),F}function y(){for(let D=0;D<l;D++)if(o.indexOf(D)===-1)return o.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(D){const k=i[D.id],F=D.uniforms,Q=D.__cache;r.bindBuffer(r.UNIFORM_BUFFER,k);for(let G=0,Y=F.length;G<Y;G++){const ee=Array.isArray(F[G])?F[G]:[F[G]];for(let te=0,U=ee.length;te<U;te++){const V=ee[te];if(x(V,G,te,Q)===!0){const K=V.__offset,E=Array.isArray(V.value)?V.value:[V.value];let a=0;for(let p=0;p<E.length;p++){const M=E[p],R=P(M);typeof M=="number"||typeof M=="boolean"?(V.__data[0]=M,r.bufferSubData(r.UNIFORM_BUFFER,K+a,V.__data)):M.isMatrix3?(V.__data[0]=M.elements[0],V.__data[1]=M.elements[1],V.__data[2]=M.elements[2],V.__data[3]=0,V.__data[4]=M.elements[3],V.__data[5]=M.elements[4],V.__data[6]=M.elements[5],V.__data[7]=0,V.__data[8]=M.elements[6],V.__data[9]=M.elements[7],V.__data[10]=M.elements[8],V.__data[11]=0):(M.toArray(V.__data,a),a+=R.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,K,V.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function x(D,k,F,Q){const G=D.value,Y=k+"_"+F;if(Q[Y]===void 0)return typeof G=="number"||typeof G=="boolean"?Q[Y]=G:Q[Y]=G.clone(),!0;{const ee=Q[Y];if(typeof G=="number"||typeof G=="boolean"){if(ee!==G)return Q[Y]=G,!0}else if(ee.equals(G)===!1)return ee.copy(G),!0}return!1}function A(D){const k=D.uniforms;let F=0;const Q=16;for(let Y=0,ee=k.length;Y<ee;Y++){const te=Array.isArray(k[Y])?k[Y]:[k[Y]];for(let U=0,V=te.length;U<V;U++){const K=te[U],E=Array.isArray(K.value)?K.value:[K.value];for(let a=0,p=E.length;a<p;a++){const M=E[a],R=P(M),T=F%Q,L=T%R.boundary,N=T+L;F+=L,N!==0&&Q-N<R.storage&&(F+=Q-N),K.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),K.__offset=F,F+=R.storage}}}const G=F%Q;return G>0&&(F+=Q-G),D.__size=F,D.__cache={},this}function P(D){const k={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(k.boundary=4,k.storage=4):D.isVector2?(k.boundary=8,k.storage=8):D.isVector3||D.isColor?(k.boundary=16,k.storage=12):D.isVector4?(k.boundary=16,k.storage=16):D.isMatrix3?(k.boundary=48,k.storage=48):D.isMatrix4?(k.boundary=64,k.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),k}function I(D){const k=D.target;k.removeEventListener("dispose",I);const F=o.indexOf(k.__bindingPointIndex);o.splice(F,1),r.deleteBuffer(i[k.id]),delete i[k.id],delete s[k.id]}function C(){for(const D in i)r.deleteBuffer(i[D]);o=[],i={},s={}}return{bind:c,update:d,dispose:C}}class h5{constructor(e={}){const{canvas:t=Z6(),context:n=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:y=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=o;const x=new Uint32Array(4),A=new Int32Array(4);let P=null,I=null;const C=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=aa,this.toneMapping=Cl,this.toneMappingExposure=1;const k=this;let F=!1,Q=0,G=0,Y=null,ee=-1,te=null;const U=new fr,V=new fr;let K=null;const E=new en(0);let a=0,p=t.width,M=t.height,R=1,T=null,L=null;const N=new fr(0,0,p,M),v=new fr(0,0,p,M);let u=!1;const S=new Hy;let W=!1,$=!1;const se=new Ln,me=new Ln,_e=new ve,Ae=new fr,_t={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ze=!1;function Pe(){return Y===null?R:1}let ge=n;function Ge(pe,De){return t.getContext(pe,De)}try{const pe={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${By}`),t.addEventListener("webglcontextlost",Ee,!1),t.addEventListener("webglcontextrestored",qe,!1),t.addEventListener("webglcontextcreationerror",Ct,!1),ge===null){const De="webgl2";if(ge=Ge(De,pe),ge===null)throw Ge(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(pe){throw console.error("THREE.WebGLRenderer: "+pe.message),pe}let je,vt,He,nt,Pt,fe,oe,Oe,Re,Le,ot,et,Ye,bt,ct,re,j,q,ue,we,ye,le,Xe,de;function Ce(){je=new bne(ge),je.init(),le=new c5(ge,je),vt=new wne(ge,je,e,le),He=new sie(ge),vt.reverseDepthBuffer&&He.buffers.depth.setReversed(!0),nt=new Rne(ge),Pt=new qre,fe=new fie(ge,je,He,Pt,vt,le,nt),oe=new xne(k),Oe=new Ene(k),Re=new OJ(ge),Xe=new yne(ge,Re),Le=new Ane(ge,Re,nt,Xe),ot=new Ine(ge,Le,Re,nt),ue=new Cne(ge,vt,fe),re=new _ne(Pt),et=new jre(k,oe,Oe,je,vt,Xe,re),Ye=new vie(k,Pt),bt=new Yre,ct=new eie(je),q=new gne(k,oe,Oe,He,ot,_,c),j=new rie(k,ot,vt),de=new wie(ge,nt,vt,He),we=new vne(ge,je,nt),ye=new Tne(ge,je,nt),nt.programs=et.programs,k.capabilities=vt,k.extensions=je,k.properties=Pt,k.renderLists=bt,k.shadowMap=j,k.state=He,k.info=nt}Ce();const Ue=new gie(k,ge);this.xr=Ue,this.getContext=function(){return ge},this.getContextAttributes=function(){return ge.getContextAttributes()},this.forceContextLoss=function(){const pe=je.get("WEBGL_lose_context");pe&&pe.loseContext()},this.forceContextRestore=function(){const pe=je.get("WEBGL_lose_context");pe&&pe.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(pe){pe!==void 0&&(R=pe,this.setSize(p,M,!1))},this.getSize=function(pe){return pe.set(p,M)},this.setSize=function(pe,De,$e=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}p=pe,M=De,t.width=Math.floor(pe*R),t.height=Math.floor(De*R),$e===!0&&(t.style.width=pe+"px",t.style.height=De+"px"),this.setViewport(0,0,pe,De)},this.getDrawingBufferSize=function(pe){return pe.set(p*R,M*R).floor()},this.setDrawingBufferSize=function(pe,De,$e){p=pe,M=De,R=$e,t.width=Math.floor(pe*$e),t.height=Math.floor(De*$e),this.setViewport(0,0,pe,De)},this.getCurrentViewport=function(pe){return pe.copy(U)},this.getViewport=function(pe){return pe.copy(N)},this.setViewport=function(pe,De,$e,Qe){pe.isVector4?N.set(pe.x,pe.y,pe.z,pe.w):N.set(pe,De,$e,Qe),He.viewport(U.copy(N).multiplyScalar(R).round())},this.getScissor=function(pe){return pe.copy(v)},this.setScissor=function(pe,De,$e,Qe){pe.isVector4?v.set(pe.x,pe.y,pe.z,pe.w):v.set(pe,De,$e,Qe),He.scissor(V.copy(v).multiplyScalar(R).round())},this.getScissorTest=function(){return u},this.setScissorTest=function(pe){He.setScissorTest(u=pe)},this.setOpaqueSort=function(pe){T=pe},this.setTransparentSort=function(pe){L=pe},this.getClearColor=function(pe){return pe.copy(q.getClearColor())},this.setClearColor=function(){q.setClearColor.apply(q,arguments)},this.getClearAlpha=function(){return q.getClearAlpha()},this.setClearAlpha=function(){q.setClearAlpha.apply(q,arguments)},this.clear=function(pe=!0,De=!0,$e=!0){let Qe=0;if(pe){let Be=!1;if(Y!==null){const Tt=Y.texture.format;Be=Tt===Ix||Tt===Cx||Tt===Fy}if(Be){const Tt=Y.texture.type,zt=Tt===Ka||Tt===Xu||Tt===M0||Tt===td||Tt===Ax||Tt===Tx,At=q.getClearColor(),Ht=q.getClearAlpha(),rn=At.r,on=At.g,Kt=At.b;zt?(x[0]=rn,x[1]=on,x[2]=Kt,x[3]=Ht,ge.clearBufferuiv(ge.COLOR,0,x)):(A[0]=rn,A[1]=on,A[2]=Kt,A[3]=Ht,ge.clearBufferiv(ge.COLOR,0,A))}else Qe|=ge.COLOR_BUFFER_BIT}De&&(Qe|=ge.DEPTH_BUFFER_BIT,ge.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),$e&&(Qe|=ge.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ge.clear(Qe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ee,!1),t.removeEventListener("webglcontextrestored",qe,!1),t.removeEventListener("webglcontextcreationerror",Ct,!1),bt.dispose(),ct.dispose(),Pt.dispose(),oe.dispose(),Oe.dispose(),ot.dispose(),Xe.dispose(),de.dispose(),et.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",X),Ue.removeEventListener("sessionend",he),Ie.stop()};function Ee(pe){pe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function qe(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const pe=nt.autoReset,De=j.enabled,$e=j.autoUpdate,Qe=j.needsUpdate,Be=j.type;Ce(),nt.autoReset=pe,j.enabled=De,j.autoUpdate=$e,j.needsUpdate=Qe,j.type=Be}function Ct(pe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pe.statusMessage)}function ft(pe){const De=pe.target;De.removeEventListener("dispose",ft),yt(De)}function yt(pe){Sn(pe),Pt.remove(pe)}function Sn(pe){const De=Pt.get(pe).programs;De!==void 0&&(De.forEach(function($e){et.releaseProgram($e)}),pe.isShaderMaterial&&et.releaseShaderCache(pe))}this.renderBufferDirect=function(pe,De,$e,Qe,Be,Tt){De===null&&(De=_t);const zt=Be.isMesh&&Be.matrixWorld.determinant()<0,At=Pr(pe,De,$e,Qe,Be);He.setMaterial(Qe,zt);let Ht=$e.index,rn=1;if(Qe.wireframe===!0){if(Ht=Le.getWireframeAttribute($e),Ht===void 0)return;rn=2}const on=$e.drawRange,Kt=$e.attributes.position;let Tn=on.start*rn,Rn=(on.start+on.count)*rn;Tt!==null&&(Tn=Math.max(Tn,Tt.start*rn),Rn=Math.min(Rn,(Tt.start+Tt.count)*rn)),Ht!==null?(Tn=Math.max(Tn,0),Rn=Math.min(Rn,Ht.count)):Kt!=null&&(Tn=Math.max(Tn,0),Rn=Math.min(Rn,Kt.count));const En=Rn-Tn;if(En<0||En===1/0)return;Xe.setup(Be,Qe,At,$e,Ht);let un,$t=we;if(Ht!==null&&(un=Re.get(Ht),$t=ye,$t.setIndex(un)),Be.isMesh)Qe.wireframe===!0?(He.setLineWidth(Qe.wireframeLinewidth*Pe()),$t.setMode(ge.LINES)):$t.setMode(ge.TRIANGLES);else if(Be.isLine){let Bt=Qe.linewidth;Bt===void 0&&(Bt=1),He.setLineWidth(Bt*Pe()),Be.isLineSegments?$t.setMode(ge.LINES):Be.isLineLoop?$t.setMode(ge.LINE_LOOP):$t.setMode(ge.LINE_STRIP)}else Be.isPoints?$t.setMode(ge.POINTS):Be.isSprite&&$t.setMode(ge.TRIANGLES);if(Be.isBatchedMesh)if(Be._multiDrawInstances!==null)$t.renderMultiDrawInstances(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount,Be._multiDrawInstances);else if(je.get("WEBGL_multi_draw"))$t.renderMultiDraw(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount);else{const Bt=Be._multiDrawStarts,Mn=Be._multiDrawCounts,On=Be._multiDrawCount,Wr=Ht?Re.get(Ht).bytesPerElement:1,vi=Pt.get(Qe).currentProgram.getUniforms();for(let sr=0;sr<On;sr++)vi.setValue(ge,"_gl_DrawID",sr),$t.render(Bt[sr]/Wr,Mn[sr])}else if(Be.isInstancedMesh)$t.renderInstances(Tn,En,Be.count);else if($e.isInstancedBufferGeometry){const Bt=$e._maxInstanceCount!==void 0?$e._maxInstanceCount:1/0,Mn=Math.min($e.instanceCount,Bt);$t.renderInstances(Tn,En,Mn)}else $t.render(Tn,En)};function dt(pe,De,$e){pe.transparent===!0&&pe.side===Va&&pe.forceSinglePass===!1?(pe.side=Ls,pe.needsUpdate=!0,Dn(pe,De,$e),pe.side=Ku,pe.needsUpdate=!0,Dn(pe,De,$e),pe.side=Va):Dn(pe,De,$e)}this.compile=function(pe,De,$e=null){$e===null&&($e=pe),I=ct.get($e),I.init(De),D.push(I),$e.traverseVisible(function(Be){Be.isLight&&Be.layers.test(De.layers)&&(I.pushLight(Be),Be.castShadow&&I.pushShadow(Be))}),pe!==$e&&pe.traverseVisible(function(Be){Be.isLight&&Be.layers.test(De.layers)&&(I.pushLight(Be),Be.castShadow&&I.pushShadow(Be))}),I.setupLights();const Qe=new Set;return pe.traverse(function(Be){if(!(Be.isMesh||Be.isPoints||Be.isLine||Be.isSprite))return;const Tt=Be.material;if(Tt)if(Array.isArray(Tt))for(let zt=0;zt<Tt.length;zt++){const At=Tt[zt];dt(At,$e,Be),Qe.add(At)}else dt(Tt,$e,Be),Qe.add(Tt)}),D.pop(),I=null,Qe},this.compileAsync=function(pe,De,$e=null){const Qe=this.compile(pe,De,$e);return new Promise(Be=>{function Tt(){if(Qe.forEach(function(zt){Pt.get(zt).currentProgram.isReady()&&Qe.delete(zt)}),Qe.size===0){Be(pe);return}setTimeout(Tt,10)}je.get("KHR_parallel_shader_compile")!==null?Tt():setTimeout(Tt,10)})};let ae=null;function J(pe){ae&&ae(pe)}function X(){Ie.stop()}function he(){Ie.start()}const Ie=new s5;Ie.setAnimationLoop(J),typeof self<"u"&&Ie.setContext(self),this.setAnimationLoop=function(pe){ae=pe,Ue.setAnimationLoop(pe),pe===null?Ie.stop():Ie.start()},Ue.addEventListener("sessionstart",X),Ue.addEventListener("sessionend",he),this.render=function(pe,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;if(pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(De),De=Ue.getCamera()),pe.isScene===!0&&pe.onBeforeRender(k,pe,De,Y),I=ct.get(pe,D.length),I.init(De),D.push(I),me.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),S.setFromProjectionMatrix(me),$=this.localClippingEnabled,W=re.init(this.clippingPlanes,$),P=bt.get(pe,C.length),P.init(),C.push(P),Ue.enabled===!0&&Ue.isPresenting===!0){const Tt=k.xr.getDepthSensingMesh();Tt!==null&&Te(Tt,De,-1/0,k.sortObjects)}Te(pe,De,0,k.sortObjects),P.finish(),k.sortObjects===!0&&P.sort(T,L),Ze=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,Ze&&q.addToRenderList(P,pe),this.info.render.frame++,W===!0&&re.beginShadows();const $e=I.state.shadowsArray;j.render($e,pe,De),W===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset();const Qe=P.opaque,Be=P.transmissive;if(I.setupLights(),De.isArrayCamera){const Tt=De.cameras;if(Be.length>0)for(let zt=0,At=Tt.length;zt<At;zt++){const Ht=Tt[zt];dn(Qe,Be,pe,Ht)}Ze&&q.render(pe);for(let zt=0,At=Tt.length;zt<At;zt++){const Ht=Tt[zt];Ne(P,pe,Ht,Ht.viewport)}}else Be.length>0&&dn(Qe,Be,pe,De),Ze&&q.render(pe),Ne(P,pe,De);Y!==null&&(fe.updateMultisampleRenderTarget(Y),fe.updateRenderTargetMipmap(Y)),pe.isScene===!0&&pe.onAfterRender(k,pe,De),Xe.resetDefaultState(),ee=-1,te=null,D.pop(),D.length>0?(I=D[D.length-1],W===!0&&re.setGlobalState(k.clippingPlanes,I.state.camera)):I=null,C.pop(),C.length>0?P=C[C.length-1]:P=null};function Te(pe,De,$e,Qe){if(pe.visible===!1)return;if(pe.layers.test(De.layers)){if(pe.isGroup)$e=pe.renderOrder;else if(pe.isLOD)pe.autoUpdate===!0&&pe.update(De);else if(pe.isLight)I.pushLight(pe),pe.castShadow&&I.pushShadow(pe);else if(pe.isSprite){if(!pe.frustumCulled||S.intersectsSprite(pe)){Qe&&Ae.setFromMatrixPosition(pe.matrixWorld).applyMatrix4(me);const zt=ot.update(pe),At=pe.material;At.visible&&P.push(pe,zt,At,$e,Ae.z,null)}}else if((pe.isMesh||pe.isLine||pe.isPoints)&&(!pe.frustumCulled||S.intersectsObject(pe))){const zt=ot.update(pe),At=pe.material;if(Qe&&(pe.boundingSphere!==void 0?(pe.boundingSphere===null&&pe.computeBoundingSphere(),Ae.copy(pe.boundingSphere.center)):(zt.boundingSphere===null&&zt.computeBoundingSphere(),Ae.copy(zt.boundingSphere.center)),Ae.applyMatrix4(pe.matrixWorld).applyMatrix4(me)),Array.isArray(At)){const Ht=zt.groups;for(let rn=0,on=Ht.length;rn<on;rn++){const Kt=Ht[rn],Tn=At[Kt.materialIndex];Tn&&Tn.visible&&P.push(pe,zt,Tn,$e,Ae.z,Kt)}}else At.visible&&P.push(pe,zt,At,$e,Ae.z,null)}}const Tt=pe.children;for(let zt=0,At=Tt.length;zt<At;zt++)Te(Tt[zt],De,$e,Qe)}function Ne(pe,De,$e,Qe){const Be=pe.opaque,Tt=pe.transmissive,zt=pe.transparent;I.setupLightsView($e),W===!0&&re.setGlobalState(k.clippingPlanes,$e),Qe&&He.viewport(U.copy(Qe)),Be.length>0&&gt(Be,De,$e),Tt.length>0&&gt(Tt,De,$e),zt.length>0&&gt(zt,De,$e),He.buffers.depth.setTest(!0),He.buffers.depth.setMask(!0),He.buffers.color.setMask(!0),He.setPolygonOffset(!1)}function dn(pe,De,$e,Qe){if(($e.isScene===!0?$e.overrideMaterial:null)!==null)return;I.state.transmissionRenderTarget[Qe.id]===void 0&&(I.state.transmissionRenderTarget[Qe.id]=new Ya(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")||je.has("EXT_color_buffer_float")?U0:Ka,minFilter:El,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:yr.workingColorSpace}));const Tt=I.state.transmissionRenderTarget[Qe.id],zt=Qe.viewport||U;Tt.setSize(zt.z,zt.w);const At=k.getRenderTarget();k.setRenderTarget(Tt),k.getClearColor(E),a=k.getClearAlpha(),a<1&&k.setClearColor(16777215,.5),k.clear(),Ze&&q.render($e);const Ht=k.toneMapping;k.toneMapping=Cl;const rn=Qe.viewport;if(Qe.viewport!==void 0&&(Qe.viewport=void 0),I.setupLightsView(Qe),W===!0&&re.setGlobalState(k.clippingPlanes,Qe),gt(pe,$e,Qe),fe.updateMultisampleRenderTarget(Tt),fe.updateRenderTargetMipmap(Tt),je.has("WEBGL_multisampled_render_to_texture")===!1){let on=!1;for(let Kt=0,Tn=De.length;Kt<Tn;Kt++){const Rn=De[Kt],En=Rn.object,un=Rn.geometry,$t=Rn.material,Bt=Rn.group;if($t.side===Va&&En.layers.test(Qe.layers)){const Mn=$t.side;$t.side=Ls,$t.needsUpdate=!0,xt(En,$e,Qe,un,$t,Bt),$t.side=Mn,$t.needsUpdate=!0,on=!0}}on===!0&&(fe.updateMultisampleRenderTarget(Tt),fe.updateRenderTargetMipmap(Tt))}k.setRenderTarget(At),k.setClearColor(E,a),rn!==void 0&&(Qe.viewport=rn),k.toneMapping=Ht}function gt(pe,De,$e){const Qe=De.isScene===!0?De.overrideMaterial:null;for(let Be=0,Tt=pe.length;Be<Tt;Be++){const zt=pe[Be],At=zt.object,Ht=zt.geometry,rn=Qe===null?zt.material:Qe,on=zt.group;At.layers.test($e.layers)&&xt(At,De,$e,Ht,rn,on)}}function xt(pe,De,$e,Qe,Be,Tt){pe.onBeforeRender(k,De,$e,Qe,Be,Tt),pe.modelViewMatrix.multiplyMatrices($e.matrixWorldInverse,pe.matrixWorld),pe.normalMatrix.getNormalMatrix(pe.modelViewMatrix),Be.onBeforeRender(k,De,$e,Qe,pe,Tt),Be.transparent===!0&&Be.side===Va&&Be.forceSinglePass===!1?(Be.side=Ls,Be.needsUpdate=!0,k.renderBufferDirect($e,De,Qe,Be,pe,Tt),Be.side=Ku,Be.needsUpdate=!0,k.renderBufferDirect($e,De,Qe,Be,pe,Tt),Be.side=Va):k.renderBufferDirect($e,De,Qe,Be,pe,Tt),pe.onAfterRender(k,De,$e,Qe,Be,Tt)}function Dn(pe,De,$e){De.isScene!==!0&&(De=_t);const Qe=Pt.get(pe),Be=I.state.lights,Tt=I.state.shadowsArray,zt=Be.state.version,At=et.getParameters(pe,Be.state,Tt,De,$e),Ht=et.getProgramCacheKey(At);let rn=Qe.programs;Qe.environment=pe.isMeshStandardMaterial?De.environment:null,Qe.fog=De.fog,Qe.envMap=(pe.isMeshStandardMaterial?Oe:oe).get(pe.envMap||Qe.environment),Qe.envMapRotation=Qe.environment!==null&&pe.envMap===null?De.environmentRotation:pe.envMapRotation,rn===void 0&&(pe.addEventListener("dispose",ft),rn=new Map,Qe.programs=rn);let on=rn.get(Ht);if(on!==void 0){if(Qe.currentProgram===on&&Qe.lightsStateVersion===zt)return kt(pe,At),on}else At.uniforms=et.getUniforms(pe),pe.onBeforeCompile(At,k),on=et.acquireProgram(At,Ht),rn.set(Ht,on),Qe.uniforms=At.uniforms;const Kt=Qe.uniforms;return(!pe.isShaderMaterial&&!pe.isRawShaderMaterial||pe.clipping===!0)&&(Kt.clippingPlanes=re.uniform),kt(pe,At),Qe.needsLights=Ot(pe),Qe.lightsStateVersion=zt,Qe.needsLights&&(Kt.ambientLightColor.value=Be.state.ambient,Kt.lightProbe.value=Be.state.probe,Kt.directionalLights.value=Be.state.directional,Kt.directionalLightShadows.value=Be.state.directionalShadow,Kt.spotLights.value=Be.state.spot,Kt.spotLightShadows.value=Be.state.spotShadow,Kt.rectAreaLights.value=Be.state.rectArea,Kt.ltc_1.value=Be.state.rectAreaLTC1,Kt.ltc_2.value=Be.state.rectAreaLTC2,Kt.pointLights.value=Be.state.point,Kt.pointLightShadows.value=Be.state.pointShadow,Kt.hemisphereLights.value=Be.state.hemi,Kt.directionalShadowMap.value=Be.state.directionalShadowMap,Kt.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,Kt.spotShadowMap.value=Be.state.spotShadowMap,Kt.spotLightMatrix.value=Be.state.spotLightMatrix,Kt.spotLightMap.value=Be.state.spotLightMap,Kt.pointShadowMap.value=Be.state.pointShadowMap,Kt.pointShadowMatrix.value=Be.state.pointShadowMatrix),Qe.currentProgram=on,Qe.uniformsList=null,on}function wt(pe){if(pe.uniformsList===null){const De=pe.currentProgram.getUniforms();pe.uniformsList=A_.seqWithValue(De.seq,pe.uniforms)}return pe.uniformsList}function kt(pe,De){const $e=Pt.get(pe);$e.outputColorSpace=De.outputColorSpace,$e.batching=De.batching,$e.batchingColor=De.batchingColor,$e.instancing=De.instancing,$e.instancingColor=De.instancingColor,$e.instancingMorph=De.instancingMorph,$e.skinning=De.skinning,$e.morphTargets=De.morphTargets,$e.morphNormals=De.morphNormals,$e.morphColors=De.morphColors,$e.morphTargetsCount=De.morphTargetsCount,$e.numClippingPlanes=De.numClippingPlanes,$e.numIntersection=De.numClipIntersection,$e.vertexAlphas=De.vertexAlphas,$e.vertexTangents=De.vertexTangents,$e.toneMapping=De.toneMapping}function Pr(pe,De,$e,Qe,Be){De.isScene!==!0&&(De=_t),fe.resetTextureUnits();const Tt=De.fog,zt=Qe.isMeshStandardMaterial?De.environment:null,At=Y===null?k.outputColorSpace:Y.isXRRenderTarget===!0?Y.texture.colorSpace:Qu,Ht=(Qe.isMeshStandardMaterial?Oe:oe).get(Qe.envMap||zt),rn=Qe.vertexColors===!0&&!!$e.attributes.color&&$e.attributes.color.itemSize===4,on=!!$e.attributes.tangent&&(!!Qe.normalMap||Qe.anisotropy>0),Kt=!!$e.morphAttributes.position,Tn=!!$e.morphAttributes.normal,Rn=!!$e.morphAttributes.color;let En=Cl;Qe.toneMapped&&(Y===null||Y.isXRRenderTarget===!0)&&(En=k.toneMapping);const un=$e.morphAttributes.position||$e.morphAttributes.normal||$e.morphAttributes.color,$t=un!==void 0?un.length:0,Bt=Pt.get(Qe),Mn=I.state.lights;if(W===!0&&($===!0||pe!==te)){const St=pe===te&&Qe.id===ee;re.setState(Qe,pe,St)}let On=!1;Qe.version===Bt.__version?(Bt.needsLights&&Bt.lightsStateVersion!==Mn.state.version||Bt.outputColorSpace!==At||Be.isBatchedMesh&&Bt.batching===!1||!Be.isBatchedMesh&&Bt.batching===!0||Be.isBatchedMesh&&Bt.batchingColor===!0&&Be.colorTexture===null||Be.isBatchedMesh&&Bt.batchingColor===!1&&Be.colorTexture!==null||Be.isInstancedMesh&&Bt.instancing===!1||!Be.isInstancedMesh&&Bt.instancing===!0||Be.isSkinnedMesh&&Bt.skinning===!1||!Be.isSkinnedMesh&&Bt.skinning===!0||Be.isInstancedMesh&&Bt.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&Bt.instancingColor===!1&&Be.instanceColor!==null||Be.isInstancedMesh&&Bt.instancingMorph===!0&&Be.morphTexture===null||Be.isInstancedMesh&&Bt.instancingMorph===!1&&Be.morphTexture!==null||Bt.envMap!==Ht||Qe.fog===!0&&Bt.fog!==Tt||Bt.numClippingPlanes!==void 0&&(Bt.numClippingPlanes!==re.numPlanes||Bt.numIntersection!==re.numIntersection)||Bt.vertexAlphas!==rn||Bt.vertexTangents!==on||Bt.morphTargets!==Kt||Bt.morphNormals!==Tn||Bt.morphColors!==Rn||Bt.toneMapping!==En||Bt.morphTargetsCount!==$t)&&(On=!0):(On=!0,Bt.__version=Qe.version);let Wr=Bt.currentProgram;On===!0&&(Wr=Dn(Qe,De,Be));let vi=!1,sr=!1,Yt=!1;const mt=Wr.getUniforms(),Ve=Bt.uniforms;if(He.useProgram(Wr.program)&&(vi=!0,sr=!0,Yt=!0),Qe.id!==ee&&(ee=Qe.id,sr=!0),vi||te!==pe){vt.reverseDepthBuffer?(se.copy(pe.projectionMatrix),sJ(se),oJ(se),mt.setValue(ge,"projectionMatrix",se)):mt.setValue(ge,"projectionMatrix",pe.projectionMatrix),mt.setValue(ge,"viewMatrix",pe.matrixWorldInverse);const St=mt.map.cameraPosition;St!==void 0&&St.setValue(ge,_e.setFromMatrixPosition(pe.matrixWorld)),vt.logarithmicDepthBuffer&&mt.setValue(ge,"logDepthBufFC",2/(Math.log(pe.far+1)/Math.LN2)),(Qe.isMeshPhongMaterial||Qe.isMeshToonMaterial||Qe.isMeshLambertMaterial||Qe.isMeshBasicMaterial||Qe.isMeshStandardMaterial||Qe.isShaderMaterial)&&mt.setValue(ge,"isOrthographic",pe.isOrthographicCamera===!0),te!==pe&&(te=pe,sr=!0,Yt=!0)}if(Be.isSkinnedMesh){mt.setOptional(ge,Be,"bindMatrix"),mt.setOptional(ge,Be,"bindMatrixInverse");const St=Be.skeleton;St&&(St.boneTexture===null&&St.computeBoneTexture(),mt.setValue(ge,"boneTexture",St.boneTexture,fe))}Be.isBatchedMesh&&(mt.setOptional(ge,Be,"batchingTexture"),mt.setValue(ge,"batchingTexture",Be._matricesTexture,fe),mt.setOptional(ge,Be,"batchingIdTexture"),mt.setValue(ge,"batchingIdTexture",Be._indirectTexture,fe),mt.setOptional(ge,Be,"batchingColorTexture"),Be._colorsTexture!==null&&mt.setValue(ge,"batchingColorTexture",Be._colorsTexture,fe));const Fe=$e.morphAttributes;if((Fe.position!==void 0||Fe.normal!==void 0||Fe.color!==void 0)&&ue.update(Be,$e,Wr),(sr||Bt.receiveShadow!==Be.receiveShadow)&&(Bt.receiveShadow=Be.receiveShadow,mt.setValue(ge,"receiveShadow",Be.receiveShadow)),Qe.isMeshGouraudMaterial&&Qe.envMap!==null&&(Ve.envMap.value=Ht,Ve.flipEnvMap.value=Ht.isCubeTexture&&Ht.isRenderTargetTexture===!1?-1:1),Qe.isMeshStandardMaterial&&Qe.envMap===null&&De.environment!==null&&(Ve.envMapIntensity.value=De.environmentIntensity),sr&&(mt.setValue(ge,"toneMappingExposure",k.toneMappingExposure),Bt.needsLights&&Dt(Ve,Yt),Tt&&Qe.fog===!0&&Ye.refreshFogUniforms(Ve,Tt),Ye.refreshMaterialUniforms(Ve,Qe,R,M,I.state.transmissionRenderTarget[pe.id]),A_.upload(ge,wt(Bt),Ve,fe)),Qe.isShaderMaterial&&Qe.uniformsNeedUpdate===!0&&(A_.upload(ge,wt(Bt),Ve,fe),Qe.uniformsNeedUpdate=!1),Qe.isSpriteMaterial&&mt.setValue(ge,"center",Be.center),mt.setValue(ge,"modelViewMatrix",Be.modelViewMatrix),mt.setValue(ge,"normalMatrix",Be.normalMatrix),mt.setValue(ge,"modelMatrix",Be.matrixWorld),Qe.isShaderMaterial||Qe.isRawShaderMaterial){const St=Qe.uniformsGroups;for(let Ut=0,jt=St.length;Ut<jt;Ut++){const cn=St[Ut];de.update(cn,Wr),de.bind(cn,Wr)}}return Wr}function Dt(pe,De){pe.ambientLightColor.needsUpdate=De,pe.lightProbe.needsUpdate=De,pe.directionalLights.needsUpdate=De,pe.directionalLightShadows.needsUpdate=De,pe.pointLights.needsUpdate=De,pe.pointLightShadows.needsUpdate=De,pe.spotLights.needsUpdate=De,pe.spotLightShadows.needsUpdate=De,pe.rectAreaLights.needsUpdate=De,pe.hemisphereLights.needsUpdate=De}function Ot(pe){return pe.isMeshLambertMaterial||pe.isMeshToonMaterial||pe.isMeshPhongMaterial||pe.isMeshStandardMaterial||pe.isShadowMaterial||pe.isShaderMaterial&&pe.lights===!0}this.getActiveCubeFace=function(){return Q},this.getActiveMipmapLevel=function(){return G},this.getRenderTarget=function(){return Y},this.setRenderTargetTextures=function(pe,De,$e){Pt.get(pe.texture).__webglTexture=De,Pt.get(pe.depthTexture).__webglTexture=$e;const Qe=Pt.get(pe);Qe.__hasExternalTextures=!0,Qe.__autoAllocateDepthBuffer=$e===void 0,Qe.__autoAllocateDepthBuffer||je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Qe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(pe,De){const $e=Pt.get(pe);$e.__webglFramebuffer=De,$e.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(pe,De=0,$e=0){Y=pe,Q=De,G=$e;let Qe=!0,Be=null,Tt=!1,zt=!1;if(pe){const Ht=Pt.get(pe);if(Ht.__useDefaultFramebuffer!==void 0)He.bindFramebuffer(ge.FRAMEBUFFER,null),Qe=!1;else if(Ht.__webglFramebuffer===void 0)fe.setupRenderTarget(pe);else if(Ht.__hasExternalTextures)fe.rebindTextures(pe,Pt.get(pe.texture).__webglTexture,Pt.get(pe.depthTexture).__webglTexture);else if(pe.depthBuffer){const Kt=pe.depthTexture;if(Ht.__boundDepthTexture!==Kt){if(Kt!==null&&Pt.has(Kt)&&(pe.width!==Kt.image.width||pe.height!==Kt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");fe.setupDepthRenderbuffer(pe)}}const rn=pe.texture;(rn.isData3DTexture||rn.isDataArrayTexture||rn.isCompressedArrayTexture)&&(zt=!0);const on=Pt.get(pe).__webglFramebuffer;pe.isWebGLCubeRenderTarget?(Array.isArray(on[De])?Be=on[De][$e]:Be=on[De],Tt=!0):pe.samples>0&&fe.useMultisampledRTT(pe)===!1?Be=Pt.get(pe).__webglMultisampledFramebuffer:Array.isArray(on)?Be=on[$e]:Be=on,U.copy(pe.viewport),V.copy(pe.scissor),K=pe.scissorTest}else U.copy(N).multiplyScalar(R).floor(),V.copy(v).multiplyScalar(R).floor(),K=u;if(He.bindFramebuffer(ge.FRAMEBUFFER,Be)&&Qe&&He.drawBuffers(pe,Be),He.viewport(U),He.scissor(V),He.setScissorTest(K),Tt){const Ht=Pt.get(pe.texture);ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_CUBE_MAP_POSITIVE_X+De,Ht.__webglTexture,$e)}else if(zt){const Ht=Pt.get(pe.texture),rn=De||0;ge.framebufferTextureLayer(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,Ht.__webglTexture,$e||0,rn)}ee=-1},this.readRenderTargetPixels=function(pe,De,$e,Qe,Be,Tt,zt){if(!(pe&&pe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let At=Pt.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&zt!==void 0&&(At=At[zt]),At){He.bindFramebuffer(ge.FRAMEBUFFER,At);try{const Ht=pe.texture,rn=Ht.format,on=Ht.type;if(!vt.textureFormatReadable(rn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!vt.textureTypeReadable(on)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=pe.width-Qe&&$e>=0&&$e<=pe.height-Be&&ge.readPixels(De,$e,Qe,Be,le.convert(rn),le.convert(on),Tt)}finally{const Ht=Y!==null?Pt.get(Y).__webglFramebuffer:null;He.bindFramebuffer(ge.FRAMEBUFFER,Ht)}}},this.readRenderTargetPixelsAsync=async function(pe,De,$e,Qe,Be,Tt,zt){if(!(pe&&pe.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let At=Pt.get(pe).__webglFramebuffer;if(pe.isWebGLCubeRenderTarget&&zt!==void 0&&(At=At[zt]),At){const Ht=pe.texture,rn=Ht.format,on=Ht.type;if(!vt.textureFormatReadable(rn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!vt.textureTypeReadable(on))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(De>=0&&De<=pe.width-Qe&&$e>=0&&$e<=pe.height-Be){He.bindFramebuffer(ge.FRAMEBUFFER,At);const Kt=ge.createBuffer();ge.bindBuffer(ge.PIXEL_PACK_BUFFER,Kt),ge.bufferData(ge.PIXEL_PACK_BUFFER,Tt.byteLength,ge.STREAM_READ),ge.readPixels(De,$e,Qe,Be,le.convert(rn),le.convert(on),0);const Tn=Y!==null?Pt.get(Y).__webglFramebuffer:null;He.bindFramebuffer(ge.FRAMEBUFFER,Tn);const Rn=ge.fenceSync(ge.SYNC_GPU_COMMANDS_COMPLETE,0);return ge.flush(),await iJ(ge,Rn,4),ge.bindBuffer(ge.PIXEL_PACK_BUFFER,Kt),ge.getBufferSubData(ge.PIXEL_PACK_BUFFER,0,Tt),ge.deleteBuffer(Kt),ge.deleteSync(Rn),Tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(pe,De=null,$e=0){pe.isTexture!==!0&&(b_("WebGLRenderer: copyFramebufferToTexture function signature has changed."),De=arguments[0]||null,pe=arguments[1]);const Qe=Math.pow(2,-$e),Be=Math.floor(pe.image.width*Qe),Tt=Math.floor(pe.image.height*Qe),zt=De!==null?De.x:0,At=De!==null?De.y:0;fe.setTexture2D(pe,0),ge.copyTexSubImage2D(ge.TEXTURE_2D,$e,0,0,zt,At,Be,Tt),He.unbindTexture()},this.copyTextureToTexture=function(pe,De,$e=null,Qe=null,Be=0){pe.isTexture!==!0&&(b_("WebGLRenderer: copyTextureToTexture function signature has changed."),Qe=arguments[0]||null,pe=arguments[1],De=arguments[2],Be=arguments[3]||0,$e=null);let Tt,zt,At,Ht,rn,on;$e!==null?(Tt=$e.max.x-$e.min.x,zt=$e.max.y-$e.min.y,At=$e.min.x,Ht=$e.min.y):(Tt=pe.image.width,zt=pe.image.height,At=0,Ht=0),Qe!==null?(rn=Qe.x,on=Qe.y):(rn=0,on=0);const Kt=le.convert(De.format),Tn=le.convert(De.type);fe.setTexture2D(De,0),ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,De.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,De.unpackAlignment);const Rn=ge.getParameter(ge.UNPACK_ROW_LENGTH),En=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),un=ge.getParameter(ge.UNPACK_SKIP_PIXELS),$t=ge.getParameter(ge.UNPACK_SKIP_ROWS),Bt=ge.getParameter(ge.UNPACK_SKIP_IMAGES),Mn=pe.isCompressedTexture?pe.mipmaps[Be]:pe.image;ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Mn.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,Mn.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,At),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,Ht),pe.isDataTexture?ge.texSubImage2D(ge.TEXTURE_2D,Be,rn,on,Tt,zt,Kt,Tn,Mn.data):pe.isCompressedTexture?ge.compressedTexSubImage2D(ge.TEXTURE_2D,Be,rn,on,Mn.width,Mn.height,Kt,Mn.data):ge.texSubImage2D(ge.TEXTURE_2D,Be,rn,on,Tt,zt,Kt,Tn,Mn),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Rn),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,En),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,un),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,$t),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,Bt),Be===0&&De.generateMipmaps&&ge.generateMipmap(ge.TEXTURE_2D),He.unbindTexture()},this.copyTextureToTexture3D=function(pe,De,$e=null,Qe=null,Be=0){pe.isTexture!==!0&&(b_("WebGLRenderer: copyTextureToTexture3D function signature has changed."),$e=arguments[0]||null,Qe=arguments[1]||null,pe=arguments[2],De=arguments[3],Be=arguments[4]||0);let Tt,zt,At,Ht,rn,on,Kt,Tn,Rn;const En=pe.isCompressedTexture?pe.mipmaps[Be]:pe.image;$e!==null?(Tt=$e.max.x-$e.min.x,zt=$e.max.y-$e.min.y,At=$e.max.z-$e.min.z,Ht=$e.min.x,rn=$e.min.y,on=$e.min.z):(Tt=En.width,zt=En.height,At=En.depth,Ht=0,rn=0,on=0),Qe!==null?(Kt=Qe.x,Tn=Qe.y,Rn=Qe.z):(Kt=0,Tn=0,Rn=0);const un=le.convert(De.format),$t=le.convert(De.type);let Bt;if(De.isData3DTexture)fe.setTexture3D(De,0),Bt=ge.TEXTURE_3D;else if(De.isDataArrayTexture||De.isCompressedArrayTexture)fe.setTexture2DArray(De,0),Bt=ge.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,De.flipY),ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),ge.pixelStorei(ge.UNPACK_ALIGNMENT,De.unpackAlignment);const Mn=ge.getParameter(ge.UNPACK_ROW_LENGTH),On=ge.getParameter(ge.UNPACK_IMAGE_HEIGHT),Wr=ge.getParameter(ge.UNPACK_SKIP_PIXELS),vi=ge.getParameter(ge.UNPACK_SKIP_ROWS),sr=ge.getParameter(ge.UNPACK_SKIP_IMAGES);ge.pixelStorei(ge.UNPACK_ROW_LENGTH,En.width),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,En.height),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Ht),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,rn),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,on),pe.isDataTexture||pe.isData3DTexture?ge.texSubImage3D(Bt,Be,Kt,Tn,Rn,Tt,zt,At,un,$t,En.data):De.isCompressedArrayTexture?ge.compressedTexSubImage3D(Bt,Be,Kt,Tn,Rn,Tt,zt,At,un,En.data):ge.texSubImage3D(Bt,Be,Kt,Tn,Rn,Tt,zt,At,un,$t,En),ge.pixelStorei(ge.UNPACK_ROW_LENGTH,Mn),ge.pixelStorei(ge.UNPACK_IMAGE_HEIGHT,On),ge.pixelStorei(ge.UNPACK_SKIP_PIXELS,Wr),ge.pixelStorei(ge.UNPACK_SKIP_ROWS,vi),ge.pixelStorei(ge.UNPACK_SKIP_IMAGES,sr),Be===0&&De.generateMipmaps&&ge.generateMipmap(Bt),He.unbindTexture()},this.initRenderTarget=function(pe){Pt.get(pe).__webglFramebuffer===void 0&&fe.setupRenderTarget(pe)},this.initTexture=function(pe){pe.isCubeTexture?fe.setTextureCube(pe,0):pe.isData3DTexture?fe.setTexture3D(pe,0):pe.isDataArrayTexture||pe.isCompressedArrayTexture?fe.setTexture2DArray(pe,0):fe.setTexture2D(pe,0),He.unbindTexture()},this.resetState=function(){Q=0,G=0,Y=null,He.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Px?"display-p3":"srgb",t.unpackColorSpace=yr.workingColorSpace===zy?"display-p3":"srgb"}}class Ox{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new en(e),this.density=t}clone(){return new Ox(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Dx{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new en(e),this.near=t,this.far=n}clone(){return new Dx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class IR extends pr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Go,this.environmentIntensity=1,this.environmentRotation=new Go,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Bx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uy,this.updateRanges=[],this.version=0,this.uuid=Vo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ys=new ve;class rd{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ys.fromBufferAttribute(this,t),Ys.applyMatrix4(e),this.setXYZ(t,Ys.x,Ys.y,Ys.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ys.fromBufferAttribute(this,t),Ys.applyNormalMatrix(e),this.setXYZ(t,Ys.x,Ys.y,Ys.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ys.fromBufferAttribute(this,t),Ys.transformDirection(e),this.setXYZ(t,Ys.x,Ys.y,Ys.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=$s(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Kn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Kn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=$s(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=$s(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=$s(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=$s(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Kn(t,this.array),n=Kn(n,this.array),i=Kn(i,this.array),s=Kn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Nr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new rd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class NR extends Ds{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new en(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let kp;const tg=new ve,Op=new ve,Dp=new ve,Bp=new Mt,ng=new Mt,d5=new Ln,Nw=new ve,rg=new ve,Pw=new ve,ZP=new Mt,jE=new Mt,QP=new Mt;class p5 extends pr{constructor(e=new NR){if(super(),this.isSprite=!0,this.type="Sprite",kp===void 0){kp=new Jn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Bx(t,5);kp.setIndex([0,1,2,0,2,3]),kp.setAttribute("position",new rd(n,3,0,!1)),kp.setAttribute("uv",new rd(n,2,3,!1))}this.geometry=kp,this.material=e,this.center=new Mt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Op.setFromMatrixScale(this.matrixWorld),d5.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Dp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Op.multiplyScalar(-Dp.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const o=this.center;Lw(Nw.set(-.5,-.5,0),Dp,o,Op,i,s),Lw(rg.set(.5,-.5,0),Dp,o,Op,i,s),Lw(Pw.set(.5,.5,0),Dp,o,Op,i,s),ZP.set(0,0),jE.set(1,0),QP.set(1,1);let l=e.ray.intersectTriangle(Nw,rg,Pw,!1,tg);if(l===null&&(Lw(rg.set(-.5,.5,0),Dp,o,Op,i,s),jE.set(0,1),l=e.ray.intersectTriangle(Nw,Pw,rg,!1,tg),l===null))return;const c=e.ray.origin.distanceTo(tg);c<e.near||c>e.far||t.push({distance:c,point:tg.clone(),uv:vo.getInterpolation(tg,Nw,rg,Pw,ZP,jE,QP,new Mt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Lw(r,e,t,n,i,s){Bp.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(ng.x=s*Bp.x-i*Bp.y,ng.y=i*Bp.x+s*Bp.y):ng.copy(Bp),r.copy(e),r.x+=ng.x,r.y+=ng.y,r.applyMatrix4(d5)}const kw=new ve,JP=new ve;class m5 extends pr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){kw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(kw);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){kw.setFromMatrixPosition(e.matrixWorld),JP.setFromMatrixPosition(this.matrixWorld);const n=kw.distanceTo(JP)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const eL=new ve,tL=new fr,nL=new fr,_ie=new ve,rL=new Ln,Ow=new ve,qE=new Os,iL=new Ln,KE=new dd;class g5 extends Pi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=bA,this.bindMatrix=new Ln,this.bindMatrixInverse=new Ln,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Zs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ow),this.boundingBox.expandByPoint(Ow)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Os),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Ow),this.boundingSphere.expandByPoint(Ow)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qE.copy(this.boundingSphere),qE.applyMatrix4(i),e.ray.intersectsSphere(qE)!==!1&&(iL.copy(i).invert(),KE.copy(e.ray).applyMatrix4(iL),!(this.boundingBox!==null&&KE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,KE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new fr,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===bA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===D6?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;tL.fromBufferAttribute(i.attributes.skinIndex,e),nL.fromBufferAttribute(i.attributes.skinWeight,e),eL.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=nL.getComponent(s);if(o!==0){const l=tL.getComponent(s);rL.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(_ie.copy(eL).applyMatrix4(rL),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class PR extends pr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Il extends ui{constructor(e=null,t=1,n=1,i,s,o,l,c,d=es,h=es,y,_){super(null,o,l,c,d,h,i,s,y,_),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const sL=new Ln,xie=new Ln;class Ux{constructor(e=[],t=[]){this.uuid=Vo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ln)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ln;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:xie;sL.multiplyMatrices(l,t[s]),sL.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Ux(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Il(t,e,e,Ps,_o);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new PR),this.bones.push(o),this.boneInverses.push(new Ln().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class A0 extends Nr{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Up=new Ln,oL=new Ln,Dw=[],aL=new Zs,Sie=new Ln,ig=new Pi,sg=new Os;class y5 extends Pi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new A0(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,Sie)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Zs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Up),aL.copy(e.boundingBox).applyMatrix4(Up),this.boundingBox.union(aL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Os),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Up),sg.copy(e.boundingSphere).applyMatrix4(Up),this.boundingSphere.union(sg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=i[o+l]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(ig.geometry=this.geometry,ig.material=this.material,ig.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sg.copy(this.boundingSphere),sg.applyMatrix4(n),e.ray.intersectsSphere(sg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Up),oL.multiplyMatrices(n,Up),ig.matrixWorld=oL,ig.raycast(e,Dw);for(let o=0,l=Dw.length;o<l;o++){const c=Dw[o];c.instanceId=s,c.object=this,t.push(c)}Dw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new A0(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Il(new Float32Array(i*this.count),i,this.count,Rx,_o));const s=this.morphTexture.source.data.data;let o=0;for(let d=0;d<n.length;d++)o+=n[d];const l=this.geometry.morphTargetsRelative?1:1-o,c=i*e;s[c]=l,s.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Mie(r,e){return r.z-e.z}function Eie(r,e){return e.z-r.z}class bie{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=n}reset(){this.list.length=0,this.index=0}}const Wc=new Ln,YE=new Ln,Aie=new Ln,Tie=new en(1,1,1),lL=new Ln,XE=new Hy,Bw=new Zs,ch=new Os,og=new ve,uL=new ve,Rie=new ve,$E=new bie,Cs=new Pi,Uw=[];function Cie(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,r.getComponent(s,o))}else e.array.set(r.array,t*n);e.needsUpdate=!0}class v5 extends Pi{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,n=t*2,i){super(new Jn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Il(t,e,e,Ps,_o);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Il(t,e,e,Fy,Xu);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Il(t,e,e,Ps,_o);n.colorSpace=yr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:c,normalized:d}=o,h=new l.constructor(n*c),y=new Nr(h,c,d);t.setAttribute(s,y)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Nr(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Zs);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Wc),this.getBoundingBoxAt(s,Bw).applyMatrix4(Wc),e.union(Bw)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Os);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Wc),this.getBoundingSphereAt(s,ch).applyMatrix4(Wc),e.union(ch)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(i=this._availableInstanceIds.pop(),this._drawInfo[i]=n):(i=this._drawInfo.length,this._drawInfo.push(n));const s=this._matricesTexture,o=s.image.data;Aie.toArray(o,i*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(Tie.toArray(l.image.data,i*4),l.needsUpdate=!0),i}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const d=e.getIndex(),h=d!==null;if(h&&(n===-1?i.indexCount=d.count:i.indexCount=n,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const y=this._geometryCount;return this._geometryCount++,o.push(i),l.push({start:h?i.indexStart:i.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new Zs,sphereInitialized:!1,sphere:new Os}),this.setGeometryAt(y,e),y}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),l=this._reservedRanges[e];if(i&&o.count>l.indexCount||t.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,d=l.vertexCount;for(const x in n.attributes){const A=t.getAttribute(x),P=n.getAttribute(x);Cie(A,P,c);const I=A.itemSize;for(let C=A.count,D=d;C<D;C++){const k=c+C;for(let F=0;F<I;F++)P.setComponent(k,F,0)}P.needsUpdate=!0,P.addUpdateRange(c*I,d*I)}if(i){const x=l.indexStart;for(let A=0;A<o.count;A++)s.setX(x+A,c+o.getX(A));for(let A=o.count,P=l.indexCount;A<P;A++)s.setX(x+A,c);s.needsUpdate=!0,s.addUpdateRange(x,l.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const y=this._drawRanges[e],_=t.getAttribute("position");return y.count=i?o.count:_.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.box,s=this.geometry;if(n.boxInitialized===!1){i.makeEmpty();const o=s.index,l=s.attributes.position,c=this._drawRanges[e];for(let d=c.start,h=c.start+c.count;d<h;d++){let y=d;o&&(y=o.getX(y)),i.expandByPoint(og.fromBufferAttribute(l,y))}n.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,Bw),Bw.getCenter(i.center);const o=s.index,l=s.attributes.position,c=this._drawRanges[e];let d=0;for(let h=c.start,y=c.start+c.count;h<y;h++){let _=h;o&&(_=o.getX(_)),og.fromBufferAttribute(l,_),d=Math.max(d,i.center.distanceToSquared(og))}i.radius=Math.sqrt(d),n.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(i,e*4),n.needsUpdate=!0,this)}getColorAt(e,t){const n=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(n,e*4)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||t<0||t>=this._geometryCount?null:(n[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const n=this._drawRanges[e];return t.start=n.start,t.count=n.count,t}raycast(e,t){const n=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,o=this.geometry;Cs.material=this.material,Cs.geometry.index=o.index,Cs.geometry.attributes=o.attributes,Cs.geometry.boundingBox===null&&(Cs.geometry.boundingBox=new Zs),Cs.geometry.boundingSphere===null&&(Cs.geometry.boundingSphere=new Os);for(let l=0,c=n.length;l<c;l++){if(!n[l].visible||!n[l].active)continue;const d=n[l].geometryIndex,h=i[d];Cs.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(l,Cs.matrixWorld).premultiply(s),this.getBoundingBoxAt(d,Cs.geometry.boundingBox),this.getBoundingSphereAt(d,Cs.geometry.boundingSphere),Cs.raycast(e,Uw);for(let y=0,_=Uw.length;y<_;y++){const x=Uw[y];x.object=this,x.batchId=l,t.push(x)}Uw.length=0}Cs.material=null,Cs.geometry.index=null,Cs.geometry.attributes={},Cs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._drawInfo,d=this._multiDrawStarts,h=this._multiDrawCounts,y=this._drawRanges,_=this.perObjectFrustumCulled,x=this._indirectTexture,A=x.image.data;_&&(lL.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),XE.setFromProjectionMatrix(lL,e.coordinateSystem));let P=0;if(this.sortObjects){YE.copy(this.matrixWorld).invert(),og.setFromMatrixPosition(n.matrixWorld).applyMatrix4(YE),uL.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(YE);for(let D=0,k=c.length;D<k;D++)if(c[D].visible&&c[D].active){const F=c[D].geometryIndex;this.getMatrixAt(D,Wc),this.getBoundingSphereAt(F,ch).applyMatrix4(Wc);let Q=!1;if(_&&(Q=!XE.intersectsSphere(ch)),!Q){const G=Rie.subVectors(ch.center,og).dot(uL);$E.push(y[F],G,D)}}const I=$E.list,C=this.customSort;C===null?I.sort(s.transparent?Eie:Mie):C.call(this,I,n);for(let D=0,k=I.length;D<k;D++){const F=I[D];d[P]=F.start*l,h[P]=F.count,A[P]=F.index,P++}$E.reset()}else for(let I=0,C=c.length;I<C;I++)if(c[I].visible&&c[I].active){const D=c[I].geometryIndex;let k=!1;if(_&&(this.getMatrixAt(I,Wc),this.getBoundingSphereAt(D,ch).applyMatrix4(Wc),k=!XE.intersectsSphere(ch)),!k){const F=y[D];d[P]=F.start*l,h[P]=F.count,A[P]=I,P++}}x.needsUpdate=!0,this._multiDrawCount=P,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Js extends Ds{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new en(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const F1=new ve,z1=new ve,cL=new Ln,ag=new dd,Fw=new Os,ZE=new ve,fL=new ve;class of extends pr{constructor(e=new Jn,t=new Js){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)F1.fromBufferAttribute(t,i-1),z1.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=F1.distanceTo(z1);e.setAttribute("lineDistance",new vn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Fw.copy(n.boundingSphere),Fw.applyMatrix4(i),Fw.radius+=s,e.ray.intersectsSphere(Fw)===!1)return;cL.copy(i).invert(),ag.copy(e.ray).applyMatrix4(cL);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=this.isLineSegments?2:1,h=n.index,_=n.attributes.position;if(h!==null){const x=Math.max(0,o.start),A=Math.min(h.count,o.start+o.count);for(let P=x,I=A-1;P<I;P+=d){const C=h.getX(P),D=h.getX(P+1),k=zw(this,e,ag,c,C,D);k&&t.push(k)}if(this.isLineLoop){const P=h.getX(A-1),I=h.getX(x),C=zw(this,e,ag,c,P,I);C&&t.push(C)}}else{const x=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let P=x,I=A-1;P<I;P+=d){const C=zw(this,e,ag,c,P,P+1);C&&t.push(C)}if(this.isLineLoop){const P=zw(this,e,ag,c,A-1,x);P&&t.push(P)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function zw(r,e,t,n,i,s){const o=r.geometry.attributes.position;if(F1.fromBufferAttribute(o,i),z1.fromBufferAttribute(o,s),t.distanceSqToSegment(F1,z1,ZE,fL)>n)return;ZE.applyMatrix4(r.matrixWorld);const c=e.ray.origin.distanceTo(ZE);if(!(c<e.near||c>e.far))return{distance:c,point:fL.clone().applyMatrix4(r.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:r}}const hL=new ve,dL=new ve;class Ol extends of{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)hL.fromBufferAttribute(t,i),dL.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+hL.distanceTo(dL);e.setAttribute("lineDistance",new vn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class w5 extends of{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class LR extends Ds{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new en(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const pL=new Ln,NA=new dd,Ww=new Os,Vw=new ve;class _5 extends pr{constructor(e=new Jn,t=new LR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ww.copy(n.boundingSphere),Ww.applyMatrix4(i),Ww.radius+=s,e.ray.intersectsSphere(Ww)===!1)return;pL.copy(i).invert(),NA.copy(e.ray).applyMatrix4(pL);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=n.index,y=n.attributes.position;if(d!==null){const _=Math.max(0,o.start),x=Math.min(d.count,o.start+o.count);for(let A=_,P=x;A<P;A++){const I=d.getX(A);Vw.fromBufferAttribute(y,I),mL(Vw,I,c,i,e,t,this)}}else{const _=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let A=_,P=x;A<P;A++)Vw.fromBufferAttribute(y,A),mL(Vw,A,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function mL(r,e,t,n,i,s,o){const l=NA.distanceSqToPoint(r);if(l<t){const c=new ve;NA.closestPointToPoint(r,c),c.applyMatrix4(n);const d=i.ray.origin.distanceTo(c);if(d<i.near||d>i.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Iie extends ui{constructor(e,t,n,i,s,o,l,c,d){super(e,t,n,i,s,o,l,c,d),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Ii,this.magFilter=s!==void 0?s:Ii,this.generateMipmaps=!1;const h=this;function y(){h.needsUpdate=!0,e.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Nie extends ui{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=es,this.minFilter=es,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fx extends ui{constructor(e,t,n,i,s,o,l,c,d,h,y,_){super(null,o,l,c,d,h,i,s,y,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Pie extends Fx{constructor(e,t,n,i,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=la,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Lie extends Fx{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Yu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class kie extends ui{constructor(e,t,n,i,s,o,l,c,d){super(e,t,n,i,s,o,l,c,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class $a{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,c=s-1,d;for(;l<=c;)if(i=Math.floor(l+(c-l)/2),d=n[i]-o,d<0)l=i+1;else if(d>0)c=i-1;else{c=i;break}if(i=c,n[i]===o)return i/(s-1);const h=n[i],_=n[i+1]-h,x=(o-h)/_;return(i+x)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),c=t||(o.isVector2?new Mt:new ve);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ve,i=[],s=[],o=[],l=new ve,c=new Ln;for(let x=0;x<=e;x++){const A=x/e;i[x]=this.getTangentAt(A,new ve)}s[0]=new ve,o[0]=new ve;let d=Number.MAX_VALUE;const h=Math.abs(i[0].x),y=Math.abs(i[0].y),_=Math.abs(i[0].z);h<=d&&(d=h,n.set(1,0,0)),y<=d&&(d=y,n.set(0,1,0)),_<=d&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],l),o[0].crossVectors(i[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),o[x]=o[x-1].clone(),l.crossVectors(i[x-1],i[x]),l.length()>Number.EPSILON){l.normalize();const A=Math.acos(li(i[x-1].dot(i[x]),-1,1));s[x].applyMatrix4(c.makeRotationAxis(l,A))}o[x].crossVectors(i[x],s[x])}if(t===!0){let x=Math.acos(li(s[0].dot(s[e]),-1,1));x/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(x=-x);for(let A=1;A<=e;A++)s[A].applyMatrix4(c.makeRotationAxis(i[A],x*A)),o[A].crossVectors(i[A],s[A])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class zx extends $a{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new Mt){const n=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const h=Math.cos(this.aRotation),y=Math.sin(this.aRotation),_=c-this.aX,x=d-this.aY;c=_*h-x*y+this.aX,d=_*y+x*h+this.aY}return n.set(c,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class x5 extends zx{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function kR(){let r=0,e=0,t=0,n=0;function i(s,o,l,c){r=s,e=l,t=-3*s+3*o-2*l-c,n=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,d){i(o,l,d*(l-s),d*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,d,h,y){let _=(o-s)/d-(l-s)/(d+h)+(l-o)/h,x=(l-o)/h-(c-o)/(h+y)+(c-l)/y;_*=h,x*=h,i(o,l,_,x)},calc:function(s){const o=s*s,l=o*s;return r+e*s+t*o+n*l}}}const Hw=new ve,QE=new kR,JE=new kR,eb=new kR;class S5 extends $a{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new ve){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let d,h;this.closed||l>0?d=i[(l-1)%s]:(Hw.subVectors(i[0],i[1]).add(i[0]),d=Hw);const y=i[l%s],_=i[(l+1)%s];if(this.closed||l+2<s?h=i[(l+2)%s]:(Hw.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=Hw),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let A=Math.pow(d.distanceToSquared(y),x),P=Math.pow(y.distanceToSquared(_),x),I=Math.pow(_.distanceToSquared(h),x);P<1e-4&&(P=1),A<1e-4&&(A=P),I<1e-4&&(I=P),QE.initNonuniformCatmullRom(d.x,y.x,_.x,h.x,A,P,I),JE.initNonuniformCatmullRom(d.y,y.y,_.y,h.y,A,P,I),eb.initNonuniformCatmullRom(d.z,y.z,_.z,h.z,A,P,I)}else this.curveType==="catmullrom"&&(QE.initCatmullRom(d.x,y.x,_.x,h.x,this.tension),JE.initCatmullRom(d.y,y.y,_.y,h.y,this.tension),eb.initCatmullRom(d.z,y.z,_.z,h.z,this.tension));return n.set(QE.calc(c),JE.calc(c),eb.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new ve().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function gL(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,l=r*r,c=r*l;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*l+s*r+t}function Oie(r,e){const t=1-r;return t*t*e}function Die(r,e){return 2*(1-r)*r*e}function Bie(r,e){return r*r*e}function Dg(r,e,t,n){return Oie(r,e)+Die(r,t)+Bie(r,n)}function Uie(r,e){const t=1-r;return t*t*t*e}function Fie(r,e){const t=1-r;return 3*t*t*r*e}function zie(r,e){return 3*(1-r)*r*r*e}function Wie(r,e){return r*r*r*e}function Bg(r,e,t,n,i){return Uie(r,e)+Fie(r,t)+zie(r,n)+Wie(r,i)}class OR extends $a{constructor(e=new Mt,t=new Mt,n=new Mt,i=new Mt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Mt){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Bg(e,i.x,s.x,o.x,l.x),Bg(e,i.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class M5 extends $a{constructor(e=new ve,t=new ve,n=new ve,i=new ve){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new ve){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Bg(e,i.x,s.x,o.x,l.x),Bg(e,i.y,s.y,o.y,l.y),Bg(e,i.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class DR extends $a{constructor(e=new Mt,t=new Mt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Mt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Mt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class E5 extends $a{constructor(e=new ve,t=new ve){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ve){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BR extends $a{constructor(e=new Mt,t=new Mt,n=new Mt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Mt){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Dg(e,i.x,s.x,o.x),Dg(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UR extends $a{constructor(e=new ve,t=new ve,n=new ve){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ve){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(Dg(e,i.x,s.x,o.x),Dg(e,i.y,s.y,o.y),Dg(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FR extends $a{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Mt){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),l=s-o,c=i[o===0?o:o-1],d=i[o],h=i[o>i.length-2?i.length-1:o+1],y=i[o>i.length-3?i.length-1:o+2];return n.set(gL(l,c.x,d.x,h.x,y.x),gL(l,c.y,d.y,h.y,y.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Mt().fromArray(i))}return this}}var W1=Object.freeze({__proto__:null,ArcCurve:x5,CatmullRomCurve3:S5,CubicBezierCurve:OR,CubicBezierCurve3:M5,EllipseCurve:zx,LineCurve:DR,LineCurve3:E5,QuadraticBezierCurve:BR,QuadraticBezierCurve3:UR,SplineCurve:FR});class b5 extends $a{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new W1[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,l=this.curves[s],c=l.getLength(),d=c===0?0:1-o/c;return l.getPointAt(d,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let d=0;d<c.length;d++){const h=c[d];n&&n.equals(h)||(t.push(h),n=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new W1[i.type]().fromJSON(i))}return this}}class hy extends b5{constructor(e){super(),this.type="Path",this.currentPoint=new Mt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new DR(this.currentPoint.clone(),new Mt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new BR(this.currentPoint.clone(),new Mt(e,t),new Mt(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const l=new OR(this.currentPoint.clone(),new Mt(e,t),new Mt(n,i),new Mt(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new FR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,l,c){const d=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+d,t+h,n,i,s,o,l,c),this}absellipse(e,t,n,i,s,o,l,c){const d=new zx(e,t,n,i,s,o,l,c);if(this.curves.length>0){const y=d.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(d);const h=d.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gy extends Jn{constructor(e=[new Mt(0,-.5),new Mt(.5,0),new Mt(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=li(i,0,Math.PI*2);const s=[],o=[],l=[],c=[],d=[],h=1/t,y=new ve,_=new Mt,x=new ve,A=new ve,P=new ve;let I=0,C=0;for(let D=0;D<=e.length-1;D++)switch(D){case 0:I=e[D+1].x-e[D].x,C=e[D+1].y-e[D].y,x.x=C*1,x.y=-I,x.z=C*0,P.copy(x),x.normalize(),c.push(x.x,x.y,x.z);break;case e.length-1:c.push(P.x,P.y,P.z);break;default:I=e[D+1].x-e[D].x,C=e[D+1].y-e[D].y,x.x=C*1,x.y=-I,x.z=C*0,A.copy(x),x.x+=P.x,x.y+=P.y,x.z+=P.z,x.normalize(),c.push(x.x,x.y,x.z),P.copy(A)}for(let D=0;D<=t;D++){const k=n+D*h*i,F=Math.sin(k),Q=Math.cos(k);for(let G=0;G<=e.length-1;G++){y.x=e[G].x*F,y.y=e[G].y,y.z=e[G].x*Q,o.push(y.x,y.y,y.z),_.x=D/t,_.y=G/(e.length-1),l.push(_.x,_.y);const Y=c[3*G+0]*F,ee=c[3*G+1],te=c[3*G+0]*Q;d.push(Y,ee,te)}}for(let D=0;D<t;D++)for(let k=0;k<e.length-1;k++){const F=k+D*e.length,Q=F,G=F+e.length,Y=F+e.length+1,ee=F+1;s.push(Q,G,ee),s.push(Y,ee,G)}this.setIndex(s),this.setAttribute("position",new vn(o,3)),this.setAttribute("uv",new vn(l,2)),this.setAttribute("normal",new vn(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gy(e.points,e.segments,e.phiStart,e.phiLength)}}class Wx extends Gy{constructor(e=1,t=1,n=4,i=8){const s=new hy;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Wx(e.radius,e.length,e.capSegments,e.radialSegments)}}class Vx extends Jn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],o=[],l=[],c=[],d=new ve,h=new Mt;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let y=0,_=3;y<=t;y++,_+=3){const x=n+y/t*i;d.x=e*Math.cos(x),d.y=e*Math.sin(x),o.push(d.x,d.y,d.z),l.push(0,0,1),h.x=(o[_]/e+1)/2,h.y=(o[_+1]/e+1)/2,c.push(h.x,h.y)}for(let y=1;y<=t;y++)s.push(y,y+1,0);this.setIndex(s),this.setAttribute("position",new vn(o,3)),this.setAttribute("normal",new vn(l,3)),this.setAttribute("uv",new vn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class W0 extends Jn{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const d=this;i=Math.floor(i),s=Math.floor(s);const h=[],y=[],_=[],x=[];let A=0;const P=[],I=n/2;let C=0;D(),o===!1&&(e>0&&k(!0),t>0&&k(!1)),this.setIndex(h),this.setAttribute("position",new vn(y,3)),this.setAttribute("normal",new vn(_,3)),this.setAttribute("uv",new vn(x,2));function D(){const F=new ve,Q=new ve;let G=0;const Y=(t-e)/n;for(let ee=0;ee<=s;ee++){const te=[],U=ee/s,V=U*(t-e)+e;for(let K=0;K<=i;K++){const E=K/i,a=E*c+l,p=Math.sin(a),M=Math.cos(a);Q.x=V*p,Q.y=-U*n+I,Q.z=V*M,y.push(Q.x,Q.y,Q.z),F.set(p,Y,M).normalize(),_.push(F.x,F.y,F.z),x.push(E,1-U),te.push(A++)}P.push(te)}for(let ee=0;ee<i;ee++)for(let te=0;te<s;te++){const U=P[te][ee],V=P[te+1][ee],K=P[te+1][ee+1],E=P[te][ee+1];e>0&&(h.push(U,V,E),G+=3),t>0&&(h.push(V,K,E),G+=3)}d.addGroup(C,G,0),C+=G}function k(F){const Q=A,G=new Mt,Y=new ve;let ee=0;const te=F===!0?e:t,U=F===!0?1:-1;for(let K=1;K<=i;K++)y.push(0,I*U,0),_.push(0,U,0),x.push(.5,.5),A++;const V=A;for(let K=0;K<=i;K++){const a=K/i*c+l,p=Math.cos(a),M=Math.sin(a);Y.x=te*M,Y.y=I*U,Y.z=te*p,y.push(Y.x,Y.y,Y.z),_.push(0,U,0),G.x=p*.5+.5,G.y=M*.5*U+.5,x.push(G.x,G.y),A++}for(let K=0;K<i;K++){const E=Q+K,a=V+K;F===!0?h.push(a,a+1,E):h.push(a+1,a,E),ee+=3}d.addGroup(C,ee,F===!0?1:2),C+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W0(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hx extends W0{constructor(e=1,t=1,n=32,i=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,i,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Hx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ff extends Jn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],o=[];l(i),d(n),h(),this.setAttribute("position",new vn(s,3)),this.setAttribute("normal",new vn(s.slice(),3)),this.setAttribute("uv",new vn(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(D){const k=new ve,F=new ve,Q=new ve;for(let G=0;G<t.length;G+=3)x(t[G+0],k),x(t[G+1],F),x(t[G+2],Q),c(k,F,Q,D)}function c(D,k,F,Q){const G=Q+1,Y=[];for(let ee=0;ee<=G;ee++){Y[ee]=[];const te=D.clone().lerp(F,ee/G),U=k.clone().lerp(F,ee/G),V=G-ee;for(let K=0;K<=V;K++)K===0&&ee===G?Y[ee][K]=te:Y[ee][K]=te.clone().lerp(U,K/V)}for(let ee=0;ee<G;ee++)for(let te=0;te<2*(G-ee)-1;te++){const U=Math.floor(te/2);te%2===0?(_(Y[ee][U+1]),_(Y[ee+1][U]),_(Y[ee][U])):(_(Y[ee][U+1]),_(Y[ee+1][U+1]),_(Y[ee+1][U]))}}function d(D){const k=new ve;for(let F=0;F<s.length;F+=3)k.x=s[F+0],k.y=s[F+1],k.z=s[F+2],k.normalize().multiplyScalar(D),s[F+0]=k.x,s[F+1]=k.y,s[F+2]=k.z}function h(){const D=new ve;for(let k=0;k<s.length;k+=3){D.x=s[k+0],D.y=s[k+1],D.z=s[k+2];const F=I(D)/2/Math.PI+.5,Q=C(D)/Math.PI+.5;o.push(F,1-Q)}A(),y()}function y(){for(let D=0;D<o.length;D+=6){const k=o[D+0],F=o[D+2],Q=o[D+4],G=Math.max(k,F,Q),Y=Math.min(k,F,Q);G>.9&&Y<.1&&(k<.2&&(o[D+0]+=1),F<.2&&(o[D+2]+=1),Q<.2&&(o[D+4]+=1))}}function _(D){s.push(D.x,D.y,D.z)}function x(D,k){const F=D*3;k.x=e[F+0],k.y=e[F+1],k.z=e[F+2]}function A(){const D=new ve,k=new ve,F=new ve,Q=new ve,G=new Mt,Y=new Mt,ee=new Mt;for(let te=0,U=0;te<s.length;te+=9,U+=6){D.set(s[te+0],s[te+1],s[te+2]),k.set(s[te+3],s[te+4],s[te+5]),F.set(s[te+6],s[te+7],s[te+8]),G.set(o[U+0],o[U+1]),Y.set(o[U+2],o[U+3]),ee.set(o[U+4],o[U+5]),Q.copy(D).add(k).add(F).divideScalar(3);const V=I(Q);P(G,U+0,D,V),P(Y,U+2,k,V),P(ee,U+4,F,V)}}function P(D,k,F,Q){Q<0&&D.x===1&&(o[k]=D.x-1),F.x===0&&F.z===0&&(o[k]=Q/2/Math.PI+.5)}function I(D){return Math.atan2(D.z,-D.x)}function C(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ff(e.vertices,e.indices,e.radius,e.details)}}class Gx extends ff{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gx(e.radius,e.detail)}}const Gw=new ve,jw=new ve,tb=new ve,qw=new vo;class A5 extends Jn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Kh*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,d=[0,0,0],h=["a","b","c"],y=new Array(3),_={},x=[];for(let A=0;A<c;A+=3){o?(d[0]=o.getX(A),d[1]=o.getX(A+1),d[2]=o.getX(A+2)):(d[0]=A,d[1]=A+1,d[2]=A+2);const{a:P,b:I,c:C}=qw;if(P.fromBufferAttribute(l,d[0]),I.fromBufferAttribute(l,d[1]),C.fromBufferAttribute(l,d[2]),qw.getNormal(tb),y[0]=`${Math.round(P.x*i)},${Math.round(P.y*i)},${Math.round(P.z*i)}`,y[1]=`${Math.round(I.x*i)},${Math.round(I.y*i)},${Math.round(I.z*i)}`,y[2]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let D=0;D<3;D++){const k=(D+1)%3,F=y[D],Q=y[k],G=qw[h[D]],Y=qw[h[k]],ee=`${F}_${Q}`,te=`${Q}_${F}`;te in _&&_[te]?(tb.dot(_[te].normal)<=s&&(x.push(G.x,G.y,G.z),x.push(Y.x,Y.y,Y.z)),_[te]=null):ee in _||(_[ee]={index0:d[D],index1:d[k],normal:tb.clone()})}}for(const A in _)if(_[A]){const{index0:P,index1:I}=_[A];Gw.fromBufferAttribute(l,P),jw.fromBufferAttribute(l,I),x.push(Gw.x,Gw.y,Gw.z),x.push(jw.x,jw.y,jw.z)}this.setAttribute("position",new vn(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Xh extends hy{constructor(e){super(e),this.uuid=Vo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new hy().fromJSON(i))}return this}}const Vie={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=T5(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,d,h,y,_,x;if(n&&(s=Kie(r,e,s,t)),r.length>80*t){l=d=r[0],c=h=r[1];for(let A=t;A<i;A+=t)y=r[A],_=r[A+1],y<l&&(l=y),_<c&&(c=_),y>d&&(d=y),_>h&&(h=_);x=Math.max(d-l,h-c),x=x!==0?32767/x:0}return dy(s,o,t,l,c,x,0),o}};function T5(r,e,t,n,i){let s,o;if(i===ise(r,e,t,n)>0)for(s=e;s<t;s+=n)o=yL(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=yL(s,r[s],r[s+1],o);return o&&jx(o,o.next)&&(my(o),o=o.next),o}function id(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(jx(t,t.next)||Jr(t.prev,t,t.next)===0)){if(my(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function dy(r,e,t,n,i,s,o){if(!r)return;!o&&s&&Qie(r,n,i,s);let l=r,c,d;for(;r.prev!==r.next;){if(c=r.prev,d=r.next,s?Gie(r,n,i,s):Hie(r)){e.push(c.i/t|0),e.push(r.i/t|0),e.push(d.i/t|0),my(r),r=d.next,l=d.next;continue}if(r=d,r===l){o?o===1?(r=jie(id(r),e,t),dy(r,e,t,n,i,s,2)):o===2&&qie(r,e,t,n,i,s):dy(id(r),e,t,n,i,s,1);break}}}function Hie(r){const e=r.prev,t=r,n=r.next;if(Jr(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,l=e.y,c=t.y,d=n.y,h=i<s?i<o?i:o:s<o?s:o,y=l<c?l<d?l:d:c<d?c:d,_=i>s?i>o?i:o:s>o?s:o,x=l>c?l>d?l:d:c>d?c:d;let A=n.next;for(;A!==e;){if(A.x>=h&&A.x<=_&&A.y>=y&&A.y<=x&&i0(i,l,s,c,o,d,A.x,A.y)&&Jr(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}function Gie(r,e,t,n){const i=r.prev,s=r,o=r.next;if(Jr(i,s,o)>=0)return!1;const l=i.x,c=s.x,d=o.x,h=i.y,y=s.y,_=o.y,x=l<c?l<d?l:d:c<d?c:d,A=h<y?h<_?h:_:y<_?y:_,P=l>c?l>d?l:d:c>d?c:d,I=h>y?h>_?h:_:y>_?y:_,C=PA(x,A,e,t,n),D=PA(P,I,e,t,n);let k=r.prevZ,F=r.nextZ;for(;k&&k.z>=C&&F&&F.z<=D;){if(k.x>=x&&k.x<=P&&k.y>=A&&k.y<=I&&k!==i&&k!==o&&i0(l,h,c,y,d,_,k.x,k.y)&&Jr(k.prev,k,k.next)>=0||(k=k.prevZ,F.x>=x&&F.x<=P&&F.y>=A&&F.y<=I&&F!==i&&F!==o&&i0(l,h,c,y,d,_,F.x,F.y)&&Jr(F.prev,F,F.next)>=0))return!1;F=F.nextZ}for(;k&&k.z>=C;){if(k.x>=x&&k.x<=P&&k.y>=A&&k.y<=I&&k!==i&&k!==o&&i0(l,h,c,y,d,_,k.x,k.y)&&Jr(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;F&&F.z<=D;){if(F.x>=x&&F.x<=P&&F.y>=A&&F.y<=I&&F!==i&&F!==o&&i0(l,h,c,y,d,_,F.x,F.y)&&Jr(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function jie(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!jx(i,s)&&R5(i,n,n.next,s)&&py(i,s)&&py(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),my(n),my(n.next),n=r=s),n=n.next}while(n!==r);return id(n)}function qie(r,e,t,n,i,s){let o=r;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&tse(o,l)){let c=C5(o,l);o=id(o,o.next),c=id(c,c.next),dy(o,e,t,n,i,s,0),dy(c,e,t,n,i,s,0);return}l=l.next}o=o.next}while(o!==r)}function Kie(r,e,t,n){const i=[];let s,o,l,c,d;for(s=0,o=e.length;s<o;s++)l=e[s]*n,c=s<o-1?e[s+1]*n:r.length,d=T5(r,l,c,n,!1),d===d.next&&(d.steiner=!0),i.push(ese(d));for(i.sort(Yie),s=0;s<i.length;s++)t=Xie(i[s],t);return t}function Yie(r,e){return r.x-e.x}function Xie(r,e){const t=$ie(r,e);if(!t)return e;const n=C5(t,r);return id(n,n.next),id(t,t.next)}function $ie(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const _=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(_<=s&&_>n&&(n=_,i=t.x<t.next.x?t:t.next,_===s))return i}t=t.next}while(t!==e);if(!i)return null;const l=i,c=i.x,d=i.y;let h=1/0,y;t=i;do s>=t.x&&t.x>=c&&s!==t.x&&i0(o<d?s:n,o,c,d,o<d?n:s,o,t.x,t.y)&&(y=Math.abs(o-t.y)/(s-t.x),py(t,r)&&(y<h||y===h&&(t.x>i.x||t.x===i.x&&Zie(i,t)))&&(i=t,h=y)),t=t.next;while(t!==l);return i}function Zie(r,e){return Jr(r.prev,r,e.prev)<0&&Jr(e.next,r,r.next)<0}function Qie(r,e,t,n){let i=r;do i.z===0&&(i.z=PA(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,Jie(i)}function Jie(r){let e,t,n,i,s,o,l,c,d=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<d&&(l++,n=n.nextZ,!!n);e++);for(c=d;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,c--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,d*=2}while(o>1);return r}function PA(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function ese(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function i0(r,e,t,n,i,s,o,l){return(i-o)*(e-l)>=(r-o)*(s-l)&&(r-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(i-o)*(n-l)}function tse(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!nse(r,e)&&(py(r,e)&&py(e,r)&&rse(r,e)&&(Jr(r.prev,r,e.prev)||Jr(r,e.prev,e))||jx(r,e)&&Jr(r.prev,r,r.next)>0&&Jr(e.prev,e,e.next)>0)}function Jr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function jx(r,e){return r.x===e.x&&r.y===e.y}function R5(r,e,t,n){const i=Yw(Jr(r,e,t)),s=Yw(Jr(r,e,n)),o=Yw(Jr(t,n,r)),l=Yw(Jr(t,n,e));return!!(i!==s&&o!==l||i===0&&Kw(r,t,e)||s===0&&Kw(r,n,e)||o===0&&Kw(t,r,n)||l===0&&Kw(t,e,n))}function Kw(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Yw(r){return r>0?1:r<0?-1:0}function nse(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&R5(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function py(r,e){return Jr(r.prev,r,r.next)<0?Jr(r,e,r.next)>=0&&Jr(r,r.prev,e)>=0:Jr(r,e,r.prev)<0||Jr(r,r.next,e)<0}function rse(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function C5(r,e){const t=new LA(r.i,r.x,r.y),n=new LA(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function yL(r,e,t,n){const i=new LA(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function my(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function LA(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ise(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class Nl{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Nl.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];vL(e),wL(n,e);let o=e.length;t.forEach(vL);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,wL(n,t[c]);const l=Vie.triangulate(n,i);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function vL(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function wL(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class qx extends Jn{constructor(e=new Xh([new Mt(.5,.5),new Mt(-.5,.5),new Mt(-.5,-.5),new Mt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let l=0,c=e.length;l<c;l++){const d=e[l];o(d)}this.setAttribute("position",new vn(i,3)),this.setAttribute("uv",new vn(s,2)),this.computeVertexNormals();function o(l){const c=[],d=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,y=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,A=t.bevelSize!==void 0?t.bevelSize:x-.1,P=t.bevelOffset!==void 0?t.bevelOffset:0,I=t.bevelSegments!==void 0?t.bevelSegments:3;const C=t.extrudePath,D=t.UVGenerator!==void 0?t.UVGenerator:sse;let k,F=!1,Q,G,Y,ee;C&&(k=C.getSpacedPoints(h),F=!0,_=!1,Q=C.computeFrenetFrames(h,!1),G=new ve,Y=new ve,ee=new ve),_||(I=0,x=0,A=0,P=0);const te=l.extractPoints(d);let U=te.shape;const V=te.holes;if(!Nl.isClockWise(U)){U=U.reverse();for(let Pe=0,ge=V.length;Pe<ge;Pe++){const Ge=V[Pe];Nl.isClockWise(Ge)&&(V[Pe]=Ge.reverse())}}const E=Nl.triangulateShape(U,V),a=U;for(let Pe=0,ge=V.length;Pe<ge;Pe++){const Ge=V[Pe];U=U.concat(Ge)}function p(Pe,ge,Ge){return ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(ge,Ge)}const M=U.length,R=E.length;function T(Pe,ge,Ge){let je,vt,He;const nt=Pe.x-ge.x,Pt=Pe.y-ge.y,fe=Ge.x-Pe.x,oe=Ge.y-Pe.y,Oe=nt*nt+Pt*Pt,Re=nt*oe-Pt*fe;if(Math.abs(Re)>Number.EPSILON){const Le=Math.sqrt(Oe),ot=Math.sqrt(fe*fe+oe*oe),et=ge.x-Pt/Le,Ye=ge.y+nt/Le,bt=Ge.x-oe/ot,ct=Ge.y+fe/ot,re=((bt-et)*oe-(ct-Ye)*fe)/(nt*oe-Pt*fe);je=et+nt*re-Pe.x,vt=Ye+Pt*re-Pe.y;const j=je*je+vt*vt;if(j<=2)return new Mt(je,vt);He=Math.sqrt(j/2)}else{let Le=!1;nt>Number.EPSILON?fe>Number.EPSILON&&(Le=!0):nt<-Number.EPSILON?fe<-Number.EPSILON&&(Le=!0):Math.sign(Pt)===Math.sign(oe)&&(Le=!0),Le?(je=-Pt,vt=nt,He=Math.sqrt(Oe)):(je=nt,vt=Pt,He=Math.sqrt(Oe/2))}return new Mt(je/He,vt/He)}const L=[];for(let Pe=0,ge=a.length,Ge=ge-1,je=Pe+1;Pe<ge;Pe++,Ge++,je++)Ge===ge&&(Ge=0),je===ge&&(je=0),L[Pe]=T(a[Pe],a[Ge],a[je]);const N=[];let v,u=L.concat();for(let Pe=0,ge=V.length;Pe<ge;Pe++){const Ge=V[Pe];v=[];for(let je=0,vt=Ge.length,He=vt-1,nt=je+1;je<vt;je++,He++,nt++)He===vt&&(He=0),nt===vt&&(nt=0),v[je]=T(Ge[je],Ge[He],Ge[nt]);N.push(v),u=u.concat(v)}for(let Pe=0;Pe<I;Pe++){const ge=Pe/I,Ge=x*Math.cos(ge*Math.PI/2),je=A*Math.sin(ge*Math.PI/2)+P;for(let vt=0,He=a.length;vt<He;vt++){const nt=p(a[vt],L[vt],je);me(nt.x,nt.y,-Ge)}for(let vt=0,He=V.length;vt<He;vt++){const nt=V[vt];v=N[vt];for(let Pt=0,fe=nt.length;Pt<fe;Pt++){const oe=p(nt[Pt],v[Pt],je);me(oe.x,oe.y,-Ge)}}}const S=A+P;for(let Pe=0;Pe<M;Pe++){const ge=_?p(U[Pe],u[Pe],S):U[Pe];F?(Y.copy(Q.normals[0]).multiplyScalar(ge.x),G.copy(Q.binormals[0]).multiplyScalar(ge.y),ee.copy(k[0]).add(Y).add(G),me(ee.x,ee.y,ee.z)):me(ge.x,ge.y,0)}for(let Pe=1;Pe<=h;Pe++)for(let ge=0;ge<M;ge++){const Ge=_?p(U[ge],u[ge],S):U[ge];F?(Y.copy(Q.normals[Pe]).multiplyScalar(Ge.x),G.copy(Q.binormals[Pe]).multiplyScalar(Ge.y),ee.copy(k[Pe]).add(Y).add(G),me(ee.x,ee.y,ee.z)):me(Ge.x,Ge.y,y/h*Pe)}for(let Pe=I-1;Pe>=0;Pe--){const ge=Pe/I,Ge=x*Math.cos(ge*Math.PI/2),je=A*Math.sin(ge*Math.PI/2)+P;for(let vt=0,He=a.length;vt<He;vt++){const nt=p(a[vt],L[vt],je);me(nt.x,nt.y,y+Ge)}for(let vt=0,He=V.length;vt<He;vt++){const nt=V[vt];v=N[vt];for(let Pt=0,fe=nt.length;Pt<fe;Pt++){const oe=p(nt[Pt],v[Pt],je);F?me(oe.x,oe.y+k[h-1].y,k[h-1].x+Ge):me(oe.x,oe.y,y+Ge)}}}W(),$();function W(){const Pe=i.length/3;if(_){let ge=0,Ge=M*ge;for(let je=0;je<R;je++){const vt=E[je];_e(vt[2]+Ge,vt[1]+Ge,vt[0]+Ge)}ge=h+I*2,Ge=M*ge;for(let je=0;je<R;je++){const vt=E[je];_e(vt[0]+Ge,vt[1]+Ge,vt[2]+Ge)}}else{for(let ge=0;ge<R;ge++){const Ge=E[ge];_e(Ge[2],Ge[1],Ge[0])}for(let ge=0;ge<R;ge++){const Ge=E[ge];_e(Ge[0]+M*h,Ge[1]+M*h,Ge[2]+M*h)}}n.addGroup(Pe,i.length/3-Pe,0)}function $(){const Pe=i.length/3;let ge=0;se(a,ge),ge+=a.length;for(let Ge=0,je=V.length;Ge<je;Ge++){const vt=V[Ge];se(vt,ge),ge+=vt.length}n.addGroup(Pe,i.length/3-Pe,1)}function se(Pe,ge){let Ge=Pe.length;for(;--Ge>=0;){const je=Ge;let vt=Ge-1;vt<0&&(vt=Pe.length-1);for(let He=0,nt=h+I*2;He<nt;He++){const Pt=M*He,fe=M*(He+1),oe=ge+je+Pt,Oe=ge+vt+Pt,Re=ge+vt+fe,Le=ge+je+fe;Ae(oe,Oe,Re,Le)}}}function me(Pe,ge,Ge){c.push(Pe),c.push(ge),c.push(Ge)}function _e(Pe,ge,Ge){_t(Pe),_t(ge),_t(Ge);const je=i.length/3,vt=D.generateTopUV(n,i,je-3,je-2,je-1);Ze(vt[0]),Ze(vt[1]),Ze(vt[2])}function Ae(Pe,ge,Ge,je){_t(Pe),_t(ge),_t(je),_t(ge),_t(Ge),_t(je);const vt=i.length/3,He=D.generateSideWallUV(n,i,vt-6,vt-3,vt-2,vt-1);Ze(He[0]),Ze(He[1]),Ze(He[3]),Ze(He[1]),Ze(He[2]),Ze(He[3])}function _t(Pe){i.push(c[Pe*3+0]),i.push(c[Pe*3+1]),i.push(c[Pe*3+2])}function Ze(Pe){s.push(Pe.x),s.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return ose(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new W1[i.type]().fromJSON(i)),new qx(n,e.options)}}const sse={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],l=e[n*3],c=e[n*3+1],d=e[i*3],h=e[i*3+1];return[new Mt(s,o),new Mt(l,c),new Mt(d,h)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],d=e[n*3],h=e[n*3+1],y=e[n*3+2],_=e[i*3],x=e[i*3+1],A=e[i*3+2],P=e[s*3],I=e[s*3+1],C=e[s*3+2];return Math.abs(l-h)<Math.abs(o-d)?[new Mt(o,1-c),new Mt(d,1-y),new Mt(_,1-A),new Mt(P,1-C)]:[new Mt(l,1-c),new Mt(h,1-y),new Mt(x,1-A),new Mt(I,1-C)]}};function ose(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Kx extends ff{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Kx(e.radius,e.detail)}}class jy extends ff{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jy(e.radius,e.detail)}}class Yx extends Jn{constructor(e=.5,t=1,n=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const l=[],c=[],d=[],h=[];let y=e;const _=(t-e)/i,x=new ve,A=new Mt;for(let P=0;P<=i;P++){for(let I=0;I<=n;I++){const C=s+I/n*o;x.x=y*Math.cos(C),x.y=y*Math.sin(C),c.push(x.x,x.y,x.z),d.push(0,0,1),A.x=(x.x/t+1)/2,A.y=(x.y/t+1)/2,h.push(A.x,A.y)}y+=_}for(let P=0;P<i;P++){const I=P*(n+1);for(let C=0;C<n;C++){const D=C+I,k=D,F=D+n+1,Q=D+n+2,G=D+1;l.push(k,F,G),l.push(F,Q,G)}}this.setIndex(l),this.setAttribute("position",new vn(c,3)),this.setAttribute("normal",new vn(d,3)),this.setAttribute("uv",new vn(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Xx extends Jn{constructor(e=new Xh([new Mt(0,.5),new Mt(-.5,-.5),new Mt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)d(e);else for(let h=0;h<e.length;h++)d(e[h]),this.addGroup(l,c,h),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new vn(i,3)),this.setAttribute("normal",new vn(s,3)),this.setAttribute("uv",new vn(o,2));function d(h){const y=i.length/3,_=h.extractPoints(t);let x=_.shape;const A=_.holes;Nl.isClockWise(x)===!1&&(x=x.reverse());for(let I=0,C=A.length;I<C;I++){const D=A[I];Nl.isClockWise(D)===!0&&(A[I]=D.reverse())}const P=Nl.triangulateShape(x,A);for(let I=0,C=A.length;I<C;I++){const D=A[I];x=x.concat(D)}for(let I=0,C=x.length;I<C;I++){const D=x[I];i.push(D.x,D.y,0),s.push(0,0,1),o.push(D.x,D.y)}for(let I=0,C=P.length;I<C;I++){const D=P[I],k=D[0]+y,F=D[1]+y,Q=D[2]+y;n.push(k,F,Q),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ase(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}return new Xx(n,e.curveSegments)}}function ase(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class qy extends Jn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(o+l,Math.PI);let d=0;const h=[],y=new ve,_=new ve,x=[],A=[],P=[],I=[];for(let C=0;C<=n;C++){const D=[],k=C/n;let F=0;C===0&&o===0?F=.5/t:C===n&&c===Math.PI&&(F=-.5/t);for(let Q=0;Q<=t;Q++){const G=Q/t;y.x=-e*Math.cos(i+G*s)*Math.sin(o+k*l),y.y=e*Math.cos(o+k*l),y.z=e*Math.sin(i+G*s)*Math.sin(o+k*l),A.push(y.x,y.y,y.z),_.copy(y).normalize(),P.push(_.x,_.y,_.z),I.push(G+F,1-k),D.push(d++)}h.push(D)}for(let C=0;C<n;C++)for(let D=0;D<t;D++){const k=h[C][D+1],F=h[C][D],Q=h[C+1][D],G=h[C+1][D+1];(C!==0||o>0)&&x.push(k,F,G),(C!==n-1||c<Math.PI)&&x.push(F,Q,G)}this.setIndex(x),this.setAttribute("position",new vn(A,3)),this.setAttribute("normal",new vn(P,3)),this.setAttribute("uv",new vn(I,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $x extends ff{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $x(e.radius,e.detail)}}class Zx extends Jn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const o=[],l=[],c=[],d=[],h=new ve,y=new ve,_=new ve;for(let x=0;x<=n;x++)for(let A=0;A<=i;A++){const P=A/i*s,I=x/n*Math.PI*2;y.x=(e+t*Math.cos(I))*Math.cos(P),y.y=(e+t*Math.cos(I))*Math.sin(P),y.z=t*Math.sin(I),l.push(y.x,y.y,y.z),h.x=e*Math.cos(P),h.y=e*Math.sin(P),_.subVectors(y,h).normalize(),c.push(_.x,_.y,_.z),d.push(A/i),d.push(x/n)}for(let x=1;x<=n;x++)for(let A=1;A<=i;A++){const P=(i+1)*x+A-1,I=(i+1)*(x-1)+A-1,C=(i+1)*(x-1)+A,D=(i+1)*x+A;o.push(P,I,D),o.push(I,C,D)}this.setIndex(o),this.setAttribute("position",new vn(l,3)),this.setAttribute("normal",new vn(c,3)),this.setAttribute("uv",new vn(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Qx extends Jn{constructor(e=1,t=.4,n=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:o},n=Math.floor(n),i=Math.floor(i);const l=[],c=[],d=[],h=[],y=new ve,_=new ve,x=new ve,A=new ve,P=new ve,I=new ve,C=new ve;for(let k=0;k<=n;++k){const F=k/n*s*Math.PI*2;D(F,s,o,e,x),D(F+.01,s,o,e,A),I.subVectors(A,x),C.addVectors(A,x),P.crossVectors(I,C),C.crossVectors(P,I),P.normalize(),C.normalize();for(let Q=0;Q<=i;++Q){const G=Q/i*Math.PI*2,Y=-t*Math.cos(G),ee=t*Math.sin(G);y.x=x.x+(Y*C.x+ee*P.x),y.y=x.y+(Y*C.y+ee*P.y),y.z=x.z+(Y*C.z+ee*P.z),c.push(y.x,y.y,y.z),_.subVectors(y,x).normalize(),d.push(_.x,_.y,_.z),h.push(k/n),h.push(Q/i)}}for(let k=1;k<=n;k++)for(let F=1;F<=i;F++){const Q=(i+1)*(k-1)+(F-1),G=(i+1)*k+(F-1),Y=(i+1)*k+F,ee=(i+1)*(k-1)+F;l.push(Q,G,ee),l.push(G,Y,ee)}this.setIndex(l),this.setAttribute("position",new vn(c,3)),this.setAttribute("normal",new vn(d,3)),this.setAttribute("uv",new vn(h,2));function D(k,F,Q,G,Y){const ee=Math.cos(k),te=Math.sin(k),U=Q/F*k,V=Math.cos(U);Y.x=G*(2+V)*.5*ee,Y.y=G*(2+V)*te*.5,Y.z=G*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Jx extends Jn{constructor(e=new UR(new ve(-1,-1,0),new ve(-1,1,0),new ve(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new ve,c=new ve,d=new Mt;let h=new ve;const y=[],_=[],x=[],A=[];P(),this.setIndex(A),this.setAttribute("position",new vn(y,3)),this.setAttribute("normal",new vn(_,3)),this.setAttribute("uv",new vn(x,2));function P(){for(let k=0;k<t;k++)I(k);I(s===!1?t:0),D(),C()}function I(k){h=e.getPointAt(k/t,h);const F=o.normals[k],Q=o.binormals[k];for(let G=0;G<=i;G++){const Y=G/i*Math.PI*2,ee=Math.sin(Y),te=-Math.cos(Y);c.x=te*F.x+ee*Q.x,c.y=te*F.y+ee*Q.y,c.z=te*F.z+ee*Q.z,c.normalize(),_.push(c.x,c.y,c.z),l.x=h.x+n*c.x,l.y=h.y+n*c.y,l.z=h.z+n*c.z,y.push(l.x,l.y,l.z)}}function C(){for(let k=1;k<=t;k++)for(let F=1;F<=i;F++){const Q=(i+1)*(k-1)+(F-1),G=(i+1)*k+(F-1),Y=(i+1)*k+F,ee=(i+1)*(k-1)+F;A.push(Q,G,ee),A.push(G,Y,ee)}}function D(){for(let k=0;k<=t;k++)for(let F=0;F<=i;F++)d.x=k/t,d.y=F/i,x.push(d.x,d.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Jx(new W1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class I5 extends Jn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new ve,s=new ve;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,h=c.length;d<h;++d){const y=c[d],_=y.start,x=y.count;for(let A=_,P=_+x;A<P;A+=3)for(let I=0;I<3;I++){const C=l.getX(A+I),D=l.getX(A+(I+1)%3);i.fromBufferAttribute(o,C),s.fromBufferAttribute(o,D),_L(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let d=0;d<3;d++){const h=3*l+d,y=3*l+(d+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,y),_L(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new vn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function _L(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var xL=Object.freeze({__proto__:null,BoxGeometry:pd,CapsuleGeometry:Wx,CircleGeometry:Vx,ConeGeometry:Hx,CylinderGeometry:W0,DodecahedronGeometry:Gx,EdgesGeometry:A5,ExtrudeGeometry:qx,IcosahedronGeometry:Kx,LatheGeometry:Gy,OctahedronGeometry:jy,PlaneGeometry:F0,PolyhedronGeometry:ff,RingGeometry:Yx,ShapeGeometry:Xx,SphereGeometry:qy,TetrahedronGeometry:$x,TorusGeometry:Zx,TorusKnotGeometry:Qx,TubeGeometry:Jx,WireframeGeometry:I5});class N5 extends Ds{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new en(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class P5 extends jo{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zR extends Ds{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new en(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WR extends zR{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return li(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new en(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new en(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new en(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class L5 extends Ds{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new en(16777215),this.specular=new en(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.combine=Uy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class k5 extends Ds{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new en(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class O5 extends Ds{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class D5 extends Ds{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new en(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new en(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Go,this.combine=Uy,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class B5 extends Ds{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new en(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uf,this.normalScale=new Mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class U5 extends Js{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Wh(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function F5(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function z5(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function kA(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let c=0;c!==e;++c)i[o++]=r[l+c]}return i}function VR(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}function lse(r,e,t,n,i=30){const s=r.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const d=s.tracks[c],h=d.getValueSize(),y=[],_=[];for(let x=0;x<d.times.length;++x){const A=d.times[x]*i;if(!(A<t||A>=n)){y.push(d.times[x]);for(let P=0;P<h;++P)_.push(d.values[x*h+P])}}y.length!==0&&(d.times=Wh(y,d.times.constructor),d.values=Wh(_,d.values.constructor),o.push(d))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function use(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let o=0;o<i;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const d=r.tracks.find(function(C){return C.name===l.name&&C.ValueTypeName===c});if(d===void 0)continue;let h=0;const y=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=y/3);let _=0;const x=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const A=l.times.length-1;let P;if(s<=l.times[0]){const C=h,D=y-h;P=l.values.slice(C,D)}else if(s>=l.times[A]){const C=A*y+h,D=C+y-h;P=l.values.slice(C,D)}else{const C=l.createInterpolant(),D=h,k=y-h;C.evaluate(s),P=C.resultBuffer.slice(D,k)}c==="quaternion"&&new ks().fromArray(P).normalize().conjugate().toArray(P);const I=d.times.length;for(let C=0;C<I;++C){const D=C*x+_;if(c==="quaternion")ks.multiplyQuaternionsFlat(d.values,D,P,0,d.values,D);else{const k=x-_*2;for(let F=0;F<k;++F)d.values[D+F]-=P[F]}}}return r.blendMode=wR,r}const cse={convertArray:Wh,isTypedArray:F5,getKeyframeOrder:z5,sortedArray:kA,flattenJSON:VR,subclip:lse,makeClipAdditive:use};class Ky{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class W5 extends Ky{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Uh,endingEnd:Uh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,l=i[s],c=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case Fh:s=e,l=2*t-n;break;case sy:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Fh:o=e,c=2*n-t;break;case sy:o=1,c=n+i[1]-i[0];break;default:o=e-1,c=t}const d=(n-t)*.5,h=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(c-n),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,h=this._offsetPrev,y=this._offsetNext,_=this._weightPrev,x=this._weightNext,A=(n-t)/(i-t),P=A*A,I=P*A,C=-_*I+2*_*P-_*A,D=(1+_)*I+(-1.5-2*_)*P+(-.5+_)*A+1,k=(-1-x)*I+(1.5+x)*P+.5*A,F=x*I-x*P;for(let Q=0;Q!==l;++Q)s[Q]=C*o[h+Q]+D*o[d+Q]+k*o[c+Q]+F*o[y+Q];return s}}class HR extends Ky{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,d=c-l,h=(n-t)/(i-t),y=1-h;for(let _=0;_!==l;++_)s[_]=o[d+_]*y+o[c+_]*h;return s}}class V5 extends Ky{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Za{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wh(t,this.TimeBufferType),this.values=Wh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Wh(e.times,Array),values:Wh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new V5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new HR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new W5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case iy:t=this.InterpolantFactoryMethodDiscrete;break;case U1:t=this.InterpolantFactoryMethodLinear;break;case E_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return iy;case this.InterpolantFactoryMethodLinear:return U1;case this.InterpolantFactoryMethodSmooth:return E_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(i!==void 0&&F5(i))for(let l=0,c=i.length;l!==c;++l){const d=i[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===E_,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const d=e[l],h=e[l+1];if(d!==h&&(l!==1||d!==e[0]))if(i)c=!0;else{const y=l*n,_=y-n,x=y+n;for(let A=0;A!==n;++A){const P=t[y+A];if(P!==t[_+A]||P!==t[x+A]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const y=l*n,_=o*n;for(let x=0;x!==n;++x)t[_+x]=t[y+x]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,c=o*n,d=0;d!==n;++d)t[c+d]=t[l+d];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Za.prototype.TimeBufferType=Float32Array;Za.prototype.ValueBufferType=Float32Array;Za.prototype.DefaultInterpolation=U1;class md extends Za{constructor(e,t,n){super(e,t,n)}}md.prototype.ValueTypeName="bool";md.prototype.ValueBufferType=Array;md.prototype.DefaultInterpolation=iy;md.prototype.InterpolantFactoryMethodLinear=void 0;md.prototype.InterpolantFactoryMethodSmooth=void 0;class GR extends Za{}GR.prototype.ValueTypeName="color";class gy extends Za{}gy.prototype.ValueTypeName="number";class H5 extends Ky{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-t)/(i-t);let d=e*l;for(let h=d+l;d!==h;d+=4)ks.slerpFlat(s,0,o,d-l,o,d,c);return s}}class Yy extends Za{InterpolantFactoryMethodLinear(e){return new H5(this.times,this.values,this.getValueSize(),e)}}Yy.prototype.ValueTypeName="quaternion";Yy.prototype.InterpolantFactoryMethodSmooth=void 0;class gd extends Za{constructor(e,t,n){super(e,t,n)}}gd.prototype.ValueTypeName="string";gd.prototype.ValueBufferType=Array;gd.prototype.DefaultInterpolation=iy;gd.prototype.InterpolantFactoryMethodLinear=void 0;gd.prototype.InterpolantFactoryMethodSmooth=void 0;class yy extends Za{}yy.prototype.ValueTypeName="vector";class vy{constructor(e="",t=-1,n=[],i=Nx){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Vo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(hse(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Za.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],d=[];c.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const h=z5(c);c=kA(c,1,h),d=kA(d,1,h),!i&&c[0]===0&&(c.push(s),d.push(d[0])),o.push(new gy(".morphTargetInfluences["+t[l].name+"]",c,d).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const d=e[l],h=d.name.match(s);if(h&&h.length>1){const y=h[1];let _=i[y];_||(i[y]=_=[]),_.push(d)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,_,x,A,P){if(x.length!==0){const I=[],C=[];VR(x,I,C,A),I.length!==0&&P.push(new y(_,I,C))}},i=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const d=e.hierarchy||[];for(let y=0;y<d.length;y++){const _=d[y].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let A;for(A=0;A<_.length;A++)if(_[A].morphTargets)for(let P=0;P<_[A].morphTargets.length;P++)x[_[A].morphTargets[P]]=-1;for(const P in x){const I=[],C=[];for(let D=0;D!==_[A].morphTargets.length;++D){const k=_[A];I.push(k.time),C.push(k.morphTarget===P?1:0)}i.push(new gy(".morphTargetInfluence["+P+"]",I,C))}c=x.length*o}else{const x=".bones["+t[y].name+"]";n(yy,x+".position",_,"pos",i),n(Yy,x+".quaternion",_,"rot",i),n(yy,x+".scale",_,"scl",i)}}return i.length===0?null:new this(s,c,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fse(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gy;case"vector":case"vector2":case"vector3":case"vector4":return yy;case"color":return GR;case"quaternion":return Yy;case"bool":case"boolean":return md;case"string":return gd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function hse(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fse(r.type);if(r.times===void 0){const t=[],n=[];VR(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Fu={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class jR{constructor(e,t,n){const i=this;let s=!1,o=0,l=0,c;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){l++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,l),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,l),o===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,y){return d.push(h,y),this},this.removeHandler=function(h){const y=d.indexOf(h);return y!==-1&&d.splice(y,2),this},this.getHandler=function(h){for(let y=0,_=d.length;y<_;y+=2){const x=d[y],A=d[y+1];if(x.global&&(x.lastIndex=0),x.test(h))return A}return null}}}const G5=new jR;class So{constructor(e){this.manager=e!==void 0?e:G5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}So.DEFAULT_MATERIAL_NAME="__DEFAULT";const Mu={};class dse extends Error{constructor(e,t){super(e),this.response=t}}class $u extends So{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Fu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Mu[e]!==void 0){Mu[e].push({onLoad:t,onProgress:n,onError:i});return}Mu[e]=[],Mu[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const h=Mu[e],y=d.body.getReader(),_=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),x=_?parseInt(_):0,A=x!==0;let P=0;const I=new ReadableStream({start(C){D();function D(){y.read().then(({done:k,value:F})=>{if(k)C.close();else{P+=F.byteLength;const Q=new ProgressEvent("progress",{lengthComputable:A,loaded:P,total:x});for(let G=0,Y=h.length;G<Y;G++){const ee=h[G];ee.onProgress&&ee.onProgress(Q)}C.enqueue(F),D()}},k=>{C.error(k)})}}});return new Response(I)}else throw new dse(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(c){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(h=>new DOMParser().parseFromString(h,l));case"json":return d.json();default:if(l===void 0)return d.text();{const y=/charset="?([^;"\s]*)"?/i.exec(l),_=y&&y[1]?y[1].toLowerCase():void 0,x=new TextDecoder(_);return d.arrayBuffer().then(A=>x.decode(A))}}}).then(d=>{Fu.add(e,d);const h=Mu[e];delete Mu[e];for(let y=0,_=h.length;y<_;y++){const x=h[y];x.onLoad&&x.onLoad(d)}}).catch(d=>{const h=Mu[e];if(h===void 0)throw this.manager.itemError(e),d;delete Mu[e];for(let y=0,_=h.length;y<_;y++){const x=h[y];x.onError&&x.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pse extends So{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new $u(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=vy.parse(e[n]);t.push(i)}return t}}class mse extends So{constructor(e){super(e)}load(e,t,n,i){const s=this,o=[],l=new Fx,c=new $u(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let d=0;function h(y){c.load(e[y],function(_){const x=s.parse(_,!0);o[y]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},d+=1,d===6&&(x.mipmapCount===1&&(l.minFilter=Ii),l.image=o,l.format=x.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let y=0,_=e.length;y<_;++y)h(y);else c.load(e,function(y){const _=s.parse(y,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let A=0;A<x;A++){o[A]={mipmaps:[]};for(let P=0;P<_.mipmapCount;P++)o[A].mipmaps.push(_.mipmaps[A*_.mipmapCount+P]),o[A].format=_.format,o[A].width=_.width,o[A].height=_.height}l.image=o}else l.image.width=_.width,l.image.height=_.height,l.mipmaps=_.mipmaps;_.mipmapCount===1&&(l.minFilter=Ii),l.format=_.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}class wy extends So{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Fu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=fy("img");function c(){h(),Fu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(y){h(),i&&i(y),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class gse extends So{constructor(e){super(e)}load(e,t,n,i){const s=new Vy;s.colorSpace=aa;const o=new wy(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(d){o.load(e[d],function(h){s.images[d]=h,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let d=0;d<e.length;++d)c(d);return s}}class yse extends So{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Il,l=new $u(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let d;try{d=s.parse(c)}catch(h){if(i!==void 0)i(h);else{console.error(h);return}}d.image!==void 0?o.image=d.image:d.data!==void 0&&(o.image.width=d.width,o.image.height=d.height,o.image.data=d.data),o.wrapS=d.wrapS!==void 0?d.wrapS:la,o.wrapT=d.wrapT!==void 0?d.wrapT:la,o.magFilter=d.magFilter!==void 0?d.magFilter:Ii,o.minFilter=d.minFilter!==void 0?d.minFilter:Ii,o.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.colorSpace!==void 0&&(o.colorSpace=d.colorSpace),d.flipY!==void 0&&(o.flipY=d.flipY),d.format!==void 0&&(o.format=d.format),d.type!==void 0&&(o.type=d.type),d.mipmaps!==void 0&&(o.mipmaps=d.mipmaps,o.minFilter=El),d.mipmapCount===1&&(o.minFilter=Ii),d.generateMipmaps!==void 0&&(o.generateMipmaps=d.generateMipmaps),o.needsUpdate=!0,t&&t(o,d)},n,i),o}}class vse extends So{constructor(e){super(e)}load(e,t,n,i){const s=new ui,o=new wy(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class hf extends pr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new en(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class j5 extends hf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(pr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new en(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const nb=new Ln,SL=new ve,ML=new ve;class qR{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Mt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ln,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hy,this._frameExtents=new Mt(1,1),this._viewportCount=1,this._viewports=[new fr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;SL.setFromMatrixPosition(e.matrixWorld),t.position.copy(SL),ML.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ML),t.updateMatrixWorld(),nb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nb),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(nb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class wse extends qR{constructor(){super(new gi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=E0*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class q5 extends hf{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pr.DEFAULT_UP),this.updateMatrix(),this.target=new pr,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new wse}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const EL=new Ln,lg=new ve,rb=new ve;class _se extends qR{constructor(){super(new gi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Mt(4,2),this._viewportCount=6,this._viewports=[new fr(2,1,1,1),new fr(0,1,1,1),new fr(3,1,1,1),new fr(1,1,1,1),new fr(3,0,1,1),new fr(1,0,1,1)],this._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],this._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),lg.setFromMatrixPosition(e.matrixWorld),n.position.copy(lg),rb.copy(n.position),rb.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(rb),n.updateMatrixWorld(),i.makeTranslation(-lg.x,-lg.y,-lg.z),EL.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EL)}}class K5 extends hf{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new _se}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xse extends qR{constructor(){super(new Jc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Y5 extends hf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pr.DEFAULT_UP),this.updateMatrix(),this.target=new pr,this.shadow=new xse}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class X5 extends hf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class $5 extends hf{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Z5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ve)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class Q5 extends hf{constructor(e=new Z5,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class eS extends So{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,o=new $u(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new en().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=n(o.value);break;case"c":i.uniforms[s].value=new en().setHex(o.value);break;case"v2":i.uniforms[s].value=new Mt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new ve().fromArray(o.value);break;case"v4":i.uniforms[s].value=new fr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new jn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Ln().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Mt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Mt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return eS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:N5,SpriteMaterial:NR,RawShaderMaterial:P5,ShaderMaterial:jo,PointsMaterial:LR,MeshPhysicalMaterial:WR,MeshStandardMaterial:zR,MeshPhongMaterial:L5,MeshToonMaterial:k5,MeshNormalMaterial:O5,MeshLambertMaterial:D5,MeshDepthMaterial:RR,MeshDistanceMaterial:CR,MeshBasicMaterial:cf,MeshMatcapMaterial:B5,LineDashedMaterial:U5,LineBasicMaterial:Js,Material:Ds};return new t[e]}}class OA{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class J5 extends Jn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class eF extends So{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new $u(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(x,A){if(t[A]!==void 0)return t[A];const I=x.interleavedBuffers[A],C=s(x,I.buffer),D=t0(I.type,C),k=new Bx(D,I.stride);return k.uuid=I.uuid,t[A]=k,k}function s(x,A){if(n[A]!==void 0)return n[A];const I=x.arrayBuffers[A],C=new Uint32Array(I).buffer;return n[A]=C,C}const o=e.isInstancedBufferGeometry?new J5:new Jn,l=e.data.index;if(l!==void 0){const x=t0(l.type,l.array);o.setIndex(new Nr(x,1))}const c=e.data.attributes;for(const x in c){const A=c[x];let P;if(A.isInterleavedBufferAttribute){const I=i(e.data,A.data);P=new rd(I,A.itemSize,A.offset,A.normalized)}else{const I=t0(A.type,A.array),C=A.isInstancedBufferAttribute?A0:Nr;P=new C(I,A.itemSize,A.normalized)}A.name!==void 0&&(P.name=A.name),A.usage!==void 0&&P.setUsage(A.usage),o.setAttribute(x,P)}const d=e.data.morphAttributes;if(d)for(const x in d){const A=d[x],P=[];for(let I=0,C=A.length;I<C;I++){const D=A[I];let k;if(D.isInterleavedBufferAttribute){const F=i(e.data,D.data);k=new rd(F,D.itemSize,D.offset,D.normalized)}else{const F=t0(D.type,D.array);k=new Nr(F,D.itemSize,D.normalized)}D.name!==void 0&&(k.name=D.name),P.push(k)}o.morphAttributes[x]=P}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(y!==void 0)for(let x=0,A=y.length;x!==A;++x){const P=y[x];o.addGroup(P.start,P.count,P.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const x=new ve;_.center!==void 0&&x.fromArray(_.center),o.boundingSphere=new Os(x,_.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Sse extends So{constructor(e){super(e)}load(e,t,n,i){const s=this,o=this.path===""?OA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new $u(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let d=null;try{d=JSON.parse(c)}catch(y){i!==void 0&&i(y),console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message);return}const h=d.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(d,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?OA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new $u(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(d)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,c,l,n),h=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,h),this.bindLightTargets(d),t!==void 0){let y=!1;for(const _ in o)if(o[_].data instanceof HTMLImageElement){y=!0;break}y===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,l,o,t),d=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,d),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new Xh().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Ux().fromJSON(e[s],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new eF;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(c);break;default:c.type in xL?l=xL[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new eS;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),i[c.uuid]=n[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=vy.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function o(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const d=c,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return o(h)}else return c.data?{data:t0(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new jR(t);s=new wy(c),s.setCrossOrigin(this.crossOrigin);for(let d=0,h=e.length;d<h;d++){const y=e[d],_=y.url;if(Array.isArray(_)){const x=[];for(let A=0,P=_.length;A<P;A++){const I=_[A],C=l(I);C!==null&&(C instanceof HTMLImageElement?x.push(C):x.push(new Il(C.data,C.width,C.height)))}i[y.uuid]=new zh(x)}else{const x=l(y.url);i[y.uuid]=new zh(x)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(c)}else return o.data?{data:t0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new wy(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],d=c.url;if(Array.isArray(d)){const h=[];for(let y=0,_=d.length;y<_;y++){const x=d[y],A=await s(x);A!==null&&(A instanceof HTMLImageElement?h.push(A):h.push(new Il(A.data,A.width,A.height)))}n[c.uuid]=new zh(h)}else{const h=await s(c.url);n[c.uuid]=new zh(h)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],d=c.data;let h;Array.isArray(d)?(h=new Vy,d.length===6&&(h.needsUpdate=!0)):(d&&d.data?h=new Il:h=new ui,d&&(h.needsUpdate=!0)),h.source=c,h.uuid=l.uuid,l.name!==void 0&&(h.name=l.name),l.mapping!==void 0&&(h.mapping=n(l.mapping,Mse)),l.channel!==void 0&&(h.channel=l.channel),l.offset!==void 0&&h.offset.fromArray(l.offset),l.repeat!==void 0&&h.repeat.fromArray(l.repeat),l.center!==void 0&&h.center.fromArray(l.center),l.rotation!==void 0&&(h.rotation=l.rotation),l.wrap!==void 0&&(h.wrapS=n(l.wrap[0],bL),h.wrapT=n(l.wrap[1],bL)),l.format!==void 0&&(h.format=l.format),l.internalFormat!==void 0&&(h.internalFormat=l.internalFormat),l.type!==void 0&&(h.type=l.type),l.colorSpace!==void 0&&(h.colorSpace=l.colorSpace),l.minFilter!==void 0&&(h.minFilter=n(l.minFilter,AL)),l.magFilter!==void 0&&(h.magFilter=n(l.magFilter,AL)),l.anisotropy!==void 0&&(h.anisotropy=l.anisotropy),l.flipY!==void 0&&(h.flipY=l.flipY),l.generateMipmaps!==void 0&&(h.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(h.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(h.compareFunction=l.compareFunction),l.userData!==void 0&&(h.userData=l.userData),i[l.uuid]=h}return i}parseObject(e,t,n,i,s){let o;function l(_){return t[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),t[_]}function c(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let A=0,P=_.length;A<P;A++){const I=_[A];n[I]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",I),x.push(n[I])}return x}return n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),n[_]}}function d(_){return i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),i[_]}let h,y;switch(e.type){case"Scene":o=new IR,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new en(e.background):o.background=d(e.background)),e.environment!==void 0&&(o.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Dx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ox(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new gi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Jc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new X5(e.color,e.intensity);break;case"DirectionalLight":o=new Y5(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new K5(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new $5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new q5(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new j5(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Q5().fromJSON(e);break;case"SkinnedMesh":h=l(e.geometry),y=c(e.material),o=new g5(h,y),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=l(e.geometry),y=c(e.material),o=new Pi(h,y);break;case"InstancedMesh":h=l(e.geometry),y=c(e.material);const _=e.count,x=e.instanceMatrix,A=e.instanceColor;o=new y5(h,y,_),o.instanceMatrix=new A0(new Float32Array(x.array),16),A!==void 0&&(o.instanceColor=new A0(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":h=l(e.geometry),y=c(e.material),o=new v5(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,y),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(P=>{const I=new Zs;I.min.fromArray(P.boxMin),I.max.fromArray(P.boxMax);const C=new Os;return C.radius=P.sphereRadius,C.center.fromArray(P.sphereCenter),{boxInitialized:P.boxInitialized,box:I,sphereInitialized:P.sphereInitialized,sphere:C}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=d(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=d(e.colorsTexture.uuid));break;case"LOD":o=new m5;break;case"Line":o=new of(l(e.geometry),c(e.material));break;case"LineLoop":o=new w5(l(e.geometry),c(e.material));break;case"LineSegments":o=new Ol(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new _5(l(e.geometry),c(e.material));break;case"Sprite":o=new p5(c(e.material));break;case"Group":o=new r0;break;case"Bone":o=new PR;break;default:o=new pr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let x=0;x<_.length;x++)o.add(this.parseObject(_[x],t,n,i,s))}if(e.animations!==void 0){const _=e.animations;for(let x=0;x<_.length;x++){const A=_[x];o.animations.push(s[A])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const _=e.levels;for(let x=0;x<_.length;x++){const A=_[x],P=o.getObjectByProperty("uuid",A.object);P!==void 0&&o.addLevel(P,A.distance,A.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new pr}})}}const Mse={UVMapping:Ex,CubeReflectionMapping:Yu,CubeRefractionMapping:sf,EquirectangularReflectionMapping:ey,EquirectangularRefractionMapping:ty,CubeUVReflectionMapping:B0},bL={RepeatWrapping:ny,ClampToEdgeWrapping:la,MirroredRepeatWrapping:ry},AL={NearestFilter:es,NearestMipmapNearestFilter:uR,NearestMipmapLinearFilter:e0,LinearFilter:Ii,LinearMipmapNearestFilter:Cg,LinearMipmapLinearFilter:El};class Ese extends So{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Fu.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(d=>{t&&t(d),s.manager.itemEnd(e)}).catch(d=>{i&&i(d)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(d){return Fu.add(e,d),t&&t(d),s.manager.itemEnd(e),d}).catch(function(d){i&&i(d),Fu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Fu.add(e,c),s.manager.itemStart(e)}}let Xw;class KR{static getContext(){return Xw===void 0&&(Xw=new(window.AudioContext||window.webkitAudioContext)),Xw}static setContext(e){Xw=e}}class bse extends So{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new $u(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const d=c.slice(0);KR.getContext().decodeAudioData(d,function(y){t(y)}).catch(l)}catch(d){l(d)}},n,i);function l(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const TL=new Ln,RL=new Ln,fh=new Ln;class Ase{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,fh.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Kh*t.fov*.5)/t.zoom;let l,c;RL.elements[12]=-i,TL.elements[12]=i,l=-o*t.aspect+s,c=o*t.aspect+s,fh.elements[0]=2*t.near/(c-l),fh.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(fh),l=-o*t.aspect-s,c=o*t.aspect-s,fh.elements[0]=2*t.near/(c-l),fh.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(fh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(RL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(TL)}}class YR{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=CL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function CL(){return performance.now()}const hh=new ve,IL=new ks,Tse=new ve,dh=new ve;class Rse extends pr{constructor(){super(),this.type="AudioListener",this.context=KR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new YR}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hh,IL,Tse),dh.set(0,0,-1).applyQuaternion(IL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hh.x,i),t.positionY.linearRampToValueAtTime(hh.y,i),t.positionZ.linearRampToValueAtTime(hh.z,i),t.forwardX.linearRampToValueAtTime(dh.x,i),t.forwardY.linearRampToValueAtTime(dh.y,i),t.forwardZ.linearRampToValueAtTime(dh.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(hh.x,hh.y,hh.z),t.setOrientation(dh.x,dh.y,dh.z,n.x,n.y,n.z)}}class tF extends pr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ph=new ve,NL=new ks,Cse=new ve,mh=new ve;class Ise extends tF{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ph,NL,Cse),mh.set(0,0,1).applyQuaternion(NL);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ph.x,n),t.positionY.linearRampToValueAtTime(ph.y,n),t.positionZ.linearRampToValueAtTime(ph.z,n),t.orientationX.linearRampToValueAtTime(mh.x,n),t.orientationY.linearRampToValueAtTime(mh.y,n),t.orientationZ.linearRampToValueAtTime(mh.z,n)}else t.setPosition(ph.x,ph.y,ph.z),t.setOrientation(mh.x,mh.y,mh.z)}}class Nse{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class nF{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,d=t+t;c!==d;++c)if(n[c]!==n[c+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){ks.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;ks.multiplyQuaternionsFlat(e,o,e,t,e,n),ks.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[n+l]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*i}}}const XR="\\[\\]\\.:\\/",Pse=new RegExp("["+XR+"]","g"),$R="[^"+XR+"]",Lse="[^"+XR.replace("\\.","")+"]",kse=/((?:WC+[\/:])*)/.source.replace("WC",$R),Ose=/(WCOD+)?/.source.replace("WCOD",Lse),Dse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$R),Bse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$R),Use=new RegExp("^"+kse+Ose+Dse+Bse+"$"),Fse=["material","materials","bones","map"];class zse{constructor(e,t,n){const i=n||dr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class dr{constructor(e,t,n){this.path=t,this.parsedPath=n||dr.parseTrackName(t),this.node=dr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new dr.Composite(e,t,n):new dr(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Pse,"")}static parseTrackName(e){const t=Use.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);Fse.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=dr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let d=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===d){d=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const o=e[i];if(o===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dr.Composite=zse;dr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dr.prototype.GetterByBindingType=[dr.prototype._getValue_direct,dr.prototype._getValue_array,dr.prototype._getValue_arrayElement,dr.prototype._getValue_toArray];dr.prototype.SetterByBindingTypeAndVersioning=[[dr.prototype._setValue_direct,dr.prototype._setValue_direct_setNeedsUpdate,dr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dr.prototype._setValue_array,dr.prototype._setValue_array_setNeedsUpdate,dr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dr.prototype._setValue_arrayElement,dr.prototype._setValue_arrayElement_setNeedsUpdate,dr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dr.prototype._setValue_fromArray,dr.prototype._setValue_fromArray_setNeedsUpdate,dr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Wse{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Vo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,d=this.nCachedObjects_;for(let h=0,y=arguments.length;h!==y;++h){const _=arguments[h],x=_.uuid;let A=t[x];if(A===void 0){A=c++,t[x]=A,e.push(_);for(let P=0,I=o;P!==I;++P)s[P].push(new dr(_,n[P],i[P]))}else if(A<d){l=e[A];const P=--d,I=e[P];t[I.uuid]=A,e[A]=I,t[x]=P,e[P]=_;for(let C=0,D=o;C!==D;++C){const k=s[C],F=k[P];let Q=k[A];k[A]=F,Q===void 0&&(Q=new dr(_,n[C],i[C])),k[P]=Q}}else e[A]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],d=c.uuid,h=t[d];if(h!==void 0&&h>=s){const y=s++,_=e[y];t[_.uuid]=h,e[h]=_,t[d]=y,e[y]=c;for(let x=0,A=i;x!==A;++x){const P=n[x],I=P[y],C=P[h];P[h]=I,P[y]=C}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],h=d.uuid,y=t[h];if(y!==void 0)if(delete t[h],y<s){const _=--s,x=e[_],A=--o,P=e[A];t[x.uuid]=y,e[y]=x,t[P.uuid]=_,e[_]=P,e.pop();for(let I=0,C=i;I!==C;++I){const D=n[I],k=D[_],F=D[A];D[y]=k,D[_]=F,D.pop()}}else{const _=--o,x=e[_];_>0&&(t[x.uuid]=y),e[y]=x,e.pop();for(let A=0,P=i;A!==P;++A){const I=n[A];I[y]=I[_],I.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,l=this._parsedPaths,c=this._objects,d=c.length,h=this.nCachedObjects_,y=new Array(d);i=s.length,n[e]=i,o.push(e),l.push(t),s.push(y);for(let _=h,x=c.length;_!==x;++_){const A=c[_];y[_]=new dr(A,e,t)}return y}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],d=e[l];t[d]=n,o[n]=c,o.pop(),s[n]=s[l],s.pop(),i[n]=i[l],i.pop()}}}class rF{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:Uh,endingEnd:Uh};for(let d=0;d!==o;++d){const h=s[d].createInterpolant(null);l[d]=h,h.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=U6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,o=s/i,l=i/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=s,c[1]=s+n,d[0]=e/o,d[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case wR:for(let h=0,y=c.length;h!==y;++h)c[h].evaluate(o),d[h].accumulateAdditive(l);break;case Nx:default:for(let h=0,y=c.length;h!==y;++h)c[h].evaluate(o),d[h].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===F6;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===B6){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const d=e<0;this._setEndings(d,!d,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=Fh,i.endingEnd=Fh):(e?i.endingStart=this.zeroSlopeAtStart?Fh:Uh:i.endingStart=sy,t?i.endingEnd=this.zeroSlopeAtEnd?Fh:Uh:i.endingEnd=sy)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=n,this}}const Vse=new Float32Array(1);class Hse extends kl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,l=e._interpolants,c=n.uuid,d=this._bindingsByRootAndName;let h=d[c];h===void 0&&(h={},d[c]=h);for(let y=0;y!==s;++y){const _=i[y],x=_.name;let A=h[x];if(A!==void 0)++A.referenceCount,o[y]=A;else{if(A=o[y],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,c,x));continue}const P=t&&t._propertyBindings[y].binding.parsedPath;A=new nF(dr.create(n,x,P),_.ValueTypeName,_.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,c,x),o[y]=A}l[y].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,d=c[c.length-1],h=e._byClipCacheIndex;d._byClipCacheIndex=h,c[h]=d,c.pop(),e._byClipCacheIndex=null;const y=l.actionByRoot,_=(e._localRoot||this._root).uuid;delete y[_],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[i],c=t[t.length-1],d=e._cacheIndex;c._cacheIndex=d,t[d]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new HR(new Float32Array(2),new Float32Array(2),1,Vse),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?vy.findByName(i,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let d=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Nx),c!==void 0){const y=c.actionByRoot[s];if(y!==void 0&&y.blendMode===n)return y;d=c.knownActions[0],o===null&&(o=d._clip)}if(o===null)return null;const h=new rF(this,o,t,n);return this._bindAction(h,d),this._addInactiveAction(h,l,s),h}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?vy.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let d=0;d!==n;++d)t[d]._update(i,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)l[d].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const d=o[l];this._deactivateAction(d);const h=d._cacheIndex,y=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,y._cacheIndex=h,t[h]=y,t.pop(),this._removeInactiveBindingsForAction(d)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class ZR{constructor(e){this.value=e}clone(){return new ZR(this.value.clone===void 0?this.value:this.value.clone())}}let Gse=0;class jse extends kl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Gse++}),this.name="",this.usage=uy,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class qse extends Bx{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Kse{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const PL=new Ln;class iF{constructor(e,t,n=0,i=1/0){this.ray=new dd(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Yh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return PL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(PL),this}intersectObject(e,t=!0,n=[]){return DA(e,this,n,t),n.sort(LL),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)DA(e[i],this,n,t);return n.sort(LL),n}}function LL(r,e){return r.distance-e.distance}function DA(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let o=0,l=s.length;o<l;o++)DA(s[o],e,t,!0)}}class V1{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(li(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Yse{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class QR{constructor(e,t,n,i){QR.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=i,this}}const kL=new Mt;class Xse{constructor(e=new Mt(1/0,1/0),t=new Mt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=kL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const OL=new ve,$w=new ve;class $se{constructor(e=new ve,t=new ve){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){OL.subVectors(e,this.start),$w.subVectors(this.end,this.start);const n=$w.dot($w);let s=$w.dot(OL)/n;return t&&(s=li(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const DL=new ve;class Zse extends pr{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Jn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const d=o/c*Math.PI*2,h=l/c*Math.PI*2;i.push(Math.cos(d),Math.sin(d),1,Math.cos(h),Math.sin(h),1)}n.setAttribute("position",new vn(i,3));const s=new Js({fog:!1,toneMapped:!1});this.cone=new Ol(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),DL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(DL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Vc=new ve,Zw=new Ln,ib=new Ln;class Qse extends Ol{constructor(e){const t=sF(e),n=new Jn,i=[],s=[],o=new en(0,0,1),l=new en(0,1,0);for(let d=0;d<t.length;d++){const h=t[d];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new vn(i,3)),n.setAttribute("color",new vn(s,3));const c=new Js({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");ib.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Zw.multiplyMatrices(ib,l.matrixWorld),Vc.setFromMatrixPosition(Zw),i.setXYZ(o,Vc.x,Vc.y,Vc.z),Zw.multiplyMatrices(ib,l.parent.matrixWorld),Vc.setFromMatrixPosition(Zw),i.setXYZ(o+1,Vc.x,Vc.y,Vc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function sF(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,sF(r.children[t]));return e}class Jse extends Pi{constructor(e,t,n){const i=new qy(t,4,2),s=new cf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eoe=new ve,BL=new en,UL=new en;class toe extends pr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new jy(t);i.rotateY(Math.PI*.5),this.material=new cf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Nr(o,3)),this.add(new Pi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");BL.copy(this.light.color),UL.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?BL:UL;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eoe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class noe extends Ol{constructor(e=10,t=10,n=4473924,i=8947848){n=new en(n),i=new en(i);const s=t/2,o=e/t,l=e/2,c=[],d=[];for(let _=0,x=0,A=-l;_<=t;_++,A+=o){c.push(-l,0,A,l,0,A),c.push(A,0,-l,A,0,l);const P=_===s?n:i;P.toArray(d,x),x+=3,P.toArray(d,x),x+=3,P.toArray(d,x),x+=3,P.toArray(d,x),x+=3}const h=new Jn;h.setAttribute("position",new vn(c,3)),h.setAttribute("color",new vn(d,3));const y=new Js({vertexColors:!0,toneMapped:!1});super(h,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class roe extends Ol{constructor(e=10,t=16,n=8,i=64,s=4473924,o=8947848){s=new en(s),o=new en(o);const l=[],c=[];if(t>1)for(let y=0;y<t;y++){const _=y/t*(Math.PI*2),x=Math.sin(_)*e,A=Math.cos(_)*e;l.push(0,0,0),l.push(x,0,A);const P=y&1?s:o;c.push(P.r,P.g,P.b),c.push(P.r,P.g,P.b)}for(let y=0;y<n;y++){const _=y&1?s:o,x=e-e/n*y;for(let A=0;A<i;A++){let P=A/i*(Math.PI*2),I=Math.sin(P)*x,C=Math.cos(P)*x;l.push(I,0,C),c.push(_.r,_.g,_.b),P=(A+1)/i*(Math.PI*2),I=Math.sin(P)*x,C=Math.cos(P)*x,l.push(I,0,C),c.push(_.r,_.g,_.b)}}const d=new Jn;d.setAttribute("position",new vn(l,3)),d.setAttribute("color",new vn(c,3));const h=new Js({vertexColors:!0,toneMapped:!1});super(d,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const FL=new ve,Qw=new ve,zL=new ve;class ioe extends pr{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Jn;i.setAttribute("position",new vn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Js({fog:!1,toneMapped:!1});this.lightPlane=new of(i,s),this.add(this.lightPlane),i=new Jn,i.setAttribute("position",new vn([0,0,0,0,0,1],3)),this.targetLine=new of(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),FL.setFromMatrixPosition(this.light.matrixWorld),Qw.setFromMatrixPosition(this.light.target.matrixWorld),zL.subVectors(Qw,FL),this.lightPlane.lookAt(Qw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Qw),this.targetLine.scale.z=zL.length()}}const Jw=new ve,ii=new Wy;class soe extends Ol{constructor(e){const t=new Jn,n=new Js({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(A,P){c(A),c(P)}function c(A){i.push(0,0,0),s.push(0,0,0),o[A]===void 0&&(o[A]=[]),o[A].push(i.length/3-1)}t.setAttribute("position",new vn(i,3)),t.setAttribute("color",new vn(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const d=new en(16755200),h=new en(16711680),y=new en(43775),_=new en(16777215),x=new en(3355443);this.setColors(d,h,y,_,x)}setColors(e,t,n,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),di("c",t,e,ii,0,0,-1),di("t",t,e,ii,0,0,1),di("n1",t,e,ii,-n,-i,-1),di("n2",t,e,ii,n,-i,-1),di("n3",t,e,ii,-n,i,-1),di("n4",t,e,ii,n,i,-1),di("f1",t,e,ii,-n,-i,1),di("f2",t,e,ii,n,-i,1),di("f3",t,e,ii,-n,i,1),di("f4",t,e,ii,n,i,1),di("u1",t,e,ii,n*.7,i*1.1,-1),di("u2",t,e,ii,-n*.7,i*1.1,-1),di("u3",t,e,ii,0,i*2,-1),di("cf1",t,e,ii,-n,0,1),di("cf2",t,e,ii,n,0,1),di("cf3",t,e,ii,0,-i,1),di("cf4",t,e,ii,0,i,1),di("cn1",t,e,ii,-n,0,-1),di("cn2",t,e,ii,n,0,-1),di("cn3",t,e,ii,0,-i,-1),di("cn4",t,e,ii,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function di(r,e,t,n,i,s,o){Jw.set(i,s,o).unproject(n);const l=e[r];if(l!==void 0){const c=t.getAttribute("position");for(let d=0,h=l.length;d<h;d++)c.setXYZ(l[d],Jw.x,Jw.y,Jw.z)}}const e_=new Zs;class ooe extends Ol{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new Jn;s.setIndex(new Nr(n,1)),s.setAttribute("position",new Nr(i,3)),super(s,new Js({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e_.setFromObject(this.object),e_.isEmpty())return;const t=e_.min,n=e_.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aoe extends Ol{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jn;s.setIndex(new Nr(n,1)),s.setAttribute("position",new vn(i,3)),super(s,new Js({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class loe extends of{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Jn;o.setAttribute("position",new vn(s,3)),o.computeBoundingSphere(),super(o,new Js({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Jn;c.setAttribute("position",new vn(l,3)),c.computeBoundingSphere(),this.add(new Pi(c,new cf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const WL=new ve;let t_,sb;class uoe extends pr{constructor(e=new ve(0,0,1),t=new ve(0,0,0),n=1,i=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",t_===void 0&&(t_=new Jn,t_.setAttribute("position",new vn([0,0,0,0,1,0],3)),sb=new W0(0,.5,1,5,1),sb.translate(0,-.5,0)),this.position.copy(t),this.line=new of(t_,new Js({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(sb,new cf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{WL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(WL,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class coe extends Ol{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jn;i.setAttribute("position",new vn(t,3)),i.setAttribute("color",new vn(n,3));const s=new Js({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new en,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class foe{constructor(){this.type="ShapePath",this.color=new en,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,o){return this.currentPath.bezierCurveTo(e,t,n,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(C){const D=[];for(let k=0,F=C.length;k<F;k++){const Q=C[k],G=new Xh;G.curves=Q.curves,D.push(G)}return D}function n(C,D){const k=D.length;let F=!1;for(let Q=k-1,G=0;G<k;Q=G++){let Y=D[Q],ee=D[G],te=ee.x-Y.x,U=ee.y-Y.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(Y=D[G],te=-te,ee=D[Q],U=-U),C.y<Y.y||C.y>ee.y)continue;if(C.y===Y.y){if(C.x===Y.x)return!0}else{const V=U*(C.x-Y.x)-te*(C.y-Y.y);if(V===0)return!0;if(V<0)continue;F=!F}}else{if(C.y!==Y.y)continue;if(ee.x<=C.x&&C.x<=Y.x||Y.x<=C.x&&C.x<=ee.x)return!0}}return F}const i=Nl.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const d=[];if(s.length===1)return l=s[0],c=new Xh,c.curves=l.curves,d.push(c),d;let h=!i(s[0].getPoints());h=e?!h:h;const y=[],_=[];let x=[],A=0,P;_[A]=void 0,x[A]=[];for(let C=0,D=s.length;C<D;C++)l=s[C],P=l.getPoints(),o=i(P),o=e?!o:o,o?(!h&&_[A]&&A++,_[A]={s:new Xh,p:P},_[A].s.curves=l.curves,h&&A++,x[A]=[]):x[A].push({h:l,p:P[0]});if(!_[0])return t(s);if(_.length>1){let C=!1,D=0;for(let k=0,F=_.length;k<F;k++)y[k]=[];for(let k=0,F=_.length;k<F;k++){const Q=x[k];for(let G=0;G<Q.length;G++){const Y=Q[G];let ee=!0;for(let te=0;te<_.length;te++)n(Y.p,_[te].p)&&(k!==te&&D++,ee?(ee=!1,y[te].push(Y)):C=!0);ee&&y[k].push(Y)}}D>0&&C===!1&&(x=y)}let I;for(let C=0,D=_.length;C<D;C++){c=_[C].s,d.push(c),I=x[C];for(let k=0,F=I.length;k<F;k++)c.holes.push(I[k].h)}return d}}class hoe extends kl{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class doe extends Ya{constructor(e=1,t=1,n=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...i,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:By}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=By);const poe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:lR,AddEquation:Yc,AddOperation:C6,AdditiveAnimationBlendMode:wR,AdditiveBlending:Jg,AgXToneMapping:k6,AlphaFormat:dR,AlwaysCompare:X6,AlwaysDepth:o1,AlwaysStencilFunc:AA,AmbientLight:X5,AnimationAction:rF,AnimationClip:vy,AnimationLoader:pse,AnimationMixer:Hse,AnimationObjectGroup:Wse,AnimationUtils:cse,ArcCurve:x5,ArrayCamera:f5,ArrowHelper:uoe,AttachedBindMode:bA,Audio:tF,AudioAnalyser:Nse,AudioContext:KR,AudioListener:Rse,AudioLoader:bse,AxesHelper:coe,BackSide:Ls,BasicDepthPacking:z6,BasicShadowMap:u6,BatchedMesh:v5,Bone:PR,BooleanKeyframeTrack:md,Box2:Xse,Box3:Zs,Box3Helper:aoe,BoxGeometry:pd,BoxHelper:ooe,BufferAttribute:Nr,BufferGeometry:Jn,BufferGeometryLoader:eF,ByteType:cR,Cache:Fu,Camera:Wy,CameraHelper:soe,CanvasTexture:kie,CapsuleGeometry:Wx,CatmullRomCurve3:S5,CineonToneMapping:P6,CircleGeometry:Vx,ClampToEdgeWrapping:la,Clock:YR,Color:en,ColorKeyframeTrack:GR,ColorManagement:yr,CompressedArrayTexture:Pie,CompressedCubeTexture:Lie,CompressedTexture:Fx,CompressedTextureLoader:mse,ConeGeometry:Hx,ConstantAlphaFactor:A6,ConstantColorFactor:E6,Controls:hoe,CubeCamera:r5,CubeReflectionMapping:Yu,CubeRefractionMapping:sf,CubeTexture:Vy,CubeTextureLoader:gse,CubeUVReflectionMapping:B0,CubicBezierCurve:OR,CubicBezierCurve3:M5,CubicInterpolant:W5,CullFaceBack:SA,CullFaceFront:l6,CullFaceFrontBack:aQ,CullFaceNone:a6,Curve:$a,CurvePath:b5,CustomBlending:c6,CustomToneMapping:L6,CylinderGeometry:W0,Cylindrical:Yse,Data3DTexture:MR,DataArrayTexture:Lx,DataTexture:Il,DataTextureLoader:yse,DataUtils:xJ,DecrementStencilOp:xQ,DecrementWrapStencilOp:MQ,DefaultLoadingManager:G5,DepthFormat:qh,DepthStencilFormat:nd,DepthTexture:TR,DetachedBindMode:D6,DirectionalLight:Y5,DirectionalLightHelper:ioe,DiscreteInterpolant:V5,DisplayP3ColorSpace:Px,DodecahedronGeometry:Gx,DoubleSide:Va,DstAlphaFactor:w6,DstColorFactor:x6,DynamicCopyUsage:UQ,DynamicDrawUsage:PQ,DynamicReadUsage:OQ,EdgesGeometry:A5,EllipseCurve:zx,EqualCompare:j6,EqualDepth:l1,EqualStencilFunc:TQ,EquirectangularReflectionMapping:ey,EquirectangularRefractionMapping:ty,Euler:Go,EventDispatcher:kl,ExtrudeGeometry:qx,FileLoader:$u,Float16BufferAttribute:TJ,Float32BufferAttribute:vn,FloatType:_o,Fog:Dx,FogExp2:Ox,FramebufferTexture:Nie,FrontSide:Ku,Frustum:Hy,GLBufferAttribute:Kse,GLSL1:zQ,GLSL3:TA,GreaterCompare:q6,GreaterDepth:c1,GreaterEqualCompare:Y6,GreaterEqualDepth:u1,GreaterEqualStencilFunc:NQ,GreaterStencilFunc:CQ,GridHelper:noe,Group:r0,HalfFloatType:U0,HemisphereLight:j5,HemisphereLightHelper:toe,IcosahedronGeometry:Kx,ImageBitmapLoader:Ese,ImageLoader:wy,ImageUtils:Q6,IncrementStencilOp:_Q,IncrementWrapStencilOp:SQ,InstancedBufferAttribute:A0,InstancedBufferGeometry:J5,InstancedInterleavedBuffer:qse,InstancedMesh:y5,Int16BufferAttribute:bJ,Int32BufferAttribute:AJ,Int8BufferAttribute:SJ,IntType:bx,InterleavedBuffer:Bx,InterleavedBufferAttribute:rd,Interpolant:Ky,InterpolateDiscrete:iy,InterpolateLinear:U1,InterpolateSmooth:E_,InvertStencilOp:EQ,KeepStencilOp:xh,KeyframeTrack:Za,LOD:m5,LatheGeometry:Gy,Layers:Yh,LessCompare:G6,LessDepth:a1,LessEqualCompare:_R,LessEqualDepth:ed,LessEqualStencilFunc:RQ,LessStencilFunc:AQ,Light:hf,LightProbe:Q5,Line:of,Line3:$se,LineBasicMaterial:Js,LineCurve:DR,LineCurve3:E5,LineDashedMaterial:U5,LineLoop:w5,LineSegments:Ol,LinearDisplayP3ColorSpace:zy,LinearFilter:Ii,LinearInterpolant:HR,LinearMipMapLinearFilter:fQ,LinearMipMapNearestFilter:cQ,LinearMipmapLinearFilter:El,LinearMipmapNearestFilter:Cg,LinearSRGBColorSpace:Qu,LinearToneMapping:I6,LinearTransfer:oy,Loader:So,LoaderUtils:OA,LoadingManager:jR,LoopOnce:B6,LoopPingPong:F6,LoopRepeat:U6,LuminanceAlphaFormat:gR,LuminanceFormat:mR,MOUSE:wh,Material:Ds,MaterialLoader:eS,MathUtils:SR,Matrix2:QR,Matrix3:jn,Matrix4:Ln,MaxEquation:p6,Mesh:Pi,MeshBasicMaterial:cf,MeshDepthMaterial:RR,MeshDistanceMaterial:CR,MeshLambertMaterial:D5,MeshMatcapMaterial:B5,MeshNormalMaterial:O5,MeshPhongMaterial:L5,MeshPhysicalMaterial:WR,MeshStandardMaterial:zR,MeshToonMaterial:k5,MinEquation:d6,MirroredRepeatWrapping:ry,MixOperation:R6,MultiplyBlending:EA,MultiplyOperation:Uy,NearestFilter:es,NearestMipMapLinearFilter:uQ,NearestMipMapNearestFilter:lQ,NearestMipmapLinearFilter:e0,NearestMipmapNearestFilter:uR,NeutralToneMapping:O6,NeverCompare:H6,NeverDepth:s1,NeverStencilFunc:bQ,NoBlending:Vu,NoColorSpace:Lu,NoToneMapping:Cl,NormalAnimationBlendMode:Nx,NormalBlending:jh,NotEqualCompare:K6,NotEqualDepth:f1,NotEqualStencilFunc:IQ,NumberKeyframeTrack:gy,Object3D:pr,ObjectLoader:Sse,ObjectSpaceNormalMap:V6,OctahedronGeometry:jy,OneFactor:g6,OneMinusConstantAlphaFactor:T6,OneMinusConstantColorFactor:b6,OneMinusDstAlphaFactor:_6,OneMinusDstColorFactor:S6,OneMinusSrcAlphaFactor:i1,OneMinusSrcColorFactor:v6,OrthographicCamera:Jc,P3Primaries:ly,PCFShadowMap:Mx,PCFSoftShadowMap:Rg,PMREMGenerator:RA,Path:hy,PerspectiveCamera:gi,Plane:Ru,PlaneGeometry:F0,PlaneHelper:loe,PointLight:K5,PointLightHelper:Jse,Points:_5,PointsMaterial:LR,PolarGridHelper:roe,PolyhedronGeometry:ff,PositionalAudio:Ise,PropertyBinding:dr,PropertyMixer:nF,QuadraticBezierCurve:BR,QuadraticBezierCurve3:UR,Quaternion:ks,QuaternionKeyframeTrack:Yy,QuaternionLinearInterpolant:H5,RED_GREEN_RGTC2_Format:D1,RED_RGTC1_Format:vR,REVISION:By,RGBADepthPacking:W6,RGBAFormat:Ps,RGBAIntegerFormat:Ix,RGBA_ASTC_10x10_Format:I1,RGBA_ASTC_10x5_Format:T1,RGBA_ASTC_10x6_Format:R1,RGBA_ASTC_10x8_Format:C1,RGBA_ASTC_12x10_Format:N1,RGBA_ASTC_12x12_Format:P1,RGBA_ASTC_4x4_Format:w1,RGBA_ASTC_5x4_Format:_1,RGBA_ASTC_5x5_Format:x1,RGBA_ASTC_6x5_Format:S1,RGBA_ASTC_6x6_Format:M1,RGBA_ASTC_8x5_Format:E1,RGBA_ASTC_8x6_Format:b1,RGBA_ASTC_8x8_Format:A1,RGBA_BPTC_Format:kg,RGBA_ETC2_EAC_Format:v1,RGBA_PVRTC_2BPPV1_Format:m1,RGBA_PVRTC_4BPPV1_Format:p1,RGBA_S3TC_DXT1_Format:Ng,RGBA_S3TC_DXT3_Format:Pg,RGBA_S3TC_DXT5_Format:Lg,RGBDepthPacking:gQ,RGBFormat:pR,RGBIntegerFormat:hQ,RGB_BPTC_SIGNED_Format:L1,RGB_BPTC_UNSIGNED_Format:k1,RGB_ETC1_Format:g1,RGB_ETC2_Format:y1,RGB_PVRTC_2BPPV1_Format:d1,RGB_PVRTC_4BPPV1_Format:h1,RGB_S3TC_DXT1_Format:Ig,RGDepthPacking:yQ,RGFormat:yR,RGIntegerFormat:Cx,RawShaderMaterial:P5,Ray:dd,Raycaster:iF,Rec709Primaries:ay,RectAreaLight:$5,RedFormat:Rx,RedIntegerFormat:Fy,ReinhardToneMapping:N6,RenderTarget:J6,RepeatWrapping:ny,ReplaceStencilOp:wQ,ReverseSubtractEquation:h6,RingGeometry:Yx,SIGNED_RED_GREEN_RGTC2_Format:B1,SIGNED_RED_RGTC1_Format:O1,SRGBColorSpace:aa,SRGBTransfer:Fr,Scene:IR,ShaderChunk:Xn,ShaderLib:Wa,ShaderMaterial:jo,ShadowMaterial:N5,Shape:Xh,ShapeGeometry:Xx,ShapePath:foe,ShapeUtils:Nl,ShortType:fR,Skeleton:Ux,SkeletonHelper:Qse,SkinnedMesh:g5,Source:zh,Sphere:Os,SphereGeometry:qy,Spherical:V1,SphericalHarmonics3:Z5,SplineCurve:FR,SpotLight:q5,SpotLightHelper:Zse,Sprite:p5,SpriteMaterial:NR,SrcAlphaFactor:r1,SrcAlphaSaturateFactor:M6,SrcColorFactor:y6,StaticCopyUsage:BQ,StaticDrawUsage:uy,StaticReadUsage:kQ,StereoCamera:Ase,StreamCopyUsage:FQ,StreamDrawUsage:LQ,StreamReadUsage:DQ,StringKeyframeTrack:gd,SubtractEquation:f6,SubtractiveBlending:MA,TOUCH:_h,TangentSpaceNormalMap:uf,TetrahedronGeometry:$x,Texture:ui,TextureLoader:vse,TextureUtils:cie,TorusGeometry:Zx,TorusKnotGeometry:Qx,Triangle:vo,TriangleFanDrawMode:mQ,TriangleStripDrawMode:pQ,TrianglesDrawMode:dQ,TubeGeometry:Jx,UVMapping:Ex,Uint16BufferAttribute:ER,Uint32BufferAttribute:bR,Uint8BufferAttribute:MJ,Uint8ClampedBufferAttribute:EJ,Uniform:ZR,UniformsGroup:jse,UniformsLib:Jt,UniformsUtils:n5,UnsignedByteType:Ka,UnsignedInt248Type:td,UnsignedInt5999Type:hR,UnsignedIntType:Xu,UnsignedShort4444Type:Ax,UnsignedShort5551Type:Tx,UnsignedShortType:M0,VSMShadowMap:za,Vector2:Mt,Vector3:ve,Vector4:fr,VectorKeyframeTrack:yy,VideoTexture:Iie,WebGL3DRenderTarget:fJ,WebGLArrayRenderTarget:cJ,WebGLCoordinateSystem:bl,WebGLCubeRenderTarget:i5,WebGLMultipleRenderTargets:doe,WebGLRenderTarget:Ya,WebGLRenderer:h5,WebGLUtils:c5,WebGPUCoordinateSystem:cy,WireframeGeometry:I5,WrapAroundEnding:sy,ZeroCurvatureEnding:Uh,ZeroFactor:m6,ZeroSlopeEnding:Fh,ZeroStencilOp:vQ,createCanvasElement:Z6},Symbol.toStringTag,{value:"Module"}));var ob={exports:{}},Hc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VL;function moe(){return VL||(VL=1,Hc.ConcurrentRoot=1,Hc.ContinuousEventPriority=4,Hc.DefaultEventPriority=16,Hc.DiscreteEventPriority=1,Hc.IdleEventPriority=536870912,Hc.LegacyRoot=0),Hc}var HL;function goe(){return HL||(HL=1,ob.exports=moe()),ob.exports}var s0=goe();function yoe(r){let e;const t=new Set,n=(d,h)=>{const y=typeof d=="function"?d(e):d;if(y!==e){const _=e;e=h?y:Object.assign({},e,y),t.forEach(x=>x(e,_))}},i=()=>e,s=(d,h=i,y=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=h(e);function x(){const A=h(e);if(!y(_,A)){const P=_;d(_=A,P)}}return t.add(x),()=>t.delete(x)},c={setState:n,getState:i,subscribe:(d,h,y)=>h||y?s(d,h,y):(t.add(d),()=>t.delete(d)),destroy:()=>t.clear()};return e=r(n,i,c),c}const voe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),GL=voe?Se.useEffect:Se.useLayoutEffect;function woe(r){const e=typeof r=="function"?yoe(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=Se.useReducer(I=>I+1,0),o=e.getState(),l=Se.useRef(o),c=Se.useRef(n),d=Se.useRef(i),h=Se.useRef(!1),y=Se.useRef();y.current===void 0&&(y.current=n(o));let _,x=!1;(l.current!==o||c.current!==n||d.current!==i||h.current)&&(_=n(o),x=!i(y.current,_)),GL(()=>{x&&(y.current=_),l.current=o,c.current=n,d.current=i,h.current=!1});const A=Se.useRef(o);GL(()=>{const I=()=>{try{const D=e.getState(),k=c.current(D);d.current(y.current,k)||(l.current=D,y.current=k,s())}catch{h.current=!0,s()}},C=e.subscribe(I);return e.getState()!==A.current&&I(),C},[]);const P=x?_:y.current;return Se.useDebugValue(P),P};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var ab={exports:{}},lb={exports:{}},ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jL;function _oe(){return jL||(jL=1,(function(r){function e(T,L){var N=T.length;T.push(L);e:for(;0<N;){var v=N-1>>>1,u=T[v];if(0<i(u,L))T[v]=L,T[N]=u,N=v;else break e}}function t(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var L=T[0],N=T.pop();if(N!==L){T[0]=N;e:for(var v=0,u=T.length,S=u>>>1;v<S;){var W=2*(v+1)-1,$=T[W],se=W+1,me=T[se];if(0>i($,N))se<u&&0>i(me,$)?(T[v]=me,T[se]=N,v=se):(T[v]=$,T[W]=N,v=W);else if(se<u&&0>i(me,N))T[v]=me,T[se]=N,v=se;else break e}}return L}function i(T,L){var N=T.sortIndex-L.sortIndex;return N!==0?N:T.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,y=null,_=3,x=!1,A=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(T){for(var L=t(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=T)n(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=t(d)}}function F(T){if(P=!1,k(T),!A)if(t(c)!==null)A=!0,M(Q);else{var L=t(d);L!==null&&R(F,L.startTime-T)}}function Q(T,L){A=!1,P&&(P=!1,C(ee),ee=-1),x=!0;var N=_;try{for(k(L),y=t(c);y!==null&&(!(y.expirationTime>L)||T&&!V());){var v=y.callback;if(typeof v=="function"){y.callback=null,_=y.priorityLevel;var u=v(y.expirationTime<=L);L=r.unstable_now(),typeof u=="function"?y.callback=u:y===t(c)&&n(c),k(L)}else n(c);y=t(c)}if(y!==null)var S=!0;else{var W=t(d);W!==null&&R(F,W.startTime-L),S=!1}return S}finally{y=null,_=N,x=!1}}var G=!1,Y=null,ee=-1,te=5,U=-1;function V(){return!(r.unstable_now()-U<te)}function K(){if(Y!==null){var T=r.unstable_now();U=T;var L=!0;try{L=Y(!0,T)}finally{L?E():(G=!1,Y=null)}}else G=!1}var E;if(typeof D=="function")E=function(){D(K)};else if(typeof MessageChannel<"u"){var a=new MessageChannel,p=a.port2;a.port1.onmessage=K,E=function(){p.postMessage(null)}}else E=function(){I(K,0)};function M(T){Y=T,G||(G=!0,E())}function R(T,L){ee=I(function(){T(r.unstable_now())},L)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(T){T.callback=null},r.unstable_continueExecution=function(){A||x||(A=!0,M(Q))},r.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<T?Math.floor(1e3/T):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(T){switch(_){case 1:case 2:case 3:var L=3;break;default:L=_}var N=_;_=L;try{return T()}finally{_=N}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(T,L){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var N=_;_=T;try{return L()}finally{_=N}},r.unstable_scheduleCallback=function(T,L,N){var v=r.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?v+N:v):N=v,T){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return u=N+u,T={id:h++,callback:L,priorityLevel:T,startTime:N,expirationTime:u,sortIndex:-1},N>v?(T.sortIndex=N,e(d,T),t(c)===null&&T===t(d)&&(P?(C(ee),ee=-1):P=!0,R(F,N-v))):(T.sortIndex=u,e(c,T),A||x||(A=!0,M(Q))),T},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(T){var L=_;return function(){var N=_;_=L;try{return T.apply(this,arguments)}finally{_=N}}}})(ub)),ub}var qL;function oF(){return qL||(qL=1,lb.exports=_oe()),lb.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb,KL;function xoe(){return KL||(KL=1,cb=function(e){var t={},n=j1(),i=oF(),s=Object.assign;function o(g){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+g,O=1;O<arguments.length;O++)w+="&args[]="+encodeURIComponent(arguments[O]);return"Minified React error #"+g+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),Q=Symbol.iterator;function G(g){return g===null||typeof g!="object"?null:(g=Q&&g[Q]||g["@@iterator"],typeof g=="function"?g:null)}function Y(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case h:return"Fragment";case d:return"Portal";case _:return"Profiler";case y:return"StrictMode";case I:return"Suspense";case C:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case A:return(g.displayName||"Context")+".Consumer";case x:return(g._context.displayName||"Context")+".Provider";case P:var w=g.render;return g=g.displayName,g||(g=w.displayName||w.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case D:return w=g.displayName||null,w!==null?w:Y(g.type)||"Memo";case k:w=g._payload,g=g._init;try{return Y(g(w))}catch{}}return null}function ee(g){var w=g.type;switch(g.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=w.render,g=g.displayName||g.name||"",w.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y(w);case 8:return w===y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function te(g){var w=g,O=g;if(g.alternate)for(;w.return;)w=w.return;else{g=w;do w=g,(w.flags&4098)!==0&&(O=w.return),g=w.return;while(g)}return w.tag===3?O:null}function U(g){if(te(g)!==g)throw Error(o(188))}function V(g){var w=g.alternate;if(!w){if(w=te(g),w===null)throw Error(o(188));return w!==g?null:g}for(var O=g,z=w;;){var Z=O.return;if(Z===null)break;var ie=Z.alternate;if(ie===null){if(z=Z.return,z!==null){O=z;continue}break}if(Z.child===ie.child){for(ie=Z.child;ie;){if(ie===O)return U(Z),g;if(ie===z)return U(Z),w;ie=ie.sibling}throw Error(o(188))}if(O.return!==z.return)O=Z,z=ie;else{for(var xe=!1,We=Z.child;We;){if(We===O){xe=!0,O=Z,z=ie;break}if(We===z){xe=!0,z=Z,O=ie;break}We=We.sibling}if(!xe){for(We=ie.child;We;){if(We===O){xe=!0,O=ie,z=Z;break}if(We===z){xe=!0,z=ie,O=Z;break}We=We.sibling}if(!xe)throw Error(o(189))}}if(O.alternate!==z)throw Error(o(190))}if(O.tag!==3)throw Error(o(188));return O.stateNode.current===O?g:w}function K(g){return g=V(g),g!==null?E(g):null}function E(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var w=E(g);if(w!==null)return w;g=g.sibling}return null}function a(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var w=a(g);if(w!==null)return w}g=g.sibling}return null}var p=Array.isArray,M=e.getPublicInstance,R=e.getRootHostContext,T=e.getChildHostContext,L=e.prepareForCommit,N=e.resetAfterCommit,v=e.createInstance,u=e.appendInitialChild,S=e.finalizeInitialChildren,W=e.prepareUpdate,$=e.shouldSetTextContent,se=e.createTextInstance,me=e.scheduleTimeout,_e=e.cancelTimeout,Ae=e.noTimeout,_t=e.isPrimaryRenderer,Ze=e.supportsMutation,Pe=e.supportsPersistence,ge=e.supportsHydration,Ge=e.getInstanceFromNode,je=e.preparePortalMount,vt=e.getCurrentEventPriority,He=e.detachDeletedInstance,nt=e.supportsMicrotasks,Pt=e.scheduleMicrotask,fe=e.supportsTestSelectors,oe=e.findFiberRoot,Oe=e.getBoundingRect,Re=e.getTextContent,Le=e.isHiddenSubtree,ot=e.matchAccessibilityRole,et=e.setFocusIfFocusable,Ye=e.setupIntersectionObserver,bt=e.appendChild,ct=e.appendChildToContainer,re=e.commitTextUpdate,j=e.commitMount,q=e.commitUpdate,ue=e.insertBefore,we=e.insertInContainerBefore,ye=e.removeChild,le=e.removeChildFromContainer,Xe=e.resetTextContent,de=e.hideInstance,Ce=e.hideTextInstance,Ue=e.unhideInstance,Ee=e.unhideTextInstance,qe=e.clearContainer,Ct=e.cloneInstance,ft=e.createContainerChildSet,yt=e.appendChildToContainerChildSet,Sn=e.finalizeContainerChildren,dt=e.replaceContainerChildren,ae=e.cloneHiddenInstance,J=e.cloneHiddenTextInstance,X=e.canHydrateInstance,he=e.canHydrateTextInstance,Ie=e.canHydrateSuspenseInstance,Te=e.isSuspenseInstancePending,Ne=e.isSuspenseInstanceFallback,dn=e.registerSuspenseInstanceRetry,gt=e.getNextHydratableSibling,xt=e.getFirstHydratableChild,Dn=e.getFirstHydratableChildWithinContainer,wt=e.getFirstHydratableChildWithinSuspenseInstance,kt=e.hydrateInstance,Pr=e.hydrateTextInstance,Dt=e.hydrateSuspenseInstance,Ot=e.getNextHydratableInstanceAfterSuspenseInstance,pe=e.commitHydratedContainer,De=e.commitHydratedSuspenseInstance,$e=e.clearSuspenseBoundary,Qe=e.clearSuspenseBoundaryFromContainer,Be=e.shouldDeleteUnhydratedTailInstances,Tt=e.didNotMatchHydratedContainerTextInstance,zt=e.didNotMatchHydratedTextInstance,At;function Ht(g){if(At===void 0)try{throw Error()}catch(O){var w=O.stack.trim().match(/\n( *(at )?)/);At=w&&w[1]||""}return`
`+At+g}var rn=!1;function on(g,w){if(!g||rn)return"";rn=!0;var O=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Wt){var z=Wt}Reflect.construct(g,[],w)}else{try{w.call()}catch(Wt){z=Wt}g.call(w.prototype)}else{try{throw Error()}catch(Wt){z=Wt}g()}}catch(Wt){if(Wt&&z&&typeof Wt.stack=="string"){for(var Z=Wt.stack.split(`
`),ie=z.stack.split(`
`),xe=Z.length-1,We=ie.length-1;1<=xe&&0<=We&&Z[xe]!==ie[We];)We--;for(;1<=xe&&0<=We;xe--,We--)if(Z[xe]!==ie[We]){if(xe!==1||We!==1)do if(xe--,We--,0>We||Z[xe]!==ie[We]){var pt=`
`+Z[xe].replace(" at new "," at ");return g.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",g.displayName)),pt}while(1<=xe&&0<=We);break}}}finally{rn=!1,Error.prepareStackTrace=O}return(g=g?g.displayName||g.name:"")?Ht(g):""}var Kt=Object.prototype.hasOwnProperty,Tn=[],Rn=-1;function En(g){return{current:g}}function un(g){0>Rn||(g.current=Tn[Rn],Tn[Rn]=null,Rn--)}function $t(g,w){Rn++,Tn[Rn]=g.current,g.current=w}var Bt={},Mn=En(Bt),On=En(!1),Wr=Bt;function vi(g,w){var O=g.type.contextTypes;if(!O)return Bt;var z=g.stateNode;if(z&&z.__reactInternalMemoizedUnmaskedChildContext===w)return z.__reactInternalMemoizedMaskedChildContext;var Z={},ie;for(ie in O)Z[ie]=w[ie];return z&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=w,g.__reactInternalMemoizedMaskedChildContext=Z),Z}function sr(g){return g=g.childContextTypes,g!=null}function Yt(){un(On),un(Mn)}function mt(g,w,O){if(Mn.current!==Bt)throw Error(o(168));$t(Mn,w),$t(On,O)}function Ve(g,w,O){var z=g.stateNode;if(w=w.childContextTypes,typeof z.getChildContext!="function")return O;z=z.getChildContext();for(var Z in z)if(!(Z in w))throw Error(o(108,ee(g)||"Unknown",Z));return s({},O,z)}function Fe(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Bt,Wr=Mn.current,$t(Mn,g),$t(On,On.current),!0}function St(g,w,O){var z=g.stateNode;if(!z)throw Error(o(169));O?(g=Ve(g,w,Wr),z.__reactInternalMemoizedMergedChildContext=g,un(On),un(Mn),$t(Mn,g)):un(On),$t(On,O)}var Ut=Math.clz32?Math.clz32:zn,jt=Math.log,cn=Math.LN2;function zn(g){return g>>>=0,g===0?32:31-(jt(g)/cn|0)|0}var Wn=64,Cn=4194304;function eo(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Dl(g,w){var O=g.pendingLanes;if(O===0)return 0;var z=0,Z=g.suspendedLanes,ie=g.pingedLanes,xe=O&268435455;if(xe!==0){var We=xe&~Z;We!==0?z=eo(We):(ie&=xe,ie!==0&&(z=eo(ie)))}else xe=O&~Z,xe!==0?z=eo(xe):ie!==0&&(z=eo(ie));if(z===0)return 0;if(w!==0&&w!==z&&(w&Z)===0&&(Z=z&-z,ie=w&-w,Z>=ie||Z===16&&(ie&4194240)!==0))return w;if((z&4)!==0&&(z|=O&16),w=g.entangledLanes,w!==0)for(g=g.entanglements,w&=z;0<w;)O=31-Ut(w),Z=1<<O,z|=g[O],w&=~Z;return z}function pf(g,w){switch(g){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $y(g,w){for(var O=g.suspendedLanes,z=g.pingedLanes,Z=g.expirationTimes,ie=g.pendingLanes;0<ie;){var xe=31-Ut(ie),We=1<<xe,pt=Z[xe];pt===-1?((We&O)===0||(We&z)!==0)&&(Z[xe]=pf(We,w)):pt<=w&&(g.expiredLanes|=We),ie&=~We}}function yd(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function vd(g){for(var w=[],O=0;31>O;O++)w.push(g);return w}function Bl(g,w,O){g.pendingLanes|=w,w!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,w=31-Ut(w),g[w]=O}function wd(g,w){var O=g.pendingLanes&~w;g.pendingLanes=w,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=w,g.mutableReadLanes&=w,g.entangledLanes&=w,w=g.entanglements;var z=g.eventTimes;for(g=g.expirationTimes;0<O;){var Z=31-Ut(O),ie=1<<Z;w[Z]=0,z[Z]=-1,g[Z]=-1,O&=~ie}}function Ko(g,w){var O=g.entangledLanes|=w;for(g=g.entanglements;O;){var z=31-Ut(O),Z=1<<z;Z&w|g[z]&w&&(g[z]|=w),O&=~Z}}var Yn=0;function fa(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var Ul=i.unstable_scheduleCallback,Ju=i.unstable_cancelCallback,Qa=i.unstable_shouldYield,tS=i.unstable_requestPaint,ci=i.unstable_now,Fl=i.unstable_ImmediatePriority,nS=i.unstable_UserBlockingPriority,_d=i.unstable_NormalPriority,xd=i.unstable_IdlePriority,mf=null,Yo=null;function gf(g){if(Yo&&typeof Yo.onCommitFiberRoot=="function")try{Yo.onCommitFiberRoot(mf,g,void 0,(g.current.flags&128)===128)}catch{}}function yf(g,w){return g===w&&(g!==0||1/g===1/w)||g!==g&&w!==w}var ns=typeof Object.is=="function"?Object.is:yf,to=null,Sd=!1,V0=!1;function Md(g){to===null?to=[g]:to.push(g)}function Ed(g){Sd=!0,Md(g)}function no(){if(!V0&&to!==null){V0=!0;var g=0,w=Yn;try{var O=to;for(Yn=1;g<O.length;g++){var z=O[g];do z=z(!0);while(z!==null)}to=null,Sd=!1}catch(Z){throw to!==null&&(to=to.slice(g+1)),Ul(Fl,no),Z}finally{Yn=w,V0=!1}}return null}var Zy=l.ReactCurrentBatchConfig;function Mo(g,w){if(ns(g,w))return!0;if(typeof g!="object"||g===null||typeof w!="object"||w===null)return!1;var O=Object.keys(g),z=Object.keys(w);if(O.length!==z.length)return!1;for(z=0;z<O.length;z++){var Z=O[z];if(!Kt.call(w,Z)||!ns(g[Z],w[Z]))return!1}return!0}function H0(g){switch(g.tag){case 5:return Ht(g.type);case 16:return Ht("Lazy");case 13:return Ht("Suspense");case 19:return Ht("SuspenseList");case 0:case 2:case 15:return g=on(g.type,!1),g;case 11:return g=on(g.type.render,!1),g;case 1:return g=on(g.type,!0),g;default:return""}}function ms(g,w){if(g&&g.defaultProps){w=s({},w),g=g.defaultProps;for(var O in g)w[O]===void 0&&(w[O]=g[O]);return w}return w}var vf=En(null),zl=null,ha=null,bd=null;function rs(){bd=ha=zl=null}function Wl(g,w,O){_t?($t(vf,w._currentValue),w._currentValue=O):($t(vf,w._currentValue2),w._currentValue2=O)}function wf(g){var w=vf.current;un(vf),_t?g._currentValue=w:g._currentValue2=w}function Vl(g,w,O){for(;g!==null;){var z=g.alternate;if((g.childLanes&w)!==w?(g.childLanes|=w,z!==null&&(z.childLanes|=w)):z!==null&&(z.childLanes&w)!==w&&(z.childLanes|=w),g===O)break;g=g.return}}function ec(g,w){zl=g,bd=ha=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&w)!==0&&(Si=!0),g.firstContext=null)}function gs(g){var w=_t?g._currentValue:g._currentValue2;if(bd!==g)if(g={context:g,memoizedValue:w,next:null},ha===null){if(zl===null)throw Error(o(308));ha=g,zl.dependencies={lanes:0,firstContext:g}}else ha=ha.next=g;return w}var ro=null,io=!1;function tc(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G0(g,w){g=g.updateQueue,w.updateQueue===g&&(w.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function da(g,w){return{eventTime:g,lane:w,tag:0,payload:null,callback:null,next:null}}function Ja(g,w){var O=g.updateQueue;O!==null&&(O=O.shared,$r!==null&&(g.mode&1)!==0&&(Hn&2)===0?(g=O.interleaved,g===null?(w.next=w,ro===null?ro=[O]:ro.push(O)):(w.next=g.next,g.next=w),O.interleaved=w):(g=O.pending,g===null?w.next=w:(w.next=g.next,g.next=w),O.pending=w))}function Ad(g,w,O){if(w=w.updateQueue,w!==null&&(w=w.shared,(O&4194240)!==0)){var z=w.lanes;z&=g.pendingLanes,O|=z,w.lanes=O,Ko(g,O)}}function Td(g,w){var O=g.updateQueue,z=g.alternate;if(z!==null&&(z=z.updateQueue,O===z)){var Z=null,ie=null;if(O=O.firstBaseUpdate,O!==null){do{var xe={eventTime:O.eventTime,lane:O.lane,tag:O.tag,payload:O.payload,callback:O.callback,next:null};ie===null?Z=ie=xe:ie=ie.next=xe,O=O.next}while(O!==null);ie===null?Z=ie=w:ie=ie.next=w}else Z=ie=w;O={baseState:z.baseState,firstBaseUpdate:Z,lastBaseUpdate:ie,shared:z.shared,effects:z.effects},g.updateQueue=O;return}g=O.lastBaseUpdate,g===null?O.firstBaseUpdate=w:g.next=w,O.lastBaseUpdate=w}function Rd(g,w,O,z){var Z=g.updateQueue;io=!1;var ie=Z.firstBaseUpdate,xe=Z.lastBaseUpdate,We=Z.shared.pending;if(We!==null){Z.shared.pending=null;var pt=We,Wt=pt.next;pt.next=null,xe===null?ie=Wt:xe.next=Wt,xe=pt;var fn=g.alternate;fn!==null&&(fn=fn.updateQueue,We=fn.lastBaseUpdate,We!==xe&&(We===null?fn.firstBaseUpdate=Wt:We.next=Wt,fn.lastBaseUpdate=pt))}if(ie!==null){var Un=Z.baseState;xe=0,fn=Wt=pt=null,We=ie;do{var bn=We.lane,Gn=We.eventTime;if((z&bn)===bn){fn!==null&&(fn=fn.next={eventTime:Gn,lane:0,tag:We.tag,payload:We.payload,callback:We.callback,next:null});e:{var sn=g,Ui=We;switch(bn=w,Gn=O,Ui.tag){case 1:if(sn=Ui.payload,typeof sn=="function"){Un=sn.call(Gn,Un,bn);break e}Un=sn;break e;case 3:sn.flags=sn.flags&-65537|128;case 0:if(sn=Ui.payload,bn=typeof sn=="function"?sn.call(Gn,Un,bn):sn,bn==null)break e;Un=s({},Un,bn);break e;case 2:io=!0}}We.callback!==null&&We.lane!==0&&(g.flags|=64,bn=Z.effects,bn===null?Z.effects=[We]:bn.push(We))}else Gn={eventTime:Gn,lane:bn,tag:We.tag,payload:We.payload,callback:We.callback,next:null},fn===null?(Wt=fn=Gn,pt=Un):fn=fn.next=Gn,xe|=bn;if(We=We.next,We===null){if(We=Z.shared.pending,We===null)break;bn=We,We=bn.next,bn.next=null,Z.lastBaseUpdate=bn,Z.shared.pending=null}}while(!0);if(fn===null&&(pt=Un),Z.baseState=pt,Z.firstBaseUpdate=Wt,Z.lastBaseUpdate=fn,w=Z.shared.interleaved,w!==null){Z=w;do xe|=Z.lane,Z=Z.next;while(Z!==w)}else ie===null&&(Z.shared.lanes=0);Qo|=xe,g.lanes=xe,g.memoizedState=Un}}function Qy(g,w,O){if(g=w.effects,w.effects=null,g!==null)for(w=0;w<g.length;w++){var z=g[w],Z=z.callback;if(Z!==null){if(z.callback=null,z=O,typeof Z!="function")throw Error(o(191,Z));Z.call(z)}}}var Jy=new n.Component().refs;function j0(g,w,O,z){w=g.memoizedState,O=O(z,w),O=O==null?w:s({},w,O),g.memoizedState=O,g.lanes===0&&(g.updateQueue.baseState=O)}var Cd={isMounted:function(g){return(g=g._reactInternals)?te(g)===g:!1},enqueueSetState:function(g,w,O){g=g._reactInternals;var z=ar(),Z=Io(g),ie=da(z,Z);ie.payload=w,O!=null&&(ie.callback=O),Ja(g,ie),w=ji(g,Z,z),w!==null&&Ad(w,g,Z)},enqueueReplaceState:function(g,w,O){g=g._reactInternals;var z=ar(),Z=Io(g),ie=da(z,Z);ie.tag=1,ie.payload=w,O!=null&&(ie.callback=O),Ja(g,ie),w=ji(g,Z,z),w!==null&&Ad(w,g,Z)},enqueueForceUpdate:function(g,w){g=g._reactInternals;var O=ar(),z=Io(g),Z=da(O,z);Z.tag=2,w!=null&&(Z.callback=w),Ja(g,Z),w=ji(g,z,O),w!==null&&Ad(w,g,z)}};function q0(g,w,O,z,Z,ie,xe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(z,ie,xe):w.prototype&&w.prototype.isPureReactComponent?!Mo(O,z)||!Mo(Z,ie):!0}function ev(g,w,O){var z=!1,Z=Bt,ie=w.contextType;return typeof ie=="object"&&ie!==null?ie=gs(ie):(Z=sr(w)?Wr:Mn.current,z=w.contextTypes,ie=(z=z!=null)?vi(g,Z):Bt),w=new w(O,ie),g.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Cd,g.stateNode=w,w._reactInternals=g,z&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=Z,g.__reactInternalMemoizedMaskedChildContext=ie),w}function tv(g,w,O,z){g=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(O,z),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(O,z),w.state!==g&&Cd.enqueueReplaceState(w,w.state,null)}function K0(g,w,O,z){var Z=g.stateNode;Z.props=O,Z.state=g.memoizedState,Z.refs=Jy,tc(g);var ie=w.contextType;typeof ie=="object"&&ie!==null?Z.context=gs(ie):(ie=sr(w)?Wr:Mn.current,Z.context=vi(g,ie)),Z.state=g.memoizedState,ie=w.getDerivedStateFromProps,typeof ie=="function"&&(j0(g,w,ie,O),Z.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(w=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),w!==Z.state&&Cd.enqueueReplaceState(Z,Z.state,null),Rd(g,O,Z,z),Z.state=g.memoizedState),typeof Z.componentDidMount=="function"&&(g.flags|=4194308)}var nc=[],el=0,Id=null,Nd=0,so=[],Bs=0,Hl=null,pa=1,ma="";function Gl(g,w){nc[el++]=Nd,nc[el++]=Id,Id=g,Nd=w}function nv(g,w,O){so[Bs++]=pa,so[Bs++]=ma,so[Bs++]=Hl,Hl=g;var z=pa;g=ma;var Z=32-Ut(z)-1;z&=~(1<<Z),O+=1;var ie=32-Ut(w)+Z;if(30<ie){var xe=Z-Z%5;ie=(z&(1<<xe)-1).toString(32),z>>=xe,Z-=xe,pa=1<<32-Ut(w)+Z|O<<Z|z,ma=ie+g}else pa=1<<ie|O<<Z|z,ma=g}function Y0(g){g.return!==null&&(Gl(g,1),nv(g,1,0))}function X0(g){for(;g===Id;)Id=nc[--el],nc[el]=null,Nd=nc[--el],nc[el]=null;for(;g===Hl;)Hl=so[--Bs],so[Bs]=null,ma=so[--Bs],so[Bs]=null,pa=so[--Bs],so[Bs]=null}var is=null,Li=null,Dr=!1,rc=!1,oo=null;function $0(g,w){var O=Gs(5,null,null,0);O.elementType="DELETED",O.stateNode=w,O.return=g,w=g.deletions,w===null?(g.deletions=[O],g.flags|=16):w.push(O)}function Z0(g,w){switch(g.tag){case 5:return w=X(w,g.type,g.pendingProps),w!==null?(g.stateNode=w,is=g,Li=xt(w),!0):!1;case 6:return w=he(w,g.pendingProps),w!==null?(g.stateNode=w,is=g,Li=null,!0):!1;case 13:if(w=Ie(w),w!==null){var O=Hl!==null?{id:pa,overflow:ma}:null;return g.memoizedState={dehydrated:w,treeContext:O,retryLane:1073741824},O=Gs(18,null,null,0),O.stateNode=w,O.return=g,g.child=O,is=g,Li=null,!0}return!1;default:return!1}}function Pd(g){return(g.mode&1)!==0&&(g.flags&128)===0}function tl(g){if(Dr){var w=Li;if(w){var O=w;if(!Z0(g,w)){if(Pd(g))throw Error(o(418));w=gt(O);var z=is;w&&Z0(g,w)?$0(z,O):(g.flags=g.flags&-4097|2,Dr=!1,is=g)}}else{if(Pd(g))throw Error(o(418));g.flags=g.flags&-4097|2,Dr=!1,is=g}}}function rv(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;is=g}function _f(g){if(!ge||g!==is)return!1;if(!Dr)return rv(g),Dr=!0,!1;if(g.tag!==3&&(g.tag!==5||Be(g.type)&&!$(g.type,g.memoizedProps))){var w=Li;if(w){if(Pd(g)){for(g=Li;g;)g=gt(g);throw Error(o(418))}for(;w;)$0(g,w),w=gt(w)}}if(rv(g),g.tag===13){if(!ge)throw Error(o(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Li=Ot(g)}else Li=is?gt(g.stateNode):null;return!0}function ic(){ge&&(Li=is=null,rc=Dr=!1)}function Ld(g){oo===null?oo=[g]:oo.push(g)}function sc(g,w,O){if(g=O.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(O._owner){if(O=O._owner,O){if(O.tag!==1)throw Error(o(309));var z=O.stateNode}if(!z)throw Error(o(147,g));var Z=z,ie=""+g;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===ie?w.ref:(w=function(xe){var We=Z.refs;We===Jy&&(We=Z.refs={}),xe===null?delete We[ie]:We[ie]=xe},w._stringRef=ie,w)}if(typeof g!="string")throw Error(o(284));if(!O._owner)throw Error(o(290,g))}return g}function nl(g,w){throw g=Object.prototype.toString.call(w),Error(o(31,g==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":g))}function oc(g){var w=g._init;return w(g._payload)}function iv(g){function w(st,Ke){if(g){var ht=st.deletions;ht===null?(st.deletions=[Ke],st.flags|=16):ht.push(Ke)}}function O(st,Ke){if(!g)return null;for(;Ke!==null;)w(st,Ke),Ke=Ke.sibling;return null}function z(st,Ke){for(st=new Map;Ke!==null;)Ke.key!==null?st.set(Ke.key,Ke):st.set(Ke.index,Ke),Ke=Ke.sibling;return st}function Z(st,Ke){return st=Ca(st,Ke),st.index=0,st.sibling=null,st}function ie(st,Ke,ht){return st.index=ht,g?(ht=st.alternate,ht!==null?(ht=ht.index,ht<Ke?(st.flags|=2,Ke):ht):(st.flags|=2,Ke)):(st.flags|=1048576,Ke)}function xe(st){return g&&st.alternate===null&&(st.flags|=2),st}function We(st,Ke,ht,Qt){return Ke===null||Ke.tag!==6?(Ke=op(ht,st.mode,Qt),Ke.return=st,Ke):(Ke=Z(Ke,ht),Ke.return=st,Ke)}function pt(st,Ke,ht,Qt){var yn=ht.type;return yn===h?fn(st,Ke,ht.props.children,Qt,ht.key):Ke!==null&&(Ke.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===k&&oc(yn)===Ke.type)?(Qt=Z(Ke,ht.props),Qt.ref=sc(st,Ke,ht),Qt.return=st,Qt):(Qt=sp(ht.type,ht.key,ht.props,null,st.mode,Qt),Qt.ref=sc(st,Ke,ht),Qt.return=st,Qt)}function Wt(st,Ke,ht,Qt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==ht.containerInfo||Ke.stateNode.implementation!==ht.implementation?(Ke=ap(ht,st.mode,Qt),Ke.return=st,Ke):(Ke=Z(Ke,ht.children||[]),Ke.return=st,Ke)}function fn(st,Ke,ht,Qt,yn){return Ke===null||Ke.tag!==7?(Ke=hu(ht,st.mode,Qt,yn),Ke.return=st,Ke):(Ke=Z(Ke,ht),Ke.return=st,Ke)}function Un(st,Ke,ht){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Ke=op(""+Ke,st.mode,ht),Ke.return=st,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case c:return ht=sp(Ke.type,Ke.key,Ke.props,null,st.mode,ht),ht.ref=sc(st,null,Ke),ht.return=st,ht;case d:return Ke=ap(Ke,st.mode,ht),Ke.return=st,Ke;case k:var Qt=Ke._init;return Un(st,Qt(Ke._payload),ht)}if(p(Ke)||G(Ke))return Ke=hu(Ke,st.mode,ht,null),Ke.return=st,Ke;nl(st,Ke)}return null}function bn(st,Ke,ht,Qt){var yn=Ke!==null?Ke.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number")return yn!==null?null:We(st,Ke,""+ht,Qt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case c:return ht.key===yn?pt(st,Ke,ht,Qt):null;case d:return ht.key===yn?Wt(st,Ke,ht,Qt):null;case k:return yn=ht._init,bn(st,Ke,yn(ht._payload),Qt)}if(p(ht)||G(ht))return yn!==null?null:fn(st,Ke,ht,Qt,null);nl(st,ht)}return null}function Gn(st,Ke,ht,Qt,yn){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return st=st.get(ht)||null,We(Ke,st,""+Qt,yn);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case c:return st=st.get(Qt.key===null?ht:Qt.key)||null,pt(Ke,st,Qt,yn);case d:return st=st.get(Qt.key===null?ht:Qt.key)||null,Wt(Ke,st,Qt,yn);case k:var Vn=Qt._init;return Gn(st,Ke,ht,Vn(Qt._payload),yn)}if(p(Qt)||G(Qt))return st=st.get(ht)||null,fn(Ke,st,Qt,yn,null);nl(Ke,Qt)}return null}function sn(st,Ke,ht,Qt){for(var yn=null,Vn=null,Fn=Ke,or=Ke=0,ni=null;Fn!==null&&or<ht.length;or++){Fn.index>or?(ni=Fn,Fn=null):ni=Fn.sibling;var ir=bn(st,Fn,ht[or],Qt);if(ir===null){Fn===null&&(Fn=ni);break}g&&Fn&&ir.alternate===null&&w(st,Fn),Ke=ie(ir,Ke,or),Vn===null?yn=ir:Vn.sibling=ir,Vn=ir,Fn=ni}if(or===ht.length)return O(st,Fn),Dr&&Gl(st,or),yn;if(Fn===null){for(;or<ht.length;or++)Fn=Un(st,ht[or],Qt),Fn!==null&&(Ke=ie(Fn,Ke,or),Vn===null?yn=Fn:Vn.sibling=Fn,Vn=Fn);return Dr&&Gl(st,or),yn}for(Fn=z(st,Fn);or<ht.length;or++)ni=Gn(Fn,st,or,ht[or],Qt),ni!==null&&(g&&ni.alternate!==null&&Fn.delete(ni.key===null?or:ni.key),Ke=ie(ni,Ke,or),Vn===null?yn=ni:Vn.sibling=ni,Vn=ni);return g&&Fn.forEach(function(Ia){return w(st,Ia)}),Dr&&Gl(st,or),yn}function Ui(st,Ke,ht,Qt){var yn=G(ht);if(typeof yn!="function")throw Error(o(150));if(ht=yn.call(ht),ht==null)throw Error(o(151));for(var Vn=yn=null,Fn=Ke,or=Ke=0,ni=null,ir=ht.next();Fn!==null&&!ir.done;or++,ir=ht.next()){Fn.index>or?(ni=Fn,Fn=null):ni=Fn.sibling;var Ia=bn(st,Fn,ir.value,Qt);if(Ia===null){Fn===null&&(Fn=ni);break}g&&Fn&&Ia.alternate===null&&w(st,Fn),Ke=ie(Ia,Ke,or),Vn===null?yn=Ia:Vn.sibling=Ia,Vn=Ia,Fn=ni}if(ir.done)return O(st,Fn),Dr&&Gl(st,or),yn;if(Fn===null){for(;!ir.done;or++,ir=ht.next())ir=Un(st,ir.value,Qt),ir!==null&&(Ke=ie(ir,Ke,or),Vn===null?yn=ir:Vn.sibling=ir,Vn=ir);return Dr&&Gl(st,or),yn}for(Fn=z(st,Fn);!ir.done;or++,ir=ht.next())ir=Gn(Fn,st,or,ir.value,Qt),ir!==null&&(g&&ir.alternate!==null&&Fn.delete(ir.key===null?or:ir.key),Ke=ie(ir,Ke,or),Vn===null?yn=ir:Vn.sibling=ir,Vn=ir);return g&&Fn.forEach(function(Rm){return w(st,Rm)}),Dr&&Gl(st,or),yn}function js(st,Ke,ht,Qt){if(typeof ht=="object"&&ht!==null&&ht.type===h&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case c:e:{for(var yn=ht.key,Vn=Ke;Vn!==null;){if(Vn.key===yn){if(yn=ht.type,yn===h){if(Vn.tag===7){O(st,Vn.sibling),Ke=Z(Vn,ht.props.children),Ke.return=st,st=Ke;break e}}else if(Vn.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===k&&oc(yn)===Vn.type){O(st,Vn.sibling),Ke=Z(Vn,ht.props),Ke.ref=sc(st,Vn,ht),Ke.return=st,st=Ke;break e}O(st,Vn);break}else w(st,Vn);Vn=Vn.sibling}ht.type===h?(Ke=hu(ht.props.children,st.mode,Qt,ht.key),Ke.return=st,st=Ke):(Qt=sp(ht.type,ht.key,ht.props,null,st.mode,Qt),Qt.ref=sc(st,Ke,ht),Qt.return=st,st=Qt)}return xe(st);case d:e:{for(Vn=ht.key;Ke!==null;){if(Ke.key===Vn)if(Ke.tag===4&&Ke.stateNode.containerInfo===ht.containerInfo&&Ke.stateNode.implementation===ht.implementation){O(st,Ke.sibling),Ke=Z(Ke,ht.children||[]),Ke.return=st,st=Ke;break e}else{O(st,Ke);break}else w(st,Ke);Ke=Ke.sibling}Ke=ap(ht,st.mode,Qt),Ke.return=st,st=Ke}return xe(st);case k:return Vn=ht._init,js(st,Ke,Vn(ht._payload),Qt)}if(p(ht))return sn(st,Ke,ht,Qt);if(G(ht))return Ui(st,Ke,ht,Qt);nl(st,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"?(ht=""+ht,Ke!==null&&Ke.tag===6?(O(st,Ke.sibling),Ke=Z(Ke,ht),Ke.return=st,st=Ke):(O(st,Ke),Ke=op(ht,st.mode,Qt),Ke.return=st,st=Ke),xe(st)):O(st,Ke)}return js}var ga=iv(!0),sv=iv(!1),ac={},ys=En(ac),jl=En(ac),ql=En(ac);function Eo(g){if(g===ac)throw Error(o(174));return g}function kd(g,w){$t(ql,w),$t(jl,g),$t(ys,ac),g=R(w),un(ys),$t(ys,g)}function lc(){un(ys),un(jl),un(ql)}function ov(g){var w=Eo(ql.current),O=Eo(ys.current);w=T(O,g.type,w),O!==w&&($t(jl,g),$t(ys,w))}function Q0(g){jl.current===g&&(un(ys),un(jl))}var Vr=En(0);function Od(g){for(var w=g;w!==null;){if(w.tag===13){var O=w.memoizedState;if(O!==null&&(O=O.dehydrated,O===null||Te(O)||Ne(O)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var Us=[];function Kl(){for(var g=0;g<Us.length;g++){var w=Us[g];_t?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}Us.length=0}var xf=l.ReactCurrentDispatcher,Fs=l.ReactCurrentBatchConfig,Yl=0,Hr=null,wi=null,_i=null,Dd=!1,Xo=!1,Xl=0,Sf=0;function xi(){throw Error(o(321))}function Bd(g,w){if(w===null)return!1;for(var O=0;O<w.length&&O<g.length;O++)if(!ns(g[O],w[O]))return!1;return!0}function uc(g,w,O,z,Z,ie){if(Yl=ie,Hr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,xf.current=g===null||g.memoizedState===null?im:sm,g=O(z,Z),Xo){ie=0;do{if(Xo=!1,Xl=0,25<=ie)throw Error(o(301));ie+=1,_i=wi=null,w.updateQueue=null,xf.current=om,g=O(z,Z)}while(Xo)}if(xf.current=dc,w=wi!==null&&wi.next!==null,Yl=0,_i=wi=Hr=null,Dd=!1,w)throw Error(o(300));return g}function rl(){var g=Xl!==0;return Xl=0,g}function bo(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?Hr.memoizedState=_i=g:_i=_i.next=g,_i}function Ao(){if(wi===null){var g=Hr.alternate;g=g!==null?g.memoizedState:null}else g=wi.next;var w=_i===null?Hr.memoizedState:_i.next;if(w!==null)_i=w,wi=g;else{if(g===null)throw Error(o(310));wi=g,g={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},_i===null?Hr.memoizedState=_i=g:_i=_i.next=g}return _i}function $o(g,w){return typeof w=="function"?w(g):w}function Mf(g){var w=Ao(),O=w.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=g;var z=wi,Z=z.baseQueue,ie=O.pending;if(ie!==null){if(Z!==null){var xe=Z.next;Z.next=ie.next,ie.next=xe}z.baseQueue=Z=ie,O.pending=null}if(Z!==null){ie=Z.next,z=z.baseState;var We=xe=null,pt=null,Wt=ie;do{var fn=Wt.lane;if((Yl&fn)===fn)pt!==null&&(pt=pt.next={lane:0,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null}),z=Wt.hasEagerState?Wt.eagerState:g(z,Wt.action);else{var Un={lane:fn,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null};pt===null?(We=pt=Un,xe=z):pt=pt.next=Un,Hr.lanes|=fn,Qo|=fn}Wt=Wt.next}while(Wt!==null&&Wt!==ie);pt===null?xe=z:pt.next=We,ns(z,w.memoizedState)||(Si=!0),w.memoizedState=z,w.baseState=xe,w.baseQueue=pt,O.lastRenderedState=z}if(g=O.interleaved,g!==null){Z=g;do ie=Z.lane,Hr.lanes|=ie,Qo|=ie,Z=Z.next;while(Z!==g)}else Z===null&&(O.lanes=0);return[w.memoizedState,O.dispatch]}function Ef(g){var w=Ao(),O=w.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=g;var z=O.dispatch,Z=O.pending,ie=w.memoizedState;if(Z!==null){O.pending=null;var xe=Z=Z.next;do ie=g(ie,xe.action),xe=xe.next;while(xe!==Z);ns(ie,w.memoizedState)||(Si=!0),w.memoizedState=ie,w.baseQueue===null&&(w.baseState=ie),O.lastRenderedState=ie}return[ie,z]}function J0(){}function em(g,w){var O=Hr,z=Ao(),Z=w(),ie=!ns(z.memoizedState,Z);if(ie&&(z.memoizedState=Z,Si=!0),z=z.queue,cc(ya.bind(null,O,z,g),[g]),z.getSnapshot!==w||ie||_i!==null&&_i.memoizedState.tag&1){if(O.flags|=2048,Af(9,nm.bind(null,O,z,Z,w),void 0,null),$r===null)throw Error(o(349));(Yl&30)!==0||tm(O,w,Z)}return Z}function tm(g,w,O){g.flags|=16384,g={getSnapshot:w,value:O},w=Hr.updateQueue,w===null?(w={lastEffect:null,stores:null},Hr.updateQueue=w,w.stores=[g]):(O=w.stores,O===null?w.stores=[g]:O.push(g))}function nm(g,w,O,z){w.value=O,w.getSnapshot=z,Ud(w)&&ji(g,1,-1)}function ya(g,w,O){return O(function(){Ud(w)&&ji(g,1,-1)})}function Ud(g){var w=g.getSnapshot;g=g.value;try{var O=w();return!ns(g,O)}catch{return!0}}function bf(g){var w=bo();return typeof g=="function"&&(g=g()),w.memoizedState=w.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:g},w.queue=g,g=g.dispatch=rS.bind(null,Hr,g),[w.memoizedState,g]}function Af(g,w,O,z){return g={tag:g,create:w,destroy:O,deps:z,next:null},w=Hr.updateQueue,w===null?(w={lastEffect:null,stores:null},Hr.updateQueue=w,w.lastEffect=g.next=g):(O=w.lastEffect,O===null?w.lastEffect=g.next=g:(z=O.next,O.next=g,g.next=z,w.lastEffect=g)),g}function av(){return Ao().memoizedState}function il(g,w,O,z){var Z=bo();Hr.flags|=g,Z.memoizedState=Af(1|w,O,void 0,z===void 0?null:z)}function Fd(g,w,O,z){var Z=Ao();z=z===void 0?null:z;var ie=void 0;if(wi!==null){var xe=wi.memoizedState;if(ie=xe.destroy,z!==null&&Bd(z,xe.deps)){Z.memoizedState=Af(w,O,ie,z);return}}Hr.flags|=g,Z.memoizedState=Af(1|w,O,ie,z)}function zd(g,w){return il(8390656,8,g,w)}function cc(g,w){return Fd(2048,8,g,w)}function Tr(g,w){return Fd(4,2,g,w)}function Wd(g,w){return Fd(4,4,g,w)}function Tf(g,w){if(typeof w=="function")return g=g(),w(g),function(){w(null)};if(w!=null)return g=g(),w.current=g,function(){w.current=null}}function fc(g,w,O){return O=O!=null?O.concat([g]):null,Fd(4,4,Tf.bind(null,w,g),O)}function Vd(){}function Hd(g,w){var O=Ao();w=w===void 0?null:w;var z=O.memoizedState;return z!==null&&w!==null&&Bd(w,z[1])?z[0]:(O.memoizedState=[g,w],g)}function hc(g,w){var O=Ao();w=w===void 0?null:w;var z=O.memoizedState;return z!==null&&w!==null&&Bd(w,z[1])?z[0]:(g=g(),O.memoizedState=[g,w],g)}function Gd(g,w){var O=Yn;Yn=O!==0&&4>O?O:4,g(!0);var z=Fs.transition;Fs.transition={};try{g(!1),w()}finally{Yn=O,Fs.transition=z}}function $l(){return Ao().memoizedState}function lv(g,w,O){var z=Io(g);O={lane:z,action:O,hasEagerState:!1,eagerState:null,next:null},uv(g)?rm(w,O):(Rf(g,w,O),O=ar(),g=ji(g,z,O),g!==null&&Cf(g,w,z))}function rS(g,w,O){var z=Io(g),Z={lane:z,action:O,hasEagerState:!1,eagerState:null,next:null};if(uv(g))rm(w,Z);else{Rf(g,w,Z);var ie=g.alternate;if(g.lanes===0&&(ie===null||ie.lanes===0)&&(ie=w.lastRenderedReducer,ie!==null))try{var xe=w.lastRenderedState,We=ie(xe,O);if(Z.hasEagerState=!0,Z.eagerState=We,ns(We,xe))return}catch{}finally{}O=ar(),g=ji(g,z,O),g!==null&&Cf(g,w,z)}}function uv(g){var w=g.alternate;return g===Hr||w!==null&&w===Hr}function rm(g,w){Xo=Dd=!0;var O=g.pending;O===null?w.next=w:(w.next=O.next,O.next=w),g.pending=w}function Rf(g,w,O){$r!==null&&(g.mode&1)!==0&&(Hn&2)===0?(g=w.interleaved,g===null?(O.next=O,ro===null?ro=[w]:ro.push(w)):(O.next=g.next,g.next=O),w.interleaved=O):(g=w.pending,g===null?O.next=O:(O.next=g.next,g.next=O),w.pending=O)}function Cf(g,w,O){if((O&4194240)!==0){var z=w.lanes;z&=g.pendingLanes,O|=z,w.lanes=O,Ko(g,O)}}var dc={readContext:gs,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},im={readContext:gs,useCallback:function(g,w){return bo().memoizedState=[g,w===void 0?null:w],g},useContext:gs,useEffect:zd,useImperativeHandle:function(g,w,O){return O=O!=null?O.concat([g]):null,il(4194308,4,Tf.bind(null,w,g),O)},useLayoutEffect:function(g,w){return il(4194308,4,g,w)},useInsertionEffect:function(g,w){return il(4,2,g,w)},useMemo:function(g,w){var O=bo();return w=w===void 0?null:w,g=g(),O.memoizedState=[g,w],g},useReducer:function(g,w,O){var z=bo();return w=O!==void 0?O(w):w,z.memoizedState=z.baseState=w,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:w},z.queue=g,g=g.dispatch=lv.bind(null,Hr,g),[z.memoizedState,g]},useRef:function(g){var w=bo();return g={current:g},w.memoizedState=g},useState:bf,useDebugValue:Vd,useDeferredValue:function(g){var w=bf(g),O=w[0],z=w[1];return zd(function(){var Z=Fs.transition;Fs.transition={};try{z(g)}finally{Fs.transition=Z}},[g]),O},useTransition:function(){var g=bf(!1),w=g[0];return g=Gd.bind(null,g[1]),bo().memoizedState=g,[w,g]},useMutableSource:function(){},useSyncExternalStore:function(g,w,O){var z=Hr,Z=bo();if(Dr){if(O===void 0)throw Error(o(407));O=O()}else{if(O=w(),$r===null)throw Error(o(349));(Yl&30)!==0||tm(z,w,O)}Z.memoizedState=O;var ie={value:O,getSnapshot:w};return Z.queue=ie,zd(ya.bind(null,z,ie,g),[g]),z.flags|=2048,Af(9,nm.bind(null,z,ie,O,w),void 0,null),O},useId:function(){var g=bo(),w=$r.identifierPrefix;if(Dr){var O=ma,z=pa;O=(z&~(1<<32-Ut(z)-1)).toString(32)+O,w=":"+w+"R"+O,O=Xl++,0<O&&(w+="H"+O.toString(32)),w+=":"}else O=Sf++,w=":"+w+"r"+O.toString(32)+":";return g.memoizedState=w},unstable_isNewReconciler:!1},sm={readContext:gs,useCallback:Hd,useContext:gs,useEffect:cc,useImperativeHandle:fc,useInsertionEffect:Tr,useLayoutEffect:Wd,useMemo:hc,useReducer:Mf,useRef:av,useState:function(){return Mf($o)},useDebugValue:Vd,useDeferredValue:function(g){var w=Mf($o),O=w[0],z=w[1];return cc(function(){var Z=Fs.transition;Fs.transition={};try{z(g)}finally{Fs.transition=Z}},[g]),O},useTransition:function(){var g=Mf($o)[0],w=Ao().memoizedState;return[g,w]},useMutableSource:J0,useSyncExternalStore:em,useId:$l,unstable_isNewReconciler:!1},om={readContext:gs,useCallback:Hd,useContext:gs,useEffect:cc,useImperativeHandle:fc,useInsertionEffect:Tr,useLayoutEffect:Wd,useMemo:hc,useReducer:Ef,useRef:av,useState:function(){return Ef($o)},useDebugValue:Vd,useDeferredValue:function(g){var w=Ef($o),O=w[0],z=w[1];return cc(function(){var Z=Fs.transition;Fs.transition={};try{z(g)}finally{Fs.transition=Z}},[g]),O},useTransition:function(){var g=Ef($o)[0],w=Ao().memoizedState;return[g,w]},useMutableSource:J0,useSyncExternalStore:em,useId:$l,unstable_isNewReconciler:!1};function am(g,w){try{var O="",z=w;do O+=H0(z),z=z.return;while(z);var Z=O}catch(ie){Z=`
Error generating stack: `+ie.message+`
`+ie.stack}return{value:g,source:w,stack:Z}}function jd(g,w){try{console.error(w.value)}catch(O){setTimeout(function(){throw O})}}var iS=typeof WeakMap=="function"?WeakMap:Map;function cv(g,w,O){O=da(-1,O),O.tag=3,O.payload={element:null};var z=w.value;return O.callback=function(){wc||(wc=!0,kr=z),jd(g,w)},O}function qd(g,w,O){O=da(-1,O),O.tag=3;var z=g.type.getDerivedStateFromError;if(typeof z=="function"){var Z=w.value;O.payload=function(){return z(Z)},O.callback=function(){jd(g,w)}}var ie=g.stateNode;return ie!==null&&typeof ie.componentDidCatch=="function"&&(O.callback=function(){jd(g,w),typeof z!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var xe=w.stack;this.componentDidCatch(w.value,{componentStack:xe!==null?xe:""})}),O}function va(g,w,O){var z=g.pingCache;if(z===null){z=g.pingCache=new iS;var Z=new Set;z.set(w,Z)}else Z=z.get(w),Z===void 0&&(Z=new Set,z.set(w,Z));Z.has(O)||(Z.add(O),g=bm.bind(null,g,w,O),w.then(g,g))}function lm(g){do{var w;if((w=g.tag===13)&&(w=g.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return g;g=g.return}while(g!==null);return null}function Zl(g,w,O,z,Z){return(g.mode&1)===0?(g===w?g.flags|=65536:(g.flags|=128,O.flags|=131072,O.flags&=-52805,O.tag===1&&(O.alternate===null?O.tag=17:(w=da(-1,1),w.tag=2,Ja(O,w))),O.lanes|=1),g):(g.flags|=65536,g.lanes=Z,g)}function fi(g){g.flags|=4}function pc(g,w){if(g!==null&&g.child===w.child)return!0;if((w.flags&16)!==0)return!1;for(g=w.child;g!==null;){if((g.flags&12854)!==0||(g.subtreeFlags&12854)!==0)return!1;g=g.sibling}return!0}var zs,Ql,Kd,Yd;if(Ze)zs=function(g,w){for(var O=w.child;O!==null;){if(O.tag===5||O.tag===6)u(g,O.stateNode);else if(O.tag!==4&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===w)break;for(;O.sibling===null;){if(O.return===null||O.return===w)return;O=O.return}O.sibling.return=O.return,O=O.sibling}},Ql=function(){},Kd=function(g,w,O,z,Z){if(g=g.memoizedProps,g!==z){var ie=w.stateNode,xe=Eo(ys.current);O=W(ie,O,g,z,Z,xe),(w.updateQueue=O)&&fi(w)}},Yd=function(g,w,O,z){O!==z&&fi(w)};else if(Pe){zs=function(g,w,O,z){for(var Z=w.child;Z!==null;){if(Z.tag===5){var ie=Z.stateNode;O&&z&&(ie=ae(ie,Z.type,Z.memoizedProps,Z)),u(g,ie)}else if(Z.tag===6)ie=Z.stateNode,O&&z&&(ie=J(ie,Z.memoizedProps,Z)),u(g,ie);else if(Z.tag!==4){if(Z.tag===22&&Z.memoizedState!==null)ie=Z.child,ie!==null&&(ie.return=Z),zs(g,Z,!0,!0);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}}if(Z===w)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===w)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}};var sl=function(g,w,O,z){for(var Z=w.child;Z!==null;){if(Z.tag===5){var ie=Z.stateNode;O&&z&&(ie=ae(ie,Z.type,Z.memoizedProps,Z)),yt(g,ie)}else if(Z.tag===6)ie=Z.stateNode,O&&z&&(ie=J(ie,Z.memoizedProps,Z)),yt(g,ie);else if(Z.tag!==4){if(Z.tag===22&&Z.memoizedState!==null)ie=Z.child,ie!==null&&(ie.return=Z),sl(g,Z,!0,!0);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}}if(Z===w)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===w)return;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}};Ql=function(g,w){var O=w.stateNode;if(!pc(g,w)){g=O.containerInfo;var z=ft(g);sl(z,w,!1,!1),O.pendingChildren=z,fi(w),Sn(g,z)}},Kd=function(g,w,O,z,Z){var ie=g.stateNode,xe=g.memoizedProps;if((g=pc(g,w))&&xe===z)w.stateNode=ie;else{var We=w.stateNode,pt=Eo(ys.current),Wt=null;xe!==z&&(Wt=W(We,O,xe,z,Z,pt)),g&&Wt===null?w.stateNode=ie:(ie=Ct(ie,Wt,O,xe,z,w,g,We),S(ie,O,z,Z,pt)&&fi(w),w.stateNode=ie,g?fi(w):zs(ie,w,!1,!1))}},Yd=function(g,w,O,z){O!==z?(g=Eo(ql.current),O=Eo(ys.current),w.stateNode=se(z,g,O,w),fi(w)):w.stateNode=g.stateNode}}else Ql=function(){},Kd=function(){},Yd=function(){};function wa(g,w){if(!Dr)switch(g.tailMode){case"hidden":w=g.tail;for(var O=null;w!==null;)w.alternate!==null&&(O=w),w=w.sibling;O===null?g.tail=null:O.sibling=null;break;case"collapsed":O=g.tail;for(var z=null;O!==null;)O.alternate!==null&&(z=O),O=O.sibling;z===null?w||g.tail===null?g.tail=null:g.tail.sibling=null:z.sibling=null}}function Xr(g){var w=g.alternate!==null&&g.alternate.child===g.child,O=0,z=0;if(w)for(var Z=g.child;Z!==null;)O|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags&14680064,z|=Z.flags&14680064,Z.return=g,Z=Z.sibling;else for(Z=g.child;Z!==null;)O|=Z.lanes|Z.childLanes,z|=Z.subtreeFlags,z|=Z.flags,Z.return=g,Z=Z.sibling;return g.subtreeFlags|=z,g.childLanes=O,w}function Xd(g,w,O){var z=w.pendingProps;switch(X0(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(w),null;case 1:return sr(w.type)&&Yt(),Xr(w),null;case 3:return z=w.stateNode,lc(),un(On),un(Mn),Kl(),z.pendingContext&&(z.context=z.pendingContext,z.pendingContext=null),(g===null||g.child===null)&&(_f(w)?fi(w):g===null||g.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,oo!==null&&(Vf(oo),oo=null))),Ql(g,w),Xr(w),null;case 5:Q0(w),O=Eo(ql.current);var Z=w.type;if(g!==null&&w.stateNode!=null)Kd(g,w,Z,z,O),g.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!z){if(w.stateNode===null)throw Error(o(166));return Xr(w),null}if(g=Eo(ys.current),_f(w)){if(!ge)throw Error(o(175));g=kt(w.stateNode,w.type,w.memoizedProps,O,g,w,!rc),w.updateQueue=g,g!==null&&fi(w)}else{var ie=v(Z,z,O,g,w);zs(ie,w,!1,!1),w.stateNode=ie,S(ie,Z,z,O,g)&&fi(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Xr(w),null;case 6:if(g&&w.stateNode!=null)Yd(g,w,g.memoizedProps,z);else{if(typeof z!="string"&&w.stateNode===null)throw Error(o(166));if(g=Eo(ql.current),O=Eo(ys.current),_f(w)){if(!ge)throw Error(o(176));if(g=w.stateNode,z=w.memoizedProps,(O=Pr(g,z,w,!rc))&&(Z=is,Z!==null))switch(ie=(Z.mode&1)!==0,Z.tag){case 3:Tt(Z.stateNode.containerInfo,g,z,ie);break;case 5:zt(Z.type,Z.memoizedProps,Z.stateNode,g,z,ie)}O&&fi(w)}else w.stateNode=se(z,g,O,w)}return Xr(w),null;case 13:if(un(Vr),z=w.memoizedState,Dr&&Li!==null&&(w.mode&1)!==0&&(w.flags&128)===0){for(g=Li;g;)g=gt(g);return ic(),w.flags|=98560,w}if(z!==null&&z.dehydrated!==null){if(z=_f(w),g===null){if(!z)throw Error(o(318));if(!ge)throw Error(o(344));if(g=w.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Dt(g,w)}else ic(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;return Xr(w),null}return oo!==null&&(Vf(oo),oo=null),(w.flags&128)!==0?(w.lanes=O,w):(z=z!==null,O=!1,g===null?_f(w):O=g.memoizedState!==null,z&&!O&&(w.child.flags|=8192,(w.mode&1)!==0&&(g===null||(Vr.current&1)!==0?qr===0&&(qr=3):np())),w.updateQueue!==null&&(w.flags|=4),Xr(w),null);case 4:return lc(),Ql(g,w),g===null&&je(w.stateNode.containerInfo),Xr(w),null;case 10:return wf(w.type._context),Xr(w),null;case 17:return sr(w.type)&&Yt(),Xr(w),null;case 19:if(un(Vr),Z=w.memoizedState,Z===null)return Xr(w),null;if(z=(w.flags&128)!==0,ie=Z.rendering,ie===null)if(z)wa(Z,!1);else{if(qr!==0||g!==null&&(g.flags&128)!==0)for(g=w.child;g!==null;){if(ie=Od(g),ie!==null){for(w.flags|=128,wa(Z,!1),g=ie.updateQueue,g!==null&&(w.updateQueue=g,w.flags|=4),w.subtreeFlags=0,g=O,z=w.child;z!==null;)O=z,Z=g,O.flags&=14680066,ie=O.alternate,ie===null?(O.childLanes=0,O.lanes=Z,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=ie.childLanes,O.lanes=ie.lanes,O.child=ie.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=ie.memoizedProps,O.memoizedState=ie.memoizedState,O.updateQueue=ie.updateQueue,O.type=ie.type,Z=ie.dependencies,O.dependencies=Z===null?null:{lanes:Z.lanes,firstContext:Z.firstContext}),z=z.sibling;return $t(Vr,Vr.current&1|2),w.child}g=g.sibling}Z.tail!==null&&ci()>ll&&(w.flags|=128,z=!0,wa(Z,!1),w.lanes=4194304)}else{if(!z)if(g=Od(ie),g!==null){if(w.flags|=128,z=!0,g=g.updateQueue,g!==null&&(w.updateQueue=g,w.flags|=4),wa(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ie.alternate&&!Dr)return Xr(w),null}else 2*ci()-Z.renderingStartTime>ll&&O!==1073741824&&(w.flags|=128,z=!0,wa(Z,!1),w.lanes=4194304);Z.isBackwards?(ie.sibling=w.child,w.child=ie):(g=Z.last,g!==null?g.sibling=ie:w.child=ie,Z.last=ie)}return Z.tail!==null?(w=Z.tail,Z.rendering=w,Z.tail=w.sibling,Z.renderingStartTime=ci(),w.sibling=null,g=Vr.current,$t(Vr,z?g&1|2:g&1),w):(Xr(w),null);case 22:case 23:return Hf(),z=w.memoizedState!==null,g!==null&&g.memoizedState!==null!==z&&(w.flags|=8192),z&&(w.mode&1)!==0?(Gi&1073741824)!==0&&(Xr(w),Ze&&w.subtreeFlags&6&&(w.flags|=8192)):Xr(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var um=l.ReactCurrentOwner,Si=!1;function jr(g,w,O,z){w.child=g===null?sv(w,null,O,z):ga(w,g.child,O,z)}function Rr(g,w,O,z,Z){O=O.render;var ie=w.ref;return ec(w,Z),z=uc(g,w,O,z,ie,Z),O=rl(),g!==null&&!Si?(w.updateQueue=g.updateQueue,w.flags&=-2053,g.lanes&=~Z,vs(g,w,Z)):(Dr&&O&&Y0(w),w.flags|=1,jr(g,w,z,Z),w.child)}function Mr(g,w,O,z,Z){if(g===null){var ie=O.type;return typeof ie=="function"&&!ip(ie)&&ie.defaultProps===void 0&&O.compare===null&&O.defaultProps===void 0?(w.tag=15,w.type=ie,_a(g,w,ie,z,Z)):(g=sp(O.type,null,z,w,w.mode,Z),g.ref=w.ref,g.return=w,w.child=g)}if(ie=g.child,(g.lanes&Z)===0){var xe=ie.memoizedProps;if(O=O.compare,O=O!==null?O:Mo,O(xe,z)&&g.ref===w.ref)return vs(g,w,Z)}return w.flags|=1,g=Ca(ie,z),g.ref=w.ref,g.return=w,w.child=g}function _a(g,w,O,z,Z){if(g!==null&&Mo(g.memoizedProps,z)&&g.ref===w.ref)if(Si=!1,(g.lanes&Z)!==0)(g.flags&131072)!==0&&(Si=!0);else return w.lanes=g.lanes,vs(g,w,Z);return xa(g,w,O,z,Z)}function ki(g,w,O){var z=w.pendingProps,Z=z.children,ie=g!==null?g.memoizedState:null;if(z.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null},$t(au,Gi),Gi|=O;else if((O&1073741824)!==0)w.memoizedState={baseLanes:0,cachePool:null},z=ie!==null?ie.baseLanes:O,$t(au,Gi),Gi|=z;else return g=ie!==null?ie.baseLanes|O:O,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:g,cachePool:null},w.updateQueue=null,$t(au,Gi),Gi|=g,null;else ie!==null?(z=ie.baseLanes|O,w.memoizedState=null):z=O,$t(au,Gi),Gi|=z;return jr(g,w,Z,O),w.child}function ss(g,w){var O=w.ref;(g===null&&O!==null||g!==null&&g.ref!==O)&&(w.flags|=512,w.flags|=2097152)}function xa(g,w,O,z,Z){var ie=sr(O)?Wr:Mn.current;return ie=vi(w,ie),ec(w,Z),O=uc(g,w,O,z,ie,Z),z=rl(),g!==null&&!Si?(w.updateQueue=g.updateQueue,w.flags&=-2053,g.lanes&=~Z,vs(g,w,Z)):(Dr&&z&&Y0(w),w.flags|=1,jr(g,w,O,Z),w.child)}function Jl(g,w,O,z,Z){if(sr(O)){var ie=!0;Fe(w)}else ie=!1;if(ec(w,Z),w.stateNode===null)g!==null&&(g.alternate=null,w.alternate=null,w.flags|=2),ev(w,O,z),K0(w,O,z,Z),z=!0;else if(g===null){var xe=w.stateNode,We=w.memoizedProps;xe.props=We;var pt=xe.context,Wt=O.contextType;typeof Wt=="object"&&Wt!==null?Wt=gs(Wt):(Wt=sr(O)?Wr:Mn.current,Wt=vi(w,Wt));var fn=O.getDerivedStateFromProps,Un=typeof fn=="function"||typeof xe.getSnapshotBeforeUpdate=="function";Un||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(We!==z||pt!==Wt)&&tv(w,xe,z,Wt),io=!1;var bn=w.memoizedState;xe.state=bn,Rd(w,z,xe,Z),pt=w.memoizedState,We!==z||bn!==pt||On.current||io?(typeof fn=="function"&&(j0(w,O,fn,z),pt=w.memoizedState),(We=io||q0(w,O,We,z,bn,pt,Wt))?(Un||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(w.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=z,w.memoizedState=pt),xe.props=z,xe.state=pt,xe.context=Wt,z=We):(typeof xe.componentDidMount=="function"&&(w.flags|=4194308),z=!1)}else{xe=w.stateNode,G0(g,w),We=w.memoizedProps,Wt=w.type===w.elementType?We:ms(w.type,We),xe.props=Wt,Un=w.pendingProps,bn=xe.context,pt=O.contextType,typeof pt=="object"&&pt!==null?pt=gs(pt):(pt=sr(O)?Wr:Mn.current,pt=vi(w,pt));var Gn=O.getDerivedStateFromProps;(fn=typeof Gn=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(We!==Un||bn!==pt)&&tv(w,xe,z,pt),io=!1,bn=w.memoizedState,xe.state=bn,Rd(w,z,xe,Z);var sn=w.memoizedState;We!==Un||bn!==sn||On.current||io?(typeof Gn=="function"&&(j0(w,O,Gn,z),sn=w.memoizedState),(Wt=io||q0(w,O,Wt,z,bn,sn,pt)||!1)?(fn||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(z,sn,pt),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(z,sn,pt)),typeof xe.componentDidUpdate=="function"&&(w.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof xe.componentDidUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(w.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(w.flags|=1024),w.memoizedProps=z,w.memoizedState=sn),xe.props=z,xe.state=sn,xe.context=pt,z=Wt):(typeof xe.componentDidUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(w.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||We===g.memoizedProps&&bn===g.memoizedState||(w.flags|=1024),z=!1)}return Hi(g,w,O,z,ie,Z)}function Hi(g,w,O,z,Z,ie){ss(g,w);var xe=(w.flags&128)!==0;if(!z&&!xe)return Z&&St(w,O,!1),vs(g,w,ie);z=w.stateNode,um.current=w;var We=xe&&typeof O.getDerivedStateFromError!="function"?null:z.render();return w.flags|=1,g!==null&&xe?(w.child=ga(w,g.child,null,ie),w.child=ga(w,null,We,ie)):jr(g,w,We,ie),w.memoizedState=z.state,Z&&St(w,O,!0),w.child}function If(g){var w=g.stateNode;w.pendingContext?mt(g,w.pendingContext,w.pendingContext!==w.context):w.context&&mt(g,w.context,!1),kd(g,w.containerInfo)}function cm(g,w,O,z,Z){return ic(),Ld(Z),w.flags|=256,jr(g,w,O,z),w.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function eu(g){return{baseLanes:g,cachePool:null}}function fm(g,w,O){var z=w.pendingProps,Z=Vr.current,ie=!1,xe=(w.flags&128)!==0,We;if((We=xe)||(We=g!==null&&g.memoizedState===null?!1:(Z&2)!==0),We?(ie=!0,w.flags&=-129):(g===null||g.memoizedState!==null)&&(Z|=1),$t(Vr,Z&1),g===null)return tl(w),g=w.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((w.mode&1)===0?w.lanes=1:Ne(g)?w.lanes=8:w.lanes=1073741824,null):(Z=z.children,g=z.fallback,ie?(z=w.mode,ie=w.child,Z={mode:"hidden",children:Z},(z&1)===0&&ie!==null?(ie.childLanes=0,ie.pendingProps=Z):ie=qf(Z,z,0,null),g=hu(g,z,O,null),ie.return=w,g.return=w,ie.sibling=g,w.child=ie,w.child.memoizedState=eu(O),w.memoizedState=Nf,g):To(w,Z));if(Z=g.memoizedState,Z!==null){if(We=Z.dehydrated,We!==null){if(xe)return w.flags&256?(w.flags&=-257,Lf(g,w,O,Error(o(422)))):w.memoizedState!==null?(w.child=g.child,w.flags|=128,null):(ie=z.fallback,Z=w.mode,z=qf({mode:"visible",children:z.children},Z,0,null),ie=hu(ie,Z,O,null),ie.flags|=2,z.return=w,ie.return=w,z.sibling=ie,w.child=z,(w.mode&1)!==0&&ga(w,g.child,null,O),w.child.memoizedState=eu(O),w.memoizedState=Nf,ie);if((w.mode&1)===0)w=Lf(g,w,O,null);else if(Ne(We))w=Lf(g,w,O,Error(o(419)));else if(z=(O&g.childLanes)!==0,Si||z){if(z=$r,z!==null){switch(O&-O){case 4:ie=2;break;case 16:ie=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ie=32;break;case 536870912:ie=268435456;break;default:ie=0}z=(ie&(z.suspendedLanes|O))!==0?0:ie,z!==0&&z!==Z.retryLane&&(Z.retryLane=z,ji(g,z,-1))}np(),w=Lf(g,w,O,Error(o(421)))}else Te(We)?(w.flags|=128,w.child=g.child,w=mv.bind(null,g),dn(We,w),w=null):(O=Z.treeContext,ge&&(Li=wt(We),is=w,Dr=!0,oo=null,rc=!1,O!==null&&(so[Bs++]=pa,so[Bs++]=ma,so[Bs++]=Hl,pa=O.id,ma=O.overflow,Hl=w)),w=To(w,w.pendingProps.children),w.flags|=4096);return w}return ie?(z=$d(g,w,z.children,z.fallback,O),ie=w.child,Z=g.child.memoizedState,ie.memoizedState=Z===null?eu(O):{baseLanes:Z.baseLanes|O,cachePool:null},ie.childLanes=g.childLanes&~O,w.memoizedState=Nf,z):(O=Pf(g,w,z.children,O),w.memoizedState=null,O)}return ie?(z=$d(g,w,z.children,z.fallback,O),ie=w.child,Z=g.child.memoizedState,ie.memoizedState=Z===null?eu(O):{baseLanes:Z.baseLanes|O,cachePool:null},ie.childLanes=g.childLanes&~O,w.memoizedState=Nf,z):(O=Pf(g,w,z.children,O),w.memoizedState=null,O)}function To(g,w){return w=qf({mode:"visible",children:w},g.mode,0,null),w.return=g,g.child=w}function Pf(g,w,O,z){var Z=g.child;return g=Z.sibling,O=Ca(Z,{mode:"visible",children:O}),(w.mode&1)===0&&(O.lanes=z),O.return=w,O.sibling=null,g!==null&&(z=w.deletions,z===null?(w.deletions=[g],w.flags|=16):z.push(g)),w.child=O}function $d(g,w,O,z,Z){var ie=w.mode;g=g.child;var xe=g.sibling,We={mode:"hidden",children:O};return(ie&1)===0&&w.child!==g?(O=w.child,O.childLanes=0,O.pendingProps=We,w.deletions=null):(O=Ca(g,We),O.subtreeFlags=g.subtreeFlags&14680064),xe!==null?z=Ca(xe,z):(z=hu(z,ie,Z,null),z.flags|=2),z.return=w,O.return=w,O.sibling=z,w.child=O,z}function Lf(g,w,O,z){return z!==null&&Ld(z),ga(w,g.child,null,O),g=To(w,w.pendingProps.children),g.flags|=2,w.memoizedState=null,g}function fv(g,w,O){g.lanes|=w;var z=g.alternate;z!==null&&(z.lanes|=w),Vl(g.return,w,O)}function Zo(g,w,O,z,Z){var ie=g.memoizedState;ie===null?g.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:z,tail:O,tailMode:Z}:(ie.isBackwards=w,ie.rendering=null,ie.renderingStartTime=0,ie.last=z,ie.tail=O,ie.tailMode=Z)}function tu(g,w,O){var z=w.pendingProps,Z=z.revealOrder,ie=z.tail;if(jr(g,w,z.children,O),z=Vr.current,(z&2)!==0)z=z&1|2,w.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=w.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&fv(g,O,w);else if(g.tag===19)fv(g,O,w);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===w)break e;for(;g.sibling===null;){if(g.return===null||g.return===w)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}z&=1}if($t(Vr,z),(w.mode&1)===0)w.memoizedState=null;else switch(Z){case"forwards":for(O=w.child,Z=null;O!==null;)g=O.alternate,g!==null&&Od(g)===null&&(Z=O),O=O.sibling;O=Z,O===null?(Z=w.child,w.child=null):(Z=O.sibling,O.sibling=null),Zo(w,!1,Z,O,ie);break;case"backwards":for(O=null,Z=w.child,w.child=null;Z!==null;){if(g=Z.alternate,g!==null&&Od(g)===null){w.child=Z;break}g=Z.sibling,Z.sibling=O,O=Z,Z=g}Zo(w,!0,O,null,ie);break;case"together":Zo(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function vs(g,w,O){if(g!==null&&(w.dependencies=g.dependencies),Qo|=w.lanes,(O&w.childLanes)===0)return null;if(g!==null&&w.child!==g.child)throw Error(o(153));if(w.child!==null){for(g=w.child,O=Ca(g,g.pendingProps),w.child=O,O.return=w;g.sibling!==null;)g=g.sibling,O=O.sibling=Ca(g,g.pendingProps),O.return=w;O.sibling=null}return w.child}function Zd(g,w,O){switch(w.tag){case 3:If(w),ic();break;case 5:ov(w);break;case 1:sr(w.type)&&Fe(w);break;case 4:kd(w,w.stateNode.containerInfo);break;case 10:Wl(w,w.type._context,w.memoizedProps.value);break;case 13:var z=w.memoizedState;if(z!==null)return z.dehydrated!==null?($t(Vr,Vr.current&1),w.flags|=128,null):(O&w.child.childLanes)!==0?fm(g,w,O):($t(Vr,Vr.current&1),g=vs(g,w,O),g!==null?g.sibling:null);$t(Vr,Vr.current&1);break;case 19:if(z=(O&w.childLanes)!==0,(g.flags&128)!==0){if(z)return tu(g,w,O);w.flags|=128}var Z=w.memoizedState;if(Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),$t(Vr,Vr.current),z)break;return null;case 22:case 23:return w.lanes=0,ki(g,w,O)}return vs(g,w,O)}function Qd(g,w){switch(X0(w),w.tag){case 1:return sr(w.type)&&Yt(),g=w.flags,g&65536?(w.flags=g&-65537|128,w):null;case 3:return lc(),un(On),un(Mn),Kl(),g=w.flags,(g&65536)!==0&&(g&128)===0?(w.flags=g&-65537|128,w):null;case 5:return Q0(w),null;case 13:if(un(Vr),g=w.memoizedState,g!==null&&g.dehydrated!==null){if(w.alternate===null)throw Error(o(340));ic()}return g=w.flags,g&65536?(w.flags=g&-65537|128,w):null;case 19:return un(Vr),null;case 4:return lc(),null;case 10:return wf(w.type._context),null;case 22:case 23:return Hf(),null;case 24:return null;default:return null}}var os=!1,Mi=!1,nu=typeof WeakSet=="function"?WeakSet:Set,qt=null;function ao(g,w){var O=g.ref;if(O!==null)if(typeof O=="function")try{O(null)}catch(z){ls(g,w,z)}else O.current=null}function Sa(g,w,O){try{O()}catch(z){ls(g,w,z)}}var hm=!1;function dm(g,w){for(L(g.containerInfo),qt=w;qt!==null;)if(g=qt,w=g.child,(g.subtreeFlags&1028)!==0&&w!==null)w.return=g,qt=w;else for(;qt!==null;){g=qt;try{var O=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var z=O.memoizedProps,Z=O.memoizedState,ie=g.stateNode,xe=ie.getSnapshotBeforeUpdate(g.elementType===g.type?z:ms(g.type,z),Z);ie.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:Ze&&qe(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(We){ls(g,g.return,We)}if(w=g.sibling,w!==null){w.return=g.return,qt=w;break}qt=g.return}return O=hm,hm=!1,O}function Ma(g,w,O){var z=w.updateQueue;if(z=z!==null?z.lastEffect:null,z!==null){var Z=z=z.next;do{if((Z.tag&g)===g){var ie=Z.destroy;Z.destroy=void 0,ie!==void 0&&Sa(w,O,ie)}Z=Z.next}while(Z!==z)}}function Oi(g,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var O=w=w.next;do{if((O.tag&g)===g){var z=O.create;O.destroy=z()}O=O.next}while(O!==w)}}function as(g){var w=g.ref;if(w!==null){var O=g.stateNode;switch(g.tag){case 5:g=M(O);break;default:g=O}typeof w=="function"?w(g):w.current=g}}function Lr(g,w,O){if(Yo&&typeof Yo.onCommitFiberUnmount=="function")try{Yo.onCommitFiberUnmount(mf,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(g=w.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var z=g=g.next;do{var Z=z,ie=Z.destroy;Z=Z.tag,ie!==void 0&&((Z&2)!==0||(Z&4)!==0)&&Sa(w,O,ie),z=z.next}while(z!==g)}break;case 1:if(ao(w,O),g=w.stateNode,typeof g.componentWillUnmount=="function")try{g.props=w.memoizedProps,g.state=w.memoizedState,g.componentWillUnmount()}catch(xe){ls(w,O,xe)}break;case 5:ao(w,O);break;case 4:Ze?gm(g,w,O):Pe&&Pe&&(w=w.stateNode.containerInfo,O=ft(w),dt(w,O))}}function lo(g,w,O){for(var z=w;;)if(Lr(g,z,O),z.child===null||Ze&&z.tag===4){if(z===w)break;for(;z.sibling===null;){if(z.return===null||z.return===w)return;z=z.return}z.sibling.return=z.return,z=z.sibling}else z.child.return=z,z=z.child}function pm(g){var w=g.alternate;w!==null&&(g.alternate=null,pm(w)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(w=g.stateNode,w!==null&&He(w)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function mm(g){return g.tag===5||g.tag===3||g.tag===4}function Jd(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||mm(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function ep(g){if(Ze){e:{for(var w=g.return;w!==null;){if(mm(w))break e;w=w.return}throw Error(o(160))}var O=w;switch(O.tag){case 5:w=O.stateNode,O.flags&32&&(Xe(w),O.flags&=-33),O=Jd(g),mc(g,O,w);break;case 3:case 4:w=O.stateNode.containerInfo,O=Jd(g),tp(g,O,w);break;default:throw Error(o(161))}}}function tp(g,w,O){var z=g.tag;if(z===5||z===6)g=g.stateNode,w?we(O,g,w):ct(O,g);else if(z!==4&&(g=g.child,g!==null))for(tp(g,w,O),g=g.sibling;g!==null;)tp(g,w,O),g=g.sibling}function mc(g,w,O){var z=g.tag;if(z===5||z===6)g=g.stateNode,w?ue(O,g,w):bt(O,g);else if(z!==4&&(g=g.child,g!==null))for(mc(g,w,O),g=g.sibling;g!==null;)mc(g,w,O),g=g.sibling}function gm(g,w,O){for(var z=w,Z=!1,ie,xe;;){if(!Z){Z=z.return;e:for(;;){if(Z===null)throw Error(o(160));switch(ie=Z.stateNode,Z.tag){case 5:xe=!1;break e;case 3:ie=ie.containerInfo,xe=!0;break e;case 4:ie=ie.containerInfo,xe=!0;break e}Z=Z.return}Z=!0}if(z.tag===5||z.tag===6)lo(g,z,O),xe?le(ie,z.stateNode):ye(ie,z.stateNode);else if(z.tag===18)xe?Qe(ie,z.stateNode):$e(ie,z.stateNode);else if(z.tag===4){if(z.child!==null){ie=z.stateNode.containerInfo,xe=!0,z.child.return=z,z=z.child;continue}}else if(Lr(g,z,O),z.child!==null){z.child.return=z,z=z.child;continue}if(z===w)break;for(;z.sibling===null;){if(z.return===null||z.return===w)return;z=z.return,z.tag===4&&(Z=!1)}z.sibling.return=z.return,z=z.sibling}}function ol(g,w){if(Ze){switch(w.tag){case 0:case 11:case 14:case 15:Ma(3,w,w.return),Oi(3,w),Ma(5,w,w.return);return;case 1:return;case 5:var O=w.stateNode;if(O!=null){var z=w.memoizedProps;g=g!==null?g.memoizedProps:z;var Z=w.type,ie=w.updateQueue;w.updateQueue=null,ie!==null&&q(O,ie,Z,g,z,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));O=w.memoizedProps,re(w.stateNode,g!==null?g.memoizedProps:O,O);return;case 3:ge&&g!==null&&g.memoizedState.isDehydrated&&pe(w.stateNode.containerInfo);return;case 12:return;case 13:gc(w);return;case 19:gc(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:Ma(3,w,w.return),Oi(3,w),Ma(5,w,w.return);return;case 12:return;case 13:gc(w);return;case 19:gc(w);return;case 3:ge&&g!==null&&g.memoizedState.isDehydrated&&pe(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(Pe){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,dt(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function gc(g){var w=g.updateQueue;if(w!==null){g.updateQueue=null;var O=g.stateNode;O===null&&(O=g.stateNode=new nu),w.forEach(function(z){var Z=gv.bind(null,g,z);O.has(z)||(O.add(z),z.then(Z,Z))})}}function sS(g,w){for(qt=w;qt!==null;){w=qt;var O=w.deletions;if(O!==null)for(var z=0;z<O.length;z++){var Z=O[z];try{var ie=g;Ze?gm(ie,Z,w):lo(ie,Z,w);var xe=Z.alternate;xe!==null&&(xe.return=null),Z.return=null}catch(yn){ls(Z,w,yn)}}if(O=w.child,(w.subtreeFlags&12854)!==0&&O!==null)O.return=w,qt=O;else for(;qt!==null;){w=qt;try{var We=w.flags;if(We&32&&Ze&&Xe(w.stateNode),We&512){var pt=w.alternate;if(pt!==null){var Wt=pt.ref;Wt!==null&&(typeof Wt=="function"?Wt(null):Wt.current=null)}}if(We&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var fn=w.alternate;(fn===null||fn.memoizedState===null)&&(zf=ci())}break;case 22:var Un=w.memoizedState!==null,bn=w.alternate,Gn=bn!==null&&bn.memoizedState!==null;if(O=w,Ze){e:if(z=O,Z=Un,ie=null,Ze)for(var sn=z;;){if(sn.tag===5){if(ie===null){ie=sn;var Ui=sn.stateNode;Z?de(Ui):Ue(sn.stateNode,sn.memoizedProps)}}else if(sn.tag===6){if(ie===null){var js=sn.stateNode;Z?Ce(js):Ee(js,sn.memoizedProps)}}else if((sn.tag!==22&&sn.tag!==23||sn.memoizedState===null||sn===z)&&sn.child!==null){sn.child.return=sn,sn=sn.child;continue}if(sn===z)break;for(;sn.sibling===null;){if(sn.return===null||sn.return===z)break e;ie===sn&&(ie=null),sn=sn.return}ie===sn&&(ie=null),sn.sibling.return=sn.return,sn=sn.sibling}}if(Un&&!Gn&&(O.mode&1)!==0){qt=O;for(var st=O.child;st!==null;){for(O=qt=st;qt!==null;){z=qt;var Ke=z.child;switch(z.tag){case 0:case 11:case 14:case 15:Ma(4,z,z.return);break;case 1:ao(z,z.return);var ht=z.stateNode;if(typeof ht.componentWillUnmount=="function"){var Qt=z.return;try{ht.props=z.memoizedProps,ht.state=z.memoizedState,ht.componentWillUnmount()}catch(yn){ls(z,Qt,yn)}}break;case 5:ao(z,z.return);break;case 22:if(z.memoizedState!==null){vm(O);continue}}Ke!==null?(Ke.return=z,qt=Ke):vm(O)}st=st.sibling}}}switch(We&4102){case 2:ep(w),w.flags&=-3;break;case 6:ep(w),w.flags&=-3,ol(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,ol(w.alternate,w);break;case 4:ol(w.alternate,w)}}catch(yn){ls(w,w.return,yn)}if(O=w.sibling,O!==null){O.return=w.return,qt=O;break}qt=w.return}}}function kf(g,w,O){qt=g,Of(g)}function Of(g,w,O){for(var z=(g.mode&1)!==0;qt!==null;){var Z=qt,ie=Z.child;if(Z.tag===22&&z){var xe=Z.memoizedState!==null||os;if(!xe){var We=Z.alternate,pt=We!==null&&We.memoizedState!==null||Mi;We=os;var Wt=Mi;if(os=xe,(Mi=pt)&&!Wt)for(qt=Z;qt!==null;)xe=qt,pt=xe.child,xe.tag===22&&xe.memoizedState!==null?ru(Z):pt!==null?(pt.return=xe,qt=pt):ru(Z);for(;ie!==null;)qt=ie,Of(ie),ie=ie.sibling;qt=Z,os=We,Mi=Wt}ym(g)}else(Z.subtreeFlags&8772)!==0&&ie!==null?(ie.return=Z,qt=ie):ym(g)}}function ym(g){for(;qt!==null;){var w=qt;if((w.flags&8772)!==0){var O=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:Mi||Oi(5,w);break;case 1:var z=w.stateNode;if(w.flags&4&&!Mi)if(O===null)z.componentDidMount();else{var Z=w.elementType===w.type?O.memoizedProps:ms(w.type,O.memoizedProps);z.componentDidUpdate(Z,O.memoizedState,z.__reactInternalSnapshotBeforeUpdate)}var ie=w.updateQueue;ie!==null&&Qy(w,ie,z);break;case 3:var xe=w.updateQueue;if(xe!==null){if(O=null,w.child!==null)switch(w.child.tag){case 5:O=M(w.child.stateNode);break;case 1:O=w.child.stateNode}Qy(w,xe,O)}break;case 5:var We=w.stateNode;O===null&&w.flags&4&&j(We,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(ge&&w.memoizedState===null){var pt=w.alternate;if(pt!==null){var Wt=pt.memoizedState;if(Wt!==null){var fn=Wt.dehydrated;fn!==null&&De(fn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Mi||w.flags&512&&as(w)}catch(Un){ls(w,w.return,Un)}}if(w===g){qt=null;break}if(O=w.sibling,O!==null){O.return=w.return,qt=O;break}qt=w.return}}function vm(g){for(;qt!==null;){var w=qt;if(w===g){qt=null;break}var O=w.sibling;if(O!==null){O.return=w.return,qt=O;break}qt=w.return}}function ru(g){for(;qt!==null;){var w=qt;try{switch(w.tag){case 0:case 11:case 15:var O=w.return;try{Oi(4,w)}catch(pt){ls(w,O,pt)}break;case 1:var z=w.stateNode;if(typeof z.componentDidMount=="function"){var Z=w.return;try{z.componentDidMount()}catch(pt){ls(w,Z,pt)}}var ie=w.return;try{as(w)}catch(pt){ls(w,ie,pt)}break;case 5:var xe=w.return;try{as(w)}catch(pt){ls(w,xe,pt)}}}catch(pt){ls(w,w.return,pt)}if(w===g){qt=null;break}var We=w.sibling;if(We!==null){We.return=w.return,qt=We;break}qt=w.return}}var Df=0,iu=1,su=2,Ea=3,yc=4;if(typeof Symbol=="function"&&Symbol.for){var ou=Symbol.for;Df=ou("selector.component"),iu=ou("selector.has_pseudo_class"),su=ou("selector.role"),Ea=ou("selector.test_id"),yc=ou("selector.text")}function Bf(g){var w=Ge(g);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(g=oe(g),g===null)throw Error(o(362));return g.stateNode.current}function Uf(g,w){switch(w.$$typeof){case Df:if(g.type===w.value)return!0;break;case iu:e:{w=w.value,g=[g,0];for(var O=0;O<g.length;){var z=g[O++],Z=g[O++],ie=w[Z];if(z.tag!==5||!Le(z)){for(;ie!=null&&Uf(z,ie);)Z++,ie=w[Z];if(Z===w.length){w=!0;break e}else for(z=z.child;z!==null;)g.push(z,Z),z=z.sibling}}w=!1}return w;case su:if(g.tag===5&&ot(g.stateNode,w.value))return!0;break;case yc:if((g.tag===5||g.tag===6)&&(g=Re(g),g!==null&&0<=g.indexOf(w.value)))return!0;break;case Ea:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function al(g){switch(g.$$typeof){case Df:return"<"+(Y(g.value)||"Unknown")+">";case iu:return":has("+(al(g)||"")+")";case su:return'[role="'+g.value+'"]';case yc:return'"'+g.value+'"';case Ea:return'[data-testname="'+g.value+'"]';default:throw Error(o(365))}}function Ws(g,w){var O=[];g=[g,0];for(var z=0;z<g.length;){var Z=g[z++],ie=g[z++],xe=w[ie];if(Z.tag!==5||!Le(Z)){for(;xe!=null&&Uf(Z,xe);)ie++,xe=w[ie];if(ie===w.length)O.push(Z);else for(Z=Z.child;Z!==null;)g.push(Z,ie),Z=Z.sibling}}return O}function ba(g,w){if(!fe)throw Error(o(363));g=Bf(g),g=Ws(g,w),w=[],g=Array.from(g);for(var O=0;O<g.length;){var z=g[O++];if(z.tag===5)Le(z)||w.push(z.stateNode);else for(z=z.child;z!==null;)g.push(z),z=z.sibling}return w}var wm=Math.ceil,Ff=l.ReactCurrentDispatcher,Ro=l.ReactCurrentOwner,_r=l.ReactCurrentBatchConfig,Hn=0,$r=null,xr=null,Br=0,Gi=0,au=En(0),qr=0,vc=null,Qo=0,Vs=0,lu=0,Aa=null,ti=null,zf=0,ll=1/0;function uu(){ll=ci()+500}var wc=!1,kr=null,Co=null,_c=!1,Jo=null,cu=0,fu=0,Ta=null,Cr=-1,Kr=0;function ar(){return(Hn&6)!==0?ci():Cr!==-1?Cr:Cr=ci()}function Io(g){return(g.mode&1)===0?1:(Hn&2)!==0&&Br!==0?Br&-Br:Zy.transition!==null?(Kr===0&&(g=Wn,Wn<<=1,(Wn&4194240)===0&&(Wn=64),Kr=g),Kr):(g=Yn,g!==0?g:vt())}function ji(g,w,O){if(50<fu)throw fu=0,Ta=null,Error(o(185));var z=ul(g,w);return z===null?null:(Bl(z,w,O),((Hn&2)===0||z!==$r)&&(z===$r&&((Hn&2)===0&&(Vs|=w),qr===4&&Bi(z,Br)),ws(z,O),w===1&&Hn===0&&(g.mode&1)===0&&(uu(),Sd&&no())),z)}function ul(g,w){g.lanes|=w;var O=g.alternate;for(O!==null&&(O.lanes|=w),O=g,g=g.return;g!==null;)g.childLanes|=w,O=g.alternate,O!==null&&(O.childLanes|=w),O=g,g=g.return;return O.tag===3?O.stateNode:null}function ws(g,w){var O=g.callbackNode;$y(g,w);var z=Dl(g,g===$r?Br:0);if(z===0)O!==null&&Ju(O),g.callbackNode=null,g.callbackPriority=0;else if(w=z&-z,g.callbackPriority!==w){if(O!=null&&Ju(O),w===1)g.tag===0?Ed(Hs.bind(null,g)):Md(Hs.bind(null,g)),nt?Pt(function(){Hn===0&&no()}):Ul(Fl,no),O=null;else{switch(fa(z)){case 1:O=Fl;break;case 4:O=nS;break;case 16:O=_d;break;case 536870912:O=xd;break;default:O=_d}O=rp(O,Di.bind(null,g))}g.callbackPriority=w,g.callbackNode=O}}function Di(g,w){if(Cr=-1,Kr=0,(Hn&6)!==0)throw Error(o(327));var O=g.callbackNode;if(ea()&&g.callbackNode!==O)return null;var z=Dl(g,g===$r?Br:0);if(z===0)return null;if((z&30)!==0||(z&g.expiredLanes)!==0||w)w=Gf(g,z);else{w=z;var Z=Hn;Hn|=2;var ie=Sm();($r!==g||Br!==w)&&(uu(),Ra(g,w));do try{dv();break}catch(We){xm(g,We)}while(!0);rs(),Ff.current=ie,Hn=Z,xr!==null?w=0:($r=null,Br=0,w=qr)}if(w!==0){if(w===2&&(Z=yd(g),Z!==0&&(z=Z,w=Wf(g,Z))),w===1)throw O=vc,Ra(g,0),Bi(g,z),ws(g,ci()),O;if(w===6)Bi(g,z);else{if(Z=g.current.alternate,(z&30)===0&&!_m(Z)&&(w=Gf(g,z),w===2&&(ie=yd(g),ie!==0&&(z=ie,w=Wf(g,ie))),w===1))throw O=vc,Ra(g,0),Bi(g,z),ws(g,ci()),O;switch(g.finishedWork=Z,g.finishedLanes=z,w){case 0:case 1:throw Error(o(345));case 2:No(g,ti);break;case 3:if(Bi(g,z),(z&130023424)===z&&(w=zf+500-ci(),10<w)){if(Dl(g,0)!==0)break;if(Z=g.suspendedLanes,(Z&z)!==z){ar(),g.pingedLanes|=g.suspendedLanes&Z;break}g.timeoutHandle=me(No.bind(null,g,ti),w);break}No(g,ti);break;case 4:if(Bi(g,z),(z&4194240)===z)break;for(w=g.eventTimes,Z=-1;0<z;){var xe=31-Ut(z);ie=1<<xe,xe=w[xe],xe>Z&&(Z=xe),z&=~ie}if(z=Z,z=ci()-z,z=(120>z?120:480>z?480:1080>z?1080:1920>z?1920:3e3>z?3e3:4320>z?4320:1960*wm(z/1960))-z,10<z){g.timeoutHandle=me(No.bind(null,g,ti),z);break}No(g,ti);break;case 5:No(g,ti);break;default:throw Error(o(329))}}}return ws(g,ci()),g.callbackNode===O?Di.bind(null,g):null}function Wf(g,w){var O=Aa;return g.current.memoizedState.isDehydrated&&(Ra(g,w).flags|=256),g=Gf(g,w),g!==2&&(w=ti,ti=O,w!==null&&Vf(w)),g}function Vf(g){ti===null?ti=g:ti.push.apply(ti,g)}function _m(g){for(var w=g;;){if(w.flags&16384){var O=w.updateQueue;if(O!==null&&(O=O.stores,O!==null))for(var z=0;z<O.length;z++){var Z=O[z],ie=Z.getSnapshot;Z=Z.value;try{if(!ns(ie(),Z))return!1}catch{return!1}}}if(O=w.child,w.subtreeFlags&16384&&O!==null)O.return=w,w=O;else{if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Bi(g,w){for(w&=~lu,w&=~Vs,g.suspendedLanes|=w,g.pingedLanes&=~w,g=g.expirationTimes;0<w;){var O=31-Ut(w),z=1<<O;g[O]=-1,w&=~z}}function Hs(g){if((Hn&6)!==0)throw Error(o(327));ea();var w=Dl(g,0);if((w&1)===0)return ws(g,ci()),null;var O=Gf(g,w);if(g.tag!==0&&O===2){var z=yd(g);z!==0&&(w=z,O=Wf(g,z))}if(O===1)throw O=vc,Ra(g,0),Bi(g,w),ws(g,ci()),O;if(O===6)throw Error(o(345));return g.finishedWork=g.current.alternate,g.finishedLanes=w,No(g,ti),ws(g,ci()),null}function xc(g){Jo!==null&&Jo.tag===0&&(Hn&6)===0&&ea();var w=Hn;Hn|=1;var O=_r.transition,z=Yn;try{if(_r.transition=null,Yn=1,g)return g()}finally{Yn=z,_r.transition=O,Hn=w,(Hn&6)===0&&no()}}function Hf(){Gi=au.current,un(au)}function Ra(g,w){g.finishedWork=null,g.finishedLanes=0;var O=g.timeoutHandle;if(O!==Ae&&(g.timeoutHandle=Ae,_e(O)),xr!==null)for(O=xr.return;O!==null;){var z=O;switch(X0(z),z.tag){case 1:z=z.type.childContextTypes,z!=null&&Yt();break;case 3:lc(),un(On),un(Mn),Kl();break;case 5:Q0(z);break;case 4:lc();break;case 13:un(Vr);break;case 19:un(Vr);break;case 10:wf(z.type._context);break;case 22:case 23:Hf()}O=O.return}if($r=g,xr=g=Ca(g.current,null),Br=Gi=w,qr=0,vc=null,lu=Vs=Qo=0,ti=Aa=null,ro!==null){for(w=0;w<ro.length;w++)if(O=ro[w],z=O.interleaved,z!==null){O.interleaved=null;var Z=z.next,ie=O.pending;if(ie!==null){var xe=ie.next;ie.next=Z,z.next=xe}O.pending=z}ro=null}return g}function xm(g,w){do{var O=xr;try{if(rs(),xf.current=dc,Dd){for(var z=Hr.memoizedState;z!==null;){var Z=z.queue;Z!==null&&(Z.pending=null),z=z.next}Dd=!1}if(Yl=0,_i=wi=Hr=null,Xo=!1,Xl=0,Ro.current=null,O===null||O.return===null){qr=1,vc=w,xr=null;break}e:{var ie=g,xe=O.return,We=O,pt=w;if(w=Br,We.flags|=32768,pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var Wt=pt,fn=We,Un=fn.tag;if((fn.mode&1)===0&&(Un===0||Un===11||Un===15)){var bn=fn.alternate;bn?(fn.updateQueue=bn.updateQueue,fn.memoizedState=bn.memoizedState,fn.lanes=bn.lanes):(fn.updateQueue=null,fn.memoizedState=null)}var Gn=lm(xe);if(Gn!==null){Gn.flags&=-257,Zl(Gn,xe,We,ie,w),Gn.mode&1&&va(ie,Wt,w),w=Gn,pt=Wt;var sn=w.updateQueue;if(sn===null){var Ui=new Set;Ui.add(pt),w.updateQueue=Ui}else sn.add(pt);break e}else{if((w&1)===0){va(ie,Wt,w),np();break e}pt=Error(o(426))}}else if(Dr&&We.mode&1){var js=lm(xe);if(js!==null){(js.flags&65536)===0&&(js.flags|=256),Zl(js,xe,We,ie,w),Ld(pt);break e}}ie=pt,qr!==4&&(qr=2),Aa===null?Aa=[ie]:Aa.push(ie),pt=am(pt,We),We=xe;do{switch(We.tag){case 3:We.flags|=65536,w&=-w,We.lanes|=w;var st=cv(We,pt,w);Td(We,st);break e;case 1:ie=pt;var Ke=We.type,ht=We.stateNode;if((We.flags&128)===0&&(typeof Ke.getDerivedStateFromError=="function"||ht!==null&&typeof ht.componentDidCatch=="function"&&(Co===null||!Co.has(ht)))){We.flags|=65536,w&=-w,We.lanes|=w;var Qt=qd(We,ie,w);Td(We,Qt);break e}}We=We.return}while(We!==null)}Em(O)}catch(yn){w=yn,xr===O&&O!==null&&(xr=O=O.return);continue}break}while(!0)}function Sm(){var g=Ff.current;return Ff.current=dc,g===null?dc:g}function np(){(qr===0||qr===3||qr===2)&&(qr=4),$r===null||(Qo&268435455)===0&&(Vs&268435455)===0||Bi($r,Br)}function Gf(g,w){var O=Hn;Hn|=2;var z=Sm();$r===g&&Br===w||Ra(g,w);do try{hv();break}catch(Z){xm(g,Z)}while(!0);if(rs(),Hn=O,Ff.current=z,xr!==null)throw Error(o(261));return $r=null,Br=0,qr}function hv(){for(;xr!==null;)Mm(xr)}function dv(){for(;xr!==null&&!Qa();)Mm(xr)}function Mm(g){var w=Tm(g.alternate,g,Gi);g.memoizedProps=g.pendingProps,w===null?Em(g):xr=w,Ro.current=null}function Em(g){var w=g;do{var O=w.alternate;if(g=w.return,(w.flags&32768)===0){if(O=Xd(O,w,Gi),O!==null){xr=O;return}}else{if(O=Qd(O,w),O!==null){O.flags&=32767,xr=O;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{qr=6,xr=null;return}}if(w=w.sibling,w!==null){xr=w;return}xr=w=g}while(w!==null);qr===0&&(qr=5)}function No(g,w){var O=Yn,z=_r.transition;try{_r.transition=null,Yn=1,pv(g,w,O)}finally{_r.transition=z,Yn=O}return null}function pv(g,w,O){do ea();while(Jo!==null);if((Hn&6)!==0)throw Error(o(327));var z=g.finishedWork,Z=g.finishedLanes;if(z===null)return null;if(g.finishedWork=null,g.finishedLanes=0,z===g.current)throw Error(o(177));g.callbackNode=null,g.callbackPriority=0;var ie=z.lanes|z.childLanes;if(wd(g,ie),g===$r&&(xr=$r=null,Br=0),(z.subtreeFlags&2064)===0&&(z.flags&2064)===0||_c||(_c=!0,rp(_d,function(){return ea(),null})),ie=(z.flags&15990)!==0,(z.subtreeFlags&15990)!==0||ie){ie=_r.transition,_r.transition=null;var xe=Yn;Yn=1;var We=Hn;Hn|=4,Ro.current=null,dm(g,z),sS(g,z),N(g.containerInfo),g.current=z,kf(z),tS(),Hn=We,Yn=xe,_r.transition=ie}else g.current=z;if(_c&&(_c=!1,Jo=g,cu=Z),ie=g.pendingLanes,ie===0&&(Co=null),gf(z.stateNode),ws(g,ci()),w!==null)for(O=g.onRecoverableError,z=0;z<w.length;z++)O(w[z]);if(wc)throw wc=!1,g=kr,kr=null,g;return(cu&1)!==0&&g.tag!==0&&ea(),ie=g.pendingLanes,(ie&1)!==0?g===Ta?fu++:(fu=0,Ta=g):fu=0,no(),null}function ea(){if(Jo!==null){var g=fa(cu),w=_r.transition,O=Yn;try{if(_r.transition=null,Yn=16>g?16:g,Jo===null)var z=!1;else{if(g=Jo,Jo=null,cu=0,(Hn&6)!==0)throw Error(o(331));var Z=Hn;for(Hn|=4,qt=g.current;qt!==null;){var ie=qt,xe=ie.child;if((qt.flags&16)!==0){var We=ie.deletions;if(We!==null){for(var pt=0;pt<We.length;pt++){var Wt=We[pt];for(qt=Wt;qt!==null;){var fn=qt;switch(fn.tag){case 0:case 11:case 15:Ma(8,fn,ie)}var Un=fn.child;if(Un!==null)Un.return=fn,qt=Un;else for(;qt!==null;){fn=qt;var bn=fn.sibling,Gn=fn.return;if(pm(fn),fn===Wt){qt=null;break}if(bn!==null){bn.return=Gn,qt=bn;break}qt=Gn}}}var sn=ie.alternate;if(sn!==null){var Ui=sn.child;if(Ui!==null){sn.child=null;do{var js=Ui.sibling;Ui.sibling=null,Ui=js}while(Ui!==null)}}qt=ie}}if((ie.subtreeFlags&2064)!==0&&xe!==null)xe.return=ie,qt=xe;else e:for(;qt!==null;){if(ie=qt,(ie.flags&2048)!==0)switch(ie.tag){case 0:case 11:case 15:Ma(9,ie,ie.return)}var st=ie.sibling;if(st!==null){st.return=ie.return,qt=st;break e}qt=ie.return}}var Ke=g.current;for(qt=Ke;qt!==null;){xe=qt;var ht=xe.child;if((xe.subtreeFlags&2064)!==0&&ht!==null)ht.return=xe,qt=ht;else e:for(xe=Ke;qt!==null;){if(We=qt,(We.flags&2048)!==0)try{switch(We.tag){case 0:case 11:case 15:Oi(9,We)}}catch(yn){ls(We,We.return,yn)}if(We===xe){qt=null;break e}var Qt=We.sibling;if(Qt!==null){Qt.return=We.return,qt=Qt;break e}qt=We.return}}if(Hn=Z,no(),Yo&&typeof Yo.onPostCommitFiberRoot=="function")try{Yo.onPostCommitFiberRoot(mf,g)}catch{}z=!0}return z}finally{Yn=O,_r.transition=w}}return!1}function jf(g,w,O){w=am(O,w),w=cv(g,w,1),Ja(g,w),w=ar(),g=ul(g,1),g!==null&&(Bl(g,1,w),ws(g,w))}function ls(g,w,O){if(g.tag===3)jf(g,g,O);else for(;w!==null;){if(w.tag===3){jf(w,g,O);break}else if(w.tag===1){var z=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(Co===null||!Co.has(z))){g=am(O,g),g=qd(w,g,1),Ja(w,g),g=ar(),w=ul(w,1),w!==null&&(Bl(w,1,g),ws(w,g));break}}w=w.return}}function bm(g,w,O){var z=g.pingCache;z!==null&&z.delete(w),w=ar(),g.pingedLanes|=g.suspendedLanes&O,$r===g&&(Br&O)===O&&(qr===4||qr===3&&(Br&130023424)===Br&&500>ci()-zf?Ra(g,0):lu|=O),ws(g,w)}function Am(g,w){w===0&&((g.mode&1)===0?w=1:(w=Cn,Cn<<=1,(Cn&130023424)===0&&(Cn=4194304)));var O=ar();g=ul(g,w),g!==null&&(Bl(g,w,O),ws(g,O))}function mv(g){var w=g.memoizedState,O=0;w!==null&&(O=w.retryLane),Am(g,O)}function gv(g,w){var O=0;switch(g.tag){case 13:var z=g.stateNode,Z=g.memoizedState;Z!==null&&(O=Z.retryLane);break;case 19:z=g.stateNode;break;default:throw Error(o(314))}z!==null&&z.delete(w),Am(g,O)}var Tm;Tm=function(g,w,O){if(g!==null)if(g.memoizedProps!==w.pendingProps||On.current)Si=!0;else{if((g.lanes&O)===0&&(w.flags&128)===0)return Si=!1,Zd(g,w,O);Si=(g.flags&131072)!==0}else Si=!1,Dr&&(w.flags&1048576)!==0&&nv(w,Nd,w.index);switch(w.lanes=0,w.tag){case 2:var z=w.type;g!==null&&(g.alternate=null,w.alternate=null,w.flags|=2),g=w.pendingProps;var Z=vi(w,Mn.current);ec(w,O),Z=uc(null,w,z,g,Z,O);var ie=rl();return w.flags|=1,typeof Z=="object"&&Z!==null&&typeof Z.render=="function"&&Z.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,sr(z)?(ie=!0,Fe(w)):ie=!1,w.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,tc(w),Z.updater=Cd,w.stateNode=Z,Z._reactInternals=w,K0(w,z,g,O),w=Hi(null,w,z,!0,ie,O)):(w.tag=0,Dr&&ie&&Y0(w),jr(null,w,Z,O),w=w.child),w;case 16:z=w.elementType;e:{switch(g!==null&&(g.alternate=null,w.alternate=null,w.flags|=2),g=w.pendingProps,Z=z._init,z=Z(z._payload),w.type=z,Z=w.tag=oS(z),g=ms(z,g),Z){case 0:w=xa(null,w,z,g,O);break e;case 1:w=Jl(null,w,z,g,O);break e;case 11:w=Rr(null,w,z,g,O);break e;case 14:w=Mr(null,w,z,ms(z.type,g),O);break e}throw Error(o(306,z,""))}return w;case 0:return z=w.type,Z=w.pendingProps,Z=w.elementType===z?Z:ms(z,Z),xa(g,w,z,Z,O);case 1:return z=w.type,Z=w.pendingProps,Z=w.elementType===z?Z:ms(z,Z),Jl(g,w,z,Z,O);case 3:e:{if(If(w),g===null)throw Error(o(387));z=w.pendingProps,ie=w.memoizedState,Z=ie.element,G0(g,w),Rd(w,z,null,O);var xe=w.memoizedState;if(z=xe.element,ge&&ie.isDehydrated)if(ie={element:z,isDehydrated:!1,cache:xe.cache,transitions:xe.transitions},w.updateQueue.baseState=ie,w.memoizedState=ie,w.flags&256){Z=Error(o(423)),w=cm(g,w,z,O,Z);break e}else if(z!==Z){Z=Error(o(424)),w=cm(g,w,z,O,Z);break e}else for(ge&&(Li=Dn(w.stateNode.containerInfo),is=w,Dr=!0,oo=null,rc=!1),O=sv(w,null,z,O),w.child=O;O;)O.flags=O.flags&-3|4096,O=O.sibling;else{if(ic(),z===Z){w=vs(g,w,O);break e}jr(g,w,z,O)}w=w.child}return w;case 5:return ov(w),g===null&&tl(w),z=w.type,Z=w.pendingProps,ie=g!==null?g.memoizedProps:null,xe=Z.children,$(z,Z)?xe=null:ie!==null&&$(z,ie)&&(w.flags|=32),ss(g,w),jr(g,w,xe,O),w.child;case 6:return g===null&&tl(w),null;case 13:return fm(g,w,O);case 4:return kd(w,w.stateNode.containerInfo),z=w.pendingProps,g===null?w.child=ga(w,null,z,O):jr(g,w,z,O),w.child;case 11:return z=w.type,Z=w.pendingProps,Z=w.elementType===z?Z:ms(z,Z),Rr(g,w,z,Z,O);case 7:return jr(g,w,w.pendingProps,O),w.child;case 8:return jr(g,w,w.pendingProps.children,O),w.child;case 12:return jr(g,w,w.pendingProps.children,O),w.child;case 10:e:{if(z=w.type._context,Z=w.pendingProps,ie=w.memoizedProps,xe=Z.value,Wl(w,z,xe),ie!==null)if(ns(ie.value,xe)){if(ie.children===Z.children&&!On.current){w=vs(g,w,O);break e}}else for(ie=w.child,ie!==null&&(ie.return=w);ie!==null;){var We=ie.dependencies;if(We!==null){xe=ie.child;for(var pt=We.firstContext;pt!==null;){if(pt.context===z){if(ie.tag===1){pt=da(-1,O&-O),pt.tag=2;var Wt=ie.updateQueue;if(Wt!==null){Wt=Wt.shared;var fn=Wt.pending;fn===null?pt.next=pt:(pt.next=fn.next,fn.next=pt),Wt.pending=pt}}ie.lanes|=O,pt=ie.alternate,pt!==null&&(pt.lanes|=O),Vl(ie.return,O,w),We.lanes|=O;break}pt=pt.next}}else if(ie.tag===10)xe=ie.type===w.type?null:ie.child;else if(ie.tag===18){if(xe=ie.return,xe===null)throw Error(o(341));xe.lanes|=O,We=xe.alternate,We!==null&&(We.lanes|=O),Vl(xe,O,w),xe=ie.sibling}else xe=ie.child;if(xe!==null)xe.return=ie;else for(xe=ie;xe!==null;){if(xe===w){xe=null;break}if(ie=xe.sibling,ie!==null){ie.return=xe.return,xe=ie;break}xe=xe.return}ie=xe}jr(g,w,Z.children,O),w=w.child}return w;case 9:return Z=w.type,z=w.pendingProps.children,ec(w,O),Z=gs(Z),z=z(Z),w.flags|=1,jr(g,w,z,O),w.child;case 14:return z=w.type,Z=ms(z,w.pendingProps),Z=ms(z.type,Z),Mr(g,w,z,Z,O);case 15:return _a(g,w,w.type,w.pendingProps,O);case 17:return z=w.type,Z=w.pendingProps,Z=w.elementType===z?Z:ms(z,Z),g!==null&&(g.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,sr(z)?(g=!0,Fe(w)):g=!1,ec(w,O),ev(w,z,Z),K0(w,z,Z,O),Hi(null,w,z,!0,g,O);case 19:return tu(g,w,O);case 22:return ki(g,w,O)}throw Error(o(156,w.tag))};function rp(g,w){return Ul(g,w)}function yv(g,w,O,z){this.tag=g,this.key=O,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(g,w,O,z){return new yv(g,w,O,z)}function ip(g){return g=g.prototype,!(!g||!g.isReactComponent)}function oS(g){if(typeof g=="function")return ip(g)?1:0;if(g!=null){if(g=g.$$typeof,g===P)return 11;if(g===D)return 14}return 2}function Ca(g,w){var O=g.alternate;return O===null?(O=Gs(g.tag,w,g.key,g.mode),O.elementType=g.elementType,O.type=g.type,O.stateNode=g.stateNode,O.alternate=g,g.alternate=O):(O.pendingProps=w,O.type=g.type,O.flags=0,O.subtreeFlags=0,O.deletions=null),O.flags=g.flags&14680064,O.childLanes=g.childLanes,O.lanes=g.lanes,O.child=g.child,O.memoizedProps=g.memoizedProps,O.memoizedState=g.memoizedState,O.updateQueue=g.updateQueue,w=g.dependencies,O.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},O.sibling=g.sibling,O.index=g.index,O.ref=g.ref,O}function sp(g,w,O,z,Z,ie){var xe=2;if(z=g,typeof g=="function")ip(g)&&(xe=1);else if(typeof g=="string")xe=5;else e:switch(g){case h:return hu(O.children,Z,ie,w);case y:xe=8,Z|=8;break;case _:return g=Gs(12,O,w,Z|2),g.elementType=_,g.lanes=ie,g;case I:return g=Gs(13,O,w,Z),g.elementType=I,g.lanes=ie,g;case C:return g=Gs(19,O,w,Z),g.elementType=C,g.lanes=ie,g;case F:return qf(O,Z,ie,w);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case x:xe=10;break e;case A:xe=9;break e;case P:xe=11;break e;case D:xe=14;break e;case k:xe=16,z=null;break e}throw Error(o(130,g==null?g:typeof g,""))}return w=Gs(xe,O,w,Z),w.elementType=g,w.type=z,w.lanes=ie,w}function hu(g,w,O,z){return g=Gs(7,g,z,w),g.lanes=O,g}function qf(g,w,O,z){return g=Gs(22,g,z,w),g.elementType=F,g.lanes=O,g.stateNode={},g}function op(g,w,O){return g=Gs(6,g,null,w),g.lanes=O,g}function ap(g,w,O){return w=Gs(4,g.children!==null?g.children:[],g.key,w),w.lanes=O,w.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},w}function lp(g,w,O,z,Z){this.tag=w,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=z,this.onRecoverableError=Z,ge&&(this.mutableSourceEagerHydrationData=null)}function vv(g,w,O,z,Z,ie,xe,We,pt){return g=new lp(g,w,O,We,pt),w===1?(w=1,ie===!0&&(w|=8)):w=0,ie=Gs(3,null,null,w),g.current=ie,ie.stateNode=g,ie.memoizedState={element:z,isDehydrated:O,cache:null,transitions:null},tc(ie),g}function wv(g){if(!g)return Bt;g=g._reactInternals;e:{if(te(g)!==g||g.tag!==1)throw Error(o(170));var w=g;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(sr(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(g.tag===1){var O=g.type;if(sr(O))return Ve(g,O,w)}return w}function _v(g){var w=g._reactInternals;if(w===void 0)throw typeof g.render=="function"?Error(o(188)):(g=Object.keys(g).join(","),Error(o(268,g)));return g=K(w),g===null?null:g.stateNode}function uo(g,w){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var O=g.retryLane;g.retryLane=O!==0&&O<w?O:w}}function Kf(g,w){uo(g,w),(g=g.alternate)&&uo(g,w)}function up(g){return g=K(g),g===null?null:g.stateNode}function xv(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var w=ar();ji(g,134217728,w),Kf(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var w=ar(),O=Io(g);ji(g,O,w),Kf(g,O)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var w=g.stateNode;if(w.current.memoizedState.isDehydrated){var O=eo(w.pendingLanes);O!==0&&(Ko(w,O|1),ws(w,ci()),(Hn&6)===0&&(uu(),no()))}break;case 13:var z=ar();xc(function(){return ji(g,1,z)}),Kf(g,1)}},t.batchedUpdates=function(g,w){var O=Hn;Hn|=1;try{return g(w)}finally{Hn=O,Hn===0&&(uu(),Sd&&no())}},t.createComponentSelector=function(g){return{$$typeof:Df,value:g}},t.createContainer=function(g,w,O,z,Z,ie,xe){return vv(g,w,!1,null,O,z,Z,ie,xe)},t.createHasPseudoClassSelector=function(g){return{$$typeof:iu,value:g}},t.createHydrationContainer=function(g,w,O,z,Z,ie,xe,We,pt){return g=vv(O,z,!0,g,Z,ie,xe,We,pt),g.context=wv(null),O=g.current,z=ar(),Z=Io(O),ie=da(z,Z),ie.callback=w??null,Ja(O,ie),g.current.lanes=Z,Bl(g,Z,z),ws(g,z),g},t.createPortal=function(g,w,O){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:z==null?null:""+z,children:g,containerInfo:w,implementation:O}},t.createRoleSelector=function(g){return{$$typeof:su,value:g}},t.createTestNameSelector=function(g){return{$$typeof:Ea,value:g}},t.createTextSelector=function(g){return{$$typeof:yc,value:g}},t.deferredUpdates=function(g){var w=Yn,O=_r.transition;try{return _r.transition=null,Yn=16,g()}finally{Yn=w,_r.transition=O}},t.discreteUpdates=function(g,w,O,z,Z){var ie=Yn,xe=_r.transition;try{return _r.transition=null,Yn=1,g(w,O,z,Z)}finally{Yn=ie,_r.transition=xe,Hn===0&&uu()}},t.findAllNodes=ba,t.findBoundingRects=function(g,w){if(!fe)throw Error(o(363));w=ba(g,w),g=[];for(var O=0;O<w.length;O++)g.push(Oe(w[O]));for(w=g.length-1;0<w;w--){O=g[w];for(var z=O.x,Z=z+O.width,ie=O.y,xe=ie+O.height,We=w-1;0<=We;We--)if(w!==We){var pt=g[We],Wt=pt.x,fn=Wt+pt.width,Un=pt.y,bn=Un+pt.height;if(z>=Wt&&ie>=Un&&Z<=fn&&xe<=bn){g.splice(w,1);break}else if(z!==Wt||O.width!==pt.width||bn<ie||Un>xe){if(!(ie!==Un||O.height!==pt.height||fn<z||Wt>Z)){Wt>z&&(pt.width+=Wt-z,pt.x=z),fn<Z&&(pt.width=Z-Wt),g.splice(w,1);break}}else{Un>ie&&(pt.height+=Un-ie,pt.y=ie),bn<xe&&(pt.height=xe-Un),g.splice(w,1);break}}}return g},t.findHostInstance=_v,t.findHostInstanceWithNoPortals=function(g){return g=V(g),g=g!==null?a(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return _v(g)},t.flushControlled=function(g){var w=Hn;Hn|=1;var O=_r.transition,z=Yn;try{_r.transition=null,Yn=1,g()}finally{Yn=z,_r.transition=O,Hn=w,Hn===0&&(uu(),no())}},t.flushPassiveEffects=ea,t.flushSync=xc,t.focusWithin=function(g,w){if(!fe)throw Error(o(363));for(g=Bf(g),w=Ws(g,w),w=Array.from(w),g=0;g<w.length;){var O=w[g++];if(!Le(O)){if(O.tag===5&&et(O.stateNode))return!0;for(O=O.child;O!==null;)w.push(O),O=O.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Yn},t.getFindAllNodesFailureDescription=function(g,w){if(!fe)throw Error(o(363));var O=0,z=[];g=[Bf(g),0];for(var Z=0;Z<g.length;){var ie=g[Z++],xe=g[Z++],We=w[xe];if((ie.tag!==5||!Le(ie))&&(Uf(ie,We)&&(z.push(al(We)),xe++,xe>O&&(O=xe)),xe<w.length))for(ie=ie.child;ie!==null;)g.push(ie,xe),ie=ie.sibling}if(O<w.length){for(g=[];O<w.length;O++)g.push(al(w[O]));return`findAllNodes was able to match part of the selector:
  `+(z.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return M(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:up,findFiberByHostInstance:g.findFiberByHostInstance||xv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)g=!0;else{try{mf=w.inject(g),Yo=w}catch{}g=!!w.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,w,O,z){if(!fe)throw Error(o(363));g=ba(g,w);var Z=Ye(g,O,z).disconnect;return{disconnect:function(){Z()}}},t.registerMutableSourceForHydration=function(g,w){var O=w._getVersion;O=O(w._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[w,O]:g.mutableSourceEagerHydrationData.push(w,O)},t.runWithPriority=function(g,w){var O=Yn;try{return Yn=g,w()}finally{Yn=O}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,w,O,z){var Z=w.current,ie=ar(),xe=Io(Z);return O=wv(O),w.context===null?w.context=O:w.pendingContext=O,w=da(ie,xe),w.payload={element:g},z=z===void 0?null:z,z!==null&&(w.callback=z),Ja(Z,w),g=ji(Z,xe,ie),g!==null&&Ad(g,Z,xe),xe},t}),cb}var YL;function Soe(){return YL||(YL=1,ab.exports=xoe()),ab.exports}var Moe=Soe();const Eoe=Xa(Moe);var XL=oF();const JR={},aF=r=>void Object.assign(JR,r);function boe(r,e){function t(h,{args:y=[],attach:_,...x},A){let P=`${h[0].toUpperCase()}${h.slice(1)}`,I;if(h==="primitive"){if(x.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const C=x.object;I=Vp(C,{type:h,root:A,attach:_,primitive:!0})}else{const C=JR[P];if(!C)throw new Error(`R3F: ${P} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(y))throw new Error("R3F: The args prop must be an array!");I=Vp(new C(...y),{type:h,root:A,attach:_,memoizedProps:{args:y}})}return I.__r3f.attach===void 0&&(I.isBufferGeometry?I.__r3f.attach="geometry":I.isMaterial&&(I.__r3f.attach="material")),P!=="inject"&&db(I,x),I}function n(h,y){let _=!1;if(y){var x,A;(x=y.__r3f)!=null&&x.attach?hb(h,y,y.__r3f.attach):y.isObject3D&&h.isObject3D&&(h.add(y),_=!0),_||(A=h.__r3f)==null||A.objects.push(y),y.__r3f||Vp(y,{}),y.__r3f.parent=h,UA(y),Hp(y)}}function i(h,y,_){let x=!1;if(y){var A,P;if((A=y.__r3f)!=null&&A.attach)hb(h,y,y.__r3f.attach);else if(y.isObject3D&&h.isObject3D){y.parent=h,y.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:y});const I=h.children.filter(D=>D!==y),C=I.indexOf(_);h.children=[...I.slice(0,C),y,...I.slice(C)],x=!0}x||(P=h.__r3f)==null||P.objects.push(y),y.__r3f||Vp(y,{}),y.__r3f.parent=h,UA(y),Hp(y)}}function s(h,y,_=!1){h&&[...h].forEach(x=>o(y,x,_))}function o(h,y,_){if(y){var x,A,P;if(y.__r3f&&(y.__r3f.parent=null),(x=h.__r3f)!=null&&x.objects&&(h.__r3f.objects=h.__r3f.objects.filter(F=>F!==y)),(A=y.__r3f)!=null&&A.attach)ek(h,y,y.__r3f.attach);else if(y.isObject3D&&h.isObject3D){var I;h.remove(y),(I=y.__r3f)!=null&&I.root&&Poe(T_(y),y)}const D=(P=y.__r3f)==null?void 0:P.primitive,k=!D&&(_===void 0?y.dispose!==null:_);if(!D){var C;s((C=y.__r3f)==null?void 0:C.objects,y,k),s(y.children,y,k)}if(delete y.__r3f,k&&y.dispose&&y.type!=="Scene"){const F=()=>{try{y.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?XL.unstable_scheduleCallback(XL.unstable_IdlePriority,F):F()}Hp(h)}}function l(h,y,_,x){var A;const P=(A=h.__r3f)==null?void 0:A.parent;if(!P)return;const I=t(y,_,h.__r3f.root);if(h.children){for(const C of h.children)C.__r3f&&n(I,C);h.children=h.children.filter(C=>!C.__r3f)}h.__r3f.objects.forEach(C=>n(I,C)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(P,h),I.parent&&(I.__r3f.autoRemovedBeforeAppend=!0),n(P,I),I.raycast&&I.__r3f.eventCount&&T_(I).getState().internal.interaction.push(I),[x,x.alternate].forEach(C=>{C!==null&&(C.stateNode=I,C.ref&&(typeof C.ref=="function"?C.ref(I):C.ref.current=I))})}const c=()=>{};return{reconciler:Eoe({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,y)=>{if(!y)return;const _=h.getState().scene;_.__r3f&&(_.__r3f.root=h,n(_,y))},removeChildFromContainer:(h,y)=>{y&&o(h.getState().scene,y)},insertInContainerBefore:(h,y,_)=>{if(!y||!_)return;const x=h.getState().scene;x.__r3f&&i(x,y,_)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var y;return!!((y=h==null?void 0:h.__r3f)!=null?y:{}).handlers},prepareUpdate(h,y,_,x){var A;if(((A=h==null?void 0:h.__r3f)!=null?A:{}).primitive&&x.object&&x.object!==h)return[!0];{const{args:I=[],children:C,...D}=x,{args:k=[],children:F,...Q}=_;if(!Array.isArray(I))throw new Error("R3F: the args prop must be an array!");if(I.some((Y,ee)=>Y!==k[ee]))return[!0];const G=pF(h,D,Q,!0);return G.changes.length?[!1,G]:null}},commitUpdate(h,[y,_],x,A,P,I){y?l(h,x,P,I):db(h,_)},commitMount(h,y,_,x){var A;const P=(A=h.__r3f)!=null?A:{};h.raycast&&P.handlers&&P.eventCount&&T_(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Vp(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var y;const{attach:_,parent:x}=(y=h.__r3f)!=null?y:{};_&&x&&ek(x,h,_),h.isObject3D&&(h.visible=!1),Hp(h)},unhideInstance(h,y){var _;const{attach:x,parent:A}=(_=h.__r3f)!=null?_:{};x&&A&&hb(A,h,x),(h.isObject3D&&y.visible==null||y.visible)&&(h.visible=!0),Hp(h)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():s0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Gr.fun(performance.now)?performance.now:Gr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Gr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Gr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:db}}var $L,ZL;const fb=r=>"colorSpace"in r||"outputColorSpace"in r,lF=()=>{var r;return(r=JR.ColorManagement)!=null?r:null},uF=r=>r&&r.isOrthographicCamera,Aoe=r=>r&&r.hasOwnProperty("current"),Xy=typeof window<"u"&&(($L=window.document)!=null&&$L.createElement||((ZL=window.navigator)==null?void 0:ZL.product)==="ReactNative")?Se.useLayoutEffect:Se.useEffect;function cF(r){const e=Se.useRef(r);return Xy(()=>void(e.current=r),[r]),e}function Toe({set:r}){return Xy(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class fF extends Se.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}fF.getDerivedStateFromError=()=>({error:!0});const hF="__default",QL=new Map,Roe=r=>r&&!!r.memoized&&!!r.changes;function dF(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const ug=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function T_(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Gr={obj:r=>r===Object(r)&&!Gr.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(Gr.str(r)||Gr.num(r)||Gr.boo(r))return r===e;const s=Gr.obj(r);if(s&&n==="reference")return r===e;const o=Gr.arr(r);if(o&&t==="reference")return r===e;if((o||s)&&r===e)return!0;let l;for(l in r)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in i?e:r)if(!Gr.equ(r[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:r)if(r[l]!==e[l])return!1;if(Gr.und(l)){if(o&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function Coe(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Vp(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function BA(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,o)=>s[o],r),{target:t,key:i}}else return{target:t,key:e}}const JL=/-\d+$/;function hb(r,e,t){if(Gr.str(t)){if(JL.test(t)){const s=t.replace(JL,""),{target:o,key:l}=BA(r,s);Array.isArray(o[l])||(o[l]=[])}const{target:n,key:i}=BA(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function ek(r,e,t){var n,i;if(Gr.str(t)){const{target:s,key:o}=BA(r,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function pF(r,{children:e,key:t,ref:n,...i},{children:s,key:o,ref:l,...c}={},d=!1){const h=r.__r3f,y=Object.entries(i),_=[];if(d){const A=Object.keys(c);for(let P=0;P<A.length;P++)i.hasOwnProperty(A[P])||y.unshift([A[P],hF+"remove"])}y.forEach(([A,P])=>{var I;if((I=r.__r3f)!=null&&I.primitive&&A==="object"||Gr.equ(P,c[A]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(A))return _.push([A,P,!0,[]]);let C=[];A.includes("-")&&(C=A.split("-")),_.push([A,P,!1,C]);for(const D in i){const k=i[D];D.startsWith(`${A}-`)&&_.push([D,k,!1,D.split("-")])}});const x={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(x.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(x.attach=h.memoizedProps.attach),{memoized:x,changes:_}}function db(r,e){var t;const n=r.__r3f,i=n==null?void 0:n.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:l}=Roe(e)?e:pF(r,e),c=n==null?void 0:n.eventCount;r.__r3f&&(r.__r3f.memoizedProps=o);for(let _=0;_<l.length;_++){let[x,A,P,I]=l[_];if(fb(r)){const F="srgb",Q="srgb-linear";x==="encoding"?(x="colorSpace",A=A===3001?F:Q):x==="outputEncoding"&&(x="outputColorSpace",A=A===3001?F:Q)}let C=r,D=C[x];if(I.length&&(D=I.reduce((k,F)=>k[F],r),!(D&&D.set))){const[k,...F]=I.reverse();C=F.reverse().reduce((Q,G)=>Q[G],r),x=k}if(A===hF+"remove")if(C.constructor){let k=QL.get(C.constructor);k||(k=new C.constructor,QL.set(C.constructor,k)),A=k[x]}else A=0;if(P&&n)A?n.handlers[x]=A:delete n.handlers[x],n.eventCount=Object.keys(n.handlers).length;else if(D&&D.set&&(D.copy||D instanceof Yh)){if(Array.isArray(A))D.fromArray?D.fromArray(A):D.set(...A);else if(D.copy&&A&&A.constructor&&D.constructor===A.constructor)D.copy(A);else if(A!==void 0){var d;const k=(d=D)==null?void 0:d.isColor;!k&&D.setScalar?D.setScalar(A):D instanceof Yh&&A instanceof Yh?D.mask=A.mask:D.set(A),!lF()&&s&&!s.linear&&k&&D.convertSRGBToLinear()}}else{var h;if(C[x]=A,(h=C[x])!=null&&h.isTexture&&C[x].format===Ps&&C[x].type===Ka&&s){const k=C[x];fb(k)&&fb(s.gl)?k.colorSpace=s.gl.outputColorSpace:k.encoding=s.gl.outputEncoding}}Hp(r)}if(n&&n.parent&&r.raycast&&c!==n.eventCount){const _=T_(r).getState().internal,x=_.interaction.indexOf(r);x>-1&&_.interaction.splice(x,1),n.eventCount&&_.interaction.push(r)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=r.__r3f)!=null&&t.parent&&UA(r),r}function Hp(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function UA(r){r.onUpdate==null||r.onUpdate(r)}function Ioe(r,e){r.manual||(uF(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function n_(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function Noe(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return s0.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return s0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return s0.ContinuousEventPriority;default:return s0.DefaultEventPriority}}function mF(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function Poe(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{mF(t.capturedMap,e,n,i)})}function Loe(r){function e(c){const{internal:d}=r.getState(),h=c.offsetX-d.initialClick[0],y=c.offsetY-d.initialClick[1];return Math.round(Math.sqrt(h*h+y*y))}function t(c){return c.filter(d=>["Move","Over","Enter","Out","Leave"].some(h=>{var y;return(y=d.__r3f)==null?void 0:y.handlers["onPointer"+h]}))}function n(c,d){const h=r.getState(),y=new Set,_=[],x=d?d(h.internal.interaction):h.internal.interaction;for(let C=0;C<x.length;C++){const D=ug(x[C]);D&&(D.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(c,h);function A(C){const D=ug(C);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var k;D.events.compute==null||D.events.compute(c,D,(k=D.previousRoot)==null?void 0:k.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(C,!0):[]}let P=x.flatMap(A).sort((C,D)=>{const k=ug(C.object),F=ug(D.object);return!k||!F?C.distance-D.distance:F.events.priority-k.events.priority||C.distance-D.distance}).filter(C=>{const D=n_(C);return y.has(D)?!1:(y.add(D),!0)});h.events.filter&&(P=h.events.filter(P,h));for(const C of P){let D=C.object;for(;D;){var I;(I=D.__r3f)!=null&&I.eventCount&&_.push({...C,eventObject:D}),D=D.parent}}if("pointerId"in c&&h.internal.capturedMap.has(c.pointerId))for(let C of h.internal.capturedMap.get(c.pointerId).values())y.has(n_(C.intersection))||_.push(C.intersection);return _}function i(c,d,h,y){const _=r.getState();if(c.length){const x={stopped:!1};for(const A of c){const P=ug(A.object)||_,{raycaster:I,pointer:C,camera:D,internal:k}=P,F=new ve(C.x,C.y,0).unproject(D),Q=U=>{var V,K;return(V=(K=k.capturedMap.get(U))==null?void 0:K.has(A.eventObject))!=null?V:!1},G=U=>{const V={intersection:A,target:d.target};k.capturedMap.has(U)?k.capturedMap.get(U).set(A.eventObject,V):k.capturedMap.set(U,new Map([[A.eventObject,V]])),d.target.setPointerCapture(U)},Y=U=>{const V=k.capturedMap.get(U);V&&mF(k.capturedMap,A.eventObject,V,U)};let ee={};for(let U in d){let V=d[U];typeof V!="function"&&(ee[U]=V)}let te={...A,...ee,pointer:C,intersections:c,stopped:x.stopped,delta:h,unprojectedPoint:F,ray:I.ray,camera:D,stopPropagation(){const U="pointerId"in d&&k.capturedMap.get(d.pointerId);if((!U||U.has(A.eventObject))&&(te.stopped=x.stopped=!0,k.hovered.size&&Array.from(k.hovered.values()).find(V=>V.eventObject===A.eventObject))){const V=c.slice(0,c.indexOf(A));s([...V,A])}},target:{hasPointerCapture:Q,setPointerCapture:G,releasePointerCapture:Y},currentTarget:{hasPointerCapture:Q,setPointerCapture:G,releasePointerCapture:Y},nativeEvent:d};if(y(te),x.stopped===!0)break}}return c}function s(c){const{internal:d}=r.getState();for(const h of d.hovered.values())if(!c.length||!c.find(y=>y.object===h.object&&y.index===h.index&&y.instanceId===h.instanceId)){const _=h.eventObject.__r3f,x=_==null?void 0:_.handlers;if(d.hovered.delete(n_(h)),_!=null&&_.eventCount){const A={...h,intersections:c};x.onPointerOut==null||x.onPointerOut(A),x.onPointerLeave==null||x.onPointerLeave(A)}}}function o(c,d){for(let h=0;h<d.length;h++){const y=d[h].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return d=>{const{internal:h}=r.getState();"pointerId"in d&&h.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(d.pointerId)&&(h.capturedMap.delete(d.pointerId),s([]))})}}return function(h){const{onPointerMissed:y,internal:_}=r.getState();_.lastEvent.current=h;const x=c==="onPointerMove",A=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",I=n(h,x?t:void 0),C=A?e(h):0;c==="onPointerDown"&&(_.initialClick=[h.offsetX,h.offsetY],_.initialHits=I.map(k=>k.eventObject)),A&&!I.length&&C<=2&&(o(h,_.interaction),y&&y(h)),x&&s(I);function D(k){const F=k.eventObject,Q=F.__r3f,G=Q==null?void 0:Q.handlers;if(Q!=null&&Q.eventCount)if(x){if(G.onPointerOver||G.onPointerEnter||G.onPointerOut||G.onPointerLeave){const Y=n_(k),ee=_.hovered.get(Y);ee?ee.stopped&&k.stopPropagation():(_.hovered.set(Y,k),G.onPointerOver==null||G.onPointerOver(k),G.onPointerEnter==null||G.onPointerEnter(k))}G.onPointerMove==null||G.onPointerMove(k)}else{const Y=G[c];Y?(!A||_.initialHits.includes(F))&&(o(h,_.interaction.filter(ee=>!_.initialHits.includes(ee))),Y(k)):A&&_.initialHits.includes(F)&&o(h,_.interaction.filter(ee=>!_.initialHits.includes(ee)))}}i(I,h,C,D)}}return{handlePointer:l}}const gF=r=>!!(r!=null&&r.render),yF=Se.createContext(null),koe=(r,e)=>{const t=woe((l,c)=>{const d=new ve,h=new ve,y=new ve;function _(C=c().camera,D=h,k=c().size){const{width:F,height:Q,top:G,left:Y}=k,ee=F/Q;D.isVector3?y.copy(D):y.set(...D);const te=C.getWorldPosition(d).distanceTo(y);if(uF(C))return{width:F/C.zoom,height:Q/C.zoom,top:G,left:Y,factor:1,distance:te,aspect:ee};{const U=C.fov*Math.PI/180,V=2*Math.tan(U/2)*te,K=V*(F/Q);return{width:K,height:V,top:G,left:Y,factor:F/K,distance:te,aspect:ee}}}let x;const A=C=>l(D=>({performance:{...D.performance,current:C}})),P=new Mt;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(C=1)=>r(c(),C),advance:(C,D)=>e(C,D,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new YR,pointer:P,mouse:P,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const C=c();x&&clearTimeout(x),C.performance.current!==C.performance.min&&A(C.performance.min),x=setTimeout(()=>A(c().performance.max),C.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:C=>l(D=>({...D,events:{...D.events,...C}})),setSize:(C,D,k,F,Q)=>{const G=c().camera,Y={width:C,height:D,top:F||0,left:Q||0,updateStyle:k};l(ee=>({size:Y,viewport:{...ee.viewport,..._(G,h,Y)}}))},setDpr:C=>l(D=>{const k=dF(C);return{viewport:{...D.viewport,dpr:k,initialDpr:D.viewport.initialDpr||k}}}),setFrameloop:(C="always")=>{const D=c().clock;D.stop(),D.elapsedTime=0,C!=="never"&&(D.start(),D.elapsedTime=0),l(()=>({frameloop:C}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Se.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(C,D,k)=>{const F=c().internal;return F.priority=F.priority+(D>0?1:0),F.subscribers.push({ref:C,priority:D,store:k}),F.subscribers=F.subscribers.sort((Q,G)=>Q.priority-G.priority),()=>{const Q=c().internal;Q!=null&&Q.subscribers&&(Q.priority=Q.priority-(D>0?1:0),Q.subscribers=Q.subscribers.filter(G=>G.ref!==C))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:d,gl:h,set:y}=t.getState();if(c.width!==i.width||c.height!==i.height||d.dpr!==s){var _;i=c,s=d.dpr,Ioe(l,c),h.setPixelRatio(d.dpr);const x=(_=c.updateStyle)!=null?_:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(c.width,c.height,x)}l!==o&&(o=l,y(x=>({viewport:{...x.viewport,...x.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>r(l)),t};let r_,Ooe=new Set,Doe=new Set,Boe=new Set;function pb(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function cg(r,e){switch(r){case"before":return pb(Ooe,e);case"after":return pb(Doe,e);case"tail":return pb(Boe,e)}}let mb,gb;function yb(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),mb=e.internal.subscribers,r_=0;r_<mb.length;r_++)gb=mb[r_],gb.ref.current(gb.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Uoe(r){let e=!1,t=!1,n,i,s;function o(d){i=requestAnimationFrame(o),e=!0,n=0,cg("before",d),t=!0;for(const y of r.values()){var h;s=y.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(n+=yb(d,s))}if(t=!1,cg("after",d),n===0)return cg("tail",d),e=!1,cancelAnimationFrame(i)}function l(d,h=1){var y;if(!d)return r.forEach(_=>l(_.store.getState(),h));(y=d.gl.xr)!=null&&y.isPresenting||!d.internal.active||d.frameloop==="never"||(h>1?d.internal.frames=Math.min(60,d.internal.frames+h):t?d.internal.frames=2:d.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(d,h=!0,y,_){if(h&&cg("before",d),y)yb(d,y,_);else for(const x of r.values())yb(d,x.store.getState());h&&cg("after",d)}return{loop:o,invalidate:l,advance:c}}function vF(){const r=Se.useContext(yF);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function bu(r=t=>t,e){return vF()(r,e)}function df(r,e=0){const t=vF(),n=t.getState().internal.subscribe,i=cF(r);return Xy(()=>n(i,e,t),[e,n,t]),null}const T0=new Map,{invalidate:tk,advance:nk}=Uoe(T0),{reconciler:H1,applyProps:Fp}=boe(T0,Noe),zp={objects:"shallow",strict:!1},Foe=(r,e)=>{const t=typeof r=="function"?r(e):r;return gF(t)?t:new h5({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function zoe(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:o,updateStyle:l=t}=e;return{width:n,height:i,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:o}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Woe(r){const e=T0.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||koe(tk,nk),o=t||H1.createContainer(s,s0.ConcurrentRoot,null,!1,null,"",i,null);e||T0.set(r,{fiber:o,store:s});let l,c=!1,d;return{configure(h={}){let{gl:y,size:_,scene:x,events:A,onCreated:P,shadows:I=!1,linear:C=!1,flat:D=!1,legacy:k=!1,orthographic:F=!1,frameloop:Q="always",dpr:G=[1,2],performance:Y,raycaster:ee,camera:te,onPointerMissed:U}=h,V=s.getState(),K=V.gl;V.gl||V.set({gl:K=Foe(y,r)});let E=V.raycaster;E||V.set({raycaster:E=new iF});const{params:a,...p}=ee||{};if(Gr.equ(p,E,zp)||Fp(E,{...p}),Gr.equ(a,E.params,zp)||Fp(E,{params:{...E.params,...a}}),!V.camera||V.camera===d&&!Gr.equ(d,te,zp)){d=te;const N=te instanceof Wy,v=N?te:F?new Jc(0,0,0,0,.1,1e3):new gi(75,0,.1,1e3);N||(v.position.z=5,te&&(Fp(v,te),("aspect"in te||"left"in te||"right"in te||"bottom"in te||"top"in te)&&(v.manual=!0,v.updateProjectionMatrix())),!V.camera&&!(te!=null&&te.rotation)&&v.lookAt(0,0,0)),V.set({camera:v}),E.camera=v}if(!V.scene){let N;x!=null&&x.isScene?N=x:(N=new IR,x&&Fp(N,x)),V.set({scene:Vp(N)})}if(!V.xr){var M;const N=(S,W)=>{const $=s.getState();$.frameloop!=="never"&&nk(S,!0,$,W)},v=()=>{const S=s.getState();S.gl.xr.enabled=S.gl.xr.isPresenting,S.gl.xr.setAnimationLoop(S.gl.xr.isPresenting?N:null),S.gl.xr.isPresenting||tk(S)},u={connect(){const S=s.getState().gl;S.xr.addEventListener("sessionstart",v),S.xr.addEventListener("sessionend",v)},disconnect(){const S=s.getState().gl;S.xr.removeEventListener("sessionstart",v),S.xr.removeEventListener("sessionend",v)}};typeof((M=K.xr)==null?void 0:M.addEventListener)=="function"&&u.connect(),V.set({xr:u})}if(K.shadowMap){const N=K.shadowMap.enabled,v=K.shadowMap.type;if(K.shadowMap.enabled=!!I,Gr.boo(I))K.shadowMap.type=Rg;else if(Gr.str(I)){var R;const u={basic:u6,percentage:Mx,soft:Rg,variance:za};K.shadowMap.type=(R=u[I])!=null?R:Rg}else Gr.obj(I)&&Object.assign(K.shadowMap,I);(N!==K.shadowMap.enabled||v!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const T=lF();T&&("enabled"in T?T.enabled=!k:"legacyMode"in T&&(T.legacyMode=k)),c||Fp(K,{outputEncoding:C?3e3:3001,toneMapping:D?Cl:lR}),V.legacy!==k&&V.set(()=>({legacy:k})),V.linear!==C&&V.set(()=>({linear:C})),V.flat!==D&&V.set(()=>({flat:D})),y&&!Gr.fun(y)&&!gF(y)&&!Gr.equ(y,K,zp)&&Fp(K,y),A&&!V.events.handlers&&V.set({events:A(s)});const L=zoe(r,_);return Gr.equ(L,V.size,zp)||V.setSize(L.width,L.height,L.updateStyle,L.top,L.left),G&&V.viewport.dpr!==dF(G)&&V.setDpr(G),V.frameloop!==Q&&V.setFrameloop(Q),V.onPointerMissed||V.set({onPointerMissed:U}),Y&&!Gr.equ(Y,V.performance,zp)&&V.set(N=>({performance:{...N.performance,...Y}})),l=P,c=!0,this},render(h){return c||this.configure(),H1.updateContainer(lt.jsx(Voe,{store:s,children:h,onCreated:l,rootElement:r}),o,null,()=>{}),s},unmount(){wF(r)}}}function Voe({store:r,children:e,onCreated:t,rootElement:n}){return Xy(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),lt.jsx(yF.Provider,{value:r,children:e})}function wF(r,e){const t=T0.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),H1.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,o,l,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),Coe(i),T0.delete(r)}catch{}},500)})}}H1.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Se.version});const vb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Hoe(r){const{handlePointer:e}=Loe(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(vb).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,l])=>{const[c,d]=vb[o];t.addEventListener(c,l,{passive:d})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[l]=vb[s];n.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function rk(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function Goe({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Se.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Se.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=r?typeof r=="number"?r:r.scroll:null,d=r?typeof r=="number"?r:r.resize:null,h=Se.useRef(!1);Se.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[y,_,x]=Se.useMemo(()=>{const C=()=>{if(!l.current.element)return;const{left:D,top:k,width:F,height:Q,bottom:G,right:Y,x:ee,y:te}=l.current.element.getBoundingClientRect(),U={left:D,top:k,width:F,height:Q,bottom:G,right:Y,x:ee,y:te};l.current.element instanceof HTMLElement&&n&&(U.height=l.current.element.offsetHeight,U.width=l.current.element.offsetWidth),Object.freeze(U),h.current&&!Yoe(l.current.lastBounds,U)&&o(l.current.lastBounds=U)};return[C,d?rk(C,d):C,c?rk(C,c):C]},[o,n,c,d]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",x,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function P(){l.current.element&&(l.current.resizeObserver=new i(x),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(C=>C.addEventListener("scroll",x,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const I=C=>{!C||C===l.current.element||(A(),l.current.element=C,l.current.scrollContainers=_F(C),P())};return qoe(x,!!e),joe(_),Se.useEffect(()=>{A(),P()},[e,x,_]),Se.useEffect(()=>A,[]),[I,s,y]}function joe(r){Se.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function qoe(r,e){Se.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function _F(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,..._F(r.parentElement)]}const Koe=["x","y","top","bottom","left","right","width","height"],Yoe=(r,e)=>Koe.every(t=>r[t]===e[t]);var Xoe=Object.defineProperty,$oe=Object.defineProperties,Zoe=Object.getOwnPropertyDescriptors,ik=Object.getOwnPropertySymbols,Qoe=Object.prototype.hasOwnProperty,Joe=Object.prototype.propertyIsEnumerable,sk=(r,e,t)=>e in r?Xoe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ok=(r,e)=>{for(var t in e||(e={}))Qoe.call(e,t)&&sk(r,t,e[t]);if(ik)for(var t of ik(e))Joe.call(e,t)&&sk(r,t,e[t]);return r},eae=(r,e)=>$oe(r,Zoe(e)),ak,lk;typeof window<"u"&&((ak=window.document)!=null&&ak.createElement||((lk=window.navigator)==null?void 0:lk.product)==="ReactNative")?Se.useLayoutEffect:Se.useEffect;function xF(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=xF(n,e,t);if(i)return i;n=n.sibling}}function SF(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const uk=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=uk;return}return uk.apply(this,arguments)};const e2=SF(Se.createContext(null));class MF extends Se.Component{render(){return Se.createElement(e2.Provider,{value:this._reactInternals},this.props.children)}}function tae(){const r=Se.useContext(e2);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Se.useId();return Se.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=xF(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[r,e])}function nae(){const r=tae(),[e]=Se.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==e2&&!e.has(i)&&e.set(i,Se.useContext(SF(i)))}t=t.return}return e}function rae(){const r=nae();return Se.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>Se.createElement(e,null,Se.createElement(t.Provider,eae(ok({},n),{value:r.get(t)}))),e=>Se.createElement(MF,ok({},e))),[r])}const iae=Se.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:o=Hoe,eventSource:l,eventPrefix:c,shadows:d,linear:h,flat:y,legacy:_,orthographic:x,frameloop:A,dpr:P,performance:I,raycaster:C,camera:D,scene:k,onPointerMissed:F,onCreated:Q,...G},Y){Se.useMemo(()=>aF(poe),[]);const ee=rae(),[te,U]=Goe({scroll:!0,debounce:{scroll:50,resize:0},...n}),V=Se.useRef(null),K=Se.useRef(null);Se.useImperativeHandle(Y,()=>V.current);const E=cF(F),[a,p]=Se.useState(!1),[M,R]=Se.useState(!1);if(a)throw a;if(M)throw M;const T=Se.useRef(null);Xy(()=>{const N=V.current;U.width>0&&U.height>0&&N&&(T.current||(T.current=Woe(N)),T.current.configure({gl:s,events:o,shadows:d,linear:h,flat:y,legacy:_,orthographic:x,frameloop:A,dpr:P,performance:I,raycaster:C,camera:D,scene:k,size:U,onPointerMissed:(...v)=>E.current==null?void 0:E.current(...v),onCreated:v=>{v.events.connect==null||v.events.connect(l?Aoe(l)?l.current:l:K.current),c&&v.setEvents({compute:(u,S)=>{const W=u[c+"X"],$=u[c+"Y"];S.pointer.set(W/S.size.width*2-1,-($/S.size.height)*2+1),S.raycaster.setFromCamera(S.pointer,S.camera)}}),Q==null||Q(v)}}),T.current.render(lt.jsx(ee,{children:lt.jsx(fF,{set:R,children:lt.jsx(Se.Suspense,{fallback:lt.jsx(Toe,{set:p}),children:e??null})})})))}),Se.useEffect(()=>{const N=V.current;if(N)return()=>wF(N)},[]);const L=l?"none":"auto";return lt.jsx("div",{ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:L,...i},...G,children:lt.jsx("div",{ref:te,style:{width:"100%",height:"100%"},children:lt.jsx("canvas",{ref:V,style:{display:"block"},children:t})})})}),sae=Se.forwardRef(function(e,t){return lt.jsx(MF,{children:lt.jsx(iae,{...e,ref:t})})});function R0(){return R0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},R0.apply(null,arguments)}var oae=Object.defineProperty,aae=(r,e,t)=>e in r?oae(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,lae=(r,e,t)=>(aae(r,e+"",t),t);class uae{constructor(){lae(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var cae=Object.defineProperty,fae=(r,e,t)=>e in r?cae(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pn=(r,e,t)=>(fae(r,typeof e!="symbol"?e+"":e,t),t);const i_=new dd,ck=new Ru,hae=Math.cos(70*(Math.PI/180)),fk=(r,e)=>(r%e+e)%e;let dae=class extends uae{constructor(e,t){super(),Pn(this,"object"),Pn(this,"domElement"),Pn(this,"enabled",!0),Pn(this,"target",new ve),Pn(this,"minDistance",0),Pn(this,"maxDistance",1/0),Pn(this,"minZoom",0),Pn(this,"maxZoom",1/0),Pn(this,"minPolarAngle",0),Pn(this,"maxPolarAngle",Math.PI),Pn(this,"minAzimuthAngle",-1/0),Pn(this,"maxAzimuthAngle",1/0),Pn(this,"enableDamping",!1),Pn(this,"dampingFactor",.05),Pn(this,"enableZoom",!0),Pn(this,"zoomSpeed",1),Pn(this,"enableRotate",!0),Pn(this,"rotateSpeed",1),Pn(this,"enablePan",!0),Pn(this,"panSpeed",1),Pn(this,"screenSpacePanning",!0),Pn(this,"keyPanSpeed",7),Pn(this,"zoomToCursor",!1),Pn(this,"autoRotate",!1),Pn(this,"autoRotateSpeed",2),Pn(this,"reverseOrbit",!1),Pn(this,"reverseHorizontalOrbit",!1),Pn(this,"reverseVerticalOrbit",!1),Pn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Pn(this,"mouseButtons",{LEFT:wh.ROTATE,MIDDLE:wh.DOLLY,RIGHT:wh.PAN}),Pn(this,"touches",{ONE:_h.ROTATE,TWO:_h.DOLLY_PAN}),Pn(this,"target0"),Pn(this,"position0"),Pn(this,"zoom0"),Pn(this,"_domElementKeyEvents",null),Pn(this,"getPolarAngle"),Pn(this,"getAzimuthalAngle"),Pn(this,"setPolarAngle"),Pn(this,"setAzimuthalAngle"),Pn(this,"getDistance"),Pn(this,"getZoomScale"),Pn(this,"listenToKeyEvents"),Pn(this,"stopListenToKeyEvents"),Pn(this,"saveState"),Pn(this,"reset"),Pn(this,"update"),Pn(this,"connect"),Pn(this,"dispose"),Pn(this,"dollyIn"),Pn(this,"dollyOut"),Pn(this,"getScale"),Pn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=le=>{let Xe=fk(le,2*Math.PI),de=h.phi;de<0&&(de+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let Ce=Math.abs(Xe-de);2*Math.PI-Ce<Ce&&(Xe<de?Xe+=2*Math.PI:de+=2*Math.PI),y.phi=Xe-de,n.update()},this.setAzimuthalAngle=le=>{let Xe=fk(le,2*Math.PI),de=h.theta;de<0&&(de+=2*Math.PI),Xe<0&&(Xe+=2*Math.PI);let Ce=Math.abs(Xe-de);2*Math.PI-Ce<Ce&&(Xe<de?Xe+=2*Math.PI:de+=2*Math.PI),y.theta=Xe-de,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=le=>{le.addEventListener("keydown",bt),this._domElementKeyEvents=le},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",bt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),c=l.NONE},this.update=(()=>{const le=new ve,Xe=new ve(0,1,0),de=new ks().setFromUnitVectors(e.up,Xe),Ce=de.clone().invert(),Ue=new ve,Ee=new ks,qe=2*Math.PI;return function(){const ft=n.object.position;de.setFromUnitVectors(e.up,Xe),Ce.copy(de).invert(),le.copy(ft).sub(n.target),le.applyQuaternion(de),h.setFromVector3(le),n.autoRotate&&c===l.NONE&&a(K()),n.enableDamping?(h.theta+=y.theta*n.dampingFactor,h.phi+=y.phi*n.dampingFactor):(h.theta+=y.theta,h.phi+=y.phi);let yt=n.minAzimuthAngle,Sn=n.maxAzimuthAngle;isFinite(yt)&&isFinite(Sn)&&(yt<-Math.PI?yt+=qe:yt>Math.PI&&(yt-=qe),Sn<-Math.PI?Sn+=qe:Sn>Math.PI&&(Sn-=qe),yt<=Sn?h.theta=Math.max(yt,Math.min(Sn,h.theta)):h.theta=h.theta>(yt+Sn)/2?Math.max(yt,h.theta):Math.min(Sn,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(x,n.dampingFactor):n.target.add(x),n.zoomToCursor&&te||n.object.isOrthographicCamera?h.radius=S(h.radius):h.radius=S(h.radius*_),le.setFromSpherical(h),le.applyQuaternion(Ce),ft.copy(n.target).add(le),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,x.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),x.set(0,0,0));let dt=!1;if(n.zoomToCursor&&te){let ae=null;if(n.object instanceof gi&&n.object.isPerspectiveCamera){const J=le.length();ae=S(J*_);const X=J-ae;n.object.position.addScaledVector(Y,X),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const J=new ve(ee.x,ee.y,0);J.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix(),dt=!0;const X=new ve(ee.x,ee.y,0);X.unproject(n.object),n.object.position.sub(X).add(J),n.object.updateMatrixWorld(),ae=le.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;ae!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(ae).add(n.object.position):(i_.origin.copy(n.object.position),i_.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(i_.direction))<hae?e.lookAt(n.target):(ck.setFromNormalAndCoplanarPoint(n.object.up,n.target),i_.intersectPlane(ck,n.target))))}else n.object instanceof Jc&&n.object.isOrthographicCamera&&(dt=_!==1,dt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix()));return _=1,te=!1,dt||Ue.distanceToSquared(n.object.position)>d||8*(1-Ee.dot(n.object.quaternion))>d?(n.dispatchEvent(i),Ue.copy(n.object.position),Ee.copy(n.object.quaternion),dt=!1,!0):!1}})(),this.connect=le=>{n.domElement=le,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",j),n.domElement.addEventListener("pointerdown",Oe),n.domElement.addEventListener("pointercancel",Le),n.domElement.addEventListener("wheel",Ye)},this.dispose=()=>{var le,Xe,de,Ce,Ue,Ee;n.domElement&&(n.domElement.style.touchAction="auto"),(le=n.domElement)==null||le.removeEventListener("contextmenu",j),(Xe=n.domElement)==null||Xe.removeEventListener("pointerdown",Oe),(de=n.domElement)==null||de.removeEventListener("pointercancel",Le),(Ce=n.domElement)==null||Ce.removeEventListener("wheel",Ye),(Ue=n.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",Re),(Ee=n.domElement)==null||Ee.ownerDocument.removeEventListener("pointerup",Le),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",bt)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const d=1e-6,h=new V1,y=new V1;let _=1;const x=new ve,A=new Mt,P=new Mt,I=new Mt,C=new Mt,D=new Mt,k=new Mt,F=new Mt,Q=new Mt,G=new Mt,Y=new ve,ee=new Mt;let te=!1;const U=[],V={};function K(){return 2*Math.PI/60/60*n.autoRotateSpeed}function E(){return Math.pow(.95,n.zoomSpeed)}function a(le){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=le:y.theta-=le}function p(le){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=le:y.phi-=le}const M=(()=>{const le=new ve;return function(de,Ce){le.setFromMatrixColumn(Ce,0),le.multiplyScalar(-de),x.add(le)}})(),R=(()=>{const le=new ve;return function(de,Ce){n.screenSpacePanning===!0?le.setFromMatrixColumn(Ce,1):(le.setFromMatrixColumn(Ce,0),le.crossVectors(n.object.up,le)),le.multiplyScalar(de),x.add(le)}})(),T=(()=>{const le=new ve;return function(de,Ce){const Ue=n.domElement;if(Ue&&n.object instanceof gi&&n.object.isPerspectiveCamera){const Ee=n.object.position;le.copy(Ee).sub(n.target);let qe=le.length();qe*=Math.tan(n.object.fov/2*Math.PI/180),M(2*de*qe/Ue.clientHeight,n.object.matrix),R(2*Ce*qe/Ue.clientHeight,n.object.matrix)}else Ue&&n.object instanceof Jc&&n.object.isOrthographicCamera?(M(de*(n.object.right-n.object.left)/n.object.zoom/Ue.clientWidth,n.object.matrix),R(Ce*(n.object.top-n.object.bottom)/n.object.zoom/Ue.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function L(le){n.object instanceof gi&&n.object.isPerspectiveCamera||n.object instanceof Jc&&n.object.isOrthographicCamera?_=le:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(le){L(_/le)}function v(le){L(_*le)}function u(le){if(!n.zoomToCursor||!n.domElement)return;te=!0;const Xe=n.domElement.getBoundingClientRect(),de=le.clientX-Xe.left,Ce=le.clientY-Xe.top,Ue=Xe.width,Ee=Xe.height;ee.x=de/Ue*2-1,ee.y=-(Ce/Ee)*2+1,Y.set(ee.x,ee.y,1).unproject(n.object).sub(n.object.position).normalize()}function S(le){return Math.max(n.minDistance,Math.min(n.maxDistance,le))}function W(le){A.set(le.clientX,le.clientY)}function $(le){u(le),F.set(le.clientX,le.clientY)}function se(le){C.set(le.clientX,le.clientY)}function me(le){P.set(le.clientX,le.clientY),I.subVectors(P,A).multiplyScalar(n.rotateSpeed);const Xe=n.domElement;Xe&&(a(2*Math.PI*I.x/Xe.clientHeight),p(2*Math.PI*I.y/Xe.clientHeight)),A.copy(P),n.update()}function _e(le){Q.set(le.clientX,le.clientY),G.subVectors(Q,F),G.y>0?N(E()):G.y<0&&v(E()),F.copy(Q),n.update()}function Ae(le){D.set(le.clientX,le.clientY),k.subVectors(D,C).multiplyScalar(n.panSpeed),T(k.x,k.y),C.copy(D),n.update()}function _t(le){u(le),le.deltaY<0?v(E()):le.deltaY>0&&N(E()),n.update()}function Ze(le){let Xe=!1;switch(le.code){case n.keys.UP:T(0,n.keyPanSpeed),Xe=!0;break;case n.keys.BOTTOM:T(0,-n.keyPanSpeed),Xe=!0;break;case n.keys.LEFT:T(n.keyPanSpeed,0),Xe=!0;break;case n.keys.RIGHT:T(-n.keyPanSpeed,0),Xe=!0;break}Xe&&(le.preventDefault(),n.update())}function Pe(){if(U.length==1)A.set(U[0].pageX,U[0].pageY);else{const le=.5*(U[0].pageX+U[1].pageX),Xe=.5*(U[0].pageY+U[1].pageY);A.set(le,Xe)}}function ge(){if(U.length==1)C.set(U[0].pageX,U[0].pageY);else{const le=.5*(U[0].pageX+U[1].pageX),Xe=.5*(U[0].pageY+U[1].pageY);C.set(le,Xe)}}function Ge(){const le=U[0].pageX-U[1].pageX,Xe=U[0].pageY-U[1].pageY,de=Math.sqrt(le*le+Xe*Xe);F.set(0,de)}function je(){n.enableZoom&&Ge(),n.enablePan&&ge()}function vt(){n.enableZoom&&Ge(),n.enableRotate&&Pe()}function He(le){if(U.length==1)P.set(le.pageX,le.pageY);else{const de=ye(le),Ce=.5*(le.pageX+de.x),Ue=.5*(le.pageY+de.y);P.set(Ce,Ue)}I.subVectors(P,A).multiplyScalar(n.rotateSpeed);const Xe=n.domElement;Xe&&(a(2*Math.PI*I.x/Xe.clientHeight),p(2*Math.PI*I.y/Xe.clientHeight)),A.copy(P)}function nt(le){if(U.length==1)D.set(le.pageX,le.pageY);else{const Xe=ye(le),de=.5*(le.pageX+Xe.x),Ce=.5*(le.pageY+Xe.y);D.set(de,Ce)}k.subVectors(D,C).multiplyScalar(n.panSpeed),T(k.x,k.y),C.copy(D)}function Pt(le){const Xe=ye(le),de=le.pageX-Xe.x,Ce=le.pageY-Xe.y,Ue=Math.sqrt(de*de+Ce*Ce);Q.set(0,Ue),G.set(0,Math.pow(Q.y/F.y,n.zoomSpeed)),N(G.y),F.copy(Q)}function fe(le){n.enableZoom&&Pt(le),n.enablePan&&nt(le)}function oe(le){n.enableZoom&&Pt(le),n.enableRotate&&He(le)}function Oe(le){var Xe,de;n.enabled!==!1&&(U.length===0&&((Xe=n.domElement)==null||Xe.ownerDocument.addEventListener("pointermove",Re),(de=n.domElement)==null||de.ownerDocument.addEventListener("pointerup",Le)),q(le),le.pointerType==="touch"?ct(le):ot(le))}function Re(le){n.enabled!==!1&&(le.pointerType==="touch"?re(le):et(le))}function Le(le){var Xe,de,Ce;ue(le),U.length===0&&((Xe=n.domElement)==null||Xe.releasePointerCapture(le.pointerId),(de=n.domElement)==null||de.ownerDocument.removeEventListener("pointermove",Re),(Ce=n.domElement)==null||Ce.ownerDocument.removeEventListener("pointerup",Le)),n.dispatchEvent(o),c=l.NONE}function ot(le){let Xe;switch(le.button){case 0:Xe=n.mouseButtons.LEFT;break;case 1:Xe=n.mouseButtons.MIDDLE;break;case 2:Xe=n.mouseButtons.RIGHT;break;default:Xe=-1}switch(Xe){case wh.DOLLY:if(n.enableZoom===!1)return;$(le),c=l.DOLLY;break;case wh.ROTATE:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enablePan===!1)return;se(le),c=l.PAN}else{if(n.enableRotate===!1)return;W(le),c=l.ROTATE}break;case wh.PAN:if(le.ctrlKey||le.metaKey||le.shiftKey){if(n.enableRotate===!1)return;W(le),c=l.ROTATE}else{if(n.enablePan===!1)return;se(le),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function et(le){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;me(le);break;case l.DOLLY:if(n.enableZoom===!1)return;_e(le);break;case l.PAN:if(n.enablePan===!1)return;Ae(le);break}}function Ye(le){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(le.preventDefault(),n.dispatchEvent(s),_t(le),n.dispatchEvent(o))}function bt(le){n.enabled===!1||n.enablePan===!1||Ze(le)}function ct(le){switch(we(le),U.length){case 1:switch(n.touches.ONE){case _h.ROTATE:if(n.enableRotate===!1)return;Pe(),c=l.TOUCH_ROTATE;break;case _h.PAN:if(n.enablePan===!1)return;ge(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case _h.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;je(),c=l.TOUCH_DOLLY_PAN;break;case _h.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;vt(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function re(le){switch(we(le),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;He(le),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;nt(le),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;fe(le),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;oe(le),n.update();break;default:c=l.NONE}}function j(le){n.enabled!==!1&&le.preventDefault()}function q(le){U.push(le)}function ue(le){delete V[le.pointerId];for(let Xe=0;Xe<U.length;Xe++)if(U[Xe].pointerId==le.pointerId){U.splice(Xe,1);return}}function we(le){let Xe=V[le.pointerId];Xe===void 0&&(Xe=new Mt,V[le.pointerId]=Xe),Xe.set(le.pageX,le.pageY)}function ye(le){const Xe=le.pointerId===U[0].pointerId?U[1]:U[0];return V[Xe.pointerId]}this.dollyIn=(le=E())=>{v(le),n.update()},this.dollyOut=(le=E())=>{N(le),n.update()},this.getScale=()=>_,this.setScale=le=>{L(le),n.update()},this.getZoomScale=()=>E(),t!==void 0&&this.connect(t),this.update()}};const pae=()=>parseInt(By.replace(/\D+/g,"")),EF=pae(),mae=Se.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:c,...d},h)=>{const y=bu(G=>G.invalidate),_=bu(G=>G.camera),x=bu(G=>G.gl),A=bu(G=>G.events),P=bu(G=>G.setEvents),I=bu(G=>G.set),C=bu(G=>G.get),D=bu(G=>G.performance),k=e||_,F=n||A.connected||x.domElement,Q=Se.useMemo(()=>new dae(k),[k]);return df(()=>{Q.enabled&&Q.update()},-1),Se.useEffect(()=>(s&&Q.connect(s===!0?F:s),Q.connect(F),()=>void Q.dispose()),[s,F,t,Q,y]),Se.useEffect(()=>{const G=te=>{y(),t&&D.regress(),o&&o(te)},Y=te=>{l&&l(te)},ee=te=>{c&&c(te)};return Q.addEventListener("change",G),Q.addEventListener("start",Y),Q.addEventListener("end",ee),()=>{Q.removeEventListener("start",Y),Q.removeEventListener("end",ee),Q.removeEventListener("change",G)}},[o,l,c,Q,y,P]),Se.useEffect(()=>{if(r){const G=C().controls;return I({controls:Q}),()=>I({controls:G})}},[r,Q]),Se.createElement("primitive",R0({ref:h,object:Q,enableDamping:i},d))});var gae=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class yae extends WR{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${gae}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const vae=Se.forwardRef(({speed:r=1,...e},t)=>{const[n]=Se.useState(()=>new yae);return df(i=>n&&(n.time=i.clock.elapsedTime*r)),Se.createElement("primitive",R0({object:n,ref:t,attach:"material"},e))});function wae(r,e){const t=r+"Geometry";return Se.forwardRef(({args:n,children:i,...s},o)=>{const l=Se.useRef(null);return Se.useImperativeHandle(o,()=>l.current),Se.useLayoutEffect(()=>void(e==null?void 0:e(l.current))),Se.createElement("mesh",R0({ref:l},s),Se.createElement(t,{attach:"geometry",args:n}),i)})}const hk=wae("sphere"),_ae=Se.forwardRef(({children:r,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...l},c)=>{const d=Se.useRef(null);Se.useImperativeHandle(c,()=>d.current,[]);const h=Se.useRef(Math.random()*1e4);return df(y=>{var _,x;if(!e||t===0)return;o&&y.invalidate();const A=h.current+y.clock.elapsedTime;d.current.rotation.x=Math.cos(A/4*t)/8*n,d.current.rotation.y=Math.sin(A/4*t)/8*n,d.current.rotation.z=Math.sin(A/4*t)/20*n;let P=Math.sin(A/4*t)/10;P=SR.mapLinear(P,-.1,.1,(_=s==null?void 0:s[0])!==null&&_!==void 0?_:-.1,(x=s==null?void 0:s[1])!==null&&x!==void 0?x:.1),d.current.position.y=P*i,d.current.updateMatrix()}),Se.createElement("group",l,Se.createElement("group",{ref:d,matrixAutoUpdate:!1},r))});class xae extends jo{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${EF>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Sae=r=>new ve().setFromSpherical(new V1(r,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Mae=Se.forwardRef(({radius:r=100,depth:e=50,count:t=5e3,saturation:n=0,factor:i=4,fade:s=!1,speed:o=1},l)=>{const c=Se.useRef(),[d,h,y]=Se.useMemo(()=>{const x=[],A=[],P=Array.from({length:t},()=>(.5+.5*Math.random())*i),I=new en;let C=r+e;const D=e/t;for(let k=0;k<t;k++)C-=D*Math.random(),x.push(...Sae(C).toArray()),I.setHSL(k/t,n,.9),A.push(I.r,I.g,I.b);return[new Float32Array(x),new Float32Array(A),new Float32Array(P)]},[t,e,i,r,n]);df(x=>c.current&&(c.current.uniforms.time.value=x.clock.elapsedTime*o));const[_]=Se.useState(()=>new xae);return Se.createElement("points",{ref:l},Se.createElement("bufferGeometry",null,Se.createElement("bufferAttribute",{attach:"attributes-position",args:[d,3]}),Se.createElement("bufferAttribute",{attach:"attributes-color",args:[h,3]}),Se.createElement("bufferAttribute",{attach:"attributes-size",args:[y,1]})),Se.createElement("primitive",{ref:c,object:_,attach:"material",blending:Jg,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});class Eae extends jo{constructor(){super({uniforms:{time:{value:0},pixelRatio:{value:1}},vertexShader:`
        uniform float pixelRatio;
        uniform float time;
        attribute float size;  
        attribute float speed;  
        attribute float opacity;
        attribute vec3 noise;
        attribute vec3 color;
        varying vec3 vColor;
        varying float vOpacity;

        void main() {
          vec4 modelPosition = modelMatrix * vec4(position, 1.0);
          modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
          modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
          modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
          vec4 viewPosition = viewMatrix * modelPosition;
          vec4 projectionPostion = projectionMatrix * viewPosition;
          gl_Position = projectionPostion;
          gl_PointSize = size * 25. * pixelRatio;
          gl_PointSize *= (1.0 / - viewPosition.z);
          vColor = color;
          vOpacity = opacity;
        }
      `,fragmentShader:`
        varying vec3 vColor;
        varying float vOpacity;
        void main() {
          float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
          float strength = 0.05 / distanceToCenter - 0.1;
          gl_FragColor = vec4(vColor, strength * vOpacity);
          #include <tonemapping_fragment>
          #include <${EF>=154?"colorspace_fragment":"encodings_fragment"}>
        }
      `})}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}get pixelRatio(){return this.uniforms.pixelRatio.value}set pixelRatio(e){this.uniforms.pixelRatio.value=e}}const bF=r=>r&&r.constructor===Float32Array,bae=r=>[r.r,r.g,r.b],AF=r=>r instanceof Mt||r instanceof ve||r instanceof fr,TF=r=>Array.isArray(r)?r:AF(r)?r.toArray():[r,r,r];function fg(r,e,t){return Se.useMemo(()=>{if(e!==void 0){if(bF(e))return e;if(e instanceof en){const n=Array.from({length:r*3},()=>bae(e)).flat();return Float32Array.from(n)}else if(AF(e)||Array.isArray(e)){const n=Array.from({length:r*3},()=>TF(e)).flat();return Float32Array.from(n)}return Float32Array.from({length:r},()=>e)}return Float32Array.from({length:r},t)},[e])}const Aae=Se.forwardRef(({noise:r=1,count:e=100,speed:t=1,opacity:n=1,scale:i=1,size:s,color:o,children:l,...c},d)=>{Se.useMemo(()=>aF({SparklesImplMaterial:Eae}),[]);const h=Se.useRef(null),y=bu(k=>k.viewport.dpr),_=TF(i),x=Se.useMemo(()=>Float32Array.from(Array.from({length:e},()=>_.map(SR.randFloatSpread)).flat()),[e,..._]),A=fg(e,s,Math.random),P=fg(e,n),I=fg(e,t),C=fg(e*3,r),D=fg(o===void 0?e*3:e,bF(o)?o:new en(o),()=>1);return df(k=>{h.current&&h.current.material&&(h.current.material.time=k.clock.elapsedTime)}),Se.useImperativeHandle(d,()=>h.current,[]),Se.createElement("points",R0({key:`particle-${e}-${JSON.stringify(i)}`},c,{ref:h}),Se.createElement("bufferGeometry",null,Se.createElement("bufferAttribute",{attach:"attributes-position",args:[x,3]}),Se.createElement("bufferAttribute",{attach:"attributes-size",args:[A,1]}),Se.createElement("bufferAttribute",{attach:"attributes-opacity",args:[P,1]}),Se.createElement("bufferAttribute",{attach:"attributes-speed",args:[I,1]}),Se.createElement("bufferAttribute",{attach:"attributes-color",args:[D,3]}),Se.createElement("bufferAttribute",{attach:"attributes-noise",args:[C,3]})),l||Se.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:y,depthWrite:!1}))});function s_({position:r,color:e}){const t=Se.useRef(null);return df(n=>{if(t.current){t.current.rotation.x=n.clock.getElapsedTime()*.2,t.current.rotation.y=n.clock.getElapsedTime()*.3;const i=1+Math.sin(n.clock.getElapsedTime()*2)*.1;t.current.scale.set(i,i,i)}}),lt.jsxs(_ae,{speed:2,rotationIntensity:1,floatIntensity:2,children:[lt.jsx(hk,{ref:t,args:[1,64,64],position:r,children:lt.jsx(vae,{color:e,attach:"material",distort:.5,speed:2,roughness:.1,metalness:.9,emissive:e,emissiveIntensity:.3})}),lt.jsx(hk,{args:[1.2,32,32],position:r,children:lt.jsx("meshBasicMaterial",{color:e,transparent:!0,opacity:.1,side:Ls})})]})}function Tae(){const r=Se.useRef(null),e=2e3,t=Se.useMemo(()=>{const i=new Float32Array(e*3);for(let s=0;s<e*3;s++)i[s]=(Math.random()-.5)*25;return i},[]),n=Se.useMemo(()=>{const i=new Float32Array(e*3),s=[new en("#667eea"),new en("#764ba2"),new en("#f093fb"),new en("#4facfe")];for(let o=0;o<e;o++){const l=s[Math.floor(Math.random()*s.length)];i[o*3]=l.r,i[o*3+1]=l.g,i[o*3+2]=l.b}return i},[]);return df(i=>{r.current&&(r.current.rotation.y=i.clock.getElapsedTime()*.05,r.current.rotation.x=i.clock.getElapsedTime()*.02)}),lt.jsxs("points",{ref:r,children:[lt.jsxs("bufferGeometry",{children:[lt.jsx("bufferAttribute",{attach:"attributes-position",count:e,array:t,itemSize:3}),lt.jsx("bufferAttribute",{attach:"attributes-color",count:e,array:n,itemSize:3})]}),lt.jsx("pointsMaterial",{size:.03,vertexColors:!0,transparent:!0,opacity:.8,sizeAttenuation:!0,blending:Jg})]})}function Rae(){const r=Se.useRef(null);return df(e=>{r.current&&(r.current.rotation.x=e.clock.getElapsedTime()*.1,r.current.rotation.z=e.clock.getElapsedTime()*.15)}),lt.jsxs("mesh",{ref:r,children:[lt.jsx("torusGeometry",{args:[5,.05,16,100]}),lt.jsx("meshBasicMaterial",{color:"#667eea",transparent:!0,opacity:.2,side:Va})]})}function Cae(){return lt.jsxs(sae,{camera:{position:[0,0,8],fov:50},dpr:[1,2],children:[lt.jsx("color",{attach:"background",args:["#0a0a0f"]}),lt.jsx("ambientLight",{intensity:.3}),lt.jsx("pointLight",{position:[10,10,10],intensity:1.5,color:"#667eea"}),lt.jsx("pointLight",{position:[-10,-10,-10],intensity:1,color:"#764ba2"}),lt.jsx("pointLight",{position:[0,10,-10],intensity:.8,color:"#f093fb"}),lt.jsx("spotLight",{position:[0,5,0],angle:.3,penumbra:1,intensity:1,color:"#4facfe"}),lt.jsx(Mae,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1}),lt.jsx(s_,{position:[-2.5,1,0],color:"#667eea"}),lt.jsx(s_,{position:[2.5,-1,-2],color:"#764ba2"}),lt.jsx(s_,{position:[0,2.5,-1],color:"#f093fb"}),lt.jsx(s_,{position:[-1,-2,-3],color:"#4facfe"}),lt.jsx(Tae,{}),lt.jsx(Rae,{}),lt.jsx(Aae,{count:100,scale:10,size:2,speed:.4,opacity:.6,color:"#a78bfa"}),lt.jsx(mae,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:.3,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2})]})}function Iae(){const[r,e]=Se.useState(!1),t=Pb.Devnet,n=Se.useMemo(()=>kO(t),[t]),i=Se.useMemo(()=>[new RG,new OG],[]);return lt.jsx(x7,{endpoint:n,children:lt.jsx(mG,{wallets:i,autoConnect:!0,children:lt.jsxs(SG,{children:[lt.jsx("div",{className:"bg-gradient"}),lt.jsx("div",{className:"stars"}),lt.jsx("div",{className:"canvas-container",children:lt.jsx(Se.Suspense,{fallback:null,children:lt.jsx(Cae,{})})}),lt.jsx(Qb,{mode:"wait",children:r?lt.jsx(oQ,{},"minter"):lt.jsx(mX,{onGetStarted:()=>e(!0)},"landing")}),r&&lt.jsx("button",{className:"back-button",onClick:()=>e(!1),title:"Back to Home",children:"← Back"})]})})})}lz.createRoot(document.getElementById("root")).render(lt.jsx(Ft.StrictMode,{children:lt.jsx(Iae,{})}));export{JA as E,Et as P,Nu as S,cr as T,Vg as V,Qi as a,Wp as b,Xa as g};
